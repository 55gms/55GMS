<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="icon" type="image/x-icon" href="/img/favicon.ico" />
    <script src="/assets/js/font.js"></script>
    <meta name="google" content="notranslate" />
    <link rel="stylesheet" type="text/css" href="/assets/css/style.css" />
    <link rel="stylesheet" href="/assets/css/nav.css?v=3" />
    <title>Google</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Rednotsus" />
    <meta http-equiv="Cache-control" content="public">
    <meta charset="utf-8">
    <meta name="description"
        content="Canvas LMS is an open and reliable web-based software that allows institutions to manage digital learning, educators to create and present online learning materials and assess student learning, and students to engage in courses and receive feedback about skill development and learning achievement." />
    <meta name="keywords"
        content="unblocked games, 55gms tk, 55gms, reds exploit corner, games, unblocked, site, lanier, lanier middle school, gg, Minecraft, discord, chromebook, chromeos, rednotsus, vanillacraft, eaglercraft unblocked, resent client unblocked, fun, cool, proxy, slope unblocked, free, unblocked monkey mart, 555gms, 5gms, school" />
    </script>
    <script src="/assets/js/script.js?v=11"></script>
    <script src="/assets/js/easteregg.min.js" async></script>
    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<style>
    @import url("https://fonts.googleapis.com/css2?family=Inter&display=swap");


    .form__input {
        padding: 1vw;
        width: 40%;
        border-radius: 5px;
        background: #7a8fab;
        text-align: center;
        font-size: 24px;
        border: none;
        outline: none;
        color: white;
        transition: 0.2s;
        margin: 0;
    }

    .form__input::placeholder {
        font-family: "Inter", Arial, Helvetica, sans-serif;
        font-size: 16px;
        color: #ffffff;
        text-align: center;
        opacity: 0.4;
    }

    .form_input:hover {
        background: #6f829b
    }

    .form__input:focus {
        outline: none;
        background: #6f829b
    }
</style>
<script>
    async function signup() {
        const signupButton = document.getElementById("signupButton");
        const signupLoader = document.getElementById("signupLoader");

        // Disable the button and show the loader
        signupButton.disabled = true;
        signupLoader.style.display = "inline-block";

        var password = document.getElementById("password").value;
        var user = document.getElementById("user").value;
        var hcaptcha = document.querySelector('[name="h-captcha-response"]').value;
        if (password == "" || user == "") {
            Swal.fire({
                icon: "error",
                text: "Please fill in all the fields",
            });
            signupButton.disabled = false;
            signupLoader.style.display = "none";
            return;
        } else if (hcaptcha == "") {
            Swal.fire({
                icon: "error",
                text: "Please complete the captcha",
            });
            signupButton.disabled = false;
            signupLoader.style.display = "none";
            return;
        }
        if (password.length < 6) {
            Swal.fire({
                icon: "error",
                text: "Password must be at least 6 characters",
            });
            signupButton.disabled = false;
            signupLoader.style.display = "none";
            return;
        }
        if (user.length < 3) {
            Swal.fire({
                icon: "error",
                text: "Username must be at least 3 characters",
            });
            signupButton.disabled = false;
            signupLoader.style.display = "none";
            return;
        }
        if (user.length > 16) {
            Swal.fire({
                icon: "error",
                text: "Username must be at most 16 characters",
            });
            signupButton.disabled = false;
            signupLoader.style.display = "none";
            return;
        }
        try {
            let response = await fetch("/api/signup", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    password: password,
                    username: user,
                    captchaResponse: hcaptcha,
                }),
            })
            if (response.status == 200) {
                Swal.fire({
                    icon: "success",
                    text: "Account created successfully",
                    confirmButtonText: "Login",
                }).then(() => {
                    window.location.href = "/login";
                });

            } else {
                if (response.status == 400) {
                    Swal.fire({
                        icon: "error",
                        text: "Invalid captcha",
                    });
                    signupButton.disabled = false;
                    signupLoader.style.display = "none";
                    return;
                }
                Swal.fire({
                    icon: "error",
                    text: "Someone already has that username.",
                });
                signupButton.disabled = false;
                signupLoader.style.display = "none";
            }
        } catch (e) {
            Swal.fire({
                icon: "error",
                text: `An error occurred: ${e.message}`,
            });
            signupButton.disabled = false;
            signupLoader.style.display = "none";
            return;
        }
    }
</script>

<body>
    <nav>
        <div class="navbar">
            <a id="nav-title" href="/">Reds Exploit Corner</a>
            <a href="/g"><i class="fa-solid fa-gamepad">&nbsp;</i>Games</a>
            <a href="/a"><i class="fa-solid fa-box-archive">&nbsp;</i>Apps</a>
            <a href="/-"><i class="fa-solid fa-tv">&nbsp;</i>Media</a>
            <a href="/p"><i class="fa-solid fa-magnifying-glass">&nbsp;</i>Search</a>
            <a href="/e"><i class="fa-solid fa-robot"></i>&nbsp;</i>AI</a>
            <a href="/s"><i class="fa-solid fa-gears">&nbsp;</i>Settings</a>
            <a href="/profile"><i class="fa-solid fa-user"></i></a>
        </div>
    </nav>
    <div style="text-align: center">
        <br></br>
        <h1>Register a new account</h1>
        <br><br>
        <input type="text" id="user" class='form__input' name="User" autocomplete="off" placeholder="Username">
        <br><br>
        <input type="password" id="password" class='form__input' name="password" autocomplete="off"
            placeholder="Password">
        <br><br>
        <div class="h-captcha" data-sitekey="b53ebcec-4dfc-4536-b52e-a3bcbc1269e8"></div><br>
        <button id="signupButton" onclick="signup()" class="gs">Sign Up</button>
        <img id="signupLoader" src="/assets/404/loading.gif" style="width: 20px; height: 20px; display: none;">
        <br>
        <p>Already have an account? <a class='signupbutton' href="/login">Log in</a></p>
    </div>

</body>

</html>
<style>
    iframe {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: none;
        margin: 0;
    }
</style>
<!--all iframe but allowing alerts-->
<iframe sandbox="allow-scripts allow-pointer-lock allow-forms allow-same-origin allow-downloads"></iframe>
<script>
    async function directsetip() {
        try {
            const res = await fetch('/api/ip');
            if (!res.ok) throw new Error('fetch failed');

            const ip = await res.text();
            localStorage.setItem("prefix", ip)
            return ip
        } catch (err) {
            console.error(err);
        }
    }

    window.addEventListener('DOMContentLoaded', async () => {
        ipPrefix = await directsetip();
        if (ipPrefix) {
            const iframe = document.querySelector("iframe");
            iframe.src = `/embed.html#https://${ipPrefix}.ip.nowgg.fun/apps/a/19900/b.html`;
        } else {
            console.warn('No IP, iframe not set.');
        }
    });
</script>
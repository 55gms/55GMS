/*! For license information please see main.js.LICENSE.txt */
!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=10)}([function(t,e,i){"use strict";i.r(e),i.d(e,"ACESFilmicToneMapping",(function(){return it})),i.d(e,"AddEquation",(function(){return T})),i.d(e,"AddOperation",(function(){return K})),i.d(e,"AdditiveAnimationBlendMode",(function(){return Ce})),i.d(e,"AdditiveBlending",(function(){return w})),i.d(e,"AlphaFormat",(function(){return Dt})),i.d(e,"AlwaysDepth",(function(){return V})),i.d(e,"AlwaysStencilFunc",(function(){return ii})),i.d(e,"AmbientLight",(function(){return zc})),i.d(e,"AmbientLightProbe",(function(){return id})),i.d(e,"AnimationClip",(function(){return uc})),i.d(e,"AnimationLoader",(function(){return yc})),i.d(e,"AnimationMixer",(function(){return Id})),i.d(e,"AnimationObjectGroup",(function(){return Od})),i.d(e,"AnimationUtils",(function(){return Ku})),i.d(e,"ArcCurve",(function(){return Al})),i.d(e,"ArrayCamera",(function(){return Za})),i.d(e,"ArrowHelper",(function(){return wp})),i.d(e,"Audio",(function(){return fd})),i.d(e,"AudioAnalyser",(function(){return xd})),i.d(e,"AudioContext",(function(){return $c})),i.d(e,"AudioListener",(function(){return pd})),i.d(e,"AudioLoader",(function(){return td})),i.d(e,"AxesHelper",(function(){return bp})),i.d(e,"AxisHelper",(function(){return rf})),i.d(e,"BackSide",(function(){return m})),i.d(e,"BasicDepthPacking",(function(){return De})),i.d(e,"BasicShadowMap",(function(){return u})),i.d(e,"BinaryTextureLoader",(function(){return lf})),i.d(e,"Bone",(function(){return Nh})),i.d(e,"BooleanKeyframeTrack",(function(){return nc})),i.d(e,"BoundingBoxHelper",(function(){return sf})),i.d(e,"Box2",(function(){return Hd})),i.d(e,"Box3",(function(){return ln})),i.d(e,"Box3Helper",(function(){return gp})),i.d(e,"BoxBufferGeometry",(function(){return ls})),i.d(e,"BoxGeometry",(function(){return ls})),i.d(e,"BoxHelper",(function(){return mp})),i.d(e,"BufferAttribute",(function(){return Tr})),i.d(e,"BufferGeometry",(function(){return Hr})),i.d(e,"BufferGeometryLoader",(function(){return Yc})),i.d(e,"ByteType",(function(){return Et})),i.d(e,"Cache",(function(){return dc})),i.d(e,"Camera",(function(){return fs})),i.d(e,"CameraHelper",(function(){return dp})),i.d(e,"CanvasRenderer",(function(){return cf})),i.d(e,"CanvasTexture",(function(){return gl})),i.d(e,"CapsuleBufferGeometry",(function(){return Ul})),i.d(e,"CapsuleGeometry",(function(){return Ul})),i.d(e,"CatmullRomCurve3",(function(){return Tl})),i.d(e,"CineonToneMapping",(function(){return et})),i.d(e,"CircleBufferGeometry",(function(){return Gl})),i.d(e,"CircleGeometry",(function(){return Gl})),i.d(e,"ClampToEdgeWrapping",(function(){return ct})),i.d(e,"Clock",(function(){return ad})),i.d(e,"Color",(function(){return Wi})),i.d(e,"ColorKeyframeTrack",(function(){return rc})),i.d(e,"ColorManagement",(function(){return Fi})),i.d(e,"CompressedTexture",(function(){return ml})),i.d(e,"CompressedTextureLoader",(function(){return Ac})),i.d(e,"ConeBufferGeometry",(function(){return Hl})),i.d(e,"ConeGeometry",(function(){return Hl})),i.d(e,"CubeCamera",(function(){return gs})),i.d(e,"CubeReflectionMapping",(function(){return st})),i.d(e,"CubeRefractionMapping",(function(){return ot})),i.d(e,"CubeTexture",(function(){return vs})),i.d(e,"CubeTextureLoader",(function(){return wc})),i.d(e,"CubeUVReflectionMapping",(function(){return lt})),i.d(e,"CubicBezierCurve",(function(){return Pl})),i.d(e,"CubicBezierCurve3",(function(){return Rl})),i.d(e,"CubicInterpolant",(function(){return $u})),i.d(e,"CullFaceBack",(function(){return a})),i.d(e,"CullFaceFront",(function(){return h})),i.d(e,"CullFaceFrontBack",(function(){return l})),i.d(e,"CullFaceNone",(function(){return o})),i.d(e,"Curve",(function(){return vl})),i.d(e,"CurvePath",(function(){return Fl})),i.d(e,"CustomBlending",(function(){return E})),i.d(e,"CustomToneMapping",(function(){return nt})),i.d(e,"CylinderBufferGeometry",(function(){return Vl})),i.d(e,"CylinderGeometry",(function(){return Vl})),i.d(e,"Cylindrical",(function(){return Gd})),i.d(e,"Data3DTexture",(function(){return en})),i.d(e,"DataArrayTexture",(function(){return $i})),i.d(e,"DataTexture",(function(){return zh})),i.d(e,"DataTexture2DArray",(function(){return wf})),i.d(e,"DataTexture3D",(function(){return bf})),i.d(e,"DataTextureLoader",(function(){return bc})),i.d(e,"DataUtils",(function(){return Ep})),i.d(e,"DecrementStencilOp",(function(){return je})),i.d(e,"DecrementWrapStencilOp",(function(){return Xe})),i.d(e,"DefaultLoadingManager",(function(){return fc})),i.d(e,"DepthFormat",(function(){return zt})),i.d(e,"DepthStencilFormat",(function(){return Ut})),i.d(e,"DepthTexture",(function(){return ih})),i.d(e,"DirectionalLight",(function(){return Nc})),i.d(e,"DirectionalLightHelper",(function(){return lp})),i.d(e,"DiscreteInterpolant",(function(){return ec})),i.d(e,"DodecahedronBufferGeometry",(function(){return jl})),i.d(e,"DodecahedronGeometry",(function(){return jl})),i.d(e,"DoubleSide",(function(){return g})),i.d(e,"DstAlphaFactor",(function(){return k})),i.d(e,"DstColorFactor",(function(){return N})),i.d(e,"DynamicBufferAttribute",(function(){return Xp})),i.d(e,"DynamicCopyUsage",(function(){return ui})),i.d(e,"DynamicDrawUsage",(function(){return ri})),i.d(e,"DynamicReadUsage",(function(){return ai})),i.d(e,"EdgesGeometry",(function(){return Ql})),i.d(e,"EdgesHelper",(function(){return of})),i.d(e,"EllipseCurve",(function(){return yl})),i.d(e,"EqualDepth",(function(){return j})),i.d(e,"EqualStencilFunc",(function(){return Ke})),i.d(e,"EquirectangularReflectionMapping",(function(){return at})),i.d(e,"EquirectangularRefractionMapping",(function(){return ht})),i.d(e,"Euler",(function(){return Xn})),i.d(e,"EventDispatcher",(function(){return mi})),i.d(e,"ExtrudeBufferGeometry",(function(){return _u})),i.d(e,"ExtrudeGeometry",(function(){return _u})),i.d(e,"FaceColors",(function(){return kp})),i.d(e,"FileLoader",(function(){return vc})),i.d(e,"FlatShading",(function(){return v})),i.d(e,"Float16BufferAttribute",(function(){return Ir})),i.d(e,"Float32Attribute",(function(){return ef})),i.d(e,"Float32BufferAttribute",(function(){return Dr})),i.d(e,"Float64Attribute",(function(){return nf})),i.d(e,"Float64BufferAttribute",(function(){return Br})),i.d(e,"FloatType",(function(){return Pt})),i.d(e,"Fog",(function(){return hh})),i.d(e,"FogExp2",(function(){return ah})),i.d(e,"Font",(function(){return yf})),i.d(e,"FontLoader",(function(){return vf})),i.d(e,"FramebufferTexture",(function(){return fl})),i.d(e,"FrontSide",(function(){return f})),i.d(e,"Frustum",(function(){return Ts})),i.d(e,"GLBufferAttribute",(function(){return kd})),i.d(e,"GLSL1",(function(){return di})),i.d(e,"GLSL3",(function(){return pi})),i.d(e,"GreaterDepth",(function(){return X})),i.d(e,"GreaterEqualDepth",(function(){return Y})),i.d(e,"GreaterEqualStencilFunc",(function(){return ei})),i.d(e,"GreaterStencilFunc",(function(){return $e})),i.d(e,"GridHelper",(function(){return rp})),i.d(e,"Group",(function(){return $a})),i.d(e,"HalfFloatType",(function(){return Rt})),i.d(e,"HemisphereLight",(function(){return Tc})),i.d(e,"HemisphereLightHelper",(function(){return np})),i.d(e,"HemisphereLightProbe",(function(){return ed})),i.d(e,"IcosahedronBufferGeometry",(function(){return Cu})),i.d(e,"IcosahedronGeometry",(function(){return Cu})),i.d(e,"ImageBitmapLoader",(function(){return Kc})),i.d(e,"ImageLoader",(function(){return xc})),i.d(e,"ImageUtils",(function(){return Yi})),i.d(e,"ImmediateRenderObject",(function(){return Af})),i.d(e,"IncrementStencilOp",(function(){return We})),i.d(e,"IncrementWrapStencilOp",(function(){return Ye})),i.d(e,"InstancedBufferAttribute",(function(){return Hh})),i.d(e,"InstancedBufferGeometry",(function(){return jc})),i.d(e,"InstancedInterleavedBuffer",(function(){return Bd})),i.d(e,"InstancedMesh",(function(){return qh})),i.d(e,"Int16Attribute",(function(){return Kp})),i.d(e,"Int16BufferAttribute",(function(){return Pr})),i.d(e,"Int32Attribute",(function(){return $p})),i.d(e,"Int32BufferAttribute",(function(){return Or})),i.d(e,"Int8Attribute",(function(){return qp})),i.d(e,"Int8BufferAttribute",(function(){return _r})),i.d(e,"IntType",(function(){return Mt})),i.d(e,"InterleavedBuffer",(function(){return uh})),i.d(e,"InterleavedBufferAttribute",(function(){return dh})),i.d(e,"Interpolant",(function(){return Zu})),i.d(e,"InterpolateDiscrete",(function(){return we})),i.d(e,"InterpolateLinear",(function(){return be})),i.d(e,"InterpolateSmooth",(function(){return Se})),i.d(e,"InvertStencilOp",(function(){return qe})),i.d(e,"JSONLoader",(function(){return df})),i.d(e,"KeepStencilOp",(function(){return Ve})),i.d(e,"KeyframeTrack",(function(){return ic})),i.d(e,"LOD",(function(){return Oh})),i.d(e,"LatheBufferGeometry",(function(){return zl})),i.d(e,"LatheGeometry",(function(){return zl})),i.d(e,"Layers",(function(){return qn})),i.d(e,"LensFlare",(function(){return ff})),i.d(e,"LessDepth",(function(){return H})),i.d(e,"LessEqualDepth",(function(){return W})),i.d(e,"LessEqualStencilFunc",(function(){return Ze})),i.d(e,"LessStencilFunc",(function(){return Qe})),i.d(e,"Light",(function(){return Ec})),i.d(e,"LightProbe",(function(){return Vc})),i.d(e,"Line",(function(){return el})),i.d(e,"Line3",(function(){return Yd})),i.d(e,"LineBasicMaterial",(function(){return Jh})),i.d(e,"LineCurve",(function(){return Ol})),i.d(e,"LineCurve3",(function(){return Ll})),i.d(e,"LineDashedMaterial",(function(){return Ju})),i.d(e,"LineLoop",(function(){return sl})),i.d(e,"LinePieces",(function(){return Dp})),i.d(e,"LineSegments",(function(){return rl})),i.d(e,"LineStrip",(function(){return Ip})),i.d(e,"LinearEncoding",(function(){return Le})),i.d(e,"LinearFilter",(function(){return yt})),i.d(e,"LinearInterpolant",(function(){return tc})),i.d(e,"LinearMipMapLinearFilter",(function(){return bt})),i.d(e,"LinearMipMapNearestFilter",(function(){return xt})),i.d(e,"LinearMipmapLinearFilter",(function(){return wt})),i.d(e,"LinearMipmapNearestFilter",(function(){return At})),i.d(e,"LinearSRGBColorSpace",(function(){return Ue})),i.d(e,"LinearToneMapping",(function(){return $})),i.d(e,"Loader",(function(){return mc})),i.d(e,"LoaderUtils",(function(){return Wc})),i.d(e,"LoadingManager",(function(){return pc})),i.d(e,"LoopOnce",(function(){return ye})),i.d(e,"LoopPingPong",(function(){return xe})),i.d(e,"LoopRepeat",(function(){return Ae})),i.d(e,"LuminanceAlphaFormat",(function(){return Nt})),i.d(e,"LuminanceFormat",(function(){return Ft})),i.d(e,"MOUSE",(function(){return r})),i.d(e,"Material",(function(){return wr})),i.d(e,"MaterialLoader",(function(){return Hc})),i.d(e,"Math",(function(){return Mi})),i.d(e,"MathUtils",(function(){return Mi})),i.d(e,"Matrix3",(function(){return Pi})),i.d(e,"Matrix4",(function(){return Fn})),i.d(e,"MaxEquation",(function(){return P})),i.d(e,"Mesh",(function(){return as})),i.d(e,"MeshBasicMaterial",(function(){return br})),i.d(e,"MeshDepthMaterial",(function(){return Ya})),i.d(e,"MeshDistanceMaterial",(function(){return Xa})),i.d(e,"MeshFaceMaterial",(function(){return Np})),i.d(e,"MeshLambertMaterial",(function(){return Xu})),i.d(e,"MeshMatcapMaterial",(function(){return qu})),i.d(e,"MeshNormalMaterial",(function(){return Yu})),i.d(e,"MeshPhongMaterial",(function(){return Wu})),i.d(e,"MeshPhysicalMaterial",(function(){return Hu})),i.d(e,"MeshStandardMaterial",(function(){return Vu})),i.d(e,"MeshToonMaterial",(function(){return ju})),i.d(e,"MinEquation",(function(){return C})),i.d(e,"MirroredRepeatWrapping",(function(){return dt})),i.d(e,"MixOperation",(function(){return Q})),i.d(e,"MultiMaterial",(function(){return zp})),i.d(e,"MultiplyBlending",(function(){return S})),i.d(e,"MultiplyOperation",(function(){return J})),i.d(e,"NearestFilter",(function(){return pt})),i.d(e,"NearestMipMapLinearFilter",(function(){return vt})),i.d(e,"NearestMipMapNearestFilter",(function(){return mt})),i.d(e,"NearestMipmapLinearFilter",(function(){return gt})),i.d(e,"NearestMipmapNearestFilter",(function(){return ft})),i.d(e,"NeverDepth",(function(){return G})),i.d(e,"NeverStencilFunc",(function(){return Je})),i.d(e,"NoBlending",(function(){return A})),i.d(e,"NoColorSpace",(function(){return Ne})),i.d(e,"NoColors",(function(){return Bp})),i.d(e,"NoToneMapping",(function(){return Z})),i.d(e,"NormalAnimationBlendMode",(function(){return Me})),i.d(e,"NormalBlending",(function(){return x})),i.d(e,"NotEqualDepth",(function(){return q})),i.d(e,"NotEqualStencilFunc",(function(){return ti})),i.d(e,"NumberKeyframeTrack",(function(){return sc})),i.d(e,"Object3D",(function(){return hr})),i.d(e,"ObjectLoader",(function(){return Xc})),i.d(e,"ObjectSpaceNormalMap",(function(){return Fe})),i.d(e,"OctahedronBufferGeometry",(function(){return Pu})),i.d(e,"OctahedronGeometry",(function(){return Pu})),i.d(e,"OneFactor",(function(){return O})),i.d(e,"OneMinusDstAlphaFactor",(function(){return F})),i.d(e,"OneMinusDstColorFactor",(function(){return z})),i.d(e,"OneMinusSrcAlphaFactor",(function(){return B})),i.d(e,"OneMinusSrcColorFactor",(function(){return I})),i.d(e,"OrthographicCamera",(function(){return Ns})),i.d(e,"PCFShadowMap",(function(){return c})),i.d(e,"PCFSoftShadowMap",(function(){return d})),i.d(e,"PMREMGenerator",(function(){return Ys})),i.d(e,"ParametricGeometry",(function(){return mf})),i.d(e,"Particle",(function(){return Gp})),i.d(e,"ParticleBasicMaterial",(function(){return Wp})),i.d(e,"ParticleSystem",(function(){return Vp})),i.d(e,"ParticleSystemMaterial",(function(){return jp})),i.d(e,"Path",(function(){return Nl})),i.d(e,"PerspectiveCamera",(function(){return ms})),i.d(e,"Plane",(function(){return bs})),i.d(e,"PlaneBufferGeometry",(function(){return Cs})),i.d(e,"PlaneGeometry",(function(){return Cs})),i.d(e,"PlaneHelper",(function(){return vp})),i.d(e,"PointCloud",(function(){return Up})),i.d(e,"PointCloudMaterial",(function(){return Hp})),i.d(e,"PointLight",(function(){return kc})),i.d(e,"PointLightHelper",(function(){return $d})),i.d(e,"Points",(function(){return cl})),i.d(e,"PointsMaterial",(function(){return ol})),i.d(e,"PolarGridHelper",(function(){return sp})),i.d(e,"PolyhedronBufferGeometry",(function(){return Wl})),i.d(e,"PolyhedronGeometry",(function(){return Wl})),i.d(e,"PositionalAudio",(function(){return Ad})),i.d(e,"PropertyBinding",(function(){return Rd})),i.d(e,"PropertyMixer",(function(){return wd})),i.d(e,"QuadraticBezierCurve",(function(){return Il})),i.d(e,"QuadraticBezierCurve3",(function(){return Dl})),i.d(e,"Quaternion",(function(){return sn})),i.d(e,"QuaternionKeyframeTrack",(function(){return ac})),i.d(e,"QuaternionLinearInterpolant",(function(){return oc})),i.d(e,"REVISION",(function(){return n})),i.d(e,"RGBADepthPacking",(function(){return Be})),i.d(e,"RGBAFormat",(function(){return kt})),i.d(e,"RGBAIntegerFormat",(function(){return jt})),i.d(e,"RGBA_ASTC_10x10_Format",(function(){return fe})),i.d(e,"RGBA_ASTC_10x5_Format",(function(){return ce})),i.d(e,"RGBA_ASTC_10x6_Format",(function(){return de})),i.d(e,"RGBA_ASTC_10x8_Format",(function(){return pe})),i.d(e,"RGBA_ASTC_12x10_Format",(function(){return me})),i.d(e,"RGBA_ASTC_12x12_Format",(function(){return ge})),i.d(e,"RGBA_ASTC_4x4_Format",(function(){return ne})),i.d(e,"RGBA_ASTC_5x4_Format",(function(){return re})),i.d(e,"RGBA_ASTC_5x5_Format",(function(){return se})),i.d(e,"RGBA_ASTC_6x5_Format",(function(){return oe})),i.d(e,"RGBA_ASTC_6x6_Format",(function(){return ae})),i.d(e,"RGBA_ASTC_8x5_Format",(function(){return he})),i.d(e,"RGBA_ASTC_8x6_Format",(function(){return le})),i.d(e,"RGBA_ASTC_8x8_Format",(function(){return ue})),i.d(e,"RGBA_BPTC_Format",(function(){return ve})),i.d(e,"RGBA_ETC2_EAC_Format",(function(){return ie})),i.d(e,"RGBA_PVRTC_2BPPV1_Format",(function(){return $t})),i.d(e,"RGBA_PVRTC_4BPPV1_Format",(function(){return Zt})),i.d(e,"RGBA_S3TC_DXT1_Format",(function(){return Xt})),i.d(e,"RGBA_S3TC_DXT3_Format",(function(){return qt})),i.d(e,"RGBA_S3TC_DXT5_Format",(function(){return Jt})),i.d(e,"RGBFormat",(function(){return Bt})),i.d(e,"RGB_ETC1_Format",(function(){return te})),i.d(e,"RGB_ETC2_Format",(function(){return ee})),i.d(e,"RGB_PVRTC_2BPPV1_Format",(function(){return Kt})),i.d(e,"RGB_PVRTC_4BPPV1_Format",(function(){return Qt})),i.d(e,"RGB_S3TC_DXT1_Format",(function(){return Yt})),i.d(e,"RGFormat",(function(){return Ht})),i.d(e,"RGIntegerFormat",(function(){return Wt})),i.d(e,"RawShaderMaterial",(function(){return Gu})),i.d(e,"Ray",(function(){return kn})),i.d(e,"Raycaster",(function(){return Fd})),i.d(e,"RectAreaLight",(function(){return Uc})),i.d(e,"RedFormat",(function(){return Gt})),i.d(e,"RedIntegerFormat",(function(){return Vt})),i.d(e,"ReinhardToneMapping",(function(){return tt})),i.d(e,"RepeatWrapping",(function(){return ut})),i.d(e,"ReplaceStencilOp",(function(){return He})),i.d(e,"ReverseSubtractEquation",(function(){return M})),i.d(e,"RingBufferGeometry",(function(){return Ru})),i.d(e,"RingGeometry",(function(){return Ru})),i.d(e,"SRGBColorSpace",(function(){return ze})),i.d(e,"Scene",(function(){return lh})),i.d(e,"SceneUtils",(function(){return pf})),i.d(e,"ShaderChunk",(function(){return Ps})),i.d(e,"ShaderLib",(function(){return Os})),i.d(e,"ShaderMaterial",(function(){return ps})),i.d(e,"ShadowMaterial",(function(){return Uu})),i.d(e,"Shape",(function(){return Kl})),i.d(e,"ShapeBufferGeometry",(function(){return Ou})),i.d(e,"ShapeGeometry",(function(){return Ou})),i.d(e,"ShapePath",(function(){return Sp})),i.d(e,"ShapeUtils",(function(){return Su})),i.d(e,"ShortType",(function(){return Tt})),i.d(e,"Skeleton",(function(){return Vh})),i.d(e,"SkeletonHelper",(function(){return Zd})),i.d(e,"SkinnedMesh",(function(){return Fh})),i.d(e,"SmoothShading",(function(){return y})),i.d(e,"Source",(function(){return Xi})),i.d(e,"Sphere",(function(){return Cn})),i.d(e,"SphereBufferGeometry",(function(){return Lu})),i.d(e,"SphereGeometry",(function(){return Lu})),i.d(e,"Spherical",(function(){return Ud})),i.d(e,"SphericalHarmonics3",(function(){return Gc})),i.d(e,"SplineCurve",(function(){return Bl})),i.d(e,"SpotLight",(function(){return Oc})),i.d(e,"SpotLightHelper",(function(){return qd})),i.d(e,"Sprite",(function(){return Mh})),i.d(e,"SpriteMaterial",(function(){return ph})),i.d(e,"SrcAlphaFactor",(function(){return D})),i.d(e,"SrcAlphaSaturateFactor",(function(){return U})),i.d(e,"SrcColorFactor",(function(){return L})),i.d(e,"StaticCopyUsage",(function(){return li})),i.d(e,"StaticDrawUsage",(function(){return ni})),i.d(e,"StaticReadUsage",(function(){return oi})),i.d(e,"StereoCamera",(function(){return od})),i.d(e,"StreamCopyUsage",(function(){return ci})),i.d(e,"StreamDrawUsage",(function(){return si})),i.d(e,"StreamReadUsage",(function(){return hi})),i.d(e,"StringKeyframeTrack",(function(){return hc})),i.d(e,"SubtractEquation",(function(){return _})),i.d(e,"SubtractiveBlending",(function(){return b})),i.d(e,"TOUCH",(function(){return s})),i.d(e,"TangentSpaceNormalMap",(function(){return ke})),i.d(e,"TetrahedronBufferGeometry",(function(){return Iu})),i.d(e,"TetrahedronGeometry",(function(){return Iu})),i.d(e,"TextGeometry",(function(){return gf})),i.d(e,"Texture",(function(){return Qi})),i.d(e,"TextureLoader",(function(){return Sc})),i.d(e,"TorusBufferGeometry",(function(){return Du})),i.d(e,"TorusGeometry",(function(){return Du})),i.d(e,"TorusKnotBufferGeometry",(function(){return Bu})),i.d(e,"TorusKnotGeometry",(function(){return Bu})),i.d(e,"Triangle",(function(){return Ar})),i.d(e,"TriangleFanDrawMode",(function(){return Oe})),i.d(e,"TriangleStripDrawMode",(function(){return Re})),i.d(e,"TrianglesDrawMode",(function(){return Pe})),i.d(e,"TubeBufferGeometry",(function(){return ku})),i.d(e,"TubeGeometry",(function(){return ku})),i.d(e,"UVMapping",(function(){return rt})),i.d(e,"Uint16Attribute",(function(){return Zp})),i.d(e,"Uint16BufferAttribute",(function(){return Rr})),i.d(e,"Uint32Attribute",(function(){return tf})),i.d(e,"Uint32BufferAttribute",(function(){return Lr})),i.d(e,"Uint8Attribute",(function(){return Jp})),i.d(e,"Uint8BufferAttribute",(function(){return Mr})),i.d(e,"Uint8ClampedAttribute",(function(){return Qp})),i.d(e,"Uint8ClampedBufferAttribute",(function(){return Cr})),i.d(e,"Uniform",(function(){return Dd})),i.d(e,"UniformsLib",(function(){return Rs})),i.d(e,"UniformsUtils",(function(){return ds})),i.d(e,"UnsignedByteType",(function(){return St})),i.d(e,"UnsignedInt248Type",(function(){return It})),i.d(e,"UnsignedIntType",(function(){return Ct})),i.d(e,"UnsignedShort4444Type",(function(){return Ot})),i.d(e,"UnsignedShort5551Type",(function(){return Lt})),i.d(e,"UnsignedShortType",(function(){return _t})),i.d(e,"VSMShadowMap",(function(){return p})),i.d(e,"Vector2",(function(){return Ci})),i.d(e,"Vector3",(function(){return on})),i.d(e,"Vector4",(function(){return Ki})),i.d(e,"VectorKeyframeTrack",(function(){return lc})),i.d(e,"Vertex",(function(){return Yp})),i.d(e,"VertexColors",(function(){return Fp})),i.d(e,"VideoTexture",(function(){return pl})),i.d(e,"WebGL1Renderer",(function(){return oh})),i.d(e,"WebGL3DRenderTarget",(function(){return nn})),i.d(e,"WebGLArrayRenderTarget",(function(){return tn})),i.d(e,"WebGLCubeRenderTarget",(function(){return ys})),i.d(e,"WebGLMultipleRenderTargets",(function(){return rn})),i.d(e,"WebGLMultisampleRenderTarget",(function(){return xf})),i.d(e,"WebGLRenderTarget",(function(){return Zi})),i.d(e,"WebGLRenderTargetCube",(function(){return uf})),i.d(e,"WebGLRenderer",(function(){return sh})),i.d(e,"WebGLUtils",(function(){return Ka})),i.d(e,"WireframeGeometry",(function(){return Fu})),i.d(e,"WireframeHelper",(function(){return af})),i.d(e,"WrapAroundEnding",(function(){return _e})),i.d(e,"XHRLoader",(function(){return hf})),i.d(e,"ZeroCurvatureEnding",(function(){return Ee})),i.d(e,"ZeroFactor",(function(){return R})),i.d(e,"ZeroSlopeEnding",(function(){return Te})),i.d(e,"ZeroStencilOp",(function(){return Ge})),i.d(e,"_SRGBAFormat",(function(){return fi})),i.d(e,"sRGBEncoding",(function(){return Ie}));const n="139",r={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},s={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},o=0,a=1,h=2,l=3,u=0,c=1,d=2,p=3,f=0,m=1,g=2,v=1,y=2,A=0,x=1,w=2,b=3,S=4,E=5,T=100,_=101,M=102,C=103,P=104,R=200,O=201,L=202,I=203,D=204,B=205,k=206,F=207,N=208,z=209,U=210,G=0,V=1,H=2,W=3,j=4,Y=5,X=6,q=7,J=0,Q=1,K=2,Z=0,$=1,tt=2,et=3,it=4,nt=5,rt=300,st=301,ot=302,at=303,ht=304,lt=306,ut=1e3,ct=1001,dt=1002,pt=1003,ft=1004,mt=1004,gt=1005,vt=1005,yt=1006,At=1007,xt=1007,wt=1008,bt=1008,St=1009,Et=1010,Tt=1011,_t=1012,Mt=1013,Ct=1014,Pt=1015,Rt=1016,Ot=1017,Lt=1018,It=1020,Dt=1021,Bt=1022,kt=1023,Ft=1024,Nt=1025,zt=1026,Ut=1027,Gt=1028,Vt=1029,Ht=1030,Wt=1031,jt=1033,Yt=33776,Xt=33777,qt=33778,Jt=33779,Qt=35840,Kt=35841,Zt=35842,$t=35843,te=36196,ee=37492,ie=37496,ne=37808,re=37809,se=37810,oe=37811,ae=37812,he=37813,le=37814,ue=37815,ce=37816,de=37817,pe=37818,fe=37819,me=37820,ge=37821,ve=36492,ye=2200,Ae=2201,xe=2202,we=2300,be=2301,Se=2302,Ee=2400,Te=2401,_e=2402,Me=2500,Ce=2501,Pe=0,Re=1,Oe=2,Le=3e3,Ie=3001,De=3200,Be=3201,ke=0,Fe=1,Ne="",ze="srgb",Ue="srgb-linear",Ge=0,Ve=7680,He=7681,We=7682,je=7683,Ye=34055,Xe=34056,qe=5386,Je=512,Qe=513,Ke=514,Ze=515,$e=516,ti=517,ei=518,ii=519,ni=35044,ri=35048,si=35040,oi=35045,ai=35049,hi=35041,li=35046,ui=35050,ci=35042,di="100",pi="300 es",fi=1035;class mi{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const i=this._listeners[t];if(void 0!==i){const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const i=e.slice(0);for(let e=0,n=i.length;e<n;e++)i[e].call(this,t);t.target=null}}}const gi=[];for(let t=0;t<256;t++)gi[t]=(t<16?"0":"")+t.toString(16);let vi=1234567;const yi=Math.PI/180,Ai=180/Math.PI;function xi(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(gi[255&t]+gi[t>>8&255]+gi[t>>16&255]+gi[t>>24&255]+"-"+gi[255&e]+gi[e>>8&255]+"-"+gi[e>>16&15|64]+gi[e>>24&255]+"-"+gi[63&i|128]+gi[i>>8&255]+"-"+gi[i>>16&255]+gi[i>>24&255]+gi[255&n]+gi[n>>8&255]+gi[n>>16&255]+gi[n>>24&255]).toLowerCase()}function wi(t,e,i){return Math.max(e,Math.min(i,t))}function bi(t,e){return(t%e+e)%e}function Si(t,e,i){return(1-i)*t+i*e}function Ei(t){return 0==(t&t-1)&&0!==t}function Ti(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function _i(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}var Mi=Object.freeze({__proto__:null,DEG2RAD:yi,RAD2DEG:Ai,generateUUID:xi,clamp:wi,euclideanModulo:bi,mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},inverseLerp:function(t,e,i){return t!==e?(i-t)/(e-t):0},lerp:Si,damp:function(t,e,i,n){return Si(t,e,1-Math.exp(-i*n))},pingpong:function(t,e=1){return e-Math.abs(bi(t,2*e)-e)},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(vi=t);let e=vi+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function(t){return t*yi},radToDeg:function(t){return t*Ai},isPowerOfTwo:Ei,ceilPowerOfTwo:Ti,floorPowerOfTwo:_i,setQuaternionFromProperEuler:function(t,e,i,n,r){const s=Math.cos,o=Math.sin,a=s(i/2),h=o(i/2),l=s((e+n)/2),u=o((e+n)/2),c=s((e-n)/2),d=o((e-n)/2),p=s((n-e)/2),f=o((n-e)/2);switch(r){case"XYX":t.set(a*u,h*c,h*d,a*l);break;case"YZY":t.set(h*d,a*u,h*c,a*l);break;case"ZXZ":t.set(h*c,h*d,a*u,a*l);break;case"XZX":t.set(a*u,h*f,h*p,a*l);break;case"YXY":t.set(h*p,a*u,h*f,a*l);break;case"ZYZ":t.set(h*f,h*p,a*u,a*l)}},normalize:function(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}},denormalize:function(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}});class Ci{constructor(t=0,e=0){this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6],this.y=n[1]*e+n[4]*i+n[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),n=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*i-s*n+t.x,this.y=r*n+s*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Ci.prototype.isVector2=!0;class Pi{constructor(){this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,i,n,r,s,o,a,h){const l=this.elements;return l[0]=t,l[1]=n,l[2]=o,l[3]=e,l[4]=r,l[5]=a,l[6]=i,l[7]=s,l[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,n=e.elements,r=this.elements,s=i[0],o=i[3],a=i[6],h=i[1],l=i[4],u=i[7],c=i[2],d=i[5],p=i[8],f=n[0],m=n[3],g=n[6],v=n[1],y=n[4],A=n[7],x=n[2],w=n[5],b=n[8];return r[0]=s*f+o*v+a*x,r[3]=s*m+o*y+a*w,r[6]=s*g+o*A+a*b,r[1]=h*f+l*v+u*x,r[4]=h*m+l*y+u*w,r[7]=h*g+l*A+u*b,r[2]=c*f+d*v+p*x,r[5]=c*m+d*y+p*w,r[8]=c*g+d*A+p*b,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8];return e*s*l-e*o*h-i*r*l+i*o*a+n*r*h-n*s*a}invert(){const t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8],u=l*s-o*h,c=o*a-l*r,d=h*r-s*a,p=e*u+i*c+n*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return t[0]=u*f,t[1]=(n*h-l*i)*f,t[2]=(o*i-n*s)*f,t[3]=c*f,t[4]=(l*e-n*a)*f,t[5]=(n*r-o*e)*f,t[6]=d*f,t[7]=(i*a-h*e)*f,t[8]=(s*e-i*r)*f,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,n,r,s,o){const a=Math.cos(r),h=Math.sin(r);return this.set(i*a,i*h,-i*(a*s+h*o)+s+t,-n*h,n*a,-n*(-h*s+a*o)+o+e,0,0,1),this}scale(t,e){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),n=this.elements,r=n[0],s=n[3],o=n[6],a=n[1],h=n[4],l=n[7];return n[0]=e*r+i*a,n[3]=e*s+i*h,n[6]=e*o+i*l,n[1]=-i*r+e*a,n[4]=-i*s+e*h,n[7]=-i*o+e*l,this}translate(t,e){const i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this}equals(t){const e=this.elements,i=t.elements;for(let t=0;t<9;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function Ri(t){for(let e=t.length-1;e>=0;--e)if(t[e]>65535)return!0;return!1}Pi.prototype.isMatrix3=!0;const Oi={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Li(t,e){return new Oi[t](e)}function Ii(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Di(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Bi(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const ki={[ze]:{[Ue]:Di},[Ue]:{[ze]:Bi}},Fi={legacyMode:!0,get workingColorSpace(){return Ue},set workingColorSpace(t){},convert:function(t,e,i){if(this.legacyMode||e===i||!e||!i)return t;if(ki[e]&&void 0!==ki[e][i]){const n=ki[e][i];return t.r=n(t.r),t.g=n(t.g),t.b=n(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},Ni={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},zi={r:0,g:0,b:0},Ui={h:0,s:0,l:0},Gi={h:0,s:0,l:0};function Vi(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}function Hi(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class Wi{constructor(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=ze){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Fi.toWorkingColorSpace(this,e),this}setRGB(t,e,i,n=Ue){return this.r=t,this.g=e,this.b=i,Fi.toWorkingColorSpace(this,n),this}setHSL(t,e,i,n=Ue){if(t=bi(t,1),e=wi(e,0,1),i=wi(i,0,1),0===e)this.r=this.g=this.b=i;else{const n=i<=.5?i*(1+e):i+e-i*e,r=2*i-n;this.r=Vi(r,n,t+1/3),this.g=Vi(r,n,t),this.b=Vi(r,n,t-1/3)}return Fi.toWorkingColorSpace(this,n),this}setStyle(t,e=ze){function i(t){void 0!==t&&parseFloat(t)}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const r=n[1],s=n[2];switch(r){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,Fi.toWorkingColorSpace(this,e),i(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,Fi.toWorkingColorSpace(this,e),i(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){const n=parseFloat(t[1])/360,r=parseInt(t[2],10)/100,s=parseInt(t[3],10)/100;return i(t[4]),this.setHSL(n,r,s,e)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=n[1],i=t.length;if(3===i)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,Fi.toWorkingColorSpace(this,e),this;if(6===i)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,Fi.toWorkingColorSpace(this,e),this}return t&&t.length>0?this.setColorName(t,e):this}setColorName(t,e=ze){const i=Ni[t.toLowerCase()];return void 0!==i&&this.setHex(i,e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Di(t.r),this.g=Di(t.g),this.b=Di(t.b),this}copyLinearToSRGB(t){return this.r=Bi(t.r),this.g=Bi(t.g),this.b=Bi(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=ze){return Fi.fromWorkingColorSpace(Hi(this,zi),t),wi(255*zi.r,0,255)<<16^wi(255*zi.g,0,255)<<8^wi(255*zi.b,0,255)<<0}getHexString(t=ze){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Ue){Fi.fromWorkingColorSpace(Hi(this,zi),e);const i=zi.r,n=zi.g,r=zi.b,s=Math.max(i,n,r),o=Math.min(i,n,r);let a,h;const l=(o+s)/2;if(o===s)a=0,h=0;else{const t=s-o;switch(h=l<=.5?t/(s+o):t/(2-s-o),s){case i:a=(n-r)/t+(n<r?6:0);break;case n:a=(r-i)/t+2;break;case r:a=(i-n)/t+4}a/=6}return t.h=a,t.s=h,t.l=l,t}getRGB(t,e=Ue){return Fi.fromWorkingColorSpace(Hi(this,zi),e),t.r=zi.r,t.g=zi.g,t.b=zi.b,t}getStyle(t=ze){return Fi.fromWorkingColorSpace(Hi(this,zi),t),t!==ze?`color(${t} ${zi.r} ${zi.g} ${zi.b})`:`rgb(${255*zi.r|0},${255*zi.g|0},${255*zi.b|0})`}offsetHSL(t,e,i){return this.getHSL(Ui),Ui.h+=t,Ui.s+=e,Ui.l+=i,this.setHSL(Ui.h,Ui.s,Ui.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Ui),t.getHSL(Gi);const i=Si(Ui.h,Gi.h,e),n=Si(Ui.s,Gi.s,e),r=Si(Ui.l,Gi.l,e);return this.setHSL(i,n,r),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}let ji;Wi.NAMES=Ni,Wi.prototype.isColor=!0,Wi.prototype.r=1,Wi.prototype.g=1,Wi.prototype.b=1;class Yi{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===ji&&(ji=Ii("canvas")),ji.width=t.width,ji.height=t.height;const i=ji.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=ji}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=Ii("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const n=i.getImageData(0,0,t.width,t.height),r=n.data;for(let t=0;t<r.length;t++)r[t]=255*Di(r[t]/255);return i.putImageData(n,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*Di(e[t]/255)):e[t]=Di(e[t]);return{data:e,width:t.width,height:t.height}}return t}}class Xi{constructor(t=null){this.uuid=xi(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const i={uuid:this.uuid,url:""},n=this.data;if(null!==n){let t;if(Array.isArray(n)){t=[];for(let e=0,i=n.length;e<i;e++)n[e].isDataTexture?t.push(qi(n[e].image)):t.push(qi(n[e]))}else t=qi(n);i.url=t}return e||(t.images[this.uuid]=i),i}}function qi(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?Yi.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:{}}Xi.prototype.isSource=!0;let Ji=0;class Qi extends mi{constructor(t=Qi.DEFAULT_IMAGE,e=Qi.DEFAULT_MAPPING,i=ct,n=ct,r=yt,s=wt,o=kt,a=St,h=1,l=Le){super(),Object.defineProperty(this,"id",{value:Ji++}),this.uuid=xi(),this.name="",this.source=new Xi(t),this.mipmaps=[],this.mapping=e,this.wrapS=i,this.wrapT=n,this.magFilter=r,this.minFilter=s,this.anisotropy=h,this.format=o,this.internalFormat=null,this.type=a,this.offset=new Ci(0,0),this.repeat=new Ci(1,1),this.center=new Ci(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Pi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=l,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==rt)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ut:t.x=t.x-Math.floor(t.x);break;case ct:t.x=t.x<0?0:1;break;case dt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case ut:t.y=t.y-Math.floor(t.y);break;case ct:t.y=t.y<0?0:1;break;case dt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}Qi.DEFAULT_IMAGE=null,Qi.DEFAULT_MAPPING=rt,Qi.prototype.isTexture=!0;class Ki{constructor(t=0,e=0,i=0,n=1){this.x=t,this.y=e,this.z=i,this.w=n}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,n=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*n+s[12]*r,this.y=s[1]*e+s[5]*i+s[9]*n+s[13]*r,this.z=s[2]*e+s[6]*i+s[10]*n+s[14]*r,this.w=s[3]*e+s[7]*i+s[11]*n+s[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,n,r;const s=t.elements,o=s[0],a=s[4],h=s[8],l=s[1],u=s[5],c=s[9],d=s[2],p=s[6],f=s[10];if(Math.abs(a-l)<.01&&Math.abs(h-d)<.01&&Math.abs(c-p)<.01){if(Math.abs(a+l)<.1&&Math.abs(h+d)<.1&&Math.abs(c+p)<.1&&Math.abs(o+u+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const t=(o+1)/2,s=(u+1)/2,m=(f+1)/2,g=(a+l)/4,v=(h+d)/4,y=(c+p)/4;return t>s&&t>m?t<.01?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(t),n=g/i,r=v/i):s>m?s<.01?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(s),i=g/n,r=y/n):m<.01?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(m),i=v/r,n=y/r),this.set(i,n,r,e),this}let m=Math.sqrt((p-c)*(p-c)+(h-d)*(h-d)+(l-a)*(l-a));return Math.abs(m)<.001&&(m=1),this.x=(p-c)/m,this.y=(h-d)/m,this.z=(l-a)/m,this.w=Math.acos((o+u+f-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Ki.prototype.isVector4=!0;class Zi extends mi{constructor(t,e,i={}){super(),this.width=t,this.height=e,this.depth=1,this.scissor=new Ki(0,0,t,e),this.scissorTest=!1,this.viewport=new Ki(0,0,t,e);const n={width:t,height:e,depth:1};this.texture=new Qi(n,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:yt,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(t,e,i=1){this.width===t&&this.height===e&&this.depth===i||(this.width=t,this.height=e,this.depth=i,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0,this.texture.image=Object.assign({},t.texture.image),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}Zi.prototype.isWebGLRenderTarget=!0;class $i extends Qi{constructor(t=null,e=1,i=1,n=1){super(null),this.image={data:t,width:e,height:i,depth:n},this.magFilter=pt,this.minFilter=pt,this.wrapR=ct,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}$i.prototype.isDataArrayTexture=!0;class tn extends Zi{constructor(t,e,i){super(t,e),this.depth=i,this.texture=new $i(null,t,e,i),this.texture.isRenderTargetTexture=!0}}tn.prototype.isWebGLArrayRenderTarget=!0;class en extends Qi{constructor(t=null,e=1,i=1,n=1){super(null),this.image={data:t,width:e,height:i,depth:n},this.magFilter=pt,this.minFilter=pt,this.wrapR=ct,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}en.prototype.isData3DTexture=!0;class nn extends Zi{constructor(t,e,i){super(t,e),this.depth=i,this.texture=new en(null,t,e,i),this.texture.isRenderTargetTexture=!0}}nn.prototype.isWebGL3DRenderTarget=!0;class rn extends Zi{constructor(t,e,i,n={}){super(t,e,n);const r=this.texture;this.texture=[];for(let t=0;t<i;t++)this.texture[t]=r.clone(),this.texture[t].isRenderTargetTexture=!0}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let n=0,r=this.texture.length;n<r;n++)this.texture[n].image.width=t,this.texture[n].image.height=e,this.texture[n].image.depth=i;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this.texture.length=0;for(let e=0,i=t.texture.length;e<i;e++)this.texture[e]=t.texture[e].clone();return this}}rn.prototype.isWebGLMultipleRenderTargets=!0;class sn{constructor(t=0,e=0,i=0,n=1){this._x=t,this._y=e,this._z=i,this._w=n}static slerp(t,e,i,n){return i.slerpQuaternions(t,e,n)}static slerpFlat(t,e,i,n,r,s,o){let a=i[n+0],h=i[n+1],l=i[n+2],u=i[n+3];const c=r[s+0],d=r[s+1],p=r[s+2],f=r[s+3];if(0===o)return t[e+0]=a,t[e+1]=h,t[e+2]=l,void(t[e+3]=u);if(1===o)return t[e+0]=c,t[e+1]=d,t[e+2]=p,void(t[e+3]=f);if(u!==f||a!==c||h!==d||l!==p){let t=1-o;const e=a*c+h*d+l*p+u*f,i=e>=0?1:-1,n=1-e*e;if(n>Number.EPSILON){const r=Math.sqrt(n),s=Math.atan2(r,e*i);t=Math.sin(t*s)/r,o=Math.sin(o*s)/r}const r=o*i;if(a=a*t+c*r,h=h*t+d*r,l=l*t+p*r,u=u*t+f*r,t===1-o){const t=1/Math.sqrt(a*a+h*h+l*l+u*u);a*=t,h*=t,l*=t,u*=t}}t[e]=a,t[e+1]=h,t[e+2]=l,t[e+3]=u}static multiplyQuaternionsFlat(t,e,i,n,r,s){const o=i[n],a=i[n+1],h=i[n+2],l=i[n+3],u=r[s],c=r[s+1],d=r[s+2],p=r[s+3];return t[e]=o*p+l*u+a*d-h*c,t[e+1]=a*p+l*c+h*u-o*d,t[e+2]=h*p+l*d+o*c-a*u,t[e+3]=l*p-o*u-a*c-h*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=t._x,n=t._y,r=t._z,s=t._order,o=Math.cos,a=Math.sin,h=o(i/2),l=o(n/2),u=o(r/2),c=a(i/2),d=a(n/2),p=a(r/2);switch(s){case"XYZ":this._x=c*l*u+h*d*p,this._y=h*d*u-c*l*p,this._z=h*l*p+c*d*u,this._w=h*l*u-c*d*p;break;case"YXZ":this._x=c*l*u+h*d*p,this._y=h*d*u-c*l*p,this._z=h*l*p-c*d*u,this._w=h*l*u+c*d*p;break;case"ZXY":this._x=c*l*u-h*d*p,this._y=h*d*u+c*l*p,this._z=h*l*p+c*d*u,this._w=h*l*u-c*d*p;break;case"ZYX":this._x=c*l*u-h*d*p,this._y=h*d*u+c*l*p,this._z=h*l*p-c*d*u,this._w=h*l*u+c*d*p;break;case"YZX":this._x=c*l*u+h*d*p,this._y=h*d*u+c*l*p,this._z=h*l*p-c*d*u,this._w=h*l*u-c*d*p;break;case"XZY":this._x=c*l*u-h*d*p,this._y=h*d*u-c*l*p,this._z=h*l*p+c*d*u,this._w=h*l*u+c*d*p}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],n=e[4],r=e[8],s=e[1],o=e[5],a=e[9],h=e[2],l=e[6],u=e[10],c=i+o+u;if(c>0){const t=.5/Math.sqrt(c+1);this._w=.25/t,this._x=(l-a)*t,this._y=(r-h)*t,this._z=(s-n)*t}else if(i>o&&i>u){const t=2*Math.sqrt(1+i-o-u);this._w=(l-a)/t,this._x=.25*t,this._y=(n+s)/t,this._z=(r+h)/t}else if(o>u){const t=2*Math.sqrt(1+o-i-u);this._w=(r-h)/t,this._x=(n+s)/t,this._y=.25*t,this._z=(a+l)/t}else{const t=2*Math.sqrt(1+u-i-o);this._w=(s-n)/t,this._x=(r+h)/t,this._y=(a+l)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(wi(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(0===i)return this;const n=Math.min(1,e/i);return this.slerp(t,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,n=t._y,r=t._z,s=t._w,o=e._x,a=e._y,h=e._z,l=e._w;return this._x=i*l+s*o+n*h-r*a,this._y=n*l+s*a+r*o-i*h,this._z=r*l+s*h+i*a-n*o,this._w=s*l-i*o-n*a-r*h,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const i=this._x,n=this._y,r=this._z,s=this._w;let o=s*t._w+i*t._x+n*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=i,this._y=n,this._z=r,this;const a=1-o*o;if(a<=Number.EPSILON){const t=1-e;return this._w=t*s+e*this._w,this._x=t*i+e*this._x,this._y=t*n+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(a),l=Math.atan2(h,o),u=Math.sin((1-e)*l)/h,c=Math.sin(e*l)/h;return this._w=s*u+this._w*c,this._x=i*u+this._x*c,this._y=n*u+this._y*c,this._z=r*u+this._z*c,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=Math.random(),e=Math.sqrt(1-t),i=Math.sqrt(t),n=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(n),i*Math.sin(r),i*Math.cos(r),e*Math.sin(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}sn.prototype.isQuaternion=!0;class on{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.z=i}set(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?this.multiplyVectors(t,e):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return!t||t.isEuler,this.applyQuaternion(hn.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(hn.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*n,this.y=r[1]*e+r[4]*i+r[7]*n,this.z=r[2]*e+r[5]*i+r[8]*n,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,n=this.z,r=t.elements,s=1/(r[3]*e+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*n+r[12])*s,this.y=(r[1]*e+r[5]*i+r[9]*n+r[13])*s,this.z=(r[2]*e+r[6]*i+r[10]*n+r[14])*s,this}applyQuaternion(t){const e=this.x,i=this.y,n=this.z,r=t.x,s=t.y,o=t.z,a=t.w,h=a*e+s*n-o*i,l=a*i+o*e-r*n,u=a*n+r*i-s*e,c=-r*e-s*i-o*n;return this.x=h*a+c*-r+l*-o-u*-s,this.y=l*a+c*-s+u*-r-h*-o,this.z=u*a+c*-o+h*-s-l*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n,this.y=r[1]*e+r[5]*i+r[9]*n,this.z=r[2]*e+r[6]*i+r[10]*n,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t,e){return void 0!==e?this.crossVectors(t,e):this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,n=t.y,r=t.z,s=e.x,o=e.y,a=e.z;return this.x=n*a-r*o,this.y=r*s-i*a,this.z=i*o-n*s,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return an.copy(this).projectOnVector(t),this.sub(an)}reflect(t){return this.sub(an.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(wi(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(e),this.y=i*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}on.prototype.isVector3=!0;const an=new on,hn=new sn;class ln{constructor(t=new on(1/0,1/0,1/0),e=new on(-1/0,-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,i=1/0,n=1/0,r=-1/0,s=-1/0,o=-1/0;for(let a=0,h=t.length;a<h;a+=3){const h=t[a],l=t[a+1],u=t[a+2];h<e&&(e=h),l<i&&(i=l),u<n&&(n=u),h>r&&(r=h),l>s&&(s=l),u>o&&(o=u)}return this.min.set(e,i,n),this.max.set(r,s,o),this}setFromBufferAttribute(t){let e=1/0,i=1/0,n=1/0,r=-1/0,s=-1/0,o=-1/0;for(let a=0,h=t.count;a<h;a++){const h=t.getX(a),l=t.getY(a),u=t.getZ(a);h<e&&(e=h),l<i&&(i=l),u<n&&(n=u),h>r&&(r=h),l>s&&(s=l),u>o&&(o=u)}return this.min.set(e,i,n),this.max.set(r,s,o),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=cn.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(void 0!==i)if(e&&null!=i.attributes&&void 0!==i.attributes.position){const e=i.attributes.position;for(let i=0,n=e.count;i<n;i++)cn.fromBufferAttribute(e,i).applyMatrix4(t.matrixWorld),this.expandByPoint(cn)}else null===i.boundingBox&&i.computeBoundingBox(),dn.copy(i.boundingBox),dn.applyMatrix4(t.matrixWorld),this.union(dn);const n=t.children;for(let t=0,i=n.length;t<i;t++)this.expandByObject(n[t],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,cn),cn.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(An),xn.subVectors(this.max,An),pn.subVectors(t.a,An),fn.subVectors(t.b,An),mn.subVectors(t.c,An),gn.subVectors(fn,pn),vn.subVectors(mn,fn),yn.subVectors(pn,mn);let e=[0,-gn.z,gn.y,0,-vn.z,vn.y,0,-yn.z,yn.y,gn.z,0,-gn.x,vn.z,0,-vn.x,yn.z,0,-yn.x,-gn.y,gn.x,0,-vn.y,vn.x,0,-yn.y,yn.x,0];return!!Sn(e,pn,fn,mn,xn)&&(e=[1,0,0,0,1,0,0,0,1],!!Sn(e,pn,fn,mn,xn)&&(wn.crossVectors(gn,vn),e=[wn.x,wn.y,wn.z],Sn(e,pn,fn,mn,xn)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return cn.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(cn).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(un[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),un[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),un[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),un[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),un[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),un[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),un[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),un[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(un)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}ln.prototype.isBox3=!0;const un=[new on,new on,new on,new on,new on,new on,new on,new on],cn=new on,dn=new ln,pn=new on,fn=new on,mn=new on,gn=new on,vn=new on,yn=new on,An=new on,xn=new on,wn=new on,bn=new on;function Sn(t,e,i,n,r){for(let s=0,o=t.length-3;s<=o;s+=3){bn.fromArray(t,s);const o=r.x*Math.abs(bn.x)+r.y*Math.abs(bn.y)+r.z*Math.abs(bn.z),a=e.dot(bn),h=i.dot(bn),l=n.dot(bn);if(Math.max(-Math.max(a,h,l),Math.min(a,h,l))>o)return!1}return!0}const En=new ln,Tn=new on,_n=new on,Mn=new on;class Cn{constructor(t=new on,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;void 0!==e?i.copy(e):En.setFromPoints(t).getCenter(i);let n=0;for(let e=0,r=t.length;e<r;e++)n=Math.max(n,i.distanceToSquared(t[e]));return this.radius=Math.sqrt(n),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){Mn.subVectors(t,this.center);const e=Mn.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),i=.5*(t-this.radius);this.center.add(Mn.multiplyScalar(i/t)),this.radius+=i}return this}union(t){return!0===this.center.equals(t.center)?_n.set(0,0,1).multiplyScalar(t.radius):_n.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(Tn.copy(t.center).add(_n)),this.expandByPoint(Tn.copy(t.center).sub(_n)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Pn=new on,Rn=new on,On=new on,Ln=new on,In=new on,Dn=new on,Bn=new on;class kn{constructor(t=new on,e=new on(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Pn)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Pn.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Pn.copy(this.direction).multiplyScalar(e).add(this.origin),Pn.distanceToSquared(t))}distanceSqToSegment(t,e,i,n){Rn.copy(t).add(e).multiplyScalar(.5),On.copy(e).sub(t).normalize(),Ln.copy(this.origin).sub(Rn);const r=.5*t.distanceTo(e),s=-this.direction.dot(On),o=Ln.dot(this.direction),a=-Ln.dot(On),h=Ln.lengthSq(),l=Math.abs(1-s*s);let u,c,d,p;if(l>0)if(u=s*a-o,c=s*o-a,p=r*l,u>=0)if(c>=-p)if(c<=p){const t=1/l;u*=t,c*=t,d=u*(u+s*c+2*o)+c*(s*u+c+2*a)+h}else c=r,u=Math.max(0,-(s*c+o)),d=-u*u+c*(c+2*a)+h;else c=-r,u=Math.max(0,-(s*c+o)),d=-u*u+c*(c+2*a)+h;else c<=-p?(u=Math.max(0,-(-s*r+o)),c=u>0?-r:Math.min(Math.max(-r,-a),r),d=-u*u+c*(c+2*a)+h):c<=p?(u=0,c=Math.min(Math.max(-r,-a),r),d=c*(c+2*a)+h):(u=Math.max(0,-(s*r+o)),c=u>0?r:Math.min(Math.max(-r,-a),r),d=-u*u+c*(c+2*a)+h);else c=s>0?-r:r,u=Math.max(0,-(s*c+o)),d=-u*u+c*(c+2*a)+h;return i&&i.copy(this.direction).multiplyScalar(u).add(this.origin),n&&n.copy(On).multiplyScalar(c).add(Rn),d}intersectSphere(t,e){Pn.subVectors(t.center,this.origin);const i=Pn.dot(this.direction),n=Pn.dot(Pn)-i*i,r=t.radius*t.radius;if(n>r)return null;const s=Math.sqrt(r-n),o=i-s,a=i+s;return o<0&&a<0?null:o<0?this.at(a,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return null===i?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,n,r,s,o,a;const h=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,c=this.origin;return h>=0?(i=(t.min.x-c.x)*h,n=(t.max.x-c.x)*h):(i=(t.max.x-c.x)*h,n=(t.min.x-c.x)*h),l>=0?(r=(t.min.y-c.y)*l,s=(t.max.y-c.y)*l):(r=(t.max.y-c.y)*l,s=(t.min.y-c.y)*l),i>s||r>n?null:((r>i||i!=i)&&(i=r),(s<n||n!=n)&&(n=s),u>=0?(o=(t.min.z-c.z)*u,a=(t.max.z-c.z)*u):(o=(t.max.z-c.z)*u,a=(t.min.z-c.z)*u),i>a||o>n?null:((o>i||i!=i)&&(i=o),(a<n||n!=n)&&(n=a),n<0?null:this.at(i>=0?i:n,e)))}intersectsBox(t){return null!==this.intersectBox(t,Pn)}intersectTriangle(t,e,i,n,r){In.subVectors(e,t),Dn.subVectors(i,t),Bn.crossVectors(In,Dn);let s,o=this.direction.dot(Bn);if(o>0){if(n)return null;s=1}else{if(!(o<0))return null;s=-1,o=-o}Ln.subVectors(this.origin,t);const a=s*this.direction.dot(Dn.crossVectors(Ln,Dn));if(a<0)return null;const h=s*this.direction.dot(In.cross(Ln));if(h<0)return null;if(a+h>o)return null;const l=-s*Ln.dot(Bn);return l<0?null:this.at(l/o,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Fn{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,i,n,r,s,o,a,h,l,u,c,d,p,f,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=n,g[1]=r,g[5]=s,g[9]=o,g[13]=a,g[2]=h,g[6]=l,g[10]=u,g[14]=c,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Fn).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,n=1/Nn.setFromMatrixColumn(t,0).length(),r=1/Nn.setFromMatrixColumn(t,1).length(),s=1/Nn.setFromMatrixColumn(t,2).length();return e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=0,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=0,e[8]=i[8]*s,e[9]=i[9]*s,e[10]=i[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){!t||t.isEuler;const e=this.elements,i=t.x,n=t.y,r=t.z,s=Math.cos(i),o=Math.sin(i),a=Math.cos(n),h=Math.sin(n),l=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){const t=s*l,i=s*u,n=o*l,r=o*u;e[0]=a*l,e[4]=-a*u,e[8]=h,e[1]=i+n*h,e[5]=t-r*h,e[9]=-o*a,e[2]=r-t*h,e[6]=n+i*h,e[10]=s*a}else if("YXZ"===t.order){const t=a*l,i=a*u,n=h*l,r=h*u;e[0]=t+r*o,e[4]=n*o-i,e[8]=s*h,e[1]=s*u,e[5]=s*l,e[9]=-o,e[2]=i*o-n,e[6]=r+t*o,e[10]=s*a}else if("ZXY"===t.order){const t=a*l,i=a*u,n=h*l,r=h*u;e[0]=t-r*o,e[4]=-s*u,e[8]=n+i*o,e[1]=i+n*o,e[5]=s*l,e[9]=r-t*o,e[2]=-s*h,e[6]=o,e[10]=s*a}else if("ZYX"===t.order){const t=s*l,i=s*u,n=o*l,r=o*u;e[0]=a*l,e[4]=n*h-i,e[8]=t*h+r,e[1]=a*u,e[5]=r*h+t,e[9]=i*h-n,e[2]=-h,e[6]=o*a,e[10]=s*a}else if("YZX"===t.order){const t=s*a,i=s*h,n=o*a,r=o*h;e[0]=a*l,e[4]=r-t*u,e[8]=n*u+i,e[1]=u,e[5]=s*l,e[9]=-o*l,e[2]=-h*l,e[6]=i*u+n,e[10]=t-r*u}else if("XZY"===t.order){const t=s*a,i=s*h,n=o*a,r=o*h;e[0]=a*l,e[4]=-u,e[8]=h*l,e[1]=t*u+r,e[5]=s*l,e[9]=i*u-n,e[2]=n*u-i,e[6]=o*l,e[10]=r*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Un,t,Gn)}lookAt(t,e,i){const n=this.elements;return Wn.subVectors(t,e),0===Wn.lengthSq()&&(Wn.z=1),Wn.normalize(),Vn.crossVectors(i,Wn),0===Vn.lengthSq()&&(1===Math.abs(i.z)?Wn.x+=1e-4:Wn.z+=1e-4,Wn.normalize(),Vn.crossVectors(i,Wn)),Vn.normalize(),Hn.crossVectors(Wn,Vn),n[0]=Vn.x,n[4]=Hn.x,n[8]=Wn.x,n[1]=Vn.y,n[5]=Hn.y,n[9]=Wn.y,n[2]=Vn.z,n[6]=Hn.z,n[10]=Wn.z,this}multiply(t,e){return void 0!==e?this.multiplyMatrices(t,e):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,n=e.elements,r=this.elements,s=i[0],o=i[4],a=i[8],h=i[12],l=i[1],u=i[5],c=i[9],d=i[13],p=i[2],f=i[6],m=i[10],g=i[14],v=i[3],y=i[7],A=i[11],x=i[15],w=n[0],b=n[4],S=n[8],E=n[12],T=n[1],_=n[5],M=n[9],C=n[13],P=n[2],R=n[6],O=n[10],L=n[14],I=n[3],D=n[7],B=n[11],k=n[15];return r[0]=s*w+o*T+a*P+h*I,r[4]=s*b+o*_+a*R+h*D,r[8]=s*S+o*M+a*O+h*B,r[12]=s*E+o*C+a*L+h*k,r[1]=l*w+u*T+c*P+d*I,r[5]=l*b+u*_+c*R+d*D,r[9]=l*S+u*M+c*O+d*B,r[13]=l*E+u*C+c*L+d*k,r[2]=p*w+f*T+m*P+g*I,r[6]=p*b+f*_+m*R+g*D,r[10]=p*S+f*M+m*O+g*B,r[14]=p*E+f*C+m*L+g*k,r[3]=v*w+y*T+A*P+x*I,r[7]=v*b+y*_+A*R+x*D,r[11]=v*S+y*M+A*O+x*B,r[15]=v*E+y*C+A*L+x*k,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],s=t[1],o=t[5],a=t[9],h=t[13],l=t[2],u=t[6],c=t[10],d=t[14];return t[3]*(+r*a*u-n*h*u-r*o*c+i*h*c+n*o*d-i*a*d)+t[7]*(+e*a*d-e*h*c+r*s*c-n*s*d+n*h*l-r*a*l)+t[11]*(+e*h*u-e*o*d-r*s*u+i*s*d+r*o*l-i*h*l)+t[15]*(-n*o*l-e*a*u+e*o*c+n*s*u-i*s*c+i*a*l)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8],u=t[9],c=t[10],d=t[11],p=t[12],f=t[13],m=t[14],g=t[15],v=u*m*h-f*c*h+f*a*d-o*m*d-u*a*g+o*c*g,y=p*c*h-l*m*h-p*a*d+s*m*d+l*a*g-s*c*g,A=l*f*h-p*u*h+p*o*d-s*f*d-l*o*g+s*u*g,x=p*u*a-l*f*a-p*o*c+s*f*c+l*o*m-s*u*m,w=e*v+i*y+n*A+r*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const b=1/w;return t[0]=v*b,t[1]=(f*c*r-u*m*r-f*n*d+i*m*d+u*n*g-i*c*g)*b,t[2]=(o*m*r-f*a*r+f*n*h-i*m*h-o*n*g+i*a*g)*b,t[3]=(u*a*r-o*c*r-u*n*h+i*c*h+o*n*d-i*a*d)*b,t[4]=y*b,t[5]=(l*m*r-p*c*r+p*n*d-e*m*d-l*n*g+e*c*g)*b,t[6]=(p*a*r-s*m*r-p*n*h+e*m*h+s*n*g-e*a*g)*b,t[7]=(s*c*r-l*a*r+l*n*h-e*c*h-s*n*d+e*a*d)*b,t[8]=A*b,t[9]=(p*u*r-l*f*r-p*i*d+e*f*d+l*i*g-e*u*g)*b,t[10]=(s*f*r-p*o*r+p*i*h-e*f*h-s*i*g+e*o*g)*b,t[11]=(l*o*r-s*u*r-l*i*h+e*u*h+s*i*d-e*o*d)*b,t[12]=x*b,t[13]=(l*f*n-p*u*n+p*i*c-e*f*c-l*i*m+e*u*m)*b,t[14]=(p*o*n-s*f*n-p*i*a+e*f*a+s*i*m-e*o*m)*b,t[15]=(s*u*n-l*o*n+l*i*a-e*u*a-s*i*c+e*o*c)*b,this}scale(t){const e=this.elements,i=t.x,n=t.y,r=t.z;return e[0]*=i,e[4]*=n,e[8]*=r,e[1]*=i,e[5]*=n,e[9]*=r,e[2]*=i,e[6]*=n,e[10]*=r,e[3]*=i,e[7]*=n,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),n=Math.sin(e),r=1-i,s=t.x,o=t.y,a=t.z,h=r*s,l=r*o;return this.set(h*s+i,h*o-n*a,h*a+n*o,0,h*o+n*a,l*o+i,l*a-n*s,0,h*a-n*o,l*a+n*s,r*a*a+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,n,r,s){return this.set(1,i,r,0,t,1,s,0,e,n,1,0,0,0,0,1),this}compose(t,e,i){const n=this.elements,r=e._x,s=e._y,o=e._z,a=e._w,h=r+r,l=s+s,u=o+o,c=r*h,d=r*l,p=r*u,f=s*l,m=s*u,g=o*u,v=a*h,y=a*l,A=a*u,x=i.x,w=i.y,b=i.z;return n[0]=(1-(f+g))*x,n[1]=(d+A)*x,n[2]=(p-y)*x,n[3]=0,n[4]=(d-A)*w,n[5]=(1-(c+g))*w,n[6]=(m+v)*w,n[7]=0,n[8]=(p+y)*b,n[9]=(m-v)*b,n[10]=(1-(c+f))*b,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this}decompose(t,e,i){const n=this.elements;let r=Nn.set(n[0],n[1],n[2]).length();const s=Nn.set(n[4],n[5],n[6]).length(),o=Nn.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),t.x=n[12],t.y=n[13],t.z=n[14],zn.copy(this);const a=1/r,h=1/s,l=1/o;return zn.elements[0]*=a,zn.elements[1]*=a,zn.elements[2]*=a,zn.elements[4]*=h,zn.elements[5]*=h,zn.elements[6]*=h,zn.elements[8]*=l,zn.elements[9]*=l,zn.elements[10]*=l,e.setFromRotationMatrix(zn),i.x=r,i.y=s,i.z=o,this}makePerspective(t,e,i,n,r,s){const o=this.elements,a=2*r/(e-t),h=2*r/(i-n),l=(e+t)/(e-t),u=(i+n)/(i-n),c=-(s+r)/(s-r),d=-2*s*r/(s-r);return o[0]=a,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=h,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=c,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,i,n,r,s){const o=this.elements,a=1/(e-t),h=1/(i-n),l=1/(s-r),u=(e+t)*a,c=(i+n)*h,d=(s+r)*l;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*h,o[9]=0,o[13]=-c,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let t=0;t<16;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}Fn.prototype.isMatrix4=!0;const Nn=new on,zn=new Fn,Un=new on(0,0,0),Gn=new on(1,1,1),Vn=new on,Hn=new on,Wn=new on,jn=new Fn,Yn=new sn;class Xn{constructor(t=0,e=0,i=0,n=Xn.DefaultOrder){this._x=t,this._y=e,this._z=i,this._order=n}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,n=this._order){return this._x=t,this._y=e,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const n=t.elements,r=n[0],s=n[4],o=n[8],a=n[1],h=n[5],l=n[9],u=n[2],c=n[6],d=n[10];switch(e){case"XYZ":this._y=Math.asin(wi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(c,h),this._z=0);break;case"YXZ":this._x=Math.asin(-wi(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(a,h)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(wi(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-s,h)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-wi(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(c,d),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-s,h));break;case"YZX":this._z=Math.asin(wi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,h),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-wi(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(c,h),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-l,d),this._y=0)}return this._order=e,!0===i&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return jn.makeRotationFromQuaternion(t),this.setFromRotationMatrix(jn,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Yn.setFromEuler(this),this.setFromQuaternion(Yn,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Xn.prototype.isEuler=!0,Xn.DefaultOrder="XYZ",Xn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class qn{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let Jn=0;const Qn=new on,Kn=new sn,Zn=new Fn,$n=new on,tr=new on,er=new on,ir=new sn,nr=new on(1,0,0),rr=new on(0,1,0),sr=new on(0,0,1),or={type:"added"},ar={type:"removed"};class hr extends mi{constructor(){super(),Object.defineProperty(this,"id",{value:Jn++}),this.uuid=xi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=hr.DefaultUp.clone();const t=new on,e=new Xn,i=new sn,n=new on(1,1,1);e._onChange((function(){i.setFromEuler(e,!1)})),i._onChange((function(){e.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Fn},normalMatrix:{value:new Pi}}),this.matrix=new Fn,this.matrixWorld=new Fn,this.matrixAutoUpdate=hr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new qn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Kn.setFromAxisAngle(t,e),this.quaternion.multiply(Kn),this}rotateOnWorldAxis(t,e){return Kn.setFromAxisAngle(t,e),this.quaternion.premultiply(Kn),this}rotateX(t){return this.rotateOnAxis(nr,t)}rotateY(t){return this.rotateOnAxis(rr,t)}rotateZ(t){return this.rotateOnAxis(sr,t)}translateOnAxis(t,e){return Qn.copy(t).applyQuaternion(this.quaternion),this.position.add(Qn.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(nr,t)}translateY(t){return this.translateOnAxis(rr,t)}translateZ(t){return this.translateOnAxis(sr,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Zn.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?$n.copy(t):$n.set(t,e,i);const n=this.parent;this.updateWorldMatrix(!0,!1),tr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Zn.lookAt(tr,$n,this.up):Zn.lookAt($n,tr,this.up),this.quaternion.setFromRotationMatrix(Zn),n&&(Zn.extractRotation(n.matrixWorld),Kn.setFromRotationMatrix(Zn),this.quaternion.premultiply(Kn.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this||t&&t.isObject3D&&(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(or)),this}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(ar)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(ar)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Zn.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Zn.multiply(t.parent.matrixWorld)),t.applyMatrix4(Zn),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,n=this.children.length;i<n;i++){const n=this.children[i].getObjectByProperty(t,e);if(void 0!==n)return n}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(tr,t,er),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(tr,ir,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].updateMatrixWorld(t)}updateWorldMatrix(t,e){const i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,i=t.length;e<i;e++)t[e].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"==typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const n={};function r(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(n.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(n.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const i=e.shapes;if(Array.isArray(i))for(let e=0,n=i.length;e<n;e++){const n=i[e];r(t.shapes,n)}else r(t.shapes,i)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let i=0,n=this.material.length;i<n;i++)e.push(r(t.materials,this.material[i]));n.material=e}else n.material=r(t.materials,this.material);if(this.children.length>0){n.children=[];for(let e=0;e<this.children.length;e++)n.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){n.animations=[];for(let e=0;e<this.animations.length;e++){const i=this.animations[e];n.animations.push(r(t.animations,i))}}if(e){const e=s(t.geometries),n=s(t.materials),r=s(t.textures),o=s(t.images),a=s(t.shapes),h=s(t.skeletons),l=s(t.animations),u=s(t.nodes);e.length>0&&(i.geometries=e),n.length>0&&(i.materials=n),r.length>0&&(i.textures=r),o.length>0&&(i.images=o),a.length>0&&(i.shapes=a),h.length>0&&(i.skeletons=h),l.length>0&&(i.animations=l),u.length>0&&(i.nodes=u)}return i.object=n,i;function s(t){const e=[];for(const i in t){const n=t[i];delete n.metadata,e.push(n)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const i=t.children[e];this.add(i.clone())}return this}}hr.DefaultUp=new on(0,1,0),hr.DefaultMatrixAutoUpdate=!0,hr.prototype.isObject3D=!0;const lr=new on,ur=new on,cr=new on,dr=new on,pr=new on,fr=new on,mr=new on,gr=new on,vr=new on,yr=new on;class Ar{constructor(t=new on,e=new on,i=new on){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,n){n.subVectors(i,e),lr.subVectors(t,e),n.cross(lr);const r=n.lengthSq();return r>0?n.multiplyScalar(1/Math.sqrt(r)):n.set(0,0,0)}static getBarycoord(t,e,i,n,r){lr.subVectors(n,e),ur.subVectors(i,e),cr.subVectors(t,e);const s=lr.dot(lr),o=lr.dot(ur),a=lr.dot(cr),h=ur.dot(ur),l=ur.dot(cr),u=s*h-o*o;if(0===u)return r.set(-2,-1,-1);const c=1/u,d=(h*a-o*l)*c,p=(s*l-o*a)*c;return r.set(1-d-p,p,d)}static containsPoint(t,e,i,n){return this.getBarycoord(t,e,i,n,dr),dr.x>=0&&dr.y>=0&&dr.x+dr.y<=1}static getUV(t,e,i,n,r,s,o,a){return this.getBarycoord(t,e,i,n,dr),a.set(0,0),a.addScaledVector(r,dr.x),a.addScaledVector(s,dr.y),a.addScaledVector(o,dr.z),a}static isFrontFacing(t,e,i,n){return lr.subVectors(i,e),ur.subVectors(t,e),lr.cross(ur).dot(n)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this}setFromAttributeAndIndices(t,e,i,n){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return lr.subVectors(this.c,this.b),ur.subVectors(this.a,this.b),.5*lr.cross(ur).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Ar.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Ar.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,i,n,r){return Ar.getUV(t,this.a,this.b,this.c,e,i,n,r)}containsPoint(t){return Ar.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Ar.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,n=this.b,r=this.c;let s,o;pr.subVectors(n,i),fr.subVectors(r,i),gr.subVectors(t,i);const a=pr.dot(gr),h=fr.dot(gr);if(a<=0&&h<=0)return e.copy(i);vr.subVectors(t,n);const l=pr.dot(vr),u=fr.dot(vr);if(l>=0&&u<=l)return e.copy(n);const c=a*u-l*h;if(c<=0&&a>=0&&l<=0)return s=a/(a-l),e.copy(i).addScaledVector(pr,s);yr.subVectors(t,r);const d=pr.dot(yr),p=fr.dot(yr);if(p>=0&&d<=p)return e.copy(r);const f=d*h-a*p;if(f<=0&&h>=0&&p<=0)return o=h/(h-p),e.copy(i).addScaledVector(fr,o);const m=l*p-d*u;if(m<=0&&u-l>=0&&d-p>=0)return mr.subVectors(r,n),o=(u-l)/(u-l+(d-p)),e.copy(n).addScaledVector(mr,o);const g=1/(m+f+c);return s=f*g,o=c*g,e.copy(i).addScaledVector(pr,s).addScaledVector(fr,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let xr=0;class wr extends mi{constructor(){super(),Object.defineProperty(this,"id",{value:xr++}),this.uuid=xi(),this.name="",this.type="Material",this.fog=!0,this.blending=x,this.side=f,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=D,this.blendDst=B,this.blendEquation=T,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=W,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ii,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ve,this.stencilZFail=Ve,this.stencilZPass=Ve,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const i=t[e];if(void 0===i)continue;if("shading"===e){this.flatShading=i===v;continue}const n=this[e];void 0!==n&&(n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]=i)}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(t){const e=[];for(const i in t){const n=t[i];delete n.metadata,e.push(n)}return e}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==x&&(i.blending=this.blending),this.side!==f&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),e){const e=n(t.textures),r=n(t.images);e.length>0&&(i.textures=e),r.length>0&&(i.images=r)}return i}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(null!==e){const t=e.length;i=new Array(t);for(let n=0;n!==t;++n)i[n]=e[n].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}wr.prototype.isMaterial=!0,wr.fromType=function(){return null};class br extends wr{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new Wi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}br.prototype.isMeshBasicMaterial=!0;const Sr=new on,Er=new Ci;class Tr{constructor(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.usage=ni,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let n=0,r=this.itemSize;n<r;n++)this.array[t+n]=e.array[i+n];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let i=0;for(let n=0,r=t.length;n<r;n++){let r=t[n];void 0===r&&(r=new Wi),e[i++]=r.r,e[i++]=r.g,e[i++]=r.b}return this}copyVector2sArray(t){const e=this.array;let i=0;for(let n=0,r=t.length;n<r;n++){let r=t[n];void 0===r&&(r=new Ci),e[i++]=r.x,e[i++]=r.y}return this}copyVector3sArray(t){const e=this.array;let i=0;for(let n=0,r=t.length;n<r;n++){let r=t[n];void 0===r&&(r=new on),e[i++]=r.x,e[i++]=r.y,e[i++]=r.z}return this}copyVector4sArray(t){const e=this.array;let i=0;for(let n=0,r=t.length;n<r;n++){let r=t[n];void 0===r&&(r=new Ki),e[i++]=r.x,e[i++]=r.y,e[i++]=r.z,e[i++]=r.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,i=this.count;e<i;e++)Er.fromBufferAttribute(this,e),Er.applyMatrix3(t),this.setXY(e,Er.x,Er.y);else if(3===this.itemSize)for(let e=0,i=this.count;e<i;e++)Sr.fromBufferAttribute(this,e),Sr.applyMatrix3(t),this.setXYZ(e,Sr.x,Sr.y,Sr.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)Sr.fromBufferAttribute(this,e),Sr.applyMatrix4(t),this.setXYZ(e,Sr.x,Sr.y,Sr.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Sr.fromBufferAttribute(this,e),Sr.applyNormalMatrix(t),this.setXYZ(e,Sr.x,Sr.y,Sr.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Sr.fromBufferAttribute(this,e),Sr.transformDirection(t),this.setXYZ(e,Sr.x,Sr.y,Sr.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this}setXYZW(t,e,i,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==ni&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}Tr.prototype.isBufferAttribute=!0;class _r extends Tr{constructor(t,e,i){super(new Int8Array(t),e,i)}}class Mr extends Tr{constructor(t,e,i){super(new Uint8Array(t),e,i)}}class Cr extends Tr{constructor(t,e,i){super(new Uint8ClampedArray(t),e,i)}}class Pr extends Tr{constructor(t,e,i){super(new Int16Array(t),e,i)}}class Rr extends Tr{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class Or extends Tr{constructor(t,e,i){super(new Int32Array(t),e,i)}}class Lr extends Tr{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class Ir extends Tr{constructor(t,e,i){super(new Uint16Array(t),e,i)}}Ir.prototype.isFloat16BufferAttribute=!0;class Dr extends Tr{constructor(t,e,i){super(new Float32Array(t),e,i)}}class Br extends Tr{constructor(t,e,i){super(new Float64Array(t),e,i)}}let kr=0;const Fr=new Fn,Nr=new hr,zr=new on,Ur=new ln,Gr=new ln,Vr=new on;class Hr extends mi{constructor(){super(),Object.defineProperty(this,"id",{value:kr++}),this.uuid=xi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Ri(t)?Lr:Rr)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const e=(new Pi).getNormalMatrix(t);i.applyNormalMatrix(e),i.needsUpdate=!0}const n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(t),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Fr.makeRotationFromQuaternion(t),this.applyMatrix4(Fr),this}rotateX(t){return Fr.makeRotationX(t),this.applyMatrix4(Fr),this}rotateY(t){return Fr.makeRotationY(t),this.applyMatrix4(Fr),this}rotateZ(t){return Fr.makeRotationZ(t),this.applyMatrix4(Fr),this}translate(t,e,i){return Fr.makeTranslation(t,e,i),this.applyMatrix4(Fr),this}scale(t,e,i){return Fr.makeScale(t,e,i),this.applyMatrix4(Fr),this}lookAt(t){return Nr.lookAt(t),Nr.updateMatrix(),this.applyMatrix4(Nr.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(zr).negate(),this.translate(zr.x,zr.y,zr.z),this}setFromPoints(t){const e=[];for(let i=0,n=t.length;i<n;i++){const n=t[i];e.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new Dr(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ln);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)this.boundingBox.set(new on(-1/0,-1/0,-1/0),new on(1/0,1/0,1/0));else{if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const i=e[t];Ur.setFromBufferAttribute(i),this.morphTargetsRelative?(Vr.addVectors(this.boundingBox.min,Ur.min),this.boundingBox.expandByPoint(Vr),Vr.addVectors(this.boundingBox.max,Ur.max),this.boundingBox.expandByPoint(Vr)):(this.boundingBox.expandByPoint(Ur.min),this.boundingBox.expandByPoint(Ur.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Cn);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)this.boundingSphere.set(new on,1/0);else if(t){const i=this.boundingSphere.center;if(Ur.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const i=e[t];Gr.setFromBufferAttribute(i),this.morphTargetsRelative?(Vr.addVectors(Ur.min,Gr.min),Ur.expandByPoint(Vr),Vr.addVectors(Ur.max,Gr.max),Ur.expandByPoint(Vr)):(Ur.expandByPoint(Gr.min),Ur.expandByPoint(Gr.max))}Ur.getCenter(i);let n=0;for(let e=0,r=t.count;e<r;e++)Vr.fromBufferAttribute(t,e),n=Math.max(n,i.distanceToSquared(Vr));if(e)for(let r=0,s=e.length;r<s;r++){const s=e[r],o=this.morphTargetsRelative;for(let e=0,r=s.count;e<r;e++)Vr.fromBufferAttribute(s,e),o&&(zr.fromBufferAttribute(t,e),Vr.add(zr)),n=Math.max(n,i.distanceToSquared(Vr))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return;const i=t.array,n=e.position.array,r=e.normal.array,s=e.uv.array,o=n.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Tr(new Float32Array(4*o),4));const a=this.getAttribute("tangent").array,h=[],l=[];for(let t=0;t<o;t++)h[t]=new on,l[t]=new on;const u=new on,c=new on,d=new on,p=new Ci,f=new Ci,m=new Ci,g=new on,v=new on;function y(t,e,i){u.fromArray(n,3*t),c.fromArray(n,3*e),d.fromArray(n,3*i),p.fromArray(s,2*t),f.fromArray(s,2*e),m.fromArray(s,2*i),c.sub(u),d.sub(u),f.sub(p),m.sub(p);const r=1/(f.x*m.y-m.x*f.y);isFinite(r)&&(g.copy(c).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(r),v.copy(d).multiplyScalar(f.x).addScaledVector(c,-m.x).multiplyScalar(r),h[t].add(g),h[e].add(g),h[i].add(g),l[t].add(v),l[e].add(v),l[i].add(v))}let A=this.groups;0===A.length&&(A=[{start:0,count:i.length}]);for(let t=0,e=A.length;t<e;++t){const e=A[t],n=e.start;for(let t=n,r=n+e.count;t<r;t+=3)y(i[t+0],i[t+1],i[t+2])}const x=new on,w=new on,b=new on,S=new on;function E(t){b.fromArray(r,3*t),S.copy(b);const e=h[t];x.copy(e),x.sub(b.multiplyScalar(b.dot(e))).normalize(),w.crossVectors(S,e);const i=w.dot(l[t])<0?-1:1;a[4*t]=x.x,a[4*t+1]=x.y,a[4*t+2]=x.z,a[4*t+3]=i}for(let t=0,e=A.length;t<e;++t){const e=A[t],n=e.start;for(let t=n,r=n+e.count;t<r;t+=3)E(i[t+0]),E(i[t+1]),E(i[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let i=this.getAttribute("normal");if(void 0===i)i=new Tr(new Float32Array(3*e.count),3),this.setAttribute("normal",i);else for(let t=0,e=i.count;t<e;t++)i.setXYZ(t,0,0,0);const n=new on,r=new on,s=new on,o=new on,a=new on,h=new on,l=new on,u=new on;if(t)for(let c=0,d=t.count;c<d;c+=3){const d=t.getX(c+0),p=t.getX(c+1),f=t.getX(c+2);n.fromBufferAttribute(e,d),r.fromBufferAttribute(e,p),s.fromBufferAttribute(e,f),l.subVectors(s,r),u.subVectors(n,r),l.cross(u),o.fromBufferAttribute(i,d),a.fromBufferAttribute(i,p),h.fromBufferAttribute(i,f),o.add(l),a.add(l),h.add(l),i.setXYZ(d,o.x,o.y,o.z),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(f,h.x,h.y,h.z)}else for(let t=0,o=e.count;t<o;t+=3)n.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),s.fromBufferAttribute(e,t+2),l.subVectors(s,r),u.subVectors(n,r),l.cross(u),i.setXYZ(t+0,l.x,l.y,l.z),i.setXYZ(t+1,l.x,l.y,l.z),i.setXYZ(t+2,l.x,l.y,l.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(t,e){if(!t||!t.isBufferGeometry)return;void 0===e&&(e=0);const i=this.attributes;for(const n in i){if(void 0===t.attributes[n])continue;const r=i[n].array,s=t.attributes[n],o=s.array,a=s.itemSize*e,h=Math.min(o.length,r.length-a);for(let t=0,e=a;t<h;t++,e++)r[e]=o[t]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Vr.fromBufferAttribute(t,e),Vr.normalize(),t.setXYZ(e,Vr.x,Vr.y,Vr.z)}toNonIndexed(){function t(t,e){const i=t.array,n=t.itemSize,r=t.normalized,s=new i.constructor(e.length*n);let o=0,a=0;for(let r=0,h=e.length;r<h;r++){o=t.isInterleavedBufferAttribute?e[r]*t.data.stride+t.offset:e[r]*n;for(let t=0;t<n;t++)s[a++]=i[o++]}return new Tr(s,n,r)}if(null===this.index)return this;const e=new Hr,i=this.index.array,n=this.attributes;for(const r in n){const s=t(n[r],i);e.setAttribute(r,s)}const r=this.morphAttributes;for(const n in r){const s=[],o=r[n];for(let e=0,n=o.length;e<n;e++){const n=t(o[e],i);s.push(n)}e.morphAttributes[n]=s}e.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let t=0,i=s.length;t<i;t++){const i=s[t];e.addGroup(i.start,i.count,i.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const e in i){const n=i[e];t.data.attributes[e]=n.toJSON(t.data)}const n={};let r=!1;for(const e in this.morphAttributes){const i=this.morphAttributes[e],s=[];for(let e=0,n=i.length;e<n;e++){const n=i[e];s.push(n.toJSON(t.data))}s.length>0&&(n[e]=s,r=!0)}r&&(t.data.morphAttributes=n,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return null!==o&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;null!==i&&this.setIndex(i.clone(e));const n=t.attributes;for(const t in n){const i=n[t];this.setAttribute(t,i.clone(e))}const r=t.morphAttributes;for(const t in r){const i=[],n=r[t];for(let t=0,r=n.length;t<r;t++)i.push(n[t].clone(e));this.morphAttributes[t]=i}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let t=0,e=s.length;t<e;t++){const e=s[t];this.addGroup(e.start,e.count,e.materialIndex)}const o=t.boundingBox;null!==o&&(this.boundingBox=o.clone());const a=t.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Hr.prototype.isBufferGeometry=!0;const Wr=new Fn,jr=new kn,Yr=new Cn,Xr=new on,qr=new on,Jr=new on,Qr=new on,Kr=new on,Zr=new on,$r=new on,ts=new on,es=new on,is=new Ci,ns=new Ci,rs=new Ci,ss=new on,os=new on;class as extends hr{constructor(t=new Hr,e=new br){super(),this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const t=e[i[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,i=t.length;e<i;e++){const i=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length}}raycast(t,e){const i=this.geometry,n=this.material,r=this.matrixWorld;if(void 0===n)return;if(null===i.boundingSphere&&i.computeBoundingSphere(),Yr.copy(i.boundingSphere),Yr.applyMatrix4(r),!1===t.ray.intersectsSphere(Yr))return;if(Wr.copy(r).invert(),jr.copy(t.ray).applyMatrix4(Wr),null!==i.boundingBox&&!1===jr.intersectsBox(i.boundingBox))return;let s;if(i.isBufferGeometry){const r=i.index,o=i.attributes.position,a=i.morphAttributes.position,h=i.morphTargetsRelative,l=i.attributes.uv,u=i.attributes.uv2,c=i.groups,d=i.drawRange;if(null!==r)if(Array.isArray(n))for(let i=0,p=c.length;i<p;i++){const p=c[i],f=n[p.materialIndex];for(let i=Math.max(p.start,d.start),n=Math.min(r.count,Math.min(p.start+p.count,d.start+d.count));i<n;i+=3){const n=r.getX(i),c=r.getX(i+1),d=r.getX(i+2);s=hs(this,f,t,jr,o,a,h,l,u,n,c,d),s&&(s.faceIndex=Math.floor(i/3),s.face.materialIndex=p.materialIndex,e.push(s))}}else{for(let i=Math.max(0,d.start),c=Math.min(r.count,d.start+d.count);i<c;i+=3){const c=r.getX(i),d=r.getX(i+1),p=r.getX(i+2);s=hs(this,n,t,jr,o,a,h,l,u,c,d,p),s&&(s.faceIndex=Math.floor(i/3),e.push(s))}}else if(void 0!==o)if(Array.isArray(n))for(let i=0,r=c.length;i<r;i++){const r=c[i],p=n[r.materialIndex];for(let i=Math.max(r.start,d.start),n=Math.min(o.count,Math.min(r.start+r.count,d.start+d.count));i<n;i+=3){s=hs(this,p,t,jr,o,a,h,l,u,i,i+1,i+2),s&&(s.faceIndex=Math.floor(i/3),s.face.materialIndex=r.materialIndex,e.push(s))}}else{for(let i=Math.max(0,d.start),r=Math.min(o.count,d.start+d.count);i<r;i+=3){s=hs(this,n,t,jr,o,a,h,l,u,i,i+1,i+2),s&&(s.faceIndex=Math.floor(i/3),e.push(s))}}}else i.isGeometry}}function hs(t,e,i,n,r,s,o,a,h,l,u,c){Xr.fromBufferAttribute(r,l),qr.fromBufferAttribute(r,u),Jr.fromBufferAttribute(r,c);const d=t.morphTargetInfluences;if(s&&d){$r.set(0,0,0),ts.set(0,0,0),es.set(0,0,0);for(let t=0,e=s.length;t<e;t++){const e=d[t],i=s[t];0!==e&&(Qr.fromBufferAttribute(i,l),Kr.fromBufferAttribute(i,u),Zr.fromBufferAttribute(i,c),o?($r.addScaledVector(Qr,e),ts.addScaledVector(Kr,e),es.addScaledVector(Zr,e)):($r.addScaledVector(Qr.sub(Xr),e),ts.addScaledVector(Kr.sub(qr),e),es.addScaledVector(Zr.sub(Jr),e)))}Xr.add($r),qr.add(ts),Jr.add(es)}t.isSkinnedMesh&&(t.boneTransform(l,Xr),t.boneTransform(u,qr),t.boneTransform(c,Jr));const p=function(t,e,i,n,r,s,o,a){let h;if(h=e.side===m?n.intersectTriangle(o,s,r,!0,a):n.intersectTriangle(r,s,o,e.side!==g,a),null===h)return null;os.copy(a),os.applyMatrix4(t.matrixWorld);const l=i.ray.origin.distanceTo(os);return l<i.near||l>i.far?null:{distance:l,point:os.clone(),object:t}}(t,e,i,n,Xr,qr,Jr,ss);if(p){a&&(is.fromBufferAttribute(a,l),ns.fromBufferAttribute(a,u),rs.fromBufferAttribute(a,c),p.uv=Ar.getUV(ss,Xr,qr,Jr,is,ns,rs,new Ci)),h&&(is.fromBufferAttribute(h,l),ns.fromBufferAttribute(h,u),rs.fromBufferAttribute(h,c),p.uv2=Ar.getUV(ss,Xr,qr,Jr,is,ns,rs,new Ci));const t={a:l,b:u,c:c,normal:new on,materialIndex:0};Ar.getNormal(Xr,qr,Jr,t.normal),p.face=t}return p}as.prototype.isMesh=!0;class ls extends Hr{constructor(t=1,e=1,i=1,n=1,r=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:s};const o=this;n=Math.floor(n),r=Math.floor(r),s=Math.floor(s);const a=[],h=[],l=[],u=[];let c=0,d=0;function p(t,e,i,n,r,s,p,f,m,g,v){const y=s/m,A=p/g,x=s/2,w=p/2,b=f/2,S=m+1,E=g+1;let T=0,_=0;const M=new on;for(let s=0;s<E;s++){const o=s*A-w;for(let a=0;a<S;a++){const c=a*y-x;M[t]=c*n,M[e]=o*r,M[i]=b,h.push(M.x,M.y,M.z),M[t]=0,M[e]=0,M[i]=f>0?1:-1,l.push(M.x,M.y,M.z),u.push(a/m),u.push(1-s/g),T+=1}}for(let t=0;t<g;t++)for(let e=0;e<m;e++){const i=c+e+S*t,n=c+e+S*(t+1),r=c+(e+1)+S*(t+1),s=c+(e+1)+S*t;a.push(i,n,s),a.push(n,r,s),_+=6}o.addGroup(d,_,v),d+=_,c+=T}p("z","y","x",-1,-1,i,e,t,s,r,0),p("z","y","x",1,-1,i,e,-t,s,r,1),p("x","z","y",1,1,t,i,e,n,s,2),p("x","z","y",1,-1,t,i,-e,n,s,3),p("x","y","z",1,-1,t,e,i,n,r,4),p("x","y","z",-1,-1,t,e,-i,n,r,5),this.setIndex(a),this.setAttribute("position",new Dr(h,3)),this.setAttribute("normal",new Dr(l,3)),this.setAttribute("uv",new Dr(u,2))}static fromJSON(t){return new ls(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function us(t){const e={};for(const i in t){e[i]={};for(const n in t[i]){const r=t[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[i][n]=r.clone():Array.isArray(r)?e[i][n]=r.slice():e[i][n]=r}}return e}function cs(t){const e={};for(let i=0;i<t.length;i++){const n=us(t[i]);for(const t in n)e[t]=n[t]}return e}const ds={clone:us,merge:cs};class ps extends wr{constructor(t){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(t.attributes,this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=us(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?e.uniforms[i]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[i]={type:"m4",value:n.toArray()}:e.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const i={};for(const t in this.extensions)!0===this.extensions[t]&&(i[t]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}}ps.prototype.isShaderMaterial=!0;class fs extends hr{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Fn,this.projectionMatrix=new Fn,this.projectionMatrixInverse=new Fn}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}fs.prototype.isCamera=!0;class ms extends fs{constructor(t=50,e=1,i=.1,n=2e3){super(),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Ai*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*yi*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Ai*Math.atan(Math.tan(.5*yi*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,i,n,r,s){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*yi*this.fov)/this.zoom,i=2*e,n=this.aspect*i,r=-.5*n;const s=this.view;if(null!==this.view&&this.view.enabled){const t=s.fullWidth,o=s.fullHeight;r+=s.offsetX*n/t,e-=s.offsetY*i/o,n*=s.width/t,i*=s.height/o}const o=this.filmOffset;0!==o&&(r+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,e,e-i,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}ms.prototype.isPerspectiveCamera=!0;class gs extends hr{constructor(t,e,i){if(super(),this.type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return;this.renderTarget=i;const n=new ms(90,1,t,e);n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new on(1,0,0)),this.add(n);const r=new ms(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new on(-1,0,0)),this.add(r);const s=new ms(90,1,t,e);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new on(0,1,0)),this.add(s);const o=new ms(90,1,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new on(0,-1,0)),this.add(o);const a=new ms(90,1,t,e);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new on(0,0,1)),this.add(a);const h=new ms(90,1,t,e);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new on(0,0,-1)),this.add(h)}update(t,e){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[n,r,s,o,a,h]=this.children,l=t.getRenderTarget(),u=t.outputEncoding,c=t.toneMapping,d=t.xr.enabled;t.outputEncoding=Le,t.toneMapping=Z,t.xr.enabled=!1;const p=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,n),t.setRenderTarget(i,1),t.render(e,r),t.setRenderTarget(i,2),t.render(e,s),t.setRenderTarget(i,3),t.render(e,o),t.setRenderTarget(i,4),t.render(e,a),i.texture.generateMipmaps=p,t.setRenderTarget(i,5),t.render(e,h),t.setRenderTarget(l),t.outputEncoding=u,t.toneMapping=c,t.xr.enabled=d,i.texture.needsPMREMUpdate=!0}}class vs extends Qi{constructor(t,e,i,n,r,s,o,a,h,l){super(t=void 0!==t?t:[],e=void 0!==e?e:st,i,n,r,s,o,a,h,l),this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}vs.prototype.isCubeTexture=!0;class ys extends Zi{constructor(t,e={}){super(t,t,e);const i={width:t,height:t,depth:1},n=[i,i,i,i,i,i];this.texture=new vs(n,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:yt}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},n=new ls(5,5,5),r=new ps({name:"CubemapFromEquirect",uniforms:us(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:m,blending:A});r.uniforms.tEquirect.value=e;const s=new as(n,r),o=e.minFilter;e.minFilter===wt&&(e.minFilter=yt);return new gs(1,10,this).update(t,s),e.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,i,n){const r=t.getRenderTarget();for(let r=0;r<6;r++)t.setRenderTarget(this,r),t.clear(e,i,n);t.setRenderTarget(r)}}ys.prototype.isWebGLCubeRenderTarget=!0;const As=new on,xs=new on,ws=new Pi;class bs{constructor(t=new on(1,0,0),e=0){this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const n=As.subVectors(i,e).cross(xs.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(n,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const i=t.delta(As),n=this.normal.dot(i);if(0===n)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/n;return r<0||r>1?null:e.copy(i).multiplyScalar(r).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||ws.getNormalMatrix(t),n=this.coplanarPoint(As).applyMatrix4(t),r=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}bs.prototype.isPlane=!0;const Ss=new Cn,Es=new on;class Ts{constructor(t=new bs,e=new bs,i=new bs,n=new bs,r=new bs,s=new bs){this.planes=[t,e,i,n,r,s]}set(t,e,i,n,r,s){const o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(i),o[3].copy(n),o[4].copy(r),o[5].copy(s),this}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const e=this.planes,i=t.elements,n=i[0],r=i[1],s=i[2],o=i[3],a=i[4],h=i[5],l=i[6],u=i[7],c=i[8],d=i[9],p=i[10],f=i[11],m=i[12],g=i[13],v=i[14],y=i[15];return e[0].setComponents(o-n,u-a,f-c,y-m).normalize(),e[1].setComponents(o+n,u+a,f+c,y+m).normalize(),e[2].setComponents(o+r,u+h,f+d,y+g).normalize(),e[3].setComponents(o-r,u-h,f-d,y-g).normalize(),e[4].setComponents(o-s,u-l,f-p,y-v).normalize(),e[5].setComponents(o+s,u+l,f+p,y+v).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Ss.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Ss)}intersectsSprite(t){return Ss.center.set(0,0,0),Ss.radius=.7071067811865476,Ss.applyMatrix4(t.matrixWorld),this.intersectsSphere(Ss)}intersectsSphere(t){const e=this.planes,i=t.center,n=-t.radius;for(let t=0;t<6;t++){if(e[t].distanceToPoint(i)<n)return!1}return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const n=e[i];if(Es.x=n.normal.x>0?t.max.x:t.min.x,Es.y=n.normal.y>0?t.max.y:t.min.y,Es.z=n.normal.z>0?t.max.z:t.min.z,n.distanceToPoint(Es)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function _s(){let t=null,e=!1,i=null,n=null;function r(e,s){i(e,s),n=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==i&&(n=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(t){i=t},setContext:function(e){t=e}}}function Ms(t,e){const i=e.isWebGL2,n=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),n.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const i=n.get(e);i&&(t.deleteBuffer(i.buffer),n.delete(e))},update:function(e,r){if(e.isGLBufferAttribute){const t=n.get(e);return void((!t||t.version<e.version)&&n.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const s=n.get(e);void 0===s?n.set(e,function(e,n){const r=e.array,s=e.usage,o=t.createBuffer();let a;if(t.bindBuffer(n,o),t.bufferData(n,r,s),e.onUploadCallback(),r instanceof Float32Array)a=5126;else if(r instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!i)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");a=5131}else a=5123;else if(r instanceof Int16Array)a=5122;else if(r instanceof Uint32Array)a=5125;else if(r instanceof Int32Array)a=5124;else if(r instanceof Int8Array)a=5120;else if(r instanceof Uint8Array)a=5121;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);a=5121}return{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(e,r)):s.version<e.version&&(!function(e,n,r){const s=n.array,o=n.updateRange;t.bindBuffer(r,e),-1===o.count?t.bufferSubData(r,0,s):(i?t.bufferSubData(r,o.offset*s.BYTES_PER_ELEMENT,s,o.offset,o.count):t.bufferSubData(r,o.offset*s.BYTES_PER_ELEMENT,s.subarray(o.offset,o.offset+o.count)),o.count=-1)}(s.buffer,e,r),s.version=e.version)}}}class Cs extends Hr{constructor(t=1,e=1,i=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};const r=t/2,s=e/2,o=Math.floor(i),a=Math.floor(n),h=o+1,l=a+1,u=t/o,c=e/a,d=[],p=[],f=[],m=[];for(let t=0;t<l;t++){const e=t*c-s;for(let i=0;i<h;i++){const n=i*u-r;p.push(n,-e,0),f.push(0,0,1),m.push(i/o),m.push(1-t/a)}}for(let t=0;t<a;t++)for(let e=0;e<o;e++){const i=e+h*t,n=e+h*(t+1),r=e+1+h*(t+1),s=e+1+h*t;d.push(i,n,s),d.push(n,r,s)}this.setIndex(d),this.setAttribute("position",new Dr(p,3)),this.setAttribute("normal",new Dr(f,3)),this.setAttribute("uv",new Dr(m,2))}static fromJSON(t){return new Cs(t.width,t.height,t.widthSegments,t.heightSegments)}}const Ps={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Rs={common:{diffuse:{value:new Wi(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Pi},uv2Transform:{value:new Pi},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ci(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Wi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Wi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Pi}},sprite:{diffuse:{value:new Wi(16777215)},opacity:{value:1},center:{value:new Ci(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Pi}}},Os={basic:{uniforms:cs([Rs.common,Rs.specularmap,Rs.envmap,Rs.aomap,Rs.lightmap,Rs.fog]),vertexShader:Ps.meshbasic_vert,fragmentShader:Ps.meshbasic_frag},lambert:{uniforms:cs([Rs.common,Rs.specularmap,Rs.envmap,Rs.aomap,Rs.lightmap,Rs.emissivemap,Rs.fog,Rs.lights,{emissive:{value:new Wi(0)}}]),vertexShader:Ps.meshlambert_vert,fragmentShader:Ps.meshlambert_frag},phong:{uniforms:cs([Rs.common,Rs.specularmap,Rs.envmap,Rs.aomap,Rs.lightmap,Rs.emissivemap,Rs.bumpmap,Rs.normalmap,Rs.displacementmap,Rs.fog,Rs.lights,{emissive:{value:new Wi(0)},specular:{value:new Wi(1118481)},shininess:{value:30}}]),vertexShader:Ps.meshphong_vert,fragmentShader:Ps.meshphong_frag},standard:{uniforms:cs([Rs.common,Rs.envmap,Rs.aomap,Rs.lightmap,Rs.emissivemap,Rs.bumpmap,Rs.normalmap,Rs.displacementmap,Rs.roughnessmap,Rs.metalnessmap,Rs.fog,Rs.lights,{emissive:{value:new Wi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ps.meshphysical_vert,fragmentShader:Ps.meshphysical_frag},toon:{uniforms:cs([Rs.common,Rs.aomap,Rs.lightmap,Rs.emissivemap,Rs.bumpmap,Rs.normalmap,Rs.displacementmap,Rs.gradientmap,Rs.fog,Rs.lights,{emissive:{value:new Wi(0)}}]),vertexShader:Ps.meshtoon_vert,fragmentShader:Ps.meshtoon_frag},matcap:{uniforms:cs([Rs.common,Rs.bumpmap,Rs.normalmap,Rs.displacementmap,Rs.fog,{matcap:{value:null}}]),vertexShader:Ps.meshmatcap_vert,fragmentShader:Ps.meshmatcap_frag},points:{uniforms:cs([Rs.points,Rs.fog]),vertexShader:Ps.points_vert,fragmentShader:Ps.points_frag},dashed:{uniforms:cs([Rs.common,Rs.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ps.linedashed_vert,fragmentShader:Ps.linedashed_frag},depth:{uniforms:cs([Rs.common,Rs.displacementmap]),vertexShader:Ps.depth_vert,fragmentShader:Ps.depth_frag},normal:{uniforms:cs([Rs.common,Rs.bumpmap,Rs.normalmap,Rs.displacementmap,{opacity:{value:1}}]),vertexShader:Ps.meshnormal_vert,fragmentShader:Ps.meshnormal_frag},sprite:{uniforms:cs([Rs.sprite,Rs.fog]),vertexShader:Ps.sprite_vert,fragmentShader:Ps.sprite_frag},background:{uniforms:{uvTransform:{value:new Pi},t2D:{value:null}},vertexShader:Ps.background_vert,fragmentShader:Ps.background_frag},cube:{uniforms:cs([Rs.envmap,{opacity:{value:1}}]),vertexShader:Ps.cube_vert,fragmentShader:Ps.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ps.equirect_vert,fragmentShader:Ps.equirect_frag},distanceRGBA:{uniforms:cs([Rs.common,Rs.displacementmap,{referencePosition:{value:new on},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ps.distanceRGBA_vert,fragmentShader:Ps.distanceRGBA_frag},shadow:{uniforms:cs([Rs.lights,Rs.fog,{color:{value:new Wi(0)},opacity:{value:1}}]),vertexShader:Ps.shadow_vert,fragmentShader:Ps.shadow_frag}};function Ls(t,e,i,n,r,s){const o=new Wi(0);let a,h,l=!0===r?0:1,u=null,c=0,d=null;function p(t,e){i.buffers.color.setClear(t.r,t.g,t.b,e,s)}return{getClearColor:function(){return o},setClearColor:function(t,e=1){o.set(t),l=e,p(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(t){l=t,p(o,l)},render:function(i,r){let s=!1,g=!0===r.isScene?r.background:null;g&&g.isTexture&&(g=e.get(g));const v=t.xr,y=v.getSession&&v.getSession();y&&"additive"===y.environmentBlendMode&&(g=null),null===g?p(o,l):g&&g.isColor&&(p(g,1),s=!0),(t.autoClear||s)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),g&&(g.isCubeTexture||g.mapping===lt)?(void 0===h&&(h=new as(new ls(1,1,1),new ps({name:"BackgroundCubeMaterial",uniforms:us(Os.cube.uniforms),vertexShader:Os.cube.vertexShader,fragmentShader:Os.cube.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(t,e,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(h)),h.material.uniforms.envMap.value=g,h.material.uniforms.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1,u===g&&c===g.version&&d===t.toneMapping||(h.material.needsUpdate=!0,u=g,c=g.version,d=t.toneMapping),i.unshift(h,h.geometry,h.material,0,0,null)):g&&g.isTexture&&(void 0===a&&(a=new as(new Cs(2,2),new ps({name:"BackgroundMaterial",uniforms:us(Os.background.uniforms),vertexShader:Os.background.vertexShader,fragmentShader:Os.background.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(a)),a.material.uniforms.t2D.value=g,!0===g.matrixAutoUpdate&&g.updateMatrix(),a.material.uniforms.uvTransform.value.copy(g.matrix),u===g&&c===g.version&&d===t.toneMapping||(a.material.needsUpdate=!0,u=g,c=g.version,d=t.toneMapping),i.unshift(a,a.geometry,a.material,0,0,null))}}}function Is(t,e,i,n){const r=t.getParameter(34921),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||null!==s,a={},h=p(null);let l=h,u=!1;function c(e){return n.isWebGL2?t.bindVertexArray(e):s.bindVertexArrayOES(e)}function d(e){return n.isWebGL2?t.deleteVertexArray(e):s.deleteVertexArrayOES(e)}function p(t){const e=[],i=[],n=[];for(let t=0;t<r;t++)e[t]=0,i[t]=0,n[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:i,attributeDivisors:n,object:t,attributes:{},index:null}}function f(){const t=l.newAttributes;for(let e=0,i=t.length;e<i;e++)t[e]=0}function m(t){g(t,0)}function g(i,r){const s=l.newAttributes,o=l.enabledAttributes,a=l.attributeDivisors;if(s[i]=1,0===o[i]&&(t.enableVertexAttribArray(i),o[i]=1),a[i]!==r){(n.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,r),a[i]=r}}function v(){const e=l.newAttributes,i=l.enabledAttributes;for(let n=0,r=i.length;n<r;n++)i[n]!==e[n]&&(t.disableVertexAttribArray(n),i[n]=0)}function y(e,i,r,s,o,a){!0!==n.isWebGL2||5124!==r&&5125!==r?t.vertexAttribPointer(e,i,r,s,o,a):t.vertexAttribIPointer(e,i,r,o,a)}function A(){x(),u=!0,l!==h&&(l=h,c(l.object))}function x(){h.geometry=null,h.program=null,h.wireframe=!1}return{setup:function(r,h,d,A,x){let w=!1;if(o){const e=function(e,i,r){const o=!0===r.wireframe;let h=a[e.id];void 0===h&&(h={},a[e.id]=h);let l=h[i.id];void 0===l&&(l={},h[i.id]=l);let u=l[o];void 0===u&&(u=p(n.isWebGL2?t.createVertexArray():s.createVertexArrayOES()),l[o]=u);return u}(A,d,h);l!==e&&(l=e,c(l.object)),w=function(t,e){const i=l.attributes,n=t.attributes;let r=0;for(const t in n){const e=i[t],s=n[t];if(void 0===e)return!0;if(e.attribute!==s)return!0;if(e.data!==s.data)return!0;r++}return l.attributesNum!==r||l.index!==e}(A,x),w&&function(t,e){const i={},n=t.attributes;let r=0;for(const t in n){const e=n[t],s={};s.attribute=e,e.data&&(s.data=e.data),i[t]=s,r++}l.attributes=i,l.attributesNum=r,l.index=e}(A,x)}else{const t=!0===h.wireframe;l.geometry===A.id&&l.program===d.id&&l.wireframe===t||(l.geometry=A.id,l.program=d.id,l.wireframe=t,w=!0)}!0===r.isInstancedMesh&&(w=!0),null!==x&&i.update(x,34963),(w||u)&&(u=!1,function(r,s,o,a){if(!1===n.isWebGL2&&(r.isInstancedMesh||a.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;f();const h=a.attributes,l=o.getAttributes(),u=s.defaultAttributeValues;for(const e in l){const n=l[e];if(n.location>=0){let s=h[e];if(void 0===s&&("instanceMatrix"===e&&r.instanceMatrix&&(s=r.instanceMatrix),"instanceColor"===e&&r.instanceColor&&(s=r.instanceColor)),void 0!==s){const e=s.normalized,o=s.itemSize,h=i.get(s);if(void 0===h)continue;const l=h.buffer,u=h.type,c=h.bytesPerElement;if(s.isInterleavedBufferAttribute){const i=s.data,h=i.stride,d=s.offset;if(i.isInstancedInterleavedBuffer){for(let t=0;t<n.locationSize;t++)g(n.location+t,i.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=i.meshPerAttribute*i.count)}else for(let t=0;t<n.locationSize;t++)m(n.location+t);t.bindBuffer(34962,l);for(let t=0;t<n.locationSize;t++)y(n.location+t,o/n.locationSize,u,e,h*c,(d+o/n.locationSize*t)*c)}else{if(s.isInstancedBufferAttribute){for(let t=0;t<n.locationSize;t++)g(n.location+t,s.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let t=0;t<n.locationSize;t++)m(n.location+t);t.bindBuffer(34962,l);for(let t=0;t<n.locationSize;t++)y(n.location+t,o/n.locationSize,u,e,o*c,o/n.locationSize*t*c)}}else if(void 0!==u){const i=u[e];if(void 0!==i)switch(i.length){case 2:t.vertexAttrib2fv(n.location,i);break;case 3:t.vertexAttrib3fv(n.location,i);break;case 4:t.vertexAttrib4fv(n.location,i);break;default:t.vertexAttrib1fv(n.location,i)}}}}v()}(r,h,d,A),null!==x&&t.bindBuffer(34963,i.get(x).buffer))},reset:A,resetDefaultState:x,dispose:function(){A();for(const t in a){const e=a[t];for(const t in e){const i=e[t];for(const t in i)d(i[t].object),delete i[t];delete e[t]}delete a[t]}},releaseStatesOfGeometry:function(t){if(void 0===a[t.id])return;const e=a[t.id];for(const t in e){const i=e[t];for(const t in i)d(i[t].object),delete i[t];delete e[t]}delete a[t.id]},releaseStatesOfProgram:function(t){for(const e in a){const i=a[e];if(void 0===i[t.id])continue;const n=i[t.id];for(const t in n)d(n[t].object),delete n[t];delete i[t.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:v}}function Ds(t,e,i,n){const r=n.isWebGL2;let s;this.setMode=function(t){s=t},this.render=function(e,n){t.drawArrays(s,e,n),i.update(n,s,1)},this.renderInstances=function(n,o,a){if(0===a)return;let h,l;if(r)h=t,l="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),l="drawArraysInstancedANGLE",null===h)return;h[l](s,n,o,a),i.update(o,s,a)}}function Bs(t,e,i){let n;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let o=void 0!==i.precision?i.precision:"highp";const a=r(o);a!==o&&(o=a);const h=s||e.has("WEBGL_draw_buffers"),l=!0===i.logarithmicDepthBuffer,u=t.getParameter(34930),c=t.getParameter(35660),d=t.getParameter(3379),p=t.getParameter(34076),f=t.getParameter(34921),m=t.getParameter(36347),g=t.getParameter(36348),v=t.getParameter(36349),y=c>0,A=s||e.has("OES_texture_float");return{isWebGL2:s,drawBuffers:h,getMaxAnisotropy:function(){if(void 0!==n)return n;if(!0===e.has("EXT_texture_filter_anisotropic")){const i=e.get("EXT_texture_filter_anisotropic");n=t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:c,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:A,floatVertexTextures:y&&A,maxSamples:s?t.getParameter(36183):0}}function ks(t){const e=this;let i=null,n=0,r=!1,s=!1;const o=new bs,a=new Pi,h={value:null,needsUpdate:!1};function l(){h.value!==i&&(h.value=i,h.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(t,i,n,r){const s=null!==t?t.length:0;let l=null;if(0!==s){if(l=h.value,!0!==r||null===l){const e=n+4*s,r=i.matrixWorldInverse;a.getNormalMatrix(r),(null===l||l.length<e)&&(l=new Float32Array(e));for(let e=0,i=n;e!==s;++e,i+=4)o.copy(t[e]).applyMatrix4(r,a),o.normal.toArray(l,i),l[i+3]=o.constant}h.value=l,h.needsUpdate=!0}return e.numPlanes=s,e.numIntersection=0,l}this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,s){const o=0!==t.length||e||0!==n||r;return r=e,i=u(t,s,0),n=t.length,o},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,l()},this.setState=function(e,o,a){const c=e.clippingPlanes,d=e.clipIntersection,p=e.clipShadows,f=t.get(e);if(!r||null===c||0===c.length||s&&!p)s?u(null):l();else{const t=s?0:n,e=4*t;let r=f.clippingState||null;h.value=r,r=u(c,o,e,a);for(let t=0;t!==e;++t)r[t]=i[t];f.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function Fs(t){let e=new WeakMap;function i(t,e){return e===at?t.mapping=st:e===ht&&(t.mapping=ot),t}function n(t){const i=t.target;i.removeEventListener("dispose",n);const r=e.get(i);void 0!==r&&(e.delete(i),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const s=r.mapping;if(s===at||s===ht){if(e.has(r)){return i(e.get(r).texture,r.mapping)}{const s=r.image;if(s&&s.height>0){const o=new ys(s.height/2);return o.fromEquirectangularTexture(t,r),e.set(r,o),r.addEventListener("dispose",n),i(o.texture,r.mapping)}return null}}}return r},dispose:function(){e=new WeakMap}}}Os.physical={uniforms:cs([Os.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ci(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Wi(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ci},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Wi(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Wi(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Ps.meshphysical_vert,fragmentShader:Ps.meshphysical_frag};class Ns extends fs{constructor(t=-1,e=1,i=1,n=-1,r=.1,s=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,i,n,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let r=i-t,s=i+t,o=n+e,a=n-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,s=r+t*this.view.width,o-=e*this.view.offsetY,a=o-e*this.view.height}this.projectionMatrix.makeOrthographic(r,s,o,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}Ns.prototype.isOrthographicCamera=!0;const zs=[.125,.215,.35,.446,.526,.582],Us=new Ns,Gs=new Wi;let Vs=null;const Hs=(1+Math.sqrt(5))/2,Ws=1/Hs,js=[new on(1,1,1),new on(-1,1,1),new on(1,1,-1),new on(-1,1,-1),new on(0,Hs,Ws),new on(0,Hs,-Ws),new on(Ws,0,Hs),new on(-Ws,0,Hs),new on(Hs,Ws,0),new on(-Hs,Ws,0)];class Ys{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,n=100){Vs=this._renderer.getRenderTarget(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(t,i,n,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Qs(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Js(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(Vs),t.scissorTest=!1,qs(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===st||t.mapping===ot?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),Vs=this._renderer.getRenderTarget();const i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize-32,i={magFilter:yt,minFilter:yt,generateMipmaps:!1,type:Rt,format:kt,encoding:Le,depthBuffer:!1},n=Xs(t,e,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Xs(t,e,i);const{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],i=[],n=[];let r=t;const s=t-4+1+zs.length;for(let o=0;o<s;o++){const s=Math.pow(2,r);i.push(s);let a=1/s;o>t-4?a=zs[o-t+4-1]:0===o&&(a=0),n.push(a);const h=1/(s-1),l=-h/2,u=1+h/2,c=[l,l,u,l,u,u,l,l,u,u,l,u],d=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*d),y=new Float32Array(m*p*d),A=new Float32Array(g*p*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,i=t>2?0:-1,n=[e,i,0,e+2/3,i,0,e+2/3,i+1,0,e,i,0,e+2/3,i+1,0,e,i+1,0];v.set(n,f*p*t),y.set(c,m*p*t);const r=[t,t,t,t,t,t];A.set(r,g*p*t)}const x=new Hr;x.setAttribute("position",new Tr(v,f)),x.setAttribute("uv",new Tr(y,m)),x.setAttribute("faceIndex",new Tr(A,g)),e.push(x),r>4&&r--}return{lodPlanes:e,sizeLods:i,sigmas:n}}(n)),this._blurMaterial=function(t,e,i){const n=new Float32Array(20),r=new on(0,1,0);return new ps({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:t+".0"},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Ks(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:A,depthTest:!1,depthWrite:!1})}(n,t,e)}return n}_compileMaterial(t){const e=new as(this._lodPlanes[0],t);this._renderer.compile(e,Us)}_sceneToCubeUV(t,e,i,n){const r=new ms(90,1,e,i),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],a=this._renderer,h=a.autoClear,l=a.toneMapping;a.getClearColor(Gs),a.toneMapping=Z,a.autoClear=!1;const u=new br({name:"PMREM.Background",side:m,depthWrite:!1,depthTest:!1}),c=new as(new ls,u);let d=!1;const p=t.background;p?p.isColor&&(u.color.copy(p),t.background=null,d=!0):(u.color.copy(Gs),d=!0);for(let e=0;e<6;e++){const i=e%3;0===i?(r.up.set(0,s[e],0),r.lookAt(o[e],0,0)):1===i?(r.up.set(0,0,s[e]),r.lookAt(0,o[e],0)):(r.up.set(0,s[e],0),r.lookAt(0,0,o[e]));const h=this._cubeSize;qs(n,i*h,e>2?h:0,h,h),a.setRenderTarget(n),d&&a.render(c,r),a.render(t,r)}c.geometry.dispose(),c.material.dispose(),a.toneMapping=l,a.autoClear=h,t.background=p}_textureToCubeUV(t,e){const i=this._renderer,n=t.mapping===st||t.mapping===ot;n?(null===this._cubemapMaterial&&(this._cubemapMaterial=Qs()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Js());const r=n?this._cubemapMaterial:this._equirectMaterial,s=new as(this._lodPlanes[0],r);r.uniforms.envMap.value=t;const o=this._cubeSize;qs(e,0,0,3*o,2*o),i.setRenderTarget(e),i.render(s,Us)}_applyPMREM(t){const e=this._renderer,i=e.autoClear;e.autoClear=!1;for(let e=1;e<this._lodPlanes.length;e++){const i=Math.sqrt(this._sigmas[e]*this._sigmas[e]-this._sigmas[e-1]*this._sigmas[e-1]),n=js[(e-1)%js.length];this._blur(t,e-1,e,i,n)}e.autoClear=i}_blur(t,e,i,n,r){const s=this._pingPongRenderTarget;this._halfBlur(t,s,e,i,n,"latitudinal",r),this._halfBlur(s,t,i,i,n,"longitudinal",r)}_halfBlur(t,e,i,n,r,s,o){const a=this._renderer,h=this._blurMaterial,l=new as(this._lodPlanes[n],h),u=h.uniforms,c=this._sizeLods[i]-1,d=isFinite(r)?Math.PI/(2*c):2*Math.PI/39,p=r/d,f=isFinite(r)?1+Math.floor(3*p):20,m=[];let g=0;for(let t=0;t<20;++t){const e=t/p,i=Math.exp(-e*e/2);m.push(i),0===t?g+=i:t<f&&(g+=2*i)}for(let t=0;t<m.length;t++)m[t]=m[t]/g;u.envMap.value=t.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===s,o&&(u.poleAxis.value=o);const{_lodMax:v}=this;u.dTheta.value=d,u.mipInt.value=v-i;const y=this._sizeLods[n];qs(e,3*y*(n>v-4?n-v+4:0),4*(this._cubeSize-y),3*y,2*y),a.setRenderTarget(e),a.render(l,Us)}}function Xs(t,e,i){const n=new Zi(t,e,i);return n.texture.mapping=lt,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function qs(t,e,i,n,r){t.viewport.set(e,i,n,r),t.scissor.set(e,i,n,r)}function Js(){return new ps({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Ks(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:A,depthTest:!1,depthWrite:!1})}function Qs(){return new ps({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Ks(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:A,depthTest:!1,depthWrite:!1})}function Ks(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Zs(t){let e=new WeakMap,i=null;function n(t){const i=t.target;i.removeEventListener("dispose",n);const r=e.get(i);void 0!==r&&(e.delete(i),r.dispose())}return{get:function(r){if(r&&r.isTexture){const s=r.mapping,o=s===at||s===ht,a=s===st||s===ot;if(o||a){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let n=e.get(r);return null===i&&(i=new Ys(t)),n=o?i.fromEquirectangular(r,n):i.fromCubemap(r,n),e.set(r,n),n.texture}if(e.has(r))return e.get(r).texture;{const s=r.image;if(o&&s&&s.height>0||a&&s&&function(t){let e=0;for(let i=0;i<6;i++)void 0!==t[i]&&e++;return 6===e}(s)){null===i&&(i=new Ys(t));const s=o?i.fromEquirectangular(r):i.fromCubemap(r);return e.set(r,s),r.addEventListener("dispose",n),s.texture}return null}}}return r},dispose:function(){e=new WeakMap,null!==i&&(i.dispose(),i=null)}}}function $s(t){const e={};function i(i){if(void 0!==e[i])return e[i];let n;switch(i){case"WEBGL_depth_texture":n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=t.getExtension(i)}return e[i]=n,n}return{has:function(t){return null!==i(t)},init:function(t){t.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(t){const e=i(t);return e}}}function to(t,e,i,n){const r={},s=new WeakMap;function o(t){const a=t.target;null!==a.index&&e.remove(a.index);for(const t in a.attributes)e.remove(a.attributes[t]);a.removeEventListener("dispose",o),delete r[a.id];const h=s.get(a);h&&(e.remove(h),s.delete(a)),n.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,i.memory.geometries--}function a(t){const i=[],n=t.index,r=t.attributes.position;let o=0;if(null!==n){const t=n.array;o=n.version;for(let e=0,n=t.length;e<n;e+=3){const n=t[e+0],r=t[e+1],s=t[e+2];i.push(n,r,r,s,s,n)}}else{const t=r.array;o=r.version;for(let e=0,n=t.length/3-1;e<n;e+=3){const t=e+0,n=e+1,r=e+2;i.push(t,n,n,r,r,t)}}const a=new(Ri(i)?Lr:Rr)(i,1);a.version=o;const h=s.get(t);h&&e.remove(h),s.set(t,a)}return{get:function(t,e){return!0===r[e.id]||(e.addEventListener("dispose",o),r[e.id]=!0,i.memory.geometries++),e},update:function(t){const i=t.attributes;for(const t in i)e.update(i[t],34962);const n=t.morphAttributes;for(const t in n){const i=n[t];for(let t=0,n=i.length;t<n;t++)e.update(i[t],34962)}},getWireframeAttribute:function(t){const e=s.get(t);if(e){const i=t.index;null!==i&&e.version<i.version&&a(t)}else a(t);return s.get(t)}}}function eo(t,e,i,n){const r=n.isWebGL2;let s,o,a;this.setMode=function(t){s=t},this.setIndex=function(t){o=t.type,a=t.bytesPerElement},this.render=function(e,n){t.drawElements(s,n,o,e*a),i.update(n,s,1)},this.renderInstances=function(n,h,l){if(0===l)return;let u,c;if(r)u=t,c="drawElementsInstanced";else if(u=e.get("ANGLE_instanced_arrays"),c="drawElementsInstancedANGLE",null===u)return;u[c](s,h,o,n*a,l),i.update(h,s,l)}}function io(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,i,n){switch(e.calls++,i){case 4:e.triangles+=n*(t/3);break;case 1:e.lines+=n*(t/2);break;case 3:e.lines+=n*(t-1);break;case 2:e.lines+=n*t;break;case 0:e.points+=n*t}}}}function no(t,e){return t[0]-e[0]}function ro(t,e){return Math.abs(e[1])-Math.abs(t[1])}function so(t,e){let i=1;const n=e.isInterleavedBufferAttribute?e.data.array:e.array;n instanceof Int8Array?i=127:n instanceof Int16Array?i=32767:n instanceof Int32Array&&(i=2147483647),t.divideScalar(i)}function oo(t,e,i){const n={},r=new Float32Array(8),s=new WeakMap,o=new Ki,a=[];for(let t=0;t<8;t++)a[t]=[t,0];return{update:function(h,l,u,c){const d=h.morphTargetInfluences;if(!0===e.isWebGL2){const n=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,r=void 0!==n?n.length:0;let a=s.get(l);if(void 0===a||a.count!==r){void 0!==a&&a.texture.dispose();const t=void 0!==l.morphAttributes.position,i=void 0!==l.morphAttributes.normal,n=void 0!==l.morphAttributes.color,h=l.morphAttributes.position||[],u=l.morphAttributes.normal||[],c=l.morphAttributes.color||[];let d=0;!0===t&&(d=1),!0===i&&(d=2),!0===n&&(d=3);let p=l.attributes.position.count*d,f=1;p>e.maxTextureSize&&(f=Math.ceil(p/e.maxTextureSize),p=e.maxTextureSize);const m=new Float32Array(p*f*4*r),g=new $i(m,p,f,r);g.type=Pt,g.needsUpdate=!0;const v=4*d;for(let e=0;e<r;e++){const r=h[e],s=u[e],a=c[e],l=p*f*4*e;for(let e=0;e<r.count;e++){const h=e*v;!0===t&&(o.fromBufferAttribute(r,e),!0===r.normalized&&so(o,r),m[l+h+0]=o.x,m[l+h+1]=o.y,m[l+h+2]=o.z,m[l+h+3]=0),!0===i&&(o.fromBufferAttribute(s,e),!0===s.normalized&&so(o,s),m[l+h+4]=o.x,m[l+h+5]=o.y,m[l+h+6]=o.z,m[l+h+7]=0),!0===n&&(o.fromBufferAttribute(a,e),!0===a.normalized&&so(o,a),m[l+h+8]=o.x,m[l+h+9]=o.y,m[l+h+10]=o.z,m[l+h+11]=4===a.itemSize?o.w:1)}}a={count:r,texture:g,size:new Ci(p,f)},s.set(l,a),l.addEventListener("dispose",(function t(){g.dispose(),s.delete(l),l.removeEventListener("dispose",t)}))}let h=0;for(let t=0;t<d.length;t++)h+=d[t];const u=l.morphTargetsRelative?1:1-h;c.getUniforms().setValue(t,"morphTargetBaseInfluence",u),c.getUniforms().setValue(t,"morphTargetInfluences",d),c.getUniforms().setValue(t,"morphTargetsTexture",a.texture,i),c.getUniforms().setValue(t,"morphTargetsTextureSize",a.size)}else{const e=void 0===d?0:d.length;let i=n[l.id];if(void 0===i||i.length!==e){i=[];for(let t=0;t<e;t++)i[t]=[t,0];n[l.id]=i}for(let t=0;t<e;t++){const e=i[t];e[0]=t,e[1]=d[t]}i.sort(ro);for(let t=0;t<8;t++)t<e&&i[t][1]?(a[t][0]=i[t][0],a[t][1]=i[t][1]):(a[t][0]=Number.MAX_SAFE_INTEGER,a[t][1]=0);a.sort(no);const s=l.morphAttributes.position,o=l.morphAttributes.normal;let h=0;for(let t=0;t<8;t++){const e=a[t],i=e[0],n=e[1];i!==Number.MAX_SAFE_INTEGER&&n?(s&&l.getAttribute("morphTarget"+t)!==s[i]&&l.setAttribute("morphTarget"+t,s[i]),o&&l.getAttribute("morphNormal"+t)!==o[i]&&l.setAttribute("morphNormal"+t,o[i]),r[t]=n,h+=n):(s&&!0===l.hasAttribute("morphTarget"+t)&&l.deleteAttribute("morphTarget"+t),o&&!0===l.hasAttribute("morphNormal"+t)&&l.deleteAttribute("morphNormal"+t),r[t]=0)}const u=l.morphTargetsRelative?1:1-h;c.getUniforms().setValue(t,"morphTargetBaseInfluence",u),c.getUniforms().setValue(t,"morphTargetInfluences",r)}}}}function ao(t,e,i,n){let r=new WeakMap;function s(t){const e=t.target;e.removeEventListener("dispose",s),i.remove(e.instanceMatrix),null!==e.instanceColor&&i.remove(e.instanceColor)}return{update:function(t){const o=n.render.frame,a=t.geometry,h=e.get(t,a);return r.get(h)!==o&&(e.update(h),r.set(h,o)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",s)&&t.addEventListener("dispose",s),i.update(t.instanceMatrix,34962),null!==t.instanceColor&&i.update(t.instanceColor,34962)),h},dispose:function(){r=new WeakMap}}}const ho=new Qi,lo=new $i,uo=new en,co=new vs,po=[],fo=[],mo=new Float32Array(16),go=new Float32Array(9),vo=new Float32Array(4);function yo(t,e,i){const n=t[0];if(n<=0||n>0)return t;const r=e*i;let s=po[r];if(void 0===s&&(s=new Float32Array(r),po[r]=s),0!==e){n.toArray(s,0);for(let n=1,r=0;n!==e;++n)r+=i,t[n].toArray(s,r)}return s}function Ao(t,e){if(t.length!==e.length)return!1;for(let i=0,n=t.length;i<n;i++)if(t[i]!==e[i])return!1;return!0}function xo(t,e){for(let i=0,n=e.length;i<n;i++)t[i]=e[i]}function wo(t,e){let i=fo[e];void 0===i&&(i=new Int32Array(e),fo[e]=i);for(let n=0;n!==e;++n)i[n]=t.allocateTextureUnit();return i}function bo(t,e){const i=this.cache;i[0]!==e&&(t.uniform1f(this.addr,e),i[0]=e)}function So(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Ao(i,e))return;t.uniform2fv(this.addr,e),xo(i,e)}}function Eo(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else if(void 0!==e.r)i[0]===e.r&&i[1]===e.g&&i[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b);else{if(Ao(i,e))return;t.uniform3fv(this.addr,e),xo(i,e)}}function To(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z&&i[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Ao(i,e))return;t.uniform4fv(this.addr,e),xo(i,e)}}function _o(t,e){const i=this.cache,n=e.elements;if(void 0===n){if(Ao(i,e))return;t.uniformMatrix2fv(this.addr,!1,e),xo(i,e)}else{if(Ao(i,n))return;vo.set(n),t.uniformMatrix2fv(this.addr,!1,vo),xo(i,n)}}function Mo(t,e){const i=this.cache,n=e.elements;if(void 0===n){if(Ao(i,e))return;t.uniformMatrix3fv(this.addr,!1,e),xo(i,e)}else{if(Ao(i,n))return;go.set(n),t.uniformMatrix3fv(this.addr,!1,go),xo(i,n)}}function Co(t,e){const i=this.cache,n=e.elements;if(void 0===n){if(Ao(i,e))return;t.uniformMatrix4fv(this.addr,!1,e),xo(i,e)}else{if(Ao(i,n))return;mo.set(n),t.uniformMatrix4fv(this.addr,!1,mo),xo(i,n)}}function Po(t,e){const i=this.cache;i[0]!==e&&(t.uniform1i(this.addr,e),i[0]=e)}function Ro(t,e){const i=this.cache;Ao(i,e)||(t.uniform2iv(this.addr,e),xo(i,e))}function Oo(t,e){const i=this.cache;Ao(i,e)||(t.uniform3iv(this.addr,e),xo(i,e))}function Lo(t,e){const i=this.cache;Ao(i,e)||(t.uniform4iv(this.addr,e),xo(i,e))}function Io(t,e){const i=this.cache;i[0]!==e&&(t.uniform1ui(this.addr,e),i[0]=e)}function Do(t,e){const i=this.cache;Ao(i,e)||(t.uniform2uiv(this.addr,e),xo(i,e))}function Bo(t,e){const i=this.cache;Ao(i,e)||(t.uniform3uiv(this.addr,e),xo(i,e))}function ko(t,e){const i=this.cache;Ao(i,e)||(t.uniform4uiv(this.addr,e),xo(i,e))}function Fo(t,e,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture2D(e||ho,r)}function No(t,e,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(e||uo,r)}function zo(t,e,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTextureCube(e||co,r)}function Uo(t,e,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(e||lo,r)}function Go(t,e){t.uniform1fv(this.addr,e)}function Vo(t,e){const i=yo(e,this.size,2);t.uniform2fv(this.addr,i)}function Ho(t,e){const i=yo(e,this.size,3);t.uniform3fv(this.addr,i)}function Wo(t,e){const i=yo(e,this.size,4);t.uniform4fv(this.addr,i)}function jo(t,e){const i=yo(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,i)}function Yo(t,e){const i=yo(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,i)}function Xo(t,e){const i=yo(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,i)}function qo(t,e){t.uniform1iv(this.addr,e)}function Jo(t,e){t.uniform2iv(this.addr,e)}function Qo(t,e){t.uniform3iv(this.addr,e)}function Ko(t,e){t.uniform4iv(this.addr,e)}function Zo(t,e){t.uniform1uiv(this.addr,e)}function $o(t,e){t.uniform2uiv(this.addr,e)}function ta(t,e){t.uniform3uiv(this.addr,e)}function ea(t,e){t.uniform4uiv(this.addr,e)}function ia(t,e,i){const n=e.length,r=wo(i,n);t.uniform1iv(this.addr,r);for(let t=0;t!==n;++t)i.setTexture2D(e[t]||ho,r[t])}function na(t,e,i){const n=e.length,r=wo(i,n);t.uniform1iv(this.addr,r);for(let t=0;t!==n;++t)i.setTexture3D(e[t]||uo,r[t])}function ra(t,e,i){const n=e.length,r=wo(i,n);t.uniform1iv(this.addr,r);for(let t=0;t!==n;++t)i.setTextureCube(e[t]||co,r[t])}function sa(t,e,i){const n=e.length,r=wo(i,n);t.uniform1iv(this.addr,r);for(let t=0;t!==n;++t)i.setTexture2DArray(e[t]||lo,r[t])}function oa(t,e,i){this.id=t,this.addr=i,this.cache=[],this.setValue=function(t){switch(t){case 5126:return bo;case 35664:return So;case 35665:return Eo;case 35666:return To;case 35674:return _o;case 35675:return Mo;case 35676:return Co;case 5124:case 35670:return Po;case 35667:case 35671:return Ro;case 35668:case 35672:return Oo;case 35669:case 35673:return Lo;case 5125:return Io;case 36294:return Do;case 36295:return Bo;case 36296:return ko;case 35678:case 36198:case 36298:case 36306:case 35682:return Fo;case 35679:case 36299:case 36307:return No;case 35680:case 36300:case 36308:case 36293:return zo;case 36289:case 36303:case 36311:case 36292:return Uo}}(e.type)}function aa(t,e,i){this.id=t,this.addr=i,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Go;case 35664:return Vo;case 35665:return Ho;case 35666:return Wo;case 35674:return jo;case 35675:return Yo;case 35676:return Xo;case 5124:case 35670:return qo;case 35667:case 35671:return Jo;case 35668:case 35672:return Qo;case 35669:case 35673:return Ko;case 5125:return Zo;case 36294:return $o;case 36295:return ta;case 36296:return ea;case 35678:case 36198:case 36298:case 36306:case 35682:return ia;case 35679:case 36299:case 36307:return na;case 35680:case 36300:case 36308:case 36293:return ra;case 36289:case 36303:case 36311:case 36292:return sa}}(e.type)}function ha(t){this.id=t,this.seq=[],this.map={}}aa.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),xo(e,t)},ha.prototype.setValue=function(t,e,i){const n=this.seq;for(let r=0,s=n.length;r!==s;++r){const s=n[r];s.setValue(t,e[s.id],i)}};const la=/(\w+)(\])?(\[|\.)?/g;function ua(t,e){t.seq.push(e),t.map[e.id]=e}function ca(t,e,i){const n=t.name,r=n.length;for(la.lastIndex=0;;){const s=la.exec(n),o=la.lastIndex;let a=s[1];const h="]"===s[2],l=s[3];if(h&&(a|=0),void 0===l||"["===l&&o+2===r){ua(i,void 0===l?new oa(a,t,e):new aa(a,t,e));break}{let t=i.map[a];void 0===t&&(t=new ha(a),ua(i,t)),i=t}}}function da(t,e){this.seq=[],this.map={};const i=t.getProgramParameter(e,35718);for(let n=0;n<i;++n){const i=t.getActiveUniform(e,n);ca(i,t.getUniformLocation(e,i.name),this)}}function pa(t,e,i){const n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),n}da.prototype.setValue=function(t,e,i,n){const r=this.map[e];void 0!==r&&r.setValue(t,i,n)},da.prototype.setOptional=function(t,e,i){const n=e[i];void 0!==n&&this.setValue(t,i,n)},da.upload=function(t,e,i,n){for(let r=0,s=e.length;r!==s;++r){const s=e[r],o=i[s.id];!1!==o.needsUpdate&&s.setValue(t,o.value,n)}},da.seqWithValue=function(t,e){const i=[];for(let n=0,r=t.length;n!==r;++n){const r=t[n];r.id in e&&i.push(r)}return i};let fa=0;function ma(t,e,i){const n=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();if(n&&""===r)return"";const s=parseInt(/ERROR: 0:(\d+)/.exec(r)[1]);return i.toUpperCase()+"\n\n"+r+"\n\n"+function(t,e){const i=t.split("\n"),n=[],r=Math.max(e-6,0),s=Math.min(e+6,i.length);for(let t=r;t<s;t++)n.push(t+1+": "+i[t]);return n.join("\n")}(t.getShaderSource(e),s)}function ga(t,e){const i=function(t){switch(t){case Le:return["Linear","( value )"];case Ie:return["sRGB","( value )"];default:return["Linear","( value )"]}}(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function va(t,e){let i;switch(e){case $:i="Linear";break;case tt:i="Reinhard";break;case et:i="OptimizedCineon";break;case it:i="ACESFilmic";break;case nt:i="Custom";break;default:i="Linear"}return"vec3 "+t+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function ya(t){return""!==t}function Aa(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function xa(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const wa=/^[ \t]*#include +<([\w\d./]+)>/gm;function ba(t){return t.replace(wa,Sa)}function Sa(t,e){const i=Ps[e];if(void 0===i)throw new Error("Can not resolve #include <"+e+">");return ba(i)}const Ea=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Ta=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function _a(t){return t.replace(Ta,Ca).replace(Ea,Ma)}function Ma(t,e,i,n){return Ca(t,e,i,n)}function Ca(t,e,i,n){let r="";for(let t=parseInt(e);t<parseInt(i);t++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return r}function Pa(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Ra(t,e,i,n){const r=t.getContext(),s=i.defines;let o=i.vertexShader,a=i.fragmentShader;const h=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===c?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===d?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===p&&(e="SHADOWMAP_TYPE_VSM"),e}(i),l=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case st:case ot:e="ENVMAP_TYPE_CUBE";break;case lt:e="ENVMAP_TYPE_CUBE_UV"}return e}(i),u=function(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case ot:e="ENVMAP_MODE_REFRACTION"}return e}(i),f=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case J:e="ENVMAP_BLENDING_MULTIPLY";break;case Q:e="ENVMAP_BLENDING_MIX";break;case K:e="ENVMAP_BLENDING_ADD"}return e}(i),m=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const i=Math.log2(e/32+1)+3,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,i),112)),texelHeight:n,maxMip:i}}(i),g=i.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ya).join("\n")}(i),v=function(t){const e=[];for(const i in t){const n=t[i];!1!==n&&e.push("#define "+i+" "+n)}return e.join("\n")}(s),y=r.createProgram();let A,x,w=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?(A=[v].filter(ya).join("\n"),A.length>0&&(A+="\n"),x=[g,v].filter(ya).join("\n"),x.length>0&&(x+="\n")):(A=[Pa(i),"#define SHADER_NAME "+i.shaderName,v,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+i.maxBones,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+u:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.morphColors&&i.isWebGL2?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+h:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ya).join("\n"),x=[g,Pa(i),"#define SHADER_NAME "+i.shaderName,v,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+l:"",i.envMap?"#define "+u:"",i.envMap?"#define "+f:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+h:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==Z?"#define TONE_MAPPING":"",i.toneMapping!==Z?Ps.tonemapping_pars_fragment:"",i.toneMapping!==Z?va("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",Ps.encodings_pars_fragment,ga("linearToOutputTexel",i.outputEncoding),i.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(ya).join("\n")),o=ba(o),o=Aa(o,i),o=xa(o,i),a=ba(a),a=Aa(a,i),a=xa(a,i),o=_a(o),a=_a(a),i.isWebGL2&&!0!==i.isRawShaderMaterial&&(w="#version 300 es\n",A=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+A,x=["#define varying in",i.glslVersion===pi?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===pi?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+x);const b=w+x+a,S=pa(r,35633,w+A+o),E=pa(r,35632,b);if(r.attachShader(y,S),r.attachShader(y,E),void 0!==i.index0AttributeName?r.bindAttribLocation(y,0,i.index0AttributeName):!0===i.morphTargets&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y),t.debug.checkShaderErrors){const t=r.getProgramInfoLog(y).trim(),e=r.getShaderInfoLog(S).trim(),i=r.getShaderInfoLog(E).trim();let n=!0,s=!0;if(!1===r.getProgramParameter(y,35714)){n=!1;ma(r,S,"vertex"),ma(r,E,"fragment")}else""!==t||""!==e&&""!==i||(s=!1);s&&(this.diagnostics={runnable:n,programLog:t,vertexShader:{log:e,prefix:A},fragmentShader:{log:i,prefix:x}})}let T,_;return r.deleteShader(S),r.deleteShader(E),this.getUniforms=function(){return void 0===T&&(T=new da(r,y)),T},this.getAttributes=function(){return void 0===_&&(_=function(t,e){const i={},n=t.getProgramParameter(e,35721);for(let r=0;r<n;r++){const n=t.getActiveAttrib(e,r),s=n.name;let o=1;35674===n.type&&(o=2),35675===n.type&&(o=3),35676===n.type&&(o=4),i[s]={type:n.type,location:t.getAttribLocation(e,s),locationSize:o}}return i}(r,y)),_},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.name=i.shaderName,this.id=fa++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=S,this.fragmentShader=E,this}let Oa=0;class La{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,i=t.fragmentShader,n=this._getShaderStage(e),r=this._getShaderStage(i),s=this._getShaderCacheForMaterial(t);return!1===s.has(n)&&(s.add(n),n.usedTimes++),!1===s.has(r)&&(s.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const t of e)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;return!1===e.has(t)&&e.set(t,new Set),e.get(t)}_getShaderStage(t){const e=this.shaderCache;if(!1===e.has(t)){const i=new Ia(t);e.set(t,i)}return e.get(t)}}class Ia{constructor(t){this.id=Oa++,this.code=t,this.usedTimes=0}}function Da(t,e,i,n,r,s,o){const a=new qn,h=new La,l=[],u=r.isWebGL2,c=r.logarithmicDepthBuffer,d=r.floatVertexTextures,p=r.maxVertexUniforms,f=r.vertexTextures;let v=r.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(s,a,l,A,w){const b=A.fog,S=w.geometry,E=s.isMeshStandardMaterial?A.environment:null,T=(s.isMeshStandardMaterial?i:e).get(s.envMap||E),_=T&&T.mapping===lt?T.image.height:null,M=y[s.type],C=w.isSkinnedMesh?function(t){const e=t.skeleton.bones;if(d)return 1024;{const t=p,i=Math.floor((t-20)/4),n=Math.min(i,e.length);return n<e.length?0:n}}(w):0;null!==s.precision&&(v=r.getMaxPrecision(s.precision),s.precision);const P=S.morphAttributes.position||S.morphAttributes.normal||S.morphAttributes.color,R=void 0!==P?P.length:0;let O,L,I,D,B=0;if(void 0!==S.morphAttributes.position&&(B=1),void 0!==S.morphAttributes.normal&&(B=2),void 0!==S.morphAttributes.color&&(B=3),M){const t=Os[M];O=t.vertexShader,L=t.fragmentShader}else O=s.vertexShader,L=s.fragmentShader,h.update(s),I=h.getVertexShaderID(s),D=h.getFragmentShaderID(s);const k=t.getRenderTarget(),F=s.alphaTest>0,N=s.clearcoat>0;return{isWebGL2:u,shaderID:M,shaderName:s.type,vertexShader:O,fragmentShader:L,defines:s.defines,customVertexShaderID:I,customFragmentShaderID:D,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:v,instancing:!0===w.isInstancedMesh,instancingColor:!0===w.isInstancedMesh&&null!==w.instanceColor,supportsVertexTextures:f,outputEncoding:null===k?t.outputEncoding:!0===k.isXRRenderTarget?k.texture.encoding:Le,map:!!s.map,matcap:!!s.matcap,envMap:!!T,envMapMode:T&&T.mapping,envMapCubeUVHeight:_,lightMap:!!s.lightMap,aoMap:!!s.aoMap,emissiveMap:!!s.emissiveMap,bumpMap:!!s.bumpMap,normalMap:!!s.normalMap,objectSpaceNormalMap:s.normalMapType===Fe,tangentSpaceNormalMap:s.normalMapType===ke,decodeVideoTexture:!!s.map&&!0===s.map.isVideoTexture&&s.map.encoding===Ie,clearcoat:N,clearcoatMap:N&&!!s.clearcoatMap,clearcoatRoughnessMap:N&&!!s.clearcoatRoughnessMap,clearcoatNormalMap:N&&!!s.clearcoatNormalMap,displacementMap:!!s.displacementMap,roughnessMap:!!s.roughnessMap,metalnessMap:!!s.metalnessMap,specularMap:!!s.specularMap,specularIntensityMap:!!s.specularIntensityMap,specularColorMap:!!s.specularColorMap,opaque:!1===s.transparent&&s.blending===x,alphaMap:!!s.alphaMap,alphaTest:F,gradientMap:!!s.gradientMap,sheen:s.sheen>0,sheenColorMap:!!s.sheenColorMap,sheenRoughnessMap:!!s.sheenRoughnessMap,transmission:s.transmission>0,transmissionMap:!!s.transmissionMap,thicknessMap:!!s.thicknessMap,combine:s.combine,vertexTangents:!!s.normalMap&&!!S.attributes.tangent,vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!S.attributes.color&&4===S.attributes.color.itemSize,vertexUvs:!!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatMap||s.clearcoatRoughnessMap||s.clearcoatNormalMap||s.displacementMap||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheenColorMap||s.sheenRoughnessMap),uvsVertexOnly:!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatNormalMap||s.transmission>0||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheen>0||s.sheenColorMap||s.sheenRoughnessMap||!s.displacementMap),fog:!!b,useFog:s.fog,fogExp2:b&&b.isFogExp2,flatShading:!!s.flatShading,sizeAttenuation:s.sizeAttenuation,logarithmicDepthBuffer:c,skinning:!0===w.isSkinnedMesh&&C>0,maxBones:C,useVertexTexture:d,morphTargets:void 0!==S.morphAttributes.position,morphNormals:void 0!==S.morphAttributes.normal,morphColors:void 0!==S.morphAttributes.color,morphTargetsCount:R,morphTextureStride:B,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:s.dithering,shadowMapEnabled:t.shadowMap.enabled&&l.length>0,shadowMapType:t.shadowMap.type,toneMapping:s.toneMapped?t.toneMapping:Z,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:s.premultipliedAlpha,doubleSided:s.side===g,flipSided:s.side===m,depthPacking:void 0!==s.depthPacking&&s.depthPacking,index0AttributeName:s.index0AttributeName,extensionDerivatives:s.extensions&&s.extensions.derivatives,extensionFragDepth:s.extensions&&s.extensions.fragDepth,extensionDrawBuffers:s.extensions&&s.extensions.drawBuffers,extensionShaderTextureLOD:s.extensions&&s.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||n.has("EXT_shader_texture_lod"),customProgramCacheKey:s.customProgramCacheKey()}},getProgramCacheKey:function(e){const i=[];if(e.shaderID?i.push(e.shaderID):(i.push(e.customVertexShaderID),i.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)i.push(t),i.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(!function(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.combine),t.push(e.vertexUvs),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.maxBones),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection)}(i,e),function(t,e){a.disableAll(),e.isWebGL2&&a.enable(0);e.supportsVertexTextures&&a.enable(1);e.instancing&&a.enable(2);e.instancingColor&&a.enable(3);e.map&&a.enable(4);e.matcap&&a.enable(5);e.envMap&&a.enable(6);e.lightMap&&a.enable(7);e.aoMap&&a.enable(8);e.emissiveMap&&a.enable(9);e.bumpMap&&a.enable(10);e.normalMap&&a.enable(11);e.objectSpaceNormalMap&&a.enable(12);e.tangentSpaceNormalMap&&a.enable(13);e.clearcoat&&a.enable(14);e.clearcoatMap&&a.enable(15);e.clearcoatRoughnessMap&&a.enable(16);e.clearcoatNormalMap&&a.enable(17);e.displacementMap&&a.enable(18);e.specularMap&&a.enable(19);e.roughnessMap&&a.enable(20);e.metalnessMap&&a.enable(21);e.gradientMap&&a.enable(22);e.alphaMap&&a.enable(23);e.alphaTest&&a.enable(24);e.vertexColors&&a.enable(25);e.vertexAlphas&&a.enable(26);e.vertexUvs&&a.enable(27);e.vertexTangents&&a.enable(28);e.uvsVertexOnly&&a.enable(29);e.fog&&a.enable(30);t.push(a.mask),a.disableAll(),e.useFog&&a.enable(0);e.flatShading&&a.enable(1);e.logarithmicDepthBuffer&&a.enable(2);e.skinning&&a.enable(3);e.useVertexTexture&&a.enable(4);e.morphTargets&&a.enable(5);e.morphNormals&&a.enable(6);e.morphColors&&a.enable(7);e.premultipliedAlpha&&a.enable(8);e.shadowMapEnabled&&a.enable(9);e.physicallyCorrectLights&&a.enable(10);e.doubleSided&&a.enable(11);e.flipSided&&a.enable(12);e.depthPacking&&a.enable(13);e.dithering&&a.enable(14);e.specularIntensityMap&&a.enable(15);e.specularColorMap&&a.enable(16);e.transmission&&a.enable(17);e.transmissionMap&&a.enable(18);e.thicknessMap&&a.enable(19);e.sheen&&a.enable(20);e.sheenColorMap&&a.enable(21);e.sheenRoughnessMap&&a.enable(22);e.decodeVideoTexture&&a.enable(23);e.opaque&&a.enable(24);t.push(a.mask)}(i,e),i.push(t.outputEncoding)),i.push(e.customProgramCacheKey),i.join()},getUniforms:function(t){const e=y[t.type];let i;if(e){const t=Os[e];i=ds.clone(t.uniforms)}else i=t.uniforms;return i},acquireProgram:function(e,i){let n;for(let t=0,e=l.length;t<e;t++){const e=l[t];if(e.cacheKey===i){n=e,++n.usedTimes;break}}return void 0===n&&(n=new Ra(t,i,e,s),l.push(n)),n},releaseProgram:function(t){if(0==--t.usedTimes){const e=l.indexOf(t);l[e]=l[l.length-1],l.pop(),t.destroy()}},releaseShaderCache:function(t){h.remove(t)},programs:l,dispose:function(){h.dispose()}}}function Ba(){let t=new WeakMap;return{get:function(e){let i=t.get(e);return void 0===i&&(i={},t.set(e,i)),i},remove:function(e){t.delete(e)},update:function(e,i,n){t.get(e)[i]=n},dispose:function(){t=new WeakMap}}}function ka(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Fa(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Na(){const t=[];let e=0;const i=[],n=[],r=[];function s(i,n,r,s,o,a){let h=t[e];return void 0===h?(h={id:i.id,object:i,geometry:n,material:r,groupOrder:s,renderOrder:i.renderOrder,z:o,group:a},t[e]=h):(h.id=i.id,h.object=i,h.geometry=n,h.material=r,h.groupOrder=s,h.renderOrder=i.renderOrder,h.z=o,h.group=a),e++,h}return{opaque:i,transmissive:n,transparent:r,init:function(){e=0,i.length=0,n.length=0,r.length=0},push:function(t,e,o,a,h,l){const u=s(t,e,o,a,h,l);o.transmission>0?n.push(u):!0===o.transparent?r.push(u):i.push(u)},unshift:function(t,e,o,a,h,l){const u=s(t,e,o,a,h,l);o.transmission>0?n.unshift(u):!0===o.transparent?r.unshift(u):i.unshift(u)},finish:function(){for(let i=e,n=t.length;i<n;i++){const e=t[i];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){i.length>1&&i.sort(t||ka),n.length>1&&n.sort(e||Fa),r.length>1&&r.sort(e||Fa)}}}function za(){let t=new WeakMap;return{get:function(e,i){let n;return!1===t.has(e)?(n=new Na,t.set(e,[n])):i>=t.get(e).length?(n=new Na,t.get(e).push(n)):n=t.get(e)[i],n},dispose:function(){t=new WeakMap}}}function Ua(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let i;switch(e.type){case"DirectionalLight":i={direction:new on,color:new Wi};break;case"SpotLight":i={position:new on,direction:new on,color:new Wi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new on,color:new Wi,distance:0,decay:0};break;case"HemisphereLight":i={direction:new on,skyColor:new Wi,groundColor:new Wi};break;case"RectAreaLight":i={color:new Wi,position:new on,halfWidth:new on,halfHeight:new on}}return t[e.id]=i,i}}}let Ga=0;function Va(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Ha(t,e){const i=new Ua,n=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let i;switch(e.type){case"DirectionalLight":case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ci};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ci,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=i,i}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let t=0;t<9;t++)r.probe.push(new on);const s=new on,o=new Fn,a=new Fn;return{setup:function(s,o){let a=0,h=0,l=0;for(let t=0;t<9;t++)r.probe[t].set(0,0,0);let u=0,c=0,d=0,p=0,f=0,m=0,g=0,v=0;s.sort(Va);const y=!0!==o?Math.PI:1;for(let t=0,e=s.length;t<e;t++){const e=s[t],o=e.color,A=e.intensity,x=e.distance,w=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)a+=o.r*A*y,h+=o.g*A*y,l+=o.b*A*y;else if(e.isLightProbe)for(let t=0;t<9;t++)r.probe[t].addScaledVector(e.sh.coefficients[t],A);else if(e.isDirectionalLight){const t=i.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*y),e.castShadow){const t=e.shadow,i=n.get(e);i.shadowBias=t.bias,i.shadowNormalBias=t.normalBias,i.shadowRadius=t.radius,i.shadowMapSize=t.mapSize,r.directionalShadow[u]=i,r.directionalShadowMap[u]=w,r.directionalShadowMatrix[u]=e.shadow.matrix,m++}r.directional[u]=t,u++}else if(e.isSpotLight){const t=i.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(o).multiplyScalar(A*y),t.distance=x,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,e.castShadow){const t=e.shadow,i=n.get(e);i.shadowBias=t.bias,i.shadowNormalBias=t.normalBias,i.shadowRadius=t.radius,i.shadowMapSize=t.mapSize,r.spotShadow[d]=i,r.spotShadowMap[d]=w,r.spotShadowMatrix[d]=e.shadow.matrix,v++}r.spot[d]=t,d++}else if(e.isRectAreaLight){const t=i.get(e);t.color.copy(o).multiplyScalar(A),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),r.rectArea[p]=t,p++}else if(e.isPointLight){const t=i.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*y),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,i=n.get(e);i.shadowBias=t.bias,i.shadowNormalBias=t.normalBias,i.shadowRadius=t.radius,i.shadowMapSize=t.mapSize,i.shadowCameraNear=t.camera.near,i.shadowCameraFar=t.camera.far,r.pointShadow[c]=i,r.pointShadowMap[c]=w,r.pointShadowMatrix[c]=e.shadow.matrix,g++}r.point[c]=t,c++}else if(e.isHemisphereLight){const t=i.get(e);t.skyColor.copy(e.color).multiplyScalar(A*y),t.groundColor.copy(e.groundColor).multiplyScalar(A*y),r.hemi[f]=t,f++}}p>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=Rs.LTC_FLOAT_1,r.rectAreaLTC2=Rs.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")&&(r.rectAreaLTC1=Rs.LTC_HALF_1,r.rectAreaLTC2=Rs.LTC_HALF_2)),r.ambient[0]=a,r.ambient[1]=h,r.ambient[2]=l;const A=r.hash;A.directionalLength===u&&A.pointLength===c&&A.spotLength===d&&A.rectAreaLength===p&&A.hemiLength===f&&A.numDirectionalShadows===m&&A.numPointShadows===g&&A.numSpotShadows===v||(r.directional.length=u,r.spot.length=d,r.rectArea.length=p,r.point.length=c,r.hemi.length=f,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=v,r.spotShadowMap.length=v,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotShadowMatrix.length=v,A.directionalLength=u,A.pointLength=c,A.spotLength=d,A.rectAreaLength=p,A.hemiLength=f,A.numDirectionalShadows=m,A.numPointShadows=g,A.numSpotShadows=v,r.version=Ga++)},setupView:function(t,e){let i=0,n=0,h=0,l=0,u=0;const c=e.matrixWorldInverse;for(let e=0,d=t.length;e<d;e++){const d=t[e];if(d.isDirectionalLight){const t=r.directional[i];t.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(c),i++}else if(d.isSpotLight){const t=r.spot[h];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(c),t.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(c),h++}else if(d.isRectAreaLight){const t=r.rectArea[l];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(c),a.identity(),o.copy(d.matrixWorld),o.premultiply(c),a.extractRotation(o),t.halfWidth.set(.5*d.width,0,0),t.halfHeight.set(0,.5*d.height,0),t.halfWidth.applyMatrix4(a),t.halfHeight.applyMatrix4(a),l++}else if(d.isPointLight){const t=r.point[n];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(c),n++}else if(d.isHemisphereLight){const t=r.hemi[u];t.direction.setFromMatrixPosition(d.matrixWorld),t.direction.transformDirection(c),t.direction.normalize(),u++}}},state:r}}function Wa(t,e){const i=new Ha(t,e),n=[],r=[];return{init:function(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:i},setupLights:function(t){i.setup(n,t)},setupLightsView:function(t){i.setupView(n,t)},pushLight:function(t){n.push(t)},pushShadow:function(t){r.push(t)}}}function ja(t,e){let i=new WeakMap;return{get:function(n,r=0){let s;return!1===i.has(n)?(s=new Wa(t,e),i.set(n,[s])):r>=i.get(n).length?(s=new Wa(t,e),i.get(n).push(s)):s=i.get(n)[r],s},dispose:function(){i=new WeakMap}}}class Ya extends wr{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=De,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}Ya.prototype.isMeshDepthMaterial=!0;class Xa extends wr{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new on,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}Xa.prototype.isMeshDistanceMaterial=!0;function qa(t,e,i){let n=new Ts;const r=new Ci,s=new Ci,o=new Ki,a=new Ya({depthPacking:Be}),h=new Xa,l={},u=i.maxTextureSize,d={0:m,1:f,2:g},v=new ps({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ci},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const x=new Hr;x.setAttribute("position",new Tr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new as(x,v),b=this;function S(i,n){const r=e.update(w);v.defines.VSM_SAMPLES!==i.blurSamples&&(v.defines.VSM_SAMPLES=i.blurSamples,y.defines.VSM_SAMPLES=i.blurSamples,v.needsUpdate=!0,y.needsUpdate=!0),v.uniforms.shadow_pass.value=i.map.texture,v.uniforms.resolution.value=i.mapSize,v.uniforms.radius.value=i.radius,t.setRenderTarget(i.mapPass),t.clear(),t.renderBufferDirect(n,null,r,v,w,null),y.uniforms.shadow_pass.value=i.mapPass.texture,y.uniforms.resolution.value=i.mapSize,y.uniforms.radius.value=i.radius,t.setRenderTarget(i.map),t.clear(),t.renderBufferDirect(n,null,r,y,w,null)}function E(e,i,n,r,s,o){let u=null;const c=!0===n.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(u=void 0!==c?c:!0===n.isPointLight?h:a,t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0){const t=u.uuid,e=i.uuid;let n=l[t];void 0===n&&(n={},l[t]=n);let r=n[e];void 0===r&&(r=u.clone(),n[e]=r),u=r}return u.visible=i.visible,u.wireframe=i.wireframe,u.side=o===p?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:d[i.side],u.alphaMap=i.alphaMap,u.alphaTest=i.alphaTest,u.clipShadows=i.clipShadows,u.clippingPlanes=i.clippingPlanes,u.clipIntersection=i.clipIntersection,u.displacementMap=i.displacementMap,u.displacementScale=i.displacementScale,u.displacementBias=i.displacementBias,u.wireframeLinewidth=i.wireframeLinewidth,u.linewidth=i.linewidth,!0===n.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(n.matrixWorld),u.nearDistance=r,u.farDistance=s),u}function T(i,r,s,o,a){if(!1===i.visible)return;if(i.layers.test(r.layers)&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&a===p)&&(!i.frustumCulled||n.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,i.matrixWorld);const n=e.update(i),r=i.material;if(Array.isArray(r)){const e=n.groups;for(let h=0,l=e.length;h<l;h++){const l=e[h],u=r[l.materialIndex];if(u&&u.visible){const e=E(i,u,o,s.near,s.far,a);t.renderBufferDirect(s,null,n,e,i,l)}}}else if(r.visible){const e=E(i,r,o,s.near,s.far,a);t.renderBufferDirect(s,null,n,e,i,null)}}const h=i.children;for(let t=0,e=h.length;t<e;t++)T(h[t],r,s,o,a)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=c,this.render=function(e,i,a){if(!1===b.enabled)return;if(!1===b.autoUpdate&&!1===b.needsUpdate)return;if(0===e.length)return;const h=t.getRenderTarget(),l=t.getActiveCubeFace(),c=t.getActiveMipmapLevel(),d=t.state;d.setBlending(A),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let h=0,l=e.length;h<l;h++){const l=e[h],c=l.shadow;if(void 0===c)continue;if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;r.copy(c.mapSize);const f=c.getFrameExtents();if(r.multiply(f),s.copy(c.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/f.x),r.x=s.x*f.x,c.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/f.y),r.y=s.y*f.y,c.mapSize.y=s.y)),null!==c.map||c.isPointLightShadow||this.type!==p||(c.map=new Zi(r.x,r.y),c.map.texture.name=l.name+".shadowMap",c.mapPass=new Zi(r.x,r.y),c.camera.updateProjectionMatrix()),null===c.map){const t={minFilter:pt,magFilter:pt,format:kt};c.map=new Zi(r.x,r.y,t),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}t.setRenderTarget(c.map),t.clear();const m=c.getViewportCount();for(let t=0;t<m;t++){const e=c.getViewport(t);o.set(s.x*e.x,s.y*e.y,s.x*e.z,s.y*e.w),d.viewport(o),c.updateMatrices(l,t),n=c.getFrustum(),T(i,a,c.camera,l,this.type)}c.isPointLightShadow||this.type!==p||S(c,a),c.needsUpdate=!1}b.needsUpdate=!1,t.setRenderTarget(h,l,c)}}function Ja(t,e,i){const n=i.isWebGL2;const r=new function(){let e=!1;const i=new Ki;let n=null;const r=new Ki(0,0,0,0);return{setMask:function(i){n===i||e||(t.colorMask(i,i,i,i),n=i)},setLocked:function(t){e=t},setClear:function(e,n,s,o,a){!0===a&&(e*=o,n*=o,s*=o),i.set(e,n,s,o),!1===r.equals(i)&&(t.clearColor(e,n,s,o),r.copy(i))},reset:function(){e=!1,n=null,r.set(-1,0,0,0)}}},s=new function(){let e=!1,i=null,n=null,r=null;return{setTest:function(t){t?At(2929):xt(2929)},setMask:function(n){i===n||e||(t.depthMask(n),i=n)},setFunc:function(e){if(n!==e){if(e)switch(e){case G:t.depthFunc(512);break;case V:t.depthFunc(519);break;case H:t.depthFunc(513);break;case W:t.depthFunc(515);break;case j:t.depthFunc(514);break;case Y:t.depthFunc(518);break;case X:t.depthFunc(516);break;case q:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);n=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,i=null,n=null,r=null}}},l=new function(){let e=!1,i=null,n=null,r=null,s=null,o=null,a=null,h=null,l=null;return{setTest:function(t){e||(t?At(2960):xt(2960))},setMask:function(n){i===n||e||(t.stencilMask(n),i=n)},setFunc:function(e,i,o){n===e&&r===i&&s===o||(t.stencilFunc(e,i,o),n=e,r=i,s=o)},setOp:function(e,i,n){o===e&&a===i&&h===n||(t.stencilOp(e,i,n),o=e,a=i,h=n)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,i=null,n=null,r=null,s=null,o=null,a=null,h=null,l=null}}};let u={},c={},d=new WeakMap,p=[],f=null,v=!1,y=null,J=null,Q=null,K=null,Z=null,$=null,tt=null,et=!1,it=null,nt=null,rt=null,st=null,ot=null;const at=t.getParameter(35661);let ht=!1,lt=0;const ut=t.getParameter(7938);-1!==ut.indexOf("WebGL")?(lt=parseFloat(/^WebGL (\d)/.exec(ut)[1]),ht=lt>=1):-1!==ut.indexOf("OpenGL ES")&&(lt=parseFloat(/^OpenGL ES (\d)/.exec(ut)[1]),ht=lt>=2);let ct=null,dt={};const pt=t.getParameter(3088),ft=t.getParameter(2978),mt=(new Ki).fromArray(pt),gt=(new Ki).fromArray(ft);function vt(e,i,n){const r=new Uint8Array(4),s=t.createTexture();t.bindTexture(e,s),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let e=0;e<n;e++)t.texImage2D(i+e,0,6408,1,1,0,6408,5121,r);return s}const yt={};function At(e){!0!==u[e]&&(t.enable(e),u[e]=!0)}function xt(e){!1!==u[e]&&(t.disable(e),u[e]=!1)}yt[3553]=vt(3553,3553,1),yt[34067]=vt(34067,34069,6),r.setClear(0,0,0,1),s.setClear(1),l.setClear(0),At(2929),s.setFunc(W),Et(!1),Tt(a),At(2884),St(A);const wt={[T]:32774,[_]:32778,[M]:32779};if(n)wt[C]=32775,wt[P]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(wt[C]=t.MIN_EXT,wt[P]=t.MAX_EXT)}const bt={[R]:0,[O]:1,[L]:768,[D]:770,[U]:776,[N]:774,[k]:772,[I]:769,[B]:771,[z]:775,[F]:773};function St(e,i,n,r,s,o,a,h){if(e!==A){if(!1===v&&(At(3042),v=!0),e===E)s=s||i,o=o||n,a=a||r,i===J&&s===Z||(t.blendEquationSeparate(wt[i],wt[s]),J=i,Z=s),n===Q&&r===K&&o===$&&a===tt||(t.blendFuncSeparate(bt[n],bt[r],bt[o],bt[a]),Q=n,K=r,$=o,tt=a),y=e,et=null;else if(e!==y||h!==et){if(J===T&&Z===T||(t.blendEquation(32774),J=T,Z=T),h)switch(e){case x:t.blendFuncSeparate(1,771,1,771);break;case w:t.blendFunc(1,1);break;case b:t.blendFuncSeparate(0,769,0,1);break;case S:t.blendFuncSeparate(0,768,0,770)}else switch(e){case x:t.blendFuncSeparate(770,771,1,771);break;case w:t.blendFunc(770,1);break;case b:t.blendFuncSeparate(0,769,0,1);break;case S:t.blendFunc(0,768)}Q=null,K=null,$=null,tt=null,y=e,et=h}}else!0===v&&(xt(3042),v=!1)}function Et(e){it!==e&&(e?t.frontFace(2304):t.frontFace(2305),it=e)}function Tt(e){e!==o?(At(2884),e!==nt&&(e===a?t.cullFace(1029):e===h?t.cullFace(1028):t.cullFace(1032))):xt(2884),nt=e}function _t(e,i,n){e?(At(32823),st===i&&ot===n||(t.polygonOffset(i,n),st=i,ot=n)):xt(32823)}function Mt(e){void 0===e&&(e=33984+at-1),ct!==e&&(t.activeTexture(e),ct=e)}return{buffers:{color:r,depth:s,stencil:l},enable:At,disable:xt,bindFramebuffer:function(e,i){return c[e]!==i&&(t.bindFramebuffer(e,i),c[e]=i,n&&(36009===e&&(c[36160]=i),36160===e&&(c[36009]=i)),!0)},drawBuffers:function(n,r){let s=p,o=!1;if(n)if(s=d.get(r),void 0===s&&(s=[],d.set(r,s)),n.isWebGLMultipleRenderTargets){const t=n.texture;if(s.length!==t.length||36064!==s[0]){for(let e=0,i=t.length;e<i;e++)s[e]=36064+e;s.length=t.length,o=!0}}else 36064!==s[0]&&(s[0]=36064,o=!0);else 1029!==s[0]&&(s[0]=1029,o=!0);o&&(i.isWebGL2?t.drawBuffers(s):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(s))},useProgram:function(e){return f!==e&&(t.useProgram(e),f=e,!0)},setBlending:St,setMaterial:function(t,e){t.side===g?xt(2884):At(2884);let i=t.side===m;e&&(i=!i),Et(i),t.blending===x&&!1===t.transparent?St(A):St(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),s.setFunc(t.depthFunc),s.setTest(t.depthTest),s.setMask(t.depthWrite),r.setMask(t.colorWrite);const n=t.stencilWrite;l.setTest(n),n&&(l.setMask(t.stencilWriteMask),l.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),l.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),_t(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?At(32926):xt(32926)},setFlipSided:Et,setCullFace:Tt,setLineWidth:function(e){e!==rt&&(ht&&t.lineWidth(e),rt=e)},setPolygonOffset:_t,setScissorTest:function(t){t?At(3089):xt(3089)},activeTexture:Mt,bindTexture:function(e,i){null===ct&&Mt();let n=dt[ct];void 0===n&&(n={type:void 0,texture:void 0},dt[ct]=n),n.type===e&&n.texture===i||(t.bindTexture(e,i||yt[e]),n.type=e,n.texture=i)},unbindTexture:function(){const e=dt[ct];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){}},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){}},scissor:function(e){!1===mt.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),mt.copy(e))},viewport:function(e){!1===gt.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),gt.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===n&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},ct=null,dt={},c={},d=new WeakMap,p=[],f=null,v=!1,y=null,J=null,Q=null,K=null,Z=null,$=null,tt=null,et=!1,it=null,nt=null,rt=null,st=null,ot=null,mt.set(0,0,t.canvas.width,t.canvas.height),gt.set(0,0,t.canvas.width,t.canvas.height),r.reset(),s.reset(),l.reset()}}}function Qa(t,e,i,n,r,s,o){const a=r.isWebGL2,h=(r.maxTextures,r.maxCubemapSize),l=r.maxTextureSize,u=r.maxSamples,c=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let f;const m=new WeakMap;let g=!1;try{g="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function v(t,e){return g?new OffscreenCanvas(t,e):Ii("canvas")}function y(t,e,i,n){let r=1;if((t.width>n||t.height>n)&&(r=n/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const n=e?_i:Math.floor,s=n(r*t.width),o=n(r*t.height);void 0===f&&(f=v(s,o));const a=i?v(s,o):f;a.width=s,a.height=o;return a.getContext("2d").drawImage(t,0,0,s,o),a}return t}return t}function A(t){return Ei(t.width)&&Ei(t.height)}function x(t,e){return t.generateMipmaps&&e&&t.minFilter!==pt&&t.minFilter!==yt}function w(e){t.generateMipmap(e)}function b(i,n,r,s,o=!1){if(!1===a)return n;if(null!==i&&void 0!==t[i])return t[i];let h=n;return 6403===n&&(5126===r&&(h=33326),5131===r&&(h=33325),5121===r&&(h=33321)),33319===n&&(5126===r&&(h=33328),5131===r&&(h=33327),5121===r&&(h=33323)),6408===n&&(5126===r&&(h=34836),5131===r&&(h=34842),5121===r&&(h=s===Ie&&!1===o?35907:32856),32819===r&&(h=32854),32820===r&&(h=32855)),33325!==h&&33326!==h&&33327!==h&&33328!==h&&34842!==h&&34836!==h||e.get("EXT_color_buffer_float"),h}function S(t,e,i){return!0===x(t,i)||t.isFramebufferTexture&&t.minFilter!==pt&&t.minFilter!==yt?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function E(t){return t===pt||t===ft||t===gt?9728:9729}function T(t){const e=t.target;e.removeEventListener("dispose",T),function(t){const e=n.get(t);if(void 0===e.__webglInit)return;const i=t.source,r=m.get(i);if(r){const n=r[e.__cacheKey];n.usedTimes--,0===n.usedTimes&&M(t),0===Object.keys(r).length&&m.delete(i)}n.remove(t)}(e),e.isVideoTexture&&p.delete(e)}function _(e){const i=e.target;i.removeEventListener("dispose",_),function(e){const i=e.texture,r=n.get(e),s=n.get(i);void 0!==s.__webglTexture&&(t.deleteTexture(s.__webglTexture),o.memory.textures--);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(r.__webglFramebuffer[e]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[e]);else t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer&&t.deleteRenderbuffer(r.__webglColorRenderbuffer),r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer);if(e.isWebGLMultipleRenderTargets)for(let e=0,r=i.length;e<r;e++){const r=n.get(i[e]);r.__webglTexture&&(t.deleteTexture(r.__webglTexture),o.memory.textures--),n.remove(i[e])}n.remove(i),n.remove(e)}(i)}function M(e){const i=n.get(e);t.deleteTexture(i.__webglTexture);const r=e.source;delete m.get(r)[i.__cacheKey],o.memory.textures--}let C=0;function P(t,e){const r=n.get(t);if(t.isVideoTexture&&function(t){const e=o.render.frame;p.get(t)!==e&&(p.set(t,e),t.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&r.__version!==t.version){const i=t.image;if(null===i);else if(!1!==i.complete)return void D(r,t,e)}i.activeTexture(33984+e),i.bindTexture(3553,r.__webglTexture)}const R={[ut]:10497,[ct]:33071,[dt]:33648},O={[pt]:9728,[ft]:9984,[gt]:9986,[yt]:9729,[At]:9985,[wt]:9987};function L(i,s,o){if(o?(t.texParameteri(i,10242,R[s.wrapS]),t.texParameteri(i,10243,R[s.wrapT]),32879!==i&&35866!==i||t.texParameteri(i,32882,R[s.wrapR]),t.texParameteri(i,10240,O[s.magFilter]),t.texParameteri(i,10241,O[s.minFilter])):(t.texParameteri(i,10242,33071),t.texParameteri(i,10243,33071),32879!==i&&35866!==i||t.texParameteri(i,32882,33071),s.wrapS!==ct||s.wrapT,t.texParameteri(i,10240,E(s.magFilter)),t.texParameteri(i,10241,E(s.minFilter)),s.minFilter!==pt&&s.minFilter),!0===e.has("EXT_texture_filter_anisotropic")){const o=e.get("EXT_texture_filter_anisotropic");if(s.type===Pt&&!1===e.has("OES_texture_float_linear"))return;if(!1===a&&s.type===Rt&&!1===e.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||n.get(s).__currentAnisotropy)&&(t.texParameterf(i,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),n.get(s).__currentAnisotropy=s.anisotropy)}}function I(e,i){let n=!1;void 0===e.__webglInit&&(e.__webglInit=!0,i.addEventListener("dispose",T));const r=i.source;let s=m.get(r);void 0===s&&(s={},m.set(r,s));const a=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.encoding),e.join()}(i);if(a!==e.__cacheKey){void 0===s[a]&&(s[a]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,n=!0),s[a].usedTimes++;const r=s[e.__cacheKey];void 0!==r&&(s[e.__cacheKey].usedTimes--,0===r.usedTimes&&M(i)),e.__cacheKey=a,e.__webglTexture=s[a].texture}return n}function D(e,n,r){let o=3553;n.isDataArrayTexture&&(o=35866),n.isData3DTexture&&(o=32879);const h=I(e,n),u=n.source;if(i.activeTexture(33984+r),i.bindTexture(o,e.__webglTexture),u.version!==u.__currentVersion||!0===h){t.pixelStorei(37440,n.flipY),t.pixelStorei(37441,n.premultiplyAlpha),t.pixelStorei(3317,n.unpackAlignment),t.pixelStorei(37443,0);const r=function(t){return!a&&(t.wrapS!==ct||t.wrapT!==ct||t.minFilter!==pt&&t.minFilter!==yt)}(n)&&!1===A(n.image);let h=y(n.image,r,!1,l);h=U(n,h);const c=A(h)||a,d=s.convert(n.format,n.encoding);let p,f=s.convert(n.type),m=b(n.internalFormat,d,f,n.encoding,n.isVideoTexture);L(o,n,c);const g=n.mipmaps,v=a&&!0!==n.isVideoTexture,E=void 0===e.__version,T=S(n,h,c);if(n.isDepthTexture)m=6402,a?m=n.type===Pt?36012:n.type===Ct?33190:n.type===It?35056:33189:n.type,n.format===zt&&6402===m&&n.type!==_t&&n.type!==Ct&&(n.type=_t,f=s.convert(n.type)),n.format===Ut&&6402===m&&(m=34041,n.type!==It&&(n.type=It,f=s.convert(n.type))),v&&E?i.texStorage2D(3553,1,m,h.width,h.height):i.texImage2D(3553,0,m,h.width,h.height,0,d,f,null);else if(n.isDataTexture)if(g.length>0&&c){v&&E&&i.texStorage2D(3553,T,m,g[0].width,g[0].height);for(let t=0,e=g.length;t<e;t++)p=g[t],v?i.texSubImage2D(3553,t,0,0,p.width,p.height,d,f,p.data):i.texImage2D(3553,t,m,p.width,p.height,0,d,f,p.data);n.generateMipmaps=!1}else v?(E&&i.texStorage2D(3553,T,m,h.width,h.height),i.texSubImage2D(3553,0,0,0,h.width,h.height,d,f,h.data)):i.texImage2D(3553,0,m,h.width,h.height,0,d,f,h.data);else if(n.isCompressedTexture){v&&E&&i.texStorage2D(3553,T,m,g[0].width,g[0].height);for(let t=0,e=g.length;t<e;t++)p=g[t],n.format!==kt?null!==d&&(v?i.compressedTexSubImage2D(3553,t,0,0,p.width,p.height,d,p.data):i.compressedTexImage2D(3553,t,m,p.width,p.height,0,p.data)):v?i.texSubImage2D(3553,t,0,0,p.width,p.height,d,f,p.data):i.texImage2D(3553,t,m,p.width,p.height,0,d,f,p.data)}else if(n.isDataArrayTexture)v?(E&&i.texStorage3D(35866,T,m,h.width,h.height,h.depth),i.texSubImage3D(35866,0,0,0,0,h.width,h.height,h.depth,d,f,h.data)):i.texImage3D(35866,0,m,h.width,h.height,h.depth,0,d,f,h.data);else if(n.isData3DTexture)v?(E&&i.texStorage3D(32879,T,m,h.width,h.height,h.depth),i.texSubImage3D(32879,0,0,0,0,h.width,h.height,h.depth,d,f,h.data)):i.texImage3D(32879,0,m,h.width,h.height,h.depth,0,d,f,h.data);else if(n.isFramebufferTexture)v&&E?i.texStorage2D(3553,T,m,h.width,h.height):i.texImage2D(3553,0,m,h.width,h.height,0,d,f,null);else if(g.length>0&&c){v&&E&&i.texStorage2D(3553,T,m,g[0].width,g[0].height);for(let t=0,e=g.length;t<e;t++)p=g[t],v?i.texSubImage2D(3553,t,0,0,d,f,p):i.texImage2D(3553,t,m,d,f,p);n.generateMipmaps=!1}else v?(E&&i.texStorage2D(3553,T,m,h.width,h.height),i.texSubImage2D(3553,0,0,0,d,f,h)):i.texImage2D(3553,0,m,d,f,h);x(n,c)&&w(o),u.__currentVersion=u.version,n.onUpdate&&n.onUpdate(n)}e.__version=n.version}function B(e,r,o,a,h){const l=s.convert(o.format,o.encoding),u=s.convert(o.type),d=b(o.internalFormat,l,u,o.encoding);n.get(r).__hasExternalTextures||(32879===h||35866===h?i.texImage3D(h,0,d,r.width,r.height,r.depth,0,l,u,null):i.texImage2D(h,0,d,r.width,r.height,0,l,u,null)),i.bindFramebuffer(36160,e),z(r)?c.framebufferTexture2DMultisampleEXT(36160,a,h,n.get(o).__webglTexture,0,N(r)):t.framebufferTexture2D(36160,a,h,n.get(o).__webglTexture,0),i.bindFramebuffer(36160,null)}function k(e,i,n){if(t.bindRenderbuffer(36161,e),i.depthBuffer&&!i.stencilBuffer){let r=33189;if(n||z(i)){const e=i.depthTexture;e&&e.isDepthTexture&&(e.type===Pt?r=36012:e.type===Ct&&(r=33190));const n=N(i);z(i)?c.renderbufferStorageMultisampleEXT(36161,n,r,i.width,i.height):t.renderbufferStorageMultisample(36161,n,r,i.width,i.height)}else t.renderbufferStorage(36161,r,i.width,i.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(i.depthBuffer&&i.stencilBuffer){const r=N(i);n&&!1===z(i)?t.renderbufferStorageMultisample(36161,r,35056,i.width,i.height):z(i)?c.renderbufferStorageMultisampleEXT(36161,r,35056,i.width,i.height):t.renderbufferStorage(36161,34041,i.width,i.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=!0===i.isWebGLMultipleRenderTargets?i.texture[0]:i.texture,r=s.convert(e.format,e.encoding),o=s.convert(e.type),a=b(e.internalFormat,r,o,e.encoding),h=N(i);n&&!1===z(i)?t.renderbufferStorageMultisample(36161,h,a,i.width,i.height):z(i)?c.renderbufferStorageMultisampleEXT(36161,h,a,i.width,i.height):t.renderbufferStorage(36161,a,i.width,i.height)}t.bindRenderbuffer(36161,null)}function F(e){const r=n.get(e),s=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!r.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(36160,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),P(r.depthTexture,0);const s=n.get(r.depthTexture).__webglTexture,o=N(r);if(r.depthTexture.format===zt)z(r)?c.framebufferTexture2DMultisampleEXT(36160,36096,3553,s,0,o):t.framebufferTexture2D(36160,36096,3553,s,0);else{if(r.depthTexture.format!==Ut)throw new Error("Unknown depthTexture format");z(r)?c.framebufferTexture2DMultisampleEXT(36160,33306,3553,s,0,o):t.framebufferTexture2D(36160,33306,3553,s,0)}}(r.__webglFramebuffer,e)}else if(s){r.__webglDepthbuffer=[];for(let n=0;n<6;n++)i.bindFramebuffer(36160,r.__webglFramebuffer[n]),r.__webglDepthbuffer[n]=t.createRenderbuffer(),k(r.__webglDepthbuffer[n],e,!1)}else i.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),k(r.__webglDepthbuffer,e,!1);i.bindFramebuffer(36160,null)}function N(t){return Math.min(u,t.samples)}function z(t){const i=n.get(t);return a&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==i.__useRenderToTexture}function U(t,i){const n=t.encoding,r=t.format;t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===fi||n!==Le&&n===Ie&&!1===a&&(!0===e.has("EXT_sRGB")&&r===kt?(t.format=fi,t.minFilter=yt,t.generateMipmaps=!1):i=Yi.sRGBToLinear(i)),i}this.allocateTextureUnit=function(){const t=C;return C+=1,t},this.resetTextureUnits=function(){C=0},this.setTexture2D=P,this.setTexture2DArray=function(t,e){const r=n.get(t);t.version>0&&r.__version!==t.version?D(r,t,e):(i.activeTexture(33984+e),i.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){const r=n.get(t);t.version>0&&r.__version!==t.version?D(r,t,e):(i.activeTexture(33984+e),i.bindTexture(32879,r.__webglTexture))},this.setTextureCube=function(e,r){const o=n.get(e);e.version>0&&o.__version!==e.version?function(e,n,r){if(6!==n.image.length)return;const o=I(e,n),l=n.source;if(i.activeTexture(33984+r),i.bindTexture(34067,e.__webglTexture),l.version!==l.__currentVersion||!0===o){t.pixelStorei(37440,n.flipY),t.pixelStorei(37441,n.premultiplyAlpha),t.pixelStorei(3317,n.unpackAlignment),t.pixelStorei(37443,0);const r=n.isCompressedTexture||n.image[0].isCompressedTexture,o=n.image[0]&&n.image[0].isDataTexture,u=[];for(let t=0;t<6;t++)u[t]=r||o?o?n.image[t].image:n.image[t]:y(n.image[t],!1,!0,h),u[t]=U(n,u[t]);const c=u[0],d=A(c)||a,p=s.convert(n.format,n.encoding),f=s.convert(n.type),m=b(n.internalFormat,p,f,n.encoding),g=a&&!0!==n.isVideoTexture,v=void 0===e.__version;let E,T=S(n,c,d);if(L(34067,n,d),r){g&&v&&i.texStorage2D(34067,T,m,c.width,c.height);for(let t=0;t<6;t++){E=u[t].mipmaps;for(let e=0;e<E.length;e++){const r=E[e];n.format!==kt?null!==p&&(g?i.compressedTexSubImage2D(34069+t,e,0,0,r.width,r.height,p,r.data):i.compressedTexImage2D(34069+t,e,m,r.width,r.height,0,r.data)):g?i.texSubImage2D(34069+t,e,0,0,r.width,r.height,p,f,r.data):i.texImage2D(34069+t,e,m,r.width,r.height,0,p,f,r.data)}}}else{E=n.mipmaps,g&&v&&(E.length>0&&T++,i.texStorage2D(34067,T,m,u[0].width,u[0].height));for(let t=0;t<6;t++)if(o){g?i.texSubImage2D(34069+t,0,0,0,u[t].width,u[t].height,p,f,u[t].data):i.texImage2D(34069+t,0,m,u[t].width,u[t].height,0,p,f,u[t].data);for(let e=0;e<E.length;e++){const n=E[e].image[t].image;g?i.texSubImage2D(34069+t,e+1,0,0,n.width,n.height,p,f,n.data):i.texImage2D(34069+t,e+1,m,n.width,n.height,0,p,f,n.data)}}else{g?i.texSubImage2D(34069+t,0,0,0,p,f,u[t]):i.texImage2D(34069+t,0,m,p,f,u[t]);for(let e=0;e<E.length;e++){const n=E[e];g?i.texSubImage2D(34069+t,e+1,0,0,p,f,n.image[t]):i.texImage2D(34069+t,e+1,m,p,f,n.image[t])}}}x(n,d)&&w(34067),l.__currentVersion=l.version,n.onUpdate&&n.onUpdate(n)}e.__version=n.version}(o,e,r):(i.activeTexture(33984+r),i.bindTexture(34067,o.__webglTexture))},this.rebindTextures=function(t,e,i){const r=n.get(t);void 0!==e&&B(r.__webglFramebuffer,t,t.texture,36064,3553),void 0!==i&&F(t)},this.setupRenderTarget=function(e){const h=e.texture,l=n.get(e),u=n.get(h);e.addEventListener("dispose",_),!0!==e.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=t.createTexture()),u.__version=h.version,o.memory.textures++);const c=!0===e.isWebGLCubeRenderTarget,d=!0===e.isWebGLMultipleRenderTargets,p=A(e)||a;if(c){l.__webglFramebuffer=[];for(let e=0;e<6;e++)l.__webglFramebuffer[e]=t.createFramebuffer()}else if(l.__webglFramebuffer=t.createFramebuffer(),d){if(r.drawBuffers){const i=e.texture;for(let e=0,r=i.length;e<r;e++){const r=n.get(i[e]);void 0===r.__webglTexture&&(r.__webglTexture=t.createTexture(),o.memory.textures++)}}}else if(a&&e.samples>0&&!1===z(e)){l.__webglMultisampledFramebuffer=t.createFramebuffer(),l.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,l.__webglColorRenderbuffer);const n=s.convert(h.format,h.encoding),r=s.convert(h.type),o=b(h.internalFormat,n,r,h.encoding),a=N(e);t.renderbufferStorageMultisample(36161,a,o,e.width,e.height),i.bindFramebuffer(36160,l.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,l.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(l.__webglDepthRenderbuffer=t.createRenderbuffer(),k(l.__webglDepthRenderbuffer,e,!0)),i.bindFramebuffer(36160,null)}if(c){i.bindTexture(34067,u.__webglTexture),L(34067,h,p);for(let t=0;t<6;t++)B(l.__webglFramebuffer[t],e,h,36064,34069+t);x(h,p)&&w(34067),i.unbindTexture()}else if(d){const t=e.texture;for(let r=0,s=t.length;r<s;r++){const s=t[r],o=n.get(s);i.bindTexture(3553,o.__webglTexture),L(3553,s,p),B(l.__webglFramebuffer,e,s,36064+r,3553),x(s,p)&&w(3553)}i.unbindTexture()}else{let t=3553;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&a&&(t=e.isWebGL3DRenderTarget?32879:35866),i.bindTexture(t,u.__webglTexture),L(t,h,p),B(l.__webglFramebuffer,e,h,36064,t),x(h,p)&&w(t),i.unbindTexture()}e.depthBuffer&&F(e)},this.updateRenderTargetMipmap=function(t){const e=A(t)||a,r=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let s=0,o=r.length;s<o;s++){const o=r[s];if(x(o,e)){const e=t.isWebGLCubeRenderTarget?34067:3553,r=n.get(o).__webglTexture;i.bindTexture(e,r),w(e),i.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(a&&e.samples>0&&!1===z(e)){const r=e.width,s=e.height;let o=16384;const a=[36064],h=e.stencilBuffer?33306:36096;e.depthBuffer&&a.push(h);const l=n.get(e),u=void 0!==l.__ignoreDepthValues&&l.__ignoreDepthValues;!1===u&&(e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024)),i.bindFramebuffer(36008,l.__webglMultisampledFramebuffer),i.bindFramebuffer(36009,l.__webglFramebuffer),!0===u&&(t.invalidateFramebuffer(36008,[h]),t.invalidateFramebuffer(36009,[h])),t.blitFramebuffer(0,0,r,s,0,0,r,s,o,9728),d&&t.invalidateFramebuffer(36008,a),i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,l.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=F,this.setupFrameBufferTexture=B,this.useMultisampledRTT=z}function Ka(t,e,i){const n=i.isWebGL2;return{convert:function(t,i=null){let r;if(t===St)return 5121;if(t===Ot)return 32819;if(t===Lt)return 32820;if(t===Et)return 5120;if(t===Tt)return 5122;if(t===_t)return 5123;if(t===Mt)return 5124;if(t===Ct)return 5125;if(t===Pt)return 5126;if(t===Rt)return n?5131:(r=e.get("OES_texture_half_float"),null!==r?r.HALF_FLOAT_OES:null);if(t===Dt)return 6406;if(t===kt)return 6408;if(t===Ft)return 6409;if(t===Nt)return 6410;if(t===zt)return 6402;if(t===Ut)return 34041;if(t===Gt)return 6403;if(t===Bt)return 6408;if(t===fi)return r=e.get("EXT_sRGB"),null!==r?r.SRGB_ALPHA_EXT:null;if(t===Vt)return 36244;if(t===Ht)return 33319;if(t===Wt)return 33320;if(t===jt)return 36249;if(t===Yt||t===Xt||t===qt||t===Jt)if(i===Ie){if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(t===Yt)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(t===Xt)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(t===qt)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(t===Jt)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=e.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(t===Yt)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Xt)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===qt)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===Jt)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===Qt||t===Kt||t===Zt||t===$t){if(r=e.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(t===Qt)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===Kt)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===Zt)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===$t)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===te)return r=e.get("WEBGL_compressed_texture_etc1"),null!==r?r.COMPRESSED_RGB_ETC1_WEBGL:null;if(t===ee||t===ie){if(r=e.get("WEBGL_compressed_texture_etc"),null===r)return null;if(t===ee)return i===Ie?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(t===ie)return i===Ie?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(t===ne||t===re||t===se||t===oe||t===ae||t===he||t===le||t===ue||t===ce||t===de||t===pe||t===fe||t===me||t===ge){if(r=e.get("WEBGL_compressed_texture_astc"),null===r)return null;if(t===ne)return i===Ie?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(t===re)return i===Ie?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(t===se)return i===Ie?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(t===oe)return i===Ie?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(t===ae)return i===Ie?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(t===he)return i===Ie?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(t===le)return i===Ie?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(t===ue)return i===Ie?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(t===ce)return i===Ie?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(t===de)return i===Ie?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(t===pe)return i===Ie?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(t===fe)return i===Ie?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(t===me)return i===Ie?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(t===ge)return i===Ie?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(t===ve){if(r=e.get("EXT_texture_compression_bptc"),null===r)return null;if(t===ve)return i===Ie?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT}return t===It?n?34042:(r=e.get("WEBGL_depth_texture"),null!==r?r.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class Za extends ms{constructor(t=[]){super(),this.cameras=t}}Za.prototype.isArrayCamera=!0;class $a extends hr{constructor(){super(),this.type="Group"}}$a.prototype.isGroup=!0;const th={type:"move"};class eh{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new $a,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new $a,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new on,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new on),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new $a,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new on,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new on),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,i){let n=null,r=null,s=null;const o=this._targetRay,a=this._grip,h=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==o&&(n=e.getPose(t.targetRaySpace,i),null!==n&&(o.matrix.fromArray(n.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),n.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(n.linearVelocity)):o.hasLinearVelocity=!1,n.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(n.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(th))),h&&t.hand){s=!0;for(const n of t.hand.values()){const t=e.getJointPose(n,i);if(void 0===h.joints[n.jointName]){const t=new $a;t.matrixAutoUpdate=!1,t.visible=!1,h.joints[n.jointName]=t,h.add(t)}const r=h.joints[n.jointName];null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=t.radius),r.visible=null!==t}const n=h.joints["index-finger-tip"],r=h.joints["thumb-tip"],o=n.position.distanceTo(r.position),a=.02,l=.005;h.inputState.pinching&&o>a+l?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!h.inputState.pinching&&o<=a-l&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==a&&t.gripSpace&&(r=e.getPose(t.gripSpace,i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1));return null!==o&&(o.visible=null!==n),null!==a&&(a.visible=null!==r),null!==h&&(h.visible=null!==s),this}}class ih extends Qi{constructor(t,e,i,n,r,s,o,a,h,l){if((l=void 0!==l?l:zt)!==zt&&l!==Ut)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&l===zt&&(i=_t),void 0===i&&l===Ut&&(i=It),super(null,n,r,s,o,a,l,i,h),this.image={width:t,height:e},this.magFilter=void 0!==o?o:pt,this.minFilter=void 0!==a?a:pt,this.flipY=!1,this.generateMipmaps=!1}}ih.prototype.isDepthTexture=!0;class nh extends mi{constructor(t,e){super();const i=this;let n=null,r=1,s=null,o="local-floor",a=null,h=null,l=null,u=null,c=null;const d=e.getContextAttributes();let p=null,f=null;const m=[],g=new Map,v=new ms;v.layers.enable(1),v.viewport=new Ki;const y=new ms;y.layers.enable(2),y.viewport=new Ki;const A=[v,y],x=new Za;x.layers.enable(1),x.layers.enable(2);let w=null,b=null;function S(t){const e=g.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function E(){g.forEach((function(t,e){t.disconnect(e)})),g.clear(),w=null,b=null,t.setRenderTarget(p),u=null,l=null,h=null,n=null,f=null,R.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function T(t){const e=n.inputSources;for(let t=0;t<m.length;t++)g.set(e[t],m[t]);for(let e=0;e<t.removed.length;e++){const i=t.removed[e],n=g.get(i);n&&(n.dispatchEvent({type:"disconnected",data:i}),g.delete(i))}for(let e=0;e<t.added.length;e++){const i=t.added[e],n=g.get(i);n&&n.dispatchEvent({type:"connected",data:i})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=m[t];return void 0===e&&(e=new eh,m[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=m[t];return void 0===e&&(e=new eh,m[t]=e),e.getGripSpace()},this.getHand=function(t){let e=m[t];return void 0===e&&(e=new eh,m[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){r=t,i.isPresenting},this.setReferenceSpaceType=function(t){o=t,i.isPresenting},this.getReferenceSpace=function(){return s},this.getBaseLayer=function(){return null!==l?l:u},this.getBinding=function(){return h},this.getFrame=function(){return c},this.getSession=function(){return n},this.setSession=async function(a){if(n=a,null!==n){if(p=t.getRenderTarget(),n.addEventListener("select",S),n.addEventListener("selectstart",S),n.addEventListener("selectend",S),n.addEventListener("squeeze",S),n.addEventListener("squeezestart",S),n.addEventListener("squeezeend",S),n.addEventListener("end",E),n.addEventListener("inputsourceschange",T),!0!==d.xrCompatible&&await e.makeXRCompatible(),void 0===n.renderState.layers||!1===t.capabilities.isWebGL2){const i={antialias:void 0!==n.renderState.layers||d.antialias,alpha:d.alpha,depth:d.depth,stencil:d.stencil,framebufferScaleFactor:r};u=new XRWebGLLayer(n,e,i),n.updateRenderState({baseLayer:u}),f=new Zi(u.framebufferWidth,u.framebufferHeight,{format:kt,type:St,encoding:t.outputEncoding})}else{let i=null,s=null,o=null;d.depth&&(o=d.stencil?35056:33190,i=d.stencil?Ut:zt,s=d.stencil?It:_t);const a={colorFormat:t.outputEncoding===Ie?35907:32856,depthFormat:o,scaleFactor:r};h=new XRWebGLBinding(n,e),l=h.createProjectionLayer(a),n.updateRenderState({layers:[l]}),f=new Zi(l.textureWidth,l.textureHeight,{format:kt,type:St,depthTexture:new ih(l.textureWidth,l.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,i),stencilBuffer:d.stencil,encoding:t.outputEncoding,samples:d.antialias?4:0});t.properties.get(f).__ignoreDepthValues=l.ignoreDepthValues}f.isXRRenderTarget=!0,this.setFoveation(1),s=await n.requestReferenceSpace(o),R.setContext(n),R.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};const _=new on,M=new on;function C(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===n)return;x.near=y.near=v.near=t.near,x.far=y.far=v.far=t.far,w===x.near&&b===x.far||(n.updateRenderState({depthNear:x.near,depthFar:x.far}),w=x.near,b=x.far);const e=t.parent,i=x.cameras;C(x,e);for(let t=0;t<i.length;t++)C(i[t],e);x.matrixWorld.decompose(x.position,x.quaternion,x.scale),t.position.copy(x.position),t.quaternion.copy(x.quaternion),t.scale.copy(x.scale),t.matrix.copy(x.matrix),t.matrixWorld.copy(x.matrixWorld);const r=t.children;for(let t=0,e=r.length;t<e;t++)r[t].updateMatrixWorld(!0);2===i.length?function(t,e,i){_.setFromMatrixPosition(e.matrixWorld),M.setFromMatrixPosition(i.matrixWorld);const n=_.distanceTo(M),r=e.projectionMatrix.elements,s=i.projectionMatrix.elements,o=r[14]/(r[10]-1),a=r[14]/(r[10]+1),h=(r[9]+1)/r[5],l=(r[9]-1)/r[5],u=(r[8]-1)/r[0],c=(s[8]+1)/s[0],d=o*u,p=o*c,f=n/(-u+c),m=f*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=o+f,v=a+f,y=d-m,A=p+(n-m),x=h*a/v*g,w=l*a/v*g;t.projectionMatrix.makePerspective(y,A,x,w,g,v)}(x,v,y):x.projectionMatrix.copy(v.projectionMatrix)},this.getCamera=function(){return x},this.getFoveation=function(){return null!==l?l.fixedFoveation:null!==u?u.fixedFoveation:void 0},this.setFoveation=function(t){null!==l&&(l.fixedFoveation=t),null!==u&&void 0!==u.fixedFoveation&&(u.fixedFoveation=t)};let P=null;const R=new _s;R.setAnimationLoop((function(e,i){if(a=i.getViewerPose(s),c=i,null!==a){const e=a.views;null!==u&&(t.setRenderTargetFramebuffer(f,u.framebuffer),t.setRenderTarget(f));let i=!1;e.length!==x.cameras.length&&(x.cameras.length=0,i=!0);for(let n=0;n<e.length;n++){const r=e[n];let s=null;if(null!==u)s=u.getViewport(r);else{const e=h.getViewSubImage(l,r);s=e.viewport,0===n&&(t.setRenderTargetTextures(f,e.colorTexture,l.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(f))}const o=A[n];o.matrix.fromArray(r.transform.matrix),o.projectionMatrix.fromArray(r.projectionMatrix),o.viewport.set(s.x,s.y,s.width,s.height),0===n&&x.matrix.copy(o.matrix),!0===i&&x.cameras.push(o)}}const r=n.inputSources;for(let t=0;t<m.length;t++){const e=m[t],n=r[t];e.update(n,i,s)}P&&P(e,i),c=null})),this.setAnimationLoop=function(t){P=t},this.dispose=function(){}}}function rh(t,e){function i(i,n){i.opacity.value=n.opacity,n.color&&i.diffuse.value.copy(n.color),n.emissive&&i.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(i.map.value=n.map),n.alphaMap&&(i.alphaMap.value=n.alphaMap),n.bumpMap&&(i.bumpMap.value=n.bumpMap,i.bumpScale.value=n.bumpScale,n.side===m&&(i.bumpScale.value*=-1)),n.displacementMap&&(i.displacementMap.value=n.displacementMap,i.displacementScale.value=n.displacementScale,i.displacementBias.value=n.displacementBias),n.emissiveMap&&(i.emissiveMap.value=n.emissiveMap),n.normalMap&&(i.normalMap.value=n.normalMap,i.normalScale.value.copy(n.normalScale),n.side===m&&i.normalScale.value.negate()),n.specularMap&&(i.specularMap.value=n.specularMap),n.alphaTest>0&&(i.alphaTest.value=n.alphaTest);const r=e.get(n).envMap;if(r&&(i.envMap.value=r,i.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,i.reflectivity.value=n.reflectivity,i.ior.value=n.ior,i.refractionRatio.value=n.refractionRatio),n.lightMap){i.lightMap.value=n.lightMap;const e=!0!==t.physicallyCorrectLights?Math.PI:1;i.lightMapIntensity.value=n.lightMapIntensity*e}let s,o;n.aoMap&&(i.aoMap.value=n.aoMap,i.aoMapIntensity.value=n.aoMapIntensity),n.map?s=n.map:n.specularMap?s=n.specularMap:n.displacementMap?s=n.displacementMap:n.normalMap?s=n.normalMap:n.bumpMap?s=n.bumpMap:n.roughnessMap?s=n.roughnessMap:n.metalnessMap?s=n.metalnessMap:n.alphaMap?s=n.alphaMap:n.emissiveMap?s=n.emissiveMap:n.clearcoatMap?s=n.clearcoatMap:n.clearcoatNormalMap?s=n.clearcoatNormalMap:n.clearcoatRoughnessMap?s=n.clearcoatRoughnessMap:n.specularIntensityMap?s=n.specularIntensityMap:n.specularColorMap?s=n.specularColorMap:n.transmissionMap?s=n.transmissionMap:n.thicknessMap?s=n.thicknessMap:n.sheenColorMap?s=n.sheenColorMap:n.sheenRoughnessMap&&(s=n.sheenRoughnessMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),i.uvTransform.value.copy(s.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),i.uv2Transform.value.copy(o.matrix))}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,n,r,s,o){n.isMeshBasicMaterial||n.isMeshLambertMaterial?i(t,n):n.isMeshToonMaterial?(i(t,n),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,n)):n.isMeshPhongMaterial?(i(t,n),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,n)):n.isMeshStandardMaterial?(i(t,n),function(t,i){t.roughness.value=i.roughness,t.metalness.value=i.metalness,i.roughnessMap&&(t.roughnessMap.value=i.roughnessMap);i.metalnessMap&&(t.metalnessMap.value=i.metalnessMap);e.get(i).envMap&&(t.envMapIntensity.value=i.envMapIntensity)}(t,n),n.isMeshPhysicalMaterial&&function(t,e,i){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap));e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===m&&t.clearcoatNormalScale.value.negate()));e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=i.texture,t.transmissionSamplerSize.value.set(i.width,i.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor));t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap);e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}(t,n,o)):n.isMeshMatcapMaterial?(i(t,n),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,n)):n.isMeshDepthMaterial?i(t,n):n.isMeshDistanceMaterial?(i(t,n),function(t,e){t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,n)):n.isMeshNormalMaterial?i(t,n):n.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,n),n.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,n)):n.isPointsMaterial?function(t,e,i,n){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*i,t.scale.value=.5*n,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);let r;e.map?r=e.map:e.alphaMap&&(r=e.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}(t,n,r,s):n.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);let i;e.map?i=e.map:e.alphaMap&&(i=e.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}(t,n):n.isShadowMaterial?(t.color.value.copy(n.color),t.opacity.value=n.opacity):n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)}}}function sh(t={}){const e=void 0!==t.canvas?t.canvas:function(){const t=Ii("canvas");return t.style.display="block",t}(),i=void 0!==t.context?t.context:null,r=void 0===t.depth||t.depth,s=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,a=void 0===t.premultipliedAlpha||t.premultipliedAlpha,h=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,l=void 0!==t.powerPreference?t.powerPreference:"default",u=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let c;c=void 0!==t.context?i.getContextAttributes().alpha:void 0!==t.alpha&&t.alpha;let d=null,p=null;const v=[],y=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Le,this.physicallyCorrectLights=!1,this.toneMapping=Z,this.toneMappingExposure=1;const A=this;let x=!1,w=0,b=0,S=null,E=-1,T=null;const _=new Ki,M=new Ki;let C=null,P=e.width,R=e.height,O=1,L=null,I=null;const D=new Ki(0,0,P,R),B=new Ki(0,0,P,R);let k=!1;const F=new Ts;let N=!1,z=!1,U=null;const G=new Fn,V=new Ci,H=new on,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function j(){return null===S?O:1}let Y,X,q,J,Q,K,$,tt,et,it,nt,rt,st,ot,at,ht,lt,ut,ct,dt,pt,ft,mt,gt=i;function vt(t,i){for(let n=0;n<t.length;n++){const r=t[n],s=e.getContext(r,i);if(null!==s)return s}return null}try{const t={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:h,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r"+n),e.addEventListener("webglcontextlost",xt,!1),e.addEventListener("webglcontextrestored",bt,!1),null===gt){const e=["webgl2","webgl","experimental-webgl"];if(!0===A.isWebGL1Renderer&&e.shift(),gt=vt(e,t),null===gt)throw vt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===gt.getShaderPrecisionFormat&&(gt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw t}function yt(){Y=new $s(gt),X=new Bs(gt,Y,t),Y.init(X),ft=new Ka(gt,Y,X),q=new Ja(gt,Y,X),J=new io(gt),Q=new Ba,K=new Qa(gt,Y,q,Q,X,ft,J),$=new Fs(A),tt=new Zs(A),et=new Ms(gt,X),mt=new Is(gt,Y,et,X),it=new to(gt,et,J,mt),nt=new ao(gt,it,et,J),ct=new oo(gt,X,K),ht=new ks(Q),rt=new Da(A,$,tt,Y,X,mt,ht),st=new rh(A,Q),ot=new za,at=new ja(Y,X),ut=new Ls(A,$,q,nt,c,a),lt=new qa(A,nt,X),dt=new Ds(gt,Y,J,X),pt=new eo(gt,Y,J,X),J.programs=rt.programs,A.capabilities=X,A.extensions=Y,A.properties=Q,A.renderLists=ot,A.shadowMap=lt,A.state=q,A.info=J}yt();const At=new nh(A,gt);function xt(t){t.preventDefault(),x=!0}function bt(){x=!1;const t=J.autoReset,e=lt.enabled,i=lt.autoUpdate,n=lt.needsUpdate,r=lt.type;yt(),J.autoReset=t,lt.enabled=e,lt.autoUpdate=i,lt.needsUpdate=n,lt.type=r}function Et(t){const e=t.target;e.removeEventListener("dispose",Et),function(t){(function(t){const e=Q.get(t).programs;void 0!==e&&(e.forEach((function(t){rt.releaseProgram(t)})),t.isShaderMaterial&&rt.releaseShaderCache(t))})(t),Q.remove(t)}(e)}this.xr=At,this.getContext=function(){return gt},this.getContextAttributes=function(){return gt.getContextAttributes()},this.forceContextLoss=function(){const t=Y.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=Y.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(t){void 0!==t&&(O=t,this.setSize(P,R,!1))},this.getSize=function(t){return t.set(P,R)},this.setSize=function(t,i,n){At.isPresenting||(P=t,R=i,e.width=Math.floor(t*O),e.height=Math.floor(i*O),!1!==n&&(e.style.width=t+"px",e.style.height=i+"px"),this.setViewport(0,0,t,i))},this.getDrawingBufferSize=function(t){return t.set(P*O,R*O).floor()},this.setDrawingBufferSize=function(t,i,n){P=t,R=i,O=n,e.width=Math.floor(t*n),e.height=Math.floor(i*n),this.setViewport(0,0,t,i)},this.getCurrentViewport=function(t){return t.copy(_)},this.getViewport=function(t){return t.copy(D)},this.setViewport=function(t,e,i,n){t.isVector4?D.set(t.x,t.y,t.z,t.w):D.set(t,e,i,n),q.viewport(_.copy(D).multiplyScalar(O).floor())},this.getScissor=function(t){return t.copy(B)},this.setScissor=function(t,e,i,n){t.isVector4?B.set(t.x,t.y,t.z,t.w):B.set(t,e,i,n),q.scissor(M.copy(B).multiplyScalar(O).floor())},this.getScissorTest=function(){return k},this.setScissorTest=function(t){q.setScissorTest(k=t)},this.setOpaqueSort=function(t){L=t},this.setTransparentSort=function(t){I=t},this.getClearColor=function(t){return t.copy(ut.getClearColor())},this.setClearColor=function(){ut.setClearColor.apply(ut,arguments)},this.getClearAlpha=function(){return ut.getClearAlpha()},this.setClearAlpha=function(){ut.setClearAlpha.apply(ut,arguments)},this.clear=function(t=!0,e=!0,i=!0){let n=0;t&&(n|=16384),e&&(n|=256),i&&(n|=1024),gt.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",xt,!1),e.removeEventListener("webglcontextrestored",bt,!1),ot.dispose(),at.dispose(),Q.dispose(),$.dispose(),tt.dispose(),nt.dispose(),mt.dispose(),rt.dispose(),At.dispose(),At.removeEventListener("sessionstart",_t),At.removeEventListener("sessionend",Mt),U&&(U.dispose(),U=null),Ct.stop()},this.renderBufferDirect=function(t,e,i,n,r,s){null===e&&(e=W);const o=r.isMesh&&r.matrixWorld.determinant()<0,a=function(t,e,i,n,r){!0!==e.isScene&&(e=W);K.resetTextureUnits();const s=e.fog,o=n.isMeshStandardMaterial?e.environment:null,a=null===S?A.outputEncoding:!0===S.isXRRenderTarget?S.texture.encoding:Le,h=(n.isMeshStandardMaterial?tt:$).get(n.envMap||o),l=!0===n.vertexColors&&!!i.attributes.color&&4===i.attributes.color.itemSize,u=!!n.normalMap&&!!i.attributes.tangent,c=!!i.morphAttributes.position,d=!!i.morphAttributes.normal,f=!!i.morphAttributes.color,m=n.toneMapped?A.toneMapping:Z,g=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,v=void 0!==g?g.length:0,y=Q.get(n),x=p.state.lights;if(!0===N&&(!0===z||t!==T)){const e=t===T&&n.id===E;ht.setState(n,t,e)}let w=!1;n.version===y.__version?y.needsLights&&y.lightsStateVersion!==x.state.version||y.outputEncoding!==a||r.isInstancedMesh&&!1===y.instancing?w=!0:r.isInstancedMesh||!0!==y.instancing?r.isSkinnedMesh&&!1===y.skinning?w=!0:r.isSkinnedMesh||!0!==y.skinning?y.envMap!==h||n.fog&&y.fog!==s?w=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===ht.numPlanes&&y.numIntersection===ht.numIntersection?(y.vertexAlphas!==l||y.vertexTangents!==u||y.morphTargets!==c||y.morphNormals!==d||y.morphColors!==f||y.toneMapping!==m||!0===X.isWebGL2&&y.morphTargetsCount!==v)&&(w=!0):w=!0:w=!0:w=!0:(w=!0,y.__version=n.version);let b=y.currentProgram;!0===w&&(b=Dt(n,e,r));let _=!1,M=!1,C=!1;const P=b.getUniforms(),L=y.uniforms;q.useProgram(b.program)&&(_=!0,M=!0,C=!0);n.id!==E&&(E=n.id,M=!0);if(_||T!==t){if(P.setValue(gt,"projectionMatrix",t.projectionMatrix),X.logarithmicDepthBuffer&&P.setValue(gt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),T!==t&&(T=t,M=!0,C=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const e=P.map.cameraPosition;void 0!==e&&e.setValue(gt,H.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&P.setValue(gt,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||r.isSkinnedMesh)&&P.setValue(gt,"viewMatrix",t.matrixWorldInverse)}if(r.isSkinnedMesh){P.setOptional(gt,r,"bindMatrix"),P.setOptional(gt,r,"bindMatrixInverse");const t=r.skeleton;t&&(X.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),P.setValue(gt,"boneTexture",t.boneTexture,K),P.setValue(gt,"boneTextureSize",t.boneTextureSize)):P.setOptional(gt,t,"boneMatrices"))}const I=i.morphAttributes;(void 0!==I.position||void 0!==I.normal||void 0!==I.color&&!0===X.isWebGL2)&&ct.update(r,i,n,b);(M||y.receiveShadow!==r.receiveShadow)&&(y.receiveShadow=r.receiveShadow,P.setValue(gt,"receiveShadow",r.receiveShadow));M&&(P.setValue(gt,"toneMappingExposure",A.toneMappingExposure),y.needsLights&&(B=C,(D=L).ambientLightColor.needsUpdate=B,D.lightProbe.needsUpdate=B,D.directionalLights.needsUpdate=B,D.directionalLightShadows.needsUpdate=B,D.pointLights.needsUpdate=B,D.pointLightShadows.needsUpdate=B,D.spotLights.needsUpdate=B,D.spotLightShadows.needsUpdate=B,D.rectAreaLights.needsUpdate=B,D.hemisphereLights.needsUpdate=B),s&&n.fog&&st.refreshFogUniforms(L,s),st.refreshMaterialUniforms(L,n,O,R,U),da.upload(gt,y.uniformsList,L,K));var D,B;n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(da.upload(gt,y.uniformsList,L,K),n.uniformsNeedUpdate=!1);n.isSpriteMaterial&&P.setValue(gt,"center",r.center);return P.setValue(gt,"modelViewMatrix",r.modelViewMatrix),P.setValue(gt,"normalMatrix",r.normalMatrix),P.setValue(gt,"modelMatrix",r.matrixWorld),b}(t,e,i,n,r);q.setMaterial(n,o);let h=i.index;const l=i.attributes.position;if(null===h){if(void 0===l||0===l.count)return}else if(0===h.count)return;let u,c=1;!0===n.wireframe&&(h=it.getWireframeAttribute(i),c=2),mt.setup(r,n,a,i,h);let d=dt;null!==h&&(u=et.get(h),d=pt,d.setIndex(u));const f=null!==h?h.count:l.count,m=i.drawRange.start*c,g=i.drawRange.count*c,v=null!==s?s.start*c:0,y=null!==s?s.count*c:1/0,x=Math.max(m,v),w=Math.min(f,m+g,v+y)-1,b=Math.max(0,w-x+1);if(0!==b){if(r.isMesh)!0===n.wireframe?(q.setLineWidth(n.wireframeLinewidth*j()),d.setMode(1)):d.setMode(4);else if(r.isLine){let t=n.linewidth;void 0===t&&(t=1),q.setLineWidth(t*j()),r.isLineSegments?d.setMode(1):r.isLineLoop?d.setMode(2):d.setMode(3)}else r.isPoints?d.setMode(0):r.isSprite&&d.setMode(4);if(r.isInstancedMesh)d.renderInstances(x,b,r.count);else if(i.isInstancedBufferGeometry){const t=Math.min(i.instanceCount,i._maxInstanceCount);d.renderInstances(x,b,t)}else d.render(x,b)}},this.compile=function(t,e){p=at.get(t),p.init(),y.push(p),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(p.pushLight(t),t.castShadow&&p.pushShadow(t))})),p.setupLights(A.physicallyCorrectLights),t.traverse((function(e){const i=e.material;if(i)if(Array.isArray(i))for(let n=0;n<i.length;n++){Dt(i[n],t,e)}else Dt(i,t,e)})),y.pop(),p=null};let Tt=null;function _t(){Ct.stop()}function Mt(){Ct.start()}const Ct=new _s;function Ot(t,e,i,n){const r=t.opaque,s=t.transmissive,a=t.transparent;p.setupLightsView(i),s.length>0&&function(t,e,i){const n=X.isWebGL2;null===U&&(U=new Zi(1,1,{generateMipmaps:!0,type:null!==ft.convert(Rt)?Rt:St,minFilter:wt,samples:n&&!0===o?4:0}));A.getDrawingBufferSize(V),n?U.setSize(V.x,V.y):U.setSize(_i(V.x),_i(V.y));const r=A.getRenderTarget();A.setRenderTarget(U),A.clear();const s=A.toneMapping;A.toneMapping=Z,Lt(t,e,i),A.toneMapping=s,K.updateMultisampleRenderTarget(U),K.updateRenderTargetMipmap(U),A.setRenderTarget(r)}(r,e,i),n&&q.viewport(_.copy(n)),r.length>0&&Lt(r,e,i),s.length>0&&Lt(s,e,i),a.length>0&&Lt(a,e,i),q.buffers.depth.setTest(!0),q.buffers.depth.setMask(!0),q.buffers.color.setMask(!0),q.setPolygonOffset(!1)}function Lt(t,e,i){const n=!0===e.isScene?e.overrideMaterial:null;for(let r=0,s=t.length;r<s;r++){const s=t[r],o=s.object,a=s.geometry,h=null===n?s.material:n,l=s.group;o.layers.test(i.layers)&&It(o,e,i,a,h,l)}}function It(t,e,i,n,r,s){t.onBeforeRender(A,e,i,n,r,s),t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),r.onBeforeRender(A,e,i,n,t,s),!0===r.transparent&&r.side===g?(r.side=m,r.needsUpdate=!0,A.renderBufferDirect(i,e,n,r,t,s),r.side=f,r.needsUpdate=!0,A.renderBufferDirect(i,e,n,r,t,s),r.side=g):A.renderBufferDirect(i,e,n,r,t,s),t.onAfterRender(A,e,i,n,r,s)}function Dt(t,e,i){!0!==e.isScene&&(e=W);const n=Q.get(t),r=p.state.lights,s=p.state.shadowsArray,o=r.state.version,a=rt.getParameters(t,r.state,s,e,i),h=rt.getProgramCacheKey(a);let l=n.programs;n.environment=t.isMeshStandardMaterial?e.environment:null,n.fog=e.fog,n.envMap=(t.isMeshStandardMaterial?tt:$).get(t.envMap||n.environment),void 0===l&&(t.addEventListener("dispose",Et),l=new Map,n.programs=l);let u=l.get(h);if(void 0!==u){if(n.currentProgram===u&&n.lightsStateVersion===o)return Bt(t,a),u}else a.uniforms=rt.getUniforms(t),t.onBuild(i,a,A),t.onBeforeCompile(a,A),u=rt.acquireProgram(a,h),l.set(h,u),n.uniforms=a.uniforms;const c=n.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(c.clippingPlanes=ht.uniform),Bt(t,a),n.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),n.lightsStateVersion=o,n.needsLights&&(c.ambientLightColor.value=r.state.ambient,c.lightProbe.value=r.state.probe,c.directionalLights.value=r.state.directional,c.directionalLightShadows.value=r.state.directionalShadow,c.spotLights.value=r.state.spot,c.spotLightShadows.value=r.state.spotShadow,c.rectAreaLights.value=r.state.rectArea,c.ltc_1.value=r.state.rectAreaLTC1,c.ltc_2.value=r.state.rectAreaLTC2,c.pointLights.value=r.state.point,c.pointLightShadows.value=r.state.pointShadow,c.hemisphereLights.value=r.state.hemi,c.directionalShadowMap.value=r.state.directionalShadowMap,c.directionalShadowMatrix.value=r.state.directionalShadowMatrix,c.spotShadowMap.value=r.state.spotShadowMap,c.spotShadowMatrix.value=r.state.spotShadowMatrix,c.pointShadowMap.value=r.state.pointShadowMap,c.pointShadowMatrix.value=r.state.pointShadowMatrix);const d=u.getUniforms(),f=da.seqWithValue(d.seq,c);return n.currentProgram=u,n.uniformsList=f,u}function Bt(t,e){const i=Q.get(t);i.outputEncoding=e.outputEncoding,i.instancing=e.instancing,i.skinning=e.skinning,i.morphTargets=e.morphTargets,i.morphNormals=e.morphNormals,i.morphColors=e.morphColors,i.morphTargetsCount=e.morphTargetsCount,i.numClippingPlanes=e.numClippingPlanes,i.numIntersection=e.numClipIntersection,i.vertexAlphas=e.vertexAlphas,i.vertexTangents=e.vertexTangents,i.toneMapping=e.toneMapping}Ct.setAnimationLoop((function(t){Tt&&Tt(t)})),"undefined"!=typeof self&&Ct.setContext(self),this.setAnimationLoop=function(t){Tt=t,At.setAnimationLoop(t),null===t?Ct.stop():Ct.start()},At.addEventListener("sessionstart",_t),At.addEventListener("sessionend",Mt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return;if(!0===x)return;!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===At.enabled&&!0===At.isPresenting&&(!0===At.cameraAutoUpdate&&At.updateCamera(e),e=At.getCamera()),!0===t.isScene&&t.onBeforeRender(A,t,e,S),p=at.get(t,y.length),p.init(),y.push(p),G.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),F.setFromProjectionMatrix(G),z=this.localClippingEnabled,N=ht.init(this.clippingPlanes,z,e),d=ot.get(t,v.length),d.init(),v.push(d),function t(e,i,n,r){if(!1===e.visible)return;if(e.layers.test(i.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(i);else if(e.isLight)p.pushLight(e),e.castShadow&&p.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||F.intersectsSprite(e)){r&&H.setFromMatrixPosition(e.matrixWorld).applyMatrix4(G);const t=nt.update(e),i=e.material;i.visible&&d.push(e,t,i,n,H.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==J.render.frame&&(e.skeleton.update(),e.skeleton.frame=J.render.frame),!e.frustumCulled||F.intersectsObject(e))){r&&H.setFromMatrixPosition(e.matrixWorld).applyMatrix4(G);const t=nt.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let s=0,o=r.length;s<o;s++){const o=r[s],a=i[o.materialIndex];a&&a.visible&&d.push(e,t,a,n,H.z,o)}}else i.visible&&d.push(e,t,i,n,H.z,null)}const s=e.children;for(let e=0,o=s.length;e<o;e++)t(s[e],i,n,r)}(t,e,0,A.sortObjects),d.finish(),!0===A.sortObjects&&d.sort(L,I),!0===N&&ht.beginShadows();const i=p.state.shadowsArray;if(lt.render(i,t,e),!0===N&&ht.endShadows(),!0===this.info.autoReset&&this.info.reset(),ut.render(d,t),p.setupLights(A.physicallyCorrectLights),e.isArrayCamera){const i=e.cameras;for(let e=0,n=i.length;e<n;e++){const n=i[e];Ot(d,t,n,n.viewport)}}else Ot(d,t,e);null!==S&&(K.updateMultisampleRenderTarget(S),K.updateRenderTargetMipmap(S)),!0===t.isScene&&t.onAfterRender(A,t,e),mt.resetDefaultState(),E=-1,T=null,y.pop(),p=y.length>0?y[y.length-1]:null,v.pop(),d=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(t,e,i){Q.get(t.texture).__webglTexture=e,Q.get(t.depthTexture).__webglTexture=i;const n=Q.get(t);n.__hasExternalTextures=!0,n.__hasExternalTextures&&(n.__autoAllocateDepthBuffer=void 0===i,n.__autoAllocateDepthBuffer||!0===Y.has("WEBGL_multisampled_render_to_texture")&&(n.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const i=Q.get(t);i.__webglFramebuffer=e,i.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,i=0){S=t,w=e,b=i;let n=!0;if(t){const e=Q.get(t);void 0!==e.__useDefaultFramebuffer?(q.bindFramebuffer(36160,null),n=!1):void 0===e.__webglFramebuffer?K.setupRenderTarget(t):e.__hasExternalTextures&&K.rebindTextures(t,Q.get(t.texture).__webglTexture,Q.get(t.depthTexture).__webglTexture)}let r=null,s=!1,o=!1;if(t){const i=t.texture;(i.isData3DTexture||i.isDataArrayTexture)&&(o=!0);const n=Q.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=n[e],s=!0):r=X.isWebGL2&&t.samples>0&&!1===K.useMultisampledRTT(t)?Q.get(t).__webglMultisampledFramebuffer:n,_.copy(t.viewport),M.copy(t.scissor),C=t.scissorTest}else _.copy(D).multiplyScalar(O).floor(),M.copy(B).multiplyScalar(O).floor(),C=k;if(q.bindFramebuffer(36160,r)&&X.drawBuffers&&n&&q.drawBuffers(t,r),q.viewport(_),q.scissor(M),q.setScissorTest(C),s){const n=Q.get(t.texture);gt.framebufferTexture2D(36160,36064,34069+e,n.__webglTexture,i)}else if(o){const n=Q.get(t.texture),r=e||0;gt.framebufferTextureLayer(36160,36064,n.__webglTexture,i||0,r)}E=-1},this.readRenderTargetPixels=function(t,e,i,n,r,s,o){if(!t||!t.isWebGLRenderTarget)return;let a=Q.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(a=a[o]),a){q.bindFramebuffer(36160,a);try{const o=t.texture,a=o.format,h=o.type;if(a!==kt&&ft.convert(a)!==gt.getParameter(35739))return;const l=h===Rt&&(Y.has("EXT_color_buffer_half_float")||X.isWebGL2&&Y.has("EXT_color_buffer_float"));if(!(h===St||ft.convert(h)===gt.getParameter(35738)||h===Pt&&(X.isWebGL2||Y.has("OES_texture_float")||Y.has("WEBGL_color_buffer_float"))||l))return;e>=0&&e<=t.width-n&&i>=0&&i<=t.height-r&&gt.readPixels(e,i,n,r,ft.convert(a),ft.convert(h),s)}finally{const t=null!==S?Q.get(S).__webglFramebuffer:null;q.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e,i=0){if(!0!==e.isFramebufferTexture)return;const n=Math.pow(2,-i),r=Math.floor(e.image.width*n),s=Math.floor(e.image.height*n);K.setTexture2D(e,0),gt.copyTexSubImage2D(3553,i,0,0,t.x,t.y,r,s),q.unbindTexture()},this.copyTextureToTexture=function(t,e,i,n=0){const r=e.image.width,s=e.image.height,o=ft.convert(i.format),a=ft.convert(i.type);K.setTexture2D(i,0),gt.pixelStorei(37440,i.flipY),gt.pixelStorei(37441,i.premultiplyAlpha),gt.pixelStorei(3317,i.unpackAlignment),e.isDataTexture?gt.texSubImage2D(3553,n,t.x,t.y,r,s,o,a,e.image.data):e.isCompressedTexture?gt.compressedTexSubImage2D(3553,n,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,o,e.mipmaps[0].data):gt.texSubImage2D(3553,n,t.x,t.y,o,a,e.image),0===n&&i.generateMipmaps&&gt.generateMipmap(3553),q.unbindTexture()},this.copyTextureToTexture3D=function(t,e,i,n,r=0){if(A.isWebGL1Renderer)return;const s=t.max.x-t.min.x+1,o=t.max.y-t.min.y+1,a=t.max.z-t.min.z+1,h=ft.convert(n.format),l=ft.convert(n.type);let u;if(n.isData3DTexture)K.setTexture3D(n,0),u=32879;else{if(!n.isDataArrayTexture)return;K.setTexture2DArray(n,0),u=35866}gt.pixelStorei(37440,n.flipY),gt.pixelStorei(37441,n.premultiplyAlpha),gt.pixelStorei(3317,n.unpackAlignment);const c=gt.getParameter(3314),d=gt.getParameter(32878),p=gt.getParameter(3316),f=gt.getParameter(3315),m=gt.getParameter(32877),g=i.isCompressedTexture?i.mipmaps[0]:i.image;gt.pixelStorei(3314,g.width),gt.pixelStorei(32878,g.height),gt.pixelStorei(3316,t.min.x),gt.pixelStorei(3315,t.min.y),gt.pixelStorei(32877,t.min.z),i.isDataTexture||i.isData3DTexture?gt.texSubImage3D(u,r,e.x,e.y,e.z,s,o,a,h,l,g.data):i.isCompressedTexture?gt.compressedTexSubImage3D(u,r,e.x,e.y,e.z,s,o,a,h,g.data):gt.texSubImage3D(u,r,e.x,e.y,e.z,s,o,a,h,l,g),gt.pixelStorei(3314,c),gt.pixelStorei(32878,d),gt.pixelStorei(3316,p),gt.pixelStorei(3315,f),gt.pixelStorei(32877,m),0===r&&n.generateMipmaps&&gt.generateMipmap(u),q.unbindTexture()},this.initTexture=function(t){K.setTexture2D(t,0),q.unbindTexture()},this.resetState=function(){w=0,b=0,S=null,q.reset(),mt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}sh.prototype.isWebGLRenderer=!0;class oh extends sh{}oh.prototype.isWebGL1Renderer=!0;class ah{constructor(t,e=25e-5){this.name="",this.color=new Wi(t),this.density=e}clone(){return new ah(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}ah.prototype.isFogExp2=!0;class hh{constructor(t,e=1,i=1e3){this.name="",this.color=new Wi(t),this.near=e,this.far=i}clone(){return new hh(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}hh.prototype.isFog=!0;class lh extends hr{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}lh.prototype.isScene=!0;class uh{constructor(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=ni,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=xi()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let n=0,r=this.stride;n<r;n++)this.array[t+n]=e.array[i+n];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=xi()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=xi()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}uh.prototype.isInterleavedBuffer=!0;const ch=new on;class dh{constructor(t,e,i,n=!1){this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=!0===n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)ch.fromBufferAttribute(this,e),ch.applyMatrix4(t),this.setXYZ(e,ch.x,ch.y,ch.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)ch.fromBufferAttribute(this,e),ch.applyNormalMatrix(t),this.setXYZ(e,ch.x,ch.y,ch.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)ch.fromBufferAttribute(this,e),ch.transformDirection(t),this.setXYZ(e,ch.x,ch.y,ch.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this}setXYZW(t,e,i,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=r,this}clone(t){if(void 0===t){const t=[];for(let e=0;e<this.count;e++){const i=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[i+e])}return new Tr(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new dh(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){const t=[];for(let e=0;e<this.count;e++){const i=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[i+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}dh.prototype.isInterleavedBufferAttribute=!0;class ph extends wr{constructor(t){super(),this.type="SpriteMaterial",this.color=new Wi(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}let fh;ph.prototype.isSpriteMaterial=!0;const mh=new on,gh=new on,vh=new on,yh=new Ci,Ah=new Ci,xh=new Fn,wh=new on,bh=new on,Sh=new on,Eh=new Ci,Th=new Ci,_h=new Ci;class Mh extends hr{constructor(t){if(super(),this.type="Sprite",void 0===fh){fh=new Hr;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new uh(t,5);fh.setIndex([0,1,2,0,2,3]),fh.setAttribute("position",new dh(e,3,0,!1)),fh.setAttribute("uv",new dh(e,2,3,!1))}this.geometry=fh,this.material=void 0!==t?t:new ph,this.center=new Ci(.5,.5)}raycast(t,e){t.camera,gh.setFromMatrixScale(this.matrixWorld),xh.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),vh.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&gh.multiplyScalar(-vh.z);const i=this.material.rotation;let n,r;0!==i&&(r=Math.cos(i),n=Math.sin(i));const s=this.center;Ch(wh.set(-.5,-.5,0),vh,s,gh,n,r),Ch(bh.set(.5,-.5,0),vh,s,gh,n,r),Ch(Sh.set(.5,.5,0),vh,s,gh,n,r),Eh.set(0,0),Th.set(1,0),_h.set(1,1);let o=t.ray.intersectTriangle(wh,bh,Sh,!1,mh);if(null===o&&(Ch(bh.set(-.5,.5,0),vh,s,gh,n,r),Th.set(0,1),o=t.ray.intersectTriangle(wh,Sh,bh,!1,mh),null===o))return;const a=t.ray.origin.distanceTo(mh);a<t.near||a>t.far||e.push({distance:a,point:mh.clone(),uv:Ar.getUV(mh,wh,bh,Sh,Eh,Th,_h,new Ci),face:null,object:this})}copy(t){return super.copy(t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function Ch(t,e,i,n,r,s){yh.subVectors(t,i).addScalar(.5).multiply(n),void 0!==r?(Ah.x=s*yh.x-r*yh.y,Ah.y=r*yh.x+s*yh.y):Ah.copy(yh),t.copy(e),t.x+=Ah.x,t.y+=Ah.y,t.applyMatrix4(xh)}Mh.prototype.isSprite=!0;const Ph=new on,Rh=new on;class Oh extends hr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let t=0,i=e.length;t<i;t++){const i=e[t];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0){e=Math.abs(e);const i=this.levels;let n;for(n=0;n<i.length&&!(e<i[n].distance);n++);return i.splice(n,0,{distance:e,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let i,n;for(i=1,n=e.length;i<n&&!(t<e[i].distance);i++);return e[i-1].object}return null}raycast(t,e){if(this.levels.length>0){Ph.setFromMatrixPosition(this.matrixWorld);const i=t.ray.origin.distanceTo(Ph);this.getObjectForDistance(i).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){Ph.setFromMatrixPosition(t.matrixWorld),Rh.setFromMatrixPosition(this.matrixWorld);const i=Ph.distanceTo(Rh)/t.zoom;let n,r;for(e[0].object.visible=!0,n=1,r=e.length;n<r&&i>=e[n].distance;n++)e[n-1].object.visible=!1,e[n].object.visible=!0;for(this._currentLevel=n-1;n<r;n++)e[n].object.visible=!1}}toJSON(t){const e=super.toJSON(t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const i=this.levels;for(let t=0,n=i.length;t<n;t++){const n=i[t];e.object.levels.push({object:n.object.uuid,distance:n.distance})}return e}}const Lh=new on,Ih=new Ki,Dh=new Ki,Bh=new on,kh=new Fn;class Fh extends as{constructor(t,e){super(t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Fn,this.bindMatrixInverse=new Fn}copy(t){return super.copy(t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Ki,e=this.geometry.attributes.skinWeight;for(let i=0,n=e.count;i<n;i++){t.fromBufferAttribute(e,i);const n=1/t.manhattanLength();n!==1/0?t.multiplyScalar(n):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}boneTransform(t,e){const i=this.skeleton,n=this.geometry;Ih.fromBufferAttribute(n.attributes.skinIndex,t),Dh.fromBufferAttribute(n.attributes.skinWeight,t),Lh.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let t=0;t<4;t++){const n=Dh.getComponent(t);if(0!==n){const r=Ih.getComponent(t);kh.multiplyMatrices(i.bones[r].matrixWorld,i.boneInverses[r]),e.addScaledVector(Bh.copy(Lh).applyMatrix4(kh),n)}}return e.applyMatrix4(this.bindMatrixInverse)}}Fh.prototype.isSkinnedMesh=!0;class Nh extends hr{constructor(){super(),this.type="Bone"}}Nh.prototype.isBone=!0;class zh extends Qi{constructor(t=null,e=1,i=1,n,r,s,o,a,h=pt,l=pt,u,c){super(null,s,o,a,h,l,n,r,u,c),this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}zh.prototype.isDataTexture=!0;const Uh=new Fn,Gh=new Fn;class Vh{constructor(t=[],e=[]){this.uuid=xi(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new Fn)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new Fn;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,i=this.boneMatrices,n=this.boneTexture;for(let n=0,r=t.length;n<r;n++){const r=t[n]?t[n].matrixWorld:Gh;Uh.multiplyMatrices(r,e[n]),Uh.toArray(i,16*n)}null!==n&&(n.needsUpdate=!0)}clone(){return new Vh(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=Ti(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const i=new zh(e,t,t,kt,Pt);return i.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=i,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,i=this.bones.length;e<i;e++){const i=this.bones[e];if(i.name===t)return i}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,n=t.bones.length;i<n;i++){let n=e[t.bones[i]];void 0===n&&(n=new Nh),this.bones.push(n),this.boneInverses.push((new Fn).fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,i=this.boneInverses;for(let n=0,r=e.length;n<r;n++){const r=e[n];t.bones.push(r.uuid);const s=i[n];t.boneInverses.push(s.toArray())}return t}}class Hh extends Tr{constructor(t,e,i,n=1){"number"==typeof i&&(n=i,i=!1),super(t,e,i),this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}Hh.prototype.isInstancedBufferAttribute=!0;const Wh=new Fn,jh=new Fn,Yh=[],Xh=new as;class qh extends as{constructor(t,e,i){super(t,e),this.instanceMatrix=new Hh(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(t){return super.copy(t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const i=this.matrixWorld,n=this.count;if(Xh.geometry=this.geometry,Xh.material=this.material,void 0!==Xh.material)for(let r=0;r<n;r++){this.getMatrixAt(r,Wh),jh.multiplyMatrices(i,Wh),Xh.matrixWorld=jh,Xh.raycast(t,Yh);for(let t=0,i=Yh.length;t<i;t++){const i=Yh[t];i.instanceId=r,i.object=this,e.push(i)}Yh.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new Hh(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}qh.prototype.isInstancedMesh=!0;class Jh extends wr{constructor(t){super(),this.type="LineBasicMaterial",this.color=new Wi(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this}}Jh.prototype.isLineBasicMaterial=!0;const Qh=new on,Kh=new on,Zh=new Fn,$h=new kn,tl=new Cn;class el extends hr{constructor(t=new Hr,e=new Jh){super(),this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry){if(null===t.index){const e=t.attributes.position,i=[0];for(let t=1,n=e.count;t<n;t++)Qh.fromBufferAttribute(e,t-1),Kh.fromBufferAttribute(e,t),i[t]=i[t-1],i[t]+=Qh.distanceTo(Kh);t.setAttribute("lineDistance",new Dr(i,1))}}else t.isGeometry;return this}raycast(t,e){const i=this.geometry,n=this.matrixWorld,r=t.params.Line.threshold,s=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),tl.copy(i.boundingSphere),tl.applyMatrix4(n),tl.radius+=r,!1===t.ray.intersectsSphere(tl))return;Zh.copy(n).invert(),$h.copy(t.ray).applyMatrix4(Zh);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,h=new on,l=new on,u=new on,c=new on,d=this.isLineSegments?2:1;if(i.isBufferGeometry){const n=i.index,r=i.attributes.position;if(null!==n){for(let i=Math.max(0,s.start),o=Math.min(n.count,s.start+s.count)-1;i<o;i+=d){const s=n.getX(i),o=n.getX(i+1);h.fromBufferAttribute(r,s),l.fromBufferAttribute(r,o);if($h.distanceSqToSegment(h,l,c,u)>a)continue;c.applyMatrix4(this.matrixWorld);const d=t.ray.origin.distanceTo(c);d<t.near||d>t.far||e.push({distance:d,point:u.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else{for(let i=Math.max(0,s.start),n=Math.min(r.count,s.start+s.count)-1;i<n;i+=d){h.fromBufferAttribute(r,i),l.fromBufferAttribute(r,i+1);if($h.distanceSqToSegment(h,l,c,u)>a)continue;c.applyMatrix4(this.matrixWorld);const n=t.ray.origin.distanceTo(c);n<t.near||n>t.far||e.push({distance:n,point:u.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}}else i.isGeometry}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const t=e[i[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,i=t.length;e<i;e++){const i=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length}}}el.prototype.isLine=!0;const il=new on,nl=new on;class rl extends el{constructor(t,e){super(t,e),this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry){if(null===t.index){const e=t.attributes.position,i=[];for(let t=0,n=e.count;t<n;t+=2)il.fromBufferAttribute(e,t),nl.fromBufferAttribute(e,t+1),i[t]=0===t?0:i[t-1],i[t+1]=i[t]+il.distanceTo(nl);t.setAttribute("lineDistance",new Dr(i,1))}}else t.isGeometry;return this}}rl.prototype.isLineSegments=!0;class sl extends el{constructor(t,e){super(t,e),this.type="LineLoop"}}sl.prototype.isLineLoop=!0;class ol extends wr{constructor(t){super(),this.type="PointsMaterial",this.color=new Wi(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this}}ol.prototype.isPointsMaterial=!0;const al=new Fn,hl=new kn,ll=new Cn,ul=new on;class cl extends hr{constructor(t=new Hr,e=new ol){super(),this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const i=this.geometry,n=this.matrixWorld,r=t.params.Points.threshold,s=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),ll.copy(i.boundingSphere),ll.applyMatrix4(n),ll.radius+=r,!1===t.ray.intersectsSphere(ll))return;al.copy(n).invert(),hl.copy(t.ray).applyMatrix4(al);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(i.isBufferGeometry){const r=i.index,o=i.attributes.position;if(null!==r){for(let i=Math.max(0,s.start),h=Math.min(r.count,s.start+s.count);i<h;i++){const s=r.getX(i);ul.fromBufferAttribute(o,s),dl(ul,s,a,n,t,e,this)}}else{for(let i=Math.max(0,s.start),r=Math.min(o.count,s.start+s.count);i<r;i++)ul.fromBufferAttribute(o,i),dl(ul,i,a,n,t,e,this)}}}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const t=e[i[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,i=t.length;e<i;e++){const i=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length}}}function dl(t,e,i,n,r,s,o){const a=hl.distanceSqToPoint(t);if(a<i){const i=new on;hl.closestPointToPoint(t,i),i.applyMatrix4(n);const h=r.ray.origin.distanceTo(i);if(h<r.near||h>r.far)return;s.push({distance:h,distanceToRay:Math.sqrt(a),point:i,index:e,face:null,object:o})}}cl.prototype.isPoints=!0;class pl extends Qi{constructor(t,e,i,n,r,s,o,a,h){super(t,e,i,n,r,s,o,a,h),this.minFilter=void 0!==s?s:yt,this.magFilter=void 0!==r?r:yt,this.generateMipmaps=!1;const l=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){l.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}pl.prototype.isVideoTexture=!0;class fl extends Qi{constructor(t,e,i){super({width:t,height:e}),this.format=i,this.magFilter=pt,this.minFilter=pt,this.generateMipmaps=!1,this.needsUpdate=!0}}fl.prototype.isFramebufferTexture=!0;class ml extends Qi{constructor(t,e,i,n,r,s,o,a,h,l,u,c){super(null,s,o,a,h,l,n,r,u,c),this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}ml.prototype.isCompressedTexture=!0;class gl extends Qi{constructor(t,e,i,n,r,s,o,a,h){super(t,e,i,n,r,s,o,a,h),this.needsUpdate=!0}}gl.prototype.isCanvasTexture=!0;class vl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return null}getPointAt(t,e){const i=this.getUtoTmapping(t);return this.getPoint(i,e)}getPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return e}getSpacedPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let i,n=this.getPoint(0),r=0;e.push(0);for(let s=1;s<=t;s++)i=this.getPoint(s/t),r+=i.distanceTo(n),e.push(r),n=i;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const i=this.getLengths();let n=0;const r=i.length;let s;s=e||t*i[r-1];let o,a=0,h=r-1;for(;a<=h;)if(n=Math.floor(a+(h-a)/2),o=i[n]-s,o<0)a=n+1;else{if(!(o>0)){h=n;break}h=n-1}if(n=h,i[n]===s)return n/(r-1);const l=i[n];return(n+(s-l)/(i[n+1]-l))/(r-1)}getTangent(t,e){let i=t-1e-4,n=t+1e-4;i<0&&(i=0),n>1&&(n=1);const r=this.getPoint(i),s=this.getPoint(n),o=e||(r.isVector2?new Ci:new on);return o.copy(s).sub(r).normalize(),o}getTangentAt(t,e){const i=this.getUtoTmapping(t);return this.getTangent(i,e)}computeFrenetFrames(t,e){const i=new on,n=[],r=[],s=[],o=new on,a=new Fn;for(let e=0;e<=t;e++){const i=e/t;n[e]=this.getTangentAt(i,new on)}r[0]=new on,s[0]=new on;let h=Number.MAX_VALUE;const l=Math.abs(n[0].x),u=Math.abs(n[0].y),c=Math.abs(n[0].z);l<=h&&(h=l,i.set(1,0,0)),u<=h&&(h=u,i.set(0,1,0)),c<=h&&i.set(0,0,1),o.crossVectors(n[0],i).normalize(),r[0].crossVectors(n[0],o),s[0].crossVectors(n[0],r[0]);for(let e=1;e<=t;e++){if(r[e]=r[e-1].clone(),s[e]=s[e-1].clone(),o.crossVectors(n[e-1],n[e]),o.length()>Number.EPSILON){o.normalize();const t=Math.acos(wi(n[e-1].dot(n[e]),-1,1));r[e].applyMatrix4(a.makeRotationAxis(o,t))}s[e].crossVectors(n[e],r[e])}if(!0===e){let e=Math.acos(wi(r[0].dot(r[t]),-1,1));e/=t,n[0].dot(o.crossVectors(r[0],r[t]))>0&&(e=-e);for(let i=1;i<=t;i++)r[i].applyMatrix4(a.makeRotationAxis(n[i],e*i)),s[i].crossVectors(n[i],r[i])}return{tangents:n,normals:r,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class yl extends vl{constructor(t=0,e=0,i=1,n=1,r=0,s=2*Math.PI,o=!1,a=0){super(),this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a}getPoint(t,e){const i=e||new Ci,n=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=s?0:n),!0!==this.aClockwise||s||(r===n?r=-n:r-=n);const o=this.aStartAngle+t*r;let a=this.aX+this.xRadius*Math.cos(o),h=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),i=a-this.aX,n=h-this.aY;a=i*t-n*e+this.aX,h=i*e+n*t+this.aY}return i.set(a,h)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}yl.prototype.isEllipseCurve=!0;class Al extends yl{constructor(t,e,i,n,r,s){super(t,e,i,i,n,r,s),this.type="ArcCurve"}}function xl(){let t=0,e=0,i=0,n=0;function r(r,s,o,a){t=r,e=o,i=-3*r+3*s-2*o-a,n=2*r-2*s+o+a}return{initCatmullRom:function(t,e,i,n,s){r(e,i,s*(i-t),s*(n-e))},initNonuniformCatmullRom:function(t,e,i,n,s,o,a){let h=(e-t)/s-(i-t)/(s+o)+(i-e)/o,l=(i-e)/o-(n-e)/(o+a)+(n-i)/a;h*=o,l*=o,r(e,i,h,l)},calc:function(r){const s=r*r;return t+e*r+i*s+n*(s*r)}}}Al.prototype.isArcCurve=!0;const wl=new on,bl=new xl,Sl=new xl,El=new xl;class Tl extends vl{constructor(t=[],e=!1,i="centripetal",n=.5){super(),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=i,this.tension=n}getPoint(t,e=new on){const i=e,n=this.points,r=n.length,s=(r-(this.closed?0:1))*t;let o,a,h=Math.floor(s),l=s-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/r)+1)*r:0===l&&h===r-1&&(h=r-2,l=1),this.closed||h>0?o=n[(h-1)%r]:(wl.subVectors(n[0],n[1]).add(n[0]),o=wl);const u=n[h%r],c=n[(h+1)%r];if(this.closed||h+2<r?a=n[(h+2)%r]:(wl.subVectors(n[r-1],n[r-2]).add(n[r-1]),a=wl),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(o.distanceToSquared(u),t),i=Math.pow(u.distanceToSquared(c),t),n=Math.pow(c.distanceToSquared(a),t);i<1e-4&&(i=1),e<1e-4&&(e=i),n<1e-4&&(n=i),bl.initNonuniformCatmullRom(o.x,u.x,c.x,a.x,e,i,n),Sl.initNonuniformCatmullRom(o.y,u.y,c.y,a.y,e,i,n),El.initNonuniformCatmullRom(o.z,u.z,c.z,a.z,e,i,n)}else"catmullrom"===this.curveType&&(bl.initCatmullRom(o.x,u.x,c.x,a.x,this.tension),Sl.initCatmullRom(o.y,u.y,c.y,a.y,this.tension),El.initCatmullRom(o.z,u.z,c.z,a.z,this.tension));return i.set(bl.calc(l),Sl.calc(l),El.calc(l)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push((new on).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function _l(t,e,i,n,r){const s=.5*(n-e),o=.5*(r-i),a=t*t;return(2*i-2*n+s+o)*(t*a)+(-3*i+3*n-2*s-o)*a+s*t+i}function Ml(t,e,i,n){return function(t,e){const i=1-t;return i*i*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,i)+function(t,e){return t*t*e}(t,n)}function Cl(t,e,i,n,r){return function(t,e){const i=1-t;return i*i*i*e}(t,e)+function(t,e){const i=1-t;return 3*i*i*t*e}(t,i)+function(t,e){return 3*(1-t)*t*t*e}(t,n)+function(t,e){return t*t*t*e}(t,r)}Tl.prototype.isCatmullRomCurve3=!0;class Pl extends vl{constructor(t=new Ci,e=new Ci,i=new Ci,n=new Ci){super(),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=i,this.v3=n}getPoint(t,e=new Ci){const i=e,n=this.v0,r=this.v1,s=this.v2,o=this.v3;return i.set(Cl(t,n.x,r.x,s.x,o.x),Cl(t,n.y,r.y,s.y,o.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}Pl.prototype.isCubicBezierCurve=!0;class Rl extends vl{constructor(t=new on,e=new on,i=new on,n=new on){super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=i,this.v3=n}getPoint(t,e=new on){const i=e,n=this.v0,r=this.v1,s=this.v2,o=this.v3;return i.set(Cl(t,n.x,r.x,s.x,o.x),Cl(t,n.y,r.y,s.y,o.y),Cl(t,n.z,r.z,s.z,o.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}Rl.prototype.isCubicBezierCurve3=!0;class Ol extends vl{constructor(t=new Ci,e=new Ci){super(),this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Ci){const i=e;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const i=e||new Ci;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Ol.prototype.isLineCurve=!0;class Ll extends vl{constructor(t=new on,e=new on){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=e}getPoint(t,e=new on){const i=e;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Il extends vl{constructor(t=new Ci,e=new Ci,i=new Ci){super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new Ci){const i=e,n=this.v0,r=this.v1,s=this.v2;return i.set(Ml(t,n.x,r.x,s.x),Ml(t,n.y,r.y,s.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Il.prototype.isQuadraticBezierCurve=!0;class Dl extends vl{constructor(t=new on,e=new on,i=new on){super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new on){const i=e,n=this.v0,r=this.v1,s=this.v2;return i.set(Ml(t,n.x,r.x,s.x),Ml(t,n.y,r.y,s.y),Ml(t,n.z,r.z,s.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Dl.prototype.isQuadraticBezierCurve3=!0;class Bl extends vl{constructor(t=[]){super(),this.type="SplineCurve",this.points=t}getPoint(t,e=new Ci){const i=e,n=this.points,r=(n.length-1)*t,s=Math.floor(r),o=r-s,a=n[0===s?s:s-1],h=n[s],l=n[s>n.length-2?n.length-1:s+1],u=n[s>n.length-3?n.length-1:s+2];return i.set(_l(o,a.x,h.x,l.x,u.x),_l(o,a.y,h.y,l.y,u.y)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push(i.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const i=this.points[e];t.points.push(i.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push((new Ci).fromArray(i))}return this}}Bl.prototype.isSplineCurve=!0;var kl=Object.freeze({__proto__:null,ArcCurve:Al,CatmullRomCurve3:Tl,CubicBezierCurve:Pl,CubicBezierCurve3:Rl,EllipseCurve:yl,LineCurve:Ol,LineCurve3:Ll,QuadraticBezierCurve:Il,QuadraticBezierCurve3:Dl,SplineCurve:Bl});class Fl extends vl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Ol(e,t))}getPoint(t,e){const i=t*this.getLength(),n=this.getCurveLengths();let r=0;for(;r<n.length;){if(n[r]>=i){const t=n[r]-i,s=this.curves[r],o=s.getLength(),a=0===o?0:1-t/o;return s.getPointAt(a,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let i;for(let n=0,r=this.curves;n<r.length;n++){const s=r[n],o=s.isEllipseCurve?2*t:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?t*s.points.length:t,a=s.getPoints(o);for(let t=0;t<a.length;t++){const n=a[t];i&&i.equals(n)||(e.push(n),i=n)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,i=this.curves.length;e<i;e++){const i=this.curves[e];t.curves.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const i=t.curves[e];this.curves.push((new kl[i.type]).fromJSON(i))}return this}}class Nl extends Fl{constructor(t){super(),this.type="Path",this.currentPoint=new Ci,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const i=new Ol(this.currentPoint.clone(),new Ci(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,i,n){const r=new Il(this.currentPoint.clone(),new Ci(t,e),new Ci(i,n));return this.curves.push(r),this.currentPoint.set(i,n),this}bezierCurveTo(t,e,i,n,r,s){const o=new Pl(this.currentPoint.clone(),new Ci(t,e),new Ci(i,n),new Ci(r,s));return this.curves.push(o),this.currentPoint.set(r,s),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),i=new Bl(e);return this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,i,n,r,s){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(t+o,e+a,i,n,r,s),this}absarc(t,e,i,n,r,s){return this.absellipse(t,e,i,i,n,r,s),this}ellipse(t,e,i,n,r,s,o,a){const h=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(t+h,e+l,i,n,r,s,o,a),this}absellipse(t,e,i,n,r,s,o,a){const h=new yl(t,e,i,n,r,s,o,a);if(this.curves.length>0){const t=h.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(h);const l=h.getPoint(1);return this.currentPoint.copy(l),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class zl extends Hr{constructor(t=[new Ci(0,.5),new Ci(.5,0),new Ci(0,-.5)],e=12,i=0,n=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},e=Math.floor(e),n=wi(n,0,2*Math.PI);const r=[],s=[],o=[],a=[],h=[],l=1/e,u=new on,c=new Ci,d=new on,p=new on,f=new on;let m=0,g=0;for(let e=0;e<=t.length-1;e++)switch(e){case 0:m=t[e+1].x-t[e].x,g=t[e+1].y-t[e].y,d.x=1*g,d.y=-m,d.z=0*g,f.copy(d),d.normalize(),a.push(d.x,d.y,d.z);break;case t.length-1:a.push(f.x,f.y,f.z);break;default:m=t[e+1].x-t[e].x,g=t[e+1].y-t[e].y,d.x=1*g,d.y=-m,d.z=0*g,p.copy(d),d.x+=f.x,d.y+=f.y,d.z+=f.z,d.normalize(),a.push(d.x,d.y,d.z),f.copy(p)}for(let r=0;r<=e;r++){const d=i+r*l*n,p=Math.sin(d),f=Math.cos(d);for(let i=0;i<=t.length-1;i++){u.x=t[i].x*p,u.y=t[i].y,u.z=t[i].x*f,s.push(u.x,u.y,u.z),c.x=r/e,c.y=i/(t.length-1),o.push(c.x,c.y);const n=a[3*i+0]*p,l=a[3*i+1],d=a[3*i+0]*f;h.push(n,l,d)}}for(let i=0;i<e;i++)for(let e=0;e<t.length-1;e++){const n=e+i*t.length,s=n,o=n+t.length,a=n+t.length+1,h=n+1;r.push(s,o,h),r.push(a,h,o)}this.setIndex(r),this.setAttribute("position",new Dr(s,3)),this.setAttribute("uv",new Dr(o,2)),this.setAttribute("normal",new Dr(h,3))}static fromJSON(t){return new zl(t.points,t.segments,t.phiStart,t.phiLength)}}class Ul extends zl{constructor(t=1,e=1,i=4,n=8){const r=new Nl;r.absarc(0,-e/2,t,1.5*Math.PI,0),r.absarc(0,e/2,t,0,.5*Math.PI),super(r.getPoints(i),n),this.type="CapsuleGeometry",this.parameters={radius:t,height:e,capSegments:i,radialSegments:n}}static fromJSON(t){return new Ul(t.radius,t.length,t.capSegments,t.radialSegments)}}class Gl extends Hr{constructor(t=1,e=8,i=0,n=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},e=Math.max(3,e);const r=[],s=[],o=[],a=[],h=new on,l=new Ci;s.push(0,0,0),o.push(0,0,1),a.push(.5,.5);for(let r=0,u=3;r<=e;r++,u+=3){const c=i+r/e*n;h.x=t*Math.cos(c),h.y=t*Math.sin(c),s.push(h.x,h.y,h.z),o.push(0,0,1),l.x=(s[u]/t+1)/2,l.y=(s[u+1]/t+1)/2,a.push(l.x,l.y)}for(let t=1;t<=e;t++)r.push(t,t+1,0);this.setIndex(r),this.setAttribute("position",new Dr(s,3)),this.setAttribute("normal",new Dr(o,3)),this.setAttribute("uv",new Dr(a,2))}static fromJSON(t){return new Gl(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class Vl extends Hr{constructor(t=1,e=1,i=1,n=8,r=1,s=!1,o=0,a=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a};const h=this;n=Math.floor(n),r=Math.floor(r);const l=[],u=[],c=[],d=[];let p=0;const f=[],m=i/2;let g=0;function v(i){const r=p,s=new Ci,f=new on;let v=0;const y=!0===i?t:e,A=!0===i?1:-1;for(let t=1;t<=n;t++)u.push(0,m*A,0),c.push(0,A,0),d.push(.5,.5),p++;const x=p;for(let t=0;t<=n;t++){const e=t/n*a+o,i=Math.cos(e),r=Math.sin(e);f.x=y*r,f.y=m*A,f.z=y*i,u.push(f.x,f.y,f.z),c.push(0,A,0),s.x=.5*i+.5,s.y=.5*r*A+.5,d.push(s.x,s.y),p++}for(let t=0;t<n;t++){const e=r+t,n=x+t;!0===i?l.push(n,n+1,e):l.push(n+1,n,e),v+=3}h.addGroup(g,v,!0===i?1:2),g+=v}!function(){const s=new on,v=new on;let y=0;const A=(e-t)/i;for(let h=0;h<=r;h++){const l=[],g=h/r,y=g*(e-t)+t;for(let t=0;t<=n;t++){const e=t/n,r=e*a+o,h=Math.sin(r),f=Math.cos(r);v.x=y*h,v.y=-g*i+m,v.z=y*f,u.push(v.x,v.y,v.z),s.set(h,A,f).normalize(),c.push(s.x,s.y,s.z),d.push(e,1-g),l.push(p++)}f.push(l)}for(let t=0;t<n;t++)for(let e=0;e<r;e++){const i=f[e][t],n=f[e+1][t],r=f[e+1][t+1],s=f[e][t+1];l.push(i,n,s),l.push(n,r,s),y+=6}h.addGroup(g,y,0),g+=y}(),!1===s&&(t>0&&v(!0),e>0&&v(!1)),this.setIndex(l),this.setAttribute("position",new Dr(u,3)),this.setAttribute("normal",new Dr(c,3)),this.setAttribute("uv",new Dr(d,2))}static fromJSON(t){return new Vl(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Hl extends Vl{constructor(t=1,e=1,i=8,n=1,r=!1,s=0,o=2*Math.PI){super(0,t,e,i,n,r,s,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:s,thetaLength:o}}static fromJSON(t){return new Hl(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Wl extends Hr{constructor(t=[],e=[],i=1,n=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n};const r=[],s=[];function o(t,e,i,n){const r=n+1,s=[];for(let n=0;n<=r;n++){s[n]=[];const o=t.clone().lerp(i,n/r),a=e.clone().lerp(i,n/r),h=r-n;for(let t=0;t<=h;t++)s[n][t]=0===t&&n===r?o:o.clone().lerp(a,t/h)}for(let t=0;t<r;t++)for(let e=0;e<2*(r-t)-1;e++){const i=Math.floor(e/2);e%2==0?(a(s[t][i+1]),a(s[t+1][i]),a(s[t][i])):(a(s[t][i+1]),a(s[t+1][i+1]),a(s[t+1][i]))}}function a(t){r.push(t.x,t.y,t.z)}function h(e,i){const n=3*e;i.x=t[n+0],i.y=t[n+1],i.z=t[n+2]}function l(t,e,i,n){n<0&&1===t.x&&(s[e]=t.x-1),0===i.x&&0===i.z&&(s[e]=n/2/Math.PI+.5)}function u(t){return Math.atan2(t.z,-t.x)}!function(t){const i=new on,n=new on,r=new on;for(let s=0;s<e.length;s+=3)h(e[s+0],i),h(e[s+1],n),h(e[s+2],r),o(i,n,r,t)}(n),function(t){const e=new on;for(let i=0;i<r.length;i+=3)e.x=r[i+0],e.y=r[i+1],e.z=r[i+2],e.normalize().multiplyScalar(t),r[i+0]=e.x,r[i+1]=e.y,r[i+2]=e.z}(i),function(){const t=new on;for(let i=0;i<r.length;i+=3){t.x=r[i+0],t.y=r[i+1],t.z=r[i+2];const n=u(t)/2/Math.PI+.5,o=(e=t,Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5);s.push(n,1-o)}var e;(function(){const t=new on,e=new on,i=new on,n=new on,o=new Ci,a=new Ci,h=new Ci;for(let c=0,d=0;c<r.length;c+=9,d+=6){t.set(r[c+0],r[c+1],r[c+2]),e.set(r[c+3],r[c+4],r[c+5]),i.set(r[c+6],r[c+7],r[c+8]),o.set(s[d+0],s[d+1]),a.set(s[d+2],s[d+3]),h.set(s[d+4],s[d+5]),n.copy(t).add(e).add(i).divideScalar(3);const p=u(n);l(o,d+0,t,p),l(a,d+2,e,p),l(h,d+4,i,p)}})(),function(){for(let t=0;t<s.length;t+=6){const e=s[t+0],i=s[t+2],n=s[t+4],r=Math.max(e,i,n),o=Math.min(e,i,n);r>.9&&o<.1&&(e<.2&&(s[t+0]+=1),i<.2&&(s[t+2]+=1),n<.2&&(s[t+4]+=1))}}()}(),this.setAttribute("position",new Dr(r,3)),this.setAttribute("normal",new Dr(r.slice(),3)),this.setAttribute("uv",new Dr(s,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(t){return new Wl(t.vertices,t.indices,t.radius,t.details)}}class jl extends Wl{constructor(t=1,e=0){const i=(1+Math.sqrt(5))/2,n=1/i;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new jl(t.radius,t.detail)}}const Yl=new on,Xl=new on,ql=new on,Jl=new Ar;class Ql extends Hr{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},null!==t){const i=4,n=Math.pow(10,i),r=Math.cos(yi*e),s=t.getIndex(),o=t.getAttribute("position"),a=s?s.count:o.count,h=[0,0,0],l=["a","b","c"],u=new Array(3),c={},d=[];for(let t=0;t<a;t+=3){s?(h[0]=s.getX(t),h[1]=s.getX(t+1),h[2]=s.getX(t+2)):(h[0]=t,h[1]=t+1,h[2]=t+2);const{a:e,b:i,c:a}=Jl;if(e.fromBufferAttribute(o,h[0]),i.fromBufferAttribute(o,h[1]),a.fromBufferAttribute(o,h[2]),Jl.getNormal(ql),u[0]=`${Math.round(e.x*n)},${Math.round(e.y*n)},${Math.round(e.z*n)}`,u[1]=`${Math.round(i.x*n)},${Math.round(i.y*n)},${Math.round(i.z*n)}`,u[2]=`${Math.round(a.x*n)},${Math.round(a.y*n)},${Math.round(a.z*n)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let t=0;t<3;t++){const e=(t+1)%3,i=u[t],n=u[e],s=Jl[l[t]],o=Jl[l[e]],a=`${i}_${n}`,p=`${n}_${i}`;p in c&&c[p]?(ql.dot(c[p].normal)<=r&&(d.push(s.x,s.y,s.z),d.push(o.x,o.y,o.z)),c[p]=null):a in c||(c[a]={index0:h[t],index1:h[e],normal:ql.clone()})}}for(const t in c)if(c[t]){const{index0:e,index1:i}=c[t];Yl.fromBufferAttribute(o,e),Xl.fromBufferAttribute(o,i),d.push(Yl.x,Yl.y,Yl.z),d.push(Xl.x,Xl.y,Xl.z)}this.setAttribute("position",new Dr(d,3))}}}class Kl extends Nl{constructor(t){super(t),this.uuid=xi(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const i=t.holes[e];this.holes.push(i.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,i=this.holes.length;e<i;e++){const i=this.holes[e];t.holes.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const i=t.holes[e];this.holes.push((new Nl).fromJSON(i))}return this}}const Zl=function(t,e,i=2){const n=e&&e.length,r=n?e[0]*i:t.length;let s=$l(t,0,r,i,!0);const o=[];if(!s||s.next===s.prev)return o;let a,h,l,u,c,d,p;if(n&&(s=function(t,e,i,n){const r=[];let s,o,a,h,l;for(s=0,o=e.length;s<o;s++)a=e[s]*n,h=s<o-1?e[s+1]*n:t.length,l=$l(t,a,h,n,!1),l===l.next&&(l.steiner=!0),r.push(uu(l));for(r.sort(ou),s=0;s<r.length;s++)au(r[s],i),i=tu(i,i.next);return i}(t,e,s,i)),t.length>80*i){a=l=t[0],h=u=t[1];for(let e=i;e<r;e+=i)c=t[e],d=t[e+1],c<a&&(a=c),d<h&&(h=d),c>l&&(l=c),d>u&&(u=d);p=Math.max(l-a,u-h),p=0!==p?1/p:0}return eu(s,o,i,a,h,p),o};function $l(t,e,i,n,r){let s,o;if(r===function(t,e,i,n){let r=0;for(let s=e,o=i-n;s<i;s+=n)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}(t,e,i,n)>0)for(s=e;s<i;s+=n)o=xu(s,t[s],t[s+1],o);else for(s=i-n;s>=e;s-=n)o=xu(s,t[s],t[s+1],o);return o&&fu(o,o.next)&&(wu(o),o=o.next),o}function tu(t,e){if(!t)return t;e||(e=t);let i,n=t;do{if(i=!1,n.steiner||!fu(n,n.next)&&0!==pu(n.prev,n,n.next))n=n.next;else{if(wu(n),n=e=n.prev,n===n.next)break;i=!0}}while(i||n!==e);return e}function eu(t,e,i,n,r,s,o){if(!t)return;!o&&s&&function(t,e,i,n){let r=t;do{null===r.z&&(r.z=lu(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,i,n,r,s,o,a,h,l=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,n=i,a=0,e=0;e<l&&(a++,n=n.nextZ,n);e++);for(h=l;a>0||h>0&&n;)0!==a&&(0===h||!n||i.z<=n.z)?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,h--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;i=n}s.nextZ=null,l*=2}while(o>1)}(r)}(t,n,r,s);let a,h,l=t;for(;t.prev!==t.next;)if(a=t.prev,h=t.next,s?nu(t,n,r,s):iu(t))e.push(a.i/i),e.push(t.i/i),e.push(h.i/i),wu(t),t=h.next,l=h.next;else if((t=h)===l){o?1===o?eu(t=ru(tu(t),e,i),e,i,n,r,s,2):2===o&&su(t,e,i,n,r,s):eu(tu(t),e,i,n,r,s,1);break}}function iu(t){const e=t.prev,i=t,n=t.next;if(pu(e,i,n)>=0)return!1;let r=t.next.next;for(;r!==t.prev;){if(cu(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&pu(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function nu(t,e,i,n){const r=t.prev,s=t,o=t.next;if(pu(r,s,o)>=0)return!1;const a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,h=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,l=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,c=lu(a,h,e,i,n),d=lu(l,u,e,i,n);let p=t.prevZ,f=t.nextZ;for(;p&&p.z>=c&&f&&f.z<=d;){if(p!==t.prev&&p!==t.next&&cu(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&pu(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==t.prev&&f!==t.next&&cu(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&pu(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&cu(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&pu(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==t.prev&&f!==t.next&&cu(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&pu(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function ru(t,e,i){let n=t;do{const r=n.prev,s=n.next.next;!fu(r,s)&&mu(r,n,n.next,s)&&yu(r,s)&&yu(s,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(s.i/i),wu(n),wu(n.next),n=t=s),n=n.next}while(n!==t);return tu(n)}function su(t,e,i,n,r,s){let o=t;do{let t=o.next.next;for(;t!==o.prev;){if(o.i!==t.i&&du(o,t)){let a=Au(o,t);return o=tu(o,o.next),a=tu(a,a.next),eu(o,e,i,n,r,s),void eu(a,e,i,n,r,s)}t=t.next}o=o.next}while(o!==t)}function ou(t,e){return t.x-e.x}function au(t,e){if(e=function(t,e){let i=e;const n=t.x,r=t.y;let s,o=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){const t=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(t<=n&&t>o){if(o=t,t===n){if(r===i.y)return i;if(r===i.next.y)return i.next}s=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!s)return null;if(n===o)return s;const a=s,h=s.x,l=s.y;let u,c=1/0;i=s;do{n>=i.x&&i.x>=h&&n!==i.x&&cu(r<l?n:o,r,h,l,r<l?o:n,r,i.x,i.y)&&(u=Math.abs(r-i.y)/(n-i.x),yu(i,t)&&(u<c||u===c&&(i.x>s.x||i.x===s.x&&hu(s,i)))&&(s=i,c=u)),i=i.next}while(i!==a);return s}(t,e)){const i=Au(e,t);tu(e,e.next),tu(i,i.next)}}function hu(t,e){return pu(t.prev,t,e.prev)<0&&pu(e.next,t,t.next)<0}function lu(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function uu(t){let e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function cu(t,e,i,n,r,s,o,a){return(r-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(n-a)-(i-o)*(e-a)>=0&&(i-o)*(s-a)-(r-o)*(n-a)>=0}function du(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&mu(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(yu(t,e)&&yu(e,t)&&function(t,e){let i=t,n=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(pu(t.prev,t,e.prev)||pu(t,e.prev,e))||fu(t,e)&&pu(t.prev,t,t.next)>0&&pu(e.prev,e,e.next)>0)}function pu(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function fu(t,e){return t.x===e.x&&t.y===e.y}function mu(t,e,i,n){const r=vu(pu(t,e,i)),s=vu(pu(t,e,n)),o=vu(pu(i,n,t)),a=vu(pu(i,n,e));return r!==s&&o!==a||(!(0!==r||!gu(t,i,e))||(!(0!==s||!gu(t,n,e))||(!(0!==o||!gu(i,t,n))||!(0!==a||!gu(i,e,n)))))}function gu(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function vu(t){return t>0?1:t<0?-1:0}function yu(t,e){return pu(t.prev,t,t.next)<0?pu(t,e,t.next)>=0&&pu(t,t.prev,e)>=0:pu(t,e,t.prev)<0||pu(t,t.next,e)<0}function Au(t,e){const i=new bu(t.i,t.x,t.y),n=new bu(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function xu(t,e,i,n){const r=new bu(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function wu(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function bu(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Su{static area(t){const e=t.length;let i=0;for(let n=e-1,r=0;r<e;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*i}static isClockWise(t){return Su.area(t)<0}static triangulateShape(t,e){const i=[],n=[],r=[];Eu(t),Tu(i,t);let s=t.length;e.forEach(Eu);for(let t=0;t<e.length;t++)n.push(s),s+=e[t].length,Tu(i,e[t]);const o=Zl(i,n);for(let t=0;t<o.length;t+=3)r.push(o.slice(t,t+3));return r}}function Eu(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Tu(t,e){for(let i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}class _u extends Hr{constructor(t=new Kl([new Ci(.5,.5),new Ci(-.5,.5),new Ci(-.5,-.5),new Ci(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const i=this,n=[],r=[];for(let e=0,i=t.length;e<i;e++){s(t[e])}function s(t){const s=[],o=void 0!==e.curveSegments?e.curveSegments:12,a=void 0!==e.steps?e.steps:1;let h=void 0!==e.depth?e.depth:1,l=void 0===e.bevelEnabled||e.bevelEnabled,u=void 0!==e.bevelThickness?e.bevelThickness:.2,c=void 0!==e.bevelSize?e.bevelSize:u-.1,d=void 0!==e.bevelOffset?e.bevelOffset:0,p=void 0!==e.bevelSegments?e.bevelSegments:3;const f=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:Mu;void 0!==e.amount&&(h=e.amount);let g,v,y,A,x,w=!1;f&&(g=f.getSpacedPoints(a),w=!0,l=!1,v=f.computeFrenetFrames(a,!1),y=new on,A=new on,x=new on),l||(p=0,u=0,c=0,d=0);const b=t.extractPoints(o);let S=b.shape;const E=b.holes;if(!Su.isClockWise(S)){S=S.reverse();for(let t=0,e=E.length;t<e;t++){const e=E[t];Su.isClockWise(e)&&(E[t]=e.reverse())}}const T=Su.triangulateShape(S,E),_=S;for(let t=0,e=E.length;t<e;t++){const e=E[t];S=S.concat(e)}function M(t,e,i){return e.clone().multiplyScalar(i).add(t)}const C=S.length,P=T.length;function R(t,e,i){let n,r,s;const o=t.x-e.x,a=t.y-e.y,h=i.x-t.x,l=i.y-t.y,u=o*o+a*a,c=o*l-a*h;if(Math.abs(c)>Number.EPSILON){const c=Math.sqrt(u),d=Math.sqrt(h*h+l*l),p=e.x-a/c,f=e.y+o/c,m=((i.x-l/d-p)*l-(i.y+h/d-f)*h)/(o*l-a*h);n=p+o*m-t.x,r=f+a*m-t.y;const g=n*n+r*r;if(g<=2)return new Ci(n,r);s=Math.sqrt(g/2)}else{let t=!1;o>Number.EPSILON?h>Number.EPSILON&&(t=!0):o<-Number.EPSILON?h<-Number.EPSILON&&(t=!0):Math.sign(a)===Math.sign(l)&&(t=!0),t?(n=-a,r=o,s=Math.sqrt(u)):(n=o,r=a,s=Math.sqrt(u/2))}return new Ci(n/s,r/s)}const O=[];for(let t=0,e=_.length,i=e-1,n=t+1;t<e;t++,i++,n++)i===e&&(i=0),n===e&&(n=0),O[t]=R(_[t],_[i],_[n]);const L=[];let I,D=O.concat();for(let t=0,e=E.length;t<e;t++){const e=E[t];I=[];for(let t=0,i=e.length,n=i-1,r=t+1;t<i;t++,n++,r++)n===i&&(n=0),r===i&&(r=0),I[t]=R(e[t],e[n],e[r]);L.push(I),D=D.concat(I)}for(let t=0;t<p;t++){const e=t/p,i=u*Math.cos(e*Math.PI/2),n=c*Math.sin(e*Math.PI/2)+d;for(let t=0,e=_.length;t<e;t++){const e=M(_[t],O[t],n);F(e.x,e.y,-i)}for(let t=0,e=E.length;t<e;t++){const e=E[t];I=L[t];for(let t=0,r=e.length;t<r;t++){const r=M(e[t],I[t],n);F(r.x,r.y,-i)}}}const B=c+d;for(let t=0;t<C;t++){const e=l?M(S[t],D[t],B):S[t];w?(A.copy(v.normals[0]).multiplyScalar(e.x),y.copy(v.binormals[0]).multiplyScalar(e.y),x.copy(g[0]).add(A).add(y),F(x.x,x.y,x.z)):F(e.x,e.y,0)}for(let t=1;t<=a;t++)for(let e=0;e<C;e++){const i=l?M(S[e],D[e],B):S[e];w?(A.copy(v.normals[t]).multiplyScalar(i.x),y.copy(v.binormals[t]).multiplyScalar(i.y),x.copy(g[t]).add(A).add(y),F(x.x,x.y,x.z)):F(i.x,i.y,h/a*t)}for(let t=p-1;t>=0;t--){const e=t/p,i=u*Math.cos(e*Math.PI/2),n=c*Math.sin(e*Math.PI/2)+d;for(let t=0,e=_.length;t<e;t++){const e=M(_[t],O[t],n);F(e.x,e.y,h+i)}for(let t=0,e=E.length;t<e;t++){const e=E[t];I=L[t];for(let t=0,r=e.length;t<r;t++){const r=M(e[t],I[t],n);w?F(r.x,r.y+g[a-1].y,g[a-1].x+i):F(r.x,r.y,h+i)}}}function k(t,e){let i=t.length;for(;--i>=0;){const n=i;let r=i-1;r<0&&(r=t.length-1);for(let t=0,i=a+2*p;t<i;t++){const i=C*t,s=C*(t+1);z(e+n+i,e+r+i,e+r+s,e+n+s)}}}function F(t,e,i){s.push(t),s.push(e),s.push(i)}function N(t,e,r){U(t),U(e),U(r);const s=n.length/3,o=m.generateTopUV(i,n,s-3,s-2,s-1);G(o[0]),G(o[1]),G(o[2])}function z(t,e,r,s){U(t),U(e),U(s),U(e),U(r),U(s);const o=n.length/3,a=m.generateSideWallUV(i,n,o-6,o-3,o-2,o-1);G(a[0]),G(a[1]),G(a[3]),G(a[1]),G(a[2]),G(a[3])}function U(t){n.push(s[3*t+0]),n.push(s[3*t+1]),n.push(s[3*t+2])}function G(t){r.push(t.x),r.push(t.y)}!function(){const t=n.length/3;if(l){let t=0,e=C*t;for(let t=0;t<P;t++){const i=T[t];N(i[2]+e,i[1]+e,i[0]+e)}t=a+2*p,e=C*t;for(let t=0;t<P;t++){const i=T[t];N(i[0]+e,i[1]+e,i[2]+e)}}else{for(let t=0;t<P;t++){const e=T[t];N(e[2],e[1],e[0])}for(let t=0;t<P;t++){const e=T[t];N(e[0]+C*a,e[1]+C*a,e[2]+C*a)}}i.addGroup(t,n.length/3-t,0)}(),function(){const t=n.length/3;let e=0;k(_,e),e+=_.length;for(let t=0,i=E.length;t<i;t++){const i=E[t];k(i,e),e+=i.length}i.addGroup(t,n.length/3-t,1)}()}this.setAttribute("position",new Dr(n,3)),this.setAttribute("uv",new Dr(r,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function(t,e,i){if(i.shapes=[],Array.isArray(t))for(let e=0,n=t.length;e<n;e++){const n=t[e];i.shapes.push(n.uuid)}else i.shapes.push(t.uuid);void 0!==e.extrudePath&&(i.options.extrudePath=e.extrudePath.toJSON());return i}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const i=[];for(let n=0,r=t.shapes.length;n<r;n++){const r=e[t.shapes[n]];i.push(r)}const n=t.options.extrudePath;return void 0!==n&&(t.options.extrudePath=(new kl[n.type]).fromJSON(n)),new _u(i,t.options)}}const Mu={generateTopUV:function(t,e,i,n,r){const s=e[3*i],o=e[3*i+1],a=e[3*n],h=e[3*n+1],l=e[3*r],u=e[3*r+1];return[new Ci(s,o),new Ci(a,h),new Ci(l,u)]},generateSideWallUV:function(t,e,i,n,r,s){const o=e[3*i],a=e[3*i+1],h=e[3*i+2],l=e[3*n],u=e[3*n+1],c=e[3*n+2],d=e[3*r],p=e[3*r+1],f=e[3*r+2],m=e[3*s],g=e[3*s+1],v=e[3*s+2];return Math.abs(a-u)<Math.abs(o-l)?[new Ci(o,1-h),new Ci(l,1-c),new Ci(d,1-f),new Ci(m,1-v)]:[new Ci(a,1-h),new Ci(u,1-c),new Ci(p,1-f),new Ci(g,1-v)]}};class Cu extends Wl{constructor(t=1,e=0){const i=(1+Math.sqrt(5))/2;super([-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Cu(t.radius,t.detail)}}class Pu extends Wl{constructor(t=1,e=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Pu(t.radius,t.detail)}}class Ru extends Hr{constructor(t=.5,e=1,i=8,n=1,r=0,s=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:s},i=Math.max(3,i);const o=[],a=[],h=[],l=[];let u=t;const c=(e-t)/(n=Math.max(1,n)),d=new on,p=new Ci;for(let t=0;t<=n;t++){for(let t=0;t<=i;t++){const n=r+t/i*s;d.x=u*Math.cos(n),d.y=u*Math.sin(n),a.push(d.x,d.y,d.z),h.push(0,0,1),p.x=(d.x/e+1)/2,p.y=(d.y/e+1)/2,l.push(p.x,p.y)}u+=c}for(let t=0;t<n;t++){const e=t*(i+1);for(let t=0;t<i;t++){const n=t+e,r=n,s=n+i+1,a=n+i+2,h=n+1;o.push(r,s,h),o.push(s,a,h)}}this.setIndex(o),this.setAttribute("position",new Dr(a,3)),this.setAttribute("normal",new Dr(h,3)),this.setAttribute("uv",new Dr(l,2))}static fromJSON(t){return new Ru(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class Ou extends Hr{constructor(t=new Kl([new Ci(0,.5),new Ci(-.5,-.5),new Ci(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const i=[],n=[],r=[],s=[];let o=0,a=0;if(!1===Array.isArray(t))h(t);else for(let e=0;e<t.length;e++)h(t[e]),this.addGroup(o,a,e),o+=a,a=0;function h(t){const o=n.length/3,h=t.extractPoints(e);let l=h.shape;const u=h.holes;!1===Su.isClockWise(l)&&(l=l.reverse());for(let t=0,e=u.length;t<e;t++){const e=u[t];!0===Su.isClockWise(e)&&(u[t]=e.reverse())}const c=Su.triangulateShape(l,u);for(let t=0,e=u.length;t<e;t++){const e=u[t];l=l.concat(e)}for(let t=0,e=l.length;t<e;t++){const e=l[t];n.push(e.x,e.y,0),r.push(0,0,1),s.push(e.x,e.y)}for(let t=0,e=c.length;t<e;t++){const e=c[t],n=e[0]+o,r=e[1]+o,s=e[2]+o;i.push(n,r,s),a+=3}}this.setIndex(i),this.setAttribute("position",new Dr(n,3)),this.setAttribute("normal",new Dr(r,3)),this.setAttribute("uv",new Dr(s,2))}toJSON(){const t=super.toJSON();return function(t,e){if(e.shapes=[],Array.isArray(t))for(let i=0,n=t.length;i<n;i++){const n=t[i];e.shapes.push(n.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}static fromJSON(t,e){const i=[];for(let n=0,r=t.shapes.length;n<r;n++){const r=e[t.shapes[n]];i.push(r)}return new Ou(i,t.curveSegments)}}class Lu extends Hr{constructor(t=1,e=32,i=16,n=0,r=2*Math.PI,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:s,thetaLength:o},e=Math.max(3,Math.floor(e)),i=Math.max(2,Math.floor(i));const a=Math.min(s+o,Math.PI);let h=0;const l=[],u=new on,c=new on,d=[],p=[],f=[],m=[];for(let d=0;d<=i;d++){const g=[],v=d/i;let y=0;0==d&&0==s?y=.5/e:d==i&&a==Math.PI&&(y=-.5/e);for(let i=0;i<=e;i++){const a=i/e;u.x=-t*Math.cos(n+a*r)*Math.sin(s+v*o),u.y=t*Math.cos(s+v*o),u.z=t*Math.sin(n+a*r)*Math.sin(s+v*o),p.push(u.x,u.y,u.z),c.copy(u).normalize(),f.push(c.x,c.y,c.z),m.push(a+y,1-v),g.push(h++)}l.push(g)}for(let t=0;t<i;t++)for(let n=0;n<e;n++){const e=l[t][n+1],r=l[t][n],o=l[t+1][n],h=l[t+1][n+1];(0!==t||s>0)&&d.push(e,r,h),(t!==i-1||a<Math.PI)&&d.push(r,o,h)}this.setIndex(d),this.setAttribute("position",new Dr(p,3)),this.setAttribute("normal",new Dr(f,3)),this.setAttribute("uv",new Dr(m,2))}static fromJSON(t){return new Lu(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Iu extends Wl{constructor(t=1,e=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Iu(t.radius,t.detail)}}class Du extends Hr{constructor(t=1,e=.4,i=8,n=6,r=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},i=Math.floor(i),n=Math.floor(n);const s=[],o=[],a=[],h=[],l=new on,u=new on,c=new on;for(let s=0;s<=i;s++)for(let d=0;d<=n;d++){const p=d/n*r,f=s/i*Math.PI*2;u.x=(t+e*Math.cos(f))*Math.cos(p),u.y=(t+e*Math.cos(f))*Math.sin(p),u.z=e*Math.sin(f),o.push(u.x,u.y,u.z),l.x=t*Math.cos(p),l.y=t*Math.sin(p),c.subVectors(u,l).normalize(),a.push(c.x,c.y,c.z),h.push(d/n),h.push(s/i)}for(let t=1;t<=i;t++)for(let e=1;e<=n;e++){const i=(n+1)*t+e-1,r=(n+1)*(t-1)+e-1,o=(n+1)*(t-1)+e,a=(n+1)*t+e;s.push(i,r,a),s.push(r,o,a)}this.setIndex(s),this.setAttribute("position",new Dr(o,3)),this.setAttribute("normal",new Dr(a,3)),this.setAttribute("uv",new Dr(h,2))}static fromJSON(t){return new Du(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class Bu extends Hr{constructor(t=1,e=.4,i=64,n=8,r=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:r,q:s},i=Math.floor(i),n=Math.floor(n);const o=[],a=[],h=[],l=[],u=new on,c=new on,d=new on,p=new on,f=new on,m=new on,g=new on;for(let o=0;o<=i;++o){const y=o/i*r*Math.PI*2;v(y,r,s,t,d),v(y+.01,r,s,t,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let t=0;t<=n;++t){const r=t/n*Math.PI*2,s=-e*Math.cos(r),p=e*Math.sin(r);u.x=d.x+(s*g.x+p*f.x),u.y=d.y+(s*g.y+p*f.y),u.z=d.z+(s*g.z+p*f.z),a.push(u.x,u.y,u.z),c.subVectors(u,d).normalize(),h.push(c.x,c.y,c.z),l.push(o/i),l.push(t/n)}}for(let t=1;t<=i;t++)for(let e=1;e<=n;e++){const i=(n+1)*(t-1)+(e-1),r=(n+1)*t+(e-1),s=(n+1)*t+e,a=(n+1)*(t-1)+e;o.push(i,r,a),o.push(r,s,a)}function v(t,e,i,n,r){const s=Math.cos(t),o=Math.sin(t),a=i/e*t,h=Math.cos(a);r.x=n*(2+h)*.5*s,r.y=n*(2+h)*o*.5,r.z=n*Math.sin(a)*.5}this.setIndex(o),this.setAttribute("position",new Dr(a,3)),this.setAttribute("normal",new Dr(h,3)),this.setAttribute("uv",new Dr(l,2))}static fromJSON(t){return new Bu(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class ku extends Hr{constructor(t=new Dl(new on(-1,-1,0),new on(-1,1,0),new on(1,1,0)),e=64,i=1,n=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:r};const s=t.computeFrenetFrames(e,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new on,a=new on,h=new Ci;let l=new on;const u=[],c=[],d=[],p=[];function f(r){l=t.getPointAt(r/e,l);const h=s.normals[r],d=s.binormals[r];for(let t=0;t<=n;t++){const e=t/n*Math.PI*2,r=Math.sin(e),s=-Math.cos(e);a.x=s*h.x+r*d.x,a.y=s*h.y+r*d.y,a.z=s*h.z+r*d.z,a.normalize(),c.push(a.x,a.y,a.z),o.x=l.x+i*a.x,o.y=l.y+i*a.y,o.z=l.z+i*a.z,u.push(o.x,o.y,o.z)}}!function(){for(let t=0;t<e;t++)f(t);f(!1===r?e:0),function(){for(let t=0;t<=e;t++)for(let i=0;i<=n;i++)h.x=t/e,h.y=i/n,d.push(h.x,h.y)}(),function(){for(let t=1;t<=e;t++)for(let e=1;e<=n;e++){const i=(n+1)*(t-1)+(e-1),r=(n+1)*t+(e-1),s=(n+1)*t+e,o=(n+1)*(t-1)+e;p.push(i,r,o),p.push(r,s,o)}}()}(),this.setIndex(p),this.setAttribute("position",new Dr(u,3)),this.setAttribute("normal",new Dr(c,3)),this.setAttribute("uv",new Dr(d,2))}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new ku((new kl[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class Fu extends Hr{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},null!==t){const e=[],i=new Set,n=new on,r=new on;if(null!==t.index){const s=t.attributes.position,o=t.index;let a=t.groups;0===a.length&&(a=[{start:0,count:o.count,materialIndex:0}]);for(let t=0,h=a.length;t<h;++t){const h=a[t],l=h.start;for(let t=l,a=l+h.count;t<a;t+=3)for(let a=0;a<3;a++){const h=o.getX(t+a),l=o.getX(t+(a+1)%3);n.fromBufferAttribute(s,h),r.fromBufferAttribute(s,l),!0===Nu(n,r,i)&&(e.push(n.x,n.y,n.z),e.push(r.x,r.y,r.z))}}}else{const s=t.attributes.position;for(let t=0,o=s.count/3;t<o;t++)for(let o=0;o<3;o++){const a=3*t+o,h=3*t+(o+1)%3;n.fromBufferAttribute(s,a),r.fromBufferAttribute(s,h),!0===Nu(n,r,i)&&(e.push(n.x,n.y,n.z),e.push(r.x,r.y,r.z))}}this.setAttribute("position",new Dr(e,3))}}}function Nu(t,e,i){const n=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return!0!==i.has(n)&&!0!==i.has(r)&&(i.add(n),i.add(r),!0)}var zu=Object.freeze({__proto__:null,BoxGeometry:ls,BoxBufferGeometry:ls,CapsuleGeometry:Ul,CapsuleBufferGeometry:Ul,CircleGeometry:Gl,CircleBufferGeometry:Gl,ConeGeometry:Hl,ConeBufferGeometry:Hl,CylinderGeometry:Vl,CylinderBufferGeometry:Vl,DodecahedronGeometry:jl,DodecahedronBufferGeometry:jl,EdgesGeometry:Ql,ExtrudeGeometry:_u,ExtrudeBufferGeometry:_u,IcosahedronGeometry:Cu,IcosahedronBufferGeometry:Cu,LatheGeometry:zl,LatheBufferGeometry:zl,OctahedronGeometry:Pu,OctahedronBufferGeometry:Pu,PlaneGeometry:Cs,PlaneBufferGeometry:Cs,PolyhedronGeometry:Wl,PolyhedronBufferGeometry:Wl,RingGeometry:Ru,RingBufferGeometry:Ru,ShapeGeometry:Ou,ShapeBufferGeometry:Ou,SphereGeometry:Lu,SphereBufferGeometry:Lu,TetrahedronGeometry:Iu,TetrahedronBufferGeometry:Iu,TorusGeometry:Du,TorusBufferGeometry:Du,TorusKnotGeometry:Bu,TorusKnotBufferGeometry:Bu,TubeGeometry:ku,TubeBufferGeometry:ku,WireframeGeometry:Fu});class Uu extends wr{constructor(t){super(),this.type="ShadowMaterial",this.color=new Wi(0),this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this}}Uu.prototype.isShadowMaterial=!0;class Gu extends ps{constructor(t){super(t),this.type="RawShaderMaterial"}}Gu.prototype.isRawShaderMaterial=!0;class Vu extends wr{constructor(t){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Wi(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Wi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ke,this.normalScale=new Ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}Vu.prototype.isMeshStandardMaterial=!0;class Hu extends Vu{constructor(t){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ci(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return wi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new Wi(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Wi(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Wi(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}Hu.prototype.isMeshPhysicalMaterial=!0;class Wu extends wr{constructor(t){super(),this.type="MeshPhongMaterial",this.color=new Wi(16777215),this.specular=new Wi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Wi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ke,this.normalScale=new Ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}Wu.prototype.isMeshPhongMaterial=!0;class ju extends wr{constructor(t){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Wi(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Wi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ke,this.normalScale=new Ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}ju.prototype.isMeshToonMaterial=!0;class Yu extends wr{constructor(t){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ke,this.normalScale=new Ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}Yu.prototype.isMeshNormalMaterial=!0;class Xu extends wr{constructor(t){super(),this.type="MeshLambertMaterial",this.color=new Wi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Wi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}Xu.prototype.isMeshLambertMaterial=!0;class qu extends wr{constructor(t){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Wi(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ke,this.normalScale=new Ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this}}qu.prototype.isMeshMatcapMaterial=!0;class Ju extends Jh{constructor(t){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}Ju.prototype.isLineDashedMaterial=!0;const Qu={ShadowMaterial:Uu,SpriteMaterial:ph,RawShaderMaterial:Gu,ShaderMaterial:ps,PointsMaterial:ol,MeshPhysicalMaterial:Hu,MeshStandardMaterial:Vu,MeshPhongMaterial:Wu,MeshToonMaterial:ju,MeshNormalMaterial:Yu,MeshLambertMaterial:Xu,MeshDepthMaterial:Ya,MeshDistanceMaterial:Xa,MeshBasicMaterial:br,MeshMatcapMaterial:qu,LineDashedMaterial:Ju,LineBasicMaterial:Jh,Material:wr};wr.fromType=function(t){return new Qu[t]};const Ku={arraySlice:function(t,e,i){return Ku.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==i?i:t.length)):t.slice(e,i)},convertArray:function(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){const e=t.length,i=new Array(e);for(let t=0;t!==e;++t)i[t]=t;return i.sort((function(e,i){return t[e]-t[i]})),i},sortedArray:function(t,e,i){const n=t.length,r=new t.constructor(n);for(let s=0,o=0;o!==n;++s){const n=i[s]*e;for(let i=0;i!==e;++i)r[o++]=t[n+i]}return r},flattenJSON:function(t,e,i,n){let r=1,s=t[0];for(;void 0!==s&&void 0===s[n];)s=t[r++];if(void 0===s)return;let o=s[n];if(void 0!==o)if(Array.isArray(o))do{o=s[n],void 0!==o&&(e.push(s.time),i.push.apply(i,o)),s=t[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[n],void 0!==o&&(e.push(s.time),o.toArray(i,i.length)),s=t[r++]}while(void 0!==s);else do{o=s[n],void 0!==o&&(e.push(s.time),i.push(o)),s=t[r++]}while(void 0!==s)},subclip:function(t,e,i,n,r=30){const s=t.clone();s.name=e;const o=[];for(let t=0;t<s.tracks.length;++t){const e=s.tracks[t],a=e.getValueSize(),h=[],l=[];for(let t=0;t<e.times.length;++t){const s=e.times[t]*r;if(!(s<i||s>=n)){h.push(e.times[t]);for(let i=0;i<a;++i)l.push(e.values[t*a+i])}}0!==h.length&&(e.times=Ku.convertArray(h,e.times.constructor),e.values=Ku.convertArray(l,e.values.constructor),o.push(e))}s.tracks=o;let a=1/0;for(let t=0;t<s.tracks.length;++t)a>s.tracks[t].times[0]&&(a=s.tracks[t].times[0]);for(let t=0;t<s.tracks.length;++t)s.tracks[t].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(t,e=0,i=t,n=30){n<=0&&(n=30);const r=i.tracks.length,s=e/n;for(let e=0;e<r;++e){const n=i.tracks[e],r=n.ValueTypeName;if("bool"===r||"string"===r)continue;const o=t.tracks.find((function(t){return t.name===n.name&&t.ValueTypeName===r}));if(void 0===o)continue;let a=0;const h=n.getValueSize();n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=h/3);let l=0;const u=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=u/3);const c=n.times.length-1;let d;if(s<=n.times[0]){const t=a,e=h-a;d=Ku.arraySlice(n.values,t,e)}else if(s>=n.times[c]){const t=c*h+a,e=t+h-a;d=Ku.arraySlice(n.values,t,e)}else{const t=n.createInterpolant(),e=a,i=h-a;t.evaluate(s),d=Ku.arraySlice(t.resultBuffer,e,i)}if("quaternion"===r){(new sn).fromArray(d).normalize().conjugate().toArray(d)}const p=o.times.length;for(let t=0;t<p;++t){const e=t*u+l;if("quaternion"===r)sn.multiplyQuaternionsFlat(o.values,e,d,0,o.values,e);else{const t=u-2*l;for(let i=0;i<t;++i)o.values[e+i]-=d[i]}}}return t.blendMode=Ce,t}};class Zu{constructor(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let i=this._cachedIndex,n=e[i],r=e[i-1];t:{e:{let s;i:{n:if(!(t<n)){for(let s=i+2;;){if(void 0===n){if(t<r)break n;return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,t,r)}if(i===s)break;if(r=n,n=e[++i],t<n)break e}s=e.length;break i}if(t>=r)break t;{const o=e[1];t<o&&(i=2,r=o);for(let s=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(i===s)break;if(n=r,r=e[--i-1],t>=r)break e}s=i,i=0}}for(;i<s;){const n=i+s>>>1;t<e[n]?s=n:i=n+1}if(n=e[i],r=e[i-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(void 0===n)return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,r,t)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,t,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=t*n;for(let t=0;t!==n;++t)e[t]=i[r+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Zu.prototype.beforeStart_=Zu.prototype.copySampleValue_,Zu.prototype.afterEnd_=Zu.prototype.copySampleValue_;class $u extends Zu{constructor(t,e,i,n){super(t,e,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ee,endingEnd:Ee}}intervalChanged_(t,e,i){const n=this.parameterPositions;let r=t-2,s=t+1,o=n[r],a=n[s];if(void 0===o)switch(this.getSettings_().endingStart){case Te:r=t,o=2*e-i;break;case _e:r=n.length-2,o=e+n[r]-n[r+1];break;default:r=t,o=i}if(void 0===a)switch(this.getSettings_().endingEnd){case Te:s=t,a=2*i-e;break;case _e:s=1,a=i+n[1]-n[0];break;default:s=t-1,a=e}const h=.5*(i-e),l=this.valueSize;this._weightPrev=h/(e-o),this._weightNext=h/(a-i),this._offsetPrev=r*l,this._offsetNext=s*l}interpolate_(t,e,i,n){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,h=a-o,l=this._offsetPrev,u=this._offsetNext,c=this._weightPrev,d=this._weightNext,p=(i-e)/(n-e),f=p*p,m=f*p,g=-c*m+2*c*f-c*p,v=(1+c)*m+(-1.5-2*c)*f+(-.5+c)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,A=d*m-d*f;for(let t=0;t!==o;++t)r[t]=g*s[l+t]+v*s[h+t]+y*s[a+t]+A*s[u+t];return r}}class tc extends Zu{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t,e,i,n){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,h=a-o,l=(i-e)/(n-e),u=1-l;for(let t=0;t!==o;++t)r[t]=s[h+t]*u+s[a+t]*l;return r}}class ec extends Zu{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t){return this.copySampleValue_(t-1)}}class ic{constructor(t,e,i,n){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Ku.convertArray(e,this.TimeBufferType),this.values=Ku.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:Ku.convertArray(t.times,Array),values:Ku.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(i.interpolation=e)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new ec(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new tc(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new $u(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case we:e=this.InterpolantFactoryMethodDiscrete;break;case be:e=this.InterpolantFactoryMethodLinear;break;case Se:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return we;case this.InterpolantFactoryMethodLinear:return be;case this.InterpolantFactoryMethodSmooth:return Se}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]*=t}return this}trim(t,e){const i=this.times,n=i.length;let r=0,s=n-1;for(;r!==n&&i[r]<t;)++r;for(;-1!==s&&i[s]>e;)--s;if(++s,0!==r||s!==n){r>=s&&(s=Math.max(s,1),r=s-1);const t=this.getValueSize();this.times=Ku.arraySlice(i,r,s),this.values=Ku.arraySlice(this.values,r*t,s*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(t=!1);const i=this.times,n=this.values,r=i.length;0===r&&(t=!1);let s=null;for(let e=0;e!==r;e++){const n=i[e];if("number"==typeof n&&isNaN(n)){t=!1;break}if(null!==s&&s>n){t=!1;break}s=n}if(void 0!==n&&Ku.isTypedArray(n))for(let e=0,i=n.length;e!==i;++e){const i=n[e];if(isNaN(i)){t=!1;break}}return t}optimize(){const t=Ku.arraySlice(this.times),e=Ku.arraySlice(this.values),i=this.getValueSize(),n=this.getInterpolation()===Se,r=t.length-1;let s=1;for(let o=1;o<r;++o){let r=!1;const a=t[o];if(a!==t[o+1]&&(1!==o||a!==t[0]))if(n)r=!0;else{const t=o*i,n=t-i,s=t+i;for(let o=0;o!==i;++o){const i=e[t+o];if(i!==e[n+o]||i!==e[s+o]){r=!0;break}}}if(r){if(o!==s){t[s]=t[o];const n=o*i,r=s*i;for(let t=0;t!==i;++t)e[r+t]=e[n+t]}++s}}if(r>0){t[s]=t[r];for(let t=r*i,n=s*i,o=0;o!==i;++o)e[n+o]=e[t+o];++s}return s!==t.length?(this.times=Ku.arraySlice(t,0,s),this.values=Ku.arraySlice(e,0,s*i)):(this.times=t,this.values=e),this}clone(){const t=Ku.arraySlice(this.times,0),e=Ku.arraySlice(this.values,0),i=new(0,this.constructor)(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}}ic.prototype.TimeBufferType=Float32Array,ic.prototype.ValueBufferType=Float32Array,ic.prototype.DefaultInterpolation=be;class nc extends ic{}nc.prototype.ValueTypeName="bool",nc.prototype.ValueBufferType=Array,nc.prototype.DefaultInterpolation=we,nc.prototype.InterpolantFactoryMethodLinear=void 0,nc.prototype.InterpolantFactoryMethodSmooth=void 0;class rc extends ic{}rc.prototype.ValueTypeName="color";class sc extends ic{}sc.prototype.ValueTypeName="number";class oc extends Zu{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t,e,i,n){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=(i-e)/(n-e);let h=t*o;for(let t=h+o;h!==t;h+=4)sn.slerpFlat(r,0,s,h-o,s,h,a);return r}}class ac extends ic{InterpolantFactoryMethodLinear(t){return new oc(this.times,this.values,this.getValueSize(),t)}}ac.prototype.ValueTypeName="quaternion",ac.prototype.DefaultInterpolation=be,ac.prototype.InterpolantFactoryMethodSmooth=void 0;class hc extends ic{}hc.prototype.ValueTypeName="string",hc.prototype.ValueBufferType=Array,hc.prototype.DefaultInterpolation=we,hc.prototype.InterpolantFactoryMethodLinear=void 0,hc.prototype.InterpolantFactoryMethodSmooth=void 0;class lc extends ic{}lc.prototype.ValueTypeName="vector";class uc{constructor(t,e=-1,i,n=Me){this.name=t,this.tracks=i,this.duration=e,this.blendMode=n,this.uuid=xi(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],i=t.tracks,n=1/(t.fps||1);for(let t=0,r=i.length;t!==r;++t)e.push(cc(i[t]).scale(n));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],i=t.tracks,n={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,n=i.length;t!==n;++t)e.push(ic.toJSON(i[t]));return n}static CreateFromMorphTargetSequence(t,e,i,n){const r=e.length,s=[];for(let t=0;t<r;t++){let o=[],a=[];o.push((t+r-1)%r,t,(t+1)%r),a.push(0,1,0);const h=Ku.getKeyframeOrder(o);o=Ku.sortedArray(o,1,h),a=Ku.sortedArray(a,1,h),n||0!==o[0]||(o.push(r),a.push(a[0])),s.push(new sc(".morphTargetInfluences["+e[t].name+"]",o,a).scale(1/i))}return new this(t,-1,s)}static findByName(t,e){let i=t;if(!Array.isArray(t)){const e=t;i=e.geometry&&e.geometry.animations||e.animations}for(let t=0;t<i.length;t++)if(i[t].name===e)return i[t];return null}static CreateClipsFromMorphTargetSequences(t,e,i){const n={},r=/^([\w-]*?)([\d]+)$/;for(let e=0,i=t.length;e<i;e++){const i=t[e],s=i.name.match(r);if(s&&s.length>1){const t=s[1];let e=n[t];e||(n[t]=e=[]),e.push(i)}}const s=[];for(const t in n)s.push(this.CreateFromMorphTargetSequence(t,n[t],e,i));return s}static parseAnimation(t,e){if(!t)return null;const i=function(t,e,i,n,r){if(0!==i.length){const s=[],o=[];Ku.flattenJSON(i,s,o,n),0!==s.length&&r.push(new t(e,s,o))}},n=[],r=t.name||"default",s=t.fps||30,o=t.blendMode;let a=t.length||-1;const h=t.hierarchy||[];for(let t=0;t<h.length;t++){const r=h[t].keys;if(r&&0!==r.length)if(r[0].morphTargets){const t={};let e;for(e=0;e<r.length;e++)if(r[e].morphTargets)for(let i=0;i<r[e].morphTargets.length;i++)t[r[e].morphTargets[i]]=-1;for(const i in t){const t=[],s=[];for(let n=0;n!==r[e].morphTargets.length;++n){const n=r[e];t.push(n.time),s.push(n.morphTarget===i?1:0)}n.push(new sc(".morphTargetInfluence["+i+"]",t,s))}a=t.length*s}else{const s=".bones["+e[t].name+"]";i(lc,s+".position",r,"pos",n),i(ac,s+".quaternion",r,"rot",n),i(lc,s+".scale",r,"scl",n)}}if(0===n.length)return null;return new this(r,a,n,o)}resetDuration(){let t=0;for(let e=0,i=this.tracks.length;e!==i;++e){const i=this.tracks[e];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function cc(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return sc;case"vector":case"vector2":case"vector3":case"vector4":return lc;case"color":return rc;case"quaternion":return ac;case"bool":case"boolean":return nc;case"string":return hc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],i=[];Ku.flattenJSON(t.keys,e,i,"value"),t.times=e,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const dc={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class pc{constructor(t,e,i){const n=this;let r=!1,s=0,o=0,a=void 0;const h=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){o++,!1===r&&void 0!==n.onStart&&n.onStart(t,s,o),r=!0},this.itemEnd=function(t){s++,void 0!==n.onProgress&&n.onProgress(t,s,o),s===o&&(r=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(t){void 0!==n.onError&&n.onError(t)},this.resolveURL=function(t){return a?a(t):t},this.setURLModifier=function(t){return a=t,this},this.addHandler=function(t,e){return h.push(t,e),this},this.removeHandler=function(t){const e=h.indexOf(t);return-1!==e&&h.splice(e,2),this},this.getHandler=function(t){for(let e=0,i=h.length;e<i;e+=2){const i=h[e],n=h[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return n}return null}}}const fc=new pc;class mc{constructor(t){this.manager=void 0!==t?t:fc,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const i=this;return new Promise((function(n,r){i.load(t,n,e,r)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const gc={};class vc extends mc{constructor(t){super(t)}load(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=dc.get(t);if(void 0!==r)return this.manager.itemStart(t),setTimeout(()=>{e&&e(r),this.manager.itemEnd(t)},0),r;if(void 0!==gc[t])return void gc[t].push({onLoad:e,onProgress:i,onError:n});gc[t]=[],gc[t].push({onLoad:e,onProgress:i,onError:n});const s=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,a=this.responseType;fetch(s).then(e=>{if(200===e.status||0===e.status){if(e.status,"undefined"==typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const i=gc[t],n=e.body.getReader(),r=e.headers.get("Content-Length"),s=r?parseInt(r):0,o=0!==s;let a=0;const h=new ReadableStream({start(t){!function e(){n.read().then(({done:n,value:r})=>{if(n)t.close();else{a+=r.byteLength;const n=new ProgressEvent("progress",{lengthComputable:o,loaded:a,total:s});for(let t=0,e=i.length;t<e;t++){const e=i[t];e.onProgress&&e.onProgress(n)}t.enqueue(r),e()}})}()}});return new Response(h)}throw Error(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`)}).then(t=>{switch(a){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then(t=>(new DOMParser).parseFromString(t,o));case"json":return t.json();default:if(void 0===o)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(o),i=e&&e[1]?e[1].toLowerCase():void 0,n=new TextDecoder(i);return t.arrayBuffer().then(t=>n.decode(t))}}}).then(e=>{dc.add(t,e);const i=gc[t];delete gc[t];for(let t=0,n=i.length;t<n;t++){const n=i[t];n.onLoad&&n.onLoad(e)}}).catch(e=>{const i=gc[t];if(void 0===i)throw this.manager.itemError(t),e;delete gc[t];for(let t=0,n=i.length;t<n;t++){const n=i[t];n.onError&&n.onError(e)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class yc extends mc{constructor(t){super(t)}load(t,e,i,n){const r=this,s=new vc(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(i){try{e(r.parse(JSON.parse(i)))}catch(e){n&&n(e),r.manager.itemError(t)}}),i,n)}parse(t){const e=[];for(let i=0;i<t.length;i++){const n=uc.parse(t[i]);e.push(n)}return e}}class Ac extends mc{constructor(t){super(t)}load(t,e,i,n){const r=this,s=[],o=new ml,a=new vc(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(r.withCredentials);let h=0;function l(l){a.load(t[l],(function(t){const i=r.parse(t,!0);s[l]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},h+=1,6===h&&(1===i.mipmapCount&&(o.minFilter=yt),o.image=s,o.format=i.format,o.needsUpdate=!0,e&&e(o))}),i,n)}if(Array.isArray(t))for(let e=0,i=t.length;e<i;++e)l(e);else a.load(t,(function(t){const i=r.parse(t,!0);if(i.isCubemap){const t=i.mipmaps.length/i.mipmapCount;for(let e=0;e<t;e++){s[e]={mipmaps:[]};for(let t=0;t<i.mipmapCount;t++)s[e].mipmaps.push(i.mipmaps[e*i.mipmapCount+t]),s[e].format=i.format,s[e].width=i.width,s[e].height=i.height}o.image=s}else o.image.width=i.width,o.image.height=i.height,o.mipmaps=i.mipmaps;1===i.mipmapCount&&(o.minFilter=yt),o.format=i.format,o.needsUpdate=!0,e&&e(o)}),i,n);return o}}class xc extends mc{constructor(t){super(t)}load(t,e,i,n){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,s=dc.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout((function(){e&&e(s),r.manager.itemEnd(t)}),0),s;const o=Ii("img");function a(){l(),dc.add(t,this),e&&e(this),r.manager.itemEnd(t)}function h(e){l(),n&&n(e),r.manager.itemError(t),r.manager.itemEnd(t)}function l(){o.removeEventListener("load",a,!1),o.removeEventListener("error",h,!1)}return o.addEventListener("load",a,!1),o.addEventListener("error",h,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(t),o.src=t,o}}class wc extends mc{constructor(t){super(t)}load(t,e,i,n){const r=new vs,s=new xc(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function a(i){s.load(t[i],(function(t){r.images[i]=t,o++,6===o&&(r.needsUpdate=!0,e&&e(r))}),void 0,n)}for(let e=0;e<t.length;++e)a(e);return r}}class bc extends mc{constructor(t){super(t)}load(t,e,i,n){const r=this,s=new zh,o=new vc(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(t,(function(t){const i=r.parse(t);i&&(void 0!==i.image?s.image=i.image:void 0!==i.data&&(s.image.width=i.width,s.image.height=i.height,s.image.data=i.data),s.wrapS=void 0!==i.wrapS?i.wrapS:ct,s.wrapT=void 0!==i.wrapT?i.wrapT:ct,s.magFilter=void 0!==i.magFilter?i.magFilter:yt,s.minFilter=void 0!==i.minFilter?i.minFilter:yt,s.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.encoding&&(s.encoding=i.encoding),void 0!==i.flipY&&(s.flipY=i.flipY),void 0!==i.format&&(s.format=i.format),void 0!==i.type&&(s.type=i.type),void 0!==i.mipmaps&&(s.mipmaps=i.mipmaps,s.minFilter=wt),1===i.mipmapCount&&(s.minFilter=yt),void 0!==i.generateMipmaps&&(s.generateMipmaps=i.generateMipmaps),s.needsUpdate=!0,e&&e(s,i))}),i,n),s}}class Sc extends mc{constructor(t){super(t)}load(t,e,i,n){const r=new Qi,s=new xc(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,(function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)}),i,n),r}}class Ec extends hr{constructor(t,e=1){super(),this.type="Light",this.color=new Wi(t),this.intensity=e}dispose(){}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}Ec.prototype.isLight=!0;class Tc extends Ec{constructor(t,e,i){super(t,i),this.type="HemisphereLight",this.position.copy(hr.DefaultUp),this.updateMatrix(),this.groundColor=new Wi(e)}copy(t){return Ec.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}Tc.prototype.isHemisphereLight=!0;const _c=new Fn,Mc=new on,Cc=new on;class Pc{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ci(512,512),this.map=null,this.mapPass=null,this.matrix=new Fn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ts,this._frameExtents=new Ci(1,1),this._viewportCount=1,this._viewports=[new Ki(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,i=this.matrix;Mc.setFromMatrixPosition(t.matrixWorld),e.position.copy(Mc),Cc.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Cc),e.updateMatrixWorld(),_c.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_c),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(e.projectionMatrix),i.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Rc extends Pc{constructor(){super(new ms(50,1,.5,500)),this.focus=1}updateMatrices(t){const e=this.camera,i=2*Ai*t.angle*this.focus,n=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;i===e.fov&&n===e.aspect&&r===e.far||(e.fov=i,e.aspect=n,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}Rc.prototype.isSpotLightShadow=!0;class Oc extends Ec{constructor(t,e,i=0,n=Math.PI/3,r=0,s=1){super(t,e),this.type="SpotLight",this.position.copy(hr.DefaultUp),this.updateMatrix(),this.target=new hr,this.distance=i,this.angle=n,this.penumbra=r,this.decay=s,this.shadow=new Rc}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}Oc.prototype.isSpotLight=!0;const Lc=new Fn,Ic=new on,Dc=new on;class Bc extends Pc{constructor(){super(new ms(90,1,.5,500)),this._frameExtents=new Ci(4,2),this._viewportCount=6,this._viewports=[new Ki(2,1,1,1),new Ki(0,1,1,1),new Ki(3,1,1,1),new Ki(1,1,1,1),new Ki(3,0,1,1),new Ki(1,0,1,1)],this._cubeDirections=[new on(1,0,0),new on(-1,0,0),new on(0,0,1),new on(0,0,-1),new on(0,1,0),new on(0,-1,0)],this._cubeUps=[new on(0,1,0),new on(0,1,0),new on(0,1,0),new on(0,1,0),new on(0,0,1),new on(0,0,-1)]}updateMatrices(t,e=0){const i=this.camera,n=this.matrix,r=t.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),Ic.setFromMatrixPosition(t.matrixWorld),i.position.copy(Ic),Dc.copy(i.position),Dc.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(Dc),i.updateMatrixWorld(),n.makeTranslation(-Ic.x,-Ic.y,-Ic.z),Lc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Lc)}}Bc.prototype.isPointLightShadow=!0;class kc extends Ec{constructor(t,e,i=0,n=1){super(t,e),this.type="PointLight",this.distance=i,this.decay=n,this.shadow=new Bc}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}kc.prototype.isPointLight=!0;class Fc extends Pc{constructor(){super(new Ns(-5,5,5,-5,.5,500))}}Fc.prototype.isDirectionalLightShadow=!0;class Nc extends Ec{constructor(t,e){super(t,e),this.type="DirectionalLight",this.position.copy(hr.DefaultUp),this.updateMatrix(),this.target=new hr,this.shadow=new Fc}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}Nc.prototype.isDirectionalLight=!0;class zc extends Ec{constructor(t,e){super(t,e),this.type="AmbientLight"}}zc.prototype.isAmbientLight=!0;class Uc extends Ec{constructor(t,e,i=10,n=10){super(t,e),this.type="RectAreaLight",this.width=i,this.height=n}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}Uc.prototype.isRectAreaLight=!0;class Gc{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new on)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const i=t.x,n=t.y,r=t.z,s=this.coefficients;return e.copy(s[0]).multiplyScalar(.282095),e.addScaledVector(s[1],.488603*n),e.addScaledVector(s[2],.488603*r),e.addScaledVector(s[3],.488603*i),e.addScaledVector(s[4],i*n*1.092548),e.addScaledVector(s[5],n*r*1.092548),e.addScaledVector(s[6],.315392*(3*r*r-1)),e.addScaledVector(s[7],i*r*1.092548),e.addScaledVector(s[8],.546274*(i*i-n*n)),e}getIrradianceAt(t,e){const i=t.x,n=t.y,r=t.z,s=this.coefficients;return e.copy(s[0]).multiplyScalar(.886227),e.addScaledVector(s[1],1.023328*n),e.addScaledVector(s[2],1.023328*r),e.addScaledVector(s[3],1.023328*i),e.addScaledVector(s[4],.858086*i*n),e.addScaledVector(s[5],.858086*n*r),e.addScaledVector(s[6],.743125*r*r-.247708),e.addScaledVector(s[7],.858086*i*r),e.addScaledVector(s[8],.429043*(i*i-n*n)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const i=this.coefficients;for(let n=0;n<9;n++)i[n].fromArray(t,e+3*n);return this}toArray(t=[],e=0){const i=this.coefficients;for(let n=0;n<9;n++)i[n].toArray(t,e+3*n);return t}static getBasisAt(t,e){const i=t.x,n=t.y,r=t.z;e[0]=.282095,e[1]=.488603*n,e[2]=.488603*r,e[3]=.488603*i,e[4]=1.092548*i*n,e[5]=1.092548*n*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*i*r,e[8]=.546274*(i*i-n*n)}}Gc.prototype.isSphericalHarmonics3=!0;class Vc extends Ec{constructor(t=new Gc,e=1){super(void 0,e),this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}Vc.prototype.isLightProbe=!0;class Hc extends mc{constructor(t){super(t),this.textures={}}load(t,e,i,n){const r=this,s=new vc(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(t,(function(i){try{e(r.parse(JSON.parse(i)))}catch(e){n&&n(e),r.manager.itemError(t)}}),i,n)}parse(t){const e=this.textures;function i(t){return e[t],e[t]}const n=wr.fromType(t.type);if(void 0!==t.uuid&&(n.uuid=t.uuid),void 0!==t.name&&(n.name=t.name),void 0!==t.color&&void 0!==n.color&&n.color.setHex(t.color),void 0!==t.roughness&&(n.roughness=t.roughness),void 0!==t.metalness&&(n.metalness=t.metalness),void 0!==t.sheen&&(n.sheen=t.sheen),void 0!==t.sheenColor&&(n.sheenColor=(new Wi).setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(n.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==n.emissive&&n.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==n.specular&&n.specular.setHex(t.specular),void 0!==t.specularIntensity&&(n.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==n.specularColor&&n.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(n.shininess=t.shininess),void 0!==t.clearcoat&&(n.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(n.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.transmission&&(n.transmission=t.transmission),void 0!==t.thickness&&(n.thickness=t.thickness),void 0!==t.attenuationDistance&&(n.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==n.attenuationColor&&n.attenuationColor.setHex(t.attenuationColor),void 0!==t.fog&&(n.fog=t.fog),void 0!==t.flatShading&&(n.flatShading=t.flatShading),void 0!==t.blending&&(n.blending=t.blending),void 0!==t.combine&&(n.combine=t.combine),void 0!==t.side&&(n.side=t.side),void 0!==t.shadowSide&&(n.shadowSide=t.shadowSide),void 0!==t.opacity&&(n.opacity=t.opacity),void 0!==t.transparent&&(n.transparent=t.transparent),void 0!==t.alphaTest&&(n.alphaTest=t.alphaTest),void 0!==t.depthTest&&(n.depthTest=t.depthTest),void 0!==t.depthWrite&&(n.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(n.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(n.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(n.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(n.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(n.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(n.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(n.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(n.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(n.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(n.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(n.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(n.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(n.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(n.rotation=t.rotation),1!==t.linewidth&&(n.linewidth=t.linewidth),void 0!==t.dashSize&&(n.dashSize=t.dashSize),void 0!==t.gapSize&&(n.gapSize=t.gapSize),void 0!==t.scale&&(n.scale=t.scale),void 0!==t.polygonOffset&&(n.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(n.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(n.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(n.dithering=t.dithering),void 0!==t.alphaToCoverage&&(n.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(n.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.toneMapped&&(n.toneMapped=t.toneMapped),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?n.vertexColors=t.vertexColors>0:n.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const e in t.uniforms){const r=t.uniforms[e];switch(n.uniforms[e]={},r.type){case"t":n.uniforms[e].value=i(r.value);break;case"c":n.uniforms[e].value=(new Wi).setHex(r.value);break;case"v2":n.uniforms[e].value=(new Ci).fromArray(r.value);break;case"v3":n.uniforms[e].value=(new on).fromArray(r.value);break;case"v4":n.uniforms[e].value=(new Ki).fromArray(r.value);break;case"m3":n.uniforms[e].value=(new Pi).fromArray(r.value);break;case"m4":n.uniforms[e].value=(new Fn).fromArray(r.value);break;default:n.uniforms[e].value=r.value}}if(void 0!==t.defines&&(n.defines=t.defines),void 0!==t.vertexShader&&(n.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(n.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(const e in t.extensions)n.extensions[e]=t.extensions[e];if(void 0!==t.shading&&(n.flatShading=1===t.shading),void 0!==t.size&&(n.size=t.size),void 0!==t.sizeAttenuation&&(n.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(n.map=i(t.map)),void 0!==t.matcap&&(n.matcap=i(t.matcap)),void 0!==t.alphaMap&&(n.alphaMap=i(t.alphaMap)),void 0!==t.bumpMap&&(n.bumpMap=i(t.bumpMap)),void 0!==t.bumpScale&&(n.bumpScale=t.bumpScale),void 0!==t.normalMap&&(n.normalMap=i(t.normalMap)),void 0!==t.normalMapType&&(n.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),n.normalScale=(new Ci).fromArray(e)}return void 0!==t.displacementMap&&(n.displacementMap=i(t.displacementMap)),void 0!==t.displacementScale&&(n.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(n.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(n.roughnessMap=i(t.roughnessMap)),void 0!==t.metalnessMap&&(n.metalnessMap=i(t.metalnessMap)),void 0!==t.emissiveMap&&(n.emissiveMap=i(t.emissiveMap)),void 0!==t.emissiveIntensity&&(n.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(n.specularMap=i(t.specularMap)),void 0!==t.specularIntensityMap&&(n.specularIntensityMap=i(t.specularIntensityMap)),void 0!==t.specularColorMap&&(n.specularColorMap=i(t.specularColorMap)),void 0!==t.envMap&&(n.envMap=i(t.envMap)),void 0!==t.envMapIntensity&&(n.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(n.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(n.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(n.lightMap=i(t.lightMap)),void 0!==t.lightMapIntensity&&(n.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(n.aoMap=i(t.aoMap)),void 0!==t.aoMapIntensity&&(n.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(n.gradientMap=i(t.gradientMap)),void 0!==t.clearcoatMap&&(n.clearcoatMap=i(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(n.clearcoatRoughnessMap=i(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(n.clearcoatNormalMap=i(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(n.clearcoatNormalScale=(new Ci).fromArray(t.clearcoatNormalScale)),void 0!==t.transmissionMap&&(n.transmissionMap=i(t.transmissionMap)),void 0!==t.thicknessMap&&(n.thicknessMap=i(t.thicknessMap)),void 0!==t.sheenColorMap&&(n.sheenColorMap=i(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(n.sheenRoughnessMap=i(t.sheenRoughnessMap)),n}setTextures(t){return this.textures=t,this}}class Wc{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let i=0,n=t.length;i<n;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch(t){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class jc extends Hr{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}jc.prototype.isInstancedBufferGeometry=!0;class Yc extends mc{constructor(t){super(t)}load(t,e,i,n){const r=this,s=new vc(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(t,(function(i){try{e(r.parse(JSON.parse(i)))}catch(e){n&&n(e),r.manager.itemError(t)}}),i,n)}parse(t){const e={},i={};function n(t,n){if(void 0!==e[n])return e[n];const r=t.interleavedBuffers[n],s=function(t,e){if(void 0!==i[e])return i[e];const n=t.arrayBuffers[e],r=new Uint32Array(n).buffer;return i[e]=r,r}(t,r.buffer),o=Li(r.type,s),a=new uh(o,r.stride);return a.uuid=r.uuid,e[n]=a,a}const r=t.isInstancedBufferGeometry?new jc:new Hr,s=t.data.index;if(void 0!==s){const t=Li(s.type,s.array);r.setIndex(new Tr(t,1))}const o=t.data.attributes;for(const e in o){const i=o[e];let s;if(i.isInterleavedBufferAttribute){const e=n(t.data,i.data);s=new dh(e,i.itemSize,i.offset,i.normalized)}else{const t=Li(i.type,i.array);s=new(i.isInstancedBufferAttribute?Hh:Tr)(t,i.itemSize,i.normalized)}void 0!==i.name&&(s.name=i.name),void 0!==i.usage&&s.setUsage(i.usage),void 0!==i.updateRange&&(s.updateRange.offset=i.updateRange.offset,s.updateRange.count=i.updateRange.count),r.setAttribute(e,s)}const a=t.data.morphAttributes;if(a)for(const e in a){const i=a[e],s=[];for(let e=0,r=i.length;e<r;e++){const r=i[e];let o;if(r.isInterleavedBufferAttribute){const e=n(t.data,r.data);o=new dh(e,r.itemSize,r.offset,r.normalized)}else{const t=Li(r.type,r.array);o=new Tr(t,r.itemSize,r.normalized)}void 0!==r.name&&(o.name=r.name),s.push(o)}r.morphAttributes[e]=s}t.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const h=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==h)for(let t=0,e=h.length;t!==e;++t){const e=h[t];r.addGroup(e.start,e.count,e.materialIndex)}const l=t.data.boundingSphere;if(void 0!==l){const t=new on;void 0!==l.center&&t.fromArray(l.center),r.boundingSphere=new Cn(t,l.radius)}return t.name&&(r.name=t.name),t.userData&&(r.userData=t.userData),r}}class Xc extends mc{constructor(t){super(t)}load(t,e,i,n){const r=this,s=""===this.path?Wc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||s;const o=new vc(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(t){let i=null;try{i=JSON.parse(t)}catch(t){return void(void 0!==n&&n(t))}const s=i.metadata;void 0!==s&&void 0!==s.type&&"geometry"!==s.type.toLowerCase()&&r.parse(i,e)}),i,n)}async loadAsync(t,e){const i=""===this.path?Wc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||i;const n=new vc(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials);const r=await n.loadAsync(t,e),s=JSON.parse(r),o=s.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+t);return await this.parseAsync(s)}parse(t,e){const i=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,n),s=this.parseImages(t.images,(function(){void 0!==e&&e(h)})),o=this.parseTextures(t.textures,s),a=this.parseMaterials(t.materials,o),h=this.parseObject(t.object,r,a,o,i),l=this.parseSkeletons(t.skeletons,h);if(this.bindSkeletons(h,l),void 0!==e){let t=!1;for(const e in s)if(s[e]instanceof HTMLImageElement){t=!0;break}!1===t&&e(h)}return h}async parseAsync(t){const e=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),n=this.parseGeometries(t.geometries,i),r=await this.parseImagesAsync(t.images),s=this.parseTextures(t.textures,r),o=this.parseMaterials(t.materials,s),a=this.parseObject(t.object,n,o,s,e),h=this.parseSkeletons(t.skeletons,a);return this.bindSkeletons(a,h),a}parseShapes(t){const e={};if(void 0!==t)for(let i=0,n=t.length;i<n;i++){const n=(new Kl).fromJSON(t[i]);e[n.uuid]=n}return e}parseSkeletons(t,e){const i={},n={};if(e.traverse((function(t){t.isBone&&(n[t.uuid]=t)})),void 0!==t)for(let e=0,r=t.length;e<r;e++){const r=(new Vh).fromJSON(t[e],n);i[r.uuid]=r}return i}parseGeometries(t,e){const i={};if(void 0!==t){const n=new Yc;for(let r=0,s=t.length;r<s;r++){let s;const o=t[r];switch(o.type){case"BufferGeometry":case"InstancedBufferGeometry":s=n.parse(o);break;case"Geometry":break;default:o.type in zu&&(s=zu[o.type].fromJSON(o,e))}s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),!0===s.isBufferGeometry&&void 0!==o.userData&&(s.userData=o.userData),i[o.uuid]=s}}return i}parseMaterials(t,e){const i={},n={};if(void 0!==t){const r=new Hc;r.setTextures(e);for(let e=0,s=t.length;e<s;e++){const s=t[e];if("MultiMaterial"===s.type){const t=[];for(let e=0;e<s.materials.length;e++){const n=s.materials[e];void 0===i[n.uuid]&&(i[n.uuid]=r.parse(n)),t.push(i[n.uuid])}n[s.uuid]=t}else void 0===i[s.uuid]&&(i[s.uuid]=r.parse(s)),n[s.uuid]=i[s.uuid]}}return n}parseAnimations(t){const e={};if(void 0!==t)for(let i=0;i<t.length;i++){const n=t[i],r=uc.parse(n);e[r.uuid]=r}return e}parseImages(t,e){const i=this,n={};let r;function s(t){if("string"==typeof t){const e=t;return function(t){return i.manager.itemStart(t),r.load(t,(function(){i.manager.itemEnd(t)}),void 0,(function(){i.manager.itemError(t),i.manager.itemEnd(t)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:i.resourcePath+e)}return t.data?{data:Li(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){const i=new pc(e);r=new xc(i),r.setCrossOrigin(this.crossOrigin);for(let e=0,i=t.length;e<i;e++){const i=t[e],r=i.url;if(Array.isArray(r)){const t=[];for(let e=0,i=r.length;e<i;e++){const i=s(r[e]);null!==i&&(i instanceof HTMLImageElement?t.push(i):t.push(new zh(i.data,i.width,i.height)))}n[i.uuid]=new Xi(t)}else{const t=s(i.url);n[i.uuid]=new Xi(t)}}}return n}async parseImagesAsync(t){const e=this,i={};let n;async function r(t){if("string"==typeof t){const i=t,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(i)?i:e.resourcePath+i;return await n.loadAsync(r)}return t.data?{data:Li(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){n=new xc(this.manager),n.setCrossOrigin(this.crossOrigin);for(let e=0,n=t.length;e<n;e++){const n=t[e],s=n.url;if(Array.isArray(s)){const t=[];for(let e=0,i=s.length;e<i;e++){const i=s[e],n=await r(i);null!==n&&(n instanceof HTMLImageElement?t.push(n):t.push(new zh(n.data,n.width,n.height)))}i[n.uuid]=new Xi(t)}else{const t=await r(n.url);i[n.uuid]=new Xi(t)}}}return i}parseTextures(t,e){function i(t,e){return"number"==typeof t?t:e[t]}const n={};if(void 0!==t)for(let r=0,s=t.length;r<s;r++){const s=t[r];s.image,e[s.image];const o=e[s.image],a=o.data;let h;Array.isArray(a)?(h=new vs,6===a.length&&(h.needsUpdate=!0)):(h=a&&a.data?new zh:new Qi,a&&(h.needsUpdate=!0)),h.source=o,h.uuid=s.uuid,void 0!==s.name&&(h.name=s.name),void 0!==s.mapping&&(h.mapping=i(s.mapping,qc)),void 0!==s.offset&&h.offset.fromArray(s.offset),void 0!==s.repeat&&h.repeat.fromArray(s.repeat),void 0!==s.center&&h.center.fromArray(s.center),void 0!==s.rotation&&(h.rotation=s.rotation),void 0!==s.wrap&&(h.wrapS=i(s.wrap[0],Jc),h.wrapT=i(s.wrap[1],Jc)),void 0!==s.format&&(h.format=s.format),void 0!==s.type&&(h.type=s.type),void 0!==s.encoding&&(h.encoding=s.encoding),void 0!==s.minFilter&&(h.minFilter=i(s.minFilter,Qc)),void 0!==s.magFilter&&(h.magFilter=i(s.magFilter,Qc)),void 0!==s.anisotropy&&(h.anisotropy=s.anisotropy),void 0!==s.flipY&&(h.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(h.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(h.unpackAlignment=s.unpackAlignment),void 0!==s.userData&&(h.userData=s.userData),n[s.uuid]=h}return n}parseObject(t,e,i,n,r){let s,o,a;function h(t){return e[t],e[t]}function l(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];i[r],e.push(i[r])}return e}return i[t],i[t]}}function u(t){return n[t],n[t]}switch(t.type){case"Scene":s=new lh,void 0!==t.background&&(Number.isInteger(t.background)?s.background=new Wi(t.background):s.background=u(t.background)),void 0!==t.environment&&(s.environment=u(t.environment)),void 0!==t.fog&&("Fog"===t.fog.type?s.fog=new hh(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(s.fog=new ah(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":s=new ms(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(s.focus=t.focus),void 0!==t.zoom&&(s.zoom=t.zoom),void 0!==t.filmGauge&&(s.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(s.filmOffset=t.filmOffset),void 0!==t.view&&(s.view=Object.assign({},t.view));break;case"OrthographicCamera":s=new Ns(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(s.zoom=t.zoom),void 0!==t.view&&(s.view=Object.assign({},t.view));break;case"AmbientLight":s=new zc(t.color,t.intensity);break;case"DirectionalLight":s=new Nc(t.color,t.intensity);break;case"PointLight":s=new kc(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":s=new Uc(t.color,t.intensity,t.width,t.height);break;case"SpotLight":s=new Oc(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":s=new Tc(t.color,t.groundColor,t.intensity);break;case"LightProbe":s=(new Vc).fromJSON(t);break;case"SkinnedMesh":o=h(t.geometry),a=l(t.material),s=new Fh(o,a),void 0!==t.bindMode&&(s.bindMode=t.bindMode),void 0!==t.bindMatrix&&s.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(s.skeleton=t.skeleton);break;case"Mesh":o=h(t.geometry),a=l(t.material),s=new as(o,a);break;case"InstancedMesh":o=h(t.geometry),a=l(t.material);const e=t.count,i=t.instanceMatrix,n=t.instanceColor;s=new qh(o,a,e),s.instanceMatrix=new Hh(new Float32Array(i.array),16),void 0!==n&&(s.instanceColor=new Hh(new Float32Array(n.array),n.itemSize));break;case"LOD":s=new Oh;break;case"Line":s=new el(h(t.geometry),l(t.material));break;case"LineLoop":s=new sl(h(t.geometry),l(t.material));break;case"LineSegments":s=new rl(h(t.geometry),l(t.material));break;case"PointCloud":case"Points":s=new cl(h(t.geometry),l(t.material));break;case"Sprite":s=new Mh(l(t.material));break;case"Group":s=new $a;break;case"Bone":s=new Nh;break;default:s=new hr}if(s.uuid=t.uuid,void 0!==t.name&&(s.name=t.name),void 0!==t.matrix?(s.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(s.matrixAutoUpdate=t.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(void 0!==t.position&&s.position.fromArray(t.position),void 0!==t.rotation&&s.rotation.fromArray(t.rotation),void 0!==t.quaternion&&s.quaternion.fromArray(t.quaternion),void 0!==t.scale&&s.scale.fromArray(t.scale)),void 0!==t.castShadow&&(s.castShadow=t.castShadow),void 0!==t.receiveShadow&&(s.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(s.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(s.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(s.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&s.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(s.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(s.visible=t.visible),void 0!==t.frustumCulled&&(s.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(s.renderOrder=t.renderOrder),void 0!==t.userData&&(s.userData=t.userData),void 0!==t.layers&&(s.layers.mask=t.layers),void 0!==t.children){const o=t.children;for(let t=0;t<o.length;t++)s.add(this.parseObject(o[t],e,i,n,r))}if(void 0!==t.animations){const e=t.animations;for(let t=0;t<e.length;t++){const i=e[t];s.animations.push(r[i])}}if("LOD"===t.type){void 0!==t.autoUpdate&&(s.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const i=e[t],n=s.getObjectByProperty("uuid",i.object);void 0!==n&&s.addLevel(n,i.distance)}}return s}bindSkeletons(t,e){0!==Object.keys(e).length&&t.traverse((function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){const i=e[t.skeleton];void 0===i||t.bind(i,t.bindMatrix)}}))}setTexturePath(t){return this.setResourcePath(t)}}const qc={UVMapping:rt,CubeReflectionMapping:st,CubeRefractionMapping:ot,EquirectangularReflectionMapping:at,EquirectangularRefractionMapping:ht,CubeUVReflectionMapping:lt},Jc={RepeatWrapping:ut,ClampToEdgeWrapping:ct,MirroredRepeatWrapping:dt},Qc={NearestFilter:pt,NearestMipmapNearestFilter:ft,NearestMipmapLinearFilter:gt,LinearFilter:yt,LinearMipmapNearestFilter:At,LinearMipmapLinearFilter:wt};class Kc extends mc{constructor(t){super(t),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,s=dc.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout((function(){e&&e(s),r.manager.itemEnd(t)}),0),s;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(t,o).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(i){dc.add(t,i),e&&e(i),r.manager.itemEnd(t)})).catch((function(e){n&&n(e),r.manager.itemError(t),r.manager.itemEnd(t)})),r.manager.itemStart(t)}}let Zc;Kc.prototype.isImageBitmapLoader=!0;const $c={getContext:function(){return void 0===Zc&&(Zc=new(window.AudioContext||window.webkitAudioContext)),Zc},setContext:function(t){Zc=t}};class td extends mc{constructor(t){super(t)}load(t,e,i,n){const r=this,s=new vc(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(i){try{const t=i.slice(0);$c.getContext().decodeAudioData(t,(function(t){e(t)}))}catch(e){n&&n(e),r.manager.itemError(t)}}),i,n)}}class ed extends Vc{constructor(t,e,i=1){super(void 0,i);const n=(new Wi).set(t),r=(new Wi).set(e),s=new on(n.r,n.g,n.b),o=new on(r.r,r.g,r.b),a=Math.sqrt(Math.PI),h=a*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(o).multiplyScalar(a),this.sh.coefficients[1].copy(s).sub(o).multiplyScalar(h)}}ed.prototype.isHemisphereLightProbe=!0;class id extends Vc{constructor(t,e=1){super(void 0,e);const i=(new Wi).set(t);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}id.prototype.isAmbientLightProbe=!0;const nd=new Fn,rd=new Fn,sd=new Fn;class od{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ms,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ms,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,sd.copy(t.projectionMatrix);const i=e.eyeSep/2,n=i*e.near/e.focus,r=e.near*Math.tan(yi*e.fov*.5)/e.zoom;let s,o;rd.elements[12]=-i,nd.elements[12]=i,s=-r*e.aspect+n,o=r*e.aspect+n,sd.elements[0]=2*e.near/(o-s),sd.elements[8]=(o+s)/(o-s),this.cameraL.projectionMatrix.copy(sd),s=-r*e.aspect-n,o=r*e.aspect-n,sd.elements[0]=2*e.near/(o-s),sd.elements[8]=(o+s)/(o-s),this.cameraR.projectionMatrix.copy(sd)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(rd),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(nd)}}class ad{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=hd(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=hd();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function hd(){return("undefined"==typeof performance?Date:performance).now()}const ld=new on,ud=new sn,cd=new on,dd=new on;class pd extends hr{constructor(){super(),this.type="AudioListener",this.context=$c.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new ad}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ld,ud,cd),dd.set(0,0,-1).applyQuaternion(ud),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(ld.x,t),e.positionY.linearRampToValueAtTime(ld.y,t),e.positionZ.linearRampToValueAtTime(ld.z,t),e.forwardX.linearRampToValueAtTime(dd.x,t),e.forwardY.linearRampToValueAtTime(dd.y,t),e.forwardZ.linearRampToValueAtTime(dd.z,t),e.upX.linearRampToValueAtTime(i.x,t),e.upY.linearRampToValueAtTime(i.y,t),e.upZ.linearRampToValueAtTime(i.z,t)}else e.setPosition(ld.x,ld.y,ld.z),e.setOrientation(dd.x,dd.y,dd.z,i.x,i.y,i.z)}}class fd extends hr{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return;if(!1===this.hasPlaybackControl)return;this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1!==this.hasPlaybackControl&&this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const md=new on,gd=new sn,vd=new on,yd=new on;class Ad extends fd{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,i){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=i,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(md,gd,vd),yd.set(0,0,1).applyQuaternion(gd);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(md.x,t),e.positionY.linearRampToValueAtTime(md.y,t),e.positionZ.linearRampToValueAtTime(md.z,t),e.orientationX.linearRampToValueAtTime(yd.x,t),e.orientationY.linearRampToValueAtTime(yd.y,t),e.orientationZ.linearRampToValueAtTime(yd.z,t)}else e.setPosition(md.x,md.y,md.z),e.setOrientation(yd.x,yd.y,yd.z)}}class xd{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let i=0;i<e.length;i++)t+=e[i];return t/e.length}}class wd{constructor(t,e,i){let n,r,s;switch(this.binding=t,this.valueSize=i,e){case"quaternion":n=this._slerp,r=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":n=this._select,r=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:n=this._lerp,r=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=r,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const i=this.buffer,n=this.valueSize,r=t*n+n;let s=this.cumulativeWeight;if(0===s){for(let t=0;t!==n;++t)i[r+t]=i[t];s=e}else{s+=e;const t=e/s;this._mixBufferRegion(i,r,0,t,n)}this.cumulativeWeight=s}accumulateAdditive(t){const e=this.buffer,i=this.valueSize,n=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,n,0,t,i),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,i=this.buffer,n=t*e+e,r=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const t=e*this._origIndex;this._mixBufferRegion(i,n,t,1-r,e)}s>0&&this._mixBufferRegionAdditive(i,n,this._addIndex*e,1,e);for(let t=e,r=e+e;t!==r;++t)if(i[t]!==i[t+e]){o.setValue(i,n);break}}saveOriginalState(){const t=this.binding,e=this.buffer,i=this.valueSize,n=i*this._origIndex;t.getValue(e,n);for(let t=i,r=n;t!==r;++t)e[t]=e[n+t%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]}_select(t,e,i,n,r){if(n>=.5)for(let n=0;n!==r;++n)t[e+n]=t[i+n]}_slerp(t,e,i,n){sn.slerpFlat(t,e,t,e,t,i,n)}_slerpAdditive(t,e,i,n,r){const s=this._workIndex*r;sn.multiplyQuaternionsFlat(t,s,t,e,t,i),sn.slerpFlat(t,e,t,e,t,s,n)}_lerp(t,e,i,n,r){const s=1-n;for(let o=0;o!==r;++o){const r=e+o;t[r]=t[r]*s+t[i+o]*n}}_lerpAdditive(t,e,i,n,r){for(let s=0;s!==r;++s){const r=e+s;t[r]=t[r]+t[i+s]*n}}}const bd=new RegExp("[\\[\\]\\.:\\/]","g"),Sd="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Ed=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),Td=/(WCOD+)?/.source.replace("WCOD",Sd),_d=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Md=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Cd=new RegExp("^"+Ed+Td+_d+Md+"$"),Pd=["material","materials","bones"];class Rd{constructor(t,e,i){this.path=e,this.parsedPath=i||Rd.parseTrackName(e),this.node=Rd.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,i){return t&&t.isAnimationObjectGroup?new Rd.Composite(t,e,i):new Rd(t,e,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(bd,"")}static parseTrackName(t){const e=Cd.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){const t=i.nodeName.substring(n+1);-1!==Pd.indexOf(t)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=t)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(e);if(void 0!==i)return i}if(t.children){const i=function(t){for(let n=0;n<t.length;n++){const r=t[n];if(r.name===e||r.uuid===e)return r;const s=i(r.children);if(s)return s}return null},n=i(t.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)t[e++]=i[n]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,i=e.objectName,n=e.propertyName;let r=e.propertyIndex;if(t||(t=Rd.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return;if(i){let n=e.objectIndex;switch(i){case"materials":if(!t.material)return;if(!t.material.materials)return;t=t.material.materials;break;case"bones":if(!t.skeleton)return;t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===n){n=e;break}break;default:if(void 0===t[i])return;t=t[i]}if(void 0!==n){if(void 0===t[n])return;t=t[n]}}const s=t[n];if(void 0===s){e.nodeName;return}let o=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!t.geometry)return;if(!t.geometry.isBufferGeometry)return;if(!t.geometry.morphAttributes)return;void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}a=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(a=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=n;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Rd.Composite=class{constructor(t,e,i){const n=i||Rd.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,n)}getValue(t,e){this.bind();const i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(t,e)}setValue(t,e){const i=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}},Rd.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Rd.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Rd.prototype.GetterByBindingType=[Rd.prototype._getValue_direct,Rd.prototype._getValue_array,Rd.prototype._getValue_arrayElement,Rd.prototype._getValue_toArray],Rd.prototype.SetterByBindingTypeAndVersioning=[[Rd.prototype._setValue_direct,Rd.prototype._setValue_direct_setNeedsUpdate,Rd.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Rd.prototype._setValue_array,Rd.prototype._setValue_array_setNeedsUpdate,Rd.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Rd.prototype._setValue_arrayElement,Rd.prototype._setValue_arrayElement_setNeedsUpdate,Rd.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Rd.prototype._setValue_fromArray,Rd.prototype._setValue_fromArray_setNeedsUpdate,Rd.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Od{constructor(){this.uuid=xi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let e=0,i=arguments.length;e!==i;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,i=this._paths,n=this._parsedPaths,r=this._bindings,s=r.length;let o=void 0,a=t.length,h=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const u=arguments[l],c=u.uuid;let d=e[c];if(void 0===d){d=a++,e[c]=d,t.push(u);for(let t=0,e=s;t!==e;++t)r[t].push(new Rd(u,i[t],n[t]))}else if(d<h){o=t[d];const a=--h,l=t[a];e[l.uuid]=d,t[d]=l,e[c]=a,t[a]=u;for(let t=0,e=s;t!==e;++t){const e=r[t],s=e[a];let o=e[d];e[d]=s,void 0===o&&(o=new Rd(u,i[t],n[t])),e[a]=o}}else t[d]}this.nCachedObjects_=h}remove(){const t=this._objects,e=this._indicesByUUID,i=this._bindings,n=i.length;let r=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const o=arguments[s],a=o.uuid,h=e[a];if(void 0!==h&&h>=r){const s=r++,l=t[s];e[l.uuid]=h,t[h]=l,e[a]=s,t[s]=o;for(let t=0,e=n;t!==e;++t){const e=i[t],n=e[s],r=e[h];e[h]=n,e[s]=r}}}this.nCachedObjects_=r}uncache(){const t=this._objects,e=this._indicesByUUID,i=this._bindings,n=i.length;let r=this.nCachedObjects_,s=t.length;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o].uuid,h=e[a];if(void 0!==h)if(delete e[a],h<r){const o=--r,a=t[o],l=--s,u=t[l];e[a.uuid]=h,t[h]=a,e[u.uuid]=o,t[o]=u,t.pop();for(let t=0,e=n;t!==e;++t){const e=i[t],n=e[o],r=e[l];e[h]=n,e[o]=r,e.pop()}}else{const r=--s,o=t[r];r>0&&(e[o.uuid]=h),t[h]=o,t.pop();for(let t=0,e=n;t!==e;++t){const e=i[t];e[h]=e[r],e.pop()}}}this.nCachedObjects_=r}subscribe_(t,e){const i=this._bindingsIndicesByPath;let n=i[t];const r=this._bindings;if(void 0!==n)return r[n];const s=this._paths,o=this._parsedPaths,a=this._objects,h=a.length,l=this.nCachedObjects_,u=new Array(h);n=r.length,i[t]=n,s.push(t),o.push(e),r.push(u);for(let i=l,n=a.length;i!==n;++i){const n=a[i];u[i]=new Rd(n,t,e)}return u}unsubscribe_(t){const e=this._bindingsIndicesByPath,i=e[t];if(void 0!==i){const n=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length-1,a=s[o];e[t[o]]=i,s[i]=a,s.pop(),r[i]=r[o],r.pop(),n[i]=n[o],n.pop()}}}Od.prototype.isAnimationObjectGroup=!0;class Ld{constructor(t,e,i=null,n=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=i,this.blendMode=n;const r=e.tracks,s=r.length,o=new Array(s),a={endingStart:Ee,endingEnd:Ee};for(let t=0;t!==s;++t){const e=r[t].createInterpolant(null);o[t]=e,e.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ae,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){const i=this._clip.duration,n=t._clip.duration,r=n/i,s=i/n;t.warp(1,r,e),this.warp(s,1,e)}return this}crossFadeTo(t,e,i){return t.crossFadeFrom(this,e,i)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,i){const n=this._mixer,r=n.time,s=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=n._lendControlInterpolant(),this._timeScaleInterpolant=o);const a=o.parameterPositions,h=o.sampleValues;return a[0]=r,a[1]=r+i,h[0]=t/s,h[1]=e/s,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,i,n){if(!this.enabled)return void this._updateWeight(t);const r=this._startTime;if(null!==r){const n=(t-r)*i;if(n<0||0===i)return;this._startTime=null,e=i*n}e*=this._updateTimeScale(t);const s=this._updateTime(e),o=this._updateWeight(t);if(o>0){const t=this._interpolants,e=this._propertyBindings;switch(this.blendMode){case Ce:for(let i=0,n=t.length;i!==n;++i)t[i].evaluate(s),e[i].accumulateAdditive(o);break;case Me:default:for(let i=0,r=t.length;i!==r;++i)t[i].evaluate(s),e[i].accumulate(n,o)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const i=this._weightInterpolant;if(null!==i){const n=i.evaluate(t)[0];e*=n,t>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const i=this._timeScaleInterpolant;if(null!==i){e*=i.evaluate(t)[0],t>i.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,i=this.loop;let n=this.time+t,r=this._loopCount;const s=i===xe;if(0===t)return-1===r?n:s&&1==(1&r)?e-n:n;if(i===ye){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(n>=e)n=e;else{if(!(n<0)){this.time=n;break t}n=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),n>=e||n<0){const i=Math.floor(n/e);n-=e*i,r+=Math.abs(i);const o=this.repetitions-r;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n=t>0?e:0,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===o){const e=t<0;this._setEndings(e,!e,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:i})}}else this.time=n;if(s&&1==(1&r))return e-n}return n}_setEndings(t,e,i){const n=this._interpolantSettings;i?(n.endingStart=Te,n.endingEnd=Te):(n.endingStart=t?this.zeroSlopeAtStart?Te:Ee:_e,n.endingEnd=e?this.zeroSlopeAtEnd?Te:Ee:_e)}_scheduleFading(t,e,i){const n=this._mixer,r=n.time;let s=this._weightInterpolant;null===s&&(s=n._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,a=s.sampleValues;return o[0]=r,a[0]=e,o[1]=r+t,a[1]=i,this}}class Id extends mi{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const i=t._localRoot||this._root,n=t._clip.tracks,r=n.length,s=t._propertyBindings,o=t._interpolants,a=i.uuid,h=this._bindingsByRootAndName;let l=h[a];void 0===l&&(l={},h[a]=l);for(let t=0;t!==r;++t){const r=n[t],h=r.name;let u=l[h];if(void 0!==u)++u.referenceCount,s[t]=u;else{if(u=s[t],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,a,h));continue}const n=e&&e._propertyBindings[t].binding.parsedPath;u=new wd(Rd.create(i,h,n),r.ValueTypeName,r.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,a,h),s[t]=u}o[t].resultBuffer=u.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,i=t._clip.uuid,n=this._actionsByClip[i];this._bindAction(t,n&&n.knownActions[0]),this._addInactiveAction(t,i,e)}const e=t._propertyBindings;for(let t=0,i=e.length;t!==i;++t){const i=e[t];0==i.useCount++&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,i=e.length;t!==i;++t){const i=e[t];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,i){const n=this._actions,r=this._actionsByClip;let s=r[e];if(void 0===s)s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=s;else{const e=s.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=n.length,n.push(t),s.actionByRoot[i]=t}_removeInactiveAction(t){const e=this._actions,i=e[e.length-1],n=t._cacheIndex;i._cacheIndex=n,e[n]=i,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,s=this._actionsByClip,o=s[r],a=o.knownActions,h=a[a.length-1],l=t._byClipCacheIndex;h._byClipCacheIndex=l,a[l]=h,a.pop(),t._byClipCacheIndex=null;delete o.actionByRoot[(t._localRoot||this._root).uuid],0===a.length&&delete s[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let t=0,i=e.length;t!==i;++t){const i=e[t];0==--i.referenceCount&&this._removeInactiveBinding(i)}}_lendAction(t){const e=this._actions,i=t._cacheIndex,n=this._nActiveActions++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r}_takeBackAction(t){const e=this._actions,i=t._cacheIndex,n=--this._nActiveActions,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r}_addInactiveBinding(t,e,i){const n=this._bindingsByRootAndName,r=this._bindings;let s=n[e];void 0===s&&(s={},n[e]=s),s[i]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,i=t.binding,n=i.rootNode.uuid,r=i.path,s=this._bindingsByRootAndName,o=s[n],a=e[e.length-1],h=t._cacheIndex;a._cacheIndex=h,e[h]=a,e.pop(),delete o[r],0===Object.keys(o).length&&delete s[n]}_lendBinding(t){const e=this._bindings,i=t._cacheIndex,n=this._nActiveBindings++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r}_takeBackBinding(t){const e=this._bindings,i=t._cacheIndex,n=--this._nActiveBindings,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let i=t[e];return void 0===i&&(i=new tc(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=e,t[e]=i),i}_takeBackControlInterpolant(t){const e=this._controlInterpolants,i=t.__cacheIndex,n=--this._nActiveControlInterpolants,r=e[n];t.__cacheIndex=n,e[n]=t,r.__cacheIndex=i,e[i]=r}clipAction(t,e,i){const n=e||this._root,r=n.uuid;let s="string"==typeof t?uc.findByName(n,t):t;const o=null!==s?s.uuid:t,a=this._actionsByClip[o];let h=null;if(void 0===i&&(i=null!==s?s.blendMode:Me),void 0!==a){const t=a.actionByRoot[r];if(void 0!==t&&t.blendMode===i)return t;h=a.knownActions[0],null===s&&(s=h._clip)}if(null===s)return null;const l=new Ld(this,s,e,i);return this._bindAction(l,h),this._addInactiveAction(l,o,r),l}existingAction(t,e){const i=e||this._root,n=i.uuid,r="string"==typeof t?uc.findByName(i,t):t,s=r?r.uuid:t,o=this._actionsByClip[s];return void 0!==o&&o.actionByRoot[n]||null}stopAllAction(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}update(t){t*=this.timeScale;const e=this._actions,i=this._nActiveActions,n=this.time+=t,r=Math.sign(t),s=this._accuIndex^=1;for(let o=0;o!==i;++o){e[o]._update(n,t,r,s)}const o=this._bindings,a=this._nActiveBindings;for(let t=0;t!==a;++t)o[t].apply(s);return this}setTime(t){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,i=t.uuid,n=this._actionsByClip,r=n[i];if(void 0!==r){const t=r.knownActions;for(let i=0,n=t.length;i!==n;++i){const n=t[i];this._deactivateAction(n);const r=n._cacheIndex,s=e[e.length-1];n._cacheIndex=null,n._byClipCacheIndex=null,s._cacheIndex=r,e[r]=s,e.pop(),this._removeInactiveBindingsForAction(n)}delete n[i]}}uncacheRoot(t){const e=t.uuid,i=this._actionsByClip;for(const t in i){const n=i[t].actionByRoot[e];void 0!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}const n=this._bindingsByRootAndName[e];if(void 0!==n)for(const t in n){const e=n[t];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(t,e){const i=this.existingAction(t,e);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}Id.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Dd{constructor(t){"string"==typeof t&&(t=arguments[1]),this.value=t}clone(){return new Dd(void 0===this.value.clone?this.value:this.value.clone())}}class Bd extends uh{constructor(t,e,i=1){super(t,e),this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}Bd.prototype.isInstancedInterleavedBuffer=!0;class kd{constructor(t,e,i,n,r){this.buffer=t,this.type=e,this.itemSize=i,this.elementSize=n,this.count=r,this.version=0}set needsUpdate(t){!0===t&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}kd.prototype.isGLBufferAttribute=!0;class Fd{constructor(t,e,i=0,n=1/0){this.ray=new kn(t,e),this.near=i,this.far=n,this.camera=null,this.layers=new qn,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera&&(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e)}intersectObject(t,e=!0,i=[]){return zd(t,this,i,e),i.sort(Nd),i}intersectObjects(t,e=!0,i=[]){for(let n=0,r=t.length;n<r;n++)zd(t[n],this,i,e);return i.sort(Nd),i}}function Nd(t,e){return t.distance-e.distance}function zd(t,e,i,n){if(t.layers.test(e.layers)&&t.raycast(e,i),!0===n){const n=t.children;for(let t=0,r=n.length;t<r;t++)zd(n[t],e,i,!0)}}class Ud{constructor(t=1,e=0,i=0){return this.radius=t,this.phi=e,this.theta=i,this}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(wi(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Gd{constructor(t=1,e=0,i=0){return this.radius=t,this.theta=e,this.y=i,this}set(t,e,i){return this.radius=t,this.theta=e,this.y=i,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=e,this}clone(){return(new this.constructor).copy(this)}}const Vd=new Ci;class Hd{constructor(t=new Ci(1/0,1/0),e=new Ci(-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=Vd.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Vd.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}Hd.prototype.isBox2=!0;const Wd=new on,jd=new on;class Yd{constructor(t=new on,e=new on){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){Wd.subVectors(t,this.start),jd.subVectors(this.end,this.start);const i=jd.dot(jd);let n=jd.dot(Wd)/i;return e&&(n=wi(n,0,1)),n}closestPointToPoint(t,e,i){const n=this.closestPointToPointParameter(t,e);return this.delta(i).multiplyScalar(n).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const Xd=new on;class qd extends hr{constructor(t,e){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;const i=new Hr,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let t=0,e=1,i=32;t<i;t++,e++){const r=t/i*Math.PI*2,s=e/i*Math.PI*2;n.push(Math.cos(r),Math.sin(r),1,Math.cos(s),Math.sin(s),1)}i.setAttribute("position",new Dr(n,3));const r=new Jh({fog:!1,toneMapped:!1});this.cone=new rl(i,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Xd.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Xd),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Jd=new on,Qd=new Fn,Kd=new Fn;class Zd extends rl{constructor(t){const e=function t(e){const i=[];!0===e.isBone&&i.push(e);for(let n=0;n<e.children.length;n++)i.push.apply(i,t(e.children[n]));return i}(t),i=new Hr,n=[],r=[],s=new Wi(0,0,1),o=new Wi(0,1,0);for(let t=0;t<e.length;t++){const i=e[t];i.parent&&i.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(s.r,s.g,s.b),r.push(o.r,o.g,o.b))}i.setAttribute("position",new Dr(n,3)),i.setAttribute("color",new Dr(r,3));super(i,new Jh({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,i=this.geometry,n=i.getAttribute("position");Kd.copy(this.root.matrixWorld).invert();for(let t=0,i=0;t<e.length;t++){const r=e[t];r.parent&&r.parent.isBone&&(Qd.multiplyMatrices(Kd,r.matrixWorld),Jd.setFromMatrixPosition(Qd),n.setXYZ(i,Jd.x,Jd.y,Jd.z),Qd.multiplyMatrices(Kd,r.parent.matrixWorld),Jd.setFromMatrixPosition(Qd),n.setXYZ(i+1,Jd.x,Jd.y,Jd.z),i+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}class $d extends as{constructor(t,e,i){super(new Lu(e,4,2),new br({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const tp=new on,ep=new Wi,ip=new Wi;class np extends hr{constructor(t,e,i){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const n=new Pu(e);n.rotateY(.5*Math.PI),this.material=new br({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=n.getAttribute("position"),s=new Float32Array(3*r.count);n.setAttribute("color",new Tr(s,3)),this.add(new as(n,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");ep.copy(this.light.color),ip.copy(this.light.groundColor);for(let t=0,i=e.count;t<i;t++){const n=t<i/2?ep:ip;e.setXYZ(t,n.r,n.g,n.b)}e.needsUpdate=!0}t.lookAt(tp.setFromMatrixPosition(this.light.matrixWorld).negate())}}class rp extends rl{constructor(t=10,e=10,i=4473924,n=8947848){i=new Wi(i),n=new Wi(n);const r=e/2,s=t/e,o=t/2,a=[],h=[];for(let t=0,l=0,u=-o;t<=e;t++,u+=s){a.push(-o,0,u,o,0,u),a.push(u,0,-o,u,0,o);const e=t===r?i:n;e.toArray(h,l),l+=3,e.toArray(h,l),l+=3,e.toArray(h,l),l+=3,e.toArray(h,l),l+=3}const l=new Hr;l.setAttribute("position",new Dr(a,3)),l.setAttribute("color",new Dr(h,3));super(l,new Jh({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class sp extends rl{constructor(t=10,e=16,i=8,n=64,r=4473924,s=8947848){r=new Wi(r),s=new Wi(s);const o=[],a=[];for(let i=0;i<=e;i++){const n=i/e*(2*Math.PI),h=Math.sin(n)*t,l=Math.cos(n)*t;o.push(0,0,0),o.push(h,0,l);const u=1&i?r:s;a.push(u.r,u.g,u.b),a.push(u.r,u.g,u.b)}for(let e=0;e<=i;e++){const h=1&e?r:s,l=t-t/i*e;for(let t=0;t<n;t++){let e=t/n*(2*Math.PI),i=Math.sin(e)*l,r=Math.cos(e)*l;o.push(i,0,r),a.push(h.r,h.g,h.b),e=(t+1)/n*(2*Math.PI),i=Math.sin(e)*l,r=Math.cos(e)*l,o.push(i,0,r),a.push(h.r,h.g,h.b)}}const h=new Hr;h.setAttribute("position",new Dr(o,3)),h.setAttribute("color",new Dr(a,3));super(h,new Jh({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const op=new on,ap=new on,hp=new on;class lp extends hr{constructor(t,e,i){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,void 0===e&&(e=1);let n=new Hr;n.setAttribute("position",new Dr([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const r=new Jh({fog:!1,toneMapped:!1});this.lightPlane=new el(n,r),this.add(this.lightPlane),n=new Hr,n.setAttribute("position",new Dr([0,0,0,0,0,1],3)),this.targetLine=new el(n,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){op.setFromMatrixPosition(this.light.matrixWorld),ap.setFromMatrixPosition(this.light.target.matrixWorld),hp.subVectors(ap,op),this.lightPlane.lookAt(ap),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ap),this.targetLine.scale.z=hp.length()}}const up=new on,cp=new fs;class dp extends rl{constructor(t){const e=new Hr,i=new Jh({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],r=[],s={},o=new Wi(16755200),a=new Wi(16711680),h=new Wi(43775),l=new Wi(16777215),u=new Wi(3355443);function c(t,e,i){d(t,i),d(e,i)}function d(t,e){n.push(0,0,0),r.push(e.r,e.g,e.b),void 0===s[t]&&(s[t]=[]),s[t].push(n.length/3-1)}c("n1","n2",o),c("n2","n4",o),c("n4","n3",o),c("n3","n1",o),c("f1","f2",o),c("f2","f4",o),c("f4","f3",o),c("f3","f1",o),c("n1","f1",o),c("n2","f2",o),c("n3","f3",o),c("n4","f4",o),c("p","n1",a),c("p","n2",a),c("p","n3",a),c("p","n4",a),c("u1","u2",h),c("u2","u3",h),c("u3","u1",h),c("c","t",l),c("p","c",u),c("cn1","cn2",u),c("cn3","cn4",u),c("cf1","cf2",u),c("cf3","cf4",u),e.setAttribute("position",new Dr(n,3)),e.setAttribute("color",new Dr(r,3)),super(e,i),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){const t=this.geometry,e=this.pointMap;cp.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),pp("c",e,t,cp,0,0,-1),pp("t",e,t,cp,0,0,1),pp("n1",e,t,cp,-1,-1,-1),pp("n2",e,t,cp,1,-1,-1),pp("n3",e,t,cp,-1,1,-1),pp("n4",e,t,cp,1,1,-1),pp("f1",e,t,cp,-1,-1,1),pp("f2",e,t,cp,1,-1,1),pp("f3",e,t,cp,-1,1,1),pp("f4",e,t,cp,1,1,1),pp("u1",e,t,cp,.7,1.1,-1),pp("u2",e,t,cp,-.7,1.1,-1),pp("u3",e,t,cp,0,2,-1),pp("cf1",e,t,cp,-1,0,1),pp("cf2",e,t,cp,1,0,1),pp("cf3",e,t,cp,0,-1,1),pp("cf4",e,t,cp,0,1,1),pp("cn1",e,t,cp,-1,0,-1),pp("cn2",e,t,cp,1,0,-1),pp("cn3",e,t,cp,0,-1,-1),pp("cn4",e,t,cp,0,1,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function pp(t,e,i,n,r,s,o){up.set(r,s,o).unproject(n);const a=e[t];if(void 0!==a){const t=i.getAttribute("position");for(let e=0,i=a.length;e<i;e++)t.setXYZ(a[e],up.x,up.y,up.z)}}const fp=new ln;class mp extends rl{constructor(t,e=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new Hr;r.setIndex(new Tr(i,1)),r.setAttribute("position",new Tr(n,3)),super(r,new Jh({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==this.object&&fp.setFromObject(this.object),fp.isEmpty())return;const e=fp.min,i=fp.max,n=this.geometry.attributes.position,r=n.array;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=e.x,r[4]=i.y,r[5]=i.z,r[6]=e.x,r[7]=e.y,r[8]=i.z,r[9]=i.x,r[10]=e.y,r[11]=i.z,r[12]=i.x,r[13]=i.y,r[14]=e.z,r[15]=e.x,r[16]=i.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=i.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t){return rl.prototype.copy.call(this,t),this.object=t.object,this}}class gp extends rl{constructor(t,e=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Hr;n.setIndex(new Tr(i,1)),n.setAttribute("position",new Dr([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(n,new Jh({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}}class vp extends el{constructor(t,e=1,i=16776960){const n=i,r=new Hr;r.setAttribute("position",new Dr([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),super(r,new Jh({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const s=new Hr;s.setAttribute("position",new Dr([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),s.computeBoundingSphere(),this.add(new as(s,new br({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){let e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?m:f,this.lookAt(this.plane.normal),super.updateMatrixWorld(t)}}const yp=new on;let Ap,xp;class wp extends hr{constructor(t=new on(0,0,1),e=new on(0,0,0),i=1,n=16776960,r=.2*i,s=.2*r){super(),this.type="ArrowHelper",void 0===Ap&&(Ap=new Hr,Ap.setAttribute("position",new Dr([0,0,0,0,1,0],3)),xp=new Vl(0,.5,1,5,1),xp.translate(0,-.5,0)),this.position.copy(e),this.line=new el(Ap,new Jh({color:n,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new as(xp,new br({color:n,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,r,s)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{yp.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(yp,e)}}setLength(t,e=.2*t,i=.2*e){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}}class bp extends rl{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],i=new Hr;i.setAttribute("position",new Dr(e,3)),i.setAttribute("color",new Dr([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(i,new Jh({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(t,e,i){const n=new Wi,r=this.geometry.attributes.color.array;return n.set(t),n.toArray(r,0),n.toArray(r,3),n.set(e),n.toArray(r,6),n.toArray(r,9),n.set(i),n.toArray(r,12),n.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Sp{constructor(){this.type="ShapePath",this.color=new Wi,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new Nl,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,i,n){return this.currentPath.quadraticCurveTo(t,e,i,n),this}bezierCurveTo(t,e,i,n,r,s){return this.currentPath.bezierCurveTo(t,e,i,n,r,s),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t,e){function i(t){const e=[];for(let i=0,n=t.length;i<n;i++){const n=t[i],r=new Kl;r.curves=n.curves,e.push(r)}return e}function n(t,e){const i=e.length;let n=!1;for(let r=i-1,s=0;s<i;r=s++){let i=e[r],o=e[s],a=o.x-i.x,h=o.y-i.y;if(Math.abs(h)>Number.EPSILON){if(h<0&&(i=e[s],a=-a,o=e[r],h=-h),t.y<i.y||t.y>o.y)continue;if(t.y===i.y){if(t.x===i.x)return!0}else{const e=h*(t.x-i.x)-a*(t.y-i.y);if(0===e)return!0;if(e<0)continue;n=!n}}else{if(t.y!==i.y)continue;if(o.x<=t.x&&t.x<=i.x||i.x<=t.x&&t.x<=o.x)return!0}}return n}const r=Su.isClockWise,s=this.subPaths;if(0===s.length)return[];if(!0===e)return i(s);let o,a,h;const l=[];if(1===s.length)return a=s[0],h=new Kl,h.curves=a.curves,l.push(h),l;let u=!r(s[0].getPoints());u=t?!u:u;const c=[],d=[];let p,f,m=[],g=0;d[g]=void 0,m[g]=[];for(let e=0,i=s.length;e<i;e++)a=s[e],p=a.getPoints(),o=r(p),o=t?!o:o,o?(!u&&d[g]&&g++,d[g]={s:new Kl,p:p},d[g].s.curves=a.curves,u&&g++,m[g]=[]):m[g].push({h:a,p:p[0]});if(!d[0])return i(s);if(d.length>1){let t=!1,e=0;for(let t=0,e=d.length;t<e;t++)c[t]=[];for(let i=0,r=d.length;i<r;i++){const r=m[i];for(let s=0;s<r.length;s++){const o=r[s];let a=!0;for(let r=0;r<d.length;r++)n(o.p,d[r].p)&&(i!==r&&e++,a?(a=!1,c[r].push(o)):t=!0);a&&c[i].push(o)}}e>0&&!1===t&&(m=c)}for(let t=0,e=d.length;t<e;t++){h=d[t].s,l.push(h),f=m[t];for(let t=0,e=f.length;t<e;t++)h.holes.push(f[t].h)}return l}}class Ep{static toHalfFloat(t){Math.abs(t),t=wi(t,-65504,65504),_p[0]=t;const e=Mp[0],i=e>>23&511;return Cp[i]+((8388607&e)>>Pp[i])}static fromHalfFloat(t){const e=t>>10;return Mp[0]=Rp[Lp[e]+(1023&t)]+Op[e],_p[0]}}const Tp=new ArrayBuffer(4),_p=new Float32Array(Tp),Mp=new Uint32Array(Tp),Cp=new Uint32Array(512),Pp=new Uint32Array(512);for(let t=0;t<256;++t){const e=t-127;e<-27?(Cp[t]=0,Cp[256|t]=32768,Pp[t]=24,Pp[256|t]=24):e<-14?(Cp[t]=1024>>-e-14,Cp[256|t]=1024>>-e-14|32768,Pp[t]=-e-1,Pp[256|t]=-e-1):e<=15?(Cp[t]=e+15<<10,Cp[256|t]=e+15<<10|32768,Pp[t]=13,Pp[256|t]=13):e<128?(Cp[t]=31744,Cp[256|t]=64512,Pp[t]=24,Pp[256|t]=24):(Cp[t]=31744,Cp[256|t]=64512,Pp[t]=13,Pp[256|t]=13)}const Rp=new Uint32Array(2048),Op=new Uint32Array(64),Lp=new Uint32Array(64);for(let t=1;t<1024;++t){let e=t<<13,i=0;for(;0==(8388608&e);)e<<=1,i-=8388608;e&=-8388609,i+=947912704,Rp[t]=e|i}for(let t=1024;t<2048;++t)Rp[t]=939524096+(t-1024<<13);for(let t=1;t<31;++t)Op[t]=t<<23;Op[31]=1199570944,Op[32]=2147483648;for(let t=33;t<63;++t)Op[t]=2147483648+(t-32<<23);Op[63]=3347054592;for(let t=1;t<64;++t)32!==t&&(Lp[t]=1024);const Ip=0,Dp=1,Bp=0,kp=1,Fp=2;function Np(t){return t}function zp(t=[]){return t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}class Up extends cl{constructor(t,e){super(t,e)}}class Gp extends Mh{constructor(t){super(t)}}class Vp extends cl{constructor(t,e){super(t,e)}}class Hp extends ol{constructor(t){super(t)}}class Wp extends ol{constructor(t){super(t)}}class jp extends ol{constructor(t){super(t)}}class Yp extends on{constructor(t,e,i){super(t,e,i)}}class Xp extends Tr{constructor(t,e){super(t,e),this.setUsage(ri)}}class qp extends _r{constructor(t,e){super(t,e)}}class Jp extends Mr{constructor(t,e){super(t,e)}}class Qp extends Cr{constructor(t,e){super(t,e)}}class Kp extends Pr{constructor(t,e){super(t,e)}}class Zp extends Rr{constructor(t,e){super(t,e)}}class $p extends Or{constructor(t,e){super(t,e)}}class tf extends Lr{constructor(t,e){super(t,e)}}class ef extends Dr{constructor(t,e){super(t,e)}}class nf extends Br{constructor(t,e){super(t,e)}}vl.create=function(t,e){return t.prototype=Object.create(vl.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Nl.prototype.fromPoints=function(t){return this.setFromPoints(t)};class rf extends bp{constructor(t){super(t)}}class sf extends mp{constructor(t,e){super(t,e)}}class of extends rl{constructor(t,e){super(new Ql(t.geometry),new Jh({color:void 0!==e?e:16777215}))}}rp.prototype.setColors=function(){},Zd.prototype.update=function(){};class af extends rl{constructor(t,e){super(new Fu(t.geometry),new Jh({color:void 0!==e?e:16777215}))}}mc.prototype.extractUrlBase=function(t){return Wc.extractUrlBase(t)},mc.Handlers={add:function(){},get:function(){}};class hf extends vc{constructor(t){super(t)}}class lf extends bc{constructor(t){super(t)}}Hd.prototype.center=function(t){return this.getCenter(t)},Hd.prototype.empty=function(){return this.isEmpty()},Hd.prototype.isIntersectionBox=function(t){return this.intersectsBox(t)},Hd.prototype.size=function(t){return this.getSize(t)},ln.prototype.center=function(t){return this.getCenter(t)},ln.prototype.empty=function(){return this.isEmpty()},ln.prototype.isIntersectionBox=function(t){return this.intersectsBox(t)},ln.prototype.isIntersectionSphere=function(t){return this.intersectsSphere(t)},ln.prototype.size=function(t){return this.getSize(t)},Xn.prototype.toVector3=function(){},Cn.prototype.empty=function(){return this.isEmpty()},Ts.prototype.setFromMatrix=function(t){return this.setFromProjectionMatrix(t)},Yd.prototype.center=function(t){return this.getCenter(t)},Pi.prototype.flattenToArrayOffset=function(t,e){return this.toArray(t,e)},Pi.prototype.multiplyVector3=function(t){return t.applyMatrix3(this)},Pi.prototype.multiplyVector3Array=function(){},Pi.prototype.applyToBufferAttribute=function(t){return t.applyMatrix3(this)},Pi.prototype.applyToVector3Array=function(){},Pi.prototype.getInverse=function(t){return this.copy(t).invert()},Fn.prototype.extractPosition=function(t){return this.copyPosition(t)},Fn.prototype.flattenToArrayOffset=function(t,e){return this.toArray(t,e)},Fn.prototype.getPosition=function(){return(new on).setFromMatrixColumn(this,3)},Fn.prototype.setRotationFromQuaternion=function(t){return this.makeRotationFromQuaternion(t)},Fn.prototype.multiplyToArray=function(){},Fn.prototype.multiplyVector3=function(t){return t.applyMatrix4(this)},Fn.prototype.multiplyVector4=function(t){return t.applyMatrix4(this)},Fn.prototype.multiplyVector3Array=function(){},Fn.prototype.rotateAxis=function(t){t.transformDirection(this)},Fn.prototype.crossVector=function(t){return t.applyMatrix4(this)},Fn.prototype.translate=function(){},Fn.prototype.rotateX=function(){},Fn.prototype.rotateY=function(){},Fn.prototype.rotateZ=function(){},Fn.prototype.rotateByAxis=function(){},Fn.prototype.applyToBufferAttribute=function(t){return t.applyMatrix4(this)},Fn.prototype.applyToVector3Array=function(){},Fn.prototype.makeFrustum=function(t,e,i,n,r,s){return this.makePerspective(t,e,n,i,r,s)},Fn.prototype.getInverse=function(t){return this.copy(t).invert()},bs.prototype.isIntersectionLine=function(t){return this.intersectsLine(t)},sn.prototype.multiplyVector3=function(t){return t.applyQuaternion(this)},sn.prototype.inverse=function(){return this.invert()},kn.prototype.isIntersectionBox=function(t){return this.intersectsBox(t)},kn.prototype.isIntersectionPlane=function(t){return this.intersectsPlane(t)},kn.prototype.isIntersectionSphere=function(t){return this.intersectsSphere(t)},Ar.prototype.area=function(){return this.getArea()},Ar.prototype.barycoordFromPoint=function(t,e){return this.getBarycoord(t,e)},Ar.prototype.midpoint=function(t){return this.getMidpoint(t)},Ar.prototypenormal=function(t){return this.getNormal(t)},Ar.prototype.plane=function(t){return this.getPlane(t)},Ar.barycoordFromPoint=function(t,e,i,n,r){return Ar.getBarycoord(t,e,i,n,r)},Ar.normal=function(t,e,i,n){return Ar.getNormal(t,e,i,n)},Kl.prototype.extractAllPoints=function(t){return this.extractPoints(t)},Kl.prototype.extrude=function(t){return new _u(this,t)},Kl.prototype.makeGeometry=function(t){return new Ou(this,t)},Ci.prototype.fromAttribute=function(t,e,i){return this.fromBufferAttribute(t,e,i)},Ci.prototype.distanceToManhattan=function(t){return this.manhattanDistanceTo(t)},Ci.prototype.lengthManhattan=function(){return this.manhattanLength()},on.prototype.setEulerFromRotationMatrix=function(){},on.prototype.setEulerFromQuaternion=function(){},on.prototype.getPositionFromMatrix=function(t){return this.setFromMatrixPosition(t)},on.prototype.getScaleFromMatrix=function(t){return this.setFromMatrixScale(t)},on.prototype.getColumnFromMatrix=function(t,e){return this.setFromMatrixColumn(e,t)},on.prototype.applyProjection=function(t){return this.applyMatrix4(t)},on.prototype.fromAttribute=function(t,e,i){return this.fromBufferAttribute(t,e,i)},on.prototype.distanceToManhattan=function(t){return this.manhattanDistanceTo(t)},on.prototype.lengthManhattan=function(){return this.manhattanLength()},Ki.prototype.fromAttribute=function(t,e,i){return this.fromBufferAttribute(t,e,i)},Ki.prototype.lengthManhattan=function(){return this.manhattanLength()},hr.prototype.getChildByName=function(t){return this.getObjectByName(t)},hr.prototype.renderDepth=function(){},hr.prototype.translate=function(t,e){return this.translateOnAxis(e,t)},hr.prototype.getWorldRotation=function(){},hr.prototype.applyMatrix=function(t){return this.applyMatrix4(t)},Object.defineProperties(hr.prototype,{eulerOrder:{get:function(){return this.rotation.order},set:function(t){this.rotation.order=t}},useQuaternion:{get:function(){},set:function(){}}}),as.prototype.setDrawMode=function(){},Object.defineProperties(as.prototype,{drawMode:{get:function(){return Pe},set:function(){}}}),Fh.prototype.initBones=function(){},ms.prototype.setLens=function(t,e){void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Ec.prototype,{onlyShadow:{set:function(){}},shadowCameraFov:{set:function(t){this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){}},shadowBias:{set:function(t){this.shadow.bias=t}},shadowDarkness:{set:function(){}},shadowMapWidth:{set:function(t){this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){this.shadow.mapSize.height=t}}}),Object.defineProperties(Tr.prototype,{length:{get:function(){return this.array.length}},dynamic:{get:function(){return this.usage===ri},set:function(){this.setUsage(ri)}}}),Tr.prototype.setDynamic=function(t){return this.setUsage(!0===t?ri:ni),this},Tr.prototype.copyIndicesArray=function(){},Tr.prototype.setArray=function(){},Hr.prototype.addIndex=function(t){this.setIndex(t)},Hr.prototype.addAttribute=function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(this.setIndex(e),this):this.setAttribute(t,e):this.setAttribute(t,new Tr(arguments[1],arguments[2]))},Hr.prototype.addDrawCall=function(t,e,i){this.addGroup(t,e)},Hr.prototype.clearDrawCalls=function(){this.clearGroups()},Hr.prototype.computeOffsets=function(){},Hr.prototype.removeAttribute=function(t){return this.deleteAttribute(t)},Hr.prototype.applyMatrix=function(t){return this.applyMatrix4(t)},Object.defineProperties(Hr.prototype,{drawcalls:{get:function(){return this.groups}},offsets:{get:function(){return this.groups}}}),uh.prototype.setDynamic=function(t){return this.setUsage(!0===t?ri:ni),this},uh.prototype.setArray=function(){},_u.prototype.getArrays=function(){},_u.prototype.addShapeList=function(){},_u.prototype.addShape=function(){},lh.prototype.dispose=function(){},Dd.prototype.onUpdate=function(){return this},Object.defineProperties(wr.prototype,{wrapAround:{get:function(){},set:function(){}},overdraw:{get:function(){},set:function(){}},wrapRGB:{get:function(){return new Wi}},shading:{get:function(){},set:function(t){this.flatShading=t===v}},stencilMask:{get:function(){return this.stencilFuncMask},set:function(t){this.stencilFuncMask=t}},vertexTangents:{get:function(){},set:function(){}}}),Object.defineProperties(ps.prototype,{derivatives:{get:function(){return this.extensions.derivatives},set:function(t){this.extensions.derivatives=t}}}),sh.prototype.clearTarget=function(t,e,i,n){this.setRenderTarget(t),this.clear(e,i,n)},sh.prototype.animate=function(t){this.setAnimationLoop(t)},sh.prototype.getCurrentRenderTarget=function(){return this.getRenderTarget()},sh.prototype.getMaxAnisotropy=function(){return this.capabilities.getMaxAnisotropy()},sh.prototype.getPrecision=function(){return this.capabilities.precision},sh.prototype.resetGLState=function(){return this.state.reset()},sh.prototype.supportsFloatTextures=function(){return this.extensions.get("OES_texture_float")},sh.prototype.supportsHalfFloatTextures=function(){return this.extensions.get("OES_texture_half_float")},sh.prototype.supportsStandardDerivatives=function(){return this.extensions.get("OES_standard_derivatives")},sh.prototype.supportsCompressedTextureS3TC=function(){return this.extensions.get("WEBGL_compressed_texture_s3tc")},sh.prototype.supportsCompressedTexturePVRTC=function(){return this.extensions.get("WEBGL_compressed_texture_pvrtc")},sh.prototype.supportsBlendMinMax=function(){return this.extensions.get("EXT_blend_minmax")},sh.prototype.supportsVertexTextures=function(){return this.capabilities.vertexTextures},sh.prototype.supportsInstancedArrays=function(){return this.extensions.get("ANGLE_instanced_arrays")},sh.prototype.enableScissorTest=function(t){this.setScissorTest(t)},sh.prototype.initMaterial=function(){},sh.prototype.addPrePlugin=function(){},sh.prototype.addPostPlugin=function(){},sh.prototype.updateShadowMap=function(){},sh.prototype.setFaceCulling=function(){},sh.prototype.allocTextureUnit=function(){},sh.prototype.setTexture=function(){},sh.prototype.setTexture2D=function(){},sh.prototype.setTextureCube=function(){},sh.prototype.getActiveMipMapLevel=function(){return this.getActiveMipmapLevel()},Object.defineProperties(sh.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){this.shadowMap.type=t}},shadowMapCullFace:{get:function(){},set:function(){}},context:{get:function(){return this.getContext()}},vr:{get:function(){return this.xr}},gammaInput:{get:function(){return!1},set:function(){}},gammaOutput:{get:function(){return!1},set:function(t){this.outputEncoding=!0===t?Ie:Le}},toneMappingWhitePoint:{get:function(){return 1},set:function(){}},gammaFactor:{get:function(){return 2},set:function(){}}}),Object.defineProperties(qa.prototype,{cullFace:{get:function(){},set:function(){}},renderReverseSided:{get:function(){},set:function(){}},renderSingleSided:{get:function(){},set:function(){}}});class uf extends ys{constructor(t,e,i){super(t,i)}}function cf(){}function df(){}Object.defineProperties(Zi.prototype,{wrapS:{get:function(){return this.texture.wrapS},set:function(t){this.texture.wrapS=t}},wrapT:{get:function(){return this.texture.wrapT},set:function(t){this.texture.wrapT=t}},magFilter:{get:function(){return this.texture.magFilter},set:function(t){this.texture.magFilter=t}},minFilter:{get:function(){return this.texture.minFilter},set:function(t){this.texture.minFilter=t}},anisotropy:{get:function(){return this.texture.anisotropy},set:function(t){this.texture.anisotropy=t}},offset:{get:function(){return this.texture.offset},set:function(t){this.texture.offset=t}},repeat:{get:function(){return this.texture.repeat},set:function(t){this.texture.repeat=t}},format:{get:function(){return this.texture.format},set:function(t){this.texture.format=t}},type:{get:function(){return this.texture.type},set:function(t){this.texture.type=t}},generateMipmaps:{get:function(){return this.texture.generateMipmaps},set:function(t){this.texture.generateMipmaps=t}}}),fd.prototype.load=function(t){const e=this;return(new td).load(t,(function(t){e.setBuffer(t)})),this},xd.prototype.getData=function(){return this.getFrequencyData()},gs.prototype.updateCubeMap=function(t,e){return this.update(t,e)},gs.prototype.clear=function(t,e,i,n){return this.renderTarget.clear(t,e,i,n)},Yi.crossOrigin=void 0,Yi.loadTexture=function(t,e,i,n){const r=new Sc;r.setCrossOrigin(this.crossOrigin);const s=r.load(t,i,void 0,n);return e&&(s.mapping=e),s},Yi.loadTextureCube=function(t,e,i,n){const r=new wc;r.setCrossOrigin(this.crossOrigin);const s=r.load(t,i,void 0,n);return e&&(s.mapping=e),s},Yi.loadCompressedTexture=function(){},Yi.loadCompressedTextureCube=function(){};const pf={createMultiMaterialObject:function(){},detach:function(){},attach:function(){}};function ff(){}class mf extends Hr{constructor(){super()}}class gf extends Hr{constructor(){super()}}function vf(){}function yf(){}function Af(){}class xf extends Zi{constructor(t,e,i){super(t,e,i),this.samples=4}}class wf extends $i{constructor(t,e,i,n){super(t,e,i,n)}}class bf extends en{constructor(t,e,i,n){super(t,e,i,n)}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:n}})),"undefined"!=typeof window&&(window.__THREE__||(window.__THREE__=n))},function(t,e,i){var n,r;function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};void 0===(r="function"==typeof(n=o)?n.call(e,i,e,t):n)||(t.exports=r),o.TypedArrayHelper=function(t,e,i,n){"use strict";this.componentSize=i||1,this.size=e||1,this.TypedArrayConstructor=t||Float32Array,this.array=new t(e*this.componentSize),this.indexOffset=n||0},o.TypedArrayHelper.constructor=o.TypedArrayHelper,o.TypedArrayHelper.prototype.setSize=function(t,e){"use strict";var i=this.array.length;return e||(t*=this.componentSize),t<i?this.shrink(t):t>i?this.grow(t):void 0},o.TypedArrayHelper.prototype.shrink=function(t){"use strict";return this.array=this.array.subarray(0,t),this.size=t,this},o.TypedArrayHelper.prototype.grow=function(t){"use strict";var e=this.array,i=new this.TypedArrayConstructor(t);return i.set(e),this.array=i,this.size=t,this},o.TypedArrayHelper.prototype.splice=function(t,e){"use strict";t*=this.componentSize,e*=this.componentSize;for(var i=[],n=this.array,r=n.length,s=0;s<r;++s)(s<t||s>=e)&&i.push(n[s]);return this.setFromArray(0,i),this},o.TypedArrayHelper.prototype.setFromArray=function(t,e){"use strict";var i=t+e.length;return i>this.array.length?this.grow(i):i<this.array.length&&this.shrink(i),this.array.set(e,this.indexOffset+t),this},o.TypedArrayHelper.prototype.setVec2=function(t,e){"use strict";return this.setVec2Components(t,e.x,e.y)},o.TypedArrayHelper.prototype.setVec2Components=function(t,e,i){"use strict";var n=this.array,r=this.indexOffset+t*this.componentSize;return n[r]=e,n[r+1]=i,this},o.TypedArrayHelper.prototype.setVec3=function(t,e){"use strict";return this.setVec3Components(t,e.x,e.y,e.z)},o.TypedArrayHelper.prototype.setVec3Components=function(t,e,i,n){"use strict";var r=this.array,s=this.indexOffset+t*this.componentSize;return r[s]=e,r[s+1]=i,r[s+2]=n,this},o.TypedArrayHelper.prototype.setVec4=function(t,e){"use strict";return this.setVec4Components(t,e.x,e.y,e.z,e.w)},o.TypedArrayHelper.prototype.setVec4Components=function(t,e,i,n,r){"use strict";var s=this.array,o=this.indexOffset+t*this.componentSize;return s[o]=e,s[o+1]=i,s[o+2]=n,s[o+3]=r,this},o.TypedArrayHelper.prototype.setMat3=function(t,e){"use strict";return this.setFromArray(this.indexOffset+t*this.componentSize,e.elements)},o.TypedArrayHelper.prototype.setMat4=function(t,e){"use strict";return this.setFromArray(this.indexOffset+t*this.componentSize,e.elements)},o.TypedArrayHelper.prototype.setColor=function(t,e){"use strict";return this.setVec3Components(t,e.r,e.g,e.b)},o.TypedArrayHelper.prototype.setNumber=function(t,e){"use strict";return this.array[this.indexOffset+t*this.componentSize]=e,this},o.TypedArrayHelper.prototype.getValueAtIndex=function(t){"use strict";return this.array[this.indexOffset+t]},o.TypedArrayHelper.prototype.getComponentValueAtIndex=function(t){"use strict";return this.array.subarray(this.indexOffset+t*this.componentSize)},o.ShaderAttribute=function(t,e,i){"use strict";var n=o.ShaderAttribute.typeSizeMap;this.type="string"==typeof t&&n.hasOwnProperty(t)?t:"f",this.componentSize=n[this.type],this.arrayType=i||Float32Array,this.typedArray=null,this.bufferAttribute=null,this.dynamicBuffer=!!e,this.updateMin=0,this.updateMax=0},o.ShaderAttribute.constructor=o.ShaderAttribute,o.ShaderAttribute.typeSizeMap={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},o.ShaderAttribute.prototype.setUpdateRange=function(t,e){"use strict";this.updateMin=Math.min(t*this.componentSize,this.updateMin*this.componentSize),this.updateMax=Math.max(e*this.componentSize,this.updateMax*this.componentSize)},o.ShaderAttribute.prototype.flagUpdate=function(){"use strict";var t=this.bufferAttribute,e=t.updateRange;e.offset=this.updateMin,e.count=Math.min(this.updateMax-this.updateMin+this.componentSize,this.typedArray.array.length),t.needsUpdate=!0},o.ShaderAttribute.prototype.resetUpdateRange=function(){"use strict";this.updateMin=0,this.updateMax=0},o.ShaderAttribute.prototype.resetDynamic=function(){"use strict";this.bufferAttribute.usage=this.dynamicBuffer?THREE.DynamicDrawUsage:THREE.StaticDrawUsage},o.ShaderAttribute.prototype.splice=function(t,e){"use strict";this.typedArray.splice(t,e),this.forceUpdateAll()},o.ShaderAttribute.prototype.forceUpdateAll=function(){"use strict";this.bufferAttribute.array=this.typedArray.array,this.bufferAttribute.updateRange.offset=0,this.bufferAttribute.updateRange.count=-1,this.bufferAttribute.usage=THREE.StaticDrawUsage,this.bufferAttribute.needsUpdate=!0},o.ShaderAttribute.prototype._ensureTypedArray=function(t){"use strict";null!==this.typedArray&&this.typedArray.size===t*this.componentSize||(null!==this.typedArray&&this.typedArray.size!==t?this.typedArray.setSize(t):null===this.typedArray&&(this.typedArray=new o.TypedArrayHelper(this.arrayType,t,this.componentSize)))},o.ShaderAttribute.prototype._createBufferAttribute=function(t){"use strict";if(this._ensureTypedArray(t),null!==this.bufferAttribute)return this.bufferAttribute.array=this.typedArray.array,parseFloat(THREE.REVISION)>=81&&(this.bufferAttribute.count=this.bufferAttribute.array.length/this.bufferAttribute.itemSize),void(this.bufferAttribute.needsUpdate=!0);this.bufferAttribute=new THREE.BufferAttribute(this.typedArray.array,this.componentSize),this.bufferAttribute.usage=this.dynamicBuffer?THREE.DynamicDrawUsage:THREE.StaticDrawUsage},o.ShaderAttribute.prototype.getLength=function(){"use strict";return null===this.typedArray?0:this.typedArray.array.length},o.shaderChunks={defines:["#define PACKED_COLOR_SIZE 256.0","#define PACKED_COLOR_DIVISOR 255.0"].join("\n"),uniforms:["uniform float deltaTime;","uniform float runTime;","uniform sampler2D tex;","uniform vec4 textureAnimation;","uniform float scale;","uniform float textureFramesSeperate;","uniform float textureRandomFrame;"].join("\n"),attributes:["attribute vec4 acceleration;","attribute vec3 velocity;","attribute vec4 rotation;","attribute vec3 rotationCenter;","attribute vec4 params;","attribute vec4 size;","attribute vec4 angle;","attribute vec4 color;","attribute vec4 opacity;"].join("\n"),varyings:["varying vec4 vColor;","#ifdef SHOULD_ROTATE_TEXTURE","    varying float vAngle;","#endif","#ifdef SHOULD_CALCULATE_SPRITE","    varying vec4 vSpriteSheet;","#endif"].join("\n"),branchAvoidanceFunctions:["float when_gt(float x, float y) {","    return max(sign(x - y), 0.0);","}","float when_lt(float x, float y) {","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","}","float when_eq( float x, float y ) {","    return 1.0 - abs( sign( x - y ) );","}","float when_ge(float x, float y) {","  return 1.0 - when_lt(x, y);","}","float when_le(float x, float y) {","  return 1.0 - when_gt(x, y);","}","float and(float a, float b) {","    return a * b;","}","float or(float a, float b) {","    return min(a + b, 1.0);","}"].join("\n"),unpackColor:["vec3 unpackColor( in float hex ) {","   vec3 c = vec3( 0.0 );","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float b = mod( hex, PACKED_COLOR_SIZE );","   c.r = r / PACKED_COLOR_DIVISOR;","   c.g = g / PACKED_COLOR_DIVISOR;","   c.b = b / PACKED_COLOR_DIVISOR;","   return c;","}"].join("\n"),unpackRotationAxis:["vec3 unpackRotationAxis( in float hex ) {","   vec3 c = vec3( 0.0 );","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float b = mod( hex, PACKED_COLOR_SIZE );","   c.r = r / PACKED_COLOR_DIVISOR;","   c.g = g / PACKED_COLOR_DIVISOR;","   c.b = b / PACKED_COLOR_DIVISOR;","   c *= vec3( 2.0 );","   c -= vec3( 1.0 );","   return c;","}"].join("\n"),floatOverLifetime:["float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","    float value = 0.0;","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","    float fIndex = 0.0;","    float shouldApplyValue = 0.0;","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH; ++i ) {","       fIndex = float( i );","       shouldApplyValue = when_gt( deltaAge, fIndex ) * when_le( deltaAge, fIndex + 1.0 );","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","    }","","    return value;","}"].join("\n"),colorOverLifetime:["vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","    vec3 value = vec3( 0.0 );","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","    return value;","}"].join("\n"),paramFetchingFunctions:["float getAlive() {","   return params.x;","}","float getAge() {","   return params.y;","}","float getMaxAge() {","   return params.z;","}","float getWiggle() {","   return params.w;","}"].join("\n"),forceFetchingFunctions:["vec4 getPosition( in float age ) {","   return modelViewMatrix * vec4( position, 1.0 );","}","vec3 getVelocity( in float age ) {","   return velocity * age;","}","vec3 getAcceleration( in float age ) {","   return acceleration.xyz * age;","}"].join("\n"),rotationFunctions:["#ifdef SHOULD_ROTATE_PARTICLES","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","       axis = normalize(axis);","       float s = sin(angle);","       float c = cos(angle);","       float oc = 1.0 - c;","","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","                   0.0,                                0.0,                                0.0,                                1.0);","   }","","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","      if( rotation.y == 0.0 ) {","           return pos;","      }","","      vec3 axis = unpackRotationAxis( rotation.x );","      vec3 center = rotationCenter;","      vec3 translated;","      mat4 rotationMatrix;","      float angle = 0.0;","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","      translated = rotationCenter - pos;","      rotationMatrix = getRotationMatrix( axis, angle );","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","   }","#endif"].join("\n"),rotateTexture:["    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","","    #ifdef SHOULD_ROTATE_TEXTURE","       float x = gl_PointCoord.x - 0.5;","       float y = 1.0 - gl_PointCoord.y - 0.5;","       float c = cos( -vAngle );","       float s = sin( -vAngle );","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","    #endif","","    #ifdef SHOULD_CALCULATE_SPRITE","        float framesX = vSpriteSheet.x;","        float framesY = vSpriteSheet.y;","        float columnNorm = vSpriteSheet.z;","        float rowNorm = vSpriteSheet.w;","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","    #endif","","    vec4 rotatedTexture = texture2D( tex, vUv );"].join("\n")},o.shaders={vertex:[o.shaderChunks.defines,o.shaderChunks.uniforms,o.shaderChunks.attributes,o.shaderChunks.varyings,THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,THREE.ShaderChunk.fog_pars_vertex,o.shaderChunks.branchAvoidanceFunctions,o.shaderChunks.unpackColor,o.shaderChunks.unpackRotationAxis,o.shaderChunks.floatOverLifetime,o.shaderChunks.colorOverLifetime,o.shaderChunks.paramFetchingFunctions,o.shaderChunks.forceFetchingFunctions,o.shaderChunks.rotationFunctions,"void main() {","    float age = getAge();","    float alive = getAlive();","    float maxAge = getMaxAge();","    float positionInTime = (age / maxAge);","    float isAlive = when_gt( alive, 0.0 );","    #ifdef SHOULD_WIGGLE_PARTICLES","        float wiggleAmount = positionInTime * getWiggle();","        float wiggleSin = isAlive * sin( wiggleAmount );","        float wiggleCos = isAlive * cos( wiggleAmount );","    #endif","    vec3 vel = getVelocity( age );","    vec3 accel = getAcceleration( age );","    vec3 force = vec3( 0.0 );","    vec3 pos = vec3( position );","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","    force += vel;","    force *= drag;","    force += accel * age;","    pos += force;","    #ifdef SHOULD_WIGGLE_PARTICLES","        pos.x += wiggleSin;","        pos.y += wiggleCos;","        pos.z += wiggleSin;","    #endif","    #ifdef SHOULD_ROTATE_PARTICLES","        pos = getRotation( pos, positionInTime );","    #endif","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","    float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","    #ifdef HAS_PERSPECTIVE","        float perspective = scale / length( mvPosition.xyz );","    #else","        float perspective = 1.0;","    #endif","    float pointSizePerspective = pointSize * perspective;","    #ifdef COLORIZE","       vec3 c = isAlive * getColorOverLifetime(","           positionInTime,","           unpackColor( color.x ),","           unpackColor( color.y ),","           unpackColor( color.z ),","           unpackColor( color.w )","       );","    #else","       vec3 c = vec3(1.0);","    #endif","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","    vColor = vec4( c, o );","    #ifdef SHOULD_ROTATE_TEXTURE","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","    #endif","    #ifdef SHOULD_CALCULATE_SPRITE","        float framesX = textureAnimation.x;","        float framesY = textureAnimation.y;","        float loopCount = textureAnimation.w;","        float totalFrames = textureAnimation.z;","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","        if ( textureFramesSeperate == 1.0 ) {","           vec3 c2 = isAlive * getColorOverLifetime(","               positionInTime,","               unpackColor( color.x ),","               unpackColor( color.y ),","               unpackColor( color.z ),","               unpackColor( color.w )","           );","            frameNumber =  mod( round(maxAge * 40.0), totalFrames );","        }","        float column = floor(mod( frameNumber, framesX ));","        float row = floor( (frameNumber - column) / framesX );","        float columnNorm = column / framesX;","        float rowNorm = row / framesY;","        vSpriteSheet.x = 1.0 / framesX;","        vSpriteSheet.y = 1.0 / framesY;","        vSpriteSheet.z = columnNorm;","        vSpriteSheet.w = rowNorm;","    #endif","    gl_PointSize = pointSizePerspective;","    gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.fog_vertex,"}"].join("\n"),fragment:[o.shaderChunks.uniforms,THREE.ShaderChunk.common,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,o.shaderChunks.varyings,o.shaderChunks.branchAvoidanceFunctions,"void main() {","    vec3 outgoingLight = vColor.xyz;","    ","    #ifdef ALPHATEST","       if ( vColor.w < float(ALPHATEST) ) discard;","    #endif",o.shaderChunks.rotateTexture,THREE.ShaderChunk.logdepthbuf_fragment,"    outgoingLight = vColor.xyz * rotatedTexture.xyz;","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",THREE.ShaderChunk.fog_fragment,"}"].join("\n")},o.utils={types:{BOOLEAN:"boolean",STRING:"string",NUMBER:"number",OBJECT:"object"},ensureTypedArg:function(t,e,i){"use strict";return s(t)===e?t:i},ensureArrayTypedArg:function(t,e,i){"use strict";if(Array.isArray(t)){for(var n=t.length-1;n>=0;--n)if(s(t[n])!==e)return i;return t}return this.ensureTypedArg(t,e,i)},ensureInstanceOf:function(t,e,i){"use strict";return void 0!==e&&t instanceof e?t:i},ensureArrayInstanceOf:function(t,e,i){"use strict";if(Array.isArray(t)){for(var n=t.length-1;n>=0;--n)if(void 0!==e&&t[n]instanceof e==!1)return i;return t}return this.ensureInstanceOf(t,e,i)},ensureValueOverLifetimeCompliance:function(t,e,i){"use strict";e=e||3,i=i||3,!1===Array.isArray(t._value)&&(t._value=[t._value]),!1===Array.isArray(t._spread)&&(t._spread=[t._spread]);var n=this.clamp(t._value.length,e,i),r=this.clamp(t._spread.length,e,i),s=Math.max(n,r);t._value.length!==s&&(t._value=this.interpolateArray(t._value,s)),t._spread.length!==s&&(t._spread=this.interpolateArray(t._spread,s))},interpolateArray:function(t,e){"use strict";for(var i=t.length,n=["function"==typeof t[0].clone?t[0].clone():t[0]],r=(i-1)/(e-1),s=1;s<e-1;++s){var o=s*r,a=Math.floor(o),h=Math.ceil(o),l=o-a;n[s]=this.lerpTypeAgnostic(t[a],t[h],l)}return n.push("function"==typeof t[i-1].clone?t[i-1].clone():t[i-1]),n},clamp:function(t,e,i){"use strict";return Math.max(e,Math.min(t,i))},zeroToEpsilon:function(t,e){"use strict";var i=t;return i=e?1e-5*Math.random()*10:1e-5,t<0&&t>-1e-5&&(i=-i),i},lerpTypeAgnostic:function(t,e,i){"use strict";var n,r=this.types;return s(t)===r.NUMBER&&s(e)===r.NUMBER?t+(e-t)*i:t instanceof THREE.Vector2&&e instanceof THREE.Vector2?((n=t.clone()).x=this.lerp(t.x,e.x,i),n.y=this.lerp(t.y,e.y,i),n):t instanceof THREE.Vector3&&e instanceof THREE.Vector3?((n=t.clone()).x=this.lerp(t.x,e.x,i),n.y=this.lerp(t.y,e.y,i),n.z=this.lerp(t.z,e.z,i),n):t instanceof THREE.Vector4&&e instanceof THREE.Vector4?((n=t.clone()).x=this.lerp(t.x,e.x,i),n.y=this.lerp(t.y,e.y,i),n.z=this.lerp(t.z,e.z,i),n.w=this.lerp(t.w,e.w,i),n):t instanceof THREE.Color&&e instanceof THREE.Color?((n=t.clone()).r=this.lerp(t.r,e.r,i),n.g=this.lerp(t.g,e.g,i),n.b=this.lerp(t.b,e.b,i),n):void 0},lerp:function(t,e,i){"use strict";return t+(e-t)*i},roundToNearestMultiple:function(t,e){"use strict";var i;return 0===e||0===(i=Math.abs(t)%e)?t:t<0?-(Math.abs(t)-i):t+e-i},arrayValuesAreEqual:function(t){"use strict";for(var e=0;e<t.length-1;++e)if(t[e]!==t[e+1])return!1;return!0},randomFloat:function(t,e){"use strict";return t+e*(Math.random()-.5)},randomVector3:function(t,e,i,n,r){"use strict";var s=i.x+(Math.random()*n.x-.5*n.x),o=i.y+(Math.random()*n.y-.5*n.y),a=i.z+(Math.random()*n.z-.5*n.z);r&&(s=.5*-r.x+this.roundToNearestMultiple(s,r.x),o=.5*-r.y+this.roundToNearestMultiple(o,r.y),a=.5*-r.z+this.roundToNearestMultiple(a,r.z)),t.typedArray.setVec3Components(e,s,o,a)},randomColor:function(t,e,i,n){"use strict";var r=i.r+Math.random()*n.x,s=i.g+Math.random()*n.y,o=i.b+Math.random()*n.z;r=this.clamp(r,0,1),s=this.clamp(s,0,1),o=this.clamp(o,0,1),t.typedArray.setVec3Components(e,r,s,o)},randomColorAsHex:function(){"use strict";var t=new THREE.Color;return function(e,i,n,r){for(var s=n.length,o=[],a=0;a<s;++a){var h=r[a];t.copy(n[a]),t.r+=Math.random()*h.x-.5*h.x,t.g+=Math.random()*h.y-.5*h.y,t.b+=Math.random()*h.z-.5*h.z,t.r=this.clamp(t.r,0,1),t.g=this.clamp(t.g,0,1),t.b=this.clamp(t.b,0,1),o.push(t.getHex())}e.typedArray.setVec4Components(i,o[0],o[1],o[2],o[3])}}(),randomVector3OnLine:function(t,e,i,n){"use strict";var r=i.clone();r.lerp(n,Math.random()),t.typedArray.setVec3Components(e,r.x,r.y,r.z)},randomVector3OnSphere:function(t,e,i,n,r,s,o,a){"use strict";var h=2*Math.random()-1,l=6.2832*Math.random(),u=Math.sqrt(1-h*h),c=this.randomFloat(n,r),d=0,p=0,f=0;o&&(c=Math.round(c/o)*o),d=u*Math.cos(l)*c,p=u*Math.sin(l)*c,f=h*c,d*=s.x,p*=s.y,f*=s.z,d+=i.x,p+=i.y,f+=i.z,t.typedArray.setVec3Components(e,d,p,f)},seededRandom:function(t){var e=1e4*Math.sin(t);return e-(0|e)},randomVector3OnDisc:function(t,e,i,n,r,s,o){"use strict";var a=6.2832*Math.random(),h=Math.abs(this.randomFloat(n,r)),l=0,u=0,c=0;o&&(h=Math.round(h/o)*o),l=Math.cos(a)*h,u=Math.sin(a)*h,l*=s.x,u*=s.y,l+=i.x,u+=i.y,c+=i.z,t.typedArray.setVec3Components(e,l,u,c)},randomDirectionVector3OnSphere:function(){"use strict";var t=new THREE.Vector3;return function(e,i,n,r,s,o,a,h){t.copy(o),t.x-=n,t.y-=r,t.z-=s,t.normalize().multiplyScalar(-this.randomFloat(a,h)),e.typedArray.setVec3Components(i,t.x,t.y,t.z)}}(),randomDirectionVector3OnDisc:function(){"use strict";var t=new THREE.Vector3;return function(e,i,n,r,s,o,a,h){t.copy(o),t.x-=n,t.y-=r,t.z-=s,t.normalize().multiplyScalar(-this.randomFloat(a,h)),e.typedArray.setVec3Components(i,t.x,t.y,0)}}(),getPackedRotationAxis:function(){"use strict";var t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Color,n=new THREE.Vector3(1,1,1);return function(r,s){return t.copy(r).normalize(),e.copy(s).normalize(),t.x+=.5*-s.x+Math.random()*s.x,t.y+=.5*-s.y+Math.random()*s.y,t.z+=.5*-s.z+Math.random()*s.z,t.normalize().add(n).multiplyScalar(.5),i.setRGB(t.x,t.y,t.z),i.getHex()}}()},o.Group=function(t){"use strict";var e=o.utils,i=e.types;(t=e.ensureTypedArg(t,i.OBJECT,{})).texture=e.ensureTypedArg(t.texture,i.OBJECT,{}),this.uuid=THREE.Math.generateUUID(),this.fixedTimeStep=e.ensureTypedArg(t.fixedTimeStep,i.NUMBER,.016),this.texture=e.ensureInstanceOf(t.texture.value,THREE.Texture,null),this.textureFrames=e.ensureInstanceOf(t.texture.frames,THREE.Vector2,new THREE.Vector2(1,1)),this.textureFrameCount=e.ensureTypedArg(t.texture.frameCount,i.NUMBER,this.textureFrames.x*this.textureFrames.y),this.textureLoop=e.ensureTypedArg(t.texture.loop,i.NUMBER,1),this.textureFrames.max(new THREE.Vector2(1,1)),this.textureFramesSeperate=t.texture.useSeperate;Math.floor(Math.random()*this.textureFrameCount);this.textureRandomFrame=3,this.hasPerspective=e.ensureTypedArg(t.hasPerspective,i.BOOLEAN,!0),this.colorize=e.ensureTypedArg(t.colorize,i.BOOLEAN,!0),this.maxParticleCount=e.ensureTypedArg(t.maxParticleCount,i.NUMBER,null),this.blending=e.ensureTypedArg(t.blending,i.NUMBER,THREE.AdditiveBlending),this.transparent=e.ensureTypedArg(t.transparent,i.BOOLEAN,!0),this.alphaTest=parseFloat(e.ensureTypedArg(t.alphaTest,i.NUMBER,0)),this.depthWrite=e.ensureTypedArg(t.depthWrite,i.BOOLEAN,!1),this.depthTest=e.ensureTypedArg(t.depthTest,i.BOOLEAN,!0),this.fog=e.ensureTypedArg(t.fog,i.BOOLEAN,!0),this.scale=e.ensureTypedArg(t.scale,i.NUMBER,300),this.emitters=[],this.emitterIDs=[],this._pool=[],this._poolCreationSettings=null,this._createNewWhenPoolEmpty=0,this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!1,this.particleCount=0,this.uniforms={tex:{type:"t",value:this.texture},textureAnimation:{type:"v4",value:new THREE.Vector4(this.textureFrames.x,this.textureFrames.y,this.textureFrameCount,Math.max(Math.abs(this.textureLoop),1))},textureFramesSeperate:{type:"f",value:this.textureFramesSeperate?1:0},textureRandomFrame:{type:"f",value:this.textureRandomFrame?1:0},fogColor:{type:"c",value:this.fog?new THREE.Color:null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this.scale}},this.defines={HAS_PERSPECTIVE:this.hasPerspective,COLORIZE:this.colorize,VALUE_OVER_LIFETIME_LENGTH:o.valueOverLifetimeLength,SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this.textureFrames.x>1||this.textureFrames.y>1},this.attributes={position:new o.ShaderAttribute("v3",!0),acceleration:new o.ShaderAttribute("v4",!0),velocity:new o.ShaderAttribute("v3",!0),rotation:new o.ShaderAttribute("v4",!0),rotationCenter:new o.ShaderAttribute("v3",!0),params:new o.ShaderAttribute("v4",!0),size:new o.ShaderAttribute("v4",!0),angle:new o.ShaderAttribute("v4",!0),color:new o.ShaderAttribute("v4",!0),opacity:new o.ShaderAttribute("v4",!0)},this.attributeKeys=Object.keys(this.attributes),this.attributeCount=this.attributeKeys.length,this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:o.shaders.vertex,fragmentShader:o.shaders.fragment,blending:this.blending,transparent:this.transparent,alphaTest:this.alphaTest,depthWrite:this.depthWrite,depthTest:this.depthTest,defines:this.defines,fog:this.fog}),this.geometry=new THREE.BufferGeometry,this.mesh=new THREE.Points(this.geometry,this.material),this.maxParticleCount},o.Group.constructor=o.Group,o.Group.prototype._updateDefines=function(){"use strict";for(var t,e=this.emitters,i=e.length-1,n=this.defines;i>=0;--i)t=e[i],n.SHOULD_CALCULATE_SPRITE||(n.SHOULD_ROTATE_TEXTURE=n.SHOULD_ROTATE_TEXTURE||!!Math.max(Math.max.apply(null,t.angle.value),Math.max.apply(null,t.angle.spread))),n.SHOULD_ROTATE_PARTICLES=n.SHOULD_ROTATE_PARTICLES||!!Math.max(t.rotation.angle,t.rotation.angleSpread),n.SHOULD_WIGGLE_PARTICLES=n.SHOULD_WIGGLE_PARTICLES||!!Math.max(t.wiggle.value,t.wiggle.spread);this.material.needsUpdate=!0},o.Group.prototype._applyAttributesToGeometry=function(){"use strict";var t,e,i=this.attributes,n=this.geometry,r=n.attributes;for(var s in i)i.hasOwnProperty(s)&&(t=i[s],(e=r[s])?e.array=t.typedArray.array:n.setAttribute(s,t.bufferAttribute),t.bufferAttribute.needsUpdate=!0);this.geometry.setDrawRange(0,this.particleCount)},o.Group.prototype.addEmitter=function(t){"use strict";if(t instanceof o.Emitter!=!1&&!(this.emitterIDs.indexOf(t.uuid)>-1)&&null===t.group){var e=this.attributes,i=this.particleCount,n=i+t.particleCount;for(var r in this.particleCount=n,null!==this.maxParticleCount&&(this.particleCount,this.maxParticleCount),t._calculatePPSValue(t.maxAge._value+t.maxAge._spread),t._setBufferUpdateRanges(this.attributeKeys),t._setAttributeOffset(i),t.group=this,t.attributes=this.attributes,e)e.hasOwnProperty(r)&&e[r]._createBufferAttribute(null!==this.maxParticleCount?this.maxParticleCount:this.particleCount);for(var s=i;s<n;++s)t._assignPositionValue(s),t._assignForceValue(s,"velocity"),t._assignForceValue(s,"acceleration"),t._assignAbsLifetimeValue(s,"opacity"),t._assignAbsLifetimeValue(s,"size"),t._assignAngleValue(s),t._assignRotationValue(s),t._assignParamsValue(s),t._assignColorValue(s);return this._applyAttributesToGeometry(),this.emitters.push(t),this.emitterIDs.push(t.uuid),this._updateDefines(t),this.material.needsUpdate=!0,this.geometry.needsUpdate=!0,this._attributesNeedRefresh=!0,this}},o.Group.prototype.removeEmitter=function(t){"use strict";var e=this.emitterIDs.indexOf(t.uuid);if(t instanceof o.Emitter!=!1&&-1!==e){for(var i=t.attributeOffset,n=i+t.particleCount,r=this.attributes.params.typedArray,s=i;s<n;++s)r.array[4*s]=0,r.array[4*s+1]=0;for(var a in this.emitters.splice(e,1),this.emitterIDs.splice(e,1),this.attributes)this.attributes.hasOwnProperty(a)&&this.attributes[a].splice(i,n);this.particleCount-=t.particleCount,t._onRemove(),this._attributesNeedRefresh=!0}},o.Group.prototype.getFromPool=function(){"use strict";var t=this._pool,e=this._createNewWhenPoolEmpty;if(t.length)return t.pop();if(e){var i=new o.Emitter(this._poolCreationSettings);return this.addEmitter(i),i}return null},o.Group.prototype.releaseIntoPool=function(t){"use strict";if(t instanceof o.Emitter!=!1)return t.reset(),this._pool.unshift(t),this},o.Group.prototype.getPool=function(){"use strict";return this._pool},o.Group.prototype.addPool=function(t,e,i){"use strict";var n;this._poolCreationSettings=e,this._createNewWhenPoolEmpty=!!i;for(var r=0;r<t;++r)n=Array.isArray(e)?new o.Emitter(e[r]):new o.Emitter(e),this.addEmitter(n),this.releaseIntoPool(n);return this},o.Group.prototype._triggerSingleEmitter=function(t){"use strict";var e=this.getFromPool(),i=this;if(null!==e)return t instanceof THREE.Vector3&&(e.position.value.copy(t),e.position.value=e.position.value),e.enable(),setTimeout((function(){e.disable(),i.releaseIntoPool(e)}),1e3*Math.max(e.duration,e.maxAge.value+e.maxAge.spread)),this},o.Group.prototype.triggerPoolEmitter=function(t,e){"use strict";if("number"==typeof t&&t>1)for(var i=0;i<t;++i)this._triggerSingleEmitter(e);else this._triggerSingleEmitter(e);return this},o.Group.prototype._updateUniforms=function(t){"use strict";this.uniforms.runTime.value+=t,this.uniforms.deltaTime.value=t},o.Group.prototype._resetBufferRanges=function(){"use strict";for(var t=this.attributeKeys,e=this.attributeCount-1,i=this.attributes;e>=0;--e)i[t[e]].resetUpdateRange()},o.Group.prototype._updateBuffers=function(t){"use strict";for(var e,i,n,r=this.attributeKeys,s=this.attributeCount-1,o=this.attributes,a=t.bufferUpdateRanges;s>=0;--s)i=a[e=r[s]],(n=o[e]).setUpdateRange(i.min,i.max),n.flagUpdate()},o.Group.prototype.tick=function(t){"use strict";var e=this.emitters,i=e.length,n=t||this.fixedTimeStep,r=this.attributeKeys,s=this.attributes;if(this._updateUniforms(n),this._resetBufferRanges(),0!==i||!1!==this._attributesNeedRefresh||!1!==this._attributesNeedDynamicReset){for(var o,a=0;a<i;++a)(o=e[a]).tick(n),this._updateBuffers(o);if(!0===this._attributesNeedDynamicReset){for(a=this.attributeCount-1;a>=0;--a)s[r[a]].resetDynamic();this._attributesNeedDynamicReset=!1}if(!0===this._attributesNeedRefresh){for(a=this.attributeCount-1;a>=0;--a)s[r[a]].forceUpdateAll();this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!0}}},o.Group.prototype.dispose=function(){"use strict";return this.geometry.dispose(),this.material.dispose(),this},o.Emitter=function(t){"use strict";var e=o.utils,i=e.types,n=o.valueOverLifetimeLength;for(var r in(t=e.ensureTypedArg(t,i.OBJECT,{})).position=e.ensureTypedArg(t.position,i.OBJECT,{}),t.velocity=e.ensureTypedArg(t.velocity,i.OBJECT,{}),t.acceleration=e.ensureTypedArg(t.acceleration,i.OBJECT,{}),t.radius=e.ensureTypedArg(t.radius,i.OBJECT,{}),t.drag=e.ensureTypedArg(t.drag,i.OBJECT,{}),t.rotation=e.ensureTypedArg(t.rotation,i.OBJECT,{}),t.color=e.ensureTypedArg(t.color,i.OBJECT,{}),t.opacity=e.ensureTypedArg(t.opacity,i.OBJECT,{}),t.size=e.ensureTypedArg(t.size,i.OBJECT,{}),t.angle=e.ensureTypedArg(t.angle,i.OBJECT,{}),t.wiggle=e.ensureTypedArg(t.wiggle,i.OBJECT,{}),t.maxAge=e.ensureTypedArg(t.maxAge,i.OBJECT,{}),t.onParticleSpawn,this.uuid=THREE.Math.generateUUID(),this.type=e.ensureTypedArg(t.type,i.NUMBER,o.distributions.BOX),this.position={_value:e.ensureInstanceOf(t.position.value,THREE.Vector3,new THREE.Vector3),_spread:e.ensureInstanceOf(t.position.spread,THREE.Vector3,new THREE.Vector3),_spreadClamp:e.ensureInstanceOf(t.position.spreadClamp,THREE.Vector3,new THREE.Vector3),_distribution:e.ensureTypedArg(t.position.distribution,i.NUMBER,this.type),_randomise:e.ensureTypedArg(t.position.randomise,i.BOOLEAN,!1),_radius:e.ensureTypedArg(t.position.radius,i.NUMBER,10),_radiusScale:e.ensureInstanceOf(t.position.radiusScale,THREE.Vector3,new THREE.Vector3(1,1,1)),_distributionClamp:e.ensureTypedArg(t.position.distributionClamp,i.NUMBER,0)},this.velocity={_value:e.ensureInstanceOf(t.velocity.value,THREE.Vector3,new THREE.Vector3),_spread:e.ensureInstanceOf(t.velocity.spread,THREE.Vector3,new THREE.Vector3),_distribution:e.ensureTypedArg(t.velocity.distribution,i.NUMBER,this.type),_randomise:e.ensureTypedArg(t.position.randomise,i.BOOLEAN,!1)},this.acceleration={_value:e.ensureInstanceOf(t.acceleration.value,THREE.Vector3,new THREE.Vector3),_spread:e.ensureInstanceOf(t.acceleration.spread,THREE.Vector3,new THREE.Vector3),_distribution:e.ensureTypedArg(t.acceleration.distribution,i.NUMBER,this.type),_randomise:e.ensureTypedArg(t.position.randomise,i.BOOLEAN,!1)},this.drag={_value:e.ensureTypedArg(t.drag.value,i.NUMBER,0),_spread:e.ensureTypedArg(t.drag.spread,i.NUMBER,0),_randomise:e.ensureTypedArg(t.position.randomise,i.BOOLEAN,!1)},this.wiggle={_value:e.ensureTypedArg(t.wiggle.value,i.NUMBER,0),_spread:e.ensureTypedArg(t.wiggle.spread,i.NUMBER,0)},this.rotation={_axis:e.ensureInstanceOf(t.rotation.axis,THREE.Vector3,new THREE.Vector3(0,1,0)),_axisSpread:e.ensureInstanceOf(t.rotation.axisSpread,THREE.Vector3,new THREE.Vector3),_angle:e.ensureTypedArg(t.rotation.angle,i.NUMBER,0),_angleSpread:e.ensureTypedArg(t.rotation.angleSpread,i.NUMBER,0),_static:e.ensureTypedArg(t.rotation.static,i.BOOLEAN,!1),_center:e.ensureInstanceOf(t.rotation.center,THREE.Vector3,this.position._value.clone()),_randomise:e.ensureTypedArg(t.position.randomise,i.BOOLEAN,!1)},this.maxAge={_value:e.ensureTypedArg(t.maxAge.value,i.NUMBER,2),_spread:e.ensureTypedArg(t.maxAge.spread,i.NUMBER,0)},this.color={_value:e.ensureArrayInstanceOf(t.color.value,THREE.Color,new THREE.Color),_spread:e.ensureArrayInstanceOf(t.color.spread,THREE.Vector3,new THREE.Vector3),_randomise:e.ensureTypedArg(t.position.randomise,i.BOOLEAN,!1)},this.opacity={_value:e.ensureArrayTypedArg(t.opacity.value,i.NUMBER,1),_spread:e.ensureArrayTypedArg(t.opacity.spread,i.NUMBER,0),_randomise:e.ensureTypedArg(t.position.randomise,i.BOOLEAN,!1)},this.size={_value:e.ensureArrayTypedArg(t.size.value,i.NUMBER,1),_spread:e.ensureArrayTypedArg(t.size.spread,i.NUMBER,0),_randomise:e.ensureTypedArg(t.position.randomise,i.BOOLEAN,!1)},this.angle={_value:e.ensureArrayTypedArg(t.angle.value,i.NUMBER,0),_spread:e.ensureArrayTypedArg(t.angle.spread,i.NUMBER,0),_randomise:e.ensureTypedArg(t.position.randomise,i.BOOLEAN,!1)},this.particleCount=e.ensureTypedArg(t.particleCount,i.NUMBER,100),this.duration=e.ensureTypedArg(t.duration,i.NUMBER,null),this.isStatic=e.ensureTypedArg(t.isStatic,i.BOOLEAN,!1),this.activeMultiplier=e.ensureTypedArg(t.activeMultiplier,i.NUMBER,1),this.direction=e.ensureTypedArg(t.direction,i.NUMBER,1),this.alive=e.ensureTypedArg(t.alive,i.BOOLEAN,!0),this.particlesPerSecond=0,this.activationIndex=0,this.attributeOffset=0,this.attributeEnd=0,this.age=0,this.activeParticleCount=0,this.group=null,this.attributes=null,this.paramsArray=null,this.resetFlags={position:e.ensureTypedArg(t.position.randomise,i.BOOLEAN,!1)||e.ensureTypedArg(t.radius.randomise,i.BOOLEAN,!1),velocity:e.ensureTypedArg(t.velocity.randomise,i.BOOLEAN,!1),acceleration:e.ensureTypedArg(t.acceleration.randomise,i.BOOLEAN,!1)||e.ensureTypedArg(t.drag.randomise,i.BOOLEAN,!1),rotation:e.ensureTypedArg(t.rotation.randomise,i.BOOLEAN,!1),rotationCenter:e.ensureTypedArg(t.rotation.randomise,i.BOOLEAN,!1),size:e.ensureTypedArg(t.size.randomise,i.BOOLEAN,!1),color:e.ensureTypedArg(t.color.randomise,i.BOOLEAN,!1),opacity:e.ensureTypedArg(t.opacity.randomise,i.BOOLEAN,!1),angle:e.ensureTypedArg(t.angle.randomise,i.BOOLEAN,!1)},this.updateFlags={},this.updateCounts={},this.updateMap={maxAge:"params",position:"position",velocity:"velocity",acceleration:"acceleration",drag:"acceleration",wiggle:"params",rotation:"rotation",size:"size",color:"color",opacity:"opacity",angle:"angle"},this.updateMap)this.updateMap.hasOwnProperty(r)&&(this.updateCounts[this.updateMap[r]]=0,this.updateFlags[this.updateMap[r]]=!1,this._createGetterSetters(this[r],r));this.bufferUpdateRanges={},this.attributeKeys=null,this.attributeCount=0,e.ensureValueOverLifetimeCompliance(this.color,n,n),e.ensureValueOverLifetimeCompliance(this.opacity,n,n),e.ensureValueOverLifetimeCompliance(this.size,n,n),e.ensureValueOverLifetimeCompliance(this.angle,n,n)},o.Emitter.constructor=o.Emitter,o.Emitter.prototype._createGetterSetters=function(t,e){"use strict";var i=this;for(var n in t)if(t.hasOwnProperty(n)){var r=n.replace("_","");Object.defineProperty(t,r,{get:function(t){return function(){return this[t]}}(n),set:function(t){return function(n){var r=i.updateMap[e],s=this[t],a=o.valueOverLifetimeLength;"_rotationCenter"===t?(i.updateFlags.rotationCenter=!0,i.updateCounts.rotationCenter=0):"_randomise"===t?i.resetFlags[r]=n:(i.updateFlags[r]=!0,i.updateCounts[r]=0),i.group._updateDefines(),this[t]=n,Array.isArray(s)&&o.utils.ensureValueOverLifetimeCompliance(i[e],a,a)}}(n)})}},o.Emitter.prototype._setBufferUpdateRanges=function(t){"use strict";this.attributeKeys=t,this.attributeCount=t.length;for(var e=this.attributeCount-1;e>=0;--e)this.bufferUpdateRanges[t[e]]={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}},o.Emitter.prototype._calculatePPSValue=function(t){"use strict";var e=this.particleCount;this.duration?this.particlesPerSecond=e/(t<this.duration?t:this.duration):this.particlesPerSecond=e/t},o.Emitter.prototype._setAttributeOffset=function(t){this.attributeOffset=t,this.activationIndex=t,this.activationEnd=t+this.particleCount},o.Emitter.prototype._assignValue=function(t,e){"use strict";switch(t){case"position":this._assignPositionValue(e);break;case"velocity":case"acceleration":this._assignForceValue(e,t);break;case"size":case"opacity":this._assignAbsLifetimeValue(e,t);break;case"angle":this._assignAngleValue(e);break;case"params":this._assignParamsValue(e);break;case"rotation":this._assignRotationValue(e);break;case"color":this._assignColorValue(e)}},o.Emitter.prototype._assignPositionValue=function(t){"use strict";var e=o.distributions,i=o.utils,n=this.position,r=this.attributes.position,s=n._value,a=n._spread;switch(n._distribution){case e.BOX:i.randomVector3(r,t,s,a,n._spreadClamp);break;case e.SPHERE:i.randomVector3OnSphere(r,t,s,n._radius,n._spread.x,n._radiusScale,n._spreadClamp.x,n._distributionClamp||this.particleCount);break;case e.DISC:i.randomVector3OnDisc(r,t,s,n._radius,n._spread.x,n._radiusScale,n._spreadClamp.x);break;case e.LINE:i.randomVector3OnLine(r,t,s,a)}},o.Emitter.prototype._assignForceValue=function(t,e){"use strict";var i,n,r,s,a,h=o.distributions,l=o.utils,u=this[e],c=u._value,d=u._spread;switch(u._distribution){case h.BOX:l.randomVector3(this.attributes[e],t,c,d);break;case h.SPHERE:n=(i=this.attributes.position.typedArray.array)[a=3*t],r=i[a+1],s=i[a+2],l.randomDirectionVector3OnSphere(this.attributes[e],t,n,r,s,this.position._value,u._value.x,u._spread.x);break;case h.DISC:n=(i=this.attributes.position.typedArray.array)[a=3*t],r=i[a+1],s=i[a+2],l.randomDirectionVector3OnDisc(this.attributes[e],t,n,r,s,this.position._value,u._value.x,u._spread.x);break;case h.LINE:l.randomVector3OnLine(this.attributes[e],t,c,d)}if("acceleration"===e){var p=l.clamp(l.randomFloat(this.drag._value,this.drag._spread),0,1);this.attributes.acceleration.typedArray.array[4*t+3]=p}},o.Emitter.prototype._assignAbsLifetimeValue=function(t,e){"use strict";var i,n=this.attributes[e].typedArray,r=this[e],s=o.utils;s.arrayValuesAreEqual(r._value)&&s.arrayValuesAreEqual(r._spread)?(i=Math.abs(s.randomFloat(r._value[0],r._spread[0])),n.setVec4Components(t,i,i,i,i)):n.setVec4Components(t,Math.abs(s.randomFloat(r._value[0],r._spread[0])),Math.abs(s.randomFloat(r._value[1],r._spread[1])),Math.abs(s.randomFloat(r._value[2],r._spread[2])),Math.abs(s.randomFloat(r._value[3],r._spread[3])))},o.Emitter.prototype._assignAngleValue=function(t){"use strict";var e,i=this.attributes.angle.typedArray,n=this.angle,r=o.utils;r.arrayValuesAreEqual(n._value)&&r.arrayValuesAreEqual(n._spread)?(e=r.randomFloat(n._value[0],n._spread[0]),i.setVec4Components(t,e,e,e,e)):i.setVec4Components(t,r.randomFloat(n._value[0],n._spread[0]),r.randomFloat(n._value[1],n._spread[1]),r.randomFloat(n._value[2],n._spread[2]),r.randomFloat(n._value[3],n._spread[3]))},o.Emitter.prototype._assignParamsValue=function(t){"use strict";this.attributes.params.typedArray.setVec4Components(t,this.isStatic?1:0,0,Math.abs(o.utils.randomFloat(this.maxAge._value,this.maxAge._spread)),o.utils.randomFloat(this.wiggle._value,this.wiggle._spread))},o.Emitter.prototype._assignRotationValue=function(t){"use strict";this.attributes.rotation.typedArray.setVec3Components(t,o.utils.getPackedRotationAxis(this.rotation._axis,this.rotation._axisSpread),o.utils.randomFloat(this.rotation._angle,this.rotation._angleSpread),this.rotation._static?0:1),this.attributes.rotationCenter.typedArray.setVec3(t,this.rotation._center)},o.Emitter.prototype._assignColorValue=function(t){"use strict";o.utils.randomColorAsHex(this.attributes.color,t,this.color._value,this.color._spread)},o.Emitter.prototype._resetParticle=function(t){"use strict";for(var e,i,n=this.resetFlags,r=this.updateFlags,s=this.updateCounts,o=this.attributeKeys,a=this.attributeCount-1;a>=0;--a)i=r[e=o[a]],!0!==n[e]&&!0!==i||(this._assignValue(e,t),this._updateAttributeUpdateRange(e,t),!0===i&&s[e]===this.particleCount?(r[e]=!1,s[e]=0):1==i&&++s[e])},o.Emitter.prototype._updateAttributeUpdateRange=function(t,e){"use strict";var i=this.bufferUpdateRanges[t];i.min=Math.min(e,i.min),i.max=Math.max(e,i.max)},o.Emitter.prototype._resetBufferRanges=function(){"use strict";for(var t,e=this.bufferUpdateRanges,i=this.bufferUpdateKeys,n=this.bufferUpdateCount-1;n>=0;--n)e[t=i[n]].min=Number.POSITIVE_INFINITY,e[t].max=Number.NEGATIVE_INFINITY},o.Emitter.prototype._onRemove=function(){"use strict";this.particlesPerSecond=0,this.attributeOffset=0,this.activationIndex=0,this.activeParticleCount=0,this.group=null,this.attributes=null,this.paramsArray=null,this.age=0},o.Emitter.prototype._decrementParticleCount=function(){"use strict";--this.activeParticleCount},o.Emitter.prototype._incrementParticleCount=function(){"use strict";++this.activeParticleCount},o.Emitter.prototype._checkParticleAges=function(t,e,i,n){"use strict";for(var r,s,o,a,h=e-1;h>=t;--h)0!==(a=i[r=4*h])&&(o=i[r+1],s=i[r+2],1===this.direction?(o+=n)>=s&&(o=0,a=0,this._decrementParticleCount()):(o-=n)<=0&&(o=s,a=0,this._decrementParticleCount()),i[r]=a,i[r+1]=o,this._updateAttributeUpdateRange("params",h))},o.Emitter.prototype._activateParticles=function(t,e,i,n){"use strict";for(var r,s,o=this.direction,a=t;a<e;++a)0!=i[r=4*a]&&1!==this.particleCount||(this._incrementParticleCount(),i[r]=1,this._resetParticle(a),s=n*(a-t),i[r+1]=-1===o?i[r+2]-s:s,this._updateAttributeUpdateRange("params",a))},o.Emitter.prototype.tick=function(t){"use strict";if(!this.isStatic){null===this.paramsArray&&(this.paramsArray=this.attributes.params.typedArray.array);var e=this.attributeOffset,i=e+this.particleCount,n=this.paramsArray,r=this.particlesPerSecond*this.activeMultiplier*t,s=this.activationIndex;if(this._resetBufferRanges(),this._checkParticleAges(e,i,n,t),!1!==this.alive){if(null!==this.duration&&this.age>this.duration)return this.alive=!1,void(this.age=0);var o=1===this.particleCount?s:0|s,a=Math.min(o+r,this.activationEnd),h=a-this.activationIndex|0,l=h>0?t/h:0;this._activateParticles(o,a,n,l),this.activationIndex+=r,this.activationIndex>i&&(this.activationIndex=e),this.age+=t}else this.age=0}},o.Emitter.prototype.sendParticles=function(t){"use strict";if(!this.isStatic){null===this.paramsArray&&(this.paramsArray=this.attributes.params.typedArray.array);var e=this.attributeOffset,i=e+this.particleCount,n=this.paramsArray,r=this.particlesPerSecond*this.activeMultiplier*t,s=this.activationIndex,o=1===this.particleCount?s:0|s,a=Math.min(o+r,this.activationEnd),h=a-this.activationIndex|0,l=h>0?t/h:0;this._activateParticles(o,a,n,l),this.activationIndex+=r,this.activationIndex>i&&(this.activationIndex=e)}},o.Emitter.prototype.reset=function(t){"use strict";if(this.age=0,this.alive=!1,!0===t){for(var e,i=this.attributeOffset,n=i+this.particleCount,r=this.paramsArray,s=this.attributes.params.bufferAttribute,o=n-1;o>=i;--o)r[e=4*o]=0,r[e+1]=0;s.updateRange.offset=0,s.updateRange.count=-1,s.needsUpdate=!0}return this},o.Emitter.prototype.enable=function(){"use strict";return this.alive=!0,this},o.Emitter.prototype.disable=function(){"use strict";return this.alive=!1,this},o.Emitter.prototype.remove=function(){"use strict";return null!==this.group&&this.group.removeEmitter(this),this}},function(t,e,i){(function(i){var n;!function(){"use strict";var r=function(){this.init()};r.prototype={init:function(){var t=this||s;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||s;if(t=parseFloat(t),e.ctx||p(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,s.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var o=e._howls[i]._soundById(n[r]);o&&o._node&&(o._node.volume=o._volume*t)}return e}return e._volume},mute:function(t){var e=this||s;e.ctx||p(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,s.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var o=e._howls[i]._soundById(n[r]);o&&o._node&&(o._node.muted=!!t||o._muted)}return e},stop:function(){for(var t=this||s,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||s,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,p()),t},codecs:function(t){return(this||s)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||s;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||s,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var i=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n=t._navigator?t._navigator.userAgent:"",r=n.match(/OPR\/([0-6].)/g),o=r&&parseInt(r[0].split("/")[1],10)<33,a=-1!==n.indexOf("Safari")&&-1===n.indexOf("Chrome"),h=n.match(/Version\/(.*?) /),l=a&&h&&parseInt(h[1],10)<15;return t._codecs={mp3:!(o||!i&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(l||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(l||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||s;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(i){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var n=new Audio;n._unlocked=!0,t._releaseHtml5Audio(n)}catch(i){t.noAudio=!0;break}for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var s=t._howls[r]._getSoundIds(),o=0;o<s.length;o++){var a=t._howls[r]._soundById(s[o]);a&&a._node&&!a._node._unlocked&&(a._node._unlocked=!0,a._node.load())}t._autoResume();var h=t.ctx.createBufferSource();h.buffer=t._scratchBuffer,h.connect(t.ctx.destination),void 0===h.start?h.noteOn(0):h.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),h.onended=function(){h.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0);for(var i=0;i<t._howls.length;i++)t._howls[i]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0),t}},_obtainHtml5Audio:function(){var t=this||s;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch((function(){})),new Audio},_releaseHtml5Audio:function(t){var e=this||s;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&s.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var i=0;i<t._howls[e]._sounds.length;i++)if(!t._howls[e]._sounds[i]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&s.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then((function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var s=new r,o=function(t){t.src&&0!==t.src.length&&this.init(t)};o.prototype={init:function(t){var e=this;return s.ctx||p(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=s.usingWebAudio&&!e._html5,void 0!==s.ctx&&s.ctx&&s.autoUnlock&&s._unlockAudio(),s._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=null;if(s.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var e=0;e<this._src.length;e++){var i,n;if(this._format&&this._format[e])i=this._format[e];else{if("string"!=typeof(n=this._src[e])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(i=/^data:audio\/([^;,]+);/i.exec(n))||(i=/\.([^.]+)$/.exec(n.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i&&s.codecs(i)){t=this._src[e];break}}if(t)return this._src=t,this._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new a(this),this._webAudio&&l(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var i=this,n=null;if("number"==typeof t)n=t,t=null;else{if("string"==typeof t&&"loaded"===i._state&&!i._sprite[t])return null;if(void 0===t&&(t="__default",!i._playLock)){for(var r=0,o=0;o<i._sounds.length;o++)i._sounds[o]._paused&&!i._sounds[o]._ended&&(r++,n=i._sounds[o]._id);1===r?t=null:n=null}}var a=n?i._soundById(n):i._inactiveSound();if(!a)return null;if(n&&!t&&(t=a._sprite||"__default"),"loaded"!==i._state){a._sprite=t,a._ended=!1;var h=a._id;return i._queue.push({event:"play",action:function(){i.play(h)}}),h}if(n&&!a._paused)return e||i._loadQueue("play"),a._id;i._webAudio&&s._autoResume();var l=Math.max(0,a._seek>0?a._seek:i._sprite[t][0]/1e3),u=Math.max(0,(i._sprite[t][0]+i._sprite[t][1])/1e3-l),c=1e3*u/Math.abs(a._rate),d=i._sprite[t][0]/1e3,p=(i._sprite[t][0]+i._sprite[t][1])/1e3;a._sprite=t,a._ended=!1;var f=function(){a._paused=!1,a._seek=l,a._start=d,a._stop=p,a._loop=!(!a._loop&&!i._sprite[t][2])};if(!(l>=p)){var m=a._node;if(i._webAudio){var g=function(){i._playLock=!1,f(),i._refreshBuffer(a);var t=a._muted||i._muted?0:a._volume;m.gain.setValueAtTime(t,s.ctx.currentTime),a._playStart=s.ctx.currentTime,void 0===m.bufferSource.start?a._loop?m.bufferSource.noteGrainOn(0,l,86400):m.bufferSource.noteGrainOn(0,l,u):a._loop?m.bufferSource.start(0,l,86400):m.bufferSource.start(0,l,u),c!==1/0&&(i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),c)),e||setTimeout((function(){i._emit("play",a._id),i._loadQueue()}),0)};"running"===s.state&&"interrupted"!==s.ctx.state?g():(i._playLock=!0,i.once("resume",g),i._clearTimer(a._id))}else{var v=function(){m.currentTime=l,m.muted=a._muted||i._muted||s._muted||m.muted,m.volume=a._volume*s.volume(),m.playbackRate=a._rate;try{var n=m.play();if(n&&"undefined"!=typeof Promise&&(n instanceof Promise||"function"==typeof n.then)?(i._playLock=!0,f(),n.then((function(){i._playLock=!1,m._unlocked=!0,e?i._loadQueue():i._emit("play",a._id)})).catch((function(){i._playLock=!1,i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0}))):e||(i._playLock=!1,f(),i._emit("play",a._id)),m.playbackRate=a._rate,m.paused)return void i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||a._loop?i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),c):(i._endTimers[a._id]=function(){i._ended(a),m.removeEventListener("ended",i._endTimers[a._id],!1)},m.addEventListener("ended",i._endTimers[a._id],!1))}catch(t){i._emit("playerror",a._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=i._src,m.load());var y=window&&window.ejecta||!m.readyState&&s._navigator.isCocoonJS;if(m.readyState>=3||y)v();else{i._playLock=!0,i._state="loading";var A=function(){i._state="loaded",v(),m.removeEventListener(s._canPlayEvent,A,!1)};m.addEventListener(s._canPlayEvent,A,!1),i._clearTimer(a._id)}}return a._id}i._ended(a)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var i=e._getSoundIds(t),n=0;n<i.length;n++){e._clearTimer(i[n]);var r=e._soundById(i[n]);if(r&&!r._paused&&(r._seek=e.seek(i[n]),r._rateSeek=0,r._paused=!0,e._stopFade(i[n]),r._node))if(e._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),e._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||e._emit("pause",r?r._id:null)}return e},stop:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"stop",action:function(){i.stop(t)}}),i;for(var n=i._getSoundIds(t),r=0;r<n.length;r++){i._clearTimer(n[r]);var s=i._soundById(n[r]);s&&(s._seek=s._start||0,s._rateSeek=0,s._paused=!0,s._ended=!0,i._stopFade(n[r]),s._node&&(i._webAudio?s._node.bufferSource&&(void 0===s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),i._cleanBuffer(s._node)):isNaN(s._node.duration)&&s._node.duration!==1/0||(s._node.currentTime=s._start||0,s._node.pause(),s._node.duration===1/0&&i._clearSound(s._node))),e||i._emit("stop",s._id))}return i},mute:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(t,e)}}),i;if(void 0===e){if("boolean"!=typeof t)return i._muted;i._muted=t}for(var n=i._getSoundIds(e),r=0;r<n.length;r++){var o=i._soundById(n[r]);o&&(o._muted=t,o._interval&&i._stopFade(o._id),i._webAudio&&o._node?o._node.gain.setValueAtTime(t?0:o._volume,s.ctx.currentTime):o._node&&(o._node.muted=!!s._muted||t),i._emit("mute",o._id))}return i},volume:function(){var t,e,i,n=this,r=arguments;if(0===r.length)return n._volume;if(1===r.length||2===r.length&&void 0===r[1]){var o=n._getSoundIds(),a=o.indexOf(r[0]);a>=0?e=parseInt(r[0],10):t=parseFloat(r[0])}else r.length>=2&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if(!(void 0!==t&&t>=0&&t<=1))return(i=e?n._soundById(e):n._sounds[0])?i._volume:0;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,r)}}),n;void 0===e&&(n._volume=t),e=n._getSoundIds(e);for(var h=0;h<e.length;h++)(i=n._soundById(e[h]))&&(i._volume=t,r[2]||n._stopFade(e[h]),n._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(t,s.ctx.currentTime):i._node&&!i._muted&&(i._node.volume=t*s.volume()),n._emit("volume",i._id));return n},fade:function(t,e,i,n){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(t,e,i,n)}}),r;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),i=parseFloat(i),r.volume(t,n);for(var o=r._getSoundIds(n),a=0;a<o.length;a++){var h=r._soundById(o[a]);if(h){if(n||r._stopFade(o[a]),r._webAudio&&!h._muted){var l=s.ctx.currentTime,u=l+i/1e3;h._volume=t,h._node.gain.setValueAtTime(t,l),h._node.gain.linearRampToValueAtTime(e,u)}r._startFadeInterval(h,t,e,i,o[a],void 0===n)}}return r},_startFadeInterval:function(t,e,i,n,r,s){var o=this,a=e,h=i-e,l=Math.abs(h/.01),u=Math.max(4,l>0?n/l:n),c=Date.now();t._fadeTo=i,t._interval=setInterval((function(){var r=(Date.now()-c)/n;c=Date.now(),a+=h*r,a=Math.round(100*a)/100,a=h<0?Math.max(i,a):Math.min(i,a),o._webAudio?t._volume=a:o.volume(a,t._id,!0),s&&(o._volume=a),(i<e&&a<=i||i>e&&a>=i)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,o.volume(i,t._id),o._emit("fade",t._id))}),u)},_stopFade:function(t){var e=this._soundById(t);return e&&e._interval&&(this._webAudio&&e._node.gain.cancelScheduledValues(s.ctx.currentTime),clearInterval(e._interval),e._interval=null,this.volume(e._fadeTo,t),e._fadeTo=null,this._emit("fade",t)),this},loop:function(){var t,e,i,n=this,r=arguments;if(0===r.length)return n._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(i=n._soundById(parseInt(r[0],10)))&&i._loop;t=r[0],n._loop=t}else 2===r.length&&(t=r[0],e=parseInt(r[1],10));for(var s=n._getSoundIds(e),o=0;o<s.length;o++)(i=n._soundById(s[o]))&&(i._loop=t,n._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=t,t&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop,n.playing(s[o])&&(n.pause(s[o],!0),n.play(s[o],!0)))));return n},rate:function(){var t,e,i,n=this,r=arguments;if(0===r.length)e=n._sounds[0]._id;else if(1===r.length){var o=n._getSoundIds(),a=o.indexOf(r[0]);a>=0?e=parseInt(r[0],10):t=parseFloat(r[0])}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if("number"!=typeof t)return(i=n._soundById(e))?i._rate:n._rate;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,r)}}),n;void 0===e&&(n._rate=t),e=n._getSoundIds(e);for(var h=0;h<e.length;h++)if(i=n._soundById(e[h])){n.playing(e[h])&&(i._rateSeek=n.seek(e[h]),i._playStart=n._webAudio?s.ctx.currentTime:i._playStart),i._rate=t,n._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(t,s.ctx.currentTime):i._node&&(i._node.playbackRate=t);var l=n.seek(e[h]),u=(n._sprite[i._sprite][0]+n._sprite[i._sprite][1])/1e3-l,c=1e3*u/Math.abs(i._rate);!n._endTimers[e[h]]&&i._paused||(n._clearTimer(e[h]),n._endTimers[e[h]]=setTimeout(n._ended.bind(n,i),c)),n._emit("rate",i._id)}return n},seek:function(){var t,e,i=this,n=arguments;if(0===n.length)i._sounds.length&&(e=i._sounds[0]._id);else if(1===n.length){var r=i._getSoundIds(),o=r.indexOf(n[0]);o>=0?e=parseInt(n[0],10):i._sounds.length&&(e=i._sounds[0]._id,t=parseFloat(n[0]))}else 2===n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10));if(void 0===e)return 0;if("number"==typeof t&&("loaded"!==i._state||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,n)}}),i;var a=i._soundById(e);if(a){if(!("number"==typeof t&&t>=0)){if(i._webAudio){var h=i.playing(e)?s.ctx.currentTime-a._playStart:0,l=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(l+h*Math.abs(a._rate))}return a._node.currentTime}var u=i.playing(e);u&&i.pause(e,!0),a._seek=t,a._ended=!1,i._clearTimer(e),i._webAudio||!a._node||isNaN(a._node.duration)||(a._node.currentTime=t);var c=function(){u&&i.play(e,!0),i._emit("seek",e)};if(u&&!i._webAudio){var d=function(){i._playLock?setTimeout(d,0):c()};setTimeout(d,0)}else c()}return i},playing:function(t){if("number"==typeof t){var e=this._soundById(t);return!!e&&!e._paused}for(var i=0;i<this._sounds.length;i++)if(!this._sounds[i]._paused)return!0;return!1},duration:function(t){var e=this._duration,i=this._soundById(t);return i&&(e=this._sprite[i._sprite][1]/1e3),e},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,i=0;i<e.length;i++)e[i]._paused||t.stop(e[i]._id),t._webAudio||(t._clearSound(e[i]._node),e[i]._node.removeEventListener("error",e[i]._errorFn,!1),e[i]._node.removeEventListener(s._canPlayEvent,e[i]._loadFn,!1),e[i]._node.removeEventListener("ended",e[i]._endFn,!1),s._releaseHtml5Audio(e[i]._node)),delete e[i]._node,t._clearTimer(e[i]._id);var n=s._howls.indexOf(t);n>=0&&s._howls.splice(n,1);var r=!0;for(i=0;i<s._howls.length;i++)if(s._howls[i]._src===t._src||t._src.indexOf(s._howls[i]._src)>=0){r=!1;break}return h&&r&&delete h[t._src],s.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,i,n){var r=this["_on"+t];return"function"==typeof e&&r.push(n?{id:i,fn:e,once:n}:{id:i,fn:e}),this},off:function(t,e,i){var n=this["_on"+t],r=0;if("number"==typeof e&&(i=e,e=null),e||i)for(r=0;r<n.length;r++){var s=i===n[r].id;if(e===n[r].fn&&s||!e&&s){n.splice(r,1);break}}else if(t)this["_on"+t]=[];else{var o=Object.keys(this);for(r=0;r<o.length;r++)0===o[r].indexOf("_on")&&Array.isArray(this[o[r]])&&(this[o[r]]=[])}return this},once:function(t,e,i){return this.on(t,e,i,1),this},_emit:function(t,e,i){for(var n=this["_on"+t],r=n.length-1;r>=0;r--)n[r].id&&n[r].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,i)}.bind(this,n[r].fn),0),n[r].once&&this.off(t,n[r].fn,n[r].id));return this._loadQueue(t),this},_loadQueue:function(t){if(this._queue.length>0){var e=this._queue[0];e.event===t&&(this._queue.shift(),this._loadQueue()),t||e.action()}return this},_ended:function(t){var e=t._sprite;if(!this._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(this._ended.bind(this,t),100),this;var i=!(!t._loop&&!this._sprite[e][2]);if(this._emit("end",t._id),!this._webAudio&&i&&this.stop(t._id,!0).play(t._id),this._webAudio&&i){this._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=s.ctx.currentTime;var n=1e3*(t._stop-t._start)/Math.abs(t._rate);this._endTimers[t._id]=setTimeout(this._ended.bind(this,t),n)}return this._webAudio&&!i&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,this._clearTimer(t._id),this._cleanBuffer(t._node),s._autoSuspend()),this._webAudio||i||this.stop(t._id,!0),this},_clearTimer:function(t){if(this._endTimers[t]){if("function"!=typeof this._endTimers[t])clearTimeout(this._endTimers[t]);else{var e=this._soundById(t);e&&e._node&&e._node.removeEventListener("ended",this._endTimers[t],!1)}delete this._endTimers[t]}return this},_soundById:function(t){for(var e=0;e<this._sounds.length;e++)if(t===this._sounds[e]._id)return this._sounds[e];return null},_inactiveSound:function(){this._drain();for(var t=0;t<this._sounds.length;t++)if(this._sounds[t]._ended)return this._sounds[t].reset();return new a(this)},_drain:function(){var t=this._pool,e=0,i=0;if(!(this._sounds.length<t)){for(i=0;i<this._sounds.length;i++)this._sounds[i]._ended&&e++;for(i=this._sounds.length-1;i>=0;i--){if(e<=t)return;this._sounds[i]._ended&&(this._webAudio&&this._sounds[i]._node&&this._sounds[i]._node.disconnect(0),this._sounds.splice(i,1),e--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],i=0;i<this._sounds.length;i++)e.push(this._sounds[i]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=s.ctx.createBufferSource(),t._node.bufferSource.buffer=h[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,s.ctx.currentTime),this},_cleanBuffer:function(t){var e=s._navigator&&s._navigator.vendor.indexOf("Apple")>=0;if(s._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=s._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(s._navigator&&s._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(t){this._parent=t,this.init()};a.prototype={init:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++s._counter,t._sounds.push(this),this.create(),this},create:function(){var t=this._parent,e=s._muted||this._muted||this._parent._muted?0:this._volume;return t._webAudio?(this._node=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),this._node.gain.setValueAtTime(e,s.ctx.currentTime),this._node.paused=!0,this._node.connect(s.masterGain)):s.noAudio||(this._node=s._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(s._canPlayEvent,this._loadFn,!1),this._endFn=this._endListener.bind(this),this._node.addEventListener("ended",this._endFn,!1),this._node.src=t._src,this._node.preload=!0===t._preload?"auto":t._preload,this._node.volume=e*s.volume(),this._node.load()),this},reset:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++s._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var t=this._parent;t._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),this._node.removeEventListener(s._canPlayEvent,this._loadFn,!1)},_endListener:function(){var t=this._parent;t._duration===1/0&&(t._duration=Math.ceil(10*this._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(this)),this._node.removeEventListener("ended",this._endFn,!1)}};var h={},l=function(t){var e=t._src;if(h[e])return t._duration=h[e].duration,void d(t);if(/^data:[^;]+;base64,/.test(e)){for(var i=atob(e.split(",")[1]),n=new Uint8Array(i.length),r=0;r<i.length;++r)n[r]=i.charCodeAt(r);c(n.buffer,t)}else{var s=new XMLHttpRequest;s.open(t._xhr.method,e,!0),s.withCredentials=t._xhr.withCredentials,s.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach((function(e){s.setRequestHeader(e,t._xhr.headers[e])})),s.onload=function(){var e=(s.status+"")[0];"0"===e||"2"===e||"3"===e?c(s.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+s.status+".")},s.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete h[e],t.load())},u(s)}},u=function(t){try{t.send()}catch(e){t.onerror()}},c=function(t,e){var i=function(){e._emit("loaderror",null,"Decoding audio data failed.")},n=function(t){t&&e._sounds.length>0?(h[e._src]=t,d(e,t)):i()};"undefined"!=typeof Promise&&1===s.ctx.decodeAudioData.length?s.ctx.decodeAudioData(t).then(n).catch(i):s.ctx.decodeAudioData(t,n,i)},d=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},p=function(){if(s.usingWebAudio){try{"undefined"!=typeof AudioContext?s.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?s.ctx=new webkitAudioContext:s.usingWebAudio=!1}catch(t){s.usingWebAudio=!1}s.ctx||(s.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(s._navigator&&s._navigator.platform),e=s._navigator&&s._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=e?parseInt(e[1],10):null;if(t&&i&&i<9){var n=/safari/.test(s._navigator&&s._navigator.userAgent.toLowerCase());s._navigator&&!n&&(s.usingWebAudio=!1)}s.usingWebAudio&&(s.masterGain=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),s.masterGain.gain.setValueAtTime(s._muted?0:s._volume,s.ctx.currentTime),s.masterGain.connect(s.ctx.destination)),s._setup()}};void 0===(n=function(){return{Howler:s,Howl:o}}.apply(e,[]))||(t.exports=n),e.Howler=s,e.Howl=o,void 0!==i?(i.HowlerGlobal=r,i.Howler=s,i.Howl=o,i.Sound=a):"undefined"!=typeof window&&(window.HowlerGlobal=r,window.Howler=s,window.Howl=o,window.Sound=a)}(),function(){"use strict";var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){if(!this.ctx||!this.ctx.listener)return this;for(var e=this._howls.length-1;e>=0;e--)this._howls[e].stereo(t);return this},HowlerGlobal.prototype.pos=function(t,e,i){return this.ctx&&this.ctx.listener?(e="number"!=typeof e?this._pos[1]:e,i="number"!=typeof i?this._pos[2]:i,"number"!=typeof t?this._pos:(this._pos=[t,e,i],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(t,e,i,n,r,s){if(!this.ctx||!this.ctx.listener)return this;var o=this._orientation;return e="number"!=typeof e?o[1]:e,i="number"!=typeof i?o[2]:i,n="number"!=typeof n?o[3]:n,r="number"!=typeof r?o[4]:r,s="number"!=typeof s?o[5]:s,"number"!=typeof t?o:(this._orientation=[t,e,i,n,r,s],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(s,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(t,e,i,n,r,s),this)},Howl.prototype.init=(t=Howl.prototype.init,function(e){return this._orientation=e.orientation||[1,0,0],this._stereo=e.stereo||null,this._pos=e.pos||null,this._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},this._onstereo=e.onstereo?[{fn:e.onstereo}]:[],this._onpos=e.onpos?[{fn:e.onpos}]:[],this._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,i){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(t,i)}}),n;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===i){if("number"!=typeof t)return n._stereo;n._stereo=t,n._pos=[t,0,0]}for(var s=n._getSoundIds(i),o=0;o<s.length;o++){var a=n._soundById(s[o]);if(a){if("number"!=typeof t)return a._stereo;a._stereo=t,a._pos=[t,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||e(a,r),"spatial"===r?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(t,0,0):a._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),n._emit("stereo",a._id)}}return n},Howl.prototype.pos=function(t,i,n,r){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"pos",action:function(){s.pos(t,i,n,r)}}),s;if(i="number"!=typeof i?0:i,n="number"!=typeof n?-.5:n,void 0===r){if("number"!=typeof t)return s._pos;s._pos=[t,i,n]}for(var o=s._getSoundIds(r),a=0;a<o.length;a++){var h=s._soundById(o[a]);if(h){if("number"!=typeof t)return h._pos;h._pos=[t,i,n],h._node&&(h._panner&&!h._panner.pan||e(h,"spatial"),void 0!==h._panner.positionX?(h._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):h._panner.setPosition(t,i,n)),s._emit("pos",h._id)}}return s},Howl.prototype.orientation=function(t,i,n,r){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"orientation",action:function(){s.orientation(t,i,n,r)}}),s;if(i="number"!=typeof i?s._orientation[1]:i,n="number"!=typeof n?s._orientation[2]:n,void 0===r){if("number"!=typeof t)return s._orientation;s._orientation=[t,i,n]}for(var o=s._getSoundIds(r),a=0;a<o.length;a++){var h=s._soundById(o[a]);if(h){if("number"!=typeof t)return h._orientation;h._orientation=[t,i,n],h._node&&(h._panner||(h._pos||(h._pos=s._pos||[0,0,-.5]),e(h,"spatial")),void 0!==h._panner.orientationX?(h._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):h._panner.setOrientation(t,i,n)),s._emit("orientation",h._id)}}return s},Howl.prototype.pannerAttr=function(){var t,i,n,r=this,s=arguments;if(!r._webAudio)return r;if(0===s.length)return r._pannerAttr;if(1===s.length){if("object"!=typeof s[0])return(n=r._soundById(parseInt(s[0],10)))?n._pannerAttr:r._pannerAttr;t=s[0],void 0===i&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),r._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:r._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:r._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:r._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:r._panningModel})}else 2===s.length&&(t=s[0],i=parseInt(s[1],10));for(var o=r._getSoundIds(i),a=0;a<o.length;a++)if(n=r._soundById(o[a])){var h=n._pannerAttr;h={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:h.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:h.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:h.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:h.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:h.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:h.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:h.panningModel};var l=n._panner;l?(l.coneInnerAngle=h.coneInnerAngle,l.coneOuterAngle=h.coneOuterAngle,l.coneOuterGain=h.coneOuterGain,l.distanceModel=h.distanceModel,l.maxDistance=h.maxDistance,l.refDistance=h.refDistance,l.rolloffFactor=h.rolloffFactor,l.panningModel=h.panningModel):(n._pos||(n._pos=r._pos||[0,0,-.5]),e(n,"spatial"))}return r},Sound.prototype.init=function(t){return function(){var e=this._parent;this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,t.call(this),this._stereo?e.stereo(this._stereo):this._pos&&e.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this._parent;return this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,this._stereo?e.stereo(this._stereo):this._pos?e.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,e._refreshBuffer(this)),t.call(this)}}(Sound.prototype.reset);var e=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()}).call(this,i(7))},function(t,e,i){},function(t,e){t.exports="data:image/png;base64,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"},function(t,e,i){(function(t){var i,n,r,s;function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}window,s=function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==o(t)&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=365)}([function(t,e){function i(t,e,i){var n=i?t[e]:Object.getOwnPropertyDescriptor(t,e);return!i&&n.value&&"object"==o(n.value)&&(n=n.value),!(!n||!function(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(n))&&(void 0===n.enumerable&&(n.enumerable=!0),void 0===n.configurable&&(n.configurable=!0),n)}function n(t,e){var i=Object.getOwnPropertyDescriptor(t,e);return!!i&&(i.value&&"object"==o(i.value)&&(i=i.value),!1===i.configurable)}function r(t,e,r,s){for(var o in e)if(e.hasOwnProperty(o)){var h=i(e,o,r);if(!1!==h){if(n((s||t).prototype,o)){if(a.ignoreFinals)continue;throw new Error("cannot override final property '"+o+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,o,h)}else t.prototype[o]=e[o]}}function s(t,e){if(e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)r(t,e[i].prototype||e[i])}}function a(t){var e,i;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");e=t.initialize,delete t.initialize}else if(t.Extends){var n=t.Extends;e=function(){n.apply(this,arguments)}}else e=function(){};t.Extends?(e.prototype=Object.create(t.Extends.prototype),e.prototype.constructor=e,i=t.Extends,delete t.Extends):e.prototype.constructor=e;var o=null;return t.Mixins&&(o=t.Mixins,delete t.Mixins),s(e,o),r(e,t,!0,i),e}a.extend=r,a.mixin=s,a.ignoreFinals=!1,t.exports=a},function(t,e){t.exports=function(t,e,i){var n=o(t);return t&&"number"!==n&&"string"!==n&&t.hasOwnProperty(e)&&void 0!==t[e]?t[e]:i}},function(t,e,i){var n=i(0),r=i(33),s=new n({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.type=r.POINT,this.x=t,this.y=e},setTo:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this}});t.exports=s},function(t,e){var i={},n={install:function(t){for(var e in i)t[e]=i[e]},register:function(t,e){i[t]=e},destroy:function(){i={}}};t.exports=n},function(t,e){t.exports=function(){}},function(t,e,i){var n=i(0),r=i(109),s=new n({initialize:function(t,e){this.x=0,this.y=0,"object"==o(t)?(this.x=t.x||0,this.y=t.y||0):(void 0===e&&(e=t),this.x=t||0,this.y=e||0)},clone:function(){return new s(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setTo:function(t,e){return this.set(t,e)},setToPolar:function(t,e){return null==e&&(e=1),this.x=Math.cos(t)*e,this.y=Math.sin(t)*e,this},equals:function(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function(t,e){return r(this.x,t.x,e)&&r(this.y,t.y,e)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},setAngle:function(t){return this.setToPolar(t,this.length())},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},distanceSq:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},length:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},setLength:function(t){return this.normalize().scale(t)},lengthSq:function(){var t=this.x,e=this.y;return t*t+e*e},normalize:function(){var t=this.x,e=this.y,i=t*t+e*e;return i>0&&(i=1/Math.sqrt(i),this.x=t*i,this.y=e*i),this},normalizeRightHand:function(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,n=this.y;return this.x=i+e*(t.x-i),this.y=n+e*(t.y-n),this},transformMat3:function(t){var e=this.x,i=this.y,n=t.val;return this.x=n[0]*e+n[3]*i+n[6],this.y=n[1]*e+n[4]*i+n[7],this},transformMat4:function(t){var e=this.x,i=this.y,n=t.val;return this.x=n[0]*e+n[4]*i+n[12],this.y=n[1]*e+n[5]*i+n[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(t){var e=this.length();return e&&e>t&&this.scale(t/e),this},reflect:function(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function(t){return this.reflect(t).negate()},rotate:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e*this.x-i*this.y,i*this.x+e*this.y)}});s.ZERO=new s,s.RIGHT=new s(1,0),s.LEFT=new s(-1,0),s.UP=new s(0,-1),s.DOWN=new s(0,1),s.ONE=new s(1,1),t.exports=s},function(t,e){t.exports=function(t){if("object"!=o(t)||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0}},function(t,e){t.exports=function(t,e,i){if(t&&"number"!=typeof t){if(t.hasOwnProperty(e))return t[e];if(-1!==e.indexOf(".")){for(var n=e.split("."),r=t,s=i,o=0;o<n.length;o++){if(!r.hasOwnProperty(n[o])){s=i;break}s=r[n[o]],r=r[n[o]]}return s}return i}return i}},function(t,e,i){var n=i(0),r=i(51),s=i(108),o=i(170),a=i(33),h=i(34),l=i(174),u=new n({initialize:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.type=a.RECTANGLE,this.x=t,this.y=e,this.width=i,this.height=n},contains:function(t,e){return r(this,t,e)},getPoint:function(t,e){return s(this,t,e)},getPoints:function(t,e,i){return o(this,t,e,i)},getRandomPoint:function(t){return l(this,t)},setTo:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return void 0===t&&(t=new h),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return void 0===t&&(t=new h),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return void 0===t&&(t=new h),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return void 0===t&&(t=new h),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=u},function(t,e,i){"use strict";var n=Object.prototype.hasOwnProperty,r="~";function s(){}function o(t,e,i,n,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new function(t,e,i){this.fn=t,this.context=e,this.once=i||!1}(i,n||t,s),a=r?r+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],o]:t._events[a].push(o):(t._events[a]=o,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new s:delete t._events[e]}function h(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(r=!1)),h.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)n.call(t,e)&&i.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},h.prototype.listeners=function(t){var e=r?r+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,o=new Array(s);n<s;n++)o[n]=i[n].fn;return o},h.prototype.listenerCount=function(t){var e=r?r+t:t,i=this._events[e];return i?i.fn?1:i.length:0},h.prototype.emit=function(t,e,i,n,s,o){var a=r?r+t:t;if(!this._events[a])return!1;var h,l,u=this._events[a],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,n),!0;case 5:return u.fn.call(u.context,e,i,n,s),!0;case 6:return u.fn.call(u.context,e,i,n,s,o),!0}for(l=1,h=new Array(c-1);l<c;l++)h[l-1]=arguments[l];u.fn.apply(u.context,h)}else{var d,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,i);break;case 4:u[l].fn.call(u[l].context,e,i,n);break;default:if(!h)for(d=1,h=new Array(c-1);d<c;d++)h[d-1]=arguments[d];u[l].fn.apply(u[l].context,h)}}return!0},h.prototype.on=function(t,e,i){return o(this,t,e,i,!1)},h.prototype.once=function(t,e,i){return o(this,t,e,i,!0)},h.prototype.removeListener=function(t,e,i,n){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==e||n&&!o.once||i&&o.context!==i||a(this,s);else{for(var h=0,l=[],u=o.length;h<u;h++)(o[h].fn!==e||n&&!o[h].once||i&&o[h].context!==i)&&l.push(o[h]);l.length?this._events[s]=1===l.length?l[0]:l:a(this,s)}return this},h.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&a(this,e)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=r,h.EventEmitter=h,t.exports=h},function(t,e){var i={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=i},function(t,e){t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(t,e,i){var n=i(0),r=i(11),s=i(55),o=i(1),a=i(105),h=i(161),l=i(361),u=i(106),c=new n({initialize:function(t,e){this.loader=t,this.cache=o(e,"cache",!1),this.type=o(e,"type",!1),this.key=o(e,"key",!1);var i=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+i),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var n=o(e,"url");void 0===n?n=t.path+i+"."+o(e,"extension",""):"string"!=typeof n||n.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(n=t.path+n),this.url=n,this.src="",this.xhrSettings=u(o(e,"responseType",void 0)),o(e,"xhrSettings",!1)&&(this.xhrSettings=h(this.xhrSettings,o(e,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?r.FILE_POPULATED:r.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=o(e,"config",{}),this.multiFile,this.linkFile},setLink:function(t){this.linkFile=t,t.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===r.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=r.FILE_LOADING,this.src=a(this,this.loader.baseURL),0===this.src.indexOf("data:")||(this.xhrLoader=l(this,this.loader.xhr)))},onLoad:function(t,e){var i=t.responseURL&&(0===t.responseURL.indexOf("file://")||0===t.responseURL.indexOf("capacitor://"))&&0===e.target.status,n=!(e.target&&200!==e.target.status)||i;4===t.readyState&&t.status>=400&&t.status<=599&&(n=!1),this.state=r.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,n)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(s.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=r.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=r.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=r.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(t){void 0===t&&(t=this.data);var e=this.key,i=this.type;this.loader.emit(s.FILE_COMPLETE,e,i,t),this.loader.emit(s.FILE_KEY_COMPLETE+i+"-"+e,e,i,t),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});c.createObjectURL=function(t,e,i){if("function"==typeof URL)t.src=URL.createObjectURL(e);else{var n=new FileReader;n.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(e.type||i)+";base64,"+n.result.split(",")[1]},n.onerror=t.onerror,n.readAsDataURL(e)}},c.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=c},function(t,e){t.exports=function(t,e,i){return Math.max(e,Math.min(i,t))}},function(t,e,i){t.exports={BLUR:i(382),BOOT:i(383),CONTEXT_LOST:i(384),CONTEXT_RESTORED:i(385),DESTROY:i(386),FOCUS:i(387),HIDDEN:i(388),PAUSE:i(389),POST_RENDER:i(390),POST_STEP:i(391),PRE_RENDER:i(392),PRE_STEP:i(393),READY:i(394),RESUME:i(395),STEP:i(396),VISIBLE:i(397)}},function(t,e,i){t.exports={ADDED_TO_SCENE:i(471),BOOT:i(472),CREATE:i(473),DESTROY:i(474),PAUSE:i(475),POST_UPDATE:i(476),PRE_RENDER:i(477),PRE_UPDATE:i(478),READY:i(479),REMOVED_FROM_SCENE:i(480),RENDER:i(481),RESUME:i(482),SHUTDOWN:i(483),SLEEP:i(484),START:i(485),TRANSITION_COMPLETE:i(486),TRANSITION_INIT:i(487),TRANSITION_OUT:i(488),TRANSITION_START:i(489),TRANSITION_WAKE:i(490),UPDATE:i(491),WAKE:i(492)}},function(t,e){var i={},n={},r={register:function(t,e,n,r){void 0===r&&(r=!1),i[t]={plugin:e,mapping:n,custom:r}},registerCustom:function(t,e,i,r){n[t]={plugin:e,mapping:i,data:r}},hasCore:function(t){return i.hasOwnProperty(t)},hasCustom:function(t){return n.hasOwnProperty(t)},getCore:function(t){return i[t]},getCustom:function(t){return n[t]},getCustomClass:function(t){return n.hasOwnProperty(t)?n[t].plugin:null},remove:function(t){i.hasOwnProperty(t)&&delete i[t]},removeCustom:function(t){n.hasOwnProperty(t)&&delete n[t]},destroyCorePlugins:function(){for(var t in i)i.hasOwnProperty(t)&&delete i[t]},destroyCustomPlugins:function(){for(var t in n)n.hasOwnProperty(t)&&delete n[t]}};t.exports=r},function(t,e,i){var n,r,s,o=i(22),a=i(85),h=[],l=!1;t.exports={create2D:function(t,e,i){return n(t,e,i,o.CANVAS)},create:n=function(t,e,i,n,s){var u;void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=o.CANVAS),void 0===s&&(s=!1);var c=r(n);return null===c?(c={parent:t,canvas:document.createElement("canvas"),type:n},n===o.CANVAS&&h.push(c),u=c.canvas):(c.parent=t,u=c.canvas),s&&(c.parent=u),u.width=e,u.height=i,l&&n===o.CANVAS&&a.disable(u.getContext("2d")),u},createWebGL:function(t,e,i){return n(t,e,i,o.WEBGL)},disableSmoothing:function(){l=!0},enableSmoothing:function(){l=!1},first:r=function(t){if(void 0===t&&(t=o.CANVAS),t===o.WEBGL)return null;for(var e=0;e<h.length;e++){var i=h[e];if(!i.parent&&i.type===t)return i}return null},free:function(){return h.length-s()},pool:h,remove:function(t){var e=t instanceof HTMLCanvasElement;h.forEach((function(i){(e&&i.canvas===t||!e&&i.parent===t)&&(i.parent=null,i.canvas.width=1,i.canvas.height=1)}))},total:s=function(){var t=0;return h.forEach((function(e){e.parent&&t++})),t}}},function(t,e,i){var n=i(6);t.exports=function t(){var e,i,r,s,o,a,h=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof h&&(c=h,h=arguments[1]||{},l=2),u===l&&(h=this,--l);l<u;l++)if(null!=(e=arguments[l]))for(i in e)r=h[i],h!==(s=e[i])&&(c&&s&&(n(s)||(o=Array.isArray(s)))?(o?(o=!1,a=r&&Array.isArray(r)?r:[]):a=r&&n(r)?r:{},h[i]=t(c,a,s)):void 0!==s&&(h[i]=s));return h}},function(t,e,i){var n=i(120),r=i(7);t.exports=function(t,e,i){var s=r(t,e,null);if(null===s)return i;if(Array.isArray(s))return n.RND.pick(s);if("object"==o(s)){if(s.hasOwnProperty("randInt"))return n.RND.integerInRange(s.randInt[0],s.randInt[1]);if(s.hasOwnProperty("randFloat"))return n.RND.realInRange(s.randFloat[0],s.randFloat[1])}else if("function"==typeof s)return s(e);return s}},function(t,e){function i(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}t.exports={getTintFromFloats:function(t,e,i,n){return((255&(255*n|0))<<24|(255&(255*t|0))<<16|(255&(255*e|0))<<8|255&(255*i|0))>>>0},getTintAppendFloatAlpha:function(t,e){return((255&(255*e|0))<<24|t)>>>0},getTintAppendFloatAlphaAndSwap:function(t,e){return((255&(255*e|0))<<24|(255&(0|t))<<16|(255&(t>>8|0))<<8|255&(t>>16|0))>>>0},getFloatsFromUintRGB:function(t){return[(255&(t>>16|0))/255,(255&(t>>8|0))/255,(255&(0|t))/255]},checkShaderMax:function(t,e){e&&-1!==e||(e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS));for(var n=t.createShader(t.FRAGMENT_SHADER),r=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");;){var s=r.replace(/%forloop%/gi,i(e));if(t.shaderSource(n,s),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))break;e=e/2|0}return e},parseFragmentShaderMaxTextures:function(t,e){if(!t)return"";for(var i="",n=0;n<e;n++)n>0&&(i+="\n\telse "),n<e-1&&(i+="if (outTexId < "+n+".5)"),i+="\n\t{",i+="\n\t\ttexture = texture2D(uMainSampler["+n+"], outTexCoord);",i+="\n\t}";return(t=t.replace(/%count%/gi,e.toString())).replace(/%forloop%/gi,i)}}},function(t,e,i){var n=i(0),r=i(16),s=i(15),o=new n({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(s.BOOT,this.boot,this),this.events.on(s.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},existing:function(t){return(t.renderCanvas||t.renderWebGL)&&this.displayList.add(t),t.preUpdate&&this.updateList.add(t),t},shutdown:function(){this.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(t,e){o.prototype.hasOwnProperty(t)||(o.prototype[t]=e)},o.remove=function(t){o.prototype.hasOwnProperty(t)&&delete o.prototype[t]},r.register("GameObjectFactory",o,"add"),t.exports=o},function(t,e,i){var n={VERSION:"3.55.2",BlendModes:i(47),ScaleModes:i(165),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};t.exports=n},function(t,e,i){t.exports={Alpha:i(377),AlphaSingle:i(167),BlendMode:i(168),ComputedSize:i(378),Crop:i(379),Depth:i(169),Flip:i(380),GetBounds:i(381),Mask:i(176),Origin:i(402),PathFollower:i(403),Pipeline:i(179),ScrollFactor:i(180),Size:i(404),Texture:i(405),TextureCrop:i(406),Tint:i(407),ToJSON:i(181),Transform:i(182),TransformMatrix:i(24),Visible:i(185)}},function(t,e,i){var n=i(0),r=i(10),s=i(5),o=new n({initialize:function(t,e,i,n,r,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===s&&(s=0),this.matrix=new Float32Array([t,e,i,n,r,s,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}},b:{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}},c:{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}},d:{get:function(){return this.matrix[3]},set:function(t){this.matrix[3]=t}},e:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},f:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},tx:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},ty:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var t=this.matrix,e=t[0],i=t[1],n=t[2],s=t[3];return e||i?i>0?Math.acos(e/this.scaleX):-Math.acos(e/this.scaleX):n||s?r.TAU-(s>0?Math.acos(-n/this.scaleY):-Math.acos(n/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function(t,e){var i=this.matrix;return i[4]=i[0]*t+i[2]*e+i[4],i[5]=i[1]*t+i[3]*e+i[5],this},scale:function(t,e){var i=this.matrix;return i[0]*=t,i[1]*=t,i[2]*=e,i[3]*=e,this},rotate:function(t){var e=Math.sin(t),i=Math.cos(t),n=this.matrix,r=n[0],s=n[1],o=n[2],a=n[3];return n[0]=r*i+o*e,n[1]=s*i+a*e,n[2]=r*-e+o*i,n[3]=s*-e+a*i,this},multiply:function(t,e){var i=this.matrix,n=t.matrix,r=i[0],s=i[1],o=i[2],a=i[3],h=i[4],l=i[5],u=n[0],c=n[1],d=n[2],p=n[3],f=n[4],m=n[5],g=void 0===e?this:e;return g.a=u*r+c*o,g.b=u*s+c*a,g.c=d*r+p*o,g.d=d*s+p*a,g.e=f*r+m*o+h,g.f=f*s+m*a+l,g},multiplyWithOffset:function(t,e,i){var n=this.matrix,r=t.matrix,s=n[0],o=n[1],a=n[2],h=n[3],l=e*s+i*a+n[4],u=e*o+i*h+n[5],c=r[0],d=r[1],p=r[2],f=r[3],m=r[4],g=r[5];return n[0]=c*s+d*a,n[1]=c*o+d*h,n[2]=p*s+f*a,n[3]=p*o+f*h,n[4]=m*s+g*a+l,n[5]=m*o+g*h+u,this},transform:function(t,e,i,n,r,s){var o=this.matrix,a=o[0],h=o[1],l=o[2],u=o[3],c=o[4],d=o[5];return o[0]=t*a+e*l,o[1]=t*h+e*u,o[2]=i*a+n*l,o[3]=i*h+n*u,o[4]=r*a+s*l+c,o[5]=r*h+s*u+d,this},transformPoint:function(t,e,i){void 0===i&&(i={x:0,y:0});var n=this.matrix,r=n[0],s=n[1],o=n[2],a=n[3],h=n[4],l=n[5];return i.x=t*r+e*o+h,i.y=t*s+e*a+l,i},invert:function(){var t=this.matrix,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=e*r-i*n;return t[0]=r/a,t[1]=-i/a,t[2]=-n/a,t[3]=e/a,t[4]=(n*o-r*s)/a,t[5]=-(e*o-i*s)/a,this},copyFrom:function(t){var e=this.matrix;return e[0]=t.a,e[1]=t.b,e[2]=t.c,e[3]=t.d,e[4]=t.e,e[5]=t.f,this},copyFromArray:function(t){var e=this.matrix;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},copyToContext:function(t){var e=this.matrix;return t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t},setToContext:function(t){var e=this.matrix;return t.setTransform(e[0],e[1],e[2],e[3],e[4],e[5]),t},copyToArray:function(t){var e=this.matrix;return void 0===t?t=[e[0],e[1],e[2],e[3],e[4],e[5]]:(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5]),t},setTransform:function(t,e,i,n,r,s){var o=this.matrix;return o[0]=t,o[1]=e,o[2]=i,o[3]=n,o[4]=r,o[5]=s,this},decomposeMatrix:function(){var t=this.decomposedMatrix,e=this.matrix,i=e[0],n=e[1],r=e[2],s=e[3],o=i*s-n*r;if(t.translateX=e[4],t.translateY=e[5],i||n){var a=Math.sqrt(i*i+n*n);t.rotation=n>0?Math.acos(i/a):-Math.acos(i/a),t.scaleX=a,t.scaleY=o/a}else if(r||s){var h=Math.sqrt(r*r+s*s);t.rotation=.5*Math.PI-(s>0?Math.acos(-r/h):-Math.acos(r/h)),t.scaleX=o/h,t.scaleY=h}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function(t,e,i,n,r){var s=this.matrix,o=Math.sin(i),a=Math.cos(i);return s[4]=t,s[5]=e,s[0]=a*n,s[1]=o*n,s[2]=-o*r,s[3]=a*r,this},applyInverse:function(t,e,i){void 0===i&&(i=new s);var n=this.matrix,r=n[0],o=n[1],a=n[2],h=n[3],l=n[4],u=n[5],c=1/(r*h+a*-o);return i.x=h*c*t+-a*c*e+(u*a-l*h)*c,i.y=r*c*e+-o*c*t+(-u*r+l*o)*c,i},getX:function(t,e){return t*this.a+e*this.c+this.e},getY:function(t,e){return t*this.b+e*this.d+this.f},getXRound:function(t,e,i){var n=this.getX(t,e);return i&&(n=Math.round(n)),n},getYRound:function(t,e,i){var n=this.getY(t,e);return i&&(n=Math.round(n)),n},getCSSMatrix:function(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});t.exports=o},function(t,e,i){t.exports={DESTROY:i(408),FADE_IN_COMPLETE:i(409),FADE_IN_START:i(410),FADE_OUT_COMPLETE:i(411),FADE_OUT_START:i(412),FLASH_COMPLETE:i(413),FLASH_START:i(414),FOLLOW_UPDATE:i(415),PAN_COMPLETE:i(416),PAN_START:i(417),POST_RENDER:i(418),PRE_RENDER:i(419),ROTATE_COMPLETE:i(420),ROTATE_START:i(421),SHAKE_COMPLETE:i(422),SHAKE_START:i(423),ZOOM_COMPLETE:i(424),ZOOM_START:i(425)}},function(t,e,i){var n=i(0),r=i(69),s=i(187),o=i(114),a=i(188),h=new n({initialize:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(t,e,i,n)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(t,e,i,n,r){return void 0===n&&(n=255),void 0===r&&(r=!0),this._locked=!0,this.red=t,this.green=e,this.blue=i,this.alpha=n,this._locked=!1,this.update(r)},setGLTo:function(t,e,i,n){return void 0===n&&(n=1),this._locked=!0,this.redGL=t,this.greenGL=e,this.blueGL=i,this.alphaGL=n,this._locked=!1,this.update(!0)},setFromRGB:function(t){return this._locked=!0,this.red=t.r,this.green=t.g,this.blue=t.b,t.hasOwnProperty("a")&&(this.alpha=t.a),this._locked=!1,this.update(!0)},setFromHSV:function(t,e,i){return o(t,e,i,this)},update:function(t){if(void 0===t&&(t=!1),this._locked)return this;var e=this.r,i=this.g,n=this.b,o=this.a;return this._color=r(e,i,n),this._color32=s(e,i,n,o),this._rgba="rgba("+e+","+i+","+n+","+o/255+")",t&&a(e,i,n,this),this},updateHSV:function(){var t=this.r,e=this.g,i=this.b;return a(t,e,i,this),this},clone:function(){return new h(this.r,this.g,this.b,this.a)},gray:function(t){return this.setTo(t,t,t)},random:function(t,e){void 0===t&&(t=0),void 0===e&&(e=255);var i=Math.floor(t+Math.random()*(e-t)),n=Math.floor(t+Math.random()*(e-t)),r=Math.floor(t+Math.random()*(e-t));return this.setTo(i,n,r)},randomGray:function(t,e){void 0===t&&(t=0),void 0===e&&(e=255);var i=Math.floor(t+Math.random()*(e-t));return this.setTo(i,i,i)},saturate:function(t){return this.s+=t/100,this},desaturate:function(t){return this.s-=t/100,this},lighten:function(t){return this.v+=t/100,this},darken:function(t){return this.v-=t/100,this},brighten:function(t){var e=this.r,i=this.g,n=this.b;return e=Math.max(0,Math.min(255,e-Math.round(-t/100*255))),i=Math.max(0,Math.min(255,i-Math.round(-t/100*255))),n=Math.max(0,Math.min(255,n-Math.round(-t/100*255))),this.setTo(e,i,n)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(t){this.gl[0]=Math.min(Math.abs(t),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(t){this.gl[1]=Math.min(Math.abs(t),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(t){this.gl[2]=Math.min(Math.abs(t),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(t){this.gl[3]=Math.min(Math.abs(t),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(t){t=Math.floor(Math.abs(t)),this.r=Math.min(t,255),this.gl[0]=t/255,this.update(!0)}},green:{get:function(){return this.g},set:function(t){t=Math.floor(Math.abs(t)),this.g=Math.min(t,255),this.gl[1]=t/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(t){t=Math.floor(Math.abs(t)),this.b=Math.min(t,255),this.gl[2]=t/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(t){t=Math.floor(Math.abs(t)),this.a=Math.min(t,255),this.gl[3]=t/255,this.update()}},h:{get:function(){return this._h},set:function(t){this._h=t,o(t,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(t){this._s=t,o(this._h,t,this._v,this)}},v:{get:function(){return this._v},set:function(t){this._v=t,o(this._h,this._s,t,this)}}});t.exports=h},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i){this.x=0,this.y=0,this.z=0,"object"==o(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=i||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function(){return new n(this.x,this.y,this.z)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},crossVectors:function(t,e){var i=t.x,n=t.y,r=t.z,s=e.x,o=e.y,a=e.z;return this.x=n*a-r*o,this.y=r*s-i*a,this.z=i*o-n*s,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function(t,e,i){return"object"==o(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=i||0),this},setFromMatrixPosition:function(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function(t,e){return this.fromArray(t.val,4*e)},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(t){var e=t.x-this.x,i=t.y-this.y,n=t.z-this.z||0;return Math.sqrt(e*e+i*i+n*n)},distanceSq:function(t){var e=t.x-this.x,i=t.y-this.y,n=t.z-this.z||0;return e*e+i*i+n*n},length:function(){var t=this.x,e=this.y,i=this.z;return Math.sqrt(t*t+e*e+i*i)},lengthSq:function(){var t=this.x,e=this.y,i=this.z;return t*t+e*e+i*i},normalize:function(){var t=this.x,e=this.y,i=this.z,n=t*t+e*e+i*i;return n>0&&(n=1/Math.sqrt(n),this.x=t*n,this.y=e*n,this.z=i*n),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,s=t.y,o=t.z;return this.x=i*o-n*s,this.y=n*r-e*o,this.z=e*s-i*r,this},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,n=this.y,r=this.z;return this.x=i+e*(t.x-i),this.y=n+e*(t.y-n),this.z=r+e*(t.z-r),this},applyMatrix3:function(t){var e=this.x,i=this.y,n=this.z,r=t.val;return this.x=r[0]*e+r[3]*i+r[6]*n,this.y=r[1]*e+r[4]*i+r[7]*n,this.z=r[2]*e+r[5]*i+r[8]*n,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=t.val,s=1/(r[3]*e+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*n+r[12])*s,this.y=(r[1]*e+r[5]*i+r[9]*n+r[13])*s,this.z=(r[2]*e+r[6]*i+r[10]*n+r[14])*s,this},transformMat3:function(t){var e=this.x,i=this.y,n=this.z,r=t.val;return this.x=e*r[0]+i*r[3]+n*r[6],this.y=e*r[1]+i*r[4]+n*r[7],this.z=e*r[2]+i*r[5]+n*r[8],this},transformMat4:function(t){var e=this.x,i=this.y,n=this.z,r=t.val;return this.x=r[0]*e+r[4]*i+r[8]*n+r[12],this.y=r[1]*e+r[5]*i+r[9]*n+r[13],this.z=r[2]*e+r[6]*i+r[10]*n+r[14],this},transformCoordinates:function(t){var e=this.x,i=this.y,n=this.z,r=t.val,s=e*r[0]+i*r[4]+n*r[8]+r[12],o=e*r[1]+i*r[5]+n*r[9]+r[13],a=e*r[2]+i*r[6]+n*r[10]+r[14],h=e*r[3]+i*r[7]+n*r[11]+r[15];return this.x=s/h,this.y=o/h,this.z=a/h,this},transformQuat:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,s=t.y,o=t.z,a=t.w,h=a*e+s*n-o*i,l=a*i+o*e-r*n,u=a*n+r*i-s*e,c=-r*e-s*i-o*n;return this.x=h*a+c*-r+l*-o-u*-s,this.y=l*a+c*-s+u*-r-h*-o,this.z=u*a+c*-o+h*-s-l*-r,this},project:function(t){var e=this.x,i=this.y,n=this.z,r=t.val,s=r[0],o=r[1],a=r[2],h=r[3],l=r[4],u=r[5],c=r[6],d=r[7],p=r[8],f=r[9],m=r[10],g=r[11],v=r[12],y=r[13],A=r[14],x=1/(e*h+i*d+n*g+r[15]);return this.x=(e*s+i*l+n*p+v)*x,this.y=(e*o+i*u+n*f+y)*x,this.z=(e*a+i*c+n*m+A)*x,this},projectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unprojectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unproject:function(t,e){var i=t.x,n=t.y,r=t.z,s=t.w,o=this.x-i,a=s-this.y-1-n,h=this.z;return this.x=2*o/r-1,this.y=2*a/s-1,this.z=2*h-1,this.project(e)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});n.ZERO=new n,n.RIGHT=new n(1,0,0),n.LEFT=new n(-1,0,0),n.UP=new n(0,-1,0),n.DOWN=new n(0,1,0),n.FORWARD=new n(0,0,1),n.BACK=new n(0,0,-1),n.ONE=new n(1,1,1),t.exports=n},function(t,e){t.exports=function(t){return t.y+t.height-t.height*t.originY}},function(t,e){t.exports=function(t){return t.x-t.width*t.originX}},function(t,e){t.exports=function(t){return t.x+t.width-t.width*t.originX}},function(t,e){t.exports=function(t){return t.y-t.height*t.originY}},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n){var r=[];n.forEach((function(t){t&&r.push(t)})),this.loader=t,this.type=e,this.key=i,this.multiKeyIndex=t.multiKeyIndex++,this.files=r,this.complete=!1,this.pending=r.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var s=0;s<r.length;s++)r[s].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(t){return this.files.push(t),t.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function(t){-1!==this.files.indexOf(t)&&this.failed++}});t.exports=n},function(t,e){t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(t,e,i){var n=i(0),r=i(171),s=i(172),o=i(33),a=i(173),h=i(5),l=new n({initialize:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.type=o.LINE,this.x1=t,this.y1=e,this.x2=i,this.y2=n},getPoint:function(t,e){return r(this,t,e)},getPoints:function(t,e,i){return s(this,t,e,i)},getRandomPoint:function(t){return a(this,t)},setTo:function(t,e,i,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x1=t,this.y1=e,this.x2=i,this.y2=n,this},getPointA:function(t){return void 0===t&&(t=new h),t.set(this.x1,this.y1),t},getPointB:function(t){return void 0===t&&(t=new h),t.set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=l},function(t,e,i){var n=i(0),r=i(110),s=i(9),o=i(233),a=i(1),h=i(48),l=i(52),u=i(126),c=i(20),d=i(234),p=new n({Extends:s,initialize:function(t){s.call(this);var e=t.game,i=e.renderer,n=i.gl;this.name=a(t,"name","WebGLPipeline"),this.game=e,this.renderer=i,this.manager,this.gl=n,this.view=e.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=a(t,"topology",n.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=a(t,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=t,this.glReset=!1},boot:function(){var t,e=this.gl,i=this.config,n=this.renderer;this.isPostFX||(this.projectionMatrix=(new h).identity());var r=this.renderTargets,s=a(i,"renderTarget",!1);"boolean"==typeof s&&s&&(s=1);var c=n.width,d=n.height;if("number"==typeof s)for(t=0;t<s;t++)r.push(new u(n,c,d,1,0,!0));else if(Array.isArray(s))for(t=0;t<s.length;t++){var p=a(s[t],"scale",1),f=a(s[t],"minFilter",0),m=a(s[t],"autoClear",1);r.push(new u(n,c,d,p,f,m))}r.length&&(this.currentRenderTarget=r[0]),this.setShadersFromConfig(i);var g=this.shaders,v=0;for(t=0;t<g.length;t++)g[t].vertexSize>v&&(v=g[t].vertexSize);var y=a(i,"batchSize",n.config.batchSize);this.vertexCapacity=6*y;var A=new ArrayBuffer(this.vertexCapacity*v);this.vertexData=A,this.bytes=new Uint8Array(A),this.vertexViewF32=new Float32Array(A),this.vertexViewU32=new Uint32Array(A);var x=a(i,"vertices",null);for(x?(this.vertexViewF32.set(x),this.vertexBuffer=n.createVertexBuffer(A,e.STATIC_DRAW)):this.vertexBuffer=n.createVertexBuffer(A.byteLength,e.DYNAMIC_DRAW),this.setVertexBuffer(),t=g.length-1;t>=0;t--)g[t].rebind();this.hasBooted=!0,n.on(l.RESIZE,this.resize,this),n.on(l.PRE_RENDER,this.onPreRender,this),n.on(l.RENDER,this.onRender,this),n.on(l.POST_RENDER,this.onPostRender,this),this.emit(o.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(t,e){var i=this.renderer;return t===this.currentShader&&i.currentProgram===this.currentShader.program||(this.flush(),i.resetTextures(),this.setVertexBuffer()&&!e&&(e=!0),t.bind(e,!1),this.currentShader=t),this},getShaderByName:function(t){for(var e=this.shaders,i=0;i<e.length;i++)if(e[i].name===t)return e[i]},setShadersFromConfig:function(t){var e,i=this.shaders,n=this.renderer;for(e=0;e<i.length;e++)i[e].destroy();var s=a(t,"vertShader",null),o=c.parseFragmentShaderMaxTextures(a(t,"fragShader",null),n.maxTextures),h=a(t,"attributes",null),l=a(t,"shaders",[]),u=l.length;if(0===u)s&&o&&(this.shaders=[new d(this,"default",s,o,r(h))]);else{var p=[];for(e=0;e<u;e++){var f=l[e],m=a(f,"name","default"),g=a(f,"vertShader",s),v=c.parseFragmentShaderMaxTextures(a(f,"fragShader",o),n.maxTextures),y=a(f,"attributes",h);g&&v&&p.push(new d(this,m,g,v,r(y)))}this.shaders=p}return 0===this.shaders.length||(this.currentShader=this.shaders[0]),this},setGameObject:function(t,e){return void 0===e&&(e=t.frame),this.currentUnit=this.renderer.setTextureSource(e.source),this.currentUnit},shouldFlush:function(t){return void 0===t&&(t=0),this.vertexCount+t>this.vertexCapacity},resize:function(t,e){t===this.width&&e===this.height||this.flush(),this.width=t,this.height=e;for(var i=this.renderTargets,n=0;n<i.length;n++)i[n].resize(t,e);return this.setProjectionMatrix(t,e),this.emit(o.RESIZE,t,e,this),this.onResize(t,e),this},setProjectionMatrix:function(t,e){var i=this.projectionMatrix;if(!i)return this;this.projectionWidth=t,this.projectionHeight=e,i.ortho(0,t,e,0,-1e3,1e3);for(var n=this.shaders,r="uProjectionMatrix",s=0;s<n.length;s++){var o=n[s];o.hasUniform(r)&&(o.resetUniform(r),o.setMatrix4fv(r,!1,i.val,o))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var t=this.renderer.projectionWidth,e=this.renderer.projectionHeight;this.projectionWidth===t&&this.projectionHeight===e||this.setProjectionMatrix(t,e)}},bind:function(t){if(void 0===t&&(t=this.currentShader),this.glReset)return this.rebind(t);var e=this.setVertexBuffer();return t.bind(e),this.currentShader=t,this.emit(o.BIND,this,t),this.onActive(t),this},rebind:function(t){this.setVertexBuffer();for(var e=this.shaders,i=e.length-1;i>=0;i--){var n=e[i].rebind();t&&n!==t||(this.currentShader=n)}return this.emit(o.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var t=this.gl,e=this.vertexBuffer;return t.getParameter(t.ARRAY_BUFFER_BINDING)!==e&&(t.bindBuffer(t.ARRAY_BUFFER,e),!0)},preBatch:function(t){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(t),this},postBatch:function(t){return this.onDraw(this.currentRenderTarget),this.onPostBatch(t),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(t){if(void 0===t&&(t=!1),this.vertexCount>0){this.emit(o.BEFORE_FLUSH,this,t),this.onBeforeFlush(t);var e=this.gl,i=this.vertexCount,n=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),i===this.vertexCapacity?e.bufferData(e.ARRAY_BUFFER,this.vertexData,e.DYNAMIC_DRAW):e.bufferSubData(e.ARRAY_BUFFER,0,this.bytes.subarray(0,i*n)),e.drawArrays(this.topology,0,i)),this.vertexCount=0,this.emit(o.AFTER_FLUSH,this,t),this.onAfterFlush(t)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(t,e,i,n,r,s,o){var a=this.vertexViewF32,h=this.vertexViewU32,l=this.vertexCount*this.currentShader.vertexComponentCount-1;a[++l]=t,a[++l]=e,a[++l]=i,a[++l]=n,a[++l]=r,a[++l]=s,h[++l]=o,this.vertexCount++},batchQuad:function(t,e,i,n,r,s,o,a,h,l,u,c,d,p,f,m,g,v,y,A){void 0===A&&(A=this.currentUnit);var x=!1;return this.shouldFlush(6)&&(this.flush(),x=!0,A=this.setTexture2D(y)),this.batchVert(e,i,l,u,A,v,p),this.batchVert(n,r,l,d,A,v,m),this.batchVert(s,o,c,d,A,v,g),this.batchVert(e,i,l,u,A,v,p),this.batchVert(s,o,c,d,A,v,g),this.batchVert(a,h,c,u,A,v,f),this.onBatch(t),x},batchTri:function(t,e,i,n,r,s,o,a,h,l,u,c,d,p,f,m,g){void 0===g&&(g=this.currentUnit);var v=!1;return this.shouldFlush(3)&&(this.flush(),v=!0,g=this.setTexture2D(m)),this.batchVert(e,i,a,h,g,f,c),this.batchVert(n,r,a,u,g,f,d),this.batchVert(s,o,l,u,g,f,p),this.onBatch(t),v},drawFillRect:function(t,e,i,n,r,s,o,a){void 0===o&&(o=this.renderer.whiteTexture.glTexture),void 0===a&&(a=!0),t=Math.floor(t),e=Math.floor(e);var h=Math.floor(t+i),l=Math.floor(e+n),u=this.setTexture2D(o),d=c.getTintAppendFloatAlphaAndSwap(r,s),p=0,f=1;a&&(p=1,f=0),this.batchQuad(null,t,e,t,l,h,l,h,e,0,p,1,f,d,d,d,d,0,o,u)},setTexture2D:function(t){return void 0===t&&(t=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(t),this.currentUnit},bindTexture:function(t,e){void 0===e&&(e=0);var i=this.gl;return i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,t),this},bindRenderTarget:function(t,e){return this.bindTexture(t.texture,e)},setTime:function(t){return this.set1f(t,this.game.loop.getDuration()),this},set1f:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set1f(t,e),this},set2f:function(t,e,i,n){return void 0===n&&(n=this.currentShader),n.set2f(t,e,i),this},set3f:function(t,e,i,n,r){return void 0===r&&(r=this.currentShader),r.set3f(t,e,i,n),this},set4f:function(t,e,i,n,r,s){return void 0===s&&(s=this.currentShader),s.set4f(t,e,i,n,r),this},set1fv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set1fv(t,e),this},set2fv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set2fv(t,e),this},set3fv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set3fv(t,e),this},set4fv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set4fv(t,e),this},set1iv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set1iv(t,e),this},set2iv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set2iv(t,e),this},set3iv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set3iv(t,e),this},set4iv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set4iv(t,e),this},set1i:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set1i(t,e),this},set2i:function(t,e,i,n){return void 0===n&&(n=this.currentShader),n.set2i(t,e,i),this},set3i:function(t,e,i,n,r){return void 0===r&&(r=this.currentShader),r.set3i(t,e,i,n),this},set4i:function(t,e,i,n,r,s){return void 0===s&&(s=this.currentShader),s.set4i(t,e,i,n,r),this},setMatrix2fv:function(t,e,i,n){return void 0===n&&(n=this.currentShader),n.setMatrix2fv(t,e,i),this},setMatrix3fv:function(t,e,i,n){return void 0===n&&(n=this.currentShader),n.setMatrix3fv(t,e,i),this},setMatrix4fv:function(t,e,i,n){return void 0===n&&(n=this.currentShader),n.setMatrix4fv(t,e,i),this},destroy:function(){var t;this.emit(o.DESTROY,this);var e=this.shaders;for(t=0;t<e.length;t++)e[t].destroy();var i=this.renderTargets;for(t=0;t<i.length;t++)i[t].destroy();this.gl.deleteBuffer(this.vertexBuffer);var n=this.renderer;return n.off(l.RESIZE,this.resize,this),n.off(l.PRE_RENDER,this.onPreRender,this),n.off(l.RENDER,this.onRender,this),n.off(l.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});t.exports=p},function(t,e,i){var n=i(0),r=i(16),s=i(15),o=new n({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(s.BOOT,this.boot,this),this.events.on(s.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(t,e){o.prototype.hasOwnProperty(t)||(o.prototype[t]=e)},o.remove=function(t){o.prototype.hasOwnProperty(t)&&delete o.prototype[t]},r.register("GameObjectCreator",o,"make"),t.exports=o},function(t,e,i){var n=i(0),r=i(181),s=i(243),o=i(9),a=i(142),h=i(15),l=new n({Extends:o,initialize:function(t,e){o.call(this),this.scene=t,this.displayList=null,this.type=e,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(a.ADDED_TO_SCENE,this.addedToScene,this),this.on(a.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new s(this)),this},setData:function(t,e){return this.data||(this.data=new s(this)),this.data.set(t,e),this},incData:function(t,e){return this.data||(this.data=new s(this)),this.data.inc(t,e),this},toggleData:function(t){return this.data||(this.data=new s(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new s(this)),this.data.get(t)},setInteractive:function(t,e,i){return this.scene.sys.input.enable(this,t,e,i),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return r(this)},willRender:function(t){return!(l.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,i=[];e&&(i.unshift(e.getIndex(t)),t=e,e.parentContainer);)e=e.parentContainer;return this.displayList?i.unshift(this.displayList.getIndex(t)):i.unshift(this.scene.sys.displayList.getIndex(t)),i},addToDisplayList:function(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||(this.displayList=t,t.add(this,!0),t.queueDepthSort(),this.emit(a.ADDED_TO_SCENE,this,this.scene),t.events.emit(h.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var t=this.displayList||this.scene.sys.displayList;return t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(a.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(h.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(t){this.scene&&!this.ignoreDestroy&&(void 0===t&&(t=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(a.DESTROY,this,t),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});l.RENDER_MASK=15,t.exports=l},function(t,e){t.exports=function(t,e){return t.y=e-t.height+t.height*t.originY,t}},function(t,e){t.exports=function(t,e){return t.x=e+t.width*t.originX,t}},function(t,e){t.exports=function(t,e){return t.x=e-t.width+t.width*t.originX,t}},function(t,e){t.exports=function(t,e){return t.y=e+t.height*t.originY,t}},function(t,e,i){var n=i(0),r=i(11),s=i(12),o=i(3),a=i(1),h=i(7),l=i(6),u=new n({Extends:s,initialize:function(t,e,i,n,o){var u="json";if(l(e)){var c=e;e=a(c,"key"),i=a(c,"url"),n=a(c,"xhrSettings"),u=a(c,"extension",u),o=a(c,"dataKey",o)}var d={type:"json",cache:t.cacheManager.json,extension:u,responseType:"text",key:e,url:i,xhrSettings:n,config:o};s.call(this,t,d),l(i)&&(this.data=o?h(i,o):i,this.state=r.FILE_POPULATED)},onProcess:function(){if(this.state!==r.FILE_POPULATED){this.state=r.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(t){throw this.onProcessError(),t}var e=this.config;this.data="string"==typeof e?h(t,e,t):t}this.onProcessComplete()}});o.register("json",(function(t,e,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new u(this,t[r]));else this.addFile(new u(this,t,e,n,i));return this})),t.exports=u},function(t,e){t.exports=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},function(t,e,i){var n=i(10);t.exports=function(t){return t*n.DEG_TO_RAD}},function(t,e,i){t.exports={BOOT:i(612),DESTROY:i(613),DRAG_END:i(614),DRAG_ENTER:i(615),DRAG:i(616),DRAG_LEAVE:i(617),DRAG_OVER:i(618),DRAG_START:i(619),DROP:i(620),GAME_OUT:i(621),GAME_OVER:i(622),GAMEOBJECT_DOWN:i(623),GAMEOBJECT_DRAG_END:i(624),GAMEOBJECT_DRAG_ENTER:i(625),GAMEOBJECT_DRAG:i(626),GAMEOBJECT_DRAG_LEAVE:i(627),GAMEOBJECT_DRAG_OVER:i(628),GAMEOBJECT_DRAG_START:i(629),GAMEOBJECT_DROP:i(630),GAMEOBJECT_MOVE:i(631),GAMEOBJECT_OUT:i(632),GAMEOBJECT_OVER:i(633),GAMEOBJECT_POINTER_DOWN:i(634),GAMEOBJECT_POINTER_MOVE:i(635),GAMEOBJECT_POINTER_OUT:i(636),GAMEOBJECT_POINTER_OVER:i(637),GAMEOBJECT_POINTER_UP:i(638),GAMEOBJECT_POINTER_WHEEL:i(639),GAMEOBJECT_UP:i(640),GAMEOBJECT_WHEEL:i(641),MANAGER_BOOT:i(642),MANAGER_PROCESS:i(643),MANAGER_UPDATE:i(644),POINTER_DOWN:i(645),POINTER_DOWN_OUTSIDE:i(646),POINTER_MOVE:i(647),POINTER_OUT:i(648),POINTER_OVER:i(649),POINTER_UP:i(650),POINTER_UP_OUTSIDE:i(651),POINTER_WHEEL:i(652),POINTERLOCK_CHANGE:i(653),PRE_UPDATE:i(654),SHUTDOWN:i(655),START:i(656),UPDATE:i(657)}},function(t,e,i){var n=i(0),r=i(11),s=i(12),o=i(3),a=i(1),h=i(6),l=new n({Extends:s,initialize:function t(e,i,n,r,o){var l,u="png";if(h(i)){var c=i;i=a(c,"key"),n=a(c,"url"),l=a(c,"normalMap"),r=a(c,"xhrSettings"),u=a(c,"extension",u),o=a(c,"frameConfig")}Array.isArray(n)&&(l=n[1],n=n[0]);var d={type:"image",cache:e.textureManager,extension:u,responseType:"blob",key:i,url:n,xhrSettings:r,config:o};if(s.call(this,e,d),l){var p=new t(e,this.key,l,r,o);p.type="normalMap",this.setLink(p),e.addFile(p)}},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){s.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(t.data),t.onProcessError()},s.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var t,e=this.linkFile;e&&e.state===r.FILE_COMPLETE?(t="image"===this.type?this.cache.addImage(this.key,this.data,e.data):this.cache.addImage(e.key,e.data,this.data),this.pendingDestroy(t),e.pendingDestroy(t)):e||(t=this.cache.addImage(this.key,this.data),this.pendingDestroy(t))}});o.register("image",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e){t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(t,e,i){var n=i(0),r=i(27),s=new n({initialize:function(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new s(this)},set:function(t){return this.copy(t)},setValues:function(t,e,i,n,r,s,o,a,h,l,u,c,d,p,f,m){var g=this.val;return g[0]=t,g[1]=e,g[2]=i,g[3]=n,g[4]=r,g[5]=s,g[6]=o,g[7]=a,g[8]=h,g[9]=l,g[10]=u,g[11]=c,g[12]=d,g[13]=p,g[14]=f,g[15]=m,this},copy:function(t){var e=t.val;return this.setValues(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},fromArray:function(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(t,e,i){var n=o.fromQuat(i).val,r=e.x,s=e.y,a=e.z;return this.setValues(n[0]*r,n[1]*r,n[2]*r,0,n[4]*s,n[5]*s,n[6]*s,0,n[8]*a,n[9]*a,n[10]*a,0,t.x,t.y,t.z,1)},xyz:function(t,e,i){this.identity();var n=this.val;return n[12]=t,n[13]=e,n[14]=i,this},scaling:function(t,e,i){this.zero();var n=this.val;return n[0]=t,n[5]=e,n[10]=i,n[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var t=this.val,e=t[1],i=t[2],n=t[3],r=t[6],s=t[7],o=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=e,t[6]=t[9],t[7]=t[13],t[8]=i,t[9]=r,t[11]=t[14],t[12]=n,t[13]=s,t[14]=o,this},getInverse:function(t){return this.copy(t),this.invert()},invert:function(){var t=this.val,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8],u=t[9],c=t[10],d=t[11],p=t[12],f=t[13],m=t[14],g=t[15],v=e*o-i*s,y=e*a-n*s,A=e*h-r*s,x=i*a-n*o,w=i*h-r*o,b=n*h-r*a,S=l*f-u*p,E=l*m-c*p,T=l*g-d*p,_=u*m-c*f,M=u*g-d*f,C=c*g-d*m,P=v*C-y*M+A*_+x*T-w*E+b*S;return P?(P=1/P,this.setValues((o*C-a*M+h*_)*P,(n*M-i*C-r*_)*P,(f*b-m*w+g*x)*P,(c*w-u*b-d*x)*P,(a*T-s*C-h*E)*P,(e*C-n*T+r*E)*P,(m*A-p*b-g*y)*P,(l*b-c*A+d*y)*P,(s*M-o*T+h*S)*P,(i*T-e*M-r*S)*P,(p*w-f*A+g*v)*P,(u*A-l*w-d*v)*P,(o*E-s*_-a*S)*P,(e*_-i*E+n*S)*P,(f*y-p*x-m*v)*P,(l*x-u*y+c*v)*P)):this},adjoint:function(){var t=this.val,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8],u=t[9],c=t[10],d=t[11],p=t[12],f=t[13],m=t[14],g=t[15];return this.setValues(o*(c*g-d*m)-u*(a*g-h*m)+f*(a*d-h*c),-(i*(c*g-d*m)-u*(n*g-r*m)+f*(n*d-r*c)),i*(a*g-h*m)-o*(n*g-r*m)+f*(n*h-r*a),-(i*(a*d-h*c)-o*(n*d-r*c)+u*(n*h-r*a)),-(s*(c*g-d*m)-l*(a*g-h*m)+p*(a*d-h*c)),e*(c*g-d*m)-l*(n*g-r*m)+p*(n*d-r*c),-(e*(a*g-h*m)-s*(n*g-r*m)+p*(n*h-r*a)),e*(a*d-h*c)-s*(n*d-r*c)+l*(n*h-r*a),s*(u*g-d*f)-l*(o*g-h*f)+p*(o*d-h*u),-(e*(u*g-d*f)-l*(i*g-r*f)+p*(i*d-r*u)),e*(o*g-h*f)-s*(i*g-r*f)+p*(i*h-r*o),-(e*(o*d-h*u)-s*(i*d-r*u)+l*(i*h-r*o)),-(s*(u*m-c*f)-l*(o*m-a*f)+p*(o*c-a*u)),e*(u*m-c*f)-l*(i*m-n*f)+p*(i*c-n*u),-(e*(o*m-a*f)-s*(i*m-n*f)+p*(i*a-n*o)),e*(o*c-a*u)-s*(i*c-n*u)+l*(i*a-n*o))},determinant:function(){var t=this.val,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8],u=t[9],c=t[10],d=t[11],p=t[12],f=t[13],m=t[14],g=t[15];return(e*o-i*s)*(c*g-d*m)-(e*a-n*s)*(u*g-d*f)+(e*h-r*s)*(u*m-c*f)+(i*a-n*o)*(l*g-d*p)-(i*h-r*o)*(l*m-c*p)+(n*h-r*a)*(l*f-u*p)},multiply:function(t){var e=this.val,i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],h=e[6],l=e[7],u=e[8],c=e[9],d=e[10],p=e[11],f=e[12],m=e[13],g=e[14],v=e[15],y=t.val,A=y[0],x=y[1],w=y[2],b=y[3];return e[0]=A*i+x*o+w*u+b*f,e[1]=A*n+x*a+w*c+b*m,e[2]=A*r+x*h+w*d+b*g,e[3]=A*s+x*l+w*p+b*v,A=y[4],x=y[5],w=y[6],b=y[7],e[4]=A*i+x*o+w*u+b*f,e[5]=A*n+x*a+w*c+b*m,e[6]=A*r+x*h+w*d+b*g,e[7]=A*s+x*l+w*p+b*v,A=y[8],x=y[9],w=y[10],b=y[11],e[8]=A*i+x*o+w*u+b*f,e[9]=A*n+x*a+w*c+b*m,e[10]=A*r+x*h+w*d+b*g,e[11]=A*s+x*l+w*p+b*v,A=y[12],x=y[13],w=y[14],b=y[15],e[12]=A*i+x*o+w*u+b*f,e[13]=A*n+x*a+w*c+b*m,e[14]=A*r+x*h+w*d+b*g,e[15]=A*s+x*l+w*p+b*v,this},multiplyLocal:function(t){var e=this.val,i=t.val;return this.setValues(e[0]*i[0]+e[1]*i[4]+e[2]*i[8]+e[3]*i[12],e[0]*i[1]+e[1]*i[5]+e[2]*i[9]+e[3]*i[13],e[0]*i[2]+e[1]*i[6]+e[2]*i[10]+e[3]*i[14],e[0]*i[3]+e[1]*i[7]+e[2]*i[11]+e[3]*i[15],e[4]*i[0]+e[5]*i[4]+e[6]*i[8]+e[7]*i[12],e[4]*i[1]+e[5]*i[5]+e[6]*i[9]+e[7]*i[13],e[4]*i[2]+e[5]*i[6]+e[6]*i[10]+e[7]*i[14],e[4]*i[3]+e[5]*i[7]+e[6]*i[11]+e[7]*i[15],e[8]*i[0]+e[9]*i[4]+e[10]*i[8]+e[11]*i[12],e[8]*i[1]+e[9]*i[5]+e[10]*i[9]+e[11]*i[13],e[8]*i[2]+e[9]*i[6]+e[10]*i[10]+e[11]*i[14],e[8]*i[3]+e[9]*i[7]+e[10]*i[11]+e[11]*i[15],e[12]*i[0]+e[13]*i[4]+e[14]*i[8]+e[15]*i[12],e[12]*i[1]+e[13]*i[5]+e[14]*i[9]+e[15]*i[13],e[12]*i[2]+e[13]*i[6]+e[14]*i[10]+e[15]*i[14],e[12]*i[3]+e[13]*i[7]+e[14]*i[11]+e[15]*i[15])},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.val,n=e.val,r=i[0],s=i[4],o=i[8],a=i[12],h=i[1],l=i[5],u=i[9],c=i[13],d=i[2],p=i[6],f=i[10],m=i[14],g=i[3],v=i[7],y=i[11],A=i[15],x=n[0],w=n[4],b=n[8],S=n[12],E=n[1],T=n[5],_=n[9],M=n[13],C=n[2],P=n[6],R=n[10],O=n[14],L=n[3],I=n[7],D=n[11],B=n[15];return this.setValues(r*x+s*E+o*C+a*L,h*x+l*E+u*C+c*L,d*x+p*E+f*C+m*L,g*x+v*E+y*C+A*L,r*w+s*T+o*P+a*I,h*w+l*T+u*P+c*I,d*w+p*T+f*P+m*I,g*w+v*T+y*P+A*I,r*b+s*_+o*R+a*D,h*b+l*_+u*R+c*D,d*b+p*_+f*R+m*D,g*b+v*_+y*R+A*D,r*S+s*M+o*O+a*B,h*S+l*M+u*O+c*B,d*S+p*M+f*O+m*B,g*S+v*M+y*O+A*B)},translate:function(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function(t,e,i){var n=this.val;return n[12]=n[0]*t+n[4]*e+n[8]*i+n[12],n[13]=n[1]*t+n[5]*e+n[9]*i+n[13],n[14]=n[2]*t+n[6]*e+n[10]*i+n[14],n[15]=n[3]*t+n[7]*e+n[11]*i+n[15],this},scale:function(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function(t,e,i){var n=this.val;return n[0]=n[0]*t,n[1]=n[1]*t,n[2]=n[2]*t,n[3]=n[3]*t,n[4]=n[4]*e,n[5]=n[5]*e,n[6]=n[6]*e,n[7]=n[7]*e,n[8]=n[8]*i,n[9]=n[9]*i,n[10]=n[10]*i,n[11]=n[11]*i,this},makeRotationAxis:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=1-i,s=t.x,o=t.y,a=t.z,h=r*s,l=r*o;return this.setValues(h*s+i,h*o-n*a,h*a+n*o,0,h*o+n*a,l*o+i,l*a-n*s,0,h*a-n*o,l*a+n*s,r*a*a+i,0,0,0,0,1)},rotate:function(t,e){var i=this.val,n=e.x,r=e.y,s=e.z,o=Math.sqrt(n*n+r*r+s*s);if(Math.abs(o)<1e-6)return this;n*=o=1/o,r*=o,s*=o;var a=Math.sin(t),h=Math.cos(t),l=1-h,u=i[0],c=i[1],d=i[2],p=i[3],f=i[4],m=i[5],g=i[6],v=i[7],y=i[8],A=i[9],x=i[10],w=i[11],b=i[12],S=i[13],E=i[14],T=i[15],_=n*n*l+h,M=r*n*l+s*a,C=s*n*l-r*a,P=n*r*l-s*a,R=r*r*l+h,O=s*r*l+n*a,L=n*s*l+r*a,I=r*s*l-n*a,D=s*s*l+h;return this.setValues(u*_+f*M+y*C,c*_+m*M+A*C,d*_+g*M+x*C,p*_+v*M+w*C,u*P+f*R+y*O,c*P+m*R+A*O,d*P+g*R+x*O,p*P+v*R+w*O,u*L+f*I+y*D,c*L+m*I+A*D,d*L+g*I+x*D,p*L+v*I+w*D,b,S,E,T)},rotateX:function(t){var e=this.val,i=Math.sin(t),n=Math.cos(t),r=e[4],s=e[5],o=e[6],a=e[7],h=e[8],l=e[9],u=e[10],c=e[11];return e[4]=r*n+h*i,e[5]=s*n+l*i,e[6]=o*n+u*i,e[7]=a*n+c*i,e[8]=h*n-r*i,e[9]=l*n-s*i,e[10]=u*n-o*i,e[11]=c*n-a*i,this},rotateY:function(t){var e=this.val,i=Math.sin(t),n=Math.cos(t),r=e[0],s=e[1],o=e[2],a=e[3],h=e[8],l=e[9],u=e[10],c=e[11];return e[0]=r*n-h*i,e[1]=s*n-l*i,e[2]=o*n-u*i,e[3]=a*n-c*i,e[8]=r*i+h*n,e[9]=s*i+l*n,e[10]=o*i+u*n,e[11]=a*i+c*n,this},rotateZ:function(t){var e=this.val,i=Math.sin(t),n=Math.cos(t),r=e[0],s=e[1],o=e[2],a=e[3],h=e[4],l=e[5],u=e[6],c=e[7];return e[0]=r*n+h*i,e[1]=s*n+l*i,e[2]=o*n+u*i,e[3]=a*n+c*i,e[4]=h*n-r*i,e[5]=l*n-s*i,e[6]=u*n-o*i,e[7]=c*n-a*i,this},fromRotationTranslation:function(t,e){var i=t.x,n=t.y,r=t.z,s=t.w,o=i+i,a=n+n,h=r+r,l=i*o,u=i*a,c=i*h,d=n*a,p=n*h,f=r*h,m=s*o,g=s*a,v=s*h;return this.setValues(1-(d+f),u+v,c-g,0,u-v,1-(l+f),p+m,0,c+g,p-m,1-(l+d),0,e.x,e.y,e.z,1)},fromQuat:function(t){var e=t.x,i=t.y,n=t.z,r=t.w,s=e+e,o=i+i,a=n+n,h=e*s,l=e*o,u=e*a,c=i*o,d=i*a,p=n*a,f=r*s,m=r*o,g=r*a;return this.setValues(1-(c+p),l+g,u-m,0,l-g,1-(h+p),d+f,0,u+m,d-f,1-(h+c),0,0,0,0,1)},frustum:function(t,e,i,n,r,s){var o=1/(e-t),a=1/(n-i),h=1/(r-s);return this.setValues(2*r*o,0,0,0,0,2*r*a,0,0,(e+t)*o,(n+i)*a,(s+r)*h,-1,0,0,s*r*2*h,0)},perspective:function(t,e,i,n){var r=1/Math.tan(t/2),s=1/(i-n);return this.setValues(r/e,0,0,0,0,r,0,0,0,0,(n+i)*s,-1,0,0,2*n*i*s,0)},perspectiveLH:function(t,e,i,n){return this.setValues(2*i/t,0,0,0,0,2*i/e,0,0,0,0,-n/(i-n),1,0,0,i*n/(i-n),0)},ortho:function(t,e,i,n,r,s){var o=t-e,a=i-n,h=r-s;return o=0===o?o:1/o,a=0===a?a:1/a,h=0===h?h:1/h,this.setValues(-2*o,0,0,0,0,-2*a,0,0,0,0,2*h,0,(t+e)*o,(n+i)*a,(s+r)*h,1)},lookAtRH:function(t,e,i){var n=this.val;return u.subVectors(t,e),0===u.getLengthSquared()&&(u.z=1),u.normalize(),h.crossVectors(i,u),0===h.getLengthSquared()&&(1===Math.abs(i.z)?u.x+=1e-4:u.z+=1e-4,u.normalize(),h.crossVectors(i,u)),h.normalize(),l.crossVectors(u,h),n[0]=h.x,n[1]=h.y,n[2]=h.z,n[4]=l.x,n[5]=l.y,n[6]=l.z,n[8]=u.x,n[9]=u.y,n[10]=u.z,this},lookAt:function(t,e,i){var n=t.x,r=t.y,s=t.z,o=i.x,a=i.y,h=i.z,l=e.x,u=e.y,c=e.z;if(Math.abs(n-l)<1e-6&&Math.abs(r-u)<1e-6&&Math.abs(s-c)<1e-6)return this.identity();var d=n-l,p=r-u,f=s-c,m=1/Math.sqrt(d*d+p*p+f*f),g=a*(f*=m)-h*(p*=m),v=h*(d*=m)-o*f,y=o*p-a*d;(m=Math.sqrt(g*g+v*v+y*y))?(g*=m=1/m,v*=m,y*=m):(g=0,v=0,y=0);var A=p*y-f*v,x=f*g-d*y,w=d*v-p*g;return(m=Math.sqrt(A*A+x*x+w*w))?(A*=m=1/m,x*=m,w*=m):(A=0,x=0,w=0),this.setValues(g,A,d,0,v,x,p,0,y,w,f,0,-(g*n+v*r+y*s),-(A*n+x*r+w*s),-(d*n+p*r+f*s),1)},yawPitchRoll:function(t,e,i){this.zero(),o.zero(),a.zero();var n=this.val,r=o.val,s=a.val,h=Math.sin(i),l=Math.cos(i);return n[10]=1,n[15]=1,n[0]=l,n[1]=h,n[4]=-h,n[5]=l,h=Math.sin(e),l=Math.cos(e),r[0]=1,r[15]=1,r[5]=l,r[10]=l,r[9]=-h,r[6]=h,h=Math.sin(t),l=Math.cos(t),s[5]=1,s[15]=1,s[0]=l,s[2]=-h,s[8]=h,s[10]=l,this.multiplyLocal(o),this.multiplyLocal(a),this},setWorldMatrix:function(t,e,i,n,r){return this.yawPitchRoll(t.y,t.x,t.z),o.scaling(i.x,i.y,i.z),a.xyz(e.x,e.y,e.z),this.multiplyLocal(o),this.multiplyLocal(a),n&&this.multiplyLocal(n),r&&this.multiplyLocal(r),this},multiplyToMat4:function(t,e){var i=this.val,n=t.val,r=i[0],s=i[1],o=i[2],a=i[3],h=i[4],l=i[5],u=i[6],c=i[7],d=i[8],p=i[9],f=i[10],m=i[11],g=i[12],v=i[13],y=i[14],A=i[15],x=n[0],w=n[1],b=n[2],S=n[3],E=n[4],T=n[5],_=n[6],M=n[7],C=n[8],P=n[9],R=n[10],O=n[11],L=n[12],I=n[13],D=n[14],B=n[15];return e.setValues(x*r+w*h+b*d+S*g,w*s+w*l+b*p+S*v,b*o+w*u+b*f+S*y,S*a+w*c+b*m+S*A,E*r+T*h+_*d+M*g,E*s+T*l+_*p+M*v,E*o+T*u+_*f+M*y,E*a+T*c+_*m+M*A,C*r+P*h+R*d+O*g,C*s+P*l+R*p+O*v,C*o+P*u+R*f+O*y,C*a+P*c+R*m+O*A,L*r+I*h+D*d+B*g,L*s+I*l+D*p+B*v,L*o+I*u+D*f+B*y,L*a+I*c+D*m+B*A)},fromRotationXYTranslation:function(t,e,i){var n=e.x,r=e.y,s=e.z,o=Math.sin(t.x),a=Math.cos(t.x),h=Math.sin(t.y),l=Math.cos(t.y),u=n,c=r,d=s,p=-o,f=0-p*h,m=0-a*h,g=p*l,v=a*l;return i||(u=l*n+h*s,c=f*n+a*r+g*s,d=m*n+o*r+v*s),this.setValues(l,f,m,0,0,a,o,0,h,g,v,0,u,c,d,1)},getMaxScaleOnAxis:function(){var t=this.val,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}}),o=new s,a=new s,h=new r,l=new r,u=new r;t.exports=s},function(t,e,i){var n=i(81),r=i(130);t.exports=function(t,e){var i=n.Power0;if("string"==typeof t)if(n.hasOwnProperty(t))i=n[t];else{var s="";t.indexOf(".")&&("in"===(s=t.substr(t.indexOf(".")+1)).toLowerCase()?s="easeIn":"out"===s.toLowerCase()?s="easeOut":"inout"===s.toLowerCase()&&(s="easeInOut")),t=r(t.substr(0,t.indexOf(".")+1)+s),n.hasOwnProperty(t)&&(i=n[t])}else"function"==typeof t?i=t:Array.isArray(t)&&t.length;if(!e)return i;var o=e.slice(0);return o.unshift(0),function(t){return o[0]=t,i.apply(this,o)}}},function(t,e){t.exports=function(t,e,i,n){var r=t.length;if(e<0||e>r||e>=i||i>r||e+i>r){if(n)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(t,e){t.exports=function(t,e,i){return!(t.width<=0||t.height<=0)&&t.x<=e&&t.x+t.width>=e&&t.y<=i&&t.y+t.height>=i}},function(t,e,i){t.exports={POST_RENDER:i(398),PRE_RENDER:i(399),RENDER:i(400),RESIZE:i(401)}},function(t,e){t.exports=function(t,e,i){var n=i-e;return e+((t-e)%n+n)%n}},function(t,e,i){var n=i(68);t.exports=function(t,e,i,r){var s;if(void 0===r&&(r=t),!Array.isArray(e))return-1!==(s=t.indexOf(e))?(n(t,s),i&&i.call(r,e),e):null;for(var o=e.length-1,a=[];o>=0;){var h=e[o];-1!==(s=t.indexOf(h))&&(n(t,s),a.push(h),i&&i.call(r,h)),o--}return a}},function(t,e,i){t.exports={ADD:i(667),COMPLETE:i(668),FILE_COMPLETE:i(669),FILE_KEY_COMPLETE:i(670),FILE_LOAD_ERROR:i(671),FILE_LOAD:i(672),FILE_PROGRESS:i(673),POST_PROCESS:i(674),PROGRESS:i(675),START:i(676)}},function(t,e){t.exports=function(t){var e={};for(var i in t)Array.isArray(t[i])?e[i]=t[i].slice(0):e[i]=t[i];return e}},function(t,e){t.exports=function(t,e,i){return t.radius>0&&e>=t.left&&e<=t.right&&i>=t.top&&i<=t.bottom&&(t.x-e)*(t.x-e)+(t.y-i)*(t.y-i)<=t.radius*t.radius}},function(t,e,i){var n=i(0),r=i(78),s=i(271),o=i(272),a=i(33),h=i(34),l=i(273),u=new n({initialize:function(t,e,i,n,r,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=0),this.type=a.TRIANGLE,this.x1=t,this.y1=e,this.x2=i,this.y2=n,this.x3=r,this.y3=s},contains:function(t,e){return r(this,t,e)},getPoint:function(t,e){return s(this,t,e)},getPoints:function(t,e,i){return o(this,t,e,i)},getRandomPoint:function(t){return l(this,t)},setTo:function(t,e,i,n,r,s){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=0),this.x1=t,this.y1=e,this.x2=i,this.y2=n,this.x3=r,this.y3=s,this},getLineA:function(t){return void 0===t&&(t=new h),t.setTo(this.x1,this.y1,this.x2,this.y2),t},getLineB:function(t){return void 0===t&&(t=new h),t.setTo(this.x2,this.y2,this.x3,this.y3),t},getLineC:function(t){return void 0===t&&(t=new h),t.setTo(this.x3,this.y3,this.x1,this.y1),t},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(t){var e;e=this.x1<=this.x2&&this.x1<=this.x3?this.x1-t:this.x2<=this.x1&&this.x2<=this.x3?this.x2-t:this.x3-t,this.x1-=e,this.x2-=e,this.x3-=e}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(t){var e;e=this.x1>=this.x2&&this.x1>=this.x3?this.x1-t:this.x2>=this.x1&&this.x2>=this.x3?this.x2-t:this.x3-t,this.x1-=e,this.x2-=e,this.x3-=e}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(t){var e;e=this.y1<=this.y2&&this.y1<=this.y3?this.y1-t:this.y2<=this.y1&&this.y2<=this.y3?this.y2-t:this.y3-t,this.y1-=e,this.y2-=e,this.y3-=e}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(t){var e;e=this.y1>=this.y2&&this.y1>=this.y3?this.y1-t:this.y2>=this.y1&&this.y2>=this.y3?this.y2-t:this.y3-t,this.y1-=e,this.y2-=e,this.y3-=e}}});t.exports=u},function(t,e,i){var n=i(0),r=i(151),s=i(8),o=i(5),a=new n({initialize:function(t){this.type=t,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new o,this._tmpVec2B=new o},draw:function(t,e){return void 0===e&&(e=32),t.strokePoints(this.getPoints(e))},getBounds:function(t,e){t||(t=new s),void 0===e&&(e=16);var i=this.getLength();e>i&&(e=i/2);var n=Math.max(1,Math.round(i/e));return r(this.getSpacedPoints(n),t)},getDistancePoints:function(t){var e=this.getLength(),i=Math.max(1,e/t);return this.getSpacedPoints(i)},getEndPoint:function(t){return void 0===t&&(t=new o),this.getPointAt(1,t)},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i=[],n=this.getPoint(0,this._tmpVec2A),r=0;i.push(0);for(var s=1;s<=t;s++)r+=(e=this.getPoint(s/t,this._tmpVec2B)).distance(n),i.push(r),n.copy(e);return this.cacheArcLengths=i,i},getPointAt:function(t,e){var i=this.getUtoTmapping(t);return this.getPoint(i,e)},getPoints:function(t,e,i){void 0===i&&(i=[]),t||(t=e?this.getLength()/e:this.defaultDivisions);for(var n=0;n<=t;n++)i.push(this.getPoint(n/t));return i},getRandomPoint:function(t){return void 0===t&&(t=new o),this.getPoint(Math.random(),t)},getSpacedPoints:function(t,e,i){void 0===i&&(i=[]),t||(t=e?this.getLength()/e:this.defaultDivisions);for(var n=0;n<=t;n++){var r=this.getUtoTmapping(n/t,null,t);i.push(this.getPoint(r))}return i},getStartPoint:function(t){return void 0===t&&(t=new o),this.getPointAt(0,t)},getTangent:function(t,e){void 0===e&&(e=new o);var i=t-1e-4,n=t+1e-4;return i<0&&(i=0),n>1&&(n=1),this.getPoint(i,this._tmpVec2A),this.getPoint(n,e),e.subtract(this._tmpVec2A).normalize()},getTangentAt:function(t,e){var i=this.getUtoTmapping(t);return this.getTangent(i,e)},getTFromDistance:function(t,e){return t<=0?0:this.getUtoTmapping(0,t,e)},getUtoTmapping:function(t,e,i){var n,r=this.getLengths(i),s=0,o=r.length;n=e?Math.min(e,r[o-1]):t*r[o-1];for(var a,h=0,l=o-1;h<=l;)if((a=r[s=Math.floor(h+(l-h)/2)]-n)<0)h=s+1;else{if(!(a>0)){l=s;break}l=s-1}if(r[s=l]===n)return s/(o-1);var u=r[s];return(s+(n-u)/(r[s+1]-u))/(o-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});t.exports=a},function(t,e,i){var n=i(2);t.exports=function(t,e,i){void 0===i&&(i=new n);var r=t.x1,s=t.y1,o=t.x2,a=t.y2,h=e.x1,l=e.y1,u=e.x2,c=e.y2,d=(c-l)*(o-r)-(u-h)*(a-s);if(0===d)return!1;var p=((u-h)*(s-l)-(c-l)*(r-h))/d,f=((o-r)*(s-l)-(a-s)*(r-h))/d;return p>=0&&p<=1&&f>=0&&f<=1&&(i.x=r+p*(o-r),i.y=s+p*(a-s),!0)}},function(t,e){t.exports=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)}},function(t,e){t.exports=function(t){return t.x-t.width*t.originX+.5*t.width}},function(t,e){t.exports=function(t,e){var i=t.width*t.originX;return t.x=e+i-.5*t.width,t}},function(t,e){t.exports=function(t,e){var i=t.height*t.originY;return t.y=e+i-.5*t.height,t}},function(t,e){t.exports=function(t){return t.y-t.height*t.originY+.5*t.height}},function(t,e){t.exports=function(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}},function(t,e){t.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(t,e){t.exports=function(t,e){if(!(e>=t.length)){for(var i=t.length-1,n=t[e],r=e;r<i;r++)t[r]=t[r+1];return t.length=i,n}}},function(t,e){t.exports=function(t,e,i){return t<<16|e<<8|i}},function(t,e,i){(function(e){var i={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};t.exports=function(){if("function"==typeof importScripts)return i;var t=navigator.userAgent;/Windows/.test(t)?i.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(i.iOS=!0,i.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),i.iOSVersion=parseInt(RegExp.$1,10)):i.macOS=!0:/Android/.test(t)?i.android=!0:/Linux/.test(t)?i.linux=!0:/iP[ao]d|iPhone/i.test(t)?(i.iOS=!0,navigator.appVersion.match(/OS (\d+)/),i.iOSVersion=parseInt(RegExp.$1,10),i.iPhone=-1!==t.toLowerCase().indexOf("iphone"),i.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?i.kindle=!0:/CrOS/.test(t)&&(i.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(i.android=!1,i.iOS=!1,i.macOS=!1,i.windows=!0,i.windowsPhone=!0);var n=/Silk/.test(t);return(i.windows||i.macOS||i.linux&&!n||i.chromeOS)&&(i.desktop=!0),(i.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(i.desktop=!1),navigator.standalone&&(i.webApp=!0),"function"!=typeof importScripts&&(void 0!==window.cordova&&(i.cordova=!0),void 0!==window.ejecta&&(i.ejecta=!0)),void 0!==e&&e.versions&&e.versions.node&&(i.node=!0),i.node&&"object"==o(e.versions)&&(i.nodeWebkit=!!e.versions["node-webkit"],i.electron=!!e.versions.electron),/Crosswalk/.test(t)&&(i.crosswalk=!0),i.pixelRatio=window.devicePixelRatio||1,i}()}).call(this,i(514))},function(t,e){t.exports=function(t,e,i,n){var r=t-i,s=e-n;return Math.sqrt(r*r+s*s)}},function(t,e,i){var n=i(13);t.exports=function(t,e,i){return(i-e)*(t=n(t,0,1))+e}},function(t,e){t.exports={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}}},function(t,e,i){"use strict";function n(t,e,i){i=i||2;var n,a,h,l,u,p,f,g=e&&e.length,v=g?e[0]*i:t.length,y=r(t,0,v,i,!0),A=[];if(!y||y.next===y.prev)return A;if(g&&(y=function(t,e,i,n){var o,a,h,l=[];for(o=0,a=e.length;o<a;o++)(h=r(t,e[o]*n,o<a-1?e[o+1]*n:t.length,n,!1))===h.next&&(h.steiner=!0),l.push(m(h));for(l.sort(c),o=0;o<l.length;o++)d(l[o],i),i=s(i,i.next);return i}(t,e,y,i)),t.length>80*i){n=h=t[0],a=l=t[1];for(var x=i;x<v;x+=i)(u=t[x])<n&&(n=u),(p=t[x+1])<a&&(a=p),u>h&&(h=u),p>l&&(l=p);f=0!==(f=Math.max(h-n,l-a))?1/f:0}return o(y,A,i,n,a,f),A}function r(t,e,i,n,r){var s,o;if(r===C(t,e,i,n)>0)for(s=e;s<i;s+=n)o=T(s,t[s],t[s+1],o);else for(s=i-n;s>=e;s-=n)o=T(s,t[s],t[s+1],o);return o&&A(o,o.next)&&(_(o),o=o.next),o}function s(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!A(n,n.next)&&0!==y(n.prev,n,n.next))n=n.next;else{if(_(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function o(t,e,i,n,r,c,d){if(t){!d&&c&&function(t,e,i,n){var r=t;do{null===r.z&&(r.z=f(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,s,o,a,h,l=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,n=i,a=0,e=0;e<l&&(a++,n=n.nextZ);e++);for(h=l;a>0||h>0&&n;)0!==a&&(0===h||!n||i.z<=n.z)?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,h--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;i=n}s.nextZ=null,l*=2}while(o>1)}(r)}(t,n,r,c);for(var p,m,g=t;t.prev!==t.next;)if(p=t.prev,m=t.next,c?h(t,n,r,c):a(t))e.push(p.i/i),e.push(t.i/i),e.push(m.i/i),_(t),t=m.next,g=m.next;else if((t=m)===g){d?1===d?o(t=l(s(t),e,i),e,i,n,r,c,2):2===d&&u(t,e,i,n,r,c):o(s(t),e,i,n,r,c,1);break}}}function a(t){var e=t.prev,i=t,n=t.next;if(y(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(g(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&y(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function h(t,e,i,n){var r=t.prev,s=t,o=t.next;if(y(r,s,o)>=0)return!1;for(var a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,h=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,l=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,c=f(a,h,e,i,n),d=f(l,u,e,i,n),p=t.prevZ,m=t.nextZ;p&&p.z>=c&&m&&m.z<=d;){if(p!==t.prev&&p!==t.next&&g(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&y(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,m!==t.prev&&m!==t.next&&g(r.x,r.y,s.x,s.y,o.x,o.y,m.x,m.y)&&y(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&g(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&y(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;m&&m.z<=d;){if(m!==t.prev&&m!==t.next&&g(r.x,r.y,s.x,s.y,o.x,o.y,m.x,m.y)&&y(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function l(t,e,i){var n=t;do{var r=n.prev,o=n.next.next;!A(r,o)&&x(r,n,n.next,o)&&S(r,o)&&S(o,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(o.i/i),_(n),_(n.next),n=t=o),n=n.next}while(n!==t);return s(n)}function u(t,e,i,n,r,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&v(h,l)){var u=E(h,l);return h=s(h,h.next),u=s(u,u.next),o(h,e,i,n,r,a),void o(u,e,i,n,r,a)}l=l.next}h=h.next}while(h!==t)}function c(t,e){return t.x-e.x}function d(t,e){if(e=function(t,e){var i,n=e,r=t.x,s=t.y,o=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>o){if(o=a,a===r){if(s===n.y)return n;if(s===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===o)return i;var h,l=i,u=i.x,c=i.y,d=1/0;n=i;do{r>=n.x&&n.x>=u&&r!==n.x&&g(s<c?r:o,s,u,c,s<c?o:r,s,n.x,n.y)&&(h=Math.abs(s-n.y)/(r-n.x),S(n,t)&&(h<d||h===d&&(n.x>i.x||n.x===i.x&&p(i,n)))&&(i=n,d=h)),n=n.next}while(n!==l);return i}(t,e)){var i=E(e,t);s(e,e.next),s(i,i.next)}}function p(t,e){return y(t.prev,t,e.prev)<0&&y(e.next,t,t.next)<0}function f(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function m(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function g(t,e,i,n,r,s,o,a){return(r-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(n-a)-(i-o)*(e-a)>=0&&(i-o)*(s-a)-(r-o)*(n-a)>=0}function v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&x(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(S(t,e)&&S(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(y(t.prev,t,e.prev)||y(t,e.prev,e))||A(t,e)&&y(t.prev,t,t.next)>0&&y(e.prev,e,e.next)>0)}function y(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function A(t,e){return t.x===e.x&&t.y===e.y}function x(t,e,i,n){var r=b(y(t,e,i)),s=b(y(t,e,n)),o=b(y(i,n,t)),a=b(y(i,n,e));return r!==s&&o!==a||!(0!==r||!w(t,i,e))||!(0!==s||!w(t,n,e))||!(0!==o||!w(i,t,n))||!(0!==a||!w(i,e,n))}function w(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function b(t){return t>0?1:t<0?-1:0}function S(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function E(t,e){var i=new M(t.i,t.x,t.y),n=new M(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function T(t,e,i,n){var r=new M(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function _(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function M(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(t,e,i,n){for(var r=0,s=e,o=i-n;s<i;s+=n)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}n.deviation=function(t,e,i,n){var r=e&&e.length,s=r?e[0]*i:t.length,o=Math.abs(C(t,0,s,i));if(r)for(var a=0,h=e.length;a<h;a++){var l=e[a]*i,u=a<h-1?e[a+1]*i:t.length;o-=Math.abs(C(t,l,u,i))}var c=0;for(a=0;a<n.length;a+=3){var d=n[a]*i,p=n[a+1]*i,f=n[a+2]*i;c+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[r][s][o]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i},t.exports=n},function(t,e,i){var n=i(0),r=i(74),s=i(1),o=i(594),a=i(595),h=i(24),l=i(20),u=i(73),c=i(35),d=new n({Extends:c,initialize:function(t){var e=t.game.renderer,i=s(t,"fragShader",o);t.fragShader=l.parseFragmentShaderMaxTextures(i,e.maxTextures),t.vertShader=s(t,"vertShader",a),t.attributes=s(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:u.UNSIGNED_BYTE,normalized:!0}]),c.call(this,t),this._tempMatrix1=new h,this._tempMatrix2=new h,this._tempMatrix3=new h,this.calcMatrix=new h,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){c.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(t,e,i){this.manager.set(this,t);var n=this._tempMatrix1,r=this._tempMatrix2,s=this._tempMatrix3,o=t.frame,a=o.glTexture,h=o.u0,u=o.v0,c=o.u1,d=o.v1,p=o.x,f=o.y,m=o.cutWidth,g=o.cutHeight,v=o.customPivot,y=t.displayOriginX,A=t.displayOriginY,x=-y+p,w=-A+f;if(t.isCropped){var b=t._crop;b.flipX===t.flipX&&b.flipY===t.flipY||o.updateCropUVs(b,t.flipX,t.flipY),h=b.u0,u=b.v0,c=b.u1,d=b.v1,m=b.width,g=b.height,x=-y+(p=b.x),w=-A+(f=b.y)}var S=1,E=1;t.flipX&&(v||(x+=-o.realWidth+2*y),S=-1),(t.flipY||o.source.isGLTexture&&!a.flipY)&&(v||(w+=-o.realHeight+2*A),E=-1),r.applyITRS(t.x,t.y,t.rotation,t.scaleX*S,t.scaleY*E),n.copyFrom(e.matrix),i?(n.multiplyWithOffset(i,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),r.e=t.x,r.f=t.y):(r.e-=e.scrollX*t.scrollFactorX,r.f-=e.scrollY*t.scrollFactorY),n.multiply(r,s);var T=x+m,_=w+g,M=e.roundPixels,C=s.getXRound(x,w,M),P=s.getYRound(x,w,M),R=s.getXRound(x,_,M),O=s.getYRound(x,_,M),L=s.getXRound(T,_,M),I=s.getYRound(T,_,M),D=s.getXRound(T,w,M),B=s.getYRound(T,w,M),k=l.getTintAppendFloatAlpha,F=e.alpha,N=k(t.tintTopLeft,F*t._alphaTL),z=k(t.tintTopRight,F*t._alphaTR),U=k(t.tintBottomLeft,F*t._alphaBL),G=k(t.tintBottomRight,F*t._alphaBR);this.shouldFlush(6)&&this.flush();var V=this.setGameObject(t,o);this.manager.preBatch(t),this.batchQuad(t,C,P,R,O,L,I,D,B,h,u,c,d,N,z,U,G,t.tintFill,a,V),this.manager.postBatch(t)},batchTexture:function(t,e,i,n,r,s,o,a,h,l,u,c,d,p,f,m,g,v,y,A,x,w,b,S,E,T,_,M,C,P,R,O){this.manager.set(this,t);var L=this._tempMatrix1,I=this._tempMatrix2,D=this._tempMatrix3,B=v/i+_,k=y/n+M,F=(v+A)/i+_,N=(y+x)/n+M,z=o,U=a,G=-m,V=-g;if(t.isCropped){var H=t._crop,W=H.width,j=H.height;z=W,U=j,o=W,a=j;var Y=v=H.x,X=y=H.y;c&&(Y=A-H.x-W),d&&(X=x-H.y-j),B=Y/i+_,k=X/n+M,F=(Y+W)/i+_,N=(X+j)/n+M,G=-m+v,V=-g+y}c&&(z*=-1,G+=o),(d^=!R&&e.isRenderTexture?1:0)&&(U*=-1,V+=a);var q=G+z,J=V+U;I.applyITRS(r,s,u,h,l),L.copyFrom(C.matrix),P?(L.multiplyWithOffset(P,-C.scrollX*p,-C.scrollY*f),I.e=r,I.f=s):(I.e-=C.scrollX*p,I.f-=C.scrollY*f),L.multiply(I,D);var Q=C.roundPixels,K=D.getXRound(G,V,Q),Z=D.getYRound(G,V,Q),$=D.getXRound(G,J,Q),tt=D.getYRound(G,J,Q),et=D.getXRound(q,J,Q),it=D.getYRound(q,J,Q),nt=D.getXRound(q,V,Q),rt=D.getYRound(q,V,Q);void 0===O&&(O=this.renderer.setTexture2D(e)),t&&this.manager.preBatch(t),this.batchQuad(t,K,Z,$,tt,et,it,nt,rt,B,k,F,N,w,b,S,E,T,e,O),t&&this.manager.postBatch(t)},batchTextureFrame:function(t,e,i,n,r,s,o){this.manager.set(this);var a=this._tempMatrix1.copyFrom(s),h=this._tempMatrix2,u=e+t.width,c=i+t.height;o?a.multiply(o,h):h=a;var d=h.getX(e,i),p=h.getY(e,i),f=h.getX(e,c),m=h.getY(e,c),g=h.getX(u,c),v=h.getY(u,c),y=h.getX(u,i),A=h.getY(u,i),x=this.renderer.setTextureSource(t.source);n=l.getTintAppendFloatAlpha(n,r),this.batchQuad(null,d,p,f,m,g,v,y,A,t.u0,t.v0,t.u1,t.v1,n,n,n,n,0,t.glTexture,x)},batchFillRect:function(t,e,i,n,r,s){this.renderer.pipelines.set(this);var o=this.calcMatrix;s&&s.multiply(r,o);var a=t+i,h=e+n,l=o.getX(t,e),u=o.getY(t,e),c=o.getX(t,h),d=o.getY(t,h),p=o.getX(a,h),f=o.getY(a,h),m=o.getX(a,e),g=o.getY(a,e),v=this.fillTint;this.batchQuad(null,l,u,c,d,p,f,m,g,0,0,1,1,v.TL,v.TR,v.BL,v.BR,2)},batchFillTriangle:function(t,e,i,n,r,s,o,a){this.renderer.pipelines.set(this);var h=this.calcMatrix;a&&a.multiply(o,h);var l=h.getX(t,e),u=h.getY(t,e),c=h.getX(i,n),d=h.getY(i,n),p=h.getX(r,s),f=h.getY(r,s),m=this.fillTint;this.batchTri(null,l,u,c,d,p,f,0,0,1,1,m.TL,m.TR,m.BL,2)},batchStrokeTriangle:function(t,e,i,n,r,s,o,a,h){var l=this.tempTriangle;l[0].x=t,l[0].y=e,l[0].width=o,l[1].x=i,l[1].y=n,l[1].width=o,l[2].x=r,l[2].y=s,l[2].width=o,l[3].x=t,l[3].y=e,l[3].width=o,this.batchStrokePath(l,o,!1,a,h)},batchFillPath:function(t,e,i){this.renderer.pipelines.set(this);var n=this.calcMatrix;i&&i.multiply(e,n);for(var s,o,a=t.length,h=this.polygonCache,l=this.fillTint.TL,u=this.fillTint.TR,c=this.fillTint.BL,d=0;d<a;++d)o=t[d],h.push(o.x,o.y);a=(s=r(h)).length;for(var p=0;p<a;p+=3){var f=2*s[p+0],m=2*s[p+1],g=2*s[p+2],v=h[f+0],y=h[f+1],A=h[m+0],x=h[m+1],w=h[g+0],b=h[g+1],S=n.getX(v,y),E=n.getY(v,y),T=n.getX(A,x),_=n.getY(A,x),M=n.getX(w,b),C=n.getY(w,b);this.batchTri(null,S,E,T,_,M,C,0,0,1,1,l,u,c,2)}h.length=0},batchStrokePath:function(t,e,i,n,r){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var s=t.length-1,o=0;o<s;o++){var a=t[o],h=t[o+1];this.batchLine(a.x,a.y,h.x,h.y,a.width/2,h.width/2,e,o,!i&&o===s-1,n,r)}},batchLine:function(t,e,i,n,r,s,o,a,h,l,u){this.renderer.pipelines.set(this);var c=this.calcMatrix;u&&u.multiply(l,c);var d=i-t,p=n-e,f=Math.sqrt(d*d+p*p),m=r*(n-e)/f,g=r*(t-i)/f,v=s*(n-e)/f,y=s*(t-i)/f,A=i-v,x=n-y,w=t-m,b=e-g,S=i+v,E=n+y,T=t+m,_=e+g,M=c.getX(A,x),C=c.getY(A,x),P=c.getX(w,b),R=c.getY(w,b),O=c.getX(S,E),L=c.getY(S,E),I=c.getX(T,_),D=c.getY(T,_),B=this.strokeTint,k=B.TL,F=B.TR,N=B.BL,z=B.BR;if(this.batchQuad(null,I,D,P,R,M,C,O,L,0,0,1,1,k,F,N,z,2),!(o<=2)){var U=this.prevQuad,G=this.firstQuad;a>0&&U[4]?this.batchQuad(null,I,D,P,R,U[0],U[1],U[2],U[3],0,0,1,1,k,F,N,z,2):(G[0]=I,G[1]=D,G[2]=P,G[3]=R,G[4]=1),h&&G[4]?this.batchQuad(null,M,C,O,L,G[0],G[1],G[2],G[3],0,0,1,1,k,F,N,z,2):(U[0]=M,U[1]=C,U[2]=O,U[3]=L,U[4]=1)}}});t.exports=d},function(t,e,i){var n=i(0),r=i(57),s=i(263),o=i(264),a=i(33),h=i(266),l=new n({initialize:function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.type=a.CIRCLE,this.x=t,this.y=e,this._radius=i,this._diameter=2*i},contains:function(t,e){return r(this,t,e)},getPoint:function(t,e){return s(this,t,e)},getPoints:function(t,e,i){return o(this,t,e,i)},getRandomPoint:function(t){return h(this,t)},setTo:function(t,e,i){return this.x=t,this.y=e,this._radius=i,this._diameter=2*i,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this._diameter=2*t}},diameter:{get:function(){return this._diameter},set:function(t){this._diameter=t,this._radius=.5*t}},left:{get:function(){return this.x-this._radius},set:function(t){this.x=t+this._radius}},right:{get:function(){return this.x+this._radius},set:function(t){this.x=t-this._radius}},top:{get:function(){return this.y-this._radius},set:function(t){this.y=t+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(t){this.y=t-this._radius}}});t.exports=l},function(t,e){t.exports=function(t,e,i){if(t.width<=0||t.height<=0)return!1;var n=(e-t.x)/t.width,r=(i-t.y)/t.height;return(n*=n)+(r*=r)<.25}},function(t,e){t.exports=function(t,e,i){var n=t.x3-t.x1,r=t.y3-t.y1,s=t.x2-t.x1,o=t.y2-t.y1,a=e-t.x1,h=i-t.y1,l=n*n+r*r,u=n*s+r*o,c=n*a+r*h,d=s*s+o*o,p=s*a+o*h,f=l*d-u*u,m=0===f?0:1/f,g=(d*c-u*p)*m,v=(l*p-u*c)*m;return g>=0&&v>=0&&g+v<1}},function(t,e,i){var n=i(47),r=i(19);t.exports=function(t,e,i){e.x=r(i,"x",0),e.y=r(i,"y",0),e.depth=r(i,"depth",0),e.flipX=r(i,"flipX",!1),e.flipY=r(i,"flipY",!1);var s=r(i,"scale",null);"number"==typeof s?e.setScale(s):null!==s&&(e.scaleX=r(s,"x",1),e.scaleY=r(s,"y",1));var o=r(i,"scrollFactor",null);"number"==typeof o?e.setScrollFactor(o):null!==o&&(e.scrollFactorX=r(o,"x",1),e.scrollFactorY=r(o,"y",1)),e.rotation=r(i,"rotation",0);var a=r(i,"angle",null);null!==a&&(e.angle=a),e.alpha=r(i,"alpha",1);var h=r(i,"origin",null);if("number"==typeof h)e.setOrigin(h);else if(null!==h){var l=r(h,"x",.5),u=r(h,"y",.5);e.setOrigin(l,u)}return e.blendMode=r(i,"blendMode",n.NORMAL),e.visible=r(i,"visible",!0),r(i,"add",!0)&&t.sys.displayList.add(e),e.preUpdate&&t.sys.updateList.add(e),e}},function(t,e){t.exports=function(t){return 2*(t.width+t.height)}},function(t,e,i){var n=i(194),r=i(195),s=i(196),o=i(197),a=i(198),h=i(199),l=i(200),u=i(201),c=i(202),d=i(203),p=i(204),f=i(205);t.exports={Power0:l,Power1:u.Out,Power2:o.Out,Power3:c.Out,Power4:d.Out,Linear:l,Quad:u.Out,Cubic:o.Out,Quart:c.Out,Quint:d.Out,Sine:p.Out,Expo:h.Out,Circ:s.Out,Elastic:a.Out,Back:n.Out,Bounce:r.Out,Stepped:f,"Quad.easeIn":u.In,"Cubic.easeIn":o.In,"Quart.easeIn":c.In,"Quint.easeIn":d.In,"Sine.easeIn":p.In,"Expo.easeIn":h.In,"Circ.easeIn":s.In,"Elastic.easeIn":a.In,"Back.easeIn":n.In,"Bounce.easeIn":r.In,"Quad.easeOut":u.Out,"Cubic.easeOut":o.Out,"Quart.easeOut":c.Out,"Quint.easeOut":d.Out,"Sine.easeOut":p.Out,"Expo.easeOut":h.Out,"Circ.easeOut":s.Out,"Elastic.easeOut":a.Out,"Back.easeOut":n.Out,"Bounce.easeOut":r.Out,"Quad.easeInOut":u.InOut,"Cubic.easeInOut":o.InOut,"Quart.easeInOut":c.InOut,"Quint.easeInOut":d.InOut,"Sine.easeInOut":p.InOut,"Expo.easeInOut":h.InOut,"Circ.easeInOut":s.InOut,"Elastic.easeInOut":a.InOut,"Back.easeInOut":n.InOut,"Bounce.easeInOut":r.InOut}},function(t,e){t.exports=function(t,e,i){return(e-t)*i+t}},function(t,e,i){t.exports={ENTER_FULLSCREEN:i(465),FULLSCREEN_FAILED:i(466),FULLSCREEN_UNSUPPORTED:i(467),LEAVE_FULLSCREEN:i(468),ORIENTATION_CHANGE:i(469),RESIZE:i(470)}},function(t,e,i){var n=new(i(0))({initialize:function(t){if(this.entries={},this.size=0,Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e][0],t[e][1])},set:function(t,e){return this.has(t)||this.size++,this.entries[t]=e,this},get:function(t){if(this.has(t))return this.entries[t]},getArray:function(){var t=[],e=this.entries;for(var i in e)t.push(e[i]);return t},has:function(t){return this.entries.hasOwnProperty(t)},delete:function(t){return this.has(t)&&(delete this.entries[t],this.size--),this},clear:function(){return Object.keys(this.entries).forEach((function(t){delete this.entries[t]}),this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var t=[],e=this.entries;for(var i in e)t.push(e[i]);return t},dump:function(){var t=this.entries;for(var e in t);},each:function(t){var e=this.entries;for(var i in e)if(!1===t(i,e[i]))break;return this},contains:function(t){var e=this.entries;for(var i in e)if(e[i]===t)return!0;return!1},merge:function(t,e){void 0===e&&(e=!1);var i=this.entries,n=t.entries;for(var r in n)i.hasOwnProperty(r)&&e?i[r]=n[r]:this.set(r,n[r]);return this}});t.exports=n},function(t,e){var i,n="";t.exports={disable:function(t){return""===n&&(n=i(t)),n&&(t[n]=!1),t},enable:function(t){return""===n&&(n=i(t)),n&&(t[n]=!0),t},getPrefix:i=function(t){for(var e=["i","webkitI","msI","mozI","oI"],i=0;i<e.length;i++){var n=e[i]+"mageSmoothingEnabled";if(n in t)return n}return null},isEnabled:function(t){return null!==n?t[n]:null}}},function(t,e,i){var n,r=i(70),s={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};t.exports=(n=navigator.userAgent,/Edge\/\d+/.test(n)?s.edge=!0:/Chrome\/(\d+)/.test(n)&&!r.windowsPhone?(s.chrome=!0,s.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(n)?(s.firefox=!0,s.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(n)&&r.iOS?s.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(n)?(s.ie=!0,s.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(n)?s.opera=!0:/Safari/.test(n)&&!r.windowsPhone?s.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(n)&&(s.ie=!0,s.trident=!0,s.tridentVersion=parseInt(RegExp.$1,10),s.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(n)&&(s.silk=!0),s)},function(t,e){t.exports=function(t,e){return Math.random()*(e-t)+t}},function(t,e){t.exports=function(t,e){return t>0&&0==(t&t-1)&&e>0&&0==(e&e-1)}},function(t,e){t.exports=function(t,e,i,n){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.floor(t/e),n?(i+t)/e:i+t)}},function(t,e,i){t.exports={ADD:i(577),ERROR:i(578),LOAD:i(579),READY:i(580),REMOVE:i(581)}},function(t,e){t.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},function(t,e){t.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},function(t,e,i){var n=i(94);t.exports=function(t,e,i,r,s){var o=r.alpha*i.alpha;if(o<=0)return!1;var a=n(i,r,s).calc;return e.globalCompositeOperation=t.blendModes[i.blendMode],e.globalAlpha=o,e.save(),a.setToContext(e),e.imageSmoothingEnabled=!(!t.antialias||i.frame&&i.frame.source.scaleMode),!0}},function(t,e,i){var n=i(24),r=new n,s=new n,o=new n,a={camera:r,sprite:s,calc:o};t.exports=function(t,e,i){var n=r,h=s,l=o;return h.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),n.copyFrom(e.matrix),i?(n.multiplyWithOffset(i,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),h.e=t.x,h.f=t.y):(h.e-=e.scrollX*t.scrollFactorX,h.f-=e.scrollY*t.scrollFactorY),n.multiply(h,l),a}},function(t,e,i){var n=i(7),r={},s={register:function(t,e,i,n,s){r[t]={plugin:e,mapping:i,settingsKey:n,configKey:s}},getPlugin:function(t){return r[t]},install:function(t){var e=t.scene.sys,i=e.settings.input,s=e.game.config;for(var o in r){var a=r[o].plugin,h=r[o].mapping,l=r[o].settingsKey,u=r[o].configKey;n(i,l,s[u])&&(t[h]=new a(t))}},remove:function(t){r.hasOwnProperty(t)&&delete r[t]}};t.exports=s},function(t,e,i){var n=i(0),r=i(77),s=i(267),o=i(268),a=i(33),h=i(270),l=new n({initialize:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.type=a.ELLIPSE,this.x=t,this.y=e,this.width=i,this.height=n},contains:function(t,e){return r(this,t,e)},getPoint:function(t,e){return s(this,t,e)},getPoints:function(t,e,i){return o(this,t,e,i)},getRandomPoint:function(t){return h(this,t)},setTo:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(t){this.x=t+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(t){this.y=t+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=l},function(t,e,i){t.exports={ANY_KEY_DOWN:i(723),ANY_KEY_UP:i(724),COMBO_MATCH:i(725),DOWN:i(726),KEY_DOWN:i(727),KEY_UP:i(728),UP:i(729)}},function(t,e){t.exports=function(t,e,i){return t.hasOwnProperty(e)?"function"==typeof t[e]?function(i,n,r,s,o,a){return t[e](i,n,r,s,o,a)}:function(){return t[e]}:"function"==typeof i?i:function(){return i}}},function(t,e,i){var n=i(136),r=i(19),s=i(66),o=i(49),a=i(98),h=i(279),l=i(134),u=i(7),c=i(135),d=i(137),p=i(139);t.exports=function(t,e,i){void 0===i&&(i=n);for(var f=i.targets?i.targets:l(e),m=h(e),g=a(e,"delay",i.delay),v=a(e,"duration",i.duration),y=u(e,"easeParams",i.easeParams),A=o(u(e,"ease",i.ease),y),x=a(e,"hold",i.hold),w=a(e,"repeat",i.repeat),b=a(e,"repeatDelay",i.repeatDelay),S=s(e,"yoyo",i.yoyo),E=s(e,"flipX",i.flipX),T=s(e,"flipY",i.flipY),_=[],M=0;M<m.length;M++)for(var C=m[M].key,P=m[M].value,R=0;R<f.length;R++){var O=c(C,P),L=p(f[R],R,C,O.getEnd,O.getStart,O.getActive,o(u(P,"ease",A),u(P,"easeParams",y)),a(P,"delay",g),a(P,"duration",v),s(P,"yoyo",S),a(P,"hold",x),a(P,"repeat",w),a(P,"repeatDelay",b),s(P,"flipX",E),s(P,"flipY",T));_.push(L)}var I=new d(t,_,f);I.offset=r(e,"offset",null),I.completeDelay=r(e,"completeDelay",0),I.loop=Math.round(r(e,"loop",0)),I.loopDelay=Math.round(r(e,"loopDelay",0)),I.paused=s(e,"paused",!1),I.useFrames=s(e,"useFrames",!1);for(var D=u(e,"callbackScope",I),B=[I,null],k=d.TYPES,F=0;F<k.length;F++){var N=k[F],z=u(e,N,!1);if(z){var U=u(e,N+"Scope",D),G=u(e,N+"Params",[]);I.setCallback(N,z,B.concat(G),U)}}return I}},function(t,e,i){var n=i(141),r=i(287);t.exports=function(t,e){if(void 0===e&&(e=90),!n(t))return null;if("string"!=typeof e&&(e=(e%360+360)%360),90===e||-270===e||"rotateLeft"===e)(t=r(t)).reverse();else if(-90===e||270===e||"rotateRight"===e)t.reverse(),t=r(t);else if(180===Math.abs(e)||"rotate180"===e){for(var i=0;i<t.length;i++)t[i].reverse();t.reverse()}return t}},function(t,e){function i(t,e){return String(t).localeCompare(e)}function n(t,e,i,n){var r,s,o,a,h,l=t.length,u=0,c=2*i;for(r=0;r<l;r+=c)for(o=(s=r+i)+i,s>l&&(s=l),o>l&&(o=l),a=r,h=s;;)if(a<s&&h<o)e(t[a],t[h])<=0?n[u++]=t[a++]:n[u++]=t[h++];else if(a<s)n[u++]=t[a++];else{if(!(h<o))break;n[u++]=t[h++]}}t.exports=function(t,e){void 0===e&&(e=i);var r=function(t,e){var i=t.length;if(i<=1)return t;for(var r=new Array(i),s=1;s<i;s*=2){n(t,e,s,r);var o=t;t=r,r=o}return t}(t,e);return r!==t&&n(r,null,t.length,t),t}},function(t,e){t.exports=function(t,e){return!(t.width<=0||t.height<=0||e.width<=0||e.height<=0||t.right<e.x||t.bottom<e.y||t.x>e.right||t.y>e.bottom)}},function(t,e,i){var n=i(0),r=i(8),s=i(5);function o(t,e,i,n){var r=t-i,s=e-n,o=r*r+s*s;return Math.sqrt(o)}var a=new n({initialize:function(t,e,i){this.vertex1=t,this.vertex2=e,this.vertex3=i,this.bounds=new r,this._inCenter=new s},getInCenter:function(t){void 0===t&&(t=!0);var e,i,n,r,s,a,h=this.vertex1,l=this.vertex2,u=this.vertex3;t?(e=h.x,i=h.y,n=l.x,r=l.y,s=u.x,a=u.y):(e=h.vx,i=h.vy,n=l.vx,r=l.vy,s=u.vx,a=u.vy);var c=o(s,a,n,r),d=o(e,i,s,a),p=o(n,r,e,i),f=c+d+p;return this._inCenter.set((e*c+n*d+s*p)/f,(i*c+r*d+a*p)/f)},contains:function(t,e,i){var n=this.vertex1,r=this.vertex2,s=this.vertex3,o=n.vx,a=n.vy,h=r.vx,l=r.vy,u=s.vx,c=s.vy;if(i){var d=i.a,p=i.b,f=i.c,m=i.d,g=i.e,v=i.f;o=n.vx*d+n.vy*f+g,a=n.vx*p+n.vy*m+v,h=r.vx*d+r.vy*f+g,l=r.vx*p+r.vy*m+v,u=s.vx*d+s.vy*f+g,c=s.vx*p+s.vy*m+v}var y=u-o,A=c-a,x=h-o,w=l-a,b=t-o,S=e-a,E=y*y+A*A,T=y*x+A*w,_=y*b+A*S,M=x*x+w*w,C=x*b+w*S,P=E*M-T*T,R=0===P?0:1/P,O=(M*_-T*C)*R,L=(E*C-T*_)*R;return O>=0&&L>=0&&O+L<1},isCounterClockwise:function(t){var e=this.vertex1,i=this.vertex2,n=this.vertex3,r=(i.vx-e.vx)*(n.vy-e.vy)-(i.vy-e.vy)*(n.vx-e.vx);return t<=0?r>=0:r<0},load:function(t,e,i,n,r){return i=this.vertex1.load(t,e,i,n,r),i=this.vertex2.load(t,e,i,n,r),this.vertex3.load(t,e,i,n,r)},transformCoordinatesLocal:function(t,e,i,n){return this.vertex1.transformCoordinatesLocal(t,e,i,n),this.vertex2.transformCoordinatesLocal(t,e,i,n),this.vertex3.transformCoordinatesLocal(t,e,i,n),this},updateBounds:function(){var t=this.vertex1,e=this.vertex2,i=this.vertex3,n=this.bounds;return n.x=Math.min(t.vx,e.vx,i.vx),n.y=Math.min(t.vy,e.vy,i.vy),n.width=Math.max(t.vx,e.vx,i.vx)-n.x,n.height=Math.max(t.vy,e.vy,i.vy)-n.y,this},isInView:function(t,e,i,n,r,s,o,a,h,l,u){var c=this.vertex1.update(r,s,o,a,h,l,u,n),d=this.vertex2.update(r,s,o,a,h,l,u,n),p=this.vertex3.update(r,s,o,a,h,l,u,n);if(c.ta<=0&&d.ta<=0&&p.ta<=0)return!1;if(e&&!this.isCounterClockwise(i))return!1;var f=this.bounds;f.x=Math.min(c.tx,d.tx,p.tx),f.y=Math.min(c.ty,d.ty,p.ty),f.width=Math.max(c.tx,d.tx,p.tx)-f.x,f.height=Math.max(c.ty,d.ty,p.ty)-f.y;var m=t.x+t.width,g=t.y+t.height;return!(f.width<=0||f.height<=0||t.width<=0||t.height<=0||f.right<t.x||f.bottom<t.y||f.x>m||f.y>g)},translate:function(t,e){void 0===e&&(e=0);var i=this.vertex1,n=this.vertex2,r=this.vertex3;return i.x+=t,i.y+=e,n.x+=t,n.y+=e,r.x+=t,r.y+=e,this},x:{get:function(){return this.getInCenter().x},set:function(t){var e=this.getInCenter();this.translate(t-e.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(t){var e=this.getInCenter();this.translate(0,t-e.y)}},alpha:{get:function(){var t=this.vertex1,e=this.vertex2,i=this.vertex3;return(t.alpha+e.alpha+i.alpha)/3},set:function(t){this.vertex1.alpha=t,this.vertex2.alpha=t,this.vertex3.alpha=t}},depth:{get:function(){var t=this.vertex1,e=this.vertex2,i=this.vertex3;return(t.vz+e.vz+i.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});t.exports=a},function(t,e,i){var n=i(0),r=i(20),s=i(27),o=new n({Extends:s,initialize:function(t,e,i,n,r,o,a,h,l,u){void 0===o&&(o=16777215),void 0===a&&(a=1),void 0===h&&(h=0),void 0===l&&(l=0),void 0===u&&(u=0),s.call(this,t,e,i),this.vx=0,this.vy=0,this.vz=0,this.nx=h,this.ny=l,this.nz=u,this.u=n,this.v=r,this.color=o,this.alpha=a,this.tx=0,this.ty=0,this.ta=0},setUVs:function(t,e){return this.u=t,this.v=e,this},transformCoordinatesLocal:function(t,e,i,n){var r=this.x,s=this.y,o=this.z,a=t.val,h=r*a[0]+s*a[4]+o*a[8]+a[12],l=r*a[1]+s*a[5]+o*a[9]+a[13],u=r*a[2]+s*a[6]+o*a[10]+a[14],c=r*a[3]+s*a[7]+o*a[11]+a[15];this.vx=h/c*e,this.vy=-l/c*i,this.vz=n<=0?u/c:-u/c},update:function(t,e,i,n,r,s,o,a){var h=this.vx*t+this.vy*i+r,l=this.vx*e+this.vy*n+s;return o&&(h=Math.round(h),l=Math.round(l)),this.tx=h,this.ty=l,this.ta=this.alpha*a,this},load:function(t,e,i,n,s){return t[++i]=this.tx,t[++i]=this.ty,t[++i]=this.u,t[++i]=this.v,t[++i]=n,t[++i]=s,e[++i]=r.getTintAppendFloatAlpha(this.color,this.ta),i}});t.exports=o},function(t,e){t.exports=function(t,e){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:e+t.url)}},function(t,e){t.exports=function(t,e,i,n,r,s){return void 0===t&&(t=""),void 0===e&&(e=!0),void 0===i&&(i=""),void 0===n&&(n=""),void 0===r&&(r=0),void 0===s&&(s=!1),{responseType:t,async:e,user:i,password:n,timeout:r,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:s}}},function(t,e,i){var n=i(0),r=i(23),s=i(44),o=i(9),a=i(25),h=i(8),l=i(24),u=i(113),c=i(5),d=new n({Extends:o,Mixins:[r.Alpha,r.Visible],initialize:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),o.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new h,this.dirty=!0,this._x=t,this._y=e,this._width=i,this._height=n,this._bounds=new h,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new l,this.transparent=!0,this.backgroundColor=u("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new c(i/2,n/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(t){this.renderList.push(t)},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this},getScroll:function(t,e,i){void 0===i&&(i=new c);var n=.5*this.width,r=.5*this.height;return i.x=t-n,i.y=e-r,this.useBounds&&(i.x=this.clampX(i.x),i.y=this.clampY(i.y)),i},centerOnX:function(t){var e=.5*this.width;return this.midPoint.x=t,this.scrollX=t-e,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(t){var e=.5*this.height;return this.midPoint.y=t,this.scrollY=t-e,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(t,e){return this.centerOnX(t),this.centerOnY(e),this},centerToBounds:function(){if(this.useBounds){var t=this._bounds,e=.5*this.width,i=.5*this.height;this.midPoint.set(t.centerX,t.centerY),this.scrollX=t.centerX-e,this.scrollY=t.centerY-i}return this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(t){if(this.disableCull)return t;var e=this.matrix.matrix,i=e[0],n=e[1],r=e[2],s=e[3],o=i*s-n*r;if(!o)return t;var a=e[4],h=e[5],l=this.scrollX,u=this.scrollY,c=this.width,d=this.height,p=this.y,f=p+d,m=this.x,g=m+c,v=this.culledObjects,y=t.length;o=1/o,v.length=0;for(var A=0;A<y;++A){var x=t[A];if(x.hasOwnProperty("width")&&!x.parentContainer){var w=x.width,b=x.height,S=x.x-l*x.scrollFactorX-w*x.originX,E=x.y-u*x.scrollFactorY-b*x.originY;(S+w)*i+(E+b)*r+a>m&&S*i+E*r+a<g&&(S+w)*n+(E+b)*s+h>p&&S*n+E*s+h<f&&v.push(x)}else v.push(x)}return v},getWorldPoint:function(t,e,i){void 0===i&&(i=new c);var n=this.matrix.matrix,r=n[0],s=n[1],o=n[2],a=n[3],h=n[4],l=n[5],u=r*a-s*o;if(!u)return i.x=t,i.y=e,i;var d=a*(u=1/u),p=-s*u,f=-o*u,m=r*u,g=(o*l-a*h)*u,v=(s*h-r*l)*u,y=Math.cos(this.rotation),A=Math.sin(this.rotation),x=this.zoomX,w=this.zoomY,b=this.scrollX,S=this.scrollY,E=t+(b*y-S*A)*x,T=e+(b*A+S*y)*w;return i.x=E*d+T*f+g,i.y=E*p+T*m+v,i},ignore:function(t){var e=this.id;Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i];Array.isArray(n)?this.ignore(n):n.isParent?this.ignore(n.getChildren()):n.cameraFilter|=e}return this},preRender:function(){this.renderList.length=0;var t=this.width,e=this.height,i=.5*t,n=.5*e,r=this.zoomX,s=this.zoomY,o=this.matrix,a=t*this.originX,h=e*this.originY,l=this.scrollX,u=this.scrollY;this.useBounds&&(l=this.clampX(l),u=this.clampY(u)),this.roundPixels&&(a=Math.round(a),h=Math.round(h)),this.scrollX=l,this.scrollY=u;var c=l+i,d=u+n;this.midPoint.set(c,d);var p=t/r,f=e/s;this.worldView.setTo(c-p/2,d-f/2,p,f),o.applyITRS(this.x+a,this.y+h,this.rotation,r,s),o.translate(-a,-h)},clampX:function(t){var e=this._bounds,i=this.displayWidth,n=e.x+(i-this.width)/2,r=Math.max(n,n+e.width-i);return t<n?t=n:t>r&&(t=r),t},clampY:function(t){var e=this._bounds,i=this.displayHeight,n=e.y+(i-this.height)/2,r=Math.max(n,n+e.height-i);return t<n?t=n:t>r&&(t=r),t},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(t){return void 0===t&&(t=0),this.rotation=s(t),this},setBackgroundColor:function(t){return void 0===t&&(t="rgba(0,0,0,0)"),this.backgroundColor=u(t),this.transparent=0===this.backgroundColor.alpha,this},setBounds:function(t,e,i,n,r){return void 0===r&&(r=!1),this._bounds.setTo(t,e,i,n),this.dirty=!0,this.useBounds=!0,r?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(t){void 0===t&&(t=new h);var e=this._bounds;return t.setTo(e.x,e.y,e.width,e.height),t},setName:function(t){return void 0===t&&(t=""),this.name=t,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setRoundPixels:function(t){return this.roundPixels=t,this},setScene:function(t){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=t;var e=t.sys;return this.sceneManager=e.game.scene,this.scaleManager=e.scale,this.cameraManager=e.cameras,this.updateSystem(),this},setScroll:function(t,e){return void 0===e&&(e=t),this.scrollX=t,this.scrollY=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},setViewport:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},setZoom:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),0===t&&(t=.001),0===e&&(e=.001),this.zoomX=t,this.zoomY=e,this},setMask:function(t,e){return void 0===e&&(e=!0),this.mask=t,this._maskCamera=e?this.cameraManager.default:this,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var t={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(t.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),t},update:function(){},updateSystem:function(){if(this.scaleManager){var t=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,e=this.sceneManager;t&&!this._customViewport?e.customViewports++:!t&&this._customViewport&&e.customViewports--,this.dirty=!0,this._customViewport=t}},destroy:function(){this.emit(a.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(t){this._x=t,this.updateSystem()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.updateSystem()}},width:{get:function(){return this._width},set:function(t){this._width=t,this.updateSystem()}},height:{get:function(){return this._height},set:function(t){this._height=t,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(t){this._scrollX=t,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(t){this._scrollY=t,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(t){this._zoomX=t,this._zoomY=t,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(t){this._zoomX=t,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(t){this._zoomY=t,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});t.exports=d},function(t,e,i){var n=i(80),r=i(2);t.exports=function(t,e,i){if(void 0===i&&(i=new r),e<=0||e>=1)return i.x=t.x,i.y=t.y,i;var s=n(t)*e;return e>.5?(s-=t.width+t.height)<=t.width?(i.x=t.right-s,i.y=t.bottom):(i.x=t.x,i.y=t.bottom-(s-t.width)):s<=t.width?(i.x=t.x+s,i.y=t.y):(i.x=t.right,i.y=t.y+(s-t.width)),i}},function(t,e){t.exports=function(t,e,i){return void 0===i&&(i=1e-4),Math.abs(t-e)<i}},function(t,e){t.exports=function t(e){var i,n,r;if("object"!=o(e)||null===e)return e;for(r in i=Array.isArray(e)?[]:{},e)n=e[r],i[r]=t(n);return i}},function(t,e){t.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},function(t,e,i){var n=i(5);t.exports=function(t,e,i,r,s,o,a,h){void 0===h&&(h=new n);var l=Math.sin(s),u=Math.cos(s),c=u*o,d=l*o,p=-l*a,f=u*a,m=1/(c*f+p*-d);return h.x=f*m*t+-p*m*e+(r*p-i*f)*m,h.y=c*m*e+-d*m*t+(-r*c+i*d)*m,h}},function(t,e,i){var n=i(186),r=i(189),s=i(191),a=i(192);t.exports=function(t){switch(o(t)){case"string":return"rgb"===t.substr(0,3).toLowerCase()?a(t):n(t);case"number":return r(t);case"object":return s(t)}}},function(t,e,i){var n=i(69);function r(t,e,i,n){var r=(t+6*e)%6,s=Math.min(r,4-r,1);return Math.round(255*(n-n*i*Math.max(0,s)))}t.exports=function(t,e,i,s){void 0===e&&(e=1),void 0===i&&(i=1);var o=r(5,t,e,i),a=r(3,t,e,i),h=r(1,t,e,i);return s?s.setTo?s.setTo(o,a,h,s.alpha,!1):(s.r=o,s.g=a,s.b=h,s.color=n(o,a,h),s):{r:o,g:a,b:h,color:n(o,a,h)}}},function(t,e){t.exports=function(t,e,i){return t.x=e-t.width/2,t.y=i-t.height/2,t}},function(t,e){t.exports=function(t,e){var i;if(e)"string"==typeof e?i=document.getElementById(e):"object"==o(e)&&1===e.nodeType&&(i=e);else if(t.parentElement||null===e)return t;return i||(i=document.body),i.appendChild(t),t}},function(t,e,i){t.exports={ADD_ANIMATION:i(496),ANIMATION_COMPLETE:i(497),ANIMATION_COMPLETE_KEY:i(498),ANIMATION_REPEAT:i(499),ANIMATION_RESTART:i(500),ANIMATION_START:i(501),ANIMATION_STOP:i(502),ANIMATION_UPDATE:i(503),PAUSE_ALL:i(504),REMOVE_ANIMATION:i(505),RESUME_ALL:i(506)}},function(t,e){t.exports=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=" "),void 0===n&&(n=3);var r=0;if(e+1>=(t=t.toString()).length)switch(n){case 1:t=new Array(e+1-t.length).join(i)+t;break;case 3:var s=Math.ceil((r=e-t.length)/2);t=new Array(r-s+1).join(i)+t+new Array(s+1).join(i);break;default:t+=new Array(e+1-t.length).join(i)}return t}},function(t,e,i){var n=i(70),r=i(86),s=i(17),o={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};t.exports=function(){if("function"==typeof importScripts)return o;o.canvas=!!window.CanvasRenderingContext2D;try{o.localStorage=!!localStorage.getItem}catch(t){o.localStorage=!1}o.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),o.fileSystem=!!window.requestFileSystem;var t,e,i,a=!1;return o.webGL=function(){if(window.WebGLRenderingContext)try{var t=s.createWebGL(this),e=t.getContext("webgl")||t.getContext("experimental-webgl"),i=s.create2D(this),n=i.getContext("2d").createImageData(1,1);return a=n.data instanceof Uint8ClampedArray,s.remove(t),s.remove(i),!!e}catch(t){return!1}return!1}(),o.worker=!!window.Worker,o.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,o.getUserMedia=o.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,r.firefox&&r.firefoxVersion<21&&(o.getUserMedia=!1),!n.iOS&&(r.ie||r.firefox||r.chrome)&&(o.canvasBitBltShift=!0),(r.safari||r.mobileSafari)&&(o.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(o.vibration=!0),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(o.littleEndian=(t=new ArrayBuffer(4),e=new Uint8Array(t),i=new Uint32Array(t),e[0]=161,e[1]=178,e[2]=195,e[3]=212,3569595041===i[0]||2712847316!==i[0]&&null)),o.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==o.littleEndian&&a,o}()},function(t,e,i){var n=i(10),r=i(18),s={Angle:i(519),Distance:i(529),Easing:i(535),Fuzzy:i(536),Interpolation:i(541),Pow2:i(546),Snap:i(548),RandomDataGenerator:i(551),Average:i(552),Bernstein:i(215),Between:i(123),CatmullRom:i(121),CeilTo:i(553),Clamp:i(13),DegToRad:i(44),Difference:i(554),Euler:i(555),Factorial:i(216),FloatBetween:i(87),FloorTo:i(556),FromPercent:i(72),GetSpeed:i(557),IsEven:i(558),IsEvenStrict:i(559),Linear:i(82),MaxAdd:i(560),Median:i(561),MinSub:i(562),Percent:i(563),RadToDeg:i(222),RandomXY:i(564),RandomXYZ:i(565),RandomXYZW:i(566),Rotate:i(567),RotateAround:i(175),RotateAroundDistance:i(568),RotateTo:i(569),RoundAwayFromZero:i(223),RoundTo:i(570),SinCosTableGenerator:i(571),SmootherStep:i(221),SmoothStep:i(220),ToXY:i(572),TransformXY:i(112),Within:i(573),Wrap:i(53),Vector2:i(5),Vector3:i(27),Vector4:i(124),Matrix3:i(224),Matrix4:i(48),Quaternion:i(225),RotateVec3:i(574)};s=r(!1,s,n),t.exports=s},function(t,e){t.exports=function(t,e,i,n,r){var s=.5*(n-e),o=.5*(r-i),a=t*t;return(2*i-2*n+s+o)*(t*a)+(-3*i+3*n-2*s-o)*a+s*t+i}},function(t,e){t.exports=function(t){var e=Math.log(t)/.6931471805599453;return 1<<Math.ceil(e)}},function(t,e){t.exports=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n){this.x=0,this.y=0,this.z=0,this.w=0,"object"==o(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=i||0,this.w=n||0)},clone:function(){return new n(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function(t,e,i,n){return"object"==o(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=i||0,this.w=n||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,e=this.y,i=this.z,n=this.w;return Math.sqrt(t*t+e*e+i*i+n*n)},lengthSq:function(){var t=this.x,e=this.y,i=this.z,n=this.w;return t*t+e*e+i*i+n*n},normalize:function(){var t=this.x,e=this.y,i=this.z,n=this.w,r=t*t+e*e+i*i+n*n;return r>0&&(r=1/Math.sqrt(r),this.x=t*r,this.y=e*r,this.z=i*r,this.w=n*r),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,n=this.y,r=this.z,s=this.w;return this.x=i+e*(t.x-i),this.y=n+e*(t.y-n),this.z=r+e*(t.z-r),this.w=s+e*(t.w-s),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function(t){var e=t.x-this.x,i=t.y-this.y,n=t.z-this.z||0,r=t.w-this.w||0;return Math.sqrt(e*e+i*i+n*n+r*r)},distanceSq:function(t){var e=t.x-this.x,i=t.y-this.y,n=t.z-this.z||0,r=t.w-this.w||0;return e*e+i*i+n*n+r*r},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(t){var e=this.x,i=this.y,n=this.z,r=this.w,s=t.val;return this.x=s[0]*e+s[4]*i+s[8]*n+s[12]*r,this.y=s[1]*e+s[5]*i+s[9]*n+s[13]*r,this.z=s[2]*e+s[6]*i+s[10]*n+s[14]*r,this.w=s[3]*e+s[7]*i+s[11]*n+s[15]*r,this},transformQuat:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,s=t.y,o=t.z,a=t.w,h=a*e+s*n-o*i,l=a*i+o*e-r*n,u=a*n+r*i-s*e,c=-r*e-s*i-o*n;return this.x=h*a+c*-r+l*-o-u*-s,this.y=l*a+c*-s+u*-r-h*-o,this.z=u*a+c*-o+h*-s-l*-r,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});n.prototype.sub=n.prototype.subtract,n.prototype.mul=n.prototype.multiply,n.prototype.div=n.prototype.divide,n.prototype.dist=n.prototype.distance,n.prototype.distSq=n.prototype.distanceSq,n.prototype.len=n.prototype.length,n.prototype.lenSq=n.prototype.lengthSq,t.exports=n},function(t,e,i){t.exports={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]}},function(t,e,i){var n=i(0),r=i(52),s=new n({initialize:function(t,e,i,n,r,s,o){void 0===n&&(n=1),void 0===r&&(r=0),void 0===s&&(s=!0),void 0===o&&(o=!1),this.renderer=t,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=n,this.minFilter=r,this.autoClear=s,this.autoResize=!1,this.resize(e,i),o&&this.setAutoResize(!0)},setAutoResize:function(t){return t&&!this.autoResize?(this.renderer.on(r.RESIZE,this.resize,this),this.autoResize=!0):!t&&this.autoResize&&(this.renderer.off(r.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(t,e){var i=t*this.scale,n=e*this.scale;if(i!==this.width||n!==this.height){var r=this.renderer;r.deleteFramebuffer(this.framebuffer),r.deleteTexture(this.texture),t*=this.scale,e*=this.scale,(t=Math.round(t))<=0&&(t=1),(e=Math.round(e))<=0&&(e=1),this.texture=r.createTextureFromSource(null,t,e,this.minFilter),this.framebuffer=r.createFramebuffer(t,e,this.texture,!1),this.width=t,this.height=e}return this},bind:function(t,e,i){if(void 0===t&&(t=!1),t&&this.renderer.flush(),e&&i&&this.resize(e,i),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),t&&this.adjustViewport(),this.autoClear){var n=this.renderer.gl;n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT)}},adjustViewport:function(){var t=this.renderer.gl;t.viewport(0,0,this.width,this.height),t.disable(t.SCISSOR_TEST)},clear:function(){var t=this.renderer,e=t.gl;t.pushFramebuffer(this.framebuffer),e.disable(e.SCISSOR_TEST),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),t.popFramebuffer(),t.resetScissor()},unbind:function(t){void 0===t&&(t=!1);var e=this.renderer;return t&&e.flush(),e.popFramebuffer()},destroy:function(){var t=this.renderer;t.deleteFramebuffer(this.framebuffer),t.deleteTexture(this.texture),t.off(r.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});t.exports=s},function(t,e,i){var n=new(i(0))({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(t){return this._matrix=t,this._dirty=!0,this},reset:function(){var t=this._matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=1,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=1,t[13]=0,t[14]=0,t[15]=0,t[16]=0,t[17]=0,t[18]=1,t[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var t=new Float32Array(this._matrix);t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,this._data=t,this._dirty=!1}return this._data},brightness:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var i=t;return this.multiply([i,0,0,0,0,0,i,0,0,0,0,0,i,0,0,0,0,0,1,0],e)},saturate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var i=2*t/3+1,n=-.5*(i-1);return this.multiply([i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0],e)},desaturate:function(t){return void 0===t&&(t=!1),this.saturate(-1,t)},hue:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1),t=t/180*Math.PI;var i=Math.cos(t),n=Math.sin(t);return this.multiply([.213+.787*i+-.213*n,.715+-.715*i+-.715*n,.072+-.072*i+.928*n,0,0,.213+-.213*i+.143*n,.715+i*(1-.715)+.14*n,.072+-.072*i+-.283*n,0,0,.213+-.213*i+-.787*n,.715+-.715*i+.715*n,.072+.928*i+.072*n,0,0,0,0,0,1,0],e)},grayscale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=!1),this.saturate(-t,e)},blackWhite:function(t){return void 0===t&&(t=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},contrast:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var i=t+1,n=-.5*(i-1);return this.multiply([i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0],e)},negative:function(t){return void 0===t&&(t=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},desaturateLuminance:function(t){return void 0===t&&(t=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],t)},sepia:function(t){return void 0===t&&(t=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},night:function(t,e){return void 0===t&&(t=.1),void 0===e&&(e=!1),this.multiply([-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],e)},lsd:function(t){return void 0===t&&(t=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},brown:function(t){return void 0===t&&(t=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},vintagePinhole:function(t){return void 0===t&&(t=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},kodachrome:function(t){return void 0===t&&(t=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},technicolor:function(t){return void 0===t&&(t=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},polaroid:function(t){return void 0===t&&(t=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},shiftToBGR:function(t){return void 0===t&&(t=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},multiply:function(t,e){e||this.reset();for(var i=this._matrix,n=[],r=0;r<20;r++)n[r]=i[r];return i[0]=n[0]*t[0]+n[1]*t[5]+n[2]*t[10]+n[3]*t[15],i[1]=n[0]*t[1]+n[1]*t[6]+n[2]*t[11]+n[3]*t[16],i[2]=n[0]*t[2]+n[1]*t[7]+n[2]*t[12]+n[3]*t[17],i[3]=n[0]*t[3]+n[1]*t[8]+n[2]*t[13]+n[3]*t[18],i[4]=n[0]*t[4]+n[1]*t[9]+n[2]*t[14]+n[3]*t[19]+n[4],i[5]=n[5]*t[0]+n[6]*t[5]+n[7]*t[10]+n[8]*t[15],i[6]=n[5]*t[1]+n[6]*t[6]+n[7]*t[11]+n[8]*t[16],i[7]=n[5]*t[2]+n[6]*t[7]+n[7]*t[12]+n[8]*t[17],i[8]=n[5]*t[3]+n[6]*t[8]+n[7]*t[13]+n[8]*t[18],i[9]=n[5]*t[4]+n[6]*t[9]+n[7]*t[14]+n[8]*t[19]+n[9],i[10]=n[10]*t[0]+n[11]*t[5]+n[12]*t[10]+n[13]*t[15],i[11]=n[10]*t[1]+n[11]*t[6]+n[12]*t[11]+n[13]*t[16],i[12]=n[10]*t[2]+n[11]*t[7]+n[12]*t[12]+n[13]*t[17],i[13]=n[10]*t[3]+n[11]*t[8]+n[12]*t[13]+n[13]*t[18],i[14]=n[10]*t[4]+n[11]*t[9]+n[12]*t[14]+n[13]*t[19]+n[14],i[15]=n[15]*t[0]+n[16]*t[5]+n[17]*t[10]+n[18]*t[15],i[16]=n[15]*t[1]+n[16]*t[6]+n[17]*t[11]+n[18]*t[16],i[17]=n[15]*t[2]+n[16]*t[7]+n[17]*t[12]+n[18]*t[17],i[18]=n[15]*t[3]+n[16]*t[8]+n[17]*t[13]+n[18]*t[18],i[19]=n[15]*t[4]+n[16]*t[9]+n[17]*t[14]+n[18]*t[19]+n[19],this._dirty=!0,this}});t.exports=n},function(t,e){t.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},function(t,e,i){var n=i(0),r=i(92),s=i(125),o=i(15),a=i(252),h=i(253),l=i(22),u=i(4),c=i(254),d=new n({initialize:function(t,e){this.scene=t,this.game,this.renderer,this.config=e,this.settings=c.create(e),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=u},init:function(t){this.settings.status=r.INIT,this.sceneUpdate=u,this.game=t,this.renderer=t.renderer,this.canvas=t.canvas,this.context=t.context;var e=t.plugins;this.plugins=e,e.addToScene(this,s.Global,[s.CoreScene,h(this),a(this)]),this.events.emit(o.BOOT,this),this.settings.isBooted=!0},step:function(t,e){var i=this.events;i.emit(o.PRE_UPDATE,t,e),i.emit(o.UPDATE,t,e),this.sceneUpdate.call(this.scene,t,e),i.emit(o.POST_UPDATE,t,e)},render:function(t){var e=this.displayList;e.depthSort(),this.events.emit(o.PRE_RENDER,t),this.cameras.render(t,e),this.events.emit(o.RENDER,t)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(t){var e=this.events,i=this.settings;return this.settings.active&&(i.status=r.PAUSED,i.active=!1,e.emit(o.PAUSE,this,t)),this},resume:function(t){var e=this.events,i=this.settings;return this.settings.active||(i.status=r.RUNNING,i.active=!0,e.emit(o.RESUME,this,t)),this},sleep:function(t){var e=this.events,i=this.settings;return i.status=r.SLEEPING,i.active=!1,i.visible=!1,e.emit(o.SLEEP,this,t),this},wake:function(t){var e=this.events,i=this.settings;return i.status=r.RUNNING,i.active=!0,i.visible=!0,e.emit(o.WAKE,this,t),i.isTransition&&e.emit(o.TRANSITION_WAKE,i.transitionFrom,i.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===r.SLEEPING},isActive:function(){return this.settings.status===r.RUNNING},isPaused:function(){return this.settings.status===r.PAUSED},isTransitioning:function(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function(){return null!==this.scenePlugin._target&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(t){return this.settings.visible=t,this},setActive:function(t,e){return t?this.resume(e):this.pause(e)},start:function(t){var e=this.events,i=this.settings;t&&(i.data=t),i.status=r.START,i.active=!0,i.visible=!0,e.emit(o.START,this),e.emit(o.READY,this,t)},shutdown:function(t){var e=this.events,i=this.settings;e.off(o.TRANSITION_INIT),e.off(o.TRANSITION_START),e.off(o.TRANSITION_COMPLETE),e.off(o.TRANSITION_OUT),i.status=r.SHUTDOWN,i.active=!1,i.visible=!1,this.renderer===l.WEBGL&&this.renderer.resetTextures(!0),e.emit(o.SHUTDOWN,this,t)},destroy:function(){var t=this.events,e=this.settings;e.status=r.DESTROYED,e.active=!1,e.visible=!1,t.emit(o.DESTROY,this),t.removeAllListeners();for(var i=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],n=0;n<i.length;n++)this[i[n]]=null}});t.exports=d},function(t,e){t.exports=function(t){return t&&t[0].toUpperCase()+t.slice(1)}},function(t,e,i){t.exports={BUTTON_DOWN:i(710),BUTTON_UP:i(711),CONNECTED:i(712),DISCONNECTED:i(713),GAMEPAD_BUTTON_DOWN:i(714),GAMEPAD_BUTTON_UP:i(715)}},function(t,e,i){var n=i(2);t.exports=function(t,e,i){return void 0===i&&(i=new n),i.x=t.x+t.radius*Math.cos(e),i.y=t.y+t.radius*Math.sin(e),i}},function(t,e,i){var n=i(2);t.exports=function(t,e,i){void 0===i&&(i=new n);var r=t.width/2,s=t.height/2;return i.x=t.x+r*Math.cos(e),i.y=t.y+s*Math.sin(e),i}},function(t,e,i){var n=i(7);t.exports=function(t){var e=n(t,"targets",null);return null===e||("function"==typeof e&&(e=e.call()),Array.isArray(e)||(e=[e])),e}},function(t,e){function i(t){return!!t.getActive&&"function"==typeof t.getActive}function n(t){return!!t.getStart&&"function"==typeof t.getStart}function r(t){return!!t.getEnd&&"function"==typeof t.getEnd}t.exports=function t(e,s){var a,h,l=function(t,e,i){return i},u=function(t,e,i){return i},c=null,d=o(s);if("number"===d)l=function(){return s};else if("string"===d){var p=s[0],f=parseFloat(s.substr(2));switch(p){case"+":l=function(t,e,i){return i+f};break;case"-":l=function(t,e,i){return i-f};break;case"*":l=function(t,e,i){return i*f};break;case"/":l=function(t,e,i){return i/f};break;default:l=function(){return parseFloat(s)}}}else if("function"===d)l=s;else if("object"===d)if(n(h=s)||r(h)||i(h))i(s)&&(c=s.getActive),r(s)&&(l=s.getEnd),n(s)&&(u=s.getStart);else if(s.hasOwnProperty("value"))a=t(e,s.value);else{var m=s.hasOwnProperty("to"),g=s.hasOwnProperty("from"),v=s.hasOwnProperty("start");if(m&&(g||v)){if(a=t(e,s.to),v){var y=t(e,s.start);a.getActive=y.getEnd}if(g){var A=t(e,s.from);a.getStart=A.getEnd}}}return a||(a={getActive:c,getEnd:l,getStart:u}),a}},function(t,e){t.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},function(t,e,i){var n=i(0),r=i(9),s=i(138),o=i(36),a=i(21),h=i(67),l=i(10),u=new n({Extends:r,initialize:function(t,e,i){r.call(this),this.parent=t,this.parentIsTimeline=t.hasOwnProperty("isTimeline"),this.data=e,this.totalData=e.length,this.targets=i,this.totalTargets=i.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=h.PENDING_ADD,this._pausedState=h.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(t){return void 0===t&&(t=0),this.data[t].current},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===h.ACTIVE},isPaused:function(){return this.state===h.PAUSED},hasTarget:function(t){return-1!==this.targets.indexOf(t)},updateTo:function(t,e,i){void 0===i&&(i=!1);for(var n=0;n<this.totalData;n++){var r=this.data[n];r.key===t&&(r.end=e,i&&(r.start=r.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===h.ACTIVE?this.seek(0):this.state===h.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===h.PENDING_ADD?this:this.play()},calcDuration:function(){for(var t=0,e=l.MAX_SAFE_INTEGER,i=this.data,n=0;n<this.totalData;n++){var r=i[n];r.t1=r.duration+r.hold,r.yoyo&&(r.t1+=r.duration),r.t2=r.t1+r.repeatDelay,r.totalDuration=r.delay+r.t1,-1===r.repeat?r.totalDuration+=999999999999*r.t2:r.repeat>0&&(r.totalDuration+=r.t2*r.repeat),r.totalDuration>t&&(t=r.totalDuration),r.delay<e&&(e=r.delay)}this.duration=Math.max(t,.001),this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=e},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=h.PENDING_ADD,this._pausedState=h.INIT,!1;for(var t=this.data,e=this.totalTargets,i=0;i<this.totalData;i++){var n=t[i],r=n.target,s=n.gen,o=n.key,a=n.index;n.delay=s.delay(r,o,0,a,e,this),n.duration=Math.max(s.duration(r,o,0,a,e,this),.001),n.hold=s.hold(r,o,0,a,e,this),n.repeat=s.repeat(r,o,0,a,e,this),n.repeatDelay=s.repeatDelay(r,o,0,a,e,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=h.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(s.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=h.LOOP_DELAY):(this.state=h.ACTIVE,this.dispatchTweenEvent(s.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=h.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=h.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===h.PAUSED||(this.paused=!0,this._pausedState=this.state,this.state=h.PAUSED),this},play:function(t){void 0===t&&(t=!1);var e=this.state;return e!==h.INIT||this.parentIsTimeline?e===h.ACTIVE||e===h.PENDING_ADD&&this._pausedState===h.PENDING_ADD?this:this.parentIsTimeline||e!==h.PENDING_REMOVE&&e!==h.REMOVED?(this.parentIsTimeline?(this.resetTweenData(t),0===this.calculatedOffset?this.state=h.ACTIVE:(this.countdown=this.calculatedOffset,this.state=h.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(t),this.state=h.ACTIVE,this.makeActive()),this):(this.seek(0),this.parent.makeActive(this),this):(this.resetTweenData(!1),this.state=h.ACTIVE,this)},resetTweenData:function(t){for(var e=this.data,i=this.totalData,n=this.totalTargets,r=0;r<i;r++){var s=e[r],o=s.target,a=s.key,l=s.index;s.progress=0,s.elapsed=0,s.repeatCounter=-1===s.repeat?999999999999:s.repeat,t?(s.start=s.getStartValue(o,a,s.start,l,n,this),s.end=s.getEndValue(o,a,s.end,l,n,this),s.current=s.start,s.state=h.PLAYING_FORWARD):s.state=h.PENDING_RENDER,s.delay>0&&(s.elapsed=s.delay,s.state=h.DELAY),s.getActiveValue&&(o[a]=s.getActiveValue(s.target,s.key,s.start))}},resume:function(){return this.state===h.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(t,e){void 0===e&&(e=16.6),this.state===h.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var i=this.data,n=this.totalTargets,r=0;r<this.totalData;r++){var s=i[r],o=s.target,a=s.gen,l=s.key,u=s.index;s.progress=0,s.elapsed=0,s.repeatCounter=-1===s.repeat?999999999999:s.repeat,s.delay=a.delay(o,l,0,u,n,this),s.duration=Math.max(a.duration(o,l,0,u,n,this),.001),s.hold=a.hold(o,l,0,u,n,this),s.repeat=a.repeat(o,l,0,u,n,this),s.repeatDelay=a.repeatDelay(o,l,0,u,n,this),s.current=s.start,s.state=h.PLAYING_FORWARD,this.updateTweenData(this,s,0,u,n),s.delay>0&&(s.elapsed=s.delay,s.state=h.DELAY)}this.calcDuration();var c=!1;this.state===h.PAUSED&&(c=!0,this.state=h.ACTIVE),this.isSeeking=!0;do{this.update(0,e)}while(this.totalProgress<t);return this.isSeeking=!1,c&&(this.state=h.PAUSED),this},setCallback:function(t,e,i,n){return this.callbacks[t]={func:e,scope:n,params:i},this},complete:function(t){return void 0===t&&(t=0),t?(this.state=h.COMPLETE_DELAY,this.countdown=t):(this.state=h.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(t){return this.state===h.ACTIVE&&void 0!==t&&this.seek(t),this.state!==h.REMOVED&&(this.state!==h.PAUSED&&this.state!==h.PENDING_ADD||(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(s.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=h.PENDING_REMOVE),this},update:function(t,e){if(this.state===h.PAUSED)return!1;switch(this.useFrames&&(e=1*this.parent.timeScale),e*=this.timeScale,this.elapsed+=e,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=e,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case h.ACTIVE:this.hasStarted||this.isSeeking||(this.startDelay-=e,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(s.TWEEN_START,this.callbacks.onStart)));for(var i=!1,n=0;n<this.totalData;n++){var r=this.data[n];this.updateTweenData(this,r,e)&&(i=!0)}i||this.nextState();break;case h.LOOP_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=h.ACTIVE,this.dispatchTweenEvent(s.TWEEN_LOOP,this.callbacks.onLoop));break;case h.OFFSET_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=h.ACTIVE);break;case h.COMPLETE_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=h.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete))}return this.state===h.PENDING_REMOVE},dispatchTweenDataEvent:function(t,e,i){this.isSeeking||(this.emit(t,this,i.key,i.target,i.current,i.previous),e&&(e.params[1]=i.target,e.func.apply(e.scope,e.params)))},dispatchTweenEvent:function(t,e){this.isSeeking||(this.emit(t,this,this.targets),e&&(e.params[1]=this.targets,e.func.apply(e.scope,e.params)))},setStateFromEnd:function(t,e,i){return e.yoyo?(e.elapsed=i,e.progress=i/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),this.dispatchTweenDataEvent(s.TWEEN_YOYO,t.callbacks.onYoyo,e),e.start=e.getStartValue(e.target,e.key,e.start,e.index,t.totalTargets,t),h.PLAYING_BACKWARD):e.repeatCounter>0?(e.repeatCounter--,e.elapsed=i,e.progress=i/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),e.start=e.getStartValue(e.target,e.key,e.start,e.index,t.totalTargets,t),e.end=e.getEndValue(e.target,e.key,e.start,e.index,t.totalTargets,t),e.repeatDelay>0?(e.elapsed=e.repeatDelay-i,e.current=e.start,e.target[e.key]=e.current,h.REPEAT_DELAY):(this.dispatchTweenDataEvent(s.TWEEN_REPEAT,t.callbacks.onRepeat,e),h.PLAYING_FORWARD)):h.COMPLETE},setStateFromStart:function(t,e,i){return e.repeatCounter>0?(e.repeatCounter--,e.elapsed=i,e.progress=i/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),e.end=e.getEndValue(e.target,e.key,e.start,e.index,t.totalTargets,t),e.repeatDelay>0?(e.elapsed=e.repeatDelay-i,e.current=e.start,e.target[e.key]=e.current,h.REPEAT_DELAY):(this.dispatchTweenDataEvent(s.TWEEN_REPEAT,t.callbacks.onRepeat,e),h.PLAYING_FORWARD)):h.COMPLETE},updateTweenData:function(t,e,i){var n=e.target;switch(e.state){case h.PLAYING_FORWARD:case h.PLAYING_BACKWARD:if(!n){e.state=h.COMPLETE;break}var r=e.elapsed,o=e.duration,a=0;(r+=i)>o&&(a=r-o,r=o);var l=e.state===h.PLAYING_FORWARD,u=r/o;if(e.elapsed=r,e.progress=u,e.previous=e.current,1===u)l?(e.current=e.end,n[e.key]=e.end,e.hold>0?(e.elapsed=e.hold-a,e.state=h.HOLD_DELAY):e.state=this.setStateFromEnd(t,e,a)):(e.current=e.start,n[e.key]=e.start,e.state=this.setStateFromStart(t,e,a));else{var c=l?e.ease(u):e.ease(1-u);e.current=e.start+(e.end-e.start)*c,n[e.key]=e.current}this.dispatchTweenDataEvent(s.TWEEN_UPDATE,t.callbacks.onUpdate,e);break;case h.DELAY:e.elapsed-=i,e.elapsed<=0&&(e.elapsed=Math.abs(e.elapsed),e.state=h.PENDING_RENDER);break;case h.REPEAT_DELAY:e.elapsed-=i,e.elapsed<=0&&(e.elapsed=Math.abs(e.elapsed),e.state=h.PLAYING_FORWARD,this.dispatchTweenDataEvent(s.TWEEN_REPEAT,t.callbacks.onRepeat,e));break;case h.HOLD_DELAY:e.elapsed-=i,e.elapsed<=0&&(e.state=this.setStateFromEnd(t,e,Math.abs(e.elapsed)));break;case h.PENDING_RENDER:n?(e.start=e.getStartValue(n,e.key,n[e.key],e.index,t.totalTargets,t),e.end=e.getEndValue(n,e.key,e.start,e.index,t.totalTargets,t),e.current=e.start,n[e.key]=e.start,e.state=h.PLAYING_FORWARD):e.state=h.COMPLETE}return e.state!==h.COMPLETE}});u.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],a.register("tween",(function(t){return this.scene.sys.tweens.add(t)})),o.register("tween",(function(t){return this.scene.sys.tweens.create(t)})),t.exports=u},function(t,e,i){t.exports={TIMELINE_COMPLETE:i(741),TIMELINE_LOOP:i(742),TIMELINE_PAUSE:i(743),TIMELINE_RESUME:i(744),TIMELINE_START:i(745),TIMELINE_UPDATE:i(746),TWEEN_ACTIVE:i(747),TWEEN_COMPLETE:i(748),TWEEN_LOOP:i(749),TWEEN_REPEAT:i(750),TWEEN_START:i(751),TWEEN_STOP:i(752),TWEEN_UPDATE:i(753),TWEEN_YOYO:i(754)}},function(t,e){t.exports=function(t,e,i,n,r,s,o,a,h,l,u,c,d,p,f){return{target:t,index:e,key:i,getActiveValue:s,getEndValue:n,getStartValue:r,ease:o,duration:0,totalDuration:0,delay:0,yoyo:l,hold:0,repeat:0,repeatDelay:0,flipX:p,flipY:f,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:a,duration:h,hold:u,repeat:c,repeatDelay:d},state:0}}},function(t,e,i){t.exports={Matrix:i(760),Add:i(768),AddAt:i(769),BringToTop:i(770),CountAllMatching:i(771),Each:i(772),EachInRange:i(773),FindClosestInSorted:i(207),GetAll:i(774),GetFirst:i(775),GetRandom:i(290),MoveDown:i(776),MoveTo:i(777),MoveUp:i(778),MoveAbove:i(779),MoveBelow:i(780),NumberArray:i(209),NumberArrayStep:i(781),QuickSelect:i(782),Range:i(783),Remove:i(54),RemoveAt:i(784),RemoveBetween:i(785),RemoveRandomElement:i(786),Replace:i(787),RotateLeft:i(288),RotateRight:i(289),SafeRange:i(50),SendToBack:i(788),SetAll:i(789),Shuffle:i(291),SortByDigits:i(208),SpliceOne:i(68),StableSort:i(101),Swap:i(790)}},function(t,e){t.exports=function(t){if(!Array.isArray(t)||t.length<2||!Array.isArray(t[0]))return!1;for(var e=t[0].length,i=1;i<t.length;i++)if(t[i].length!==e)return!1;return!0}},function(t,e,i){t.exports={ADDED_TO_SCENE:i(791),DESTROY:i(792),REMOVED_FROM_SCENE:i(793),VIDEO_COMPLETE:i(794),VIDEO_CREATED:i(795),VIDEO_ERROR:i(796),VIDEO_LOOP:i(797),VIDEO_PLAY:i(798),VIDEO_SEEKED:i(799),VIDEO_SEEKING:i(800),VIDEO_STOP:i(801),VIDEO_TIMEOUT:i(802),VIDEO_UNLOCKED:i(803)}},function(t,e,i){var n=i(0),r=i(23),s=i(37),o=i(809),a=new n({Extends:s,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Size,r.TextureCrop,r.Tint,r.Transform,r.Visible,o],initialize:function(t,e,i,n,r){s.call(this,t,"Image"),this._crop=this.resetCropObject(),this.setTexture(n,r),this.setPosition(e,i),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});t.exports=a},function(t,e,i){var n=i(812),r=i(0),s=i(23),o=i(37),a=i(813),h=new r({Extends:o,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Size,s.TextureCrop,s.Tint,s.Transform,s.Visible,a],initialize:function(t,e,i,r,s){o.call(this,t,"Sprite"),this._crop=this.resetCropObject(),this.anims=new n(this),this.setTexture(r,s),this.setPosition(e,i),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(t,e){this.anims.update(t,e)},play:function(t,e){return this.anims.play(t,e)},playReverse:function(t,e){return this.anims.playReverse(t,e)},playAfterDelay:function(t,e){return this.anims.playAfterDelay(t,e)},playAfterRepeat:function(t,e){return this.anims.playAfterRepeat(t,e)},chain:function(t){return this.anims.chain(t)},stop:function(){return this.anims.stop()},stopAfterDelay:function(t){return this.anims.stopAfterDelay(t)},stopAfterRepeat:function(t){return this.anims.stopAfterRepeat(t)},stopOnFrame:function(t){return this.anims.stopOnFrame(t)},toJSON:function(){return s.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});t.exports=h},function(t,e,i){var n=i(107),r=i(0),s=i(146),o=i(167),a=i(168),h=i(169),l=i(176),u=i(179),c=i(180),d=i(182),p=i(185),f=i(96),m=i(37),g=i(1),v=i(7),y=i(10),A=i(816),x=new r({Extends:m,Mixins:[o,a,h,l,u,d,p,c,A],initialize:function(t,e){var i=v(e,"x",0),n=v(e,"y",0);m.call(this,t,"Graphics"),this.setPosition(i,n),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(e)},setDefaultStyles:function(t){return v(t,"lineStyle",null)&&(this.defaultStrokeWidth=v(t,"lineStyle.width",1),this.defaultStrokeColor=v(t,"lineStyle.color",16777215),this.defaultStrokeAlpha=v(t,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),v(t,"fillStyle",null)&&(this.defaultFillColor=v(t,"fillStyle.color",16777215),this.defaultFillAlpha=v(t,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(t,e,i){return void 0===i&&(i=1),this.commandBuffer.push(s.LINE_STYLE,t,e,i),this._lineWidth=t,this},fillStyle:function(t,e){return void 0===e&&(e=1),this.commandBuffer.push(s.FILL_STYLE,t,e),this},fillGradientStyle:function(t,e,i,n,r,o,a,h){return void 0===r&&(r=1),void 0===o&&(o=r),void 0===a&&(a=r),void 0===h&&(h=r),this.commandBuffer.push(s.GRADIENT_FILL_STYLE,r,o,a,h,t,e,i,n),this},lineGradientStyle:function(t,e,i,n,r,o){return void 0===o&&(o=1),this.commandBuffer.push(s.GRADIENT_LINE_STYLE,t,o,e,i,n,r),this},beginPath:function(){return this.commandBuffer.push(s.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(s.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(s.FILL_PATH),this},fill:function(){return this.commandBuffer.push(s.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(s.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(s.STROKE_PATH),this},fillCircleShape:function(t){return this.fillCircle(t.x,t.y,t.radius)},strokeCircleShape:function(t){return this.strokeCircle(t.x,t.y,t.radius)},fillCircle:function(t,e,i){return this.beginPath(),this.arc(t,e,i,0,y.PI2),this.fillPath(),this},strokeCircle:function(t,e,i){return this.beginPath(),this.arc(t,e,i,0,y.PI2),this.strokePath(),this},fillRectShape:function(t){return this.fillRect(t.x,t.y,t.width,t.height)},strokeRectShape:function(t){return this.strokeRect(t.x,t.y,t.width,t.height)},fillRect:function(t,e,i,n){return this.commandBuffer.push(s.FILL_RECT,t,e,i,n),this},strokeRect:function(t,e,i,n){var r=this._lineWidth/2,s=t-r,o=t+r;return this.beginPath(),this.moveTo(t,e),this.lineTo(t,e+n),this.strokePath(),this.beginPath(),this.moveTo(t+i,e),this.lineTo(t+i,e+n),this.strokePath(),this.beginPath(),this.moveTo(s,e),this.lineTo(o+i,e),this.strokePath(),this.beginPath(),this.moveTo(s,e+n),this.lineTo(o+i,e+n),this.strokePath(),this},fillRoundedRect:function(t,e,i,n,r){void 0===r&&(r=20);var s=r,o=r,a=r,h=r;return"number"!=typeof r&&(s=g(r,"tl",20),o=g(r,"tr",20),a=g(r,"bl",20),h=g(r,"br",20)),this.beginPath(),this.moveTo(t+s,e),this.lineTo(t+i-o,e),this.arc(t+i-o,e+o,o,-y.TAU,0),this.lineTo(t+i,e+n-h),this.arc(t+i-h,e+n-h,h,0,y.TAU),this.lineTo(t+a,e+n),this.arc(t+a,e+n-a,a,y.TAU,Math.PI),this.lineTo(t,e+s),this.arc(t+s,e+s,s,-Math.PI,-y.TAU),this.fillPath(),this},strokeRoundedRect:function(t,e,i,n,r){void 0===r&&(r=20);var s=r,o=r,a=r,h=r;return"number"!=typeof r&&(s=g(r,"tl",20),o=g(r,"tr",20),a=g(r,"bl",20),h=g(r,"br",20)),this.beginPath(),this.moveTo(t+s,e),this.lineTo(t+i-o,e),this.moveTo(t+i-o,e),this.arc(t+i-o,e+o,o,-y.TAU,0),this.lineTo(t+i,e+n-h),this.moveTo(t+i,e+n-h),this.arc(t+i-h,e+n-h,h,0,y.TAU),this.lineTo(t+a,e+n),this.moveTo(t+a,e+n),this.arc(t+a,e+n-a,a,y.TAU,Math.PI),this.lineTo(t,e+s),this.moveTo(t,e+s),this.arc(t+s,e+s,s,-Math.PI,-y.TAU),this.strokePath(),this},fillPointShape:function(t,e){return this.fillPoint(t.x,t.y,e)},fillPoint:function(t,e,i){return!i||i<1?i=1:(t-=i/2,e-=i/2),this.commandBuffer.push(s.FILL_RECT,t,e,i,i),this},fillTriangleShape:function(t){return this.fillTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},strokeTriangleShape:function(t){return this.strokeTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},fillTriangle:function(t,e,i,n,r,o){return this.commandBuffer.push(s.FILL_TRIANGLE,t,e,i,n,r,o),this},strokeTriangle:function(t,e,i,n,r,o){return this.commandBuffer.push(s.STROKE_TRIANGLE,t,e,i,n,r,o),this},strokeLineShape:function(t){return this.lineBetween(t.x1,t.y1,t.x2,t.y2)},lineBetween:function(t,e,i,n){return this.beginPath(),this.moveTo(t,e),this.lineTo(i,n),this.strokePath(),this},lineTo:function(t,e){return this.commandBuffer.push(s.LINE_TO,t,e),this},moveTo:function(t,e){return this.commandBuffer.push(s.MOVE_TO,t,e),this},strokePoints:function(t,e,i,n){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var r=1;r<n;r++)this.lineTo(t[r].x,t[r].y);return e&&this.lineTo(t[0].x,t[0].y),i&&this.closePath(),this.strokePath(),this},fillPoints:function(t,e,i,n){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var r=1;r<n;r++)this.lineTo(t[r].x,t[r].y);return e&&this.lineTo(t[0].x,t[0].y),i&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(t,e){void 0===e&&(e=32);var i=t.getPoints(e);return this.strokePoints(i,!0)},strokeEllipse:function(t,e,i,n,r){void 0===r&&(r=32);var s=new f(t,e,i,n).getPoints(r);return this.strokePoints(s,!0)},fillEllipseShape:function(t,e){void 0===e&&(e=32);var i=t.getPoints(e);return this.fillPoints(i,!0)},fillEllipse:function(t,e,i,n,r){void 0===r&&(r=32);var s=new f(t,e,i,n).getPoints(r);return this.fillPoints(s,!0)},arc:function(t,e,i,n,r,o,a){return void 0===o&&(o=!1),void 0===a&&(a=0),this.commandBuffer.push(s.ARC,t,e,i,n,r,o,a),this},slice:function(t,e,i,n,r,o,a){return void 0===o&&(o=!1),void 0===a&&(a=0),this.commandBuffer.push(s.BEGIN_PATH),this.commandBuffer.push(s.MOVE_TO,t,e),this.commandBuffer.push(s.ARC,t,e,i,n,r,o,a),this.commandBuffer.push(s.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(s.SAVE),this},restore:function(){return this.commandBuffer.push(s.RESTORE),this},translateCanvas:function(t,e){return this.commandBuffer.push(s.TRANSLATE,t,e),this},scaleCanvas:function(t,e){return this.commandBuffer.push(s.SCALE,t,e),this},rotateCanvas:function(t){return this.commandBuffer.push(s.ROTATE,t),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(t,e,i){var n,r,s=this.scene.sys,o=s.game.renderer;if(void 0===e&&(e=s.scale.width),void 0===i&&(i=s.scale.height),x.TargetCamera.setScene(this.scene),x.TargetCamera.setViewport(0,0,e,i),x.TargetCamera.scrollX=this.x,x.TargetCamera.scrollY=this.y,"string"==typeof t)if(s.textures.exists(t)){var a=(n=s.textures.get(t)).getSourceImage();a instanceof HTMLCanvasElement&&(r=a.getContext("2d"))}else r=(n=s.textures.createCanvas(t,e,i)).getSourceImage().getContext("2d");else t instanceof HTMLCanvasElement&&(r=t.getContext("2d"));return r&&(this.renderCanvas(o,this,x.TargetCamera,null,r,!1),n&&n.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});x.TargetCamera=new n,t.exports=x},function(t,e){t.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(t,e,i){var n=i(140),r=i(47),s=i(0),o=i(23),a=i(142),h=i(37),l=i(8),u=i(818),c=i(293),d=i(5),p=new s({Extends:h,Mixins:[o.AlphaSingle,o.BlendMode,o.ComputedSize,o.Depth,o.Mask,o.Pipeline,o.Transform,o.Visible,u],initialize:function(t,e,i,n){h.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new o.TransformMatrix,this.tempTransformMatrix=new o.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(e,i),this.clearAlpha(),this.setBlendMode(r.SKIP_CHECK),n&&this.add(n)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function(t){if(void 0===t&&(t=new l),t.setTo(this.x,this.y,0,0),this.parentContainer){var e=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(e.x,e.y,0,0)}if(this.list.length>0){var i=this.list,n=new l,r=!1;t.setEmpty();for(var s=0;s<i.length;s++){var o=i[s];o.getBounds&&(o.getBounds(n),r?c(n,t,t):(t.setTo(n.x,n.y,n.width,n.height),r=!0))}}return t},addHandler:function(t){t.once(a.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.removeFromDisplayList(),t.parentContainer=this)},removeHandler:function(t){t.off(a.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null,t.addToDisplayList())},pointToContainer:function(t,e){void 0===e&&(e=new d),this.parentContainer?this.parentContainer.pointToContainer(t,e):e=new d(t.x,t.y);var i=this.tempTransformMatrix;return i.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),i.invert(),i.transformPoint(t.x,t.y,e),e},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(t){return n.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function(t,e){return n.AddAt(this.list,t,e,this.maxSize,this.addHandler,this),this},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t?(void 0===e&&(e=function(e,i){return e[t]-i[t]}),n.StableSort(this.list,e),this):this},getByName:function(t){return n.GetFirst(this.list,"name",t)},getRandom:function(t,e){return n.GetRandom(this.list,t,e)},getFirst:function(t,e,i,r){return n.GetFirst(this.list,t,e,i,r)},getAll:function(t,e,i,r){return n.GetAll(this.list,t,e,i,r)},count:function(t,e,i,r){return n.CountAllMatching(this.list,t,e,i,r)},swap:function(t,e){return n.Swap(this.list,t,e),this},moveTo:function(t,e){return n.MoveTo(this.list,t,e),this},moveAbove:function(t,e){return n.MoveAbove(this.list,t,e),this},moveBelow:function(t,e){return n.MoveBelow(this.list,t,e),this},remove:function(t,e){var i=n.Remove(this.list,t,this.removeHandler,this);if(e&&i){Array.isArray(i)||(i=[i]);for(var r=0;r<i.length;r++)i[r].destroy()}return this},removeAt:function(t,e){var i=n.RemoveAt(this.list,t,this.removeHandler,this);return e&&i&&i.destroy(),this},removeBetween:function(t,e,i){var r=n.RemoveBetween(this.list,t,e,this.removeHandler,this);if(i)for(var s=0;s<r.length;s++)r[s].destroy();return this},removeAll:function(t){var e=n.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(t)for(var i=0;i<e.length;i++)e[i].destroy();return this},bringToTop:function(t){return n.BringToTop(this.list,t),this},sendToBack:function(t){return n.SendToBack(this.list,t),this},moveUp:function(t){return n.MoveUp(this.list,t),this},moveDown:function(t){return n.MoveDown(this.list,t),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(t,e,i){return n.Replace(this.list,t,e)&&(this.addHandler(e),this.removeHandler(t),i&&t.destroy()),this},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,e,i,r){return n.SetAll(this.list,t,e,i,r),this},each:function(t,e){var i,n=[null],r=this.list.slice(),s=r.length;for(i=2;i<arguments.length;i++)n.push(arguments[i]);for(i=0;i<s;i++)n[0]=r[i],t.apply(e,n);return this},iterate:function(t,e){var i,n=[null];for(i=2;i<arguments.length;i++)n.push(arguments[i]);for(i=0;i<this.list.length;i++)n[0]=this.list[i],t.apply(e,n);return this},setScrollFactor:function(t,e,i){return void 0===e&&(e=t),void 0===i&&(i=!1),this.scrollFactorX=t,this.scrollFactorY=e,i&&(n.SetAll(this.list,"scrollFactorX",t),n.SetAll(this.list,"scrollFactorY",e)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=p},function(t,e,i){var n=i(0),r=i(23),s=i(37),a=i(821),h=i(286),l=i(822),u=i(828),c=new n({Extends:s,Mixins:[r.Depth,r.Mask,r.Pipeline,r.Transform,r.Visible,u],initialize:function(t,e,i,n){if(s.call(this,t,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],null===i||"object"!=o(i)&&!Array.isArray(i)||(n=i,i=null),this.setTexture(e,i),this.initPipeline(),this.emitters=new h(this),this.wells=new h(this),n){Array.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++)this.createEmitter(n[r])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){this.frame=this.texture.get(t);var e=[];return this.texture.getFramesFromTextureSource(this.frame.sourceIndex).forEach((function(t){e.push(t.name)})),this.frameNames=e,this.defaultFrame=this.frame,this},setEmitterFrames:function(t,e){Array.isArray(t)||(t=[t]);var i=e.frames;i.length=0;for(var n=0;n<t.length;n++){var r=t[n];-1!==this.frameNames.indexOf(r)&&i.push(this.texture.get(r))}return i.length>0?e.defaultFrame=i[0]:e.defaultFrame=this.defaultFrame,this},addEmitter:function(t){return this.emitters.add(t)},createEmitter:function(t){return this.addEmitter(new l(this,t))},removeEmitter:function(t){return this.emitters.remove(t,!0)},addGravityWell:function(t){return this.wells.add(t)},createGravityWell:function(t){return this.addGravityWell(new a(t))},emitParticle:function(t,e,i){for(var n=this.emitters.list,r=0;r<n.length;r++){var s=n[r];s.active&&s.emitParticle(t,e,i)}return this},emitParticleAt:function(t,e,i){return this.emitParticle(i,t,e)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(t,e){e*=this.timeScale;for(var i=this.emitters.list,n=0;n<i.length;n++){var r=i[n];r.active&&r.preUpdate(t,e)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});t.exports=c},function(t,e){t.exports=function(t,e){return t.hasOwnProperty(e)}},function(t,e,i){var n=i(116),r=i(17),s=i(0),a=i(23),h=i(14),l=i(37),u=i(831),c=i(7),d=i(832),p=i(833),f=i(836),m=new s({Extends:l,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,p],initialize:function(t,e,i,n,s){void 0===e&&(e=0),void 0===i&&(i=0),l.call(this,t,"Text"),this.renderer=t.sys.renderer,this.setPosition(e,i),this.setOrigin(0,0),this.initPipeline(),this.canvas=r.create(this),this.context=this.canvas.getContext("2d"),this.style=new f(this,s),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(n),s&&s.padding&&this.setPadding(s.padding),s&&s.lineSpacing&&this.setLineSpacing(s.lineSpacing),t.sys.game.events.on(h.CONTEXT_RESTORED,(function(){this.dirty=!0}),this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",n(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(t){var e=this.style;if(e.wordWrapCallback){var i=e.wordWrapCallback.call(e.wordWrapCallbackScope,t,this);return Array.isArray(i)&&(i=i.join("\n")),i}return e.wordWrapWidth?e.wordWrapUseAdvanced?this.advancedWordWrap(t,this.context,this.style.wordWrapWidth):this.basicWordWrap(t,this.context,this.style.wordWrapWidth):t},advancedWordWrap:function(t,e,i){for(var n="",r=t.replace(/ +/gi," ").split(this.splitRegExp),s=r.length,o=0;o<s;o++){var a=r[o],h="";if(a=a.replace(/^ *|\s*$/gi,""),e.measureText(a).width<i)n+=a+"\n";else{for(var l=i,u=a.split(" "),c=0;c<u.length;c++){var d=u[c],p=d+" ",f=e.measureText(p).width;if(f>l){if(0===c){for(var m=p;m.length&&(m=m.slice(0,-1),!((f=e.measureText(m).width)<=l)););if(!m.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var g=d.substr(m.length);u[c]=g,h+=m}var v=u[c].length?c:c+1,y=u.slice(v).join(" ").replace(/[ \n]*$/gi,"");r[o+1]=y+" "+(r[o+1]||""),s=r.length;break}h+=p,l-=f}n+=h.replace(/[ \n]*$/gi,"")+"\n"}}return n.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(t,e,i){for(var n="",r=t.split(this.splitRegExp),s=r.length-1,o=e.measureText(" ").width,a=0;a<=s;a++){for(var h=i,l=r[a].split(" "),u=l.length-1,c=0;c<=u;c++){var d=l[c],p=e.measureText(d).width,f=p;c<u&&(f+=o),f>h&&c>0&&(n+="\n",h=i),n+=d,c<u?(n+=" ",h-=f):h-=p}a<s&&(n+="\n")}return n},getWrappedText:function(t){return void 0===t&&(t=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(t).split(this.splitRegExp)},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText()),this},setStyle:function(t){return this.style.setStyle(t)},setFont:function(t){return this.style.setFont(t)},setFontFamily:function(t){return this.style.setFontFamily(t)},setFontSize:function(t){return this.style.setFontSize(t)},setFontStyle:function(t){return this.style.setFontStyle(t)},setFixedSize:function(t,e){return this.style.setFixedSize(t,e)},setBackgroundColor:function(t){return this.style.setBackgroundColor(t)},setFill:function(t){return this.style.setFill(t)},setColor:function(t){return this.style.setColor(t)},setStroke:function(t,e){return this.style.setStroke(t,e)},setShadow:function(t,e,i,n,r,s){return this.style.setShadow(t,e,i,n,r,s)},setShadowOffset:function(t,e){return this.style.setShadowOffset(t,e)},setShadowColor:function(t){return this.style.setShadowColor(t)},setShadowBlur:function(t){return this.style.setShadowBlur(t)},setShadowStroke:function(t){return this.style.setShadowStroke(t)},setShadowFill:function(t){return this.style.setShadowFill(t)},setWordWrapWidth:function(t,e){return this.style.setWordWrapWidth(t,e)},setWordWrapCallback:function(t,e){return this.style.setWordWrapCallback(t,e)},setAlign:function(t){return this.style.setAlign(t)},setResolution:function(t){return this.style.setResolution(t)},setLineSpacing:function(t){return this.lineSpacing=t,this.updateText()},setPadding:function(t,e,i,n){if("object"==o(t)){var r=t,s=c(r,"x",null);null!==s?(t=s,i=s):(t=c(r,"left",0),i=c(r,"right",t));var a=c(r,"y",null);null!==a?(e=a,n=a):(e=c(r,"top",0),n=c(r,"bottom",e))}else void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=t),void 0===n&&(n=e);return this.padding.left=t,this.padding.top=e,this.padding.right=i,this.padding.bottom=n,this.updateText()},setMaxLines:function(t){return this.style.setMaxLines(t)},updateText:function(){var t=this.canvas,e=this.context,i=this.style,n=i.resolution,r=i.metrics;i.syncFont(t,e);var s=this._text;(i.wordWrapWidth||i.wordWrapCallback)&&(s=this.runWordWrap(this._text));var o,a=s.split(this.splitRegExp),h=u(this,r,a),l=this.padding;0===i.fixedWidth?(this.width=h.width+l.left+l.right,o=h.width):(this.width=i.fixedWidth,(o=this.width-l.left-l.right)<h.width&&(o=h.width)),0===i.fixedHeight?this.height=h.height+l.top+l.bottom:this.height=i.fixedHeight;var c,d,p=this.width,f=this.height;this.updateDisplayOrigin(),p*=n,f*=n,p=Math.max(p,1),f=Math.max(f,1),t.width!==p||t.height!==f?(t.width=p,t.height=f,this.frame.setSize(p,f),i.syncFont(t,e)):e.clearRect(0,0,p,f),e.save(),e.scale(n,n),i.backgroundColor&&(e.fillStyle=i.backgroundColor,e.fillRect(0,0,p,f)),i.syncStyle(t,e),e.textBaseline="alphabetic",e.translate(l.left,l.top);for(var m=0;m<h.lines;m++){if(c=i.strokeThickness/2,d=i.strokeThickness/2+m*h.lineHeight+r.ascent,m>0&&(d+=h.lineSpacing*m),i.rtl)c=p-c;else if("right"===i.align)c+=o-h.lineWidths[m];else if("center"===i.align)c+=(o-h.lineWidths[m])/2;else if("justify"===i.align&&h.lineWidths[m]/h.width>=.85){var g=h.width-h.lineWidths[m],v=e.measureText(" ").width,y=a[m].trim(),A=y.split(" ");g+=(a[m].length-y.length)*v;for(var x=Math.floor(g/v),w=0;x>0;)A[w]+=" ",w=(w+1)%(A.length-1||1),--x;a[m]=A.join(" ")}this.autoRound&&(c=Math.round(c),d=Math.round(d)),i.strokeThickness&&(this.style.syncShadow(e,i.shadowStroke),e.strokeText(a[m],c,d)),i.color&&(this.style.syncShadow(e,i.shadowFill),e.fillText(a[m],c,d))}e.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(t,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var b=this.input;return b&&!b.customHitArea&&(b.hitArea.width=this.width,b.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(t){this.setText(t)}},toJSON:function(){var t=a.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t},preDestroy:function(){this.style.rtl&&d(this.canvas),r.remove(this.canvas),this.texture.destroy()}});t.exports=m},function(t,e,i){var n=i(8),r=i(10);t.exports=function(t,e){if(void 0===e&&(e=new n),0===t.length)return e;for(var i,s,o,a=Number.MAX_VALUE,h=Number.MAX_VALUE,l=r.MIN_SAFE_INTEGER,u=r.MIN_SAFE_INTEGER,c=0;c<t.length;c++)i=t[c],Array.isArray(i)?(s=i[0],o=i[1]):(s=i.x,o=i.y),a=Math.min(a,s),h=Math.min(h,o),l=Math.max(l,s),u=Math.max(u,o);return e.x=a,e.y=h,e.width=l-a,e.height=u-h,e}},function(t,e,i){var n=i(2),r=i(153);t.exports=function(t,e,i){if(void 0===i&&(i=[]),r(t,e)){var s,o,a=t.x1,h=t.y1,l=t.x2,u=t.y2,c=e.x,d=e.y,p=e.radius,f=l-a,m=u-h,g=a-c,v=h-d,y=f*f+m*m,A=2*(f*g+m*v),x=A*A-4*y*(g*g+v*v-p*p);if(0===x){var w=-A/(2*y);s=a+w*f,o=h+w*m,w>=0&&w<=1&&i.push(new n(s,o))}else if(x>0){var b=(-A-Math.sqrt(x))/(2*y);s=a+b*f,o=h+b*m,b>=0&&b<=1&&i.push(new n(s,o));var S=(-A+Math.sqrt(x))/(2*y);s=a+S*f,o=h+S*m,S>=0&&S<=1&&i.push(new n(s,o))}}return i}},function(t,e,i){var n=i(57),r=new(i(2));t.exports=function(t,e,i){if(void 0===i&&(i=r),n(e,t.x1,t.y1))return i.x=t.x1,i.y=t.y1,!0;if(n(e,t.x2,t.y2))return i.x=t.x2,i.y=t.y2,!0;var s=t.x2-t.x1,o=t.y2-t.y1,a=e.x-t.x1,h=e.y-t.y1,l=s*s+o*o,u=s,c=o;if(l>0){var d=(a*s+h*o)/l;u*=d,c*=d}return i.x=t.x1+u,i.y=t.y1+c,u*u+c*c<=l&&u*s+c*o>=0&&n(e,i.x,i.y)}},function(t,e,i){var n=i(2),r=i(60),s=i(314);t.exports=function(t,e,i){if(void 0===i&&(i=[]),s(t,e))for(var o=e.getLineA(),a=e.getLineB(),h=e.getLineC(),l=e.getLineD(),u=[new n,new n,new n,new n],c=[r(o,t,u[0]),r(a,t,u[1]),r(h,t,u[2]),r(l,t,u[3])],d=0;d<4;d++)c[d]&&i.push(u[d]);return i}},function(t,e){t.exports=function(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=[]);for(var r,s,o,a,h,l,u=t.x3-t.x1,c=t.y3-t.y1,d=t.x2-t.x1,p=t.y2-t.y1,f=u*u+c*c,m=u*d+c*p,g=d*d+p*p,v=f*g-m*m,y=0===v?0:1/v,A=t.x1,x=t.y1,w=0;w<e.length&&(s=(f*(l=d*(o=e[w].x-A)+p*(a=e[w].y-x))-m*(h=u*o+c*a))*y,!((r=(g*h-m*l)*y)>=0&&s>=0&&r+s<1&&(n.push({x:e[w].x,y:e[w].y}),i)));w++);return n}},function(t,e){t.exports=function(t,e,i,n){var r=Math.cos(n),s=Math.sin(n),o=t.x1-e,a=t.y1-i;return t.x1=o*r-a*s+e,t.y1=o*s+a*r+i,o=t.x2-e,a=t.y2-i,t.x2=o*r-a*s+e,t.y2=o*s+a*r+i,t}},function(t,e){t.exports=function(t,e,i){for(var n=!1,r=-1,s=t.points.length-1;++r<t.points.length;s=r){var o=t.points[r].x,a=t.points[r].y,h=t.points[s].x,l=t.points[s].y;(a<=i&&i<l||l<=i&&i<a)&&e<(h-o)*(i-a)/(l-a)+o&&(n=!n)}return n}},function(t,e){t.exports=function(t){return 0===t.height?NaN:t.width/t.height}},function(t,e){t.exports=function(t,e,i,n){var r=Math.cos(n),s=Math.sin(n),o=t.x1-e,a=t.y1-i;return t.x1=o*r-a*s+e,t.y1=o*s+a*r+i,o=t.x2-e,a=t.y2-i,t.x2=o*r-a*s+e,t.y2=o*s+a*r+i,o=t.x3-e,a=t.y3-i,t.x3=o*r-a*s+e,t.y3=o*s+a*r+i,t}},function(t,e){t.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},function(t,e,i){var n=i(18),r=i(106);t.exports=function(t,e){var i=void 0===t?r():n({},t);if(e)for(var s in e)void 0!==e[s]&&(i[s]=e[s]);return i}},function(t,e,i){var n=i(0),r=i(11),s=i(12),o=i(3),a=i(1),h=i(6),l=i(1036),u=new n({Extends:s,initialize:function(t,e,i,n){var r="xml";if(h(e)){var o=e;e=a(o,"key"),i=a(o,"url"),n=a(o,"xhrSettings"),r=a(o,"extension",r)}var l={type:"xml",cache:t.cacheManager.xml,extension:r,responseType:"text",key:e,url:i,xhrSettings:n};s.call(this,t,l)},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=l(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});o.register("xml",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new u(this,t[n]));else this.addFile(new u(this,t,e,i));return this})),t.exports=u},function(t,e,i){var n=i(0),r=i(11),s=i(12),o=i(3),a=i(1),h=i(6),l=new n({Extends:s,initialize:function(t,e,i,n){var r="text",o="txt",l=t.cacheManager.text;if(h(e)){var u=e;e=a(u,"key"),i=a(u,"url"),n=a(u,"xhrSettings"),o=a(u,"extension",o),r=a(u,"type",r),l=a(u,"cache",l)}var c={type:r,cache:l,extension:o,responseType:"text",key:e,url:i,xhrSettings:n};s.call(this,t,c)},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("text",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e){t.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(t,e){t.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},function(t,e,i){var n=i(107),r=i(115),s=i(13),o=i(0),a=i(23),h=i(193),l=i(25),u=i(82),c=i(8),d=i(5),p=new o({Extends:n,Mixins:[a.Flip,a.Tint,a.Pipeline],initialize:function(t,e,i,r){n.call(this,t,e,i,r),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new h.Fade(this),this.flashEffect=new h.Flash(this),this.shakeEffect=new h.Shake(this),this.panEffect=new h.Pan(this),this.rotateToEffect=new h.RotateTo(this),this.zoomEffect=new h.Zoom(this),this.lerp=new d(1,1),this.followOffset=new d,this.deadzone=null,this._follow=null},setDeadzone:function(t,e){if(void 0===t)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=t,this.deadzone.height=e):this.deadzone=new c(0,0,t,e),this._follow){var i=this.width/2,n=this.height/2,s=this._follow.x-this.followOffset.x,o=this._follow.y-this.followOffset.y;this.midPoint.set(s,o),this.scrollX=s-i,this.scrollY=o-n}r(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(t,e,i,n,r,s){return this.fadeEffect.start(!1,t,e,i,n,!0,r,s)},fadeOut:function(t,e,i,n,r,s){return this.fadeEffect.start(!0,t,e,i,n,!0,r,s)},fadeFrom:function(t,e,i,n,r,s,o){return this.fadeEffect.start(!1,t,e,i,n,r,s,o)},fade:function(t,e,i,n,r,s,o){return this.fadeEffect.start(!0,t,e,i,n,r,s,o)},flash:function(t,e,i,n,r,s,o){return this.flashEffect.start(t,e,i,n,r,s,o)},shake:function(t,e,i,n,r){return this.shakeEffect.start(t,e,i,n,r)},pan:function(t,e,i,n,r,s,o){return this.panEffect.start(t,e,i,n,r,s,o)},rotateTo:function(t,e,i,n,r,s,o){return this.rotateToEffect.start(t,e,i,n,r,s,o)},zoomTo:function(t,e,i,n,r,s){return this.zoomEffect.start(t,e,i,n,r,s)},preRender:function(){this.renderList.length=0;var t=this.width,e=this.height,i=.5*t,n=.5*e,s=this.zoom,o=this.matrix,a=t*this.originX,h=e*this.originY,c=this._follow,d=this.deadzone,p=this.scrollX,f=this.scrollY;d&&r(d,this.midPoint.x,this.midPoint.y);var m=!1;if(c&&!this.panEffect.isRunning){var g=c.x-this.followOffset.x,v=c.y-this.followOffset.y;d?(g<d.x?p=u(p,p-(d.x-g),this.lerp.x):g>d.right&&(p=u(p,p+(g-d.right),this.lerp.x)),v<d.y?f=u(f,f-(d.y-v),this.lerp.y):v>d.bottom&&(f=u(f,f+(v-d.bottom),this.lerp.y))):(p=u(p,g-a,this.lerp.x),f=u(f,v-h,this.lerp.y)),m=!0}this.useBounds&&(p=this.clampX(p),f=this.clampY(f)),this.roundPixels&&(a=Math.round(a),h=Math.round(h),p=Math.round(p),f=Math.round(f)),this.scrollX=p,this.scrollY=f;var y=p+i,A=f+n;this.midPoint.set(y,A);var x=t/s,w=e/s,b=y-x/2,S=A-w/2;this.roundPixels&&(b=Math.round(b),S=Math.round(S)),this.worldView.setTo(b,S,x,w),o.applyITRS(this.x+a,this.y+h,this.rotation,s,s),o.translate(-a,-h),this.shakeEffect.preRender(),m&&this.emit(l.FOLLOW_UPDATE,this,c)},setLerp:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.lerp.set(t,e),this},setFollowOffset:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.followOffset.set(t,e),this},startFollow:function(t,e,i,n,r,o){void 0===e&&(e=!1),void 0===i&&(i=1),void 0===n&&(n=i),void 0===r&&(r=0),void 0===o&&(o=r),this._follow=t,this.roundPixels=e,i=s(i,0,1),n=s(n,0,1),this.lerp.set(i,n),this.followOffset.set(r,o);var a=this.width/2,h=this.height/2,l=t.x-r,u=t.y-o;return this.midPoint.set(l,u),this.scrollX=l-a,this.scrollY=u-h,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(t,e){this.visible&&(this.rotateToEffect.update(t,e),this.panEffect.update(t,e),this.zoomEffect.update(t,e),this.shakeEffect.update(t,e),this.flashEffect.update(t,e),this.fadeEffect.update(t,e))},destroy:function(){this.resetFX(),n.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});t.exports=p},function(t,e,i){var n=i(13),r={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t){return void 0===t&&(t=1),this.alpha=t,this},alpha:{get:function(){return this._alpha},set:function(t){var e=n(t,0,1);this._alpha=e,0===e?this.renderFlags&=-3:this.renderFlags|=2}}};t.exports=r},function(t,e,i){var n=i(47),r={_blendMode:n.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(t){"string"==typeof t&&(t=n[t]),(t|=0)>=-1&&(this._blendMode=t)}},setBlendMode:function(t){return this.blendMode=t,this}};t.exports=r},function(t,e){t.exports={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function(t){return void 0===t&&(t=0),this.depth=t,this}}},function(t,e,i){var n=i(108),r=i(80);t.exports=function(t,e,i,s){void 0===s&&(s=[]),!e&&i>0&&(e=r(t)/i);for(var o=0;o<e;o++){var a=o/e;s.push(n(t,a))}return s}},function(t,e,i){var n=i(2);t.exports=function(t,e,i){return void 0===i&&(i=new n),i.x=t.x1+(t.x2-t.x1)*e,i.y=t.y1+(t.y2-t.y1)*e,i}},function(t,e,i){var n=i(43),r=i(2);t.exports=function(t,e,i,s){void 0===s&&(s=[]),!e&&i>0&&(e=n(t)/i);for(var o=t.x1,a=t.y1,h=t.x2,l=t.y2,u=0;u<e;u++){var c=u/e,d=o+(h-o)*c,p=a+(l-a)*c;s.push(new r(d,p))}return s}},function(t,e,i){var n=i(2);t.exports=function(t,e){void 0===e&&(e=new n);var i=Math.random();return e.x=t.x1+i*(t.x2-t.x1),e.y=t.y1+i*(t.y2-t.y1),e}},function(t,e,i){var n=i(2);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=t.x+Math.random()*t.width,e.y=t.y+Math.random()*t.height,e}},function(t,e){t.exports=function(t,e,i,n){var r=Math.cos(n),s=Math.sin(n),o=t.x-e,a=t.y-i;return t.x=o*r-a*s+e,t.y=o*s+a*r+i,t}},function(t,e,i){var n=i(177),r=i(178),s={mask:null,setMask:function(t){return this.mask=t,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(t){return void 0===t&&(this.texture||this.shader)&&(t=this),new n(this.scene,t)},createGeometryMask:function(t){return void 0===t&&"Graphics"===this.type&&(t=this),new r(this.scene,t)}};t.exports=s},function(t,e,i){var n=i(0),r=i(14),s=i(52),o=new n({initialize:function(t,e){var i=t.sys.renderer;this.renderer=i,this.bitmapMask=e,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),t.sys.game.events.on(r.CONTEXT_RESTORED,this.createMask,this),i&&i.on(s.RESIZE,this.createMask,this)},createMask:function(){var t=this.renderer;if(t&&t.gl){this.mainTexture&&this.clearMask();var e=t.width,i=t.height,n=0==(e&e-1)&&0==(i&i-1),r=t.gl,s=n?r.REPEAT:r.CLAMP_TO_EDGE,o=r.LINEAR;this.mainTexture=t.createTexture2D(0,o,o,s,s,r.RGBA,null,e,i),this.maskTexture=t.createTexture2D(0,o,o,s,s,r.RGBA,null,e,i),this.mainFramebuffer=t.createFramebuffer(e,i,this.mainTexture,!0),this.maskFramebuffer=t.createFramebuffer(e,i,this.maskTexture,!0)}},clearMask:function(){var t=this.renderer;t&&t.gl&&this.mainTexture&&(t.deleteTexture(this.mainTexture),t.deleteTexture(this.maskTexture),t.deleteFramebuffer(this.mainFramebuffer),t.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(t){this.bitmapMask=t},preRenderWebGL:function(t,e,i){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,e,i)},postRenderWebGL:function(t,e){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,e)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(s.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});t.exports=o},function(t,e,i){var n=new(i(0))({initialize:function(t,e){this.geometryMask=e,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(t){return this.geometryMask=t,this},setInvertAlpha:function(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function(t,e,i){var n=t.gl;t.flush(),0===t.maskStack.length&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:i}),this.applyStencil(t,i,!0),t.maskCount++},applyStencil:function(t,e,i){var n=t.gl,r=this.geometryMask,s=t.maskCount;n.colorMask(!1,!1,!1,!1),i?(n.stencilFunc(n.EQUAL,s,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,s+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),r.renderWebGL(t,r,e),t.flush(),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),i?this.invertAlpha?n.stencilFunc(n.NOTEQUAL,s+1,255):n.stencilFunc(n.EQUAL,s+1,255):this.invertAlpha?n.stencilFunc(n.NOTEQUAL,s,255):n.stencilFunc(n.EQUAL,s,255)},postRenderWebGL:function(t){var e=t.gl;t.maskStack.pop(),t.maskCount--,t.flush();var i=t.currentMask;if(0===t.maskStack.length)i.mask=null,e.disable(e.STENCIL_TEST);else{var n=t.maskStack[t.maskStack.length-1];n.mask.applyStencil(t,n.camera,!1),t.currentCameraMask.mask!==n.mask?(i.mask=n.mask,i.camera=n.camera):i.mask=null}},preRenderCanvas:function(t,e,i){var n=this.geometryMask;t.currentContext.save(),n.renderCanvas(t,n,i,null,null,!0),t.currentContext.clip()},postRenderCanvas:function(t){t.currentContext.restore()},destroy:function(){this.geometryMask=null}});t.exports=n},function(t,e,i){var n=i(110),r=i(111),s=i(68),o={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(t){void 0===t&&(t=r.MULTI_PIPELINE);var e=this.scene.sys.renderer;if(!e)return!1;var i=e.pipelines;if(this.postPipelines=[],this.pipelineData={},i){var n=i.get(t);if(n)return this.defaultPipeline=n,this.pipeline=n,!0}return!1},setPipeline:function(t,e,i){var r=this.scene.sys.renderer;if(!r)return this;var s=r.pipelines;if(s){var o=s.get(t);o&&(this.pipeline=o),e&&(this.pipelineData=i?n(e):e)}return this},setPostPipeline:function(t,e,i){var r=this.scene.sys.renderer;if(!r)return this;var s=r.pipelines;if(s){Array.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++){var a=s.getPostPipeline(t[o],this);a&&this.postPipelines.push(a)}e&&(this.pipelineData=i?n(e):e)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(t,e){var i=this.pipelineData;return void 0===e?delete i[t]:i[t]=e,this},getPostPipeline:function(t){for(var e=this.postPipelines,i=[],n=0;n<e.length;n++){var r=e[n];("string"==typeof t&&r.name===t||r instanceof t)&&i.push(r)}return 1===i.length?i[0]:i},resetPipeline:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.pipeline=this.defaultPipeline,t&&(this.postPipelines=[],this.hasPostPipeline=!1),e&&(this.pipelineData={}),null!==this.pipeline},resetPostPipeline:function(t){void 0===t&&(t=!1);for(var e=this.postPipelines,i=0;i<e.length;i++)e[i].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.pipelineData={})},removePostPipeline:function(t){for(var e=this.postPipelines,i=e.length-1;i>=0;i--){var n=e[i];("string"==typeof t&&n.name===t||"string"!=typeof t&&n instanceof t)&&(n.destroy(),s(e,i))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};t.exports=o},function(t,e){t.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,e){return void 0===e&&(e=t),this.scrollFactorX=t,this.scrollFactorY=e,this}}},function(t,e){t.exports=function(t){var e={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(e.textureKey=t.texture.key,e.frameKey=t.frame.name),e}},function(t,e,i){var n=i(10),r=i(24),s=i(112),o=i(183),a=i(184),h=i(5),l={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(t){this._scaleX=t,this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function(){return a(this._rotation*n.RAD_TO_DEG)},set:function(t){this.rotation=a(t)*n.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=o(t)}},setPosition:function(t,e,i,n){return void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=i,this.w=n,this},copyPosition:function(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function(t,e,i,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.scene.sys.scale.width),void 0===n&&(n=this.scene.sys.scale.height),this.x=t+Math.random()*i,this.y=e+Math.random()*n,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.scaleX=t,this.scaleY=e,this},setX:function(t){return void 0===t&&(t=0),this.x=t,this},setY:function(t){return void 0===t&&(t=0),this.y=t,this},setZ:function(t){return void 0===t&&(t=0),this.z=t,this},setW:function(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function(t){return void 0===t&&(t=new r),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(t,e){void 0===t&&(t=new r),void 0===e&&(e=new r);var i=this.parentContainer;if(!i)return this.getLocalTransformMatrix(t);for(t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);i;)e.applyITRS(i.x,i.y,i._rotation,i._scaleX,i._scaleY),e.multiply(t,t),i=i.parentContainer;return t},getLocalPoint:function(t,e,i,n){i||(i=new h),n||(n=this.scene.sys.cameras.main);var r=n.scrollX,o=n.scrollY,a=t+r*this.scrollFactorX-r,l=e+o*this.scrollFactorY-o;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(a,l,i):s(a,l,this.x,this.y,this.rotation,this.scaleX,this.scaleY,i),this._originComponent&&(i.x+=this._displayOriginX,i.y+=this._displayOriginY),i},getParentRotation:function(){for(var t=0,e=this.parentContainer;e;)t+=e.rotation,e=e.parentContainer;return t}};t.exports=l},function(t,e,i){var n=i(53);t.exports=function(t){return n(t,-Math.PI,Math.PI)}},function(t,e,i){var n=i(53);t.exports=function(t){return n(t,-180,180)}},function(t,e){t.exports={_visible:!0,visible:{get:function(){return this._visible},set:function(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(t){return this.visible=t,this}}},function(t,e,i){var n=i(26);t.exports=function(t){var e=new n;t=t.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,i,n){return e+e+i+i+n+n}));var i=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(i){var r=parseInt(i[1],16),s=parseInt(i[2],16),o=parseInt(i[3],16);e.setTo(r,s,o)}return e}},function(t,e){t.exports=function(t,e,i,n){return n<<24|t<<16|e<<8|i}},function(t,e){t.exports=function(t,e,i,n){void 0===n&&(n={h:0,s:0,v:0}),t/=255,e/=255,i/=255;var r=Math.min(t,e,i),s=Math.max(t,e,i),o=s-r,a=0,h=0===s?0:o/s,l=s;return s!==r&&(s===t?a=(e-i)/o+(e<i?6:0):s===e?a=(i-t)/o+2:s===i&&(a=(t-e)/o+4),a/=6),n.hasOwnProperty("_h")?(n._h=a,n._s=h,n._v=l):(n.h=a,n.s=h,n.v=l),n}},function(t,e,i){var n=i(26),r=i(190);t.exports=function(t){var e=r(t);return new n(e.r,e.g,e.b,e.a)}},function(t,e){t.exports=function(t){return t>16777215?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:255&t}:{a:255,r:t>>16&255,g:t>>8&255,b:255&t}}},function(t,e,i){var n=i(26);t.exports=function(t){return new n(t.r,t.g,t.b,t.a)}},function(t,e,i){var n=i(26);t.exports=function(t){var e=new n,i=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(t.toLowerCase());if(i){var r=parseInt(i[1],10),s=parseInt(i[2],10),o=parseInt(i[3],10),a=void 0!==i[4]?parseFloat(i[4]):1;e.setTo(r,s,o,255*a)}return e}},function(t,e,i){t.exports={Fade:i(426),Flash:i(427),Pan:i(428),Shake:i(461),RotateTo:i(462),Zoom:i(463)}},function(t,e,i){t.exports={In:i(429),Out:i(430),InOut:i(431)}},function(t,e,i){t.exports={In:i(432),Out:i(433),InOut:i(434)}},function(t,e,i){t.exports={In:i(435),Out:i(436),InOut:i(437)}},function(t,e,i){t.exports={In:i(438),Out:i(439),InOut:i(440)}},function(t,e,i){t.exports={In:i(441),Out:i(442),InOut:i(443)}},function(t,e,i){t.exports={In:i(444),Out:i(445),InOut:i(446)}},function(t,e,i){t.exports=i(447)},function(t,e,i){t.exports={In:i(448),Out:i(449),InOut:i(450)}},function(t,e,i){t.exports={In:i(451),Out:i(452),InOut:i(453)}},function(t,e,i){t.exports={In:i(454),Out:i(455),InOut:i(456)}},function(t,e,i){t.exports={In:i(457),Out:i(458),InOut:i(459)}},function(t,e,i){t.exports=i(460)},function(t,e,i){var n=i(13),r=i(0),s=i(117),o=i(207),a=i(507),h=i(7),l=i(208),u=new r({initialize:function(t,e,i){this.manager=t,this.key=e,this.type="frame",this.frames=this.getFrames(t.textureManager,h(i,"frames",[]),h(i,"defaultTextureKey",null),h(i,"sortFrames",!0)),this.frameRate=h(i,"frameRate",null),this.duration=h(i,"duration",null),this.msPerFrame,this.skipMissedFrames=h(i,"skipMissedFrames",!0),this.delay=h(i,"delay",0),this.repeat=h(i,"repeat",0),this.repeatDelay=h(i,"repeatDelay",0),this.yoyo=h(i,"yoyo",!1),this.showOnStart=h(i,"showOnStart",!1),this.hideOnComplete=h(i,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(s.PAUSE_ALL,this.pause,this),this.manager.on(s.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(t,e,i,n){null===i&&null===n?(t.frameRate=24,t.duration=24/e*1e3):i&&null===n?(t.duration=i,t.frameRate=e/(i/1e3)):(t.frameRate=n,t.duration=e/n*1e3),t.msPerFrame=1e3/t.frameRate},addFrame:function(t){return this.addFrameAt(this.frames.length,t)},addFrameAt:function(t,e){var i=this.getFrames(this.manager.textureManager,e);if(i.length>0){if(0===t)this.frames=i.concat(this.frames);else if(t===this.frames.length)this.frames=this.frames.concat(i);else{var n=this.frames.slice(0,t),r=this.frames.slice(t);this.frames=n.concat(i,r)}this.updateFrameSequence()}return this},checkFrame:function(t){return t>=0&&t<this.frames.length},getFirstTick:function(t){t.accumulator=0,t.nextTick=t.msPerFrame+t.currentFrame.duration},getFrameAt:function(t){return this.frames[t]},getFrames:function(t,e,i,n){void 0===n&&(n=!0);var r,s,o,u,c=[],d=1;if("string"==typeof e){u=e;var p=t.get(u).getFrameNames();n&&l(p),e=[],p.forEach((function(t){e.push({key:u,frame:t})}))}if(!Array.isArray(e)||0===e.length)return c;for(o=0;o<e.length;o++){var f=e[o],m=h(f,"key",i);if(m){var g=h(f,"frame",0),v=t.getFrame(m,g);(s=new a(m,g,d,v)).duration=h(f,"duration",0),s.isFirst=!r,r&&(r.nextFrame=s,s.prevFrame=r),c.push(s),r=s,d++}}if(c.length>0){s.isLast=!0,s.nextFrame=c[0],c[0].prevFrame=s;var y=1/(c.length-1);for(o=0;o<c.length;o++)c[o].progress=o*y}return c},getNextTick:function(t){t.accumulator-=t.nextTick,t.nextTick=t.msPerFrame+t.currentFrame.duration},getFrameByProgress:function(t){return t=n(t,0,1),o(t,this.frames,"progress")},nextFrame:function(t){var e=t.currentFrame;e.isLast?t.yoyo?this.handleYoyoFrame(t,!1):t.repeatCounter>0?t.inReverse&&t.forward?t.forward=!1:this.repeatAnimation(t):t.complete():this.updateAndGetNextTick(t,e.nextFrame)},handleYoyoFrame:function(t,e){if(e||(e=!1),t.inReverse===!e&&t.repeatCounter>0)return(0===t.repeatDelay||t.pendingRepeat)&&(t.forward=e),void this.repeatAnimation(t);if(t.inReverse===e||0!==t.repeatCounter){t.forward=e;var i=e?t.currentFrame.nextFrame:t.currentFrame.prevFrame;this.updateAndGetNextTick(t,i)}else t.complete()},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(t){var e=t.currentFrame;e.isFirst?t.yoyo?this.handleYoyoFrame(t,!0):t.repeatCounter>0?(t.inReverse&&!t.forward||(t.forward=!0),this.repeatAnimation(t)):t.complete():this.updateAndGetNextTick(t,e.prevFrame)},updateAndGetNextTick:function(t,e){t.setCurrentFrame(e),this.getNextTick(t)},removeFrame:function(t){var e=this.frames.indexOf(t);return-1!==e&&this.removeFrameAt(e),this},removeFrameAt:function(t){return this.frames.splice(t,1),this.updateFrameSequence(),this},repeatAnimation:function(t){if(2===t._pendingStop){if(0===t._pendingStopValue)return t.stop();t._pendingStopValue--}t.repeatDelay>0&&!t.pendingRepeat?(t.pendingRepeat=!0,t.accumulator-=t.nextTick,t.nextTick+=t.repeatDelay):(t.repeatCounter--,t.forward?t.setCurrentFrame(t.currentFrame.nextFrame):t.setCurrentFrame(t.currentFrame.prevFrame),t.isPlaying&&(this.getNextTick(t),t.handleRepeat()))},toJSON:function(){var t={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach((function(e){t.frames.push(e.toJSON())})),t},updateFrameSequence:function(){for(var t,e=this.frames.length,i=1/(e-1),n=0;n<e;n++)(t=this.frames[n]).index=n+1,t.isFirst=!1,t.isLast=!1,t.progress=n*i,0===n?(t.isFirst=!0,1===e?(t.isLast=!0,t.nextFrame=t,t.prevFrame=t):(t.isLast=!1,t.prevFrame=this.frames[e-1],t.nextFrame=this.frames[n+1])):n===e-1&&e>1?(t.isLast=!0,t.prevFrame=this.frames[e-2],t.nextFrame=this.frames[0]):e>1&&(t.prevFrame=this.frames[n-1],t.nextFrame=this.frames[n+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(s.PAUSE_ALL,this.pause,this),this.manager.off(s.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var t=0;t<this.frames.length;t++)this.frames[t].destroy();this.frames=[],this.manager=null}});t.exports=u},function(t,e){t.exports=function(t,e,i){if(!e.length)return NaN;if(1===e.length)return e[0];var n,r,s=1;if(i){if(t<e[0][i])return e[0];for(;e[s][i]<t;)s++}else for(;e[s]<t;)s++;return s>e.length&&(s=e.length),i?(n=e[s-1][i],(r=e[s][i])-t<=t-n?e[s]:e[s-1]):(n=e[s-1],(r=e[s])-t<=t-n?r:n)}},function(t,e){t.exports=function(t){var e=/\D/g;return t.sort((function(t,i){return parseInt(t.replace(e,""),10)-parseInt(i.replace(e,""),10)})),t}},function(t,e){t.exports=function(t,e,i,n){var r,s=[],o=!1;if((i||n)&&(o=!0,i||(i=""),n||(n="")),e<t)for(r=t;r>=e;r--)o?s.push(i+r.toString()+n):s.push(r);else for(r=t;r<=e;r++)o?s.push(i+r.toString()+n):s.push(r);return s}},function(t,e,i){t.exports={os:i(70),browser:i(86),features:i(119),input:i(515),audio:i(516),video:i(517),fullscreen:i(518),canvasFeatures:i(211)}},function(t,e,i){var n,r,s,o=i(17),a={supportInverseAlpha:!1,supportNewBlendModes:!1};t.exports=("function"!=typeof importScripts&&void 0!==document&&(a.supportNewBlendModes=(n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",r="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(s=new Image).onload=function(){var t=new Image;t.onload=function(){var e=o.create(t,6,1).getContext("2d");if(e.globalCompositeOperation="multiply",e.drawImage(s,0,0),e.drawImage(t,2,0),!e.getImageData(2,0,1,1))return!1;var i=e.getImageData(2,0,1,1).data;o.remove(t),a.supportNewBlendModes=255===i[0]&&0===i[1]&&0===i[2]},t.src=n+"/wCKxvRF"+r},s.src=n+"AP804Oa6"+r,!1),a.supportInverseAlpha=function(){var t=o.create(this,2,1).getContext("2d");t.fillStyle="rgba(10, 20, 30, 0.5)",t.fillRect(0,0,1,1);var e=t.getImageData(0,0,1,1);if(null===e)return!1;t.putImageData(e,1,0);var i=t.getImageData(1,0,1,1);return i.data[0]===e.data[0]&&i.data[1]===e.data[1]&&i.data[2]===e.data[2]&&i.data[3]===e.data[3]}()),a)},function(t,e){t.exports=function(t,e,i,n){return Math.atan2(n-e,i-t)}},function(t,e){t.exports=function(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI}},function(t,e){t.exports=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)}},function(t,e,i){var n=i(216);t.exports=function(t,e){return n(t)/n(e)/n(t-e)}},function(t,e){t.exports=function(t){if(0===t)return 1;for(var e=t;--t;)e*=t;return e}},function(t,e){t.exports=function(t,e,i,n,r){return function(t,e){var i=1-t;return i*i*i*e}(t,e)+function(t,e){var i=1-t;return 3*i*i*t*e}(t,i)+function(t,e){return 3*(1-t)*t*t*e}(t,n)+function(t,e){return t*t*t*e}(t,r)}},function(t,e){t.exports=function(t,e,i,n){return function(t,e){var i=1-t;return i*i*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,i)+function(t,e){return t*t*e}(t,n)}},function(t,e,i){var n=i(220);t.exports=function(t,e,i){return e+(i-e)*n(t,0,1)}},function(t,e){t.exports=function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)}},function(t,e){t.exports=function(t,e,i){return(t=Math.max(0,Math.min(1,(t-e)/(i-e))))*t*t*(t*(6*t-15)+10)}},function(t,e,i){var n=i(10);t.exports=function(t){return t*n.RAD_TO_DEG}},function(t,e){t.exports=function(t){return t>0?Math.ceil(t):Math.floor(t)}},function(t,e,i){var n=new(i(0))({initialize:function(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new n(this)},set:function(t){return this.copy(t)},copy:function(t){var e=this.val,i=t.val;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this},fromMat4:function(t){var e=t.val,i=this.val;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[4],i[4]=e[5],i[5]=e[6],i[6]=e[8],i[7]=e[9],i[8]=e[10],this},fromArray:function(t){var e=this.val;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function(){var t=this.val,e=t[1],i=t[2],n=t[5];return t[1]=t[3],t[2]=t[6],t[3]=e,t[5]=t[7],t[6]=i,t[7]=n,this},invert:function(){var t=this.val,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8],u=l*s-o*h,c=-l*r+o*a,d=h*r-s*a,p=e*u+i*c+n*d;return p?(p=1/p,t[0]=u*p,t[1]=(-l*i+n*h)*p,t[2]=(o*i-n*s)*p,t[3]=c*p,t[4]=(l*e-n*a)*p,t[5]=(-o*e+n*r)*p,t[6]=d*p,t[7]=(-h*e+i*a)*p,t[8]=(s*e-i*r)*p,this):null},adjoint:function(){var t=this.val,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8];return t[0]=s*l-o*h,t[1]=n*h-i*l,t[2]=i*o-n*s,t[3]=o*a-r*l,t[4]=e*l-n*a,t[5]=n*r-e*o,t[6]=r*h-s*a,t[7]=i*a-e*h,t[8]=e*s-i*r,this},determinant:function(){var t=this.val,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8];return e*(l*s-o*h)+i*(-l*r+o*a)+n*(h*r-s*a)},multiply:function(t){var e=this.val,i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],h=e[6],l=e[7],u=e[8],c=t.val,d=c[0],p=c[1],f=c[2],m=c[3],g=c[4],v=c[5],y=c[6],A=c[7],x=c[8];return e[0]=d*i+p*s+f*h,e[1]=d*n+p*o+f*l,e[2]=d*r+p*a+f*u,e[3]=m*i+g*s+v*h,e[4]=m*n+g*o+v*l,e[5]=m*r+g*a+v*u,e[6]=y*i+A*s+x*h,e[7]=y*n+A*o+x*l,e[8]=y*r+A*a+x*u,this},translate:function(t){var e=this.val,i=t.x,n=t.y;return e[6]=i*e[0]+n*e[3]+e[6],e[7]=i*e[1]+n*e[4]+e[7],e[8]=i*e[2]+n*e[5]+e[8],this},rotate:function(t){var e=this.val,i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],h=Math.sin(t),l=Math.cos(t);return e[0]=l*i+h*s,e[1]=l*n+h*o,e[2]=l*r+h*a,e[3]=l*s-h*i,e[4]=l*o-h*n,e[5]=l*a-h*r,this},scale:function(t){var e=this.val,i=t.x,n=t.y;return e[0]=i*e[0],e[1]=i*e[1],e[2]=i*e[2],e[3]=n*e[3],e[4]=n*e[4],e[5]=n*e[5],this},fromQuat:function(t){var e=t.x,i=t.y,n=t.z,r=t.w,s=e+e,o=i+i,a=n+n,h=e*s,l=e*o,u=e*a,c=i*o,d=i*a,p=n*a,f=r*s,m=r*o,g=r*a,v=this.val;return v[0]=1-(c+p),v[3]=l+g,v[6]=u-m,v[1]=l-g,v[4]=1-(h+p),v[7]=d+f,v[2]=u+m,v[5]=d-f,v[8]=1-(h+c),this},normalFromMat4:function(t){var e=t.val,i=this.val,n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],h=e[5],l=e[6],u=e[7],c=e[8],d=e[9],p=e[10],f=e[11],m=e[12],g=e[13],v=e[14],y=e[15],A=n*h-r*a,x=n*l-s*a,w=n*u-o*a,b=r*l-s*h,S=r*u-o*h,E=s*u-o*l,T=c*g-d*m,_=c*v-p*m,M=c*y-f*m,C=d*v-p*g,P=d*y-f*g,R=p*y-f*v,O=A*R-x*P+w*C+b*M-S*_+E*T;return O?(O=1/O,i[0]=(h*R-l*P+u*C)*O,i[1]=(l*M-a*R-u*_)*O,i[2]=(a*P-h*M+u*T)*O,i[3]=(s*P-r*R-o*C)*O,i[4]=(n*R-s*M+o*_)*O,i[5]=(r*M-n*P-o*T)*O,i[6]=(g*E-v*S+y*b)*O,i[7]=(v*w-m*E-y*x)*O,i[8]=(m*S-g*w+y*A)*O,this):null}});t.exports=n},function(t,e,i){var n=i(0),r=i(224),s=i(4),a=i(27),h=new Int8Array([1,2,0]),l=new Float32Array([0,0,0]),u=new a(1,0,0),c=new a(0,1,0),d=new a,p=new r,f=new n({initialize:function(t,e,i,n){this.onChangeCallback=s,this.set(t,e,i,n)},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback(this)}},copy:function(t){return this.set(t)},set:function(t,e,i,n,r){return void 0===r&&(r=!0),"object"==o(t)?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=e||0,this._z=i||0,this._w=n||0),r&&this.onChangeCallback(this),this},add:function(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function(){var t=this.x,e=this.y,i=this.z,n=this.w;return Math.sqrt(t*t+e*e+i*i+n*n)},lengthSq:function(){var t=this.x,e=this.y,i=this.z,n=this.w;return t*t+e*e+i*i+n*n},normalize:function(){var t=this.x,e=this.y,i=this.z,n=this.w,r=t*t+e*e+i*i+n*n;return r>0&&(r=1/Math.sqrt(r),this._x=t*r,this._y=e*r,this._z=i*r,this._w=n*r),this.onChangeCallback(this),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,n=this.y,r=this.z,s=this.w;return this.set(i+e*(t.x-i),n+e*(t.y-n),r+e*(t.z-r),s+e*(t.w-s))},rotationTo:function(t,e){var i=t.x*e.x+t.y*e.y+t.z*e.z;return i<-.999999?(d.copy(u).cross(t).length()<1e-6&&d.copy(c).cross(t),d.normalize(),this.setAxisAngle(d,Math.PI)):i>.999999?this.set(0,0,0,1):(d.copy(t).cross(e),this._x=d.x,this._y=d.y,this._z=d.z,this._w=1+i,this.normalize())},setAxes:function(t,e,i){var n=p.val;return n[0]=e.x,n[3]=e.y,n[6]=e.z,n[1]=i.x,n[4]=i.y,n[7]=i.z,n[2]=-t.x,n[5]=-t.y,n[8]=-t.z,this.fromMat3(p).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(t,e){e*=.5;var i=Math.sin(e);return this.set(i*t.x,i*t.y,i*t.z,Math.cos(e))},multiply:function(t){var e=this.x,i=this.y,n=this.z,r=this.w,s=t.x,o=t.y,a=t.z,h=t.w;return this.set(e*h+r*s+i*a-n*o,i*h+r*o+n*s-e*a,n*h+r*a+e*o-i*s,r*h-e*s-i*o-n*a)},slerp:function(t,e){var i=this.x,n=this.y,r=this.z,s=this.w,o=t.x,a=t.y,h=t.z,l=t.w,u=i*o+n*a+r*h+s*l;u<0&&(u=-u,o=-o,a=-a,h=-h,l=-l);var c=1-e,d=e;if(1-u>1e-6){var p=Math.acos(u),f=Math.sin(p);c=Math.sin((1-e)*p)/f,d=Math.sin(e*p)/f}return this.set(c*i+d*o,c*n+d*a,c*r+d*h,c*s+d*l)},invert:function(){var t=this.x,e=this.y,i=this.z,n=this.w,r=t*t+e*e+i*i+n*n,s=r?1/r:0;return this.set(-t*s,-e*s,-i*s,n*s)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(t){t*=.5;var e=this.x,i=this.y,n=this.z,r=this.w,s=Math.sin(t),o=Math.cos(t);return this.set(e*o+r*s,i*o+n*s,n*o-i*s,r*o-e*s)},rotateY:function(t){t*=.5;var e=this.x,i=this.y,n=this.z,r=this.w,s=Math.sin(t),o=Math.cos(t);return this.set(e*o-n*s,i*o+r*s,n*o+e*s,r*o-i*s)},rotateZ:function(t){t*=.5;var e=this.x,i=this.y,n=this.z,r=this.w,s=Math.sin(t),o=Math.cos(t);return this.set(e*o+i*s,i*o-e*s,n*o+r*s,r*o-n*s)},calculateW:function(){var t=this.x,e=this.y,i=this.z;return this.w=-Math.sqrt(1-t*t-e*e-i*i),this},setFromEuler:function(t,e){var i=t.x/2,n=t.y/2,r=t.z/2,s=Math.cos(i),o=Math.cos(n),a=Math.cos(r),h=Math.sin(i),l=Math.sin(n),u=Math.sin(r);switch(t.order){case"XYZ":this.set(h*o*a+s*l*u,s*l*a-h*o*u,s*o*u+h*l*a,s*o*a-h*l*u,e);break;case"YXZ":this.set(h*o*a+s*l*u,s*l*a-h*o*u,s*o*u-h*l*a,s*o*a+h*l*u,e);break;case"ZXY":this.set(h*o*a-s*l*u,s*l*a+h*o*u,s*o*u+h*l*a,s*o*a-h*l*u,e);break;case"ZYX":this.set(h*o*a-s*l*u,s*l*a+h*o*u,s*o*u-h*l*a,s*o*a+h*l*u,e);break;case"YZX":this.set(h*o*a+s*l*u,s*l*a+h*o*u,s*o*u-h*l*a,s*o*a-h*l*u,e);break;case"XZY":this.set(h*o*a-s*l*u,s*l*a-h*o*u,s*o*u+h*l*a,s*o*a+h*l*u,e)}return this},setFromRotationMatrix:function(t){var e,i=t.val,n=i[0],r=i[4],s=i[8],o=i[1],a=i[5],h=i[9],l=i[2],u=i[6],c=i[10],d=n+a+c;return d>0?(e=.5/Math.sqrt(d+1),this.set((u-h)*e,(s-l)*e,(o-r)*e,.25/e)):n>a&&n>c?(e=2*Math.sqrt(1+n-a-c),this.set(.25*e,(r+o)/e,(s+l)/e,(u-h)/e)):a>c?(e=2*Math.sqrt(1+a-n-c),this.set((r+o)/e,.25*e,(h+u)/e,(s-l)/e)):(e=2*Math.sqrt(1+c-n-a),this.set((s+l)/e,(h+u)/e,.25*e,(o-r)/e)),this},fromMat3:function(t){var e,i=t.val,n=i[0]+i[4]+i[8];if(n>0)e=Math.sqrt(n+1),this.w=.5*e,e=.5/e,this._x=(i[7]-i[5])*e,this._y=(i[2]-i[6])*e,this._z=(i[3]-i[1])*e;else{var r=0;i[4]>i[0]&&(r=1),i[8]>i[3*r+r]&&(r=2);var s=h[r],o=h[s];e=Math.sqrt(i[3*r+r]-i[3*s+s]-i[3*o+o]+1),l[r]=.5*e,e=.5/e,l[s]=(i[3*s+r]+i[3*r+s])*e,l[o]=(i[3*o+r]+i[3*r+o])*e,this._x=l[0],this._y=l[1],this._z=l[2],this._w=(i[3*o+s]-i[3*s+o])*e}return this.onChangeCallback(this),this}});t.exports=f},function(t,e){t.exports={setCrisp:function(t){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach((function(e){t.style["image-rendering"]=e})),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}}},function(t,e,i){var n=i(25),r=i(228),s=i(0),o=i(22),a=i(9),h=i(52),l=i(229),u=i(83),c=i(90),d=i(24),p=new s({Extends:a,initialize:function(t){a.call(this);var e=t.config;this.config={clearBeforeRender:e.clearBeforeRender,backgroundColor:e.backgroundColor,antialias:e.antialias,roundPixels:e.roundPixels},this.game=t,this.type=o.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=t.canvas;var i={alpha:t.config.transparent,desynchronized:t.config.desynchronized};this.gameContext=e.context?e.context:this.gameCanvas.getContext("2d",i),this.currentContext=this.gameContext,this.antialias=t.config.antialias,this.blendModes=l(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new d,this._tempMatrix2=new d,this._tempMatrix3=new d,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(c.READY,this.boot,this)},boot:function(){var t=this.game,e=t.scale.baseSize;this.width=e.width,this.height=e.height,this.isBooted=!0,t.scale.on(u.RESIZE,this.onResize,this),this.resize(e.width,e.height)},onResize:function(t,e){e.width===this.width&&e.height===this.height||this.resize(e.width,e.height)},resize:function(t,e){this.width=t,this.height=e,this.emit(h.RESIZE,t,e)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(t){return this.currentContext.globalCompositeOperation=t,this},setContext:function(t){return this.currentContext=t||this.gameContext,this},setAlpha:function(t){return this.currentContext.globalAlpha=t,this},preRender:function(){var t=this.gameContext,e=this.config,i=this.width,n=this.height;t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),e.clearBeforeRender&&(t.clearRect(0,0,i,n),e.transparent||(t.fillStyle=e.backgroundColor.rgba,t.fillRect(0,0,i,n))),t.save(),this.drawCount=0,this.emit(h.PRE_RENDER)},render:function(t,e,i){var r=e.length;this.emit(h.RENDER,t,i);var s=i.x,o=i.y,a=i.width,l=i.height,u=i.renderToTexture?i.context:t.sys.context;u.save(),this.game.scene.customViewports&&(u.beginPath(),u.rect(s,o,a,l),u.clip()),this.currentContext=u;var c=i.mask;c&&c.preRenderCanvas(this,null,i._maskCamera),i.transparent||(u.fillStyle=i.backgroundColor.rgba,u.fillRect(s,o,a,l)),u.globalAlpha=i.alpha,u.globalCompositeOperation="source-over",this.drawCount+=r,i.renderToTexture&&i.emit(n.PRE_RENDER,i),i.matrix.copyToContext(u);for(var d=0;d<r;d++){var p=e[d];p.mask&&p.mask.preRenderCanvas(this,p,i),p.renderCanvas(this,p,i),p.mask&&p.mask.postRenderCanvas(this,p,i)}u.setTransform(1,0,0,1,0,0),u.globalCompositeOperation="source-over",u.globalAlpha=1,i.flashEffect.postRenderCanvas(u),i.fadeEffect.postRenderCanvas(u),i.dirty=!1,c&&c.postRenderCanvas(this),u.restore(),i.renderToTexture&&(i.emit(n.POST_RENDER,i),i.renderToGame&&t.sys.context.drawImage(i.canvas,s,o))},postRender:function(){this.gameContext.restore(),this.emit(h.POST_RENDER);var t=this.snapshotState;t.callback&&(r(this.gameCanvas,t),t.callback=null)},snapshotCanvas:function(t,e,i,n,s,o,a,h,l){void 0===i&&(i=!1),this.snapshotArea(n,s,o,a,e,h,l);var u=this.snapshotState;return u.getPixel=i,r(this.canvas,u),u.callback=null,this},snapshot:function(t,e,i){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,t,e,i)},snapshotArea:function(t,e,i,n,r,s,o){var a=this.snapshotState;return a.callback=r,a.type=s,a.encoder=o,a.getPixel=!1,a.x=t,a.y=e,a.width=Math.min(i,this.gameCanvas.width),a.height=Math.min(n,this.gameCanvas.height),this},snapshotPixel:function(t,e,i){return this.snapshotArea(t,e,1,1,i),this.snapshotState.getPixel=!0,this},batchSprite:function(t,e,i,n){var r=i.alpha*t.alpha;if(0!==r){var s=this.currentContext,o=this._tempMatrix1,a=this._tempMatrix2,h=e.canvasData,l=h.x,u=h.y,c=e.cutWidth,d=e.cutHeight,p=e.customPivot,f=e.source.resolution,m=t.displayOriginX,g=t.displayOriginY,v=-m+e.x,y=-g+e.y;if(t.isCropped){var A=t._crop;A.flipX===t.flipX&&A.flipY===t.flipY||e.updateCropUVs(A,t.flipX,t.flipY),c=A.cw,d=A.ch,l=A.cx,u=A.cy,v=-m+A.x,y=-g+A.y,t.flipX&&(v>=0?v=-(v+c):v<0&&(v=Math.abs(v)-c)),t.flipY&&(y>=0?y=-(y+d):y<0&&(y=Math.abs(y)-d))}var x=1,w=1;t.flipX&&(p||(v+=-e.realWidth+2*m),x=-1),t.flipY&&(p||(y+=-e.realHeight+2*g),w=-1),a.applyITRS(t.x,t.y,t.rotation,t.scaleX*x,t.scaleY*w),o.copyFrom(i.matrix),n?(o.multiplyWithOffset(n,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),a.e=t.x,a.f=t.y):(a.e-=i.scrollX*t.scrollFactorX,a.f-=i.scrollY*t.scrollFactorY),o.multiply(a),s.save(),o.setToContext(s),s.globalCompositeOperation=this.blendModes[t.blendMode],s.globalAlpha=r,s.imageSmoothingEnabled=!(!this.antialias||e.source.scaleMode),t.mask&&t.mask.preRenderCanvas(this,t,i),s.drawImage(e.source.image,l,u,c,d,v,y,c/f,d/f),t.mask&&t.mask.postRenderCanvas(this,t,i),s.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});t.exports=p},function(t,e,i){var n=i(17),r=i(26),s=i(1);t.exports=function(t,e){var i=s(e,"callback"),o=s(e,"type","image/png"),a=s(e,"encoder",.92),h=Math.abs(Math.round(s(e,"x",0))),l=Math.abs(Math.round(s(e,"y",0))),u=s(e,"width",t.width),c=s(e,"height",t.height);if(s(e,"getPixel",!1)){var d=t.getContext("2d").getImageData(h,l,1,1).data;i.call(null,new r(d[0],d[1],d[2],d[3]/255))}else if(0!==h||0!==l||u!==t.width||c!==t.height){var p=n.createWebGL(this,u,c);p.getContext("2d").drawImage(t,h,l,u,c,0,0,u,c);var f=new Image;f.onerror=function(){i.call(null),n.remove(p)},f.onload=function(){i.call(null,f),n.remove(p)},f.src=p.toDataURL(o,a)}else{var m=new Image;m.onerror=function(){i.call(null)},m.onload=function(){i.call(null,m)},m.src=t.toDataURL(o,a)}}},function(t,e,i){var n=i(47),r=i(211);t.exports=function(){var t=[],e=r.supportNewBlendModes,i="source-over";return t[n.NORMAL]=i,t[n.ADD]="lighter",t[n.MULTIPLY]=e?"multiply":i,t[n.SCREEN]=e?"screen":i,t[n.OVERLAY]=e?"overlay":i,t[n.DARKEN]=e?"darken":i,t[n.LIGHTEN]=e?"lighten":i,t[n.COLOR_DODGE]=e?"color-dodge":i,t[n.COLOR_BURN]=e?"color-burn":i,t[n.HARD_LIGHT]=e?"hard-light":i,t[n.SOFT_LIGHT]=e?"soft-light":i,t[n.DIFFERENCE]=e?"difference":i,t[n.EXCLUSION]=e?"exclusion":i,t[n.HUE]=e?"hue":i,t[n.SATURATION]=e?"saturation":i,t[n.COLOR]=e?"color":i,t[n.LUMINOSITY]=e?"luminosity":i,t[n.ERASE]="destination-out",t[n.SOURCE_IN]="source-in",t[n.SOURCE_OUT]="source-out",t[n.SOURCE_ATOP]="source-atop",t[n.DESTINATION_OVER]="destination-over",t[n.DESTINATION_IN]="destination-in",t[n.DESTINATION_OUT]="destination-out",t[n.DESTINATION_ATOP]="destination-atop",t[n.LIGHTER]="lighter",t[n.COPY]="copy",t[n.XOR]="xor",t}},function(t,e,i){var n=i(54),r=i(25),s=i(0),o=i(22),a=i(9),h=i(52),l=i(14),u=i(88),c=i(48),d=i(4),p=i(231),f=i(126),m=i(83),g=i(90),v=i(20),y=i(242),A=new s({Extends:a,initialize:function(t){a.call(this);var e=t.config,i={alpha:e.transparent,desynchronized:e.desynchronized,depth:!1,antialias:e.antialiasGL,premultipliedAlpha:e.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:e.failIfMajorPerformanceCaveat,powerPreference:e.powerPreference,preserveDrawingBuffer:e.preserveDrawingBuffer};this.config={clearBeforeRender:e.clearBeforeRender,antialias:e.antialias,backgroundColor:e.backgroundColor,contextCreation:i,roundPixels:e.roundPixels,maxTextures:e.maxTextures,maxTextureSize:e.maxTextureSize,batchSize:e.batchSize,maxLights:e.maxLights,mipmapFilter:e.mipmapFilter},this.game=t,this.type=o.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=t.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=d,this.contextRestoredHandler=d,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(t){var e,i=this.game,n=this.canvas,r=t.backgroundColor;if(!(e=i.config.context?i.config.context:n.getContext("webgl",t.contextCreation)||n.getContext("experimental-webgl",t.contextCreation))||e.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=e;var s=this;this.contextLostHandler=function(t){s.contextLost=!0,s.game.events.emit(l.CONTEXT_LOST,s),t.preventDefault()},this.contextRestoredHandler=function(){s.contextLost=!1,s.init(s.config),s.game.events.emit(l.CONTEXT_RESTORED,s)},n.addEventListener("webglcontextlost",this.contextLostHandler,!1),n.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),i.context=e;for(var a=0;a<=27;a++)this.blendModes.push({func:[e.ONE,e.ONE_MINUS_SRC_ALPHA],equation:e.FUNC_ADD});this.blendModes[1].func=[e.ONE,e.DST_ALPHA],this.blendModes[2].func=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[e.ONE,e.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[e.ZERO,e.ONE_MINUS_SRC_ALPHA],equation:e.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=e.BYTE,this.glFormats[1]=e.SHORT,this.glFormats[2]=e.UNSIGNED_BYTE,this.glFormats[3]=e.UNSIGNED_SHORT,this.glFormats[4]=e.FLOAT,this.glFuncMap={mat2:{func:e.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:e.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:e.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:e.uniform1f,length:1},"1fv":{func:e.uniform1fv,length:1},"1i":{func:e.uniform1i,length:1},"1iv":{func:e.uniform1iv,length:1},"2f":{func:e.uniform2f,length:2},"2fv":{func:e.uniform2fv,length:1},"2i":{func:e.uniform2i,length:2},"2iv":{func:e.uniform2iv,length:1},"3f":{func:e.uniform3f,length:3},"3fv":{func:e.uniform3fv,length:1},"3i":{func:e.uniform3i,length:3},"3iv":{func:e.uniform3iv,length:1},"4f":{func:e.uniform4f,length:4},"4fv":{func:e.uniform4fv,length:1},"4i":{func:e.uniform4i,length:4},"4iv":{func:e.uniform4iv,length:1}};var h=e.getSupportedExtensions();t.maxTextures&&-1!==t.maxTextures||(t.maxTextures=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)),t.maxTextureSize||(t.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE));var u="WEBGL_compressed_texture_",d="WEBKIT_"+u;this.compression.ETC1=e.getExtension(u+"etc1")||e.getExtension(d+"etc1"),this.compression.PVRTC=e.getExtension(u+"pvrtc")||e.getExtension(d+"pvrtc"),this.compression.S3TC=e.getExtension(u+"s3tc")||e.getExtension(d+"s3tc"),this.supportedExtensions=h,this.instancedArraysExtension=h.indexOf("ANGLE_instanced_arrays")>-1?e.getExtension("ANGLE_instanced_arrays"):null,this.vaoExtension=h.indexOf("OES_vertex_array_object")>-1?e.getExtension("OES_vertex_array_object"):null,e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),e.clearColor(r.redGL,r.greenGL,r.blueGL,r.alphaGL),this.mipmapFilter=e[t.mipmapFilter],this.maxTextures=v.checkShaderMax(e,t.maxTextures),this.textureIndexes=[];var f=this.tempTextures;if(Array.isArray(f))for(var m=0;a<this.maxTextures;m++)e.deleteTexture(f[m]);else f=new Array(this.maxTextures);for(var y=0;y<this.maxTextures;y++){var A=e.createTexture();e.activeTexture(e.TEXTURE0+y),e.bindTexture(e.TEXTURE_2D,A),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),f[y]=A,this.textureIndexes.push(y)}return this.tempTextures=f,this.currentActiveTexture=1,this.startActiveTexture++,e.activeTexture(e.TEXTURE1),this.pipelines=new p(this),this.setBlendMode(o.BlendModes.NORMAL),this.projectionMatrix=(new c).identity(),i.textures.once(g.READY,this.boot,this),this},boot:function(){var t=this.game,e=this.pipelines,i=t.scale.baseSize;this.width=i.width,this.height=i.height,this.isBooted=!0,this.renderTarget=new f(this,this.width,this.height,1,0,!0,!0),e.boot(t.config.pipeline),this.blankTexture=t.textures.getFrame("__DEFAULT"),this.whiteTexture=t.textures.getFrame("__WHITE");var n=this.gl;n.bindFramebuffer(n.FRAMEBUFFER,null),n.enable(n.SCISSOR_TEST),t.scale.on(m.RESIZE,this.onResize,this),this.resize(i.width,i.height)},onResize:function(t,e){e.width===this.width&&e.height===this.height||this.resize(e.width,e.height)},beginCapture:function(t,e){void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.renderTarget.bind(!0,t,e),this.setProjectionMatrix(t,e),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(t,e){var i=this.gl;return this.width=t,this.height=e,this.setProjectionMatrix(t,e),i.viewport(0,0,t,e),this.drawingBufferHeight=i.drawingBufferHeight,i.scissor(0,i.drawingBufferHeight-e,t,e),this.defaultScissor[2]=t,this.defaultScissor[3]=e,this.emit(h.RESIZE,t,e),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(t,e){return t===this.projectionWidth&&e===this.projectionHeight||(this.projectionWidth=t,this.projectionHeight=e,this.projectionMatrix.ortho(0,t,e,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(t){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(t)},getExtension:function(t){return this.hasExtension(t)?(t in this.extensions||(this.extensions[t]=this.gl.getExtension(t)),this.extensions[t]):null},flush:function(){this.pipelines.flush()},pushScissor:function(t,e,i,n,r){void 0===r&&(r=this.drawingBufferHeight);var s=[t,e,i,n];return this.scissorStack.push(s),this.setScissor(t,e,i,n,r),this.currentScissor=s,s},setScissor:function(t,e,i,n,r){void 0===r&&(r=this.drawingBufferHeight);var s=this.gl,o=this.currentScissor,a=i>0&&n>0;if(o&&a){var h=o[0],l=o[1],u=o[2],c=o[3];a=h!==t||l!==e||u!==i||c!==n}a&&(this.flush(),s.scissor(t,r-e-n,i,n))},resetScissor:function(){var t=this.gl;t.enable(t.SCISSOR_TEST);var e=this.currentScissor;if(e){var i=e[0],n=e[1],r=e[2],s=e[3];r>0&&s>0&&t.scissor(i,this.drawingBufferHeight-n-s,r,s)}},popScissor:function(){var t=this.scissorStack;t.pop();var e=t[t.length-1];e&&this.setScissor(e[0],e[1],e[2],e[3]),this.currentScissor=e},hasActiveStencilMask:function(){var t=this.currentMask.mask,e=this.currentCameraMask.mask;return t&&t.isStencil||e&&e.isStencil},resetViewport:function(){var t=this.gl;t.viewport(0,0,this.width,this.height),this.drawingBufferHeight=t.drawingBufferHeight},setBlendMode:function(t,e){void 0===e&&(e=!1);var i=this.gl,n=this.blendModes[t];return!!(e||t!==o.BlendModes.SKIP_CHECK&&this.currentBlendMode!==t)&&(this.flush(),i.enable(i.BLEND),i.blendEquation(n.equation),n.func.length>2?i.blendFuncSeparate(n.func[0],n.func[1],n.func[2],n.func[3]):i.blendFunc(n.func[0],n.func[1]),this.currentBlendMode=t,!0)},addBlendMode:function(t,e){return this.blendModes.push({func:t,equation:e})-1},updateBlendMode:function(t,e,i){return this.blendModes[t]&&(this.blendModes[t].func=e,i&&(this.blendModes[t].equation=i)),this},removeBlendMode:function(t){return t>17&&this.blendModes[t]&&this.blendModes.splice(t,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(t){if(this.pipelines.forceZero())return this.setTextureZero(t.glTexture,!0),0;var e=this.gl,i=this.currentActiveTexture;return t.glIndexCounter<this.startActiveTexture&&(t.glIndexCounter=this.startActiveTexture,i<this.maxTextures?(t.glIndex=i,e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,t.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,t.glIndexCounter=this.startActiveTexture,t.glIndex=1,e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,t.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,t.glIndex},isNewNormalMap:function(t,e){return this.textureZero!==t||this.normalTexture!==e},setTextureZero:function(t,e){if(this.textureZero!==t){e&&this.flush();var i=this.gl;i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t),this.textureZero=t}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(t){if(this.normalTexture!==t){var e=this.gl;e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,t),this.normalTexture=t,1===this.currentActiveTexture&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var t=this.gl,e=this.tempTextures,i=0;i<e.length;i++)t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(t){if(void 0===t&&(t=!1),!this.isTextureClean){this.flush();var e=this.gl,i=this.tempTextures;if(t){for(var n=0;n<i.length;n++)e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,i[n]);e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,i[1]),this.isTextureClean=!0}else e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,i[0]),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,i[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(t){if(this.pipelines.forceZero())return this.setTextureZero(t,!0),0;var e=this.gl,i=this.currentActiveTexture;return t.glIndexCounter<this.startActiveTexture&&(t.glIndexCounter=this.startActiveTexture,i<this.maxTextures?(t.glIndex=i,e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,t),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,t.glIndexCounter=this.startActiveTexture,t.glIndex=1,e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,t),this.currentActiveTexture=2)),this.isTextureClean=!1,t.glIndex},pushFramebuffer:function(t,e,i,n){return t===this.currentFramebuffer?this:(this.fboStack.push(t),this.setFramebuffer(t,e,i,n))},setFramebuffer:function(t,e,i,n){if(void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=!0),t===this.currentFramebuffer)return this;var r=this.gl,s=this.width,o=this.height;return t&&t.renderTexture&&n?(s=t.renderTexture.width,o=t.renderTexture.height):this.flush(),r.bindFramebuffer(r.FRAMEBUFFER,t),n&&r.viewport(0,0,s,o),e&&(t?(this.drawingBufferHeight=o,this.pushScissor(0,0,s,o)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=t,i&&this.resetTextures(),this},popFramebuffer:function(t,e,i){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===i&&(i=!0);var n=this.fboStack;n.pop();var r=n[n.length-1];return r||(r=null),this.setFramebuffer(r,t,e,i),r},setProgram:function(t){return t!==this.currentProgram&&(this.flush(),this.gl.useProgram(t),this.currentProgram=t,!0)},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(t,e,i,n){var r=this.gl,s=r.NEAREST,a=r.NEAREST,h=r.CLAMP_TO_EDGE;e=t?t.width:e,i=t?t.height:i;var l=u(e,i);return l&&(h=r.REPEAT),n===o.ScaleModes.LINEAR&&this.config.antialias&&(s=l?this.mipmapFilter:r.LINEAR,a=r.LINEAR),t||"number"!=typeof e||"number"!=typeof i?this.createTexture2D(0,s,a,h,h,r.RGBA,t):this.createTexture2D(0,s,a,h,h,r.RGBA,null,e,i)},createTexture2D:function(t,e,i,n,r,s,o,a,h,l,c,d){l=null==l||l,void 0===c&&(c=!1),void 0===d&&(d=!1);var p=this.gl,f=p.createTexture();p.activeTexture(p.TEXTURE0);var m=p.getParameter(p.TEXTURE_BINDING_2D);return p.bindTexture(p.TEXTURE_2D,f),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,e),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,i),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,r),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,n),p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,d),null==o?p.texImage2D(p.TEXTURE_2D,t,s,a,h,0,s,p.UNSIGNED_BYTE,null):(c||(a=o.width,h=o.height),p.texImage2D(p.TEXTURE_2D,t,s,s,p.UNSIGNED_BYTE,o)),u(a,h)&&p.generateMipmap(p.TEXTURE_2D),m&&p.bindTexture(p.TEXTURE_2D,m),f.isAlphaPremultiplied=l,f.isRenderTexture=!1,f.width=a,f.height=h,f.glIndex=0,f.glIndexCounter=-1,f},createFramebuffer:function(t,e,i,n){var r,s=this.gl,o=s.createFramebuffer();if(this.setFramebuffer(o),n){var a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,t,e),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}if(i.isRenderTexture=!0,i.isAlphaPremultiplied=!1,s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,i,0),(r=s.checkFramebufferStatus(s.FRAMEBUFFER))!==s.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[r]);return o.renderTexture=i,this.setFramebuffer(null),this.resetTextures(),o},createProgram:function(t,e){var i=this.gl,n=i.createProgram(),r=i.createShader(i.VERTEX_SHADER),s=i.createShader(i.FRAGMENT_SHADER);if(i.shaderSource(r,t),i.shaderSource(s,e),i.compileShader(r),i.compileShader(s),!i.getShaderParameter(r,i.COMPILE_STATUS))throw new Error("Vertex Shader failed:\n"+i.getShaderInfoLog(r));if(!i.getShaderParameter(s,i.COMPILE_STATUS))throw new Error("Fragment Shader failed:\n"+i.getShaderInfoLog(s));if(i.attachShader(n,r),i.attachShader(n,s),i.linkProgram(n),!i.getProgramParameter(n,i.LINK_STATUS))throw new Error("Link Program failed:\n"+i.getProgramInfoLog(n));return i.useProgram(n),n},createVertexBuffer:function(t,e){var i=this.gl,n=i.createBuffer();return i.bindBuffer(i.ARRAY_BUFFER,n),i.bufferData(i.ARRAY_BUFFER,t,e),i.bindBuffer(i.ARRAY_BUFFER,null),n},createIndexBuffer:function(t,e){var i=this.gl,n=i.createBuffer();return i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,n),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t,e),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),n},deleteTexture:function(t,e){return e&&this.resetTextures(!0),t&&this.gl.deleteTexture(t),this},deleteFramebuffer:function(t){return t&&(this.gl.deleteFramebuffer(t),n(this.fboStack,t),this.currentFramebuffer===t&&(this.currentFramebuffer=null)),this},deleteProgram:function(t){return t&&this.gl.deleteProgram(t),this},deleteBuffer:function(t){return this.gl.deleteBuffer(t),this},preRenderCamera:function(t){var e=t.x,i=t.y,n=t.width,s=t.height,o=t.backgroundColor;t.emit(r.PRE_RENDER,t),this.pipelines.preBatchCamera(t),this.pushScissor(e,i,n,s),t.mask&&(this.currentCameraMask.mask=t.mask,this.currentCameraMask.camera=t._maskCamera,t.mask.preRenderWebGL(this,t,t._maskCamera)),o.alphaGL>0&&this.pipelines.setMulti().drawFillRect(e,i,n,s,v.getTintFromFloats(o.blueGL,o.greenGL,o.redGL,1),o.alphaGL)},getCurrentStencilMask:function(){var t=null,e=this.maskStack,i=this.currentCameraMask;return e.length>0?t=e[e.length-1]:i.mask&&i.mask.isStencil&&(t=i),t},postRenderCamera:function(t){var e=t.flashEffect,i=t.fadeEffect;if(e.isRunning||i.isRunning||i.isComplete){var n=this.pipelines.setMulti();e.postRenderWebGL(n,v.getTintFromFloats),i.postRenderWebGL(n,v.getTintFromFloats)}t.dirty=!1,this.popScissor(),t.mask&&(this.currentCameraMask.mask=null,t.mask.postRenderWebGL(this,t._maskCamera)),this.pipelines.postBatchCamera(t),t.emit(r.POST_RENDER,t)},preRender:function(){if(!this.contextLost){var t=this.gl;if(t.bindFramebuffer(t.FRAMEBUFFER,null),this.config.clearBeforeRender){var e=this.config.backgroundColor;t.clearColor(e.redGL,e.greenGL,e.blueGL,e.alphaGL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}t.enable(t.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&t.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(h.PRE_RENDER)}},render:function(t,e,i){if(!this.contextLost){var n=e.length;if(this.emit(h.RENDER,t,i),this.preRenderCamera(i),0===n)return this.setBlendMode(o.BlendModes.NORMAL),void this.postRenderCamera(i);this.currentType="";for(var r=this.currentMask,s=0;s<n;s++){this.finalType=s===n-1;var a=e[s],l=a.mask;(r=this.currentMask).mask&&r.mask!==l&&r.mask.postRenderWebGL(this,r.camera),l&&r.mask!==l&&l.preRenderWebGL(this,a,i),a.blendMode!==this.currentBlendMode&&this.setBlendMode(a.blendMode);var u=a.type;u!==this.currentType&&(this.newType=!0,this.currentType=u),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=e[s+1].type===this.currentType,a.renderWebGL(this,a,i),this.newType=!1}(r=this.currentMask).mask&&r.mask.postRenderWebGL(this,r.camera),this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(i)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(h.POST_RENDER);var t=this.snapshotState;t.callback&&(y(this.canvas,t),t.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(t,e,i){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,t,e,i)},snapshotArea:function(t,e,i,n,r,s,o){var a=this.snapshotState;return a.callback=r,a.type=s,a.encoder=o,a.getPixel=!1,a.x=t,a.y=e,a.width=Math.min(i,this.gl.drawingBufferWidth),a.height=Math.min(n,this.gl.drawingBufferHeight),this},snapshotPixel:function(t,e,i){return this.snapshotArea(t,e,1,1,i),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(t,e,i,n,r,s,o,a,h,l,u){void 0===r&&(r=!1),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=e),void 0===h&&(h=i);var c=this.currentFramebuffer;this.snapshotArea(s,o,a,h,n,l,u);var d=this.snapshotState;return d.getPixel=r,d.isFramebuffer=!0,d.bufferWidth=e,d.bufferHeight=i,this.setFramebuffer(t),y(this.canvas,d),this.setFramebuffer(c),d.callback=null,d.isFramebuffer=!1,this},canvasToTexture:function(t,e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),e?this.updateCanvasTexture(t,e,n):this.createCanvasTexture(t,i,n)},createCanvasTexture:function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var n=this.gl,r=n.NEAREST,s=n.NEAREST,o=t.width,a=t.height,h=n.CLAMP_TO_EDGE,l=u(o,a);return!e&&l&&(h=n.REPEAT),this.config.antialias&&(r=l?this.mipmapFilter:n.LINEAR,s=n.LINEAR),this.createTexture2D(0,r,s,h,h,n.RGBA,t,o,a,!0,!1,i)},updateCanvasTexture:function(t,e,i){void 0===i&&(i=!1);var n=this.gl,r=t.width,s=t.height;if(r>0&&s>0){n.activeTexture(n.TEXTURE0);var o=n.getParameter(n.TEXTURE_BINDING_2D);n.bindTexture(n.TEXTURE_2D,e),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,i),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),e.width=r,e.height=s,o&&n.bindTexture(n.TEXTURE_2D,o)}return e},createVideoTexture:function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var n=this.gl,r=n.NEAREST,s=n.NEAREST,o=t.videoWidth,a=t.videoHeight,h=n.CLAMP_TO_EDGE,l=u(o,a);return!e&&l&&(h=n.REPEAT),this.config.antialias&&(r=l?this.mipmapFilter:n.LINEAR,s=n.LINEAR),this.createTexture2D(0,r,s,h,h,n.RGBA,t,o,a,!0,!0,i)},updateVideoTexture:function(t,e,i){void 0===i&&(i=!1);var n=this.gl,r=t.videoWidth,s=t.videoHeight;if(r>0&&s>0){n.activeTexture(n.TEXTURE0);var o=n.getParameter(n.TEXTURE_BINDING_2D);n.bindTexture(n.TEXTURE_2D,e),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,i),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),e.width=r,e.height=s,o&&n.bindTexture(n.TEXTURE_2D,o)}return e},setTextureFilter:function(t,e){var i=this.gl,n=[i.LINEAR,i.NEAREST][e];i.activeTexture(i.TEXTURE0);var r=i.getParameter(i.TEXTURE_BINDING_2D);return i.bindTexture(i.TEXTURE_2D,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,n),r&&i.bindTexture(i.TEXTURE_2D,r),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var t=this.gl,e=this.tempTextures,i=0;i<e.length;i++)t.deleteTexture(e[i]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});t.exports=A},function(t,e,i){var n=i(0),r=i(111),s=i(84),a=i(232),h=i(235),l=i(236),u=i(75),c=i(237),d=i(238),p=i(239),f=i(240),m=new n({initialize:function(t){this.game=t.game,this.renderer=t,this.classes=new s([[r.UTILITY_PIPELINE,f],[r.MULTI_PIPELINE,u],[r.BITMAPMASK_PIPELINE,a],[r.SINGLE_PIPELINE,p],[r.ROPE_PIPELINE,d],[r.LIGHT_PIPELINE,l],[r.POINTLIGHT_PIPELINE,c],[r.GRAPHICS_PIPELINE,h]]),this.postPipelineClasses=new s,this.pipelines=new s,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(t){var e,i,n=this,s=this.game;if(this.classes.each((function(t,i){e=n.add(t,new i({game:s})),t===r.UTILITY_PIPELINE&&(n.UTILITY_PIPELINE=e,n.fullFrame1=e.fullFrame1,n.fullFrame2=e.fullFrame2,n.halfFrame1=e.halfFrame1,n.halfFrame2=e.halfFrame2)})),this.MULTI_PIPELINE=this.get(r.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(r.BITMAPMASK_PIPELINE),t)for(i in t){var o=t[i];(e=new o(s)).isPostFX?this.postPipelineClasses.set(i,o):this.has(i)||(this.classes.set(i,o),this.add(i,e))}},add:function(t,e){if(!e.isPostFX){var i=this.pipelines,n=this.renderer;return i.has(t)||(e.name=t,e.manager=this,i.set(t,e)),e.hasBooted||e.boot(),0!==n.width&&0!==n.height&&e.resize(n.width,n.height),e}},addPostPipeline:function(t,e){this.postPipelineClasses.has(t)||this.postPipelineClasses.set(t,e)},flush:function(){this.current&&this.current.flush()},has:function(t){var e=this.pipelines;return"string"==typeof t?e.has(t):!!e.contains(t)},get:function(t){var e=this.pipelines;return"string"==typeof t?e.get(t):e.contains(t)?t:void 0},getPostPipeline:function(t,e){var i,n=this.postPipelineClasses;if("string"==typeof t?i=n.get(t):"function"==typeof t?n.contains(t)&&(i=t):"object"==o(t)&&(i=n.get(t.name)),i){var r=new i(this.game);return e&&(r.gameObject=e),r}},remove:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this.pipelines.delete(t),e&&this.classes.delete(t),i&&this.postPipelineClasses.delete(t)},set:function(t,e,i){if(!t.isPostFX)return this.isCurrent(t,i)||(this.flush(),this.current&&this.current.unbind(),this.current=t,t.bind(i)),t.updateProjectionMatrix(),t.onBind(e),t},preBatch:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,i=e.length-1;i>=0;i--){var n=e[i];n.active&&n.preBatch(t)}}},postBatch:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,i=0;i<e.length;i++){var n=e[i];n.active&&n.postBatch(t)}}},preBatchCamera:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,i=e.length-1;i>=0;i--){var n=e[i];n.active&&n.preBatch(t)}}},postBatchCamera:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,i=0;i<e.length;i++){var n=e[i];n.active&&n.postBatch(t)}}},isCurrent:function(t,e){var i=this.renderer,n=this.current;return n&&!e&&(e=n.currentShader),!(n!==t||e.program!==i.currentProgram)},copyFrame:function(t,e,i,n,r){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(t,e,i,n,r),this},copyToGame:function(t){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(t),this},drawFrame:function(t,e,i,n){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(t,e,i,n),this},blendFrames:function(t,e,i,n,r){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(t,e,i,n,r),this},blendFramesAdditive:function(t,e,i,n,r){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(t,e,i,n,r),this},clearFrame:function(t,e){return this.UTILITY_PIPELINE.clearFrame(t,e),this},blitFrame:function(t,e,i,n,r,s){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(t,e,i,n,r,s),this},copyFrameRect:function(t,e,i,n,r,s,o,a){return this.UTILITY_PIPELINE.copyFrameRect(t,e,i,n,r,s,o,a),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(t){return this.UTILITY_PIPELINE.bind(t)},rebind:function(t){void 0===t&&this.previous&&(t=this.previous);var e=this.renderer,i=e.gl;i.disable(i.DEPTH_TEST),i.disable(i.CULL_FACE),e.hasActiveStencilMask()?i.clear(i.DEPTH_BUFFER_BIT):(i.disable(i.STENCIL_TEST),i.clear(i.DEPTH_BUFFER_BIT|i.STENCIL_BUFFER_BIT)),i.viewport(0,0,e.width,e.height),e.currentProgram=null,e.setBlendMode(0,!0);var n=this.pipelines.entries;for(var r in n)n[r].glReset=!0;t&&(this.current=t,t.rebind()),e.resetTextures()},clear:function(){var t=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,t.currentProgram=null,t.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});t.exports=m},function(t,e,i){var n=i(0),r=i(1),s=i(582),o=i(583),a=i(73),h=i(35),l=new n({Extends:h,initialize:function(t){t.fragShader=r(t,"fragShader",s),t.vertShader=r(t,"vertShader",o),t.batchSize=r(t,"batchSize",1),t.vertices=r(t,"vertices",[-1,1,-1,-7,7,1]),t.attributes=r(t,"attributes",[{name:"inPosition",size:2,type:a.FLOAT}]),h.call(this,t)},boot:function(){h.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(t,e){h.prototype.resize.call(this,t,e),this.set2f("uResolution",t,e)},beginMask:function(t,e,i){var n=this.gl;if(t.bitmapMask&&n){var r=this.renderer;r.flush(),r.pushFramebuffer(t.mainFramebuffer),n.disable(n.STENCIL_TEST),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),r.currentCameraMask.mask!==t&&(r.currentMask.mask=t,r.currentMask.camera=i)}},endMask:function(t,e){var i=this.gl,n=this.renderer,r=t.bitmapMask;if(r&&i){n.flush(),n.pushFramebuffer(t.maskFramebuffer),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),n.setBlendMode(0,!0),r.renderWebGL(n,r,e),n.flush(),n.popFramebuffer(),n.popFramebuffer();var s=n.getCurrentStencilMask();s?(i.enable(i.STENCIL_TEST),s.mask.applyStencil(n,s.camera,!0)):n.currentMask.mask=null,n.pipelines.set(this),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,t.maskTexture),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t.mainTexture),this.set1i("uInvertMaskAlpha",t.invertAlpha),i.drawArrays(this.topology,0,3),n.resetTextures()}}});t.exports=l},function(t,e,i){t.exports={AFTER_FLUSH:i(584),BEFORE_FLUSH:i(585),BIND:i(586),BOOT:i(587),DESTROY:i(588),REBIND:i(589),RESIZE:i(590)}},function(t,e,i){var n=i(0),r=i(1),s=i(73),o=new n({initialize:function(t,e,i,n,r){this.pipeline=t,this.name=e,this.renderer=t.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(i,n),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(r),this.createUniforms()},createAttributes:function(t){var e=0,i=0,n=[];this.vertexComponentCount=0;for(var o=0;o<t.length;o++){var a=t[o],h=a.name,l=r(a,"size",1),u=r(a,"type",s.FLOAT),c=u.enum,d=u.size,p=!!a.normalized;n.push({name:h,size:l,type:c,normalized:p,offset:i,enabled:!1,location:-1}),4===d?e+=l:e++,i+=l*d}this.vertexSize=i,this.vertexComponentCount=e,this.attributes=n},bind:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),e&&this.pipeline.flush(),this.renderer.setProgram(this.program),t&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(t){void 0===t&&(t=!1);for(var e=this.gl,i=this.vertexSize,n=this.attributes,r=this.program,s=0;s<n.length;s++){var o=n[s],a=o.size,h=o.type,l=o.offset,u=o.enabled,c=o.location,d=!!o.normalized;if(t){var p=e.getAttribLocation(r,o.name);p>=0?(e.enableVertexAttribArray(p),e.vertexAttribPointer(p,a,h,d,i,l),o.enabled=!0,o.location=p):-1!==p&&e.disableVertexAttribArray(p)}else u?e.vertexAttribPointer(c,a,h,d,i,l):!u&&c>-1&&(e.disableVertexAttribArray(c),o.location=-1)}return this},createUniforms:function(){var t,e,i,n=this.gl,r=this.program,s=this.uniforms,o=n.getProgramParameter(r,n.ACTIVE_UNIFORMS);for(t=0;t<o;t++){var a=n.getActiveUniform(r,t);if(a){e=a.name,null!==(i=n.getUniformLocation(r,e))&&(s[e]={name:e,location:i,value1:null,value2:null,value3:null,value4:null});var h=e.indexOf("[");h>0&&(e=e.substr(0,h),s.hasOwnProperty(e)||null!==(i=n.getUniformLocation(r,e))&&(s[e]={name:e,location:i,value1:null,value2:null,value3:null,value4:null}))}}return this},hasUniform:function(t){return this.uniforms.hasOwnProperty(t)},resetUniform:function(t){var e=this.uniforms[t];return e&&(e.value1=null,e.value2=null,e.value3=null,e.value4=null),this},setUniform1:function(t,e,i,n){var r=this.uniforms[e];return r?((n||r.value1!==i)&&(r.value1=i,this.renderer.setProgram(this.program),t.call(this.gl,r.location,i),this.pipeline.currentShader=this),this):this},setUniform2:function(t,e,i,n,r){var s=this.uniforms[e];return s?((r||s.value1!==i||s.value2!==n)&&(s.value1=i,s.value2=n,this.renderer.setProgram(this.program),t.call(this.gl,s.location,i,n),this.pipeline.currentShader=this),this):this},setUniform3:function(t,e,i,n,r,s){var o=this.uniforms[e];return o?((s||o.value1!==i||o.value2!==n||o.value3!==r)&&(o.value1=i,o.value2=n,o.value3=r,this.renderer.setProgram(this.program),t.call(this.gl,o.location,i,n,r),this.pipeline.currentShader=this),this):this},setUniform4:function(t,e,i,n,r,s,o){var a=this.uniforms[e];return a?((o||a.value1!==i||a.value2!==n||a.value3!==r||a.value4!==s)&&(a.value1=i,a.value2=n,a.value3=r,a.value4=s,this.renderer.setProgram(this.program),t.call(this.gl,a.location,i,n,r,s),this.pipeline.currentShader=this),this):this},set1f:function(t,e){return this.setUniform1(this.gl.uniform1f,t,e)},set2f:function(t,e,i){return this.setUniform2(this.gl.uniform2f,t,e,i)},set3f:function(t,e,i,n){return this.setUniform3(this.gl.uniform3f,t,e,i,n)},set4f:function(t,e,i,n,r){return this.setUniform4(this.gl.uniform4f,t,e,i,n,r)},set1fv:function(t,e){return this.setUniform1(this.gl.uniform1fv,t,e,!0)},set2fv:function(t,e){return this.setUniform1(this.gl.uniform2fv,t,e,!0)},set3fv:function(t,e){return this.setUniform1(this.gl.uniform3fv,t,e,!0)},set4fv:function(t,e){return this.setUniform1(this.gl.uniform4fv,t,e,!0)},set1iv:function(t,e){return this.setUniform1(this.gl.uniform1iv,t,e,!0)},set2iv:function(t,e){return this.setUniform1(this.gl.uniform2iv,t,e,!0)},set3iv:function(t,e){return this.setUniform1(this.gl.uniform3iv,t,e,!0)},set4iv:function(t,e){return this.setUniform1(this.gl.uniform4iv,t,e,!0)},set1i:function(t,e){return this.setUniform1(this.gl.uniform1i,t,e)},set2i:function(t,e,i){return this.setUniform2(this.gl.uniform2i,t,e,i)},set3i:function(t,e,i,n){return this.setUniform3(this.gl.uniform3i,t,e,i,n)},set4i:function(t,e,i,n,r){return this.setUniform4(this.gl.uniform4i,t,e,i,n,r)},setMatrix2fv:function(t,e,i){return this.setUniform2(this.gl.uniformMatrix2fv,t,e,i,!0)},setMatrix3fv:function(t,e,i){return this.setUniform2(this.gl.uniformMatrix3fv,t,e,i,!0)},setMatrix4fv:function(t,e,i){return this.setUniform2(this.gl.uniformMatrix4fv,t,e,i,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});t.exports=o},function(t,e,i){var n=i(0),r=i(74),s=i(1),o=i(591),a=i(592),h=i(24),l=i(73),u=i(35),c=new n({Extends:u,initialize:function(t){t.fragShader=s(t,"fragShader",o),t.vertShader=s(t,"vertShader",a),t.attributes=s(t,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:l.UNSIGNED_BYTE,normalized:!0}]),u.call(this,t),this.calcMatrix=new h,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(t,e,i,n,r,s){this.renderer.pipelines.set(this);var o=this.calcMatrix;s&&s.multiply(r,o);var a=t+i,h=e+n,l=o.getX(t,e),u=o.getY(t,e),c=o.getX(t,h),d=o.getY(t,h),p=o.getX(a,h),f=o.getY(a,h),m=o.getX(a,e),g=o.getY(a,e),v=this.fillTint;this.batchQuad(l,u,c,d,p,f,m,g,v.TL,v.TR,v.BL,v.BR)},batchFillTriangle:function(t,e,i,n,r,s,o,a){this.renderer.pipelines.set(this);var h=this.calcMatrix;a&&a.multiply(o,h);var l=h.getX(t,e),u=h.getY(t,e),c=h.getX(i,n),d=h.getY(i,n),p=h.getX(r,s),f=h.getY(r,s),m=this.fillTint;this.batchTri(l,u,c,d,p,f,m.TL,m.TR,m.BL)},batchStrokeTriangle:function(t,e,i,n,r,s,o,a,h){var l=this.tempTriangle;l[0].x=t,l[0].y=e,l[0].width=o,l[1].x=i,l[1].y=n,l[1].width=o,l[2].x=r,l[2].y=s,l[2].width=o,l[3].x=t,l[3].y=e,l[3].width=o,this.batchStrokePath(l,o,!1,a,h)},batchFillPath:function(t,e,i){this.renderer.pipelines.set(this);var n=this.calcMatrix;i&&i.multiply(e,n);for(var s,o,a=t.length,h=this.polygonCache,l=this.fillTint.TL,u=this.fillTint.TR,c=this.fillTint.BL,d=0;d<a;++d)o=t[d],h.push(o.x,o.y);a=(s=r(h)).length;for(var p=0;p<a;p+=3){var f=2*s[p+0],m=2*s[p+1],g=2*s[p+2],v=h[f+0],y=h[f+1],A=h[m+0],x=h[m+1],w=h[g+0],b=h[g+1],S=n.getX(v,y),E=n.getY(v,y),T=n.getX(A,x),_=n.getY(A,x),M=n.getX(w,b),C=n.getY(w,b);this.batchTri(S,E,T,_,M,C,l,u,c)}h.length=0},batchStrokePath:function(t,e,i,n,r){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var s=t.length-1,o=0;o<s;o++){var a=t[o],h=t[o+1];this.batchLine(a.x,a.y,h.x,h.y,a.width/2,h.width/2,e,o,!i&&o===s-1,n,r)}},batchLine:function(t,e,i,n,r,s,o,a,h,l,u){this.renderer.pipelines.set(this);var c=this.calcMatrix;u&&u.multiply(l,c);var d=i-t,p=n-e,f=Math.sqrt(d*d+p*p),m=r*(n-e)/f,g=r*(t-i)/f,v=s*(n-e)/f,y=s*(t-i)/f,A=i-v,x=n-y,w=t-m,b=e-g,S=i+v,E=n+y,T=t+m,_=e+g,M=c.getX(A,x),C=c.getY(A,x),P=c.getX(w,b),R=c.getY(w,b),O=c.getX(S,E),L=c.getY(S,E),I=c.getX(T,_),D=c.getY(T,_),B=this.strokeTint,k=B.TL,F=B.TR,N=B.BL,z=B.BR;if(this.batchQuad(I,D,P,R,M,C,O,L,k,F,N,z),!(o<=2)){var U=this.prevQuad,G=this.firstQuad;a>0&&U[4]?this.batchQuad(I,D,P,R,U[0],U[1],U[2],U[3],k,F,N,z):(G[0]=I,G[1]=D,G[2]=P,G[3]=R,G[4]=1),h&&G[4]?this.batchQuad(M,C,O,L,G[0],G[1],G[2],G[3],k,F,N,z):(U[0]=M,U[1]=C,U[2]=O,U[3]=L,U[4]=1)}},batchVert:function(t,e,i){var n=this.vertexViewF32,r=this.vertexViewU32,s=this.vertexCount*this.currentShader.vertexComponentCount-1;n[++s]=t,n[++s]=e,r[++s]=i,this.vertexCount++},batchQuad:function(t,e,i,n,r,s,o,a,h,l,u,c){var d=!1;return this.shouldFlush(6)&&(this.flush(),d=!0),this.batchVert(t,e,h),this.batchVert(i,n,u),this.batchVert(r,s,c),this.batchVert(t,e,h),this.batchVert(r,s,c),this.batchVert(o,a,l),d},batchTri:function(t,e,i,n,r,s,o,a,h){var l=!1;return this.shouldFlush(3)&&(this.flush(),l=!0),this.batchVert(t,e,o),this.batchVert(i,n,a),this.batchVert(r,s,h),l},destroy:function(){return u.prototype.destroy.call(this),this.polygonCache=null,this}});t.exports=c},function(t,e,i){var n=i(0),r=i(1),s=i(593),o=i(75),a=i(5),h=i(35),l=10,u=new a,c=new n({Extends:o,initialize:function(t){l=t.game.renderer.config.maxLights;for(var e=r(t,"fragShader",s),i=[],n=1;n<=l;n++)i.push({name:"lights"+n,fragShader:e.replace("%LIGHT_COUNT%",n.toString())});t.shaders=i,o.call(this,t),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){h.prototype.boot.call(this);var t=this.gl,e=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:e};for(var i=0;i<this.shaders.length;i++)this["lightShader"+(i+1)]=this.shaders[i]},onRender:function(t,e){var i=t.sys.lights;if(this.lightsActive=!1,i&&i.active){var n=i.getLights(e),r=n.length;if(0!==r){var s;this.lightsActive=!0,this.setShader(this["lightShader"+r],!0);var o=this.renderer.height,a=e.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",e.x,e.y,e.rotation,e.zoom),this.set3f("uAmbientLightColor",i.ambientColor.r,i.ambientColor.g,i.ambientColor.b),s=0;s<r;s++){var h=n[s].light,l=h.color,c="uLights["+s+"].";a.transformPoint(h.x,h.y,u),this.set2f(c+"position",u.x-e.scrollX*h.scrollFactorX*e.zoom,o-(u.y-e.scrollY*h.scrollFactorY*e.zoom)),this.set3f(c+"color",l.r,l.g,l.b),this.set1f(c+"intensity",h.intensity),this.set1f(c+"radius",h.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(t){if(t!==this.currentNormalMapRotation||0===this.vertexCount){this.vertexCount>0&&this.flush();var e=this.inverseRotationMatrix;if(t){var i=-t,n=Math.cos(i),r=Math.sin(i);e[1]=r,e[3]=-r,e[0]=e[4]=n}else e[0]=e[4]=1,e[1]=e[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,e),this.currentNormalMapRotation=t}},setTexture2D:function(t,e){var i=this.renderer;void 0===t&&(t=i.tempTextures[0]);var n=this.getNormalMap(e);i.isNewNormalMap(t,n)&&(this.flush(),i.setTextureZero(t),i.setNormalMap(n));var r=e?e.rotation:0;return this.setNormalMapRotation(r),this.currentUnit=0,0},setGameObject:function(t,e){void 0===e&&(e=t.frame);var i=this.renderer,n=e.glTexture,r=this.getNormalMap(t);return i.isNewNormalMap()&&(this.flush(),i.setTextureZero(n),i.setNormalMap(r)),this.setNormalMapRotation(t.rotation),this.currentUnit=0,0},getNormalMap:function(t){var e;return t?t.displayTexture?e=t.displayTexture.dataSource[t.displayFrame.sourceIndex]:t.texture?e=t.texture.dataSource[t.frame.sourceIndex]:t.tileset&&(e=Array.isArray(t.tileset)?t.tileset[0].image.dataSource[0]:t.tileset.image.dataSource[0]):e=this.defaultNormalMap,e||(e=this.defaultNormalMap),e.glTexture},batchSprite:function(t,e,i){this.lightsActive&&o.prototype.batchSprite.call(this,t,e,i)},batchTexture:function(t,e,i,n,r,s,a,h,l,u,c,d,p,f,m,g,v,y,A,x,w,b,S,E,T,_,M,C,P,R,O,L){this.lightsActive&&o.prototype.batchTexture.call(this,t,e,i,n,r,s,a,h,l,u,c,d,p,f,m,g,v,y,A,x,w,b,S,E,T,_,M,C,P,R,O,L)},batchTextureFrame:function(t,e,i,n,r,s,a){this.lightsActive&&o.prototype.batchTextureFrame.call(this,t,e,i,n,r,s,a)}});c.LIGHT_COUNT=l,t.exports=c},function(t,e,i){var n=i(0),r=i(1),s=i(596),o=i(597),a=i(35),h=new n({Extends:a,initialize:function(t){t.vertShader=r(t,"vertShader",o),t.fragShader=r(t,"fragShader",s),t.attributes=r(t,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),a.call(this,t)},onRender:function(t,e){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",e.zoom)},batchPointLight:function(t,e,i,n,r,s,o,a,h,l,u,c){var d=t.color,p=t.intensity,f=t.radius,m=t.attenuation,g=d.r*p,v=d.g*p,y=d.b*p,A=e.alpha*t.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(i,n,u,c,f,m,g,v,y,A),this.batchLightVert(r,s,u,c,f,m,g,v,y,A),this.batchLightVert(o,a,u,c,f,m,g,v,y,A),this.batchLightVert(i,n,u,c,f,m,g,v,y,A),this.batchLightVert(o,a,u,c,f,m,g,v,y,A),this.batchLightVert(h,l,u,c,f,m,g,v,y,A)},batchLightVert:function(t,e,i,n,r,s,o,a,h,l){var u=this.vertexViewF32,c=this.vertexCount*this.currentShader.vertexComponentCount-1;u[++c]=t,u[++c]=e,u[++c]=i,u[++c]=n,u[++c]=r,u[++c]=s,u[++c]=o,u[++c]=a,u[++c]=h,u[++c]=l,this.vertexCount++}});t.exports=h},function(t,e,i){var n=i(0),r=i(1),s=i(75),o=new n({Extends:s,initialize:function(t){t.topology=5,t.batchSize=r(t,"batchSize",256),s.call(this,t)}});t.exports=o},function(t,e,i){var n=i(0),r=i(1),s=i(75),o=i(598),a=i(599),h=i(35),l=new n({Extends:s,initialize:function(t){t.fragShader=r(t,"fragShader",o),t.vertShader=r(t,"vertShader",a),t.forceZero=!0,s.call(this,t)},boot:function(){h.prototype.boot.call(this),this.set1i("uMainSampler",0)}});t.exports=l},function(t,e,i){var n=i(600),r=i(47),s=i(0),o=i(127),a=i(601),h=i(602),l=i(1),u=i(603),c=i(241),d=i(35),p=new s({Extends:d,initialize:function(t){t.renderTarget=l(t,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),t.vertShader=l(t,"vertShader",c),t.shaders=l(t,"shaders",[{name:"Copy",fragShader:h},{name:"AddBlend",fragShader:n},{name:"LinearBlend",fragShader:u},{name:"ColorMatrix",fragShader:a}]),t.attributes=l(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],t.batchSize=1,d.call(this,t),this.colorMatrix=new o,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){d.prototype.boot.call(this);var t=this.shaders,e=this.renderTargets;this.copyShader=t[0],this.addShader=t[1],this.linearShader=t[2],this.colorMatrixShader=t[3],this.fullFrame1=e[0],this.fullFrame2=e[1],this.halfFrame1=e[2],this.halfFrame2=e[3]},copyFrame:function(t,e,i,n,r){void 0===i&&(i=1),void 0===n&&(n=!0),void 0===r&&(r=!0);var s=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",i),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,t.texture),e?(s.viewport(0,0,e.width,e.height),s.bindFramebuffer(s.FRAMEBUFFER,e.framebuffer),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,e.texture,0)):s.viewport(0,0,t.width,t.height),n&&(r?s.clearColor(0,0,0,0):s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT)),s.bufferData(s.ARRAY_BUFFER,this.vertexData,s.STATIC_DRAW),s.drawArrays(s.TRIANGLES,0,6),s.bindFramebuffer(s.FRAMEBUFFER,null),s.bindTexture(s.TEXTURE_2D,null)},blitFrame:function(t,e,i,n,s,o){void 0===i&&(i=1),void 0===n&&(n=!0),void 0===s&&(s=!0),void 0===o&&(o=!1);var a=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",i),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,t.texture),t.height>e.height)a.viewport(0,0,t.width,t.height),this.setTargetUVs(t,e);else{var h=e.height-t.height;a.viewport(0,h,t.width,t.height)}if(a.bindFramebuffer(a.FRAMEBUFFER,e.framebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,e.texture,0),n&&(s?a.clearColor(0,0,0,0):a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT)),o){var l=this.renderer.currentBlendMode;this.renderer.setBlendMode(r.ERASE)}a.bufferData(a.ARRAY_BUFFER,this.vertexData,a.STATIC_DRAW),a.drawArrays(a.TRIANGLES,0,6),o&&this.renderer.setBlendMode(l),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindTexture(a.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(t,e,i,n,r,s,o,a){void 0===o&&(o=!0),void 0===a&&(a=!0);var h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,t.framebuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,t.texture,0),o&&(a?h.clearColor(0,0,0,0):h.clearColor(0,0,0,1),h.clear(h.COLOR_BUFFER_BIT)),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,e.texture),h.copyTexSubImage2D(h.TEXTURE_2D,0,0,0,i,n,r,s),h.bindFramebuffer(h.FRAMEBUFFER,null),h.bindTexture(h.TEXTURE_2D,null)},copyToGame:function(t){var e=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t.texture),e.bufferData(e.ARRAY_BUFFER,this.vertexData,e.STATIC_DRAW),e.drawArrays(e.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(t,e,i,n){void 0===i&&(i=!0),void 0===n&&(n=this.colorMatrix);var r=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",n.getData()),this.set1f("uAlpha",n.alpha),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t.texture),e?(r.viewport(0,0,e.width,e.height),r.bindFramebuffer(r.FRAMEBUFFER,e.framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.texture,0)):r.viewport(0,0,t.width,t.height),i?r.clearColor(0,0,0,0):r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT),r.bufferData(r.ARRAY_BUFFER,this.vertexData,r.STATIC_DRAW),r.drawArrays(r.TRIANGLES,0,6),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindTexture(r.TEXTURE_2D,null)},blendFrames:function(t,e,i,n,r,s){void 0===n&&(n=1),void 0===r&&(r=!0),void 0===s&&(s=this.linearShader);var o=this.gl;this.setShader(s),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",n),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.texture),o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,e.texture),i?(o.bindFramebuffer(o.FRAMEBUFFER,i.framebuffer),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,i.texture,0),o.viewport(0,0,i.width,i.height)):o.viewport(0,0,t.width,t.height),r?o.clearColor(0,0,0,0):o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT),o.bufferData(o.ARRAY_BUFFER,this.vertexData,o.STATIC_DRAW),o.drawArrays(o.TRIANGLES,0,6),o.bindFramebuffer(o.FRAMEBUFFER,null),o.bindTexture(o.TEXTURE_2D,null)},blendFramesAdditive:function(t,e,i,n,r){this.blendFrames(t,e,i,n,r,this.addShader)},clearFrame:function(t,e){void 0===e&&(e=!0);var i=this.gl;i.viewport(0,0,t.width,t.height),i.bindFramebuffer(i.FRAMEBUFFER,t.framebuffer),e?i.clearColor(0,0,0,0):i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT);var n=this.renderer.currentFramebuffer;i.bindFramebuffer(i.FRAMEBUFFER,n)},setUVs:function(t,e,i,n,r,s,o,a){var h=this.vertexViewF32;h[2]=t,h[3]=e,h[6]=i,h[7]=n,h[10]=r,h[11]=s,h[14]=t,h[15]=e,h[18]=r,h[19]=s,h[22]=o,h[23]=a},setTargetUVs:function(t,e){var i=e.height/t.height;i=i>.5?.5-(i-.5):.5-i+.5,this.setUVs(0,i,0,1+i,1,1+i,1,i)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});t.exports=p},function(t,e){t.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join("\n")},function(t,e,i){var n=i(17),r=i(26),s=i(1);t.exports=function(t,e){var i=t.getContext("experimental-webgl"),o=s(e,"callback"),a=s(e,"type","image/png"),h=s(e,"encoder",.92),l=s(e,"x",0),u=s(e,"y",0),c=s(e,"getPixel",!1),d=s(e,"isFramebuffer",!1),p=d?s(e,"bufferWidth",1):i.drawingBufferWidth,f=d?s(e,"bufferHeight",1):i.drawingBufferHeight;if(c){var m=new Uint8Array(4),g=d?u:f-u;i.readPixels(l,g,1,1,i.RGBA,i.UNSIGNED_BYTE,m),o.call(null,new r(m[0],m[1],m[2],m[3]/255))}else{var v=s(e,"width",p),y=s(e,"height",f),A=new Uint8Array(v*y*4);i.readPixels(l,f-u-y,v,y,i.RGBA,i.UNSIGNED_BYTE,A);for(var x=n.createWebGL(this,v,y),w=x.getContext("2d"),b=w.getImageData(0,0,v,y),S=b.data,E=0;E<y;E++)for(var T=0;T<v;T++){var _=4*((y-E-1)*v+T),M=4*(E*v+T);S[M+0]=A[_+0],S[M+1]=A[_+1],S[M+2]=A[_+2],S[M+3]=A[_+3]}w.putImageData(b,0,0);var C=new Image;C.onerror=function(){o.call(null),n.remove(x)},C.onload=function(){o.call(null,C),n.remove(x)},C.src=x.toDataURL(a,h)}}},function(t,e,i){var n=i(0),r=i(604),s=new n({initialize:function(t,e){this.parent=t,this.events=e,e||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(r.DESTROY,this.destroy,this)},get:function(t){var e=this.list;if(Array.isArray(t)){for(var i=[],n=0;n<t.length;n++)i.push(e[t[n]]);return i}return e[t]},getAll:function(){var t={};for(var e in this.list)this.list.hasOwnProperty(e)&&(t[e]=this.list[e]);return t},query:function(t){var e={};for(var i in this.list)this.list.hasOwnProperty(i)&&i.match(t)&&(e[i]=this.list[i]);return e},set:function(t,e){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,e);for(var i in t)this.setValue(i,t[i]);return this},inc:function(t,e){if(this._frozen)return this;void 0===e&&(e=1);var i=this.get(t);return void 0===i&&(i=0),this.set(t,i+e),this},toggle:function(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function(t,e){if(this._frozen)return this;if(this.has(t))this.values[t]=e;else{var i=this,n=this.list,s=this.events,o=this.parent;Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function(){return n[t]},set:function(e){if(!i._frozen){var a=n[t];n[t]=e,s.emit(r.CHANGE_DATA,o,t,e,a),s.emit(r.CHANGE_DATA_KEY+t,o,e,a)}}}),n[t]=e,s.emit(r.SET_DATA,o,t,e)}return this},each:function(t,e){for(var i=[this.parent,null,void 0],n=1;n<arguments.length;n++)i.push(arguments[n]);for(var r in this.list)i[1]=r,i[2]=this.list[r],t.apply(e,i);return this},merge:function(t,e){for(var i in void 0===e&&(e=!0),t)t.hasOwnProperty(i)&&(e||!e&&!this.has(i))&&this.setValue(i,t[i]);return this},remove:function(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var e=0;e<t.length;e++)this.removeValue(t[e]);return this},removeValue:function(t){if(this.has(t)){var e=this.list[t];delete this.list[t],delete this.values[t],this.events.emit(r.REMOVE_DATA,this.parent,t,e)}return this},pop:function(t){var e=void 0;return!this._frozen&&this.has(t)&&(e=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(r.REMOVE_DATA,this.parent,t,e)),e},has:function(t){return this.list.hasOwnProperty(t)},setFreeze:function(t){return this._frozen=t,this},reset:function(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(r.CHANGE_DATA),this.events.off(r.SET_DATA),this.events.off(r.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(t){this._frozen=!!t}},count:{get:function(){var t=0;for(var e in this.list)void 0!==this.list[e]&&t++;return t}}});t.exports=s},function(t,e,i){var n=i(0),r=i(128),s=i(9),o=i(45),a=i(14),h=i(245),l=i(246),u=i(247),c=i(248),d=i(24),p=i(112),f=new n({initialize:function(t,e){this.game=t,this.scaleManager,this.canvas,this.config=e,this.enabled=!0,this.events=new s,this.isOver=!0,this.defaultCursor="",this.keyboard=e.inputKeyboard?new h(this):null,this.mouse=e.inputMouse?new l(this):null,this.touch=e.inputTouch?new c(this):null,this.pointers=[],this.pointersTotal=e.inputActivePointers,e.inputTouch&&1===this.pointersTotal&&(this.pointersTotal=2);for(var i=0;i<=this.pointersTotal;i++){var n=new u(this,i);n.smoothFactor=e.inputSmoothFactor,this.pointers.push(n)}this.mousePointer=e.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new d,this._tempMatrix2=new d,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],t.events.once(a.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(o.MANAGER_BOOT),this.game.events.on(a.PRE_RENDER,this.preRender,this),this.game.events.once(a.DESTROY,this.destroy,this)},setCanvasOver:function(t){this.isOver=!0,this.events.emit(o.GAME_OVER,t)},setCanvasOut:function(t){this.isOver=!1,this.events.emit(o.GAME_OUT,t)},preRender:function(){var t=this.game.loop.now,e=this.game.loop.delta,i=this.game.scene.getScenes(!0,!0);this.time=t,this.events.emit(o.MANAGER_UPDATE);for(var n=0;n<i.length;n++){var r=i[n];if(r.sys.input&&r.sys.input.updatePoll(t,e)&&this.globalTopOnly)return}},setDefaultCursor:function(t){this.defaultCursor=t,this.canvas.style.cursor!==t&&(this.canvas.style.cursor=t)},setCursor:function(t){t.cursor&&(this.canvas.style.cursor=t.cursor)},resetCursor:function(t){t.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(t){void 0===t&&(t=1);var e=[];this.pointersTotal+t>10&&(t=10-this.pointersTotal);for(var i=0;i<t;i++){var n=this.pointers.length,r=new u(this,n);r.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(r),this.pointersTotal++,e.push(r)}return e},updateInputPlugins:function(t,e){var i=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var n=0;n<i.length;n++){var r=i[n];if(r.sys.input&&(r.sys.input.update(t,e)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function(t){for(var e=this.pointers,i=[],n=0;n<t.changedTouches.length;n++)for(var s=t.changedTouches[n],o=1;o<this.pointersTotal;o++){var a=e[o];if(!a.active){a.touchstart(s,t),this.activePointer=a,i.push(a);break}}this.updateInputPlugins(r.TOUCH_START,i)},onTouchMove:function(t){for(var e=this.pointers,i=[],n=0;n<t.changedTouches.length;n++)for(var s=t.changedTouches[n],o=1;o<this.pointersTotal;o++){var a=e[o];if(a.active&&a.identifier===s.identifier){a.touchmove(s,t),this.activePointer=a,i.push(a);break}}this.updateInputPlugins(r.TOUCH_MOVE,i)},onTouchEnd:function(t){for(var e=this.pointers,i=[],n=0;n<t.changedTouches.length;n++)for(var s=t.changedTouches[n],o=1;o<this.pointersTotal;o++){var a=e[o];if(a.active&&a.identifier===s.identifier){a.touchend(s,t),i.push(a);break}}this.updateInputPlugins(r.TOUCH_END,i)},onTouchCancel:function(t){for(var e=this.pointers,i=[],n=0;n<t.changedTouches.length;n++)for(var s=t.changedTouches[n],o=1;o<this.pointersTotal;o++){var a=e[o];if(a.active&&a.identifier===s.identifier){a.touchcancel(s,t),i.push(a);break}}this.updateInputPlugins(r.TOUCH_CANCEL,i)},onMouseDown:function(t){var e=this.mousePointer;e.down(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(r.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(t){var e=this.mousePointer;e.move(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(r.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(t){var e=this.mousePointer;e.up(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(r.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(t){var e=this.mousePointer;e.wheel(t),this.activePointer=e,this.updateInputPlugins(r.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(t){var e=this.mouse.locked;this.mousePointer.locked=e,this.events.emit(o.POINTERLOCK_CHANGE,t,e)},inputCandidate:function(t,e){var i=t.input;if(!i||!i.enabled||!i.alwaysEnabled&&!t.willRender(e))return!1;var n=!0,r=t.parentContainer;if(r)do{if(!r.willRender(e)){n=!1;break}r=r.parentContainer}while(r);return n},hitTest:function(t,e,i,n){void 0===n&&(n=this._tempHitTest);var r=this._tempPoint,s=i.scrollX,o=i.scrollY;n.length=0;var a=t.x,h=t.y;i.getWorldPoint(a,h,r),t.worldX=r.x,t.worldY=r.y;for(var l={x:0,y:0},u=this._tempMatrix,c=this._tempMatrix2,d=0;d<e.length;d++){var f=e[d];if(this.inputCandidate(f,i)){var m=r.x+s*f.scrollFactorX-s,g=r.y+o*f.scrollFactorY-o;f.parentContainer?(f.getWorldTransformMatrix(u,c),u.applyInverse(m,g,l)):p(m,g,f.x,f.y,f.rotation,f.scaleX,f.scaleY,l),this.pointWithinHitArea(f,l.x,l.y)&&n.push(f)}}return n},pointWithinHitArea:function(t,e,i){e+=t.displayOriginX,i+=t.displayOriginY;var n=t.input;return!(!n||!n.hitAreaCallback(n.hitArea,e,i,t)||(n.localX=e,n.localY=i,0))},pointWithinInteractiveObject:function(t,e,i){return!!t.hitArea&&(e+=t.gameObject.displayOriginX,i+=t.gameObject.displayOriginY,t.localX=e,t.localY=i,t.hitAreaCallback(t.hitArea,e,i,t))},transformPointer:function(t,e,i,n){var r=t.position,s=t.prevPosition;s.x=r.x,s.y=r.y;var o=this.scaleManager.transformX(e),a=this.scaleManager.transformY(i),h=t.smoothFactor;n&&0!==h?(r.x=o*h+s.x*(1-h),r.y=a*h+s.y*(1-h)):(r.x=o,r.y=a)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(a.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var t=0;t<this.pointers.length;t++)this.pointers[t].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});t.exports=f},function(t,e,i){var n=i(54),r=i(0),s=i(14),o=i(45),a=i(91),h=i(4),l=new r({initialize:function(t){this.manager=t,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=h,this.onKeyUp=h,t.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputKeyboard,this.target=t.inputKeyboardEventTarget,this.addCapture(t.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(s.POST_STEP,this.postUpdate,this)},startListeners:function(){var t=this;this.onKeyDown=function(e){if(!e.defaultPrevented&&t.enabled&&t.manager){t.queue.push(e),t.manager.events.emit(o.MANAGER_PROCESS);var i=e.altKey||e.ctrlKey||e.shiftKey||e.metaKey;t.preventDefault&&!i&&t.captures.indexOf(e.keyCode)>-1&&e.preventDefault()}},this.onKeyUp=function(e){if(!e.defaultPrevented&&t.enabled&&t.manager){t.queue.push(e),t.manager.events.emit(o.MANAGER_PROCESS);var i=e.altKey||e.ctrlKey||e.shiftKey||e.metaKey;t.preventDefault&&!i&&t.captures.indexOf(e.keyCode)>-1&&e.preventDefault()}};var e=this.target;e&&(e.addEventListener("keydown",this.onKeyDown,!1),e.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var t=this.target;t.removeEventListener("keydown",this.onKeyDown,!1),t.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var e=this.captures,i=0;i<t.length;i++){var n=t[i];"string"==typeof n&&(n=a[n.trim().toUpperCase()]),-1===e.indexOf(n)&&e.push(n)}this.preventDefault=e.length>0},removeCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var e=this.captures,i=0;i<t.length;i++){var r=t[i];"string"==typeof r&&(r=a[r.toUpperCase()]),n(e,r)}this.preventDefault=e.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(s.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});t.exports=l},function(t,e,i){var n=i(0),r=i(119),s=i(45),o=i(4),a=new n({initialize:function(t){this.manager=t,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=o,this.onMouseDown=o,this.onMouseUp=o,this.onMouseDownWindow=o,this.onMouseUpWindow=o,this.onMouseOver=o,this.onMouseOut=o,this.onMouseWheel=o,this.pointerLockChange=o,this.isTop=!0,t.events.once(s.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputMouse,this.target=t.inputMouseEventTarget,this.passive=t.inputMousePassive,this.preventDefaultDown=t.inputMousePreventDefaultDown,this.preventDefaultUp=t.inputMousePreventDefaultUp,this.preventDefaultMove=t.inputMousePreventDefaultMove,this.preventDefaultWheel=t.inputMousePreventDefaultWheel,this.target?"string"==typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},requestPointerLock:function(){if(r.pointerLock){var t=this.target;t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock()}},releasePointerLock:function(){r.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var t=this.target;if(t){var e=this,i=this.manager,n=i.canvas,s=window&&window.focus&&i.game.config.autoFocus;this.onMouseMove=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&(i.onMouseMove(t),e.preventDefaultMove&&t.preventDefault())},this.onMouseDown=function(t){s&&window.focus(),!t.defaultPrevented&&e.enabled&&i&&i.enabled&&(i.onMouseDown(t),e.preventDefaultDown&&t.target===n&&t.preventDefault())},this.onMouseDownWindow=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&t.target!==n&&i.onMouseDown(t)},this.onMouseUp=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&(i.onMouseUp(t),e.preventDefaultUp&&t.target===n&&t.preventDefault())},this.onMouseUpWindow=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&t.target!==n&&i.onMouseUp(t)},this.onMouseOver=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&i.setCanvasOver(t)},this.onMouseOut=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&i.setCanvasOut(t)},this.onMouseWheel=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&i.onMouseWheel(t),e.preventDefaultWheel&&t.target===n&&t.preventDefault()};var o={passive:!0};if(t.addEventListener("mousemove",this.onMouseMove),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("mouseup",this.onMouseUp),t.addEventListener("mouseover",this.onMouseOver,o),t.addEventListener("mouseout",this.onMouseOut,o),this.preventDefaultWheel?t.addEventListener("wheel",this.onMouseWheel,{passive:!1}):t.addEventListener("wheel",this.onMouseWheel,o),window&&i.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,o),window.top.addEventListener("mouseup",this.onMouseUpWindow,o)}catch(t){window.addEventListener("mousedown",this.onMouseDownWindow,o),window.addEventListener("mouseup",this.onMouseUpWindow,o),this.isTop=!1}r.pointerLock&&(this.pointerLockChange=function(t){var n=e.target;e.locked=document.pointerLockElement===n||document.mozPointerLockElement===n||document.webkitPointerLockElement===n,i.onPointerLockChange(t)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mouseover",this.onMouseOver),t.removeEventListener("mouseout",this.onMouseOut),window&&((t=this.isTop?window.top:window).removeEventListener("mousedown",this.onMouseDownWindow),t.removeEventListener("mouseup",this.onMouseUpWindow)),r.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=a},function(t,e,i){var n=i(212),r=i(0),s=i(71),o=i(109),a=i(219),h=i(5),l=i(70),u=new r({initialize:function(t,e){this.manager=t,this.id=e,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new h,this.prevPosition=new h,this.midPoint=new h(-1,-1),this.velocity=new h,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=0===e,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(t){var e=t.getWorldPoint(this.x,this.y);return this.worldX=e.x,this.worldY=e.y,this},positionToCamera:function(t,e){return t.getWorldPoint(this.x,this.y,e)},updateMotion:function(){var t=this.position.x,e=this.position.y,i=this.midPoint.x,r=this.midPoint.y;if(t!==i||e!==r){var s=a(this.motionFactor,i,t),h=a(this.motionFactor,r,e);o(s,t,.1)&&(s=t),o(h,e,.1)&&(h=e),this.midPoint.set(s,h);var l=t-s,u=e-h;this.velocity.set(l,u),this.angle=n(s,h,t,e),this.distance=Math.sqrt(l*l+u*u)}},up:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),0===this.buttons&&(this.isDown=!1,this.upTime=t.timeStamp,this.wasTouch=!1)},down:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),l.macOS&&t.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=t.timeStamp),this.wasTouch=!1},move:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.locked&&(this.movementX=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.movementY=t.movementY||t.mozMovementY||t.webkitMovementY||0),this.moveTime=t.timeStamp,this.wasTouch=!1},wheel:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.deltaX=t.deltaX,this.deltaY=t.deltaY,this.deltaZ=t.deltaZ,this.wasTouch=!1},touchstart:function(t,e){t.pointerId&&(this.pointerId=t.pointerId),this.identifier=t.identifier,this.target=t.target,this.active=!0,this.buttons=1,this.event=e,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=e.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(t,e){this.event=e,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.moveTime=e.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(t,e){this.buttons=0,this.event=e,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=e.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(t,e){this.buttons=0,this.event=e,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=e.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return 0===this.buttons},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return 0===this.button&&!this.isDown},rightButtonReleased:function(){return 2===this.button&&!this.isDown},middleButtonReleased:function(){return 1===this.button&&!this.isDown},backButtonReleased:function(){return 3===this.button&&!this.isDown},forwardButtonReleased:function(){return 4===this.button&&!this.isDown},getDistance:function(){return this.isDown?s(this.downX,this.downY,this.x,this.y):s(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?n(this.downX,this.downY,this.x,this.y):n(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(t,e){void 0===t&&(t=10),void 0===e&&(e=[]);for(var i=this.prevPosition.x,n=this.prevPosition.y,r=this.position.x,s=this.position.y,o=0;o<t;o++){var h=1/t*o;e[o]={x:a(h,i,r),y:a(h,n,s)}}return e},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},time:{get:function(){return this.event?this.event.timeStamp:0}}});t.exports=u},function(t,e,i){var n=i(0),r=i(45),s=i(4),o=new n({initialize:function(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=s,this.onTouchStartWindow=s,this.onTouchMove=s,this.onTouchEnd=s,this.onTouchEndWindow=s,this.onTouchCancel=s,this.onTouchCancelWindow=s,this.onTouchOver=s,this.onTouchOut=s,t.events.once(r.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputTouch,this.target=t.inputTouchEventTarget,this.capture=t.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},startListeners:function(){var t=this,e=this.manager.canvas,i=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(n){i&&window.focus(),!n.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchStart(n),t.capture&&n.cancelable&&n.target===e&&n.preventDefault())},this.onTouchStartWindow=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&i.target!==e&&t.manager.onTouchStart(i)},this.onTouchMove=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchMove(e),t.capture&&e.cancelable&&e.preventDefault())},this.onTouchEnd=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchEnd(i),t.capture&&i.cancelable&&i.target===e&&i.preventDefault())},this.onTouchEndWindow=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&i.target!==e&&t.manager.onTouchEnd(i)},this.onTouchCancel=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchCancel(e),t.capture&&e.preventDefault())},this.onTouchCancelWindow=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.onTouchCancel(e)},this.onTouchOver=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOver(e)},this.onTouchOut=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOut(e)};var n=this.target;if(n){var r={passive:!0},s={passive:!1};n.addEventListener("touchstart",this.onTouchStart,this.capture?s:r),n.addEventListener("touchmove",this.onTouchMove,this.capture?s:r),n.addEventListener("touchend",this.onTouchEnd,this.capture?s:r),n.addEventListener("touchcancel",this.onTouchCancel,this.capture?s:r),n.addEventListener("touchover",this.onTouchOver,this.capture?s:r),n.addEventListener("touchout",this.onTouchOut,this.capture?s:r),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,s),window.addEventListener("touchend",this.onTouchEndWindow,s),window.addEventListener("touchcancel",this.onTouchCancelWindow,s)),this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchCancel),t.removeEventListener("touchover",this.onTouchOver),t.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=o},function(t,e,i){var n=i(0),r=i(14),s=i(9),o=i(3),a=i(36),h=i(21),l=i(1),u=i(16),c=i(54),d=new n({Extends:s,initialize:function(t){s.call(this),this.game=t,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],t.isBooted?this.boot():t.events.once(r.BOOT,this.boot,this)},boot:function(){var t,e,i,n,s,o,a,h=this.game.config,u=h.installGlobalPlugins;for(u=u.concat(this._pendingGlobal),t=0;t<u.length;t++)e=u[t],i=l(e,"key",null),n=l(e,"plugin",null),s=l(e,"start",!1),o=l(e,"mapping",null),a=l(e,"data",null),i&&n&&this.install(i,n,s,o,a);for(u=(u=h.installScenePlugins).concat(this._pendingScene),t=0;t<u.length;t++)e=u[t],i=l(e,"key",null),n=l(e,"plugin",null),o=l(e,"mapping",null),i&&n&&this.installScenePlugin(i,n,o);this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(r.DESTROY,this.destroy,this)},addToScene:function(t,e,i){var n,r,s,o=this.game,a=t.scene,h=t.settings.map,l=t.settings.isBooted;for(n=0;n<e.length;n++)o[r=e[n]]?(t[r]=o[r],h.hasOwnProperty(r)&&(a[h[r]]=t[r])):"game"===r&&h.hasOwnProperty(r)&&(a[h[r]]=o);for(var c=0;c<i.length;c++)for(s=i[c],n=0;n<s.length;n++)if(r=s[n],u.hasCore(r)){var d=u.getCore(r),p=d.mapping,f=new d.plugin(a,this,p);t[p]=f,d.custom?a[p]=f:h.hasOwnProperty(p)&&(a[h[p]]=f),l&&f.boot()}for(s=this.plugins,n=0;n<s.length;n++){var m=s[n];m.mapping&&(a[m.mapping]=m.plugin)}},getDefaultScenePlugins:function(){var t=this.game.config.defaultPlugins;return t.concat(this.scenePlugins)},installScenePlugin:function(t,e,i,n,r){if(void 0===r&&(r=!1),"function"==typeof e){if(u.hasCore(t)){if(!r&&u.hasCore(t))return}else u.register(t,e,i,!0),this.scenePlugins.push(t);if(n){var s=new e(n,this,t);n.sys[t]=s,i&&""!==i&&(n[i]=s),s.boot()}}},install:function(t,e,i,n,r){if(void 0===i&&(i=!1),void 0===n&&(n=null),void 0===r&&(r=null),"function"!=typeof e)return null;if(u.hasCustom(t))return null;if(null!==n&&(i=!0),this.game.isBooted){if(u.registerCustom(t,e,n,r),i)return this.start(t)}else this._pendingGlobal.push({key:t,plugin:e,start:i,mapping:n,data:r});return null},getIndex:function(t){for(var e=this.plugins,i=0;i<e.length;i++)if(e[i].key===t)return i;return-1},getEntry:function(t){var e=this.getIndex(t);if(-1!==e)return this.plugins[e]},isActive:function(t){var e=this.getEntry(t);return e&&e.active},start:function(t,e){void 0===e&&(e=t);var i=this.getEntry(e);return i&&!i.active?(i.active=!0,i.plugin.start()):i||(i=this.createEntry(t,e)),i?i.plugin:null},createEntry:function(t,e){var i=u.getCustom(t);if(i){var n=new i.plugin(this);i={key:e,plugin:n,active:!0,mapping:i.mapping,data:i.data},this.plugins.push(i),n.init(i.data),n.start()}return i},stop:function(t){var e=this.getEntry(t);return e&&e.active&&(e.active=!1,e.plugin.stop()),this},get:function(t,e){void 0===e&&(e=!0);var i=this.getEntry(t);if(i)return i.plugin;var n=this.getClass(t);return n&&e?(i=this.createEntry(t,t))?i.plugin:null:n||null},getClass:function(t){return u.getCustomClass(t)},removeGlobalPlugin:function(t){var e=this.getEntry(t);e&&c(this.plugins,e),u.removeCustom(t)},removeScenePlugin:function(t){c(this.scenePlugins,t),u.remove(t)},registerGameObject:function(t,e,i){return e&&h.register(t,e),i&&a.register(t,i),this},removeGameObject:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),e&&h.remove(t),i&&a.remove(t),this},registerFileType:function(t,e,i){o.register(t,e),i&&i.sys.load&&(i.sys.load[t]=e)},destroy:function(){for(var t=0;t<this.plugins.length;t++)this.plugins[t].plugin.destroy();u.destroyCustomPlugins(),this.game.noReturn&&u.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});t.exports=d},function(t,e,i){var n={CENTER:i(659),ORIENTATION:i(660),SCALE_MODE:i(661),ZOOM:i(662)};t.exports=n},function(t,e,i){var n=i(0),r=i(92),s=i(15),a=i(14),h=i(7),l=i(55),u=i(4),c=i(677),d=i(129),p=new n({initialize:function(t,e){if(this.game=t,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)this._pending.push({key:"default",scene:e[i],autoStart:0===i,data:{}})}t.events.once(a.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var t,e,i,n;for(t=0;t<this._pending.length;t++){var r;i=(e=this._pending[t]).key,(n=e.scene)instanceof c?r=this.createSceneFromInstance(i,n):"object"==o(n)?r=this.createSceneFromObject(i,n):"function"==typeof n&&(r=this.createSceneFromFunction(i,n)),i=r.sys.settings.key,this.keys[i]=r,this.scenes.push(r),this._data[i]&&(r.sys.settings.data=this._data[i].data,this._data[i].autoStart&&(e.autoStart=!0)),(e.autoStart||r.sys.settings.active)&&this._start.push(i)}for(this._pending.length=0,this._data={},this.isBooted=!0,t=0;t<this._start.length;t++)e=this._start[t],this.start(e);this._start.length=0}},processQueue:function(){var t=this._pending.length,e=this._queue.length;if(0!==t||0!==e){var i,n;if(t){for(i=0;i<t;i++)n=this._pending[i],this.add(n.key,n.scene,n.autoStart,n.data);for(i=0;i<this._start.length;i++)n=this._start[i],this.start(n);return this._start.length=0,void(this._pending.length=0)}for(i=0;i<this._queue.length;i++)this[(n=this._queue[i]).op](n.keyA,n.keyB);this._queue.length=0}},add:function(t,e,i,n){return void 0===i&&(i=!1),void 0===n&&(n={}),this.isProcessing||!this.isBooted?(this._pending.push({key:t,scene:e,autoStart:i,data:n}),this.isBooted||(this._data[t]={data:n}),null):(t=this.getKey(t,e),e instanceof c?r=this.createSceneFromInstance(t,e):"object"==o(e)?(e.key=t,r=this.createSceneFromObject(t,e)):"function"==typeof e&&(r=this.createSceneFromFunction(t,e)),r.sys.settings.data=n,t=r.sys.settings.key,this.keys[t]=r,this.scenes.push(r),(i||r.sys.settings.active)&&(this._pending.length?this._start.push(t):this.start(t)),r);var r},remove:function(t){if(this.isProcessing)this._queue.push({op:"remove",keyA:t,keyB:null});else{var e=this.getScene(t);if(!e||e.sys.isTransitioning())return this;var i=this.scenes.indexOf(e),n=e.sys.settings.key;i>-1&&(delete this.keys[n],this.scenes.splice(i,1),this._start.indexOf(n)>-1&&(i=this._start.indexOf(n),this._start.splice(i,1)),e.sys.destroy())}return this},bootScene:function(t){var e,i=t.sys,n=i.settings;i.sceneUpdate=u,t.init&&(t.init.call(t,n.data),n.status=r.INIT,n.isTransition&&i.events.emit(s.TRANSITION_INIT,n.transitionFrom,n.transitionDuration)),i.load&&(e=i.load).reset(),e&&t.preload?(t.preload.call(t),0===e.list.size?this.create(t):(n.status=r.LOADING,e.once(l.COMPLETE,this.loadComplete,this),e.start())):this.create(t)},loadComplete:function(t){this.create(t.scene)},payloadComplete:function(t){this.bootScene(t.scene)},update:function(t,e){this.processQueue(),this.isProcessing=!0;for(var i=this.scenes.length-1;i>=0;i--){var n=this.scenes[i].sys;n.settings.status>r.START&&n.settings.status<=r.RUNNING&&n.step(t,e)}},render:function(t){for(var e=0;e<this.scenes.length;e++){var i=this.scenes[e].sys;i.settings.visible&&i.settings.status>=r.LOADING&&i.settings.status<r.SLEEPING&&i.render(t)}this.isProcessing=!1},create:function(t){var e=t.sys,i=e.settings;t.create&&(i.status=r.CREATING,t.create.call(t,i.data),i.status===r.DESTROYED)||(i.isTransition&&e.events.emit(s.TRANSITION_START,i.transitionFrom,i.transitionDuration),t.update&&(e.sceneUpdate=t.update),i.status=r.RUNNING,e.events.emit(s.CREATE,t))},createSceneFromFunction:function(t,e){var i=new e;if(i instanceof c){var n=i.sys.settings.key;if(""!==n&&(t=n),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return this.createSceneFromInstance(t,i)}return i.sys=new d(i),i.sys.settings.key=t,i.sys.init(this.game),i},createSceneFromInstance:function(t,e){return""===e.sys.settings.key&&(e.sys.settings.key=t),e.sys.init(this.game),e},createSceneFromObject:function(t,e){var i=new c(e),n=i.sys.settings.key;""!==n?t=n:i.sys.settings.key=t,i.sys.init(this.game);for(var r=["init","preload","create","update","render"],s=0;s<r.length;s++){var a=h(e,r[s],null);a&&(i[r[s]]=a)}if(e.hasOwnProperty("extend"))for(var l in e.extend)if(e.extend.hasOwnProperty(l)){var u=e.extend[l];"data"===l&&i.hasOwnProperty("data")&&"object"==o(u)?i.data.merge(u):"sys"!==l&&(i[l]=u)}return i},getKey:function(t,e){if(t||(t="default"),"function"==typeof e)return t;if(e instanceof c?t=e.sys.settings.key:"object"==o(e)&&e.hasOwnProperty("key")&&(t=e.key),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return t},getScenes:function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);for(var i=[],n=this.scenes,r=0;r<n.length;r++){var s=n[r];s&&(!t||t&&s.sys.isActive())&&i.push(s)}return e?i.reverse():i},getScene:function(t){if("string"==typeof t){if(this.keys[t])return this.keys[t]}else for(var e=0;e<this.scenes.length;e++)if(t===this.scenes[e])return t;return null},isActive:function(t){var e=this.getScene(t);return e?e.sys.isActive():null},isPaused:function(t){var e=this.getScene(t);return e?e.sys.isPaused():null},isVisible:function(t){var e=this.getScene(t);return e?e.sys.isVisible():null},isSleeping:function(t){var e=this.getScene(t);return e?e.sys.isSleeping():null},pause:function(t,e){var i=this.getScene(t);return i&&i.sys.pause(e),this},resume:function(t,e){var i=this.getScene(t);return i&&i.sys.resume(e),this},sleep:function(t,e){var i=this.getScene(t);return i&&!i.sys.isTransitioning()&&i.sys.sleep(e),this},wake:function(t,e){var i=this.getScene(t);return i&&i.sys.wake(e),this},run:function(t,e){var i=this.getScene(t);if(!i){for(var n=0;n<this._pending.length;n++)if(this._pending[n].key===t){this.queueOp("start",t,e);break}return this}i.sys.isSleeping()?i.sys.wake(e):i.sys.isPaused()?i.sys.resume(e):this.start(t,e)},start:function(t,e){if(!this.isBooted)return this._data[t]={autoStart:!0,data:e},this;var i=this.getScene(t);if(i){var n,s=i.sys;if(s.isActive()||s.isPaused())s.shutdown(),s.sceneUpdate=u,s.start(e);else if(s.sceneUpdate=u,s.start(e),s.load&&(n=s.load),n&&s.settings.hasOwnProperty("pack")&&(n.reset(),n.addPack({payload:s.settings.pack})))return s.settings.status=r.LOADING,n.once(l.COMPLETE,this.payloadComplete,this),n.start(),this;this.bootScene(i)}return this},stop:function(t,e){var i=this.getScene(t);return i&&!i.sys.isTransitioning()&&i.sys.shutdown(e),this},switch:function(t,e){var i=this.getScene(t),n=this.getScene(e);return i&&n&&i!==n&&(this.sleep(t),this.isSleeping(e)?this.wake(e):this.start(e)),this},getAt:function(t){return this.scenes[t]},getIndex:function(t){var e=this.getScene(t);return this.scenes.indexOf(e)},bringToTop:function(t){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:t,keyB:null});else{var e=this.getIndex(t);if(-1!==e&&e<this.scenes.length){var i=this.getScene(t);this.scenes.splice(e,1),this.scenes.push(i)}}return this},sendToBack:function(t){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:t,keyB:null});else{var e=this.getIndex(t);if(-1!==e&&e>0){var i=this.getScene(t);this.scenes.splice(e,1),this.scenes.unshift(i)}}return this},moveDown:function(t){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:t,keyB:null});else{var e=this.getIndex(t);if(e>0){var i=e-1,n=this.getScene(t),r=this.getAt(i);this.scenes[e]=r,this.scenes[i]=n}}return this},moveUp:function(t){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:t,keyB:null});else{var e=this.getIndex(t);if(e<this.scenes.length-1){var i=e+1,n=this.getScene(t),r=this.getAt(i);this.scenes[e]=r,this.scenes[i]=n}}return this},moveAbove:function(t,e){if(t===e)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:t,keyB:e});else{var i=this.getIndex(t),n=this.getIndex(e);if(-1!==i&&-1!==n){var r=this.getAt(n);this.scenes.splice(n,1),this.scenes.splice(i+1,0,r)}}return this},moveBelow:function(t,e){if(t===e)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:t,keyB:e});else{var i=this.getIndex(t),n=this.getIndex(e);if(-1!==i&&-1!==n){var r=this.getAt(n);this.scenes.splice(n,1),0===i?this.scenes.unshift(r):this.scenes.splice(i,0,r)}}return this},queueOp:function(t,e,i){return this._queue.push({op:t,keyA:e,keyB:i}),this},swapPosition:function(t,e){if(t===e)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:t,keyB:e});else{var i=this.getIndex(t),n=this.getIndex(e);if(i!==n&&-1!==i&&-1!==n){var r=this.getAt(i);this.scenes[i]=this.scenes[n],this.scenes[n]=r}}return this},dump:function(){for(var t=[],e=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],i=0;i<this.scenes.length;i++){var n=this.scenes[i].sys,s=!n.settings.visible||n.settings.status!==r.RUNNING&&n.settings.status!==r.PAUSED?"[-] ":"[*] ";s+=n.settings.key+" ("+e[n.settings.status]+")",t.push(s)}},destroy:function(){for(var t=0;t<this.scenes.length;t++)this.scenes[t].sys.destroy();this.update=u,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});t.exports=p},function(t,e,i){var n=i(1),r=i(130);t.exports=function(t){var e=t.game.config.defaultPhysicsSystem,i=n(t.settings,"physics",!1);if(e||i){var s=[];if(e&&s.push(r(e+"Physics")),i)for(var o in i)o=r(o.concat("Physics")),-1===s.indexOf(o)&&s.push(o);return s}}},function(t,e,i){var n=i(1);t.exports=function(t){var e=t.plugins.getDefaultScenePlugins(),i=n(t.settings,"plugins",!1);return Array.isArray(i)?i:e||[]}},function(t,e,i){var n=i(92),r=i(7),s=i(255),o=i(678),a={create:function(t){return"string"==typeof t?t={key:t}:void 0===t&&(t={}),{status:n.PENDING,key:r(t,"key",""),active:r(t,"active",!1),visible:r(t,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:r(t,"pack",!1),cameras:r(t,"cameras",null),map:r(t,"map",s(o,r(t,"mapAdd",{}))),physics:r(t,"physics",{}),loader:r(t,"loader",{}),plugins:r(t,"plugins",!1),input:r(t,"input",{})}}};t.exports=a},function(t,e,i){var n=i(56);t.exports=function(t,e){var i=n(t);for(var r in e)i.hasOwnProperty(r)||(i[r]=e[r]);return i}},function(t,e,i){var n=i(22),r=i(0),s=i(681),o=i(682),a=new r({initialize:function(t,e,i,n,r){Array.isArray(i)||(i=[i]),this.manager=t,this.key=e,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var s=0;s<i.length;s++)this.source.push(new o(this,i[s],n,r))},add:function(t,e,i,n,r,o){if(this.has(t))return null;var a=new s(this,t,e,i,n,r,o);return this.frames[t]=a,"__BASE"===this.firstFrame&&(this.firstFrame=t),this.frameTotal++,a},remove:function(t){return!!this.has(t)&&(this.get(t).destroy(),delete this.frames[t],!0)},has:function(t){return this.frames[t]},get:function(t){t||(t=this.firstFrame);var e=this.frames[t];return e||(e=this.frames[this.firstFrame]),e},getTextureSourceIndex:function(t){for(var e=0;e<this.source.length;e++)if(this.source[e]===t)return e;return-1},getFramesFromTextureSource:function(t,e){void 0===e&&(e=!1);var i=[];for(var n in this.frames)if("__BASE"!==n||e){var r=this.frames[n];r.sourceIndex===t&&i.push(r)}return i},getFrameNames:function(t){void 0===t&&(t=!1);var e=Object.keys(this.frames);if(!t){var i=e.indexOf("__BASE");-1!==i&&e.splice(i,1)}return e},getSourceImage:function(t){null!=t&&1!==this.frameTotal||(t="__BASE");var e=this.frames[t];return e?e.source.image:this.frames.__BASE.source.image},getDataSourceImage:function(t){null!=t&&1!==this.frameTotal||(t="__BASE");var e,i=this.frames[t];return e=i?i.sourceIndex:this.frames.__BASE.sourceIndex,this.dataSource[e].image},setDataSource:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=this.source[e];this.dataSource.push(new o(this,t[e],i.width,i.height))}},setFilter:function(t){var e;for(e=0;e<this.source.length;e++)this.source[e].setFilter(t);for(e=0;e<this.dataSource.length;e++)this.dataSource[e].setFilter(t)},destroy:function(){var t;for(t=0;t<this.source.length;t++)this.source[t].destroy();for(t=0;t<this.dataSource.length;t++)this.dataSource[t].destroy();for(var e in this.frames)this.frames[e].destroy();this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var i=this.manager.game.renderer;i&&i.type===n.WEBGL&&i.resetTextures(!0),this.manager=null}});t.exports=a},function(t,e,i){var n=new(i(0))({initialize:function(t){this.pluginManager=t,this.game=t.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=n},function(t,e){t.exports=function(t,e){return function(i,n,r,s){var o=t.getPixelAlpha(n,r,s.texture.key,s.frame.name);return o&&o>=e}}},function(t,e){t.exports=function(t,e,i){return{gameObject:t,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:e,hitAreaCallback:i,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},function(t,e,i){var n=new(i(0))({initialize:function(t,e){this.pad=t,this.events=t.events,this.index=e,this.value=0,this.threshold=.1},update:function(t){this.value=t},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});t.exports=n},function(t,e,i){var n=i(0),r=i(131),s=new n({initialize:function(t,e){this.pad=t,this.events=t.manager,this.index=e,this.value=0,this.threshold=1,this.pressed=!1},update:function(t){this.value=t;var e=this.pad,i=this.index;t>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(r.BUTTON_DOWN,e,this,t),this.pad.emit(r.GAMEPAD_BUTTON_DOWN,i,t,this)):this.pressed&&(this.pressed=!1,this.events.emit(r.BUTTON_UP,e,this,t),this.pad.emit(r.GAMEPAD_BUTTON_UP,i,t,this))},destroy:function(){this.pad=null,this.events=null}});t.exports=s},function(t,e,i){var n=i(260),r=i(261),s=i(0),o=i(9),a=i(5),h=new s({Extends:o,initialize:function(t,e){o.call(this),this.manager=t,this.pad=e,this.id=e.id,this.index=e.index;for(var i=[],s=0;s<e.buttons.length;s++)i.push(new r(this,s));this.buttons=i;var h=[];for(s=0;s<e.axes.length;s++)h.push(new n(this,s));this.axes=h,this.vibration=e.vibrationActuator;var l={value:0,pressed:!1};this._LCLeft=i[14]?i[14]:l,this._LCRight=i[15]?i[15]:l,this._LCTop=i[12]?i[12]:l,this._LCBottom=i[13]?i[13]:l,this._RCLeft=i[2]?i[2]:l,this._RCRight=i[1]?i[1]:l,this._RCTop=i[3]?i[3]:l,this._RCBottom=i[0]?i[0]:l,this._FBLeftTop=i[4]?i[4]:l,this._FBLeftBottom=i[6]?i[6]:l,this._FBRightTop=i[5]?i[5]:l,this._FBRightBottom=i[7]?i[7]:l;var u={value:0};this._HAxisLeft=h[0]?h[0]:u,this._VAxisLeft=h[1]?h[1]:u,this._HAxisRight=h[2]?h[2]:u,this._VAxisRight=h[3]?h[3]:u,this.leftStick=new a,this.rightStick=new a,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(t){return this.axes[t].getValue()},setAxisThreshold:function(t){for(var e=0;e<this.axes.length;e++)this.axes[e].threshold=t},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(t){return this.buttons[t].value},isButtonDown:function(t){return this.buttons[t].pressed},update:function(t){if(!(t.timestamp<this._created)){var e,i=this.buttons,n=t.buttons,r=i.length;for(e=0;e<r;e++)i[e].update(n[e].value);var s=this.axes,o=t.axes;for(r=s.length,e=0;e<r;e++)s[e].update(o[e]);r>=2&&(this.leftStick.set(s[0].getValue(),s[1].getValue()),r>=4&&this.rightStick.set(s[2].getValue(),s[3].getValue()))}},destroy:function(){var t;for(this.removeAllListeners(),this.manager=null,this.pad=null,t=0;t<this.buttons.length;t++)this.buttons[t].destroy();for(t=0;t<this.axes.length;t++)this.axes[t].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});t.exports=h},function(t,e,i){var n=i(132),r=i(72),s=i(10),o=i(2);t.exports=function(t,e,i){void 0===i&&(i=new o);var a=r(e,0,s.PI2);return n(t,a,i)}},function(t,e,i){var n=i(265),r=i(132),s=i(72),o=i(10);t.exports=function(t,e,i,a){void 0===a&&(a=[]),!e&&i>0&&(e=n(t)/i);for(var h=0;h<e;h++){var l=s(h/e,0,o.PI2);a.push(r(t,l))}return a}},function(t,e){t.exports=function(t){return Math.PI*t.radius*2}},function(t,e,i){var n=i(2);t.exports=function(t,e){void 0===e&&(e=new n);var i=2*Math.PI*Math.random(),r=Math.random()+Math.random(),s=r>1?2-r:r,o=s*Math.cos(i),a=s*Math.sin(i);return e.x=t.x+o*t.radius,e.y=t.y+a*t.radius,e}},function(t,e,i){var n=i(133),r=i(72),s=i(10),o=i(2);t.exports=function(t,e,i){void 0===i&&(i=new o);var a=r(e,0,s.PI2);return n(t,a,i)}},function(t,e,i){var n=i(269),r=i(133),s=i(72),o=i(10);t.exports=function(t,e,i,a){void 0===a&&(a=[]),!e&&i>0&&(e=n(t)/i);for(var h=0;h<e;h++){var l=s(h/e,0,o.PI2);a.push(r(t,l))}return a}},function(t,e){t.exports=function(t){var e=t.width/2,i=t.height/2,n=Math.pow(e-i,2)/Math.pow(e+i,2);return Math.PI*(e+i)*(1+3*n/(10+Math.sqrt(4-3*n)))}},function(t,e,i){var n=i(2);t.exports=function(t,e){void 0===e&&(e=new n);var i=Math.random()*Math.PI*2,r=Math.sqrt(Math.random());return e.x=t.x+r*Math.cos(i)*t.width/2,e.y=t.y+r*Math.sin(i)*t.height/2,e}},function(t,e,i){var n=i(2),r=i(43);t.exports=function(t,e,i){void 0===i&&(i=new n);var s=t.getLineA(),o=t.getLineB(),a=t.getLineC();if(e<=0||e>=1)return i.x=s.x1,i.y=s.y1,i;var h=r(s),l=r(o),u=r(a),c=(h+l+u)*e,d=0;return c<h?(d=c/h,i.x=s.x1+(s.x2-s.x1)*d,i.y=s.y1+(s.y2-s.y1)*d):c>h+l?(d=(c-=h+l)/u,i.x=a.x1+(a.x2-a.x1)*d,i.y=a.y1+(a.y2-a.y1)*d):(d=(c-=h)/l,i.x=o.x1+(o.x2-o.x1)*d,i.y=o.y1+(o.y2-o.y1)*d),i}},function(t,e,i){var n=i(43),r=i(2);t.exports=function(t,e,i,s){void 0===s&&(s=[]);var o=t.getLineA(),a=t.getLineB(),h=t.getLineC(),l=n(o),u=n(a),c=n(h),d=l+u+c;!e&&i>0&&(e=d/i);for(var p=0;p<e;p++){var f=d*(p/e),m=0,g=new r;f<l?(m=f/l,g.x=o.x1+(o.x2-o.x1)*m,g.y=o.y1+(o.y2-o.y1)*m):f>l+u?(m=(f-=l+u)/c,g.x=h.x1+(h.x2-h.x1)*m,g.y=h.y1+(h.y2-h.y1)*m):(m=(f-=l)/u,g.x=a.x1+(a.x2-a.x1)*m,g.y=a.y1+(a.y2-a.y1)*m),s.push(g)}return s}},function(t,e,i){var n=i(2);t.exports=function(t,e){void 0===e&&(e=new n);var i=t.x2-t.x1,r=t.y2-t.y1,s=t.x3-t.x1,o=t.y3-t.y1,a=Math.random(),h=Math.random();return a+h>=1&&(a=1-a,h=1-h),e.x=t.x1+(i*a+s*h),e.y=t.y1+(r*a+o*h),e}},function(t,e,i){var n=i(0),r=i(9),s=i(97),o=new n({Extends:r,initialize:function(t,e){r.call(this),this.plugin=t,this.keyCode=e,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(t){return this.emitOnRepeat=t,this},onDown:function(t){this.originalEvent=t,this.enabled&&(this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.location=t.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(s.DOWN,this,t):(this.isDown=!0,this.isUp=!1,this.timeDown=t.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(s.DOWN,this,t)))},onUp:function(t){this.originalEvent=t,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=t.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(s.UP,this,t))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});t.exports=o},function(t,e,i){var n=i(0),r=i(97),s=i(1),o=i(276),a=i(278),h=new n({initialize:function(t,e,i){if(void 0===i&&(i={}),e.length<2)return!1;this.manager=t,this.enabled=!0,this.keyCodes=[];for(var n=0;n<e.length;n++){var h=e[n];"string"==typeof h?this.keyCodes.push(h.toUpperCase().charCodeAt(0)):"number"==typeof h?this.keyCodes.push(h):h.hasOwnProperty("keyCode")&&this.keyCodes.push(h.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=s(i,"resetOnWrongKey",!0),this.maxKeyDelay=s(i,"maxKeyDelay",0),this.resetOnMatch=s(i,"resetOnMatch",!1),this.deleteOnMatch=s(i,"deleteOnMatch",!1);var l=this;this.onKeyDown=function(t){!l.matched&&l.enabled&&o(t,l)&&(l.manager.emit(r.COMBO_MATCH,l,t),l.resetOnMatch?a(l):l.deleteOnMatch&&l.destroy())},this.manager.on(r.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(r.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});t.exports=h},function(t,e,i){var n=i(277);t.exports=function(t,e){if(e.matched)return!0;var i=!1,r=!1;if(t.keyCode===e.current)if(e.index>0&&e.maxKeyDelay>0){var s=e.timeLastMatched+e.maxKeyDelay;t.timeStamp<=s&&(r=!0,i=n(t,e))}else r=!0,i=n(t,e);return!r&&e.resetOnWrongKey&&(e.index=0,e.current=e.keyCodes[0]),i&&(e.timeLastMatched=t.timeStamp,e.matched=!0,e.timeMatched=t.timeStamp),i}},function(t,e){t.exports=function(t,e){return e.timeLastMatched=t.timeStamp,e.index++,e.index===e.size||(e.current=e.keyCodes[e.index],!1)}},function(t,e){t.exports=function(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t}},function(t,e,i){var n=i(740);t.exports=function(t){var e,i=[];if(t.hasOwnProperty("props"))for(e in t.props)"_"!==e.substr(0,1)&&i.push({key:e,value:t.props[e]});else for(e in t)-1===n.indexOf(e)&&"_"!==e.substr(0,1)&&i.push({key:e,value:t[e]});return i}},function(t,e,i){var n=i(7);t.exports=function(t){var e=n(t,"tweens",null);return null===e?[]:("function"==typeof e&&(e=e.call()),Array.isArray(e)||(e=[e]),e)}},function(t,e,i){var n=i(136),r=i(19),s=i(66),o=i(49),a=i(98),h=i(7),l=i(135),u=i(137),c=i(139);t.exports=function(t,e,i){void 0===i&&(i=n);var d=h(e,"from",0),p=h(e,"to",1),f=[{value:d}],m=a(e,"delay",i.delay),g=a(e,"duration",i.duration),v=h(e,"easeParams",i.easeParams),y=o(h(e,"ease",i.ease),v),A=a(e,"hold",i.hold),x=a(e,"repeat",i.repeat),w=a(e,"repeatDelay",i.repeatDelay),b=s(e,"yoyo",i.yoyo),S=[],E=l("value",p),T=c(f[0],0,"value",E.getEnd,E.getStart,E.getActive,y,m,g,b,A,x,w,!1,!1);T.start=d,T.current=d,T.to=p,S.push(T);var _=new u(t,S,f);_.offset=r(e,"offset",null),_.completeDelay=r(e,"completeDelay",0),_.loop=Math.round(r(e,"loop",0)),_.loopDelay=Math.round(r(e,"loopDelay",0)),_.paused=s(e,"paused",!1),_.useFrames=s(e,"useFrames",!1);for(var M=h(e,"callbackScope",_),C=[_,null],P=u.TYPES,R=0;R<P.length;R++){var O=P[R],L=h(e,O,!1);if(L){var I=h(e,O+"Scope",M),D=h(e,O+"Params",[]);_.setCallback(O,L,C.concat(D),I)}}return _}},function(t,e,i){var n=i(49),r=i(7),s=i(10);t.exports=function(t,e){void 0===e&&(e={});var i=r(e,"start",0),o=r(e,"ease",null),a=r(e,"grid",null),h=r(e,"from",0),l="first"===h,u="center"===h,c="last"===h,d="number"==typeof h,p=Array.isArray(t),f=p?parseFloat(t[0]):parseFloat(t),m=p?parseFloat(t[1]):0,g=Math.max(f,m);if(p&&(i+=f),a){var v=a[0],y=a[1],A=0,x=0,w=0,b=0,S=[];c?(A=v-1,x=y-1):d?(A=h%v,x=Math.floor(h/v)):u&&(A=(v-1)/2,x=(y-1)/2);for(var E=s.MIN_SAFE_INTEGER,T=0;T<y;T++){S[T]=[];for(var _=0;_<v;_++){w=A-_,b=x-T;var M=Math.sqrt(w*w+b*b);M>E&&(E=M),S[T][_]=M}}}var C=o?n(o):null;return a?function(t,e,n,r){var s,o=0,a=r%v,h=Math.floor(r/v);if(a>=0&&a<v&&h>=0&&h<y&&(o=S[h][a]),p){var l=m-f;s=C?o/E*l*C(o/E):o/E*l}else s=C?o*f*C(o/E):o*f;return s+i}:function(t,e,n,r,s){var o,a,v;return s--,l?o=r:u?o=Math.abs(s/2-r):c?o=s-r:d&&(o=Math.abs(h-r)),p?(v=u?(m-f)/s*(2*o):(m-f)/s*o,a=C?v*C(o/s):v):a=C?s*g*C(o/s):o*f,a+i}}},function(t,e,i){var n=i(56),r=i(136),s=i(19),o=i(66),a=i(49),h=i(98),l=i(134),u=i(280),c=i(7),d=i(284),p=i(99);t.exports=function(t,e){var i=new d(t);i.completeDelay=s(e,"completeDelay",0),i.loop=Math.round(s(e,"loop",0)),i.loopDelay=Math.round(s(e,"loopDelay",0)),i.paused=o(e,"paused",!1),i.useFrames=o(e,"useFrames",!1);var f=c(e,"callbackScope",i),m=[i],g=c(e,"onStart",!1);if(g){var v=c(e,"onStartScope",f),y=c(e,"onStartParams",[]);i.setCallback("onStart",g,m.concat(y),v)}var A=c(e,"onUpdate",!1);if(A){var x=c(e,"onUpdateScope",f),w=c(e,"onUpdateParams",[]);i.setCallback("onUpdate",A,m.concat(w),x)}var b=c(e,"onLoop",!1);if(b){var S=c(e,"onLoopScope",f),E=c(e,"onLoopParams",[]);i.setCallback("onLoop",b,m.concat(E),S)}var T=c(e,"onYoyo",!1);if(T){var _=c(e,"onYoyoScope",f),M=c(e,"onYoyoParams",[]);i.setCallback("onYoyo",T,m.concat(null,M),_)}var C=c(e,"onComplete",!1);if(C){var P=c(e,"onCompleteScope",f),R=c(e,"onCompleteParams",[]);i.setCallback("onComplete",C,m.concat(R),P)}var O=u(e);if(0===O.length)return i.paused=!0,i;var L=n(r);L.targets=l(e);var I=s(e,"totalDuration",0);L.duration=I>0?Math.floor(I/O.length):h(e,"duration",L.duration),L.delay=h(e,"delay",L.delay),L.easeParams=c(e,"easeParams",L.easeParams),L.ease=a(c(e,"ease",L.ease),L.easeParams),L.hold=h(e,"hold",L.hold),L.repeat=h(e,"repeat",L.repeat),L.repeatDelay=h(e,"repeatDelay",L.repeatDelay),L.yoyo=o(e,"yoyo",L.yoyo),L.flipX=o(e,"flipX",L.flipX),L.flipY=o(e,"flipY",L.flipY);for(var D=0;D<O.length;D++)i.queue(p(i,O[D],L));return i}},function(t,e,i){var n=i(0),r=i(9),s=i(138),o=i(99),a=i(67),h=new n({Extends:r,initialize:function(t){r.call(this),this.manager=t,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=a.PENDING_ADD,this._pausedState=a.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(t,e){this.emit(t,this),e&&e.func.apply(e.scope,e.params)},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===a.ACTIVE},add:function(t){return this.queue(o(this,t))},queue:function(t){return this.isPlaying()||(t.parent=this,t.parentIsTimeline=!0,this.data.push(t),this.totalData=this.data.length),this},hasOffset:function(t){return null!==t.offset},isOffsetAbsolute:function(t){return"number"==typeof t},isOffsetRelative:function(t){if("string"==typeof t){var e=t[0];if("-"===e||"+"===e)return!0}return!1},getRelativeOffset:function(t,e){var i=t[0],n=parseFloat(t.substr(2)),r=e;switch(i){case"+":r+=n;break;case"-":r-=n}return Math.max(0,r)},calcDuration:function(){for(var t=0,e=0,i=0,n=0;n<this.totalData;n++){var r=this.data[n];r.init(),this.hasOffset(r)?this.isOffsetAbsolute(r.offset)?(r.calculatedOffset=r.offset,0===r.offset&&(i=0)):this.isOffsetRelative(r.offset)&&(r.calculatedOffset=this.getRelativeOffset(r.offset,t)):r.calculatedOffset=i,t=r.totalDuration+r.calculatedOffset,e+=r.totalDuration,i+=r.totalDuration}this.duration=e,this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=a.PAUSED,!1)},resetTweens:function(t){for(var e=0;e<this.totalData;e++)this.data[e].play(t)},setCallback:function(t,e,i,n){return-1!==h.TYPES.indexOf(t)&&(this.callbacks[t]={func:e,scope:n,params:i}),this},makeActive:function(t){return this.manager.makeActive(t)},play:function(){if(this.state!==a.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=a.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=a.LOOP_DELAY):(this.state=a.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=a.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=a.PENDING_REMOVE,this.dispatchTimelineEvent(s.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(t,e){if(this.state!==a.PAUSED){switch(this.useFrames&&(e=1*this.manager.timeScale),e*=this.timeScale,this.elapsed+=e,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=e,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case a.ACTIVE:for(var i=this.totalData,n=0;n<this.totalData;n++)this.data[n].update(t,e)&&i--;this.dispatchTimelineEvent(s.TIMELINE_UPDATE,this.callbacks.onUpdate),0===i&&this.nextState();break;case a.LOOP_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=a.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_LOOP,this.callbacks.onLoop));break;case a.COMPLETE_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=a.PENDING_REMOVE,this.dispatchTimelineEvent(s.TIMELINE_COMPLETE,this.callbacks.onComplete))}return this.state===a.PENDING_REMOVE}},stop:function(){this.state=a.PENDING_REMOVE},pause:function(){if(this.state!==a.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=a.PAUSED,this.emit(s.TIMELINE_PAUSE,this),this},resume:function(){return this.state===a.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(s.TIMELINE_RESUME,this)),this},hasTarget:function(t){for(var e=0;e<this.data.length;e++)if(this.data[e].hasTarget(t))return!0;return!1},destroy:function(){for(var t=0;t<this.data.length;t++)this.data[t].stop()}});h.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],t.exports=h},function(t,e,i){var n=i(0),r=i(1),s=new n({initialize:function(t){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(t)},reset:function(t){return this.delay=r(t,"delay",0),this.repeat=r(t,"repeat",0),this.loop=r(t,"loop",!1),this.callback=r(t,"callback",void 0),this.callbackScope=r(t,"callbackScope",this.callback),this.args=r(t,"args",[]),this.timeScale=r(t,"timeScale",1),this.startAt=r(t,"startAt",0),this.paused=r(t,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var t=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/t}return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return.001*this.elapsed},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return.001*this.getRemaining()},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return.001*this.getOverallRemaining()},remove:function(t){void 0===t&&(t=!1),this.elapsed=this.delay,this.hasDispatched=!t,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});t.exports=s},function(t,e,i){var n=i(140),r=i(0),s=i(4),o=i(101),a=new r({initialize:function(t){this.parent=t,this.list=[],this.position=0,this.addCallback=s,this.removeCallback=s,this._sortKey=""},add:function(t,e){return e?n.Add(this.list,t):n.Add(this.list,t,0,this.addCallback,this)},addAt:function(t,e,i){return i?n.AddAt(this.list,t,e):n.AddAt(this.list,t,e,0,this.addCallback,this)},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t?(void 0===e&&(e=function(e,i){return e[t]-i[t]}),o(this.list,e),this):this},getByName:function(t){return n.GetFirst(this.list,"name",t)},getRandom:function(t,e){return n.GetRandom(this.list,t,e)},getFirst:function(t,e,i,r){return n.GetFirst(this.list,t,e,i,r)},getAll:function(t,e,i,r){return n.GetAll(this.list,t,e,i,r)},count:function(t,e){return n.CountAllMatching(this.list,t,e)},swap:function(t,e){n.Swap(this.list,t,e)},moveTo:function(t,e){return n.MoveTo(this.list,t,e)},moveAbove:function(t,e){return n.MoveAbove(this.list,t,e)},moveBelow:function(t,e){return n.MoveBelow(this.list,t,e)},remove:function(t,e){return e?n.Remove(this.list,t):n.Remove(this.list,t,this.removeCallback,this)},removeAt:function(t,e){return e?n.RemoveAt(this.list,t):n.RemoveAt(this.list,t,this.removeCallback,this)},removeBetween:function(t,e,i){return i?n.RemoveBetween(this.list,t,e):n.RemoveBetween(this.list,t,e,this.removeCallback,this)},removeAll:function(t){for(var e=this.list.length;e--;)this.remove(this.list[e],t);return this},bringToTop:function(t){return n.BringToTop(this.list,t)},sendToBack:function(t){return n.SendToBack(this.list,t)},moveUp:function(t){return n.MoveUp(this.list,t),t},moveDown:function(t){return n.MoveDown(this.list,t),t},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(t,e){return n.Replace(this.list,t,e)},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,e,i,r){return n.SetAll(this.list,t,e,i,r),this},each:function(t,e){for(var i=[null],n=2;n<arguments.length;n++)i.push(arguments[n]);for(n=0;n<this.list.length;n++)i[0]=this.list[n],t.apply(e,i)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});t.exports=a},function(t,e){t.exports=function(t){for(var e=t.length,i=t[0].length,n=new Array(i),r=0;r<i;r++){n[r]=new Array(e);for(var s=e-1;s>-1;s--)n[r][s]=t[s][r]}return n}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);for(var i=null,n=0;n<e;n++)i=t.shift(),t.push(i);return i}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);for(var i=null,n=0;n<e;n++)i=t.pop(),t.unshift(i);return i}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length);var n=e+Math.floor(Math.random()*i);return void 0===t[n]?null:t[n]}},function(t,e){t.exports=function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[i],t[i]=n}return t}},function(t,e,i){var n=i(146),r=i(93);t.exports=function(t,e,i,s,o,a){var h=e.commandBuffer,l=h.length,u=o||t.currentContext;if(0!==l&&r(t,u,e,i,s)){i.addToRenderList(e);var c=1,d=1,p=0,f=0,m=1,g=0,v=0,y=0;u.beginPath();for(var A=0;A<l;++A)switch(h[A]){case n.ARC:u.arc(h[A+1],h[A+2],h[A+3],h[A+4],h[A+5],h[A+6]),A+=7;break;case n.LINE_STYLE:m=h[A+1],p=h[A+2],c=h[A+3],g=(16711680&p)>>>16,v=(65280&p)>>>8,y=255&p,u.strokeStyle="rgba("+g+","+v+","+y+","+c+")",u.lineWidth=m,A+=3;break;case n.FILL_STYLE:f=h[A+1],d=h[A+2],g=(16711680&f)>>>16,v=(65280&f)>>>8,y=255&f,u.fillStyle="rgba("+g+","+v+","+y+","+d+")",A+=2;break;case n.BEGIN_PATH:u.beginPath();break;case n.CLOSE_PATH:u.closePath();break;case n.FILL_PATH:a||u.fill();break;case n.STROKE_PATH:a||u.stroke();break;case n.FILL_RECT:a?u.rect(h[A+1],h[A+2],h[A+3],h[A+4]):u.fillRect(h[A+1],h[A+2],h[A+3],h[A+4]),A+=4;break;case n.FILL_TRIANGLE:u.beginPath(),u.moveTo(h[A+1],h[A+2]),u.lineTo(h[A+3],h[A+4]),u.lineTo(h[A+5],h[A+6]),u.closePath(),a||u.fill(),A+=6;break;case n.STROKE_TRIANGLE:u.beginPath(),u.moveTo(h[A+1],h[A+2]),u.lineTo(h[A+3],h[A+4]),u.lineTo(h[A+5],h[A+6]),u.closePath(),a||u.stroke(),A+=6;break;case n.LINE_TO:u.lineTo(h[A+1],h[A+2]),A+=2;break;case n.MOVE_TO:u.moveTo(h[A+1],h[A+2]),A+=2;break;case n.LINE_FX_TO:u.lineTo(h[A+1],h[A+2]),A+=5;break;case n.MOVE_FX_TO:u.moveTo(h[A+1],h[A+2]),A+=5;break;case n.SAVE:u.save();break;case n.RESTORE:u.restore();break;case n.TRANSLATE:u.translate(h[A+1],h[A+2]),A+=2;break;case n.SCALE:u.scale(h[A+1],h[A+2]),A+=2;break;case n.ROTATE:u.rotate(h[A+1]),A+=1;break;case n.GRADIENT_FILL_STYLE:A+=5;break;case n.GRADIENT_LINE_STYLE:A+=6}u.restore()}}},function(t,e,i){var n=i(8);t.exports=function(t,e,i){void 0===i&&(i=new n);var r=Math.min(t.x,e.x),s=Math.min(t.y,e.y),o=Math.max(t.right,e.right)-r,a=Math.max(t.bottom,e.bottom)-s;return i.setTo(r,s,o,a)}},function(t,e){t.exports=function(t,e){for(var i=0;i<e.length;i++)if(t.hasOwnProperty(e[i]))return!0;return!1}},function(t,e,i){var n=i(4),r=i(4);n=i(839),r=i(840),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(0),r=i(8),s=i(297),o=i(841),a=new n({Extends:s,Mixins:[o],initialize:function(t,e,i,n,o,a,h){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=128),void 0===o&&(o=128),s.call(this,t,"Rectangle",new r(0,0,n,o)),this.setPosition(e,i),this.setSize(n,o),void 0!==a&&this.setFillStyle(a,h),this.updateDisplayOrigin(),this.updateData()},setSize:function(t,e){return this.width=t,this.height=e,this.geom.setSize(t,e),this.updateData(),this},updateData:function(){var t=[],e=this.geom,i=this._tempLine;return e.getLineA(i),t.push(i.x1,i.y1,i.x2,i.y2),e.getLineB(i),t.push(i.x2,i.y2),e.getLineC(i),t.push(i.x2,i.y2),e.getLineD(i),t.push(i.x2,i.y2),this.pathData=t,this}});t.exports=a},function(t,e,i){var n=i(0),r=i(23),s=i(37),o=i(34),a=new n({Extends:s,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Transform,r.Visible],initialize:function(t,e,i){void 0===e&&(e="Shape"),s.call(this,t,e),this.geom=i,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new o,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.isFilled=!1:(this.fillColor=t,this.fillAlpha=e,this.isFilled=!0),this},setStrokeStyle:function(t,e,i){return void 0===i&&(i=1),void 0===t?this.isStroked=!1:(this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=i,this.isStroked=!0),this},setClosePath:function(t){return this.closePath=t,this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}}});t.exports=a},function(t,e,i){var n=i(20);t.exports=function(t,e,i,r,s){var o=t.strokeTint,a=n.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*i);o.TL=a,o.TR=a,o.BL=a,o.BR=a;var h=e.pathData,l=h.length-1,u=e.lineWidth,c=u/2,d=h[0]-r,p=h[1]-s;e.closePath||(l-=2);for(var f=2;f<l;f+=2){var m=h[f]-r,g=h[f+1]-s;t.batchLine(d,p,m,g,c,c,u,f-2,!!e.closePath&&f===l-1),d=m,p=g}}},function(t,e){t.exports=function(t,e,i,n){var r=i||e.fillColor,s=n||e.fillAlpha,o=(16711680&r)>>>16,a=(65280&r)>>>8,h=255&r;t.fillStyle="rgba("+o+","+a+","+h+","+s+")"}},function(t,e){t.exports=function(t,e,i,n){var r=i||e.strokeColor,s=n||e.strokeAlpha,o=(16711680&r)>>>16,a=(65280&r)>>>8,h=255&r;t.strokeStyle="rgba("+o+","+a+","+h+","+s+")",t.lineWidth=e.lineWidth}},function(t,e,i){var n=i(844),r=i(0),s=i(44),o=i(74),a=i(76),h=i(10),l=i(297),u=new r({Extends:l,Mixins:[n],initialize:function(t,e,i,n,r,s,o,h,u){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=128),void 0===r&&(r=0),void 0===s&&(s=360),void 0===o&&(o=!1),l.call(this,t,"Arc",new a(0,0,n)),this._startAngle=r,this._endAngle=s,this._anticlockwise=o,this._iterations=.01,this.setPosition(e,i);var c=2*this.geom.radius;this.setSize(c,c),void 0!==h&&this.setFillStyle(h,u),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(t){this._iterations=t,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(t){this.geom.radius=t;var e=2*t;this.setSize(e,e),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(t){this._startAngle=t,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(t){this._endAngle=t,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(t){this._anticlockwise=t,this.updateData()}},setRadius:function(t){return this.radius=t,this},setIterations:function(t){return void 0===t&&(t=.01),this.iterations=t,this},setStartAngle:function(t,e){return this._startAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},setEndAngle:function(t,e){return this._endAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},updateData:function(){var t=this._iterations,e=t,i=this.geom.radius,n=s(this._startAngle),r=s(this._endAngle),a=i,l=i;r-=n,this._anticlockwise?r<-h.PI2?r=-h.PI2:r>0&&(r=-h.PI2+r%h.PI2):r>h.PI2?r=h.PI2:r<0&&(r=h.PI2+r%h.PI2);for(var u,c=[a+Math.cos(n)*i,l+Math.sin(n)*i];e<1;)u=r*e+n,c.push(a+Math.cos(u)*i,l+Math.sin(u)*i),e+=t;return u=r+n,c.push(a+Math.cos(u)*i,l+Math.sin(u)*i),c.push(a+Math.cos(n)*i,l+Math.sin(n)*i),this.pathIndexes=o(c),this.pathData=c,this}});t.exports=u},function(t,e,i){var n=i(17),r=i(0),s=i(23),o=i(14),a=i(37),h=i(122),l=i(85),u=i(295),c=i(5),d=new r({Extends:a,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Crop,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Tint,s.Transform,s.Visible,u],initialize:function(t,e,i,r,s,l,u){var d=t.sys.renderer;a.call(this,t,"TileSprite");var p=t.sys.textures.get(l),f=p.get(u);r&&s?(r=Math.floor(r),s=Math.floor(s)):(r=f.width,s=f.height),this._tilePosition=new c,this._tileScale=new c(1,1),this.dirty=!1,this.renderer=d,this.canvas=n.create(this,r,s),this.context=this.canvas.getContext("2d"),this.displayTexture=p,this.displayFrame=f,this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=h(f.width),this.potHeight=h(f.height),this.fillCanvas=n.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(e,i),this.setSize(r,s),this.setFrame(u),this.setOriginFromFrame(),this.initPipeline(),t.sys.game.events.on(o.CONTEXT_RESTORED,(function(t){if(t){var e=t.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=t.createTexture2D(0,e.LINEAR,e.LINEAR,e.REPEAT,e.REPEAT,e.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}}),this)},setTexture:function(t,e){return this.displayTexture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){var e=this.displayTexture.get(t);return this.potWidth=h(e.width),this.potHeight=h(e.height),this.canvas.width=0,e.cutWidth&&e.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=e,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(t,e){return void 0!==t&&(this.tilePositionX=t),void 0!==e&&(this.tilePositionY=e),this},setTileScale:function(t,e){return void 0===t&&(t=this.tileScaleX),void 0===e&&(e=t),this.tileScaleX=t,this.tileScaleY=e,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var t=this.displayFrame;if(t.source.isRenderTexture||t.source.isGLTexture)return void(this.dirty=!1);var e=this.fillContext,i=this.fillCanvas,n=this.potWidth,r=this.potHeight;this.renderer&&this.renderer.gl||(n=t.cutWidth,r=t.cutHeight),e.clearRect(0,0,n,r),i.width=n,i.height=r,e.drawImage(t.source.image,t.cutX,t.cutY,t.cutWidth,t.cutHeight,0,0,n,r),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(i,this.fillPattern):this.fillPattern=e.createPattern(i,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var t=this.canvas;if(t.width===this.width&&t.height===this.height||(t.width=this.width,t.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl)this.dirty=!1;else{var e=this.context;this.scene.sys.game.config.antialias||l.disable(e);var i=this._tileScale.x,n=this._tileScale.y,r=this._tilePosition.x,s=this._tilePosition.y;e.clearRect(0,0,this.width,this.height),e.save(),e.scale(i,n),e.translate(-r,-s),e.fillStyle=this.fillPattern,e.fillRect(r,s,this.width/i,this.height/n),e.restore(),this.dirty=!1}},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),n.remove(this.canvas),n.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(t){this._tilePosition.x=t,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(t){this._tilePosition.y=t,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(t){this._tileScale.x=t,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(t){this._tileScale.y=t,this.dirty=!0}}});t.exports=d},function(t,e,i){var n=i(0),r=i(217),s=i(59),o=i(5),a=new n({Extends:s,initialize:function(t,e,i,n){s.call(this,"CubicBezierCurve"),Array.isArray(t)&&(n=new o(t[6],t[7]),i=new o(t[4],t[5]),e=new o(t[2],t[3]),t=new o(t[0],t[1])),this.p0=t,this.p1=e,this.p2=i,this.p3=n},getStartPoint:function(t){return void 0===t&&(t=new o),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,e){void 0===e&&(e=new o);var i=this.p0,n=this.p1,s=this.p2,a=this.p3;return e.set(r(t,i.x,n.x,s.x,a.x),r(t,i.y,n.y,s.y,a.y))},draw:function(t,e){void 0===e&&(e=32);var i=this.getPoints(e);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var n=1;n<i.length;n++)t.lineTo(i[n].x,i[n].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});a.fromJSON=function(t){var e=t.points,i=new o(e[0],e[1]),n=new o(e[2],e[3]),r=new o(e[4],e[5]),s=new o(e[6],e[7]);return new a(i,n,r,s)},t.exports=a},function(t,e,i){var n=i(0),r=i(59),s=i(44),a=i(7),h=i(222),l=i(5),u=new n({Extends:r,initialize:function(t,e,i,n,h,u,c,d){if("object"==o(t)){var p=t;t=a(p,"x",0),e=a(p,"y",0),i=a(p,"xRadius",0),n=a(p,"yRadius",i),h=a(p,"startAngle",0),u=a(p,"endAngle",360),c=a(p,"clockwise",!1),d=a(p,"rotation",0)}else void 0===n&&(n=i),void 0===h&&(h=0),void 0===u&&(u=360),void 0===c&&(c=!1),void 0===d&&(d=0);r.call(this,"EllipseCurve"),this.p0=new l(t,e),this._xRadius=i,this._yRadius=n,this._startAngle=s(h),this._endAngle=s(u),this._clockwise=c,this._rotation=s(d)},getStartPoint:function(t){return void 0===t&&(t=new l),this.getPoint(0,t)},getResolution:function(t){return 2*t},getPoint:function(t,e){void 0===e&&(e=new l);for(var i=2*Math.PI,n=this._endAngle-this._startAngle,r=Math.abs(n)<Number.EPSILON;n<0;)n+=i;for(;n>i;)n-=i;n<Number.EPSILON&&(n=r?0:i),this._clockwise&&!r&&(n===i?n=-i:n-=i);var s=this._startAngle+t*n,o=this.p0.x+this._xRadius*Math.cos(s),a=this.p0.y+this._yRadius*Math.sin(s);if(0!==this._rotation){var h=Math.cos(this._rotation),u=Math.sin(this._rotation),c=o-this.p0.x,d=a-this.p0.y;o=c*h-d*u+this.p0.x,a=c*u+d*h+this.p0.y}return e.set(o,a)},setXRadius:function(t){return this.xRadius=t,this},setYRadius:function(t){return this.yRadius=t,this},setWidth:function(t){return this.xRadius=t/2,this},setHeight:function(t){return this.yRadius=t/2,this},setStartAngle:function(t){return this.startAngle=t,this},setEndAngle:function(t){return this.endAngle=t,this},setClockwise:function(t){return this.clockwise=t,this},setRotation:function(t){return this.rotation=t,this},x:{get:function(){return this.p0.x},set:function(t){this.p0.x=t}},y:{get:function(){return this.p0.y},set:function(t){this.p0.y=t}},xRadius:{get:function(){return this._xRadius},set:function(t){this._xRadius=t}},yRadius:{get:function(){return this._yRadius},set:function(t){this._yRadius=t}},startAngle:{get:function(){return h(this._startAngle)},set:function(t){this._startAngle=s(t)}},endAngle:{get:function(){return h(this._endAngle)},set:function(t){this._endAngle=s(t)}},clockwise:{get:function(){return this._clockwise},set:function(t){this._clockwise=t}},angle:{get:function(){return h(this._rotation)},set:function(t){this._rotation=s(t)}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:h(this._startAngle),endAngle:h(this._endAngle),clockwise:this._clockwise,rotation:h(this._rotation)}}});u.fromJSON=function(t){return new u(t)},t.exports=u},function(t,e,i){var n=i(0),r=i(59),s=i(151),o=i(8),a=i(5),h=new n({Extends:r,initialize:function(t,e){r.call(this,"LineCurve"),Array.isArray(t)&&(e=new a(t[2],t[3]),t=new a(t[0],t[1])),this.p0=t,this.p1=e,this.arcLengthDivisions=1},getBounds:function(t){return void 0===t&&(t=new o),s([this.p0,this.p1],t)},getStartPoint:function(t){return void 0===t&&(t=new a),t.copy(this.p0)},getResolution:function(t){return void 0===t&&(t=1),t},getPoint:function(t,e){return void 0===e&&(e=new a),1===t?e.copy(this.p1):(e.copy(this.p1).subtract(this.p0).scale(t).add(this.p0),e)},getPointAt:function(t,e){return this.getPoint(t,e)},getTangent:function(t,e){return void 0===e&&(e=new a),e.copy(this.p1).subtract(this.p0).normalize(),e},getUtoTmapping:function(t,e,i){var n;if(e){var r=this.getLengths(i),s=r[r.length-1];n=Math.min(e,s)/s}else n=t;return n},draw:function(t){return t.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});h.fromJSON=function(t){var e=t.points,i=new a(e[0],e[1]),n=new a(e[2],e[3]);return new h(i,n)},t.exports=h},function(t,e,i){var n=i(0),r=i(5),s=new n({initialize:function(t,e){this.active=!1,this.p0=new r(t,e)},getPoint:function(t,e){return void 0===e&&(e=new r),e.copy(this.p0)},getPointAt:function(t,e){return this.getPoint(t,e)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});t.exports=s},function(t,e,i){var n=i(0),r=i(59),s=i(218),o=i(5),a=new n({Extends:r,initialize:function(t,e,i){r.call(this,"QuadraticBezier"),Array.isArray(t)&&(i=new o(t[4],t[5]),e=new o(t[2],t[3]),t=new o(t[0],t[1])),this.p0=t,this.p1=e,this.p2=i},getStartPoint:function(t){return void 0===t&&(t=new o),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,e){void 0===e&&(e=new o);var i=this.p0,n=this.p1,r=this.p2;return e.set(s(t,i.x,n.x,r.x),s(t,i.y,n.y,r.y))},draw:function(t,e){void 0===e&&(e=32);var i=this.getPoints(e);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var n=1;n<i.length;n++)t.lineTo(i[n].x,i[n].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});a.fromJSON=function(t){var e=t.points,i=new o(e[0],e[1]),n=new o(e[2],e[3]),r=new o(e[4],e[5]);return new a(i,n,r)},t.exports=a},function(t,e,i){var n=i(121),r=i(0),s=i(59),o=i(5),a=new r({Extends:s,initialize:function(t){void 0===t&&(t=[]),s.call(this,"SplineCurve"),this.points=[],this.addPoints(t)},addPoints:function(t){for(var e=0;e<t.length;e++){var i=new o;"number"==typeof t[e]?(i.x=t[e],i.y=t[e+1],e++):Array.isArray(t[e])?(i.x=t[e][0],i.y=t[e][1]):(i.x=t[e].x,i.y=t[e].y),this.points.push(i)}return this},addPoint:function(t,e){var i=new o(t,e);return this.points.push(i),i},getStartPoint:function(t){return void 0===t&&(t=new o),t.copy(this.points[0])},getResolution:function(t){return t*this.points.length},getPoint:function(t,e){void 0===e&&(e=new o);var i=this.points,r=(i.length-1)*t,s=Math.floor(r),a=r-s,h=i[0===s?s:s-1],l=i[s],u=i[s>i.length-2?i.length-1:s+1],c=i[s>i.length-3?i.length-1:s+2];return e.set(n(a,h.x,l.x,u.x,c.x),n(a,h.y,l.y,u.y,c.y))},toJSON:function(){for(var t=[],e=0;e<this.points.length;e++)t.push(this.points[e].x),t.push(this.points[e].y);return{type:this.type,points:t}}});a.fromJSON=function(t){return new a(t.points)},t.exports=a},function(t,e,i){var n=i(71);t.exports=function(t,e){return n(t.x,t.y,e.x,e.y)<=t.radius+e.radius}},function(t,e){t.exports=function(t,e){var i=e.width/2,n=e.height/2,r=Math.abs(t.x-e.x-i),s=Math.abs(t.y-e.y-n),o=i+t.radius,a=n+t.radius;if(r>o||s>a)return!1;if(r<=i||s<=n)return!0;var h=r-i,l=s-n;return h*h+l*l<=t.radius*t.radius}},function(t,e,i){var n=i(27);t.exports=function(t,e,i){var r=t.x1,s=t.y1,o=t.x2,a=t.y2,h=e.x1,l=e.y1,u=o-r,c=a-s,d=e.x2-h,p=e.y2-l;if(0===u||0==p*u-d*c)return!1;var f=(u*(l-s)+c*(r-h))/(d*c-p*u),m=(h+d*f-r)/u;return m<0||f<0||f>1?null:(void 0===i&&(i=new n),i.set(r+u*m,s+c*m,m))}},function(t,e,i){var n=i(27),r=i(311),s=new(i(34)),o=new n;t.exports=function(t,e,i){void 0===i&&(i=new n);var a=!1;i.set(),o.set();for(var h=e[0],l=1;l<e.length;l++){var u=e[l];s.setTo(h.x,h.y,u.x,u.y),h=u,r(t,s,o)&&(!a||o.z<i.z)&&(i.copy(o),a=!0)}return a?i:null}},function(t,e,i){var n=i(27),r=i(124),s=i(312),o=new n;t.exports=function(t,e,i){void 0===i&&(i=new r),Array.isArray(e)||(e=[e]);var n=!1;i.set(),o.set();for(var a=0;a<e.length;a++)s(t,e[a].points,o)&&(!n||o.z<i.z)&&(i.set(o.x,o.y,o.z,a),n=!0);return n?i:null}},function(t,e){t.exports=function(t,e){var i=t.x1,n=t.y1,r=t.x2,s=t.y2,o=e.x,a=e.y,h=e.right,l=e.bottom,u=0;if(i>=o&&i<=h&&n>=a&&n<=l||r>=o&&r<=h&&s>=a&&s<=l)return!0;if(i<o&&r>=o){if((u=n+(s-n)*(o-i)/(r-i))>a&&u<=l)return!0}else if(i>h&&r<=h&&(u=n+(s-n)*(h-i)/(r-i))>=a&&u<=l)return!0;if(n<a&&s>=a){if((u=i+(r-i)*(a-n)/(s-n))>=o&&u<=h)return!0}else if(n>l&&s<=l&&(u=i+(r-i)*(l-n)/(s-n))>=o&&u<=h)return!0;return!1}},function(t,e,i){var n=i(60),r=i(51),s=i(155),o=i(316);t.exports=function(t,e){if(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)return!1;var i=e.getLineA(),a=e.getLineB(),h=e.getLineC();if(r(t,i.x1,i.y1)||r(t,i.x2,i.y2))return!0;if(r(t,a.x1,a.y1)||r(t,a.x2,a.y2))return!0;if(r(t,h.x1,h.y1)||r(t,h.x2,h.y2))return!0;var l=t.getLineA(),u=t.getLineB(),c=t.getLineC(),d=t.getLineD();if(n(i,l)||n(i,u)||n(i,c)||n(i,d))return!0;if(n(a,l)||n(a,u)||n(a,c)||n(a,d))return!0;if(n(h,l)||n(h,u)||n(h,c)||n(h,d))return!0;var p=o(t);return s(e,p,!0).length>0}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=[]),e.push({x:t.x,y:t.y}),e.push({x:t.right,y:t.y}),e.push({x:t.right,y:t.bottom}),e.push({x:t.x,y:t.bottom}),e}},function(t,e,i){var n=i(153),r=i(78);t.exports=function(t,e){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top||!r(t,e.x,e.y)&&!n(t.getLineA(),e)&&!n(t.getLineB(),e)&&!n(t.getLineC(),e))}},function(t,e,i){var n=i(2),r=i(319),s=i(60);t.exports=function(t,e,i){if(void 0===i&&(i=[]),r(t,e))for(var o=t.getLineA(),a=t.getLineB(),h=t.getLineC(),l=[new n,new n,new n],u=[s(o,e,l[0]),s(a,e,l[1]),s(h,e,l[2])],c=0;c<3;c++)u[c]&&i.push(l[c]);return i}},function(t,e,i){var n=i(60);t.exports=function(t,e){return!!(t.contains(e.x1,e.y1)||t.contains(e.x2,e.y2)||n(t.getLineA(),e)||n(t.getLineB(),e)||n(t.getLineC(),e))}},function(t,e,i){var n=i(155),r=i(321),s=i(60);t.exports=function(t,e){if(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)return!1;var i=t.getLineA(),o=t.getLineB(),a=t.getLineC(),h=e.getLineA(),l=e.getLineB(),u=e.getLineC();if(s(i,h)||s(i,l)||s(i,u))return!0;if(s(o,h)||s(o,l)||s(o,u))return!0;if(s(a,h)||s(a,l)||s(a,u))return!0;var c=r(t),d=n(e,c,!0);return d.length>0||(c=r(e),(d=n(t,c,!0)).length>0)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=[]),e.push({x:t.x1,y:t.y1}),e.push({x:t.x2,y:t.y2}),e.push({x:t.x3,y:t.y3}),e}},function(t,e){t.exports=function(t,e,i){void 0===i&&(i=1);var n=e.x1,r=e.y1,s=e.x2,o=e.y2,a=t.x,h=t.y,l=(s-n)*(s-n)+(o-r)*(o-r);if(0===l)return!1;var u=((a-n)*(s-n)+(h-r)*(o-r))/l;if(u<0)return Math.sqrt((n-a)*(n-a)+(r-h)*(r-h))<=i;if(u>=0&&u<=1){var c=((r-h)*(s-n)-(n-a)*(o-r))/l;return Math.abs(c)*Math.sqrt(l)<=i}return Math.sqrt((s-a)*(s-a)+(o-h)*(o-h))<=i}},function(t,e,i){var n=i(10),r=i(53),s=i(61);t.exports=function(t){var e=s(t)-n.TAU;return r(e,-Math.PI,Math.PI)}},function(t,e){var i=!0,n="untitled",r="",s="";function o(t){var e=t.indexOf("#");return e>-1?t.substring(0,e):t}function a(t){return 0===t.models.length&&t.models.push({faces:[],name:n,textureCoords:[],vertexNormals:[],vertices:[]}),r="",t.models[t.models.length-1]}function h(t,e){var i=t.length>=2?t[1]:n;e.models.push({faces:[],name:i,textureCoords:[],vertexNormals:[],vertices:[]}),r=""}function l(t){2===t.length&&(r=t[1])}function u(t,e){var i=t.length,n=i>=2?parseFloat(t[1]):0,r=i>=3?parseFloat(t[2]):0,s=i>=4?parseFloat(t[3]):0;a(e).vertices.push({x:n,y:r,z:s})}function c(t,e){var n=t.length,r=n>=2?parseFloat(t[1]):0,s=n>=3?parseFloat(t[2]):0,o=n>=4?parseFloat(t[3]):0;isNaN(r)&&(r=0),isNaN(s)&&(s=0),isNaN(o)&&(o=0),i&&(s=1-s),a(e).textureCoords.push({u:r,v:s,w:o})}function d(t,e){var i=t.length,n=i>=2?parseFloat(t[1]):0,r=i>=3?parseFloat(t[2]):0,s=i>=4?parseFloat(t[3]):0;a(e).vertexNormals.push({x:n,y:r,z:s})}function p(t,e){var i=t.length-1;if(!(i<3)){for(var n={group:r,material:s,vertices:[]},o=0;o<i;o++){var h=t[o+1].split("/"),l=h.length;if(!(l<1||l>3)){var u=0,c=0,d=0;u=parseInt(h[0],10),l>1&&""!==h[1]&&(c=parseInt(h[1],10)),l>2&&(d=parseInt(h[2],10)),0!==u&&(u<0&&(u=a(e).vertices.length+1+u),c-=1,u-=1,d-=1,n.vertices.push({textureCoordsIndex:c,vertexIndex:u,vertexNormalIndex:d}))}}a(e).faces.push(n)}}function f(t,e){t.length>=2&&e.materialLibraries.push(t[1])}function m(t){t.length>=2&&(s=t[1])}t.exports=function(t,e){void 0===e&&(e=!0),i=e;var n={materials:{},materialLibraries:[],models:[]};r="",s="";for(var a=t.split("\n"),g=0;g<a.length;g++){var v=o(a[g]).replace(/\s\s+/g," ").trim().split(" ");switch(v[0].toLowerCase()){case"o":h(v,n);break;case"g":l(v);break;case"v":u(v,n);break;case"vt":c(v,n);break;case"vn":d(v,n);break;case"f":p(v,n);break;case"mtllib":f(v,n);break;case"usemtl":m(v)}}return n}},function(t,e,i){var n=i(69);t.exports=function(t){for(var e={},i=t.split("\n"),r="",s=0;s<i.length;s++){var o=i[s].trim();if(0!==o.indexOf("#")&&""!==o){var a=o.replace(/\s\s+/g," ").trim().split(" ");switch(a[0].toLowerCase()){case"newmtl":r=a[1];break;case"kd":var h=Math.floor(255*a[1]),l=a.length>=2?Math.floor(255*a[2]):h,u=a.length>=3?Math.floor(255*a[3]):h;e[r]=n(h,l,u)}}}return e}},function(t,e){t.exports=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}},function(t,e){t.exports=function(t){return t.x*t.x+t.y*t.y}},function(t,e,i){var n=i(0),r=i(157),s=i(329),o=i(33),a=new n({initialize:function(t){this.type=o.POLYGON,this.area=0,this.points=[],t&&this.setTo(t)},contains:function(t,e){return r(this,t,e)},setTo:function(t){if(this.area=0,this.points=[],"string"==typeof t&&(t=t.split(" ")),!Array.isArray(t))return this;for(var e,i=Number.MAX_VALUE,n=0;n<t.length;n++)e={x:0,y:0},"number"==typeof t[n]||"string"==typeof t[n]?(e.x=parseFloat(t[n]),e.y=parseFloat(t[n+1]),n++):Array.isArray(t[n])?(e.x=t[n][0],e.y=t[n][1]):(e.x=t[n].x,e.y=t[n].y),this.points.push(e),e.y<i&&(i=e.y);return this.calculateArea(i),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var t,e,i=0,n=0;n<this.points.length-1;n++)t=this.points[n],i+=((e=this.points[n+1]).x-t.x)*(t.y+e.y);return t=this.points[0],e=this.points[this.points.length-1],i+=(t.x-e.x)*(e.y+t.y),this.area=.5*-i,this.area},getPoints:function(t,e,i){return s(this,t,e,i)}});t.exports=a},function(t,e,i){var n=i(43),r=i(34),s=i(330);t.exports=function(t,e,i,o){void 0===o&&(o=[]);var a=t.points,h=s(t);!e&&i>0&&(e=h/i);for(var l=0;l<e;l++)for(var u=h*(l/e),c=0,d=0;d<a.length;d++){var p=a[d],f=a[(d+1)%a.length],m=new r(p.x,p.y,f.x,f.y),g=n(m);if(!(u<c||u>c+g)){var v=m.getPoint((u-c)/g);o.push(v);break}c+=g}return o}},function(t,e,i){var n=i(43),r=i(34);t.exports=function(t){for(var e=t.points,i=0,s=0;s<e.length;s++){var o=e[s],a=e[(s+1)%e.length],h=new r(o.x,o.y,a.x,a.y);i+=n(h)}return i}},function(t,e){t.exports=function(t,e){return!(e.width*e.height>t.width*t.height)&&e.x>t.x&&e.x<t.right&&e.right>t.x&&e.right<t.right&&e.y>t.y&&e.y<t.bottom&&e.bottom>t.y&&e.bottom<t.bottom}},function(t,e,i){var n=i(2);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=(t.x1+t.x2+t.x3)/3,e.y=(t.y1+t.y2+t.y3)/3,e}},function(t,e){t.exports=function(t,e,i){return t.x1+=e,t.y1+=i,t.x2+=e,t.y2+=i,t.x3+=e,t.y3+=i,t}},function(t,e,i){var n=i(2);function r(t,e,i,n){var r=t-i,s=e-n,o=r*r+s*s;return Math.sqrt(o)}t.exports=function(t,e){void 0===e&&(e=new n);var i=t.x1,s=t.y1,o=t.x2,a=t.y2,h=t.x3,l=t.y3,u=r(h,l,o,a),c=r(i,s,h,l),d=r(o,a,i,s),p=u+c+d;return e.x=(i*u+o*c+h*d)/p,e.y=(s*u+a*c+l*d)/p,e}},function(t,e,i){var n=i(26);n.ColorSpectrum=i(1008),n.ColorToRGBA=i(1009),n.ComponentToHex=i(336),n.GetColor=i(69),n.GetColor32=i(187),n.HexStringToColor=i(186),n.HSLToColor=i(1010),n.HSVColorWheel=i(1011),n.HSVToRGB=i(114),n.HueToComponent=i(337),n.IntegerToColor=i(189),n.IntegerToRGB=i(190),n.Interpolate=i(1012),n.ObjectToColor=i(191),n.RandomRGB=i(1013),n.RGBStringToColor=i(192),n.RGBToHSV=i(188),n.RGBToString=i(1014),n.ValueToColor=i(113),t.exports=n},function(t,e){t.exports=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e}},function(t,e){t.exports=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}},function(t,e,i){var n=i(28),r=i(62),s=i(38),o=i(63);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,r(e)+i),s(t,n(e)+a),t}},function(t,e,i){var n=i(28),r=i(29),s=i(38),o=i(39);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,r(e)-i),s(t,n(e)+a),t}},function(t,e,i){var n=i(28),r=i(30),s=i(38),o=i(40);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,r(e)+i),s(t,n(e)+a),t}},function(t,e,i){var n=i(342),r=i(62),s=i(65);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),n(t,r(e)+i,s(e)+o),t}},function(t,e,i){var n=i(63),r=i(64);t.exports=function(t,e,i){return n(t,e),r(t,i)}},function(t,e,i){var n=i(65),r=i(29),s=i(64),o=i(39);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,r(e)-i),s(t,n(e)+a),t}},function(t,e,i){var n=i(65),r=i(30),s=i(64),o=i(40);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,r(e)+i),s(t,n(e)+a),t}},function(t,e,i){var n=i(62),r=i(31),s=i(63),o=i(41);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,n(e)+i),o(t,r(e)-a),t}},function(t,e,i){var n=i(29),r=i(31),s=i(39),o=i(41);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,n(e)-i),o(t,r(e)-a),t}},function(t,e,i){var n=i(30),r=i(31),s=i(40),o=i(41);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,n(e)+i),o(t,r(e)-a),t}},function(t,e,i){var n=i(28),r=i(62),s=i(63),o=i(41);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,r(e)+i),o(t,n(e)+a),t}},function(t,e,i){var n=i(28),r=i(29),s=i(39),o=i(41);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,r(e)-i),o(t,n(e)+a),t}},function(t,e,i){var n=i(28),r=i(30),s=i(40),o=i(41);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,r(e)+i),o(t,n(e)+a),t}},function(t,e,i){var n=i(28),r=i(29),s=i(38),o=i(40);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,r(e)-i),s(t,n(e)+a),t}},function(t,e,i){var n=i(65),r=i(29),s=i(64),o=i(40);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,r(e)-i),s(t,n(e)+a),t}},function(t,e,i){var n=i(29),r=i(31),s=i(40),o=i(41);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,n(e)-i),o(t,r(e)-a),t}},function(t,e,i){var n=i(28),r=i(30),s=i(38),o=i(39);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,r(e)+i),s(t,n(e)+a),t}},function(t,e,i){var n=i(65),r=i(30),s=i(64),o=i(39);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,r(e)+i),s(t,n(e)+a),t}},function(t,e,i){var n=i(30),r=i(31),s=i(39),o=i(41);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,n(e)+i),o(t,r(e)-a),t}},function(t,e,i){var n=i(62),r=i(31),s=i(38),o=i(63);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)+i),s(t,r(e)-a),t}},function(t,e,i){var n=i(29),r=i(31),s=i(38),o=i(39);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)-i),s(t,r(e)-a),t}},function(t,e,i){var n=i(30),r=i(31),s=i(38),o=i(40);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)+i),s(t,r(e)-a),t}},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n){e&&""!==e||(e=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join("\n")),i&&""!==i||(i=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join("\n")),void 0===n&&(n=null),this.key=t,this.fragmentSrc=e,this.vertexSrc=i,this.uniforms=n}});t.exports=n},function(t,e,i){var n=i(161);t.exports=function(t,e){var i=n(e,t.xhrSettings),r=new XMLHttpRequest;if(r.open("GET",t.src,i.async,i.user,i.password),r.responseType=t.xhrSettings.responseType,r.timeout=i.timeout,i.headers)for(var s in i.headers)r.setRequestHeader(s,i.headers[s]);return i.header&&i.headerValue&&r.setRequestHeader(i.header,i.headerValue),i.requestedWith&&r.setRequestHeader("X-Requested-With",i.requestedWith),i.overrideMimeType&&r.overrideMimeType(i.overrideMimeType),i.withCredentials&&(r.withCredentials=!0),r.onload=t.onLoad.bind(t,r),r.onerror=t.onError.bind(t,r),r.onprogress=t.onProgress.bind(t),r.send(),r}},function(t,e,i){var n=i(0),r=i(11),s=i(12),o=i(3),a=i(1),h=i(363),l=i(6),u=new n({Extends:s,initialize:function(t,e,i,n,r){if(l(e)){var o=e;e=a(o,"key"),n=a(o,"xhrSettings"),r=a(o,"context",r)}var h={type:"audio",cache:t.cacheManager.audio,extension:i.type,responseType:"arraybuffer",key:e,url:i.url,xhrSettings:n,config:{context:r}};s.call(this,t,h)},onProcess:function(){this.state=r.FILE_PROCESSING;var t=this;this.config.context.decodeAudioData(this.xhrLoader.response,(function(e){t.data=e,t.onProcessComplete()}),(function(e){t.onProcessError()})),this.config.context=null}});u.create=function(t,e,i,n,r){var s=t.systems.game,o=s.config.audio,c=s.device.audio;l(e)&&(i=a(e,"url",[]),n=a(e,"config",{}));var d=u.getAudioURL(s,i);return d?c.webAudio&&!o.disableWebAudio?new u(t,e,d,r,s.sound.context):new h(t,e,d,n):null},u.getAudioURL=function(t,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var n=a(e[i],"url",e[i]);if(0===n.indexOf("blob:")||0===n.indexOf("data:"))return{url:n,type:""};var r=n.match(/\.([a-zA-Z0-9]+)($|\?)/);if(r=a(e[i],"type",r?r[1]:"").toLowerCase(),t.device.audio[r])return{url:n,type:r}}return null},o.register("audio",(function(t,e,i,n){var r,s=this.systems.game,o=s.config.audio,a=s.device.audio;if(o.noAudio||!a.webAudio&&!a.audioData)return this;if(Array.isArray(t))for(var h=0;h<t.length;h++)(r=u.create(this,t[h]))&&this.addFile(r);else(r=u.create(this,t,e,i,n))&&this.addFile(r);return this})),t.exports=u},function(t,e,i){var n=i(0),r=i(55),s=i(12),o=i(1),a=i(105),h=i(6),l=new n({Extends:s,initialize:function(t,e,i,n){if(h(e)){var r=e;e=o(r,"key"),n=o(r,"config",n)}var a={type:"audio",cache:t.cacheManager.audio,extension:i.type,key:e,url:i.url,config:n};s.call(this,t,a),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var t=0;t<this.data.length;t++){var e=this.data[t];e.oncanplaythrough=null,e.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(t){var e=t.target;e.oncanplaythrough=null,e.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(r.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var t=this.config&&this.config.instances||1;this.filesTotal=t,this.filesLoaded=0,this.percentComplete=0;for(var e=0;e<t;e++){var i=new Audio;i.dataset||(i.dataset={}),i.dataset.name=this.key+("0"+e).slice(-2),i.dataset.used="false",this.locked?i.dataset.locked="true":(i.dataset.locked="false",i.preload="auto",i.oncanplaythrough=this.onProgress.bind(this),i.onerror=this.onError.bind(this)),this.data.push(i)}for(e=0;e<this.data.length;e++)(i=this.data[e]).src=a(this,this.loader.baseURL),this.locked||i.load();this.locked&&setTimeout(this.onLoad.bind(this))}});t.exports=l},function(t,e,i){var n=i(0),r=i(11),s=i(12),o=i(3),a=i(1),h=i(6),l=new n({Extends:s,initialize:function(t,e,i,n){var r="js";if(h(e)){var o=e;e=a(o,"key"),i=a(o,"url"),n=a(o,"xhrSettings"),r=a(o,"extension",r)}var l={type:"script",cache:!1,extension:r,responseType:"text",key:e,url:i,xhrSettings:n};s.call(this,t,l)},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("script",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){(function(e){i(367);var n=i(22),r=i(18),s={Cameras:{Scene2D:i(376)},Events:i(493),Game:i(494),Renderer:i(697),Plugins:i(704),Scene:i(706),Input:i(708),Tweens:i(738),Class:i(756),Time:i(757),GameObjects:{DisplayList:i(759),UpdateList:i(804),Image:i(143),Sprite:i(144),Graphics:i(145),Container:i(147),Particles:i(148),Text:i(150),Tilesprite:i(838),Rectangle:i(296),Arc:i(301),Factories:{Image:i(848),Sprite:i(849),Graphics:i(850),Container:i(851),Particles:i(852),Text:i(853),Tilesprite:i(854),Rectangle:i(855),Arc:i(856)},Creators:{Image:i(857),Sprite:i(858),Graphics:i(860),Container:i(861),Particles:i(862),Text:i(863),Tilesprite:i(864)}},Utils:i(865),Curves:i(880),Geom:i(882),Color:i(335),Display:i(1015),Loader:i(1030),Math:i(120)};s=r(!1,s,n),t.exports=s,e.Phaser=s}).call(this,i(366))},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==("undefined"==typeof window?"undefined":o(window))&&(i=window)}t.exports=i},function(t,e,i){i(368),i(369),i(370),i(371),i(372),i(373),i(374),i(375)},function(t,e){Array.prototype.forEach||(Array.prototype.forEach=function(t){"use strict";if(null==this)throw new TypeError;var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var n=arguments.length>=2?arguments[1]:void 0,r=0;r<i;r++)r in e&&t.call(n,e[r],r,e)})},function(t,e){Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)})},function(t,e){!function(){function t(t){t&&(t.setTargetAtTime||(t.setTargetAtTime=t.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.hasOwnProperty("createPeriodicWave")||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var e=this.internal_createGain();return t(e.gain),e},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(e){var i=e?this.internal_createDelay(e):this.internal_createDelay();return t(i.delayTime),i},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var e=this.internal_createBufferSource();return e.start?(e.internal_start=e.start,e.start=function(t,i,n){void 0!==n?e.internal_start(t||0,i,n):e.internal_start(t||0,i||0)}):e.start=function(t,e,i){e||i?this.noteGrainOn(t||0,e,i):this.noteOn(t||0)},e.stop?(e.internal_stop=e.stop,e.stop=function(t){e.internal_stop(t||0)}):e.stop=function(t){this.noteOff(t||0)},t(e.playbackRate),e},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var e=this.internal_createDynamicsCompressor();return t(e.threshold),t(e.knee),t(e.ratio),t(e.reduction),t(e.attack),t(e.release),e},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var e=this.internal_createBiquadFilter();return t(e.frequency),t(e.detune),t(e.Q),t(e.gain),e},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var e=this.internal_createOscillator();return e.start?(e.internal_start=e.start,e.start=function(t){e.internal_start(t||0)}):e.start=function(t){this.noteOn(t||0)},e.stop?(e.internal_stop=e.stop,e.stop=function(t){e.internal_stop(t||0)}):e.stop=function(t){this.noteOff(t||0)},e.setPeriodicWave||(e.setPeriodicWave=e.setWaveTable),t(e.frequency),t(e.detune),e})),window.hasOwnProperty("webkitOfflineAudioContext")&&!window.hasOwnProperty("OfflineAudioContext")&&(window.OfflineAudioContext=webkitOfflineAudioContext)}()},function(t,e){window.console||(window.console={},window.console.log=window.console.assert=function(){},window.console.warn=window.console.assert=function(){})},function(t,e){Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)})},function(t,e){!function(){if("performance"in window==0&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==0){var t=Date.now();performance.timing&&performance.timing.navigationStart&&(t=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-t}}}()},function(t,e){for(var i=Date.now(),n=["ms","moz","webkit","o"],r=0;r<n.length&&!window.requestAnimationFrame;r++)window.requestAnimationFrame=window[n[r]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[r]+"CancelAnimationFrame"]||window[n[r]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+i-e;return n<0&&(n=0),i=e,setTimeout((function(){i=Date.now(),t(performance.now())}),n)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})},function(t,e){if("function"!=typeof window.Uint32Array&&"object"!=o(window.Uint32Array)){var i=function(t){var e=new Array;window[t]=function(t){if("number"==typeof t){Array.call(this,t),this.length=t;for(var e=0;e<this.length;e++)this[e]=0}else for(Array.call(this,t.length),this.length=t.length,e=0;e<this.length;e++)this[e]=t[e]},window[t].prototype=e,window[t].constructor=window[t]};i("Float32Array"),i("Uint32Array"),i("Uint16Array"),i("Int16Array"),i("ArrayBuffer")}},function(t,e,i){t.exports={Camera:i(166),BaseCamera:i(107),CameraManager:i(464),Effects:i(193),Events:i(25)}},function(t,e,i){var n=i(13),r={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t,e,i,r){return void 0===t&&(t=1),void 0===e?this.alpha=t:(this._alphaTL=n(t,0,1),this._alphaTR=n(e,0,1),this._alphaBL=n(i,0,1),this._alphaBR=n(r,0,1)),this},alpha:{get:function(){return this._alpha},set:function(t){var e=n(t,0,1);this._alpha=e,this._alphaTL=e,this._alphaTR=e,this._alphaBL=e,this._alphaBR=e,0===e?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(t){var e=n(t,0,1);this._alphaTL=e,0!==e&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(t){var e=n(t,0,1);this._alphaTR=e,0!==e&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(t){var e=n(t,0,1);this._alphaBL=e,0!==e&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(t){var e=n(t,0,1);this._alphaBR=e,0!==e&&(this.renderFlags|=2)}}};t.exports=r},function(t,e){t.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}}},function(t,e){t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,i,n){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,e,i,n,this.flipX,this.flipY);else{var r=t;this.frame.setCropUVs(this._crop,r.x,r.y,r.width,r.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(t,e){t.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},function(t,e,i){var n=i(8),r=i(175),s=i(5),o={prepareBoundsOutput:function(t,e){return void 0===e&&(e=!1),0!==this.rotation&&r(t,this.x,this.y,this.rotation),e&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t),t},getCenter:function(t){return void 0===t&&(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopCenter:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopRight:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getLeftCenter:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getRightCenter:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getBottomLeft:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomCenter:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomRight:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBounds:function(t){var e,i,r,s,o,a,h,l;if(void 0===t&&(t=new n),this.parentContainer){var u=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(t),u.transformPoint(t.x,t.y,t),e=t.x,i=t.y,this.getTopRight(t),u.transformPoint(t.x,t.y,t),r=t.x,s=t.y,this.getBottomLeft(t),u.transformPoint(t.x,t.y,t),o=t.x,a=t.y,this.getBottomRight(t),u.transformPoint(t.x,t.y,t),h=t.x,l=t.y}else this.getTopLeft(t),e=t.x,i=t.y,this.getTopRight(t),r=t.x,s=t.y,this.getBottomLeft(t),o=t.x,a=t.y,this.getBottomRight(t),h=t.x,l=t.y;return t.x=Math.min(e,r,o,h),t.y=Math.min(i,s,a,l),t.width=Math.max(e,r,o,h)-t.x,t.height=Math.max(i,s,a,l)-t.y,t}};t.exports=o},function(t,e){t.exports="blur"},function(t,e){t.exports="boot"},function(t,e){t.exports="contextlost"},function(t,e){t.exports="contextrestored"},function(t,e){t.exports="destroy"},function(t,e){t.exports="focus"},function(t,e){t.exports="hidden"},function(t,e){t.exports="pause"},function(t,e){t.exports="postrender"},function(t,e){t.exports="poststep"},function(t,e){t.exports="prerender"},function(t,e){t.exports="prestep"},function(t,e){t.exports="ready"},function(t,e){t.exports="resume"},function(t,e){t.exports="step"},function(t,e){t.exports="visible"},function(t,e){t.exports="postrender"},function(t,e){t.exports="prerender"},function(t,e){t.exports="render"},function(t,e){t.exports="resize"},function(t,e){t.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.displayOriginX=t,this.displayOriginY=e,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},function(t,e,i){var n=i(44),r=i(66),s=i(7),o=i(67),a=i(5),h={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:o.PLAYING_FORWARD,setPath:function(t,e){void 0===e&&(e=this.pathConfig);var i=this.pathTween;return i&&i.isPlaying()&&i.stop(),this.path=t,e&&this.startFollow(e),this},setRotateToPath:function(t,e){return void 0===e&&(e=0),this.rotateToPath=t,this.pathRotationOffset=e,this},isFollowing:function(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function(t,e){void 0===t&&(t={}),void 0===e&&(e=0);var i=this.pathTween;i&&i.isPlaying()&&i.stop(),"number"==typeof t&&(t={duration:t}),t.from=s(t,"from",0),t.to=s(t,"to",1);var h=r(t,"positionOnPath",!1);this.rotateToPath=r(t,"rotateToPath",!1),this.pathRotationOffset=s(t,"rotationOffset",0);var l=s(t,"startAt",e);if(l&&(t.onStart=function(t){var e=t.data[0];e.progress=l,e.elapsed=e.duration*l;var i=e.ease(e.progress);e.current=e.start+(e.end-e.start)*i,e.target[e.key]=e.current}),this.pathOffset||(this.pathOffset=new a(this.x,this.y)),this.pathVector||(this.pathVector=new a),this.pathDelta||(this.pathDelta=new a),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),h&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=o.PLAYING_FORWARD,this.rotateToPath){var u=this.path.getPoint(.1);this.rotation=Math.atan2(u.y-this.y,u.x-this.x)+n(this.pathRotationOffset)}return this.pathConfig=t,this},pauseFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function(){var t=this.pathTween;if(t){var e=t.data[0],i=this.pathDelta,r=this.pathVector;if(i.copy(r).negate(),e.state===o.COMPLETE)return this.path.getPoint(1,r),i.add(r),r.add(this.pathOffset),void this.setPosition(r.x,r.y);if(e.state!==o.PLAYING_FORWARD&&e.state!==o.PLAYING_BACKWARD)return;this.path.getPoint(t.getValue(),r),i.add(r),r.add(this.pathOffset);var s=this.x,a=this.y;this.setPosition(r.x,r.y);var h=this.x-s,l=this.y-a;if(0===h&&0===l)return;if(e.state!==this._prevDirection)return void(this._prevDirection=e.state);this.rotateToPath&&(this.rotation=Math.atan2(l,h)+n(this.pathRotationOffset))}}};t.exports=h},function(t,e){var i={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){return void 0===t&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}};t.exports=i},function(t,e){t.exports={texture:null,frame:null,isCropped:!1,setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}}},function(t,e){t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,i,n){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,e,i,n,this.flipX,this.flipY);else{var r=t;this.frame.setCropUVs(this._crop,r.x,r.y,r.width,r.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(t,e){t.exports={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,e,i,n){return void 0===t&&(t=16777215),void 0===e&&(e=t,i=t,n=t),this.tintTopLeft=t,this.tintTopRight=e,this.tintBottomLeft=i,this.tintBottomRight=n,this.tintFill=!1,this},setTintFill:function(t,e,i,n){return this.setTint(t,e,i,n),this.tintFill=!0,this},tint:{set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){return this.tintFill||16777215!==this.tintTopLeft||16777215!==this.tintTopRight||16777215!==this.tintBottomLeft||16777215!==this.tintBottomRight}}}},function(t,e){t.exports="cameradestroy"},function(t,e){t.exports="camerafadeincomplete"},function(t,e){t.exports="camerafadeinstart"},function(t,e){t.exports="camerafadeoutcomplete"},function(t,e){t.exports="camerafadeoutstart"},function(t,e){t.exports="cameraflashcomplete"},function(t,e){t.exports="cameraflashstart"},function(t,e){t.exports="followupdate"},function(t,e){t.exports="camerapancomplete"},function(t,e){t.exports="camerapanstart"},function(t,e){t.exports="postrender"},function(t,e){t.exports="prerender"},function(t,e){t.exports="camerarotatecomplete"},function(t,e){t.exports="camerarotatestart"},function(t,e){t.exports="camerashakecomplete"},function(t,e){t.exports="camerashakestart"},function(t,e){t.exports="camerazoomcomplete"},function(t,e){t.exports="camerazoomstart"},function(t,e,i){var n=i(13),r=i(0),s=i(25),o=new r({initialize:function(t){this.camera=t,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,n,r,o,a,h){if(void 0===t&&(t=!0),void 0===e&&(e=1e3),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=!1),void 0===a&&(a=null),void 0===h&&(h=this.camera.scene),!o&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=e,this.direction=t,this.progress=0,this.red=i,this.green=n,this.blue=r,this.alpha=t?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=a,this._onUpdateScope=h;var l=t?s.FADE_OUT_START:s.FADE_IN_START;return this.camera.emit(l,this.camera,this,e,i,n,r),this.camera},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(t){if(!this.isRunning&&!this.isComplete)return!1;var e=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(e.x,e.y,e.width,e.height),!0},postRenderWebGL:function(t,e){if(!this.isRunning&&!this.isComplete)return!1;var i=this.camera,n=this.red/255,r=this.green/255,s=this.blue/255;return t.drawFillRect(i.x,i.y,i.width,i.height,e(s,r,n,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var t=this.direction?s.FADE_OUT_COMPLETE:s.FADE_IN_COMPLETE;this.camera.emit(t,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=o},function(t,e,i){var n=i(13),r=i(0),s=i(25),o=new r({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,n,r,o,a){return void 0===t&&(t=250),void 0===e&&(e=255),void 0===i&&(i=255),void 0===n&&(n=255),void 0===r&&(r=!1),void 0===o&&(o=null),void 0===a&&(a=this.camera.scene),!r&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,this.red=e,this.green=i,this.blue=n,this.alpha=1,this._elapsed=0,this._onUpdate=o,this._onUpdateScope=a,this.camera.emit(s.FLASH_START,this.camera,this,t,e,i,n)),this.camera},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(t){if(!this.isRunning)return!1;var e=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(e.x,e.y,e.width,e.height),!0},postRenderWebGL:function(t,e){if(!this.isRunning)return!1;var i=this.camera,n=this.red/255,r=this.green/255,s=this.blue/255;return t.drawFillRect(i.x,i.y,i.width,i.height,e(s,r,n,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=o},function(t,e,i){var n=i(13),r=i(0),s=i(81),o=i(25),a=i(5),h=new r({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=new a,this.current=new a,this.destination=new a,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,n,r,a,h){void 0===i&&(i=1e3),void 0===n&&(n=s.Linear),void 0===r&&(r=!1),void 0===a&&(a=null),void 0===h&&(h=this.camera.scene);var l=this.camera;return!r&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source.set(l.scrollX,l.scrollY),this.destination.set(t,e),l.getScroll(t,e,this.current),"string"==typeof n&&s.hasOwnProperty(n)?this.ease=s[n]:"function"==typeof n&&(this.ease=n),this._elapsed=0,this._onUpdate=a,this._onUpdateScope=h,this.camera.emit(o.PAN_START,this.camera,this,i,t,e)),l},update:function(t,e){if(this.isRunning){this._elapsed+=e;var i=n(this._elapsed/this.duration,0,1);this.progress=i;var r=this.camera;if(this._elapsed<this.duration){var s=this.ease(i);r.getScroll(this.destination.x,this.destination.y,this.current);var o=this.source.x+(this.current.x-this.source.x)*s,a=this.source.y+(this.current.y-this.source.y)*s;r.setScroll(o,a),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,i,o,a)}else r.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,i,r.scrollX,r.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=h},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1.70158);var i=1.525*e;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)}},function(t,e){t.exports=function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},function(t,e){t.exports=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},function(t,e){t.exports=function(t){var e=!1;return t<.5?(t=1-2*t,e=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}},function(t,e){t.exports=function(t){return 1-Math.sqrt(1-t*t)}},function(t,e){t.exports=function(t){return Math.sqrt(1- --t*t)}},function(t,e){t.exports=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},function(t,e){t.exports=function(t){return t*t*t}},function(t,e){t.exports=function(t){return--t*t*t+1}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(t,e){t.exports=function(t,e,i){if(void 0===e&&(e=.1),void 0===i&&(i=.1),0===t)return 0;if(1===t)return 1;var n=i/4;return e<1?e=1:n=i*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/i)}},function(t,e){t.exports=function(t,e,i){if(void 0===e&&(e=.1),void 0===i&&(i=.1),0===t)return 0;if(1===t)return 1;var n=i/4;return e<1?e=1:n=i*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-n)*(2*Math.PI)/i)+1}},function(t,e){t.exports=function(t,e,i){if(void 0===e&&(e=.1),void 0===i&&(i=.1),0===t)return 0;if(1===t)return 1;var n=i/4;return e<1?e=1:n=i*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/i)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/i)*.5+1}},function(t,e){t.exports=function(t){return Math.pow(2,10*(t-1))-.001}},function(t,e){t.exports=function(t){return 1-Math.pow(2,-10*t)}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},function(t,e){t.exports=function(t){return t}},function(t,e){t.exports=function(t){return t*t}},function(t,e){t.exports=function(t){return t*(2-t)}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},function(t,e){t.exports=function(t){return t*t*t*t}},function(t,e){t.exports=function(t){return 1- --t*t*t*t}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},function(t,e){t.exports=function(t){return t*t*t*t*t}},function(t,e){t.exports=function(t){return--t*t*t*t*t+1}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1),t<=0?0:t>=1?1:1/e*(1+(e*t|0))}},function(t,e,i){var n=i(13),r=i(0),s=i(25),o=i(5),a=new r({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.intensity=new o,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,n,r){return void 0===t&&(t=100),void 0===e&&(e=.05),void 0===i&&(i=!1),void 0===n&&(n=null),void 0===r&&(r=this.camera.scene),!i&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,"number"==typeof e?this.intensity.set(e):this.intensity.set(e.x,e.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=n,this._onUpdateScope=r,this.camera.emit(s.SHAKE_START,this.camera,this,t,e)),this.camera},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(t,e){if(this.isRunning)if(this._elapsed+=e,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var i=this.intensity,r=this.camera.width,s=this.camera.height,o=this.camera.zoom;this._offsetX=(Math.random()*i.x*r*2-i.x*r)*o,this._offsetY=(Math.random()*i.y*s*2-i.y*s)*o,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});t.exports=a},function(t,e,i){var n=i(13),r=i(0),s=i(25),o=i(81),a=new r({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(t,e,i,n,r,a,h){void 0===i&&(i=1e3),void 0===n&&(n=o.Linear),void 0===r&&(r=!1),void 0===a&&(a=null),void 0===h&&(h=this.camera.scene),void 0===e&&(e=!1),this.shortestPath=e;var l=t;t<0?(l=-1*t,this.clockwise=!1):this.clockwise=!0;var u=360*Math.PI/180;l-=Math.floor(l/u)*u;var c,d,p=this.camera;if(!r&&this.isRunning)return p;(this.isRunning=!0,this.duration=i,this.progress=0,this.source=p.rotation,this.destination=l,"string"==typeof n&&o.hasOwnProperty(n)?this.ease=o[n]:"function"==typeof n&&(this.ease=n),this._elapsed=0,this._onUpdate=a,this._onUpdateScope=h,this.shortestPath)&&((c=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+u)-this.source)<(d=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+u)-this.destination)?this.clockwise=!0:c>d&&(this.clockwise=!1));return this.camera.emit(s.ROTATE_START,this.camera,this,i,l),p},update:function(t,e){if(this.isRunning){this._elapsed+=e;var i=n(this._elapsed/this.duration,0,1);this.progress=i;var r=this.camera;if(this._elapsed<this.duration){var s=this.ease(i);this.current=r.rotation;var o,a,h=360*Math.PI/180,l=this.destination,u=this.current;!1===this.clockwise&&(l=this.current,u=this.destination),o=l>=u?Math.abs(l-u):Math.abs(l+h)-u,a=this.clockwise?r.rotation+o*s:r.rotation-o*s,r.rotation=a,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,i,a)}else r.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,i,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=a},function(t,e,i){var n=i(13),r=i(0),s=i(81),o=i(25),a=new r({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,n,r,a){void 0===e&&(e=1e3),void 0===i&&(i=s.Linear),void 0===n&&(n=!1),void 0===r&&(r=null),void 0===a&&(a=this.camera.scene);var h=this.camera;return!n&&this.isRunning||(this.isRunning=!0,this.duration=e,this.progress=0,this.source=h.zoom,this.destination=t,"string"==typeof i&&s.hasOwnProperty(i)?this.ease=s[i]:"function"==typeof i&&(this.ease=i),this._elapsed=0,this._onUpdate=r,this._onUpdateScope=a,this.camera.emit(o.ZOOM_START,this.camera,this,e,t)),h},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=n(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=a},function(t,e,i){var n=i(166),r=i(0),s=i(1),o=i(16),a=i(51),h=i(83),l=i(15),u=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.roundPixels=t.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,t.sys.events.once(l.BOOT,this.boot,this),t.sys.events.on(l.START,this.start,this)},boot:function(){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new n(0,0,t.scale.width,t.scale.height).setScene(this.scene),t.game.scale.on(h.RESIZE,this.onResize,this),this.systems.events.once(l.DESTROY,this.destroy,this)},start:function(){if(!this.main){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0]}var e=this.systems.events;e.on(l.UPDATE,this.update,this),e.once(l.SHUTDOWN,this.shutdown,this)},add:function(t,e,i,r,s,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.scene.sys.scale.width),void 0===r&&(r=this.scene.sys.scale.height),void 0===s&&(s=!1),void 0===o&&(o="");var a=new n(t,e,i,r);return a.setName(o),a.setScene(this.scene),a.setRoundPixels(this.roundPixels),a.id=this.getNextID(),this.cameras.push(a),s&&(this.main=a),a},addExisting:function(t,e){return void 0===e&&(e=!1),-1===this.cameras.indexOf(t)?(t.id=this.getNextID(),t.setRoundPixels(this.roundPixels),this.cameras.push(t),e&&(this.main=t),t):null},getNextID:function(){for(var t=this.cameras,e=1,i=0;i<32;i++){for(var n=!1,r=0;r<t.length;r++){var s=t[r];s&&s.id===e&&(n=!0)}if(!n)return e;e<<=1}return 0},getTotal:function(t){void 0===t&&(t=!1);for(var e=0,i=this.cameras,n=0;n<i.length;n++){var r=i[n];(!t||t&&r.visible)&&e++}return e},fromJSON:function(t){Array.isArray(t)||(t=[t]);for(var e=this.scene.sys.scale.width,i=this.scene.sys.scale.height,n=0;n<t.length;n++){var r=t[n],o=s(r,"x",0),a=s(r,"y",0),h=s(r,"width",e),l=s(r,"height",i),u=this.add(o,a,h,l);u.name=s(r,"name",""),u.zoom=s(r,"zoom",1),u.rotation=s(r,"rotation",0),u.scrollX=s(r,"scrollX",0),u.scrollY=s(r,"scrollY",0),u.roundPixels=s(r,"roundPixels",!1),u.visible=s(r,"visible",!0);var c=s(r,"backgroundColor",!1);c&&u.setBackgroundColor(c);var d=s(r,"bounds",null);if(d){var p=s(d,"x",0),f=s(d,"y",0),m=s(d,"width",e),g=s(d,"height",i);u.setBounds(p,f,m,g)}}return this},getCamera:function(t){for(var e=this.cameras,i=0;i<e.length;i++)if(e[i].name===t)return e[i];return null},getCamerasBelowPointer:function(t){for(var e=this.cameras,i=t.x,n=t.y,r=[],s=0;s<e.length;s++){var o=e[s];o.visible&&o.inputEnabled&&a(o,i,n)&&r.unshift(o)}return r},remove:function(t,e){void 0===e&&(e=!0),Array.isArray(t)||(t=[t]);for(var i=0,n=this.cameras,r=0;r<t.length;r++){var s=n.indexOf(t[r]);-1!==s&&(e?n[s].destroy():n[s].renderList=[],n.splice(s,1),i++)}return!this.main&&n[0]&&(this.main=n[0]),i},render:function(t,e){for(var i=this.scene,n=this.cameras,r=0;r<this.cameras.length;r++){var s=n[r];if(s.visible&&s.alpha>0){s.preRender();var o=this.getVisibleChildren(e.getChildren(),s);t.render(i,o,s)}}},getVisibleChildren:function(t,e){for(var i=[],n=0;n<t.length;n++){var r=t[n];r.willRender(e)&&i.push(r)}return i},resetAll:function(){for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(t,e){for(var i=0;i<this.cameras.length;i++)this.cameras[i].update(t,e)},onResize:function(t,e,i,n,r){for(var s=0;s<this.cameras.length;s++){var o=this.cameras[s];0===o._x&&0===o._y&&o._width===n&&o._height===r&&o.setSize(e.width,e.height)}},resize:function(t,e){for(var i=0;i<this.cameras.length;i++)this.cameras[i].setSize(t,e)},shutdown:function(){this.main=void 0;for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();this.cameras=[];var e=this.systems.events;e.off(l.UPDATE,this.update,this),e.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});o.register("CameraManager",u,"cameras"),t.exports=u},function(t,e){t.exports="enterfullscreen"},function(t,e){t.exports="fullscreenfailed"},function(t,e){t.exports="fullscreenunsupported"},function(t,e){t.exports="leavefullscreen"},function(t,e){t.exports="orientationchange"},function(t,e){t.exports="resize"},function(t,e){t.exports="addedtoscene"},function(t,e){t.exports="boot"},function(t,e){t.exports="create"},function(t,e){t.exports="destroy"},function(t,e){t.exports="pause"},function(t,e){t.exports="postupdate"},function(t,e){t.exports="prerender"},function(t,e){t.exports="preupdate"},function(t,e){t.exports="ready"},function(t,e){t.exports="removedfromscene"},function(t,e){t.exports="render"},function(t,e){t.exports="resume"},function(t,e){t.exports="shutdown"},function(t,e){t.exports="sleep"},function(t,e){t.exports="start"},function(t,e){t.exports="transitioncomplete"},function(t,e){t.exports="transitioninit"},function(t,e){t.exports="transitionout"},function(t,e){t.exports="transitionstart"},function(t,e){t.exports="transitionwake"},function(t,e){t.exports="update"},function(t,e){t.exports="wake"},function(t,e,i){var n=i(0),r=i(9),s=i(16),o=new n({Extends:r,initialize:function(){r.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});s.register("EventEmitter",o,"events"),t.exports=o},function(t,e,i){var n=i(116),r=i(495),s=i(508),o=i(17),a=i(0),h=i(513),l=i(575),u=i(576),c=i(243),d=i(610),p=i(210),f=i(611),m=i(9),g=i(14),v=i(244),y=i(16),A=i(249),x=i(658),w=i(251),b=i(90),S=i(679),E=i(694),T=i(696),_=new a({initialize:function(t){this.config=new h(t),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new m,this.anims=new r(this),this.textures=new S(this),this.cache=new s(this),this.registry=new c(this),this.input=new v(this,this.config),this.scene=new w(this,this.config.sceneConfig),this.device=p,this.scale=new x(this,this.config),this.sound=null,this.loop=new E(this,this.config.fps),this.plugins=new A(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,f(this.boot.bind(this))},boot:function(){y.hasCore("EventEmitter")&&(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),u(this),l(this),d(this),n(this.canvas,this.config.parent),this.textures.once(b.READY,this.texturesReady,this),this.events.emit(g.BOOT))},texturesReady:function(){this.events.emit(g.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),T(this);var t=this.events;t.on(g.HIDDEN,this.onHidden,this),t.on(g.VISIBLE,this.onVisible,this),t.on(g.BLUR,this.onBlur,this),t.on(g.FOCUS,this.onFocus,this)},step:function(t,e){if(this.pendingDestroy)return this.runDestroy();var i=this.events;i.emit(g.PRE_STEP,t,e),i.emit(g.STEP,t,e),this.scene.update(t,e),i.emit(g.POST_STEP,t,e);var n=this.renderer;n.preRender(),i.emit(g.PRE_RENDER,n,t,e),this.scene.render(n),n.postRender(),i.emit(g.POST_RENDER,n,t,e)},headlessStep:function(t,e){if(this.pendingDestroy)return this.runDestroy();var i=this.events;i.emit(g.PRE_STEP,t,e),i.emit(g.STEP,t,e),this.scene.update(t,e),i.emit(g.POST_STEP,t,e),i.emit(g.PRE_RENDER),i.emit(g.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(g.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(g.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(t,e){void 0===e&&(e=!1),this.pendingDestroy=!0,this.removeCanvas=t,this.noReturn=e},runDestroy:function(){this.scene.destroy(),this.events.emit(g.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(o.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});t.exports=_},function(t,e,i){var n=i(206),r=i(0),s=i(84),o=i(9),a=i(117),h=i(14),l=i(1),u=i(7),c=i(118),d=i(209),p=new r({Extends:o,initialize:function(t){o.call(this),this.game=t,this.textureManager=null,this.globalTimeScale=1,this.anims=new s,this.mixes=new s,this.paused=!1,this.name="AnimationManager",t.events.once(h.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(h.DESTROY,this.destroy,this)},addMix:function(t,e,i){var n=this.anims,r=this.mixes,s="string"==typeof t?t:t.key,o="string"==typeof e?e:e.key;if(n.has(s)&&n.has(o)){var a=r.get(s);a||(a={}),a[o]=i,r.set(s,a)}return this},removeMix:function(t,e){var i=this.mixes,n="string"==typeof t?t:t.key,r=i.get(n);if(r)if(e){var s="string"==typeof e?e:e.key;r.hasOwnProperty(s)&&delete r[s]}else e||i.delete(n);return this},getMix:function(t,e){var i=this.mixes,n="string"==typeof t?t:t.key,r="string"==typeof e?e:e.key,s=i.get(n);return s&&s.hasOwnProperty(r)?s[r]:0},add:function(t,e){return this.anims.has(t)||(e.key=t,this.anims.set(t,e),this.emit(a.ADD_ANIMATION,t,e)),this},exists:function(t){return this.anims.has(t)},createFromAseprite:function(t,e){var i=[],n=this.game.cache.json.get(t);if(!n)return i;var r=this,s=u(n,"meta",null),o=u(n,"frames",null);return s&&o&&u(s,"frameTags",[]).forEach((function(n){var s=[],a=l(n,"name",null),h=l(n,"from",0),u=l(n,"to",0),c=l(n,"direction","forward");if(a&&(!e||e&&e.indexOf(a)>-1)){for(var d=[],p=Number.MAX_SAFE_INTEGER,f=h;f<=u;f++){var m=f.toString(),g=o[m];if(g){var v=l(g,"duration",Number.MAX_SAFE_INTEGER);v<p&&(p=v),d.push({frame:m,duration:v})}}d.forEach((function(e){s.push({key:t,frame:e.frame,duration:p-e.duration})}));var y=p*s.length;"reverse"===c&&(s=s.reverse());var A={key:a,frames:s,duration:y,yoyo:"pingpong"===c},x=r.create(A);x&&i.push(x)}})),i},create:function(t){var e=t.key,i=!1;return e&&((i=this.get(e))||(i=new n(this,e,t),this.anims.set(e,i),this.emit(a.ADD_ANIMATION,e,i))),i},fromJSON:function(t,e){void 0===e&&(e=!1),e&&this.anims.clear(),"string"==typeof t&&(t=JSON.parse(t));var i=[];if(t.hasOwnProperty("anims")&&Array.isArray(t.anims)){for(var n=0;n<t.anims.length;n++)i.push(this.create(t.anims[n]));t.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=t.globalTimeScale)}else t.hasOwnProperty("key")&&"frame"===t.type&&i.push(this.create(t));return i},generateFrameNames:function(t,e){var i,n=u(e,"prefix",""),r=u(e,"start",0),s=u(e,"end",0),o=u(e,"suffix",""),a=u(e,"zeroPad",0),h=u(e,"outputArray",[]),l=u(e,"frames",!1),p=this.textureManager.get(t);if(!p)return h;if(e)for(l||(l=d(r,s)),i=0;i<l.length;i++){var f=n+c(l[i],a,"0",1)+o;p.has(f)&&h.push({key:t,frame:f})}else for(l=p.getFrameNames(),i=0;i<l.length;i++)h.push({key:t,frame:l[i]});return h},generateFrameNumbers:function(t,e){var i=u(e,"start",0),n=u(e,"end",-1),r=u(e,"first",!1),s=u(e,"outputArray",[]),o=u(e,"frames",!1),a=this.textureManager.get(t);if(!a)return s;r&&a.has(r)&&s.push({key:t,frame:r}),o||(-1===n&&(n=a.frameTotal-2),o=d(i,n));for(var h=0;h<o.length;h++)a.has(o[h])&&s.push({key:t,frame:o[h]});return s},get:function(t){return this.anims.get(t)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(a.PAUSE_ALL)),this},play:function(t,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)e[i].anims.play(t);return this},staggerPlay:function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=!0),Array.isArray(e)||(e=[e]);var r=e.length;n||r--;for(var s=0;s<e.length;s++){var o=i<0?Math.abs(i)*(r-s):i*s;e[s].anims.playAfterDelay(t,o)}return this},remove:function(t){var e=this.get(t);return e&&(this.emit(a.REMOVE_ANIMATION,t,e),this.anims.delete(t),this.removeMix(t)),e},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(a.RESUME_ALL)),this},toJSON:function(t){var e={anims:[],globalTimeScale:this.globalTimeScale};return void 0!==t&&""!==t?e.anims.push(this.anims.get(t).toJSON()):this.anims.each((function(t,i){e.anims.push(i.toJSON())})),e},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});t.exports=p},function(t,e){t.exports="add"},function(t,e){t.exports="animationcomplete"},function(t,e){t.exports="animationcomplete-"},function(t,e){t.exports="animationrepeat"},function(t,e){t.exports="animationrestart"},function(t,e){t.exports="animationstart"},function(t,e){t.exports="animationstop"},function(t,e){t.exports="animationupdate"},function(t,e){t.exports="pauseall"},function(t,e){t.exports="remove"},function(t,e){t.exports="resumeall"},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n,r){void 0===r&&(r=!1),this.textureKey=t,this.textureFrame=e,this.index=i,this.frame=n,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=r},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});t.exports=n},function(t,e,i){var n=i(509),r=i(0),s=i(14),o=new r({initialize:function(t){this.game=t,this.binary=new n,this.bitmapFont=new n,this.json=new n,this.physics=new n,this.shader=new n,this.audio=new n,this.video=new n,this.text=new n,this.html=new n,this.obj=new n,this.tilemap=new n,this.xml=new n,this.custom={},this.game.events.once(s.DESTROY,this.destroy,this)},addCustom:function(t){return this.custom.hasOwnProperty(t)||(this.custom[t]=new n),this.custom[t]},destroy:function(){for(var t=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],e=0;e<t.length;e++)this[t[e]].destroy(),this[t[e]]=null;for(var i in this.custom)this.custom[i].destroy();this.custom=null,this.game=null}});t.exports=o},function(t,e,i){var n=i(0),r=i(84),s=i(9),o=i(510),a=new n({initialize:function(){this.entries=new r,this.events=new s},add:function(t,e){return this.entries.set(t,e),this.events.emit(o.ADD,this,t,e),this},has:function(t){return this.entries.has(t)},exists:function(t){return this.entries.has(t)},get:function(t){return this.entries.get(t)},remove:function(t){var e=this.get(t);return e&&(this.entries.delete(t),this.events.emit(o.REMOVE,this,t,e.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});t.exports=a},function(t,e,i){t.exports={ADD:i(511),REMOVE:i(512)}},function(t,e){t.exports="add"},function(t,e){t.exports="remove"},function(t,e,i){var n=i(0),r=i(22),s=i(210),o=i(1),a=i(7),h=i(6),l=i(120),u=i(4),c=i(125),d=i(113),p=new n({initialize:function(t){void 0===t&&(t={}),this.width=a(t,"width",1024),this.height=a(t,"height",768),this.zoom=a(t,"zoom",1),this.parent=a(t,"parent",void 0),this.scaleMode=a(t,"scaleMode",0),this.expandParent=a(t,"expandParent",!0),this.autoRound=a(t,"autoRound",!1),this.autoCenter=a(t,"autoCenter",0),this.resizeInterval=a(t,"resizeInterval",500),this.fullscreenTarget=a(t,"fullscreenTarget",null),this.minWidth=a(t,"minWidth",0),this.maxWidth=a(t,"maxWidth",0),this.minHeight=a(t,"minHeight",0),this.maxHeight=a(t,"maxHeight",0);var e=a(t,"scale",null);e&&(this.width=a(e,"width",this.width),this.height=a(e,"height",this.height),this.zoom=a(e,"zoom",this.zoom),this.parent=a(e,"parent",this.parent),this.scaleMode=a(e,"mode",this.scaleMode),this.expandParent=a(e,"expandParent",this.expandParent),this.autoRound=a(e,"autoRound",this.autoRound),this.autoCenter=a(e,"autoCenter",this.autoCenter),this.resizeInterval=a(e,"resizeInterval",this.resizeInterval),this.fullscreenTarget=a(e,"fullscreenTarget",this.fullscreenTarget),this.minWidth=a(e,"min.width",this.minWidth),this.maxWidth=a(e,"max.width",this.maxWidth),this.minHeight=a(e,"min.height",this.minHeight),this.maxHeight=a(e,"max.height",this.maxHeight)),this.renderType=a(t,"type",r.AUTO),this.canvas=a(t,"canvas",null),this.context=a(t,"context",null),this.canvasStyle=a(t,"canvasStyle",null),this.customEnvironment=a(t,"customEnvironment",!1),this.sceneConfig=a(t,"scene",null),this.seed=a(t,"seed",[(Date.now()*Math.random()).toString()]),l.RND=new l.RandomDataGenerator(this.seed),this.gameTitle=a(t,"title",""),this.gameURL=a(t,"url","https://phaser.io"),this.gameVersion=a(t,"version",""),this.autoFocus=a(t,"autoFocus",!0),this.domCreateContainer=a(t,"dom.createContainer",!1),this.domBehindCanvas=a(t,"dom.behindCanvas",!1),this.domPointerEvents=a(t,"dom.pointerEvents","none"),this.inputKeyboard=a(t,"input.keyboard",!0),this.inputKeyboardEventTarget=a(t,"input.keyboard.target",window),this.inputKeyboardCapture=a(t,"input.keyboard.capture",[]),this.inputMouse=a(t,"input.mouse",!0),this.inputMouseEventTarget=a(t,"input.mouse.target",null),this.inputMousePreventDefaultDown=a(t,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=a(t,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=a(t,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=a(t,"input.mouse.preventDefaultWheel",!0),this.inputTouch=a(t,"input.touch",s.input.touch),this.inputTouchEventTarget=a(t,"input.touch.target",null),this.inputTouchCapture=a(t,"input.touch.capture",!0),this.inputActivePointers=a(t,"input.activePointers",1),this.inputSmoothFactor=a(t,"input.smoothFactor",0),this.inputWindowEvents=a(t,"input.windowEvents",!0),this.inputGamepad=a(t,"input.gamepad",!1),this.inputGamepadEventTarget=a(t,"input.gamepad.target",window),this.disableContextMenu=a(t,"disableContextMenu",!1),this.audio=a(t,"audio",{}),this.hideBanner=!1===a(t,"banner",null),this.hidePhaser=a(t,"banner.hidePhaser",!1),this.bannerTextColor=a(t,"banner.text","#ffffff"),this.bannerBackgroundColor=a(t,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0),this.fps=a(t,"fps",null);var i=a(t,"render",t);this.pipeline=a(i,"pipeline",null),this.antialias=a(i,"antialias",!0),this.antialiasGL=a(i,"antialiasGL",!0),this.mipmapFilter=a(i,"mipmapFilter","LINEAR"),this.desynchronized=a(i,"desynchronized",!1),this.roundPixels=a(i,"roundPixels",!1),this.pixelArt=a(i,"pixelArt",1!==this.zoom),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=a(i,"transparent",!1),this.clearBeforeRender=a(i,"clearBeforeRender",!0),this.preserveDrawingBuffer=a(i,"preserveDrawingBuffer",!1),this.premultipliedAlpha=a(i,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=a(i,"failIfMajorPerformanceCaveat",!1),this.powerPreference=a(i,"powerPreference","default"),this.batchSize=a(i,"batchSize",4096),this.maxTextures=a(i,"maxTextures",-1),this.maxLights=a(i,"maxLights",10);var n=a(t,"backgroundColor",0);this.backgroundColor=d(n),this.transparent&&(this.backgroundColor=d(0),this.backgroundColor.alpha=0),this.preBoot=a(t,"callbacks.preBoot",u),this.postBoot=a(t,"callbacks.postBoot",u),this.physics=a(t,"physics",{}),this.defaultPhysicsSystem=a(this.physics,"default",!1),this.loaderBaseURL=a(t,"loader.baseURL",""),this.loaderPath=a(t,"loader.path","");var p=s.os.android?6:32;this.loaderMaxParallelDownloads=a(t,"loader.maxParallelDownloads",p),this.loaderCrossOrigin=a(t,"loader.crossOrigin",void 0),this.loaderResponseType=a(t,"loader.responseType",""),this.loaderAsync=a(t,"loader.async",!0),this.loaderUser=a(t,"loader.user",""),this.loaderPassword=a(t,"loader.password",""),this.loaderTimeout=a(t,"loader.timeout",0),this.loaderWithCredentials=a(t,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var f=a(t,"plugins",null),m=c.DefaultScene;f&&(Array.isArray(f)?this.defaultPlugins=f:h(f)&&(this.installGlobalPlugins=o(f,"global",[]),this.installScenePlugins=o(f,"scene",[]),Array.isArray(f.default)?m=f.default:Array.isArray(f.defaultMerge)&&(m=m.concat(f.defaultMerge)))),this.defaultPlugins=m;var g="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=a(t,"images.default",g+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=a(t,"images.missing",g+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=a(t,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=r.WEBGL:window.FORCE_CANVAS&&(this.renderType=r.CANVAS))}});t.exports=p},function(t,e){var i,n,r=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(t){i=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var h,l=[],u=!1,c=-1;function d(){u&&h&&(u=!1,h.length?l=h.concat(l):c=-1,l.length&&p())}function p(){if(!u){var t=a(d);u=!0;for(var e=l.length;e;){for(h=l,l=[];++c<e;)h&&h[c].run();c=-1,e=l.length}h=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new f(t,e)),1!==l.length||u||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){var n=i(86),r={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};t.exports=("function"==typeof importScripts||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(r.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(r.mspointer=!0),navigator.getGamepads&&(r.gamepads=!0),"onwheel"in window||n.ie&&"WheelEvent"in window?r.wheelEvent="wheel":"onmousewheel"in window?r.wheelEvent="mousewheel":n.firefox&&"MouseScrollEvent"in window&&(r.wheelEvent="DOMMouseScroll")),r)},function(t,e,i){var n=i(86),r={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};t.exports=function(){if("function"==typeof importScripts)return r;r.audioData=!!window.Audio,r.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var t=document.createElement("audio"),e=!!t.canPlayType;try{if(e&&(t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(r.ogg=!0),(t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||t.canPlayType("audio/opus;").replace(/^no$/,""))&&(r.opus=!0),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(r.mp3=!0),t.canPlayType("audio/wav").replace(/^no$/,"")&&(r.wav=!0),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(r.m4a=!0),t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(r.webm=!0),""!==t.canPlayType('audio/mp4;codecs="ec-3"')))if(n.edge)r.dolby=!0;else if(n.safari&&n.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var i=parseInt(RegExp.$1,10),s=parseInt(RegExp.$2,10);(10===i&&s>=11||i>10)&&(r.dolby=!0)}}catch(t){}return r}()},function(t,e){var i={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};t.exports=function(){if("function"==typeof importScripts)return i;var t=document.createElement("video"),e=!!t.canPlayType;try{e&&(t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(i.ogg=!0),t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(i.h264=!0,i.mp4=!0),t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(i.webm=!0),t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(i.vp9=!0),t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(i.hls=!0))}catch(t){}return i}()},function(t,e){var i={available:!1,cancel:"",keyboard:!1,request:""};t.exports=function(){if("function"==typeof importScripts)return i;var t,e="Fullscreen",n="FullScreen",r=["request"+e,"request"+n,"webkitRequest"+e,"webkitRequest"+n,"msRequest"+e,"msRequest"+n,"mozRequest"+n,"mozRequest"+e];for(t=0;t<r.length;t++)if(document.documentElement[r[t]]){i.available=!0,i.request=r[t];break}var s=["cancel"+n,"exit"+e,"webkitCancel"+n,"webkitExit"+e,"msCancel"+n,"msExit"+e,"mozCancel"+n,"mozExit"+e];if(i.available)for(t=0;t<s.length;t++)if(document[s[t]]){i.cancel=s[t];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(i.keyboard=!0),Object.defineProperty(i,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),i}()},function(t,e,i){t.exports={Between:i(212),BetweenPoints:i(520),BetweenPointsY:i(521),BetweenY:i(522),CounterClockwise:i(523),Normalize:i(213),Random:i(524),RandomDegrees:i(525),Reverse:i(526),RotateTo:i(527),ShortestBetween:i(528),Wrap:i(183),WrapDegrees:i(184)}},function(t,e){t.exports=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}},function(t,e){t.exports=function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)}},function(t,e){t.exports=function(t,e,i,n){return Math.atan2(i-t,n-e)}},function(t,e,i){var n=i(10);t.exports=function(t){return t>Math.PI&&(t-=n.PI2),Math.abs(((t+n.TAU)%n.PI2-n.PI2)%n.PI2)}},function(t,e,i){var n=i(87);t.exports=function(){return n(-Math.PI,Math.PI)}},function(t,e,i){var n=i(87);t.exports=function(){return n(-180,180)}},function(t,e,i){var n=i(213);t.exports=function(t){return n(t+Math.PI)}},function(t,e,i){var n=i(10);t.exports=function(t,e,i){return void 0===i&&(i=.05),t===e||(Math.abs(e-t)<=i||Math.abs(e-t)>=n.PI2-i?t=e:(Math.abs(e-t)>Math.PI&&(e<t?e+=n.PI2:e-=n.PI2),e>t?t+=i:e<t&&(t-=i))),t}},function(t,e){t.exports=function(t,e){var i=e-t;return 0===i?0:i-360*Math.floor((i- -180)/360)}},function(t,e,i){t.exports={Between:i(71),BetweenPoints:i(214),BetweenPointsSquared:i(530),Chebyshev:i(531),Power:i(532),Snake:i(533),Squared:i(534)}},function(t,e){t.exports=function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n}},function(t,e){t.exports=function(t,e,i,n){return Math.max(Math.abs(t-i),Math.abs(e-n))}},function(t,e){t.exports=function(t,e,i,n,r){return void 0===r&&(r=2),Math.sqrt(Math.pow(i-t,r)+Math.pow(n-e,r))}},function(t,e){t.exports=function(t,e,i,n){return Math.abs(t-i)+Math.abs(e-n)}},function(t,e){t.exports=function(t,e,i,n){var r=t-i,s=e-n;return r*r+s*s}},function(t,e,i){t.exports={Back:i(194),Bounce:i(195),Circular:i(196),Cubic:i(197),Elastic:i(198),Expo:i(199),Linear:i(200),Quadratic:i(201),Quartic:i(202),Quintic:i(203),Sine:i(204),Stepped:i(205)}},function(t,e,i){t.exports={Ceil:i(537),Equal:i(109),Floor:i(538),GreaterThan:i(539),LessThan:i(540)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.ceil(t-e)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.floor(t+e)}},function(t,e){t.exports=function(t,e,i){return void 0===i&&(i=1e-4),t>e-i}},function(t,e){t.exports=function(t,e,i){return void 0===i&&(i=1e-4),t<e+i}},function(t,e,i){t.exports={Bezier:i(542),CatmullRom:i(543),CubicBezier:i(217),Linear:i(544),QuadraticBezier:i(218),SmoothStep:i(219),SmootherStep:i(545)}},function(t,e,i){var n=i(215);t.exports=function(t,e){for(var i=0,r=t.length-1,s=0;s<=r;s++)i+=Math.pow(1-e,r-s)*Math.pow(e,s)*t[s]*n(r,s);return i}},function(t,e,i){var n=i(121);t.exports=function(t,e){var i=t.length-1,r=i*e,s=Math.floor(r);return t[0]===t[i]?(e<0&&(s=Math.floor(r=i*(1+e))),n(r-s,t[(s-1+i)%i],t[s],t[(s+1)%i],t[(s+2)%i])):e<0?t[0]-(n(-r,t[0],t[0],t[1],t[1])-t[0]):e>1?t[i]-(n(r-i,t[i],t[i],t[i-1],t[i-1])-t[i]):n(r-s,t[s?s-1:0],t[s],t[i<s+1?i:s+1],t[i<s+2?i:s+2])}},function(t,e,i){var n=i(82);t.exports=function(t,e){var i=t.length-1,r=i*e,s=Math.floor(r);return e<0?n(t[0],t[1],r):e>1?n(t[i],t[i-1],i-r):n(t[s],t[s+1>i?i:s+1],r-s)}},function(t,e,i){var n=i(221);t.exports=function(t,e,i){return e+(i-e)*n(t,0,1)}},function(t,e,i){t.exports={GetNext:i(122),IsSize:i(88),IsValue:i(547)}},function(t,e){t.exports=function(t){return t>0&&0==(t&t-1)}},function(t,e,i){t.exports={Ceil:i(549),Floor:i(89),To:i(550)}},function(t,e){t.exports=function(t,e,i,n){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.ceil(t/e),n?(i+t)/e:i+t)}},function(t,e){t.exports=function(t,e,i,n){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.round(t/e),n?(i+t)/e:i+t)}},function(t,e,i){var n=new(i(0))({initialize:function(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(t){var e,i=this.n;t=t.toString();for(var n=0;n<t.length;n++)e=.02519603282416938*(i+=t.charCodeAt(n)),e-=i=e>>>0,i=(e*=i)>>>0,i+=4294967296*(e-=i);return this.n=i,2.3283064365386963e-10*(i>>>0)},init:function(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var e=0;e<t.length&&null!=t[e];e++){var i=t[e];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},between:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},realInRange:function(t,e){return this.frac()*(e-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",e="";for(e=t="";t++<36;e+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return e},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function(t,e){return this.realInRange(t||9466848e5,e||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(this.frac()*(e+1)),n=t[i];t[i]=t[e],t[e]=n}return t}});t.exports=n},function(t,e){t.exports=function(t){for(var e=0,i=0;i<t.length;i++)e+=+t[i];return e/t.length}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var n=Math.pow(i,-e);return Math.ceil(t*n)/n}},function(t,e){t.exports=function(t,e){return Math.abs(t-e)}},function(t,e,i){var n=i(13),r=i(0),s=i(48),o=i(4),a=new s,h=new r({initialize:function t(e,i,n,r){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=t.DefaultOrder),this._x=e,this._y=i,this._z=n,this._order=r,this.onChangeCallback=o},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback(this)}},set:function(t,e,i,n){return void 0===n&&(n=this._order),this._x=t,this._y=e,this._z=i,this._order=n,this.onChangeCallback(this),this},copy:function(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function(t,e,i){return void 0===e&&(e=this._order),void 0===i&&(i=!1),a.fromQuat(t),this.setFromRotationMatrix(a,e,i)},setFromRotationMatrix:function(t,e,i){void 0===e&&(e=this._order),void 0===i&&(i=!1);var r=t.val,s=r[0],o=r[4],a=r[8],h=r[1],l=r[5],u=r[9],c=r[2],d=r[6],p=r[10],f=0,m=0,g=0;switch(e){case"XYZ":m=Math.asin(n(a,-1,1)),Math.abs(a)<.99999?(f=Math.atan2(-u,p),g=Math.atan2(-o,s)):f=Math.atan2(d,l);break;case"YXZ":f=Math.asin(-n(u,-1,1)),Math.abs(u)<.99999?(m=Math.atan2(a,p),g=Math.atan2(h,l)):m=Math.atan2(-c,s);break;case"ZXY":f=Math.asin(n(d,-1,1)),Math.abs(d)<.99999?(m=Math.atan2(-c,p),g=Math.atan2(-o,l)):g=Math.atan2(h,s);break;case"ZYX":m=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(f=Math.atan2(d,p),g=Math.atan2(h,s)):g=Math.atan2(-o,l);break;case"YZX":g=Math.asin(n(h,-1,1)),Math.abs(h)<.99999?(f=Math.atan2(-u,l),m=Math.atan2(-c,s)):m=Math.atan2(a,p);break;case"XZY":g=Math.asin(-n(o,-1,1)),Math.abs(o)<.99999?(f=Math.atan2(d,l),m=Math.atan2(a,s)):f=Math.atan2(-u,p)}return this._x=f,this._y=m,this._z=g,this._order=e,i&&this.onChangeCallback(this),this}});h.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],h.DefaultOrder="XYZ",t.exports=h},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var n=Math.pow(i,-e);return Math.floor(t*n)/n}},function(t,e){t.exports=function(t,e){return t/e/1e3}},function(t,e){t.exports=function(t){return t==parseFloat(t)?!(t%2):void 0}},function(t,e){t.exports=function(t){return t===parseFloat(t)?!(t%2):void 0}},function(t,e){t.exports=function(t,e,i){return Math.min(t+e,i)}},function(t,e){t.exports=function(t){var e=t.length;if(0===e)return 0;t.sort((function(t,e){return t-e}));var i=Math.floor(e/2);return e%2==0?(t[i]+t[i-1])/2:t[i]}},function(t,e){t.exports=function(t,e,i){return Math.max(t-e,i)}},function(t,e){t.exports=function(t,e,i,n){void 0===i&&(i=e+1);var r=(t-e)/(i-e);return r>1?void 0!==n?(r=(n-t)/(n-i))<0&&(r=0):r=1:r<0&&(r=0),r}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);var i=2*Math.random()*Math.PI;return t.x=Math.cos(i)*e,t.y=Math.sin(i)*e,t}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);var i=2*Math.random()*Math.PI,n=2*Math.random()-1,r=Math.sqrt(1-n*n)*e;return t.x=Math.cos(i)*r,t.y=Math.sin(i)*r,t.z=n*e,t}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1),t.x=(2*Math.random()-1)*e,t.y=(2*Math.random()-1)*e,t.z=(2*Math.random()-1)*e,t.w=(2*Math.random()-1)*e,t}},function(t,e){t.exports=function(t,e){var i=t.x,n=t.y;return t.x=i*Math.cos(e)-n*Math.sin(e),t.y=i*Math.sin(e)+n*Math.cos(e),t}},function(t,e){t.exports=function(t,e,i,n,r){var s=n+Math.atan2(t.y-i,t.x-e);return t.x=e+r*Math.cos(s),t.y=i+r*Math.sin(s),t}},function(t,e){t.exports=function(t,e,i,n,r){return t.x=e+r*Math.cos(n),t.y=i+r*Math.sin(n),t}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var n=Math.pow(i,-e);return Math.round(t*n)/n}},function(t,e){t.exports=function(t,e,i,n){void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=1),n*=Math.PI/t;for(var r=[],s=[],o=0;o<t;o++)e+=(i-=e*n)*n,r[o]=i,s[o]=e;return{sin:s,cos:r,length:t}}},function(t,e,i){var n=i(5);t.exports=function(t,e,i,r){void 0===r&&(r=new n);var s=0,o=0;return t>0&&t<=e*i&&(s=t>e-1?t-(o=Math.floor(t/e))*e:t),r.set(s,o)}},function(t,e){t.exports=function(t,e,i){return Math.abs(t-e)<=i}},function(t,e,i){var n=i(27),r=i(48),s=i(225),o=new r,a=new s,h=new n;t.exports=function(t,e,i){return a.setAxisAngle(e,i),o.fromRotationTranslation(a,h.set(0,0,0)),t.transformMat4(o)}},function(t,e,i){var n=i(116);t.exports=function(t){var e=t.config;if(e.parent&&e.domCreateContainer){var i=document.createElement("div");i.style.cssText=["display: block;","width: "+t.scale.width+"px;","height: "+t.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+e.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),t.domContainer=i,n(i,e.parent)}}},function(t,e,i){var n=i(226),r=i(17),s=i(22),o=i(119);t.exports=function(t){var e=t.config;if((e.customEnvironment||e.canvas)&&e.renderType===s.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!e.customEnvironment&&!e.canvas&&e.renderType!==s.HEADLESS)if(e.renderType===s.CANVAS||e.renderType!==s.CANVAS&&!o.webGL){if(!o.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");e.renderType=s.CANVAS}else e.renderType=s.WEBGL;e.antialias||r.disableSmoothing();var a,h,l=t.scale.baseSize,u=l.width,c=l.height;e.canvas?(t.canvas=e.canvas,t.canvas.width=u,t.canvas.height=c):t.canvas=r.create(t,u,c,e.renderType),e.canvasStyle&&(t.canvas.style=e.canvasStyle),e.antialias||n.setCrisp(t.canvas),e.renderType!==s.HEADLESS&&(a=i(227),h=i(230),e.renderType===s.WEBGL?t.renderer=new h(t):(t.renderer=new a(t),t.context=t.renderer.gameContext))}},function(t,e){t.exports="addtexture"},function(t,e){t.exports="onerror"},function(t,e){t.exports="onload"},function(t,e){t.exports="ready"},function(t,e){t.exports="removetexture"},function(t,e){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join("\n")},function(t,e){t.exports="pipelineafterflush"},function(t,e){t.exports="pipelinebeforeflush"},function(t,e){t.exports="pipelinebind"},function(t,e){t.exports="pipelineboot"},function(t,e){t.exports="pipelinedestroy"},function(t,e){t.exports="pipelinerebind"},function(t,e){t.exports="pipelineresize"},function(t,e){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join("\n")},function(t,e,i){t.exports={CHANGE_DATA:i(605),CHANGE_DATA_KEY:i(606),DESTROY:i(607),REMOVE_DATA:i(608),SET_DATA:i(609)}},function(t,e){t.exports="changedata"},function(t,e){t.exports="changedata-"},function(t,e){t.exports="destroy"},function(t,e){t.exports="removedata"},function(t,e){t.exports="setdata"},function(t,e,i){var n=i(22);t.exports=function(t){var e=t.config;if(!e.hideBanner){var i="WebGL";e.renderType===n.CANVAS?i="Canvas":e.renderType===n.HEADLESS&&(i="Headless");var r,s=e.audio,o=t.device.audio;if(r=o.webAudio&&!s.disableWebAudio?"Web Audio":s.noAudio||!o.webAudio&&!o.audioData?"No Audio":"HTML5 Audio",t.device.browser.ie)window.console;else{var a,h="",l=[h];Array.isArray(e.bannerBackgroundColor)?(e.bannerBackgroundColor.forEach((function(t){h=h.concat("%c "),l.push("background: "+t),a=t})),l[l.length-1]="color: "+e.bannerTextColor+"; background: "+a):(h=h.concat("%c "),l.push("color: "+e.bannerTextColor+"; background: "+e.bannerBackgroundColor)),l.push("background: transparent"),e.gameTitle&&(h=h.concat(e.gameTitle),e.gameVersion&&(h=h.concat(" v"+e.gameVersion)),e.hidePhaser||(h=h.concat(" / "))),e.hidePhaser||(h=h.concat("Phaser v"+n.VERSION+" ("+i+" | "+r+")")),h=h.concat(" %c "+e.gameURL),l[0]=h}}}},function(t,e,i){var n=i(70);t.exports=function(t){if("complete"!==document.readyState&&"interactive"!==document.readyState){var e=function e(){document.removeEventListener("deviceready",e,!0),document.removeEventListener("DOMContentLoaded",e,!0),window.removeEventListener("load",e,!0),t()};document.body?n.cordova?document.addEventListener("deviceready",e,!1):(document.addEventListener("DOMContentLoaded",e,!0),window.addEventListener("load",e,!0)):window.setTimeout(e,20)}else t()}},function(t,e){t.exports="boot"},function(t,e){t.exports="destroy"},function(t,e){t.exports="dragend"},function(t,e){t.exports="dragenter"},function(t,e){t.exports="drag"},function(t,e){t.exports="dragleave"},function(t,e){t.exports="dragover"},function(t,e){t.exports="dragstart"},function(t,e){t.exports="drop"},function(t,e){t.exports="gameout"},function(t,e){t.exports="gameover"},function(t,e){t.exports="gameobjectdown"},function(t,e){t.exports="dragend"},function(t,e){t.exports="dragenter"},function(t,e){t.exports="drag"},function(t,e){t.exports="dragleave"},function(t,e){t.exports="dragover"},function(t,e){t.exports="dragstart"},function(t,e){t.exports="drop"},function(t,e){t.exports="gameobjectmove"},function(t,e){t.exports="gameobjectout"},function(t,e){t.exports="gameobjectover"},function(t,e){t.exports="pointerdown"},function(t,e){t.exports="pointermove"},function(t,e){t.exports="pointerout"},function(t,e){t.exports="pointerover"},function(t,e){t.exports="pointerup"},function(t,e){t.exports="wheel"},function(t,e){t.exports="gameobjectup"},function(t,e){t.exports="gameobjectwheel"},function(t,e){t.exports="boot"},function(t,e){t.exports="process"},function(t,e){t.exports="update"},function(t,e){t.exports="pointerdown"},function(t,e){t.exports="pointerdownoutside"},function(t,e){t.exports="pointermove"},function(t,e){t.exports="pointerout"},function(t,e){t.exports="pointerover"},function(t,e){t.exports="pointerup"},function(t,e){t.exports="pointerupoutside"},function(t,e){t.exports="wheel"},function(t,e){t.exports="pointerlockchange"},function(t,e){t.exports="preupdate"},function(t,e){t.exports="shutdown"},function(t,e){t.exports="start"},function(t,e){t.exports="update"},function(t,e,i){var n=i(250),r=i(0),s=i(9),o=i(83),a=i(14),h=i(663),l=i(664),u=i(665),c=i(4),d=i(8),p=i(666),f=i(89),m=i(5),g=new r({Extends:s,initialize:function(t){s.call(this),this.game=t,this.canvas,this.canvasBounds=new d,this.parent=null,this.parentIsWindow=!1,this.parentSize=new p,this.gameSize=new p,this.baseSize=new p,this.displaySize=new p,this.scaleMode=n.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new m(1,1),this.autoRound=!1,this.autoCenter=n.CENTER.NO_CENTER,this.orientation=n.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:c,windowResize:c,fullScreenChange:c,fullScreenError:c}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(a.BOOT,this.boot,this)},boot:function(){var t=this.game;this.canvas=t.canvas,this.fullscreen=t.device.fullscreen,this.scaleMode!==n.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===n.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),t.events.on(a.PRE_STEP,this.step,this),t.events.once(a.READY,this.refresh,this),t.events.once(a.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(t){this.getParent(t),this.getParentBounds();var e=t.width,i=t.height,r=t.scaleMode,s=t.zoom,o=t.autoRound;if("string"==typeof e){var a=this.parentSize.width;0===a&&(a=window.innerWidth);var h=parseInt(e,10)/100;e=Math.floor(a*h)}if("string"==typeof i){var l=this.parentSize.height;0===l&&(l=window.innerHeight);var c=parseInt(i,10)/100;i=Math.floor(l*c)}this.scaleMode=r,this.autoRound=o,this.autoCenter=t.autoCenter,this.resizeInterval=t.resizeInterval,o&&(e=Math.floor(e),i=Math.floor(i)),this.gameSize.setSize(e,i),s===n.ZOOM.MAX_ZOOM&&(s=this.getMaxZoom()),this.zoom=s,1!==s&&(this._resetZoom=!0),this.baseSize.setSize(e,i),o&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),t.minWidth>0&&this.displaySize.setMin(t.minWidth*s,t.minHeight*s),t.maxWidth>0&&this.displaySize.setMax(t.maxWidth*s,t.maxHeight*s),this.displaySize.setSize(e,i),this.orientation=u(e,i)},getParent:function(t){var e=t.parent;if(null!==e){if(this.parent=l(e),this.parentIsWindow=this.parent===document.body,t.expandParent&&t.scaleMode!==n.SCALE_MODE.NONE){var i=this.parent.getBoundingClientRect();(this.parentIsWindow||0===i.height)&&(document.documentElement.style.height="100%",document.body.style.height="100%",i=this.parent.getBoundingClientRect(),this.parentIsWindow||0!==i.height||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}t.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=l(t.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var t=this.parentSize,e=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(e.height=h(!0));var i=e.width,n=e.height;return(t.width!==i||t.height!==n)&&(t.setSize(i,n),!0)},lockOrientation:function(t){var e=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!e&&e.call(screen,t)},setParentSize:function(t,e){return this.parentSize.setSize(t,e),this.refresh()},setGameSize:function(t,e){var i=this.autoRound;i&&(t=Math.floor(t),e=Math.floor(e));var n=this.width,r=this.height;return this.gameSize.resize(t,e),this.baseSize.resize(t,e),i&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(t/e),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(n,r)},resize:function(t,e){var i=this.zoom,n=this.autoRound;n&&(t=Math.floor(t),e=Math.floor(e));var r=this.width,s=this.height;this.gameSize.resize(t,e),this.baseSize.resize(t,e),n&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(t*i,e*i),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var o=this.canvas.style,a=t*i,h=e*i;return n&&(a=Math.floor(a),h=Math.floor(h)),a===t&&h===e||(o.width=a+"px",o.height=h+"px"),this.refresh(r,s)},setZoom:function(t){return this.zoom=t,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(t,e){void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var i=this.game.domContainer;if(i){this.baseSize.setCSS(i);var n=this.canvas.style,r=i.style;r.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",r.marginLeft=n.marginLeft,r.marginTop=n.marginTop}return this.emit(o.RESIZE,this.gameSize,this.baseSize,this.displaySize,t,e),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var t=u(this.width,this.height);t!==this.orientation&&(this.orientation=t,this.emit(o.ORIENTATION_CHANGE,t))}},updateScale:function(){var t,e,i=this.canvas.style,r=this.gameSize.width,s=this.gameSize.height,o=this.zoom,a=this.autoRound;this.scaleMode===n.SCALE_MODE.NONE?(this.displaySize.setSize(r*o,s*o),t=this.displaySize.width,e=this.displaySize.height,a&&(t=Math.floor(t),e=Math.floor(e)),this._resetZoom&&(i.width=t+"px",i.height=e+"px",this._resetZoom=!1)):this.scaleMode===n.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),t=this.displaySize.width,e=this.displaySize.height,a&&(t=Math.floor(t),e=Math.floor(e)),this.canvas.width=t,this.canvas.height=e):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),t=this.displaySize.width,e=this.displaySize.height,a&&(t=Math.floor(t),e=Math.floor(e)),i.width=t+"px",i.height=e+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var t=f(this.parentSize.width,this.gameSize.width,0,!0),e=f(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(t,e),1)},updateCenter:function(){var t=this.autoCenter;if(t!==n.CENTER.NO_CENTER){var e=this.canvas,i=e.style,r=e.getBoundingClientRect(),s=r.width,o=r.height,a=Math.floor((this.parentSize.width-s)/2),h=Math.floor((this.parentSize.height-o)/2);t===n.CENTER.CENTER_HORIZONTALLY?h=0:t===n.CENTER.CENTER_VERTICALLY&&(a=0),i.marginLeft=a+"px",i.marginTop=h+"px"}},updateBounds:function(){var t=this.canvasBounds,e=this.canvas.getBoundingClientRect();t.x=e.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),t.y=e.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),t.width=e.width,t.height=e.height},transformX:function(t){return(t-this.canvasBounds.left)*this.displayScale.x},transformY:function(t){return(t-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(t){void 0===t&&(t={navigationUI:"hide"});var e=this.fullscreen;if(e.available){if(!e.active){var i=this.getFullscreenTarget();e.keyboard?i[e.request](Element.ALLOW_KEYBOARD_INPUT):i[e.request](t)}}else this.emit(o.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(o.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(t){this.removeFullscreenTarget(),this.emit(o.FULLSCREEN_FAILED,t)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var t=document.createElement("div");t.style.margin="0",t.style.padding="0",t.style.width="100%",t.style.height="100%",this.fullscreenTarget=t,this._createdFullscreenTarget=!0}return this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var t=this.fullscreenTarget;if(t&&t.parentNode){var e=t.parentNode;e.insertBefore(this.canvas,t),e.removeChild(t)}}},stopFullscreen:function(){var t=this.fullscreen;if(!t.available)return this.emit(o.FULLSCREEN_UNSUPPORTED),!1;t.active&&document[t.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(o.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(t){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(t)},startListeners:function(){var t=this,e=this.listeners;e.orientationChange=function(){t.updateBounds(),t._checkOrientation=!0,t.dirty=!0},e.windowResize=function(){t.updateBounds(),t.dirty=!0},window.addEventListener("orientationchange",e.orientationChange,!1),window.addEventListener("resize",e.windowResize,!1),this.fullscreen.available&&(e.fullScreenChange=function(e){return t.onFullScreenChange(e)},e.fullScreenError=function(e){return t.onFullScreenError(e)},["webkit","moz",""].forEach((function(t){document.addEventListener(t+"fullscreenchange",e.fullScreenChange,!1),document.addEventListener(t+"fullscreenerror",e.fullScreenError,!1)})),document.addEventListener("MSFullscreenChange",e.fullScreenChange,!1),document.addEventListener("MSFullscreenError",e.fullScreenError,!1))},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(t,e){this.parent&&(this._lastCheck+=e,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var t=this.listeners;window.removeEventListener("orientationchange",t.orientationChange,!1),window.removeEventListener("resize",t.windowResize,!1),["webkit","moz",""].forEach((function(e){document.removeEventListener(e+"fullscreenchange",t.fullScreenChange,!1),document.removeEventListener(e+"fullscreenerror",t.fullScreenError,!1)})),document.removeEventListener("MSFullscreenChange",t.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",t.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===n.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===n.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});t.exports=g},function(t,e){t.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(t,e){t.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(t,e){t.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(t,e){t.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(t,e){t.exports=function(t){if(!t)return window.innerHeight;var e=Math.abs(window.orientation),i={w:0,h:0},n=document.createElement("div");return n.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(n),i.w=90===e?n.offsetHeight:window.innerWidth,i.h=90===e?window.innerWidth:n.offsetHeight,document.documentElement.removeChild(n),n=null,90!==Math.abs(window.orientation)?i.h:i.w}},function(t,e){t.exports=function(t){var e;return""!==t&&("string"==typeof t?e=document.getElementById(t):t&&1===t.nodeType&&(e=t)),e||(e=document.body),e}},function(t,e,i){var n=i(250);t.exports=function(t,e){var i=window.screen,r=!!i&&(i.orientation||i.mozOrientation||i.msOrientation);return r&&"string"==typeof r.type?r.type:"string"==typeof r?r:"number"==typeof window.orientation?0===window.orientation||180===window.orientation?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?n.ORIENTATION.PORTRAIT:window.matchMedia("(orientation: landscape)").matches?n.ORIENTATION.LANDSCAPE:void 0:e>t?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE}},function(t,e,i){var n=i(13),r=i(0),s=i(89),o=i(5),a=new r({initialize:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=0),void 0===n&&(n=null),this._width=t,this._height=e,this._parent=n,this.aspectMode=i,this.aspectRatio=0===e?1:t/e,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new o},setAspectMode:function(t){return void 0===t&&(t=0),this.aspectMode=t,this.setSize(this._width,this._height)},setSnap:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.snapTo.set(t,e),this.setSize(this._width,this._height)},setParent:function(t){return this._parent=t,this.setSize(this._width,this._height)},setMin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.minWidth=n(t,0,this.maxWidth),this.minHeight=n(e,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(t,e){return void 0===t&&(t=Number.MAX_VALUE),void 0===e&&(e=t),this.maxWidth=n(t,this.minWidth,Number.MAX_VALUE),this.maxHeight=n(e,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(t,e){switch(void 0===t&&(t=0),void 0===e&&(e=t),this.aspectMode){case a.NONE:this._width=this.getNewWidth(s(t,this.snapTo.x)),this._height=this.getNewHeight(s(e,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height;break;case a.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(s(t,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case a.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(s(e,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case a.FIT:this.constrain(t,e,!0);break;case a.ENVELOP:this.constrain(t,e,!1)}return this},setAspectRatio:function(t){return this.aspectRatio=t,this.setSize(this._width,this._height)},resize:function(t,e){return this._width=this.getNewWidth(s(t,this.snapTo.x)),this._height=this.getNewHeight(s(e,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height,this},getNewWidth:function(t,e){return void 0===e&&(e=!0),t=n(t,this.minWidth,this.maxWidth),e&&this._parent&&t>this._parent.width&&(t=Math.max(this.minWidth,this._parent.width)),t},getNewHeight:function(t,e){return void 0===e&&(e=!0),t=n(t,this.minHeight,this.maxHeight),e&&this._parent&&t>this._parent.height&&(t=Math.max(this.minHeight,this._parent.height)),t},constrain:function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=!0),t=this.getNewWidth(t),e=this.getNewHeight(e);var n=this.snapTo,r=0===e?1:t/e;return i&&this.aspectRatio>r||!i&&this.aspectRatio<r?(e=(t=s(t,n.x))/this.aspectRatio,n.y>0&&(t=(e=s(e,n.y))*this.aspectRatio)):(i&&this.aspectRatio<r||!i&&this.aspectRatio>r)&&(t=(e=s(e,n.y))*this.aspectRatio,n.x>0&&(e=(t=s(t,n.x))*(1/this.aspectRatio))),this._width=t,this._height=e,this},fitTo:function(t,e){return this.constrain(t,e,!0)},envelop:function(t,e){return this.constrain(t,e,!1)},setWidth:function(t){return this.setSize(t,this._height)},setHeight:function(t){return this.setSize(this._width,t)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(t){t&&t.style&&(t.style.width=this._width+"px",t.style.height=this._height+"px")},copy:function(t){return t.setAspectMode(this.aspectMode),t.aspectRatio=this.aspectRatio,t.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(t){this.setSize(t,this._height)}},height:{get:function(){return this._height},set:function(t){this.setSize(this._width,t)}}});a.NONE=0,a.WIDTH_CONTROLS_HEIGHT=1,a.HEIGHT_CONTROLS_WIDTH=2,a.FIT=3,a.ENVELOP=4,t.exports=a},function(t,e){t.exports="addfile"},function(t,e){t.exports="complete"},function(t,e){t.exports="filecomplete"},function(t,e){t.exports="filecomplete-"},function(t,e){t.exports="loaderror"},function(t,e){t.exports="load"},function(t,e){t.exports="fileprogress"},function(t,e){t.exports="postprocess"},function(t,e){t.exports="progress"},function(t,e){t.exports="start"},function(t,e,i){var n=i(0),r=i(129),s=new n({initialize:function(t){this.sys=new r(this,t),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});t.exports=s},function(t,e,i){t.exports={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},function(t,e,i){var n=i(17),r=i(680),s=i(0),o=i(26),a=i(22),h=i(9),l=i(90),u=i(14),c=i(683),d=i(7),p=i(685),f=i(256),m=new s({Extends:h,initialize:function(t){h.call(this),this.game=t,this.name="TextureManager",this.list={},this._tempCanvas=n.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,t.events.once(u.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(l.LOAD,this.updatePending,this),this.on(l.ERROR,this.updatePending,this);var t=this.game.config;this.addBase64("__DEFAULT",t.defaultImage),this.addBase64("__MISSING",t.missingImage),this.addBase64("__WHITE",t.whiteImage),this.game.events.once(u.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,0===this._pending&&(this.off(l.LOAD),this.off(l.ERROR),this.emit(l.READY))},checkKey:function(t){return!this.exists(t)||!1},remove:function(t){if("string"==typeof t){if(!this.exists(t))return this;t=this.get(t)}return this.list.hasOwnProperty(t.key)&&(t.destroy(),this.emit(l.REMOVE,t.key)),this},removeKey:function(t){return this.list.hasOwnProperty(t)&&delete this.list[t],this},addBase64:function(t,e){if(this.checkKey(t)){var i=this,n=new Image;n.onerror=function(){i.emit(l.ERROR,t)},n.onload=function(){var e=i.create(t,n);p.Image(e,0),i.emit(l.ADD,t,e),i.emit(l.LOAD,t,e)},n.src=e}return this},getBase64:function(t,e,i,r){void 0===i&&(i="image/png"),void 0===r&&(r=.92);var s="",o=this.getFrame(t,e);if(o&&(o.source.isRenderTexture||o.source.isGLTexture));else if(o){var a=o.canvasData,h=n.create2D(this,a.width,a.height);h.getContext("2d").drawImage(o.source.image,a.x,a.y,a.width,a.height,0,0,a.width,a.height),s=h.toDataURL(i,r),n.remove(h)}return s},addImage:function(t,e,i){var n=null;return this.checkKey(t)&&(n=this.create(t,e),p.Image(n,0),i&&n.setDataSource(i),this.emit(l.ADD,t,n)),n},addGLTexture:function(t,e,i,n){var r=null;return this.checkKey(t)&&(void 0===i&&(i=e.width),void 0===n&&(n=e.height),(r=this.create(t,e,i,n)).add("__BASE",0,0,0,i,n),this.emit(l.ADD,t,r)),r},addRenderTexture:function(t,e){var i=null;return this.checkKey(t)&&((i=this.create(t,e)).add("__BASE",0,0,0,e.width,e.height),this.emit(l.ADD,t,i)),i},generate:function(t,e){if(this.checkKey(t)){var i=n.create(this,1,1);return e.canvas=i,c(e),this.addCanvas(t,i)}return null},createCanvas:function(t,e,i){if(void 0===e&&(e=256),void 0===i&&(i=256),this.checkKey(t)){var r=n.create(this,e,i,a.CANVAS,!0);return this.addCanvas(t,r)}return null},addCanvas:function(t,e,i){void 0===i&&(i=!1);var n=null;return i?n=new r(this,t,e,e.width,e.height):this.checkKey(t)&&(n=new r(this,t,e,e.width,e.height),this.list[t]=n,this.emit(l.ADD,t,n)),n},addAtlas:function(t,e,i,n){return Array.isArray(i.textures)||Array.isArray(i.frames)?this.addAtlasJSONArray(t,e,i,n):this.addAtlasJSONHash(t,e,i,n)},addAtlasJSONArray:function(t,e,i,n){var r=null;if(this.checkKey(t)){if(r=this.create(t,e),Array.isArray(i))for(var s=1===i.length,o=0;o<r.source.length;o++){var a=s?i[0]:i[o];p.JSONArray(r,o,a)}else p.JSONArray(r,0,i);n&&r.setDataSource(n),this.emit(l.ADD,t,r)}return r},addAtlasJSONHash:function(t,e,i,n){var r=null;if(this.checkKey(t)){if(r=this.create(t,e),Array.isArray(i))for(var s=0;s<i.length;s++)p.JSONHash(r,s,i[s]);else p.JSONHash(r,0,i);n&&r.setDataSource(n),this.emit(l.ADD,t,r)}return r},addAtlasXML:function(t,e,i,n){var r=null;return this.checkKey(t)&&(r=this.create(t,e),p.AtlasXML(r,0,i),n&&r.setDataSource(n),this.emit(l.ADD,t,r)),r},addUnityAtlas:function(t,e,i,n){var r=null;return this.checkKey(t)&&(r=this.create(t,e),p.UnityYAML(r,0,i),n&&r.setDataSource(n),this.emit(l.ADD,t,r)),r},addSpriteSheet:function(t,e,i){var n=null;if(this.checkKey(t)){var r=(n=this.create(t,e)).source[0].width,s=n.source[0].height;p.SpriteSheet(n,0,0,0,r,s,i),this.emit(l.ADD,t,n)}return n},addSpriteSheetFromAtlas:function(t,e){if(!this.checkKey(t))return null;var i=d(e,"atlas",null),n=d(e,"frame",null);if(i&&n){var r=this.get(i).get(n);if(r){var s=this.create(t,r.source.image);return r.trimmed?p.SpriteSheetFromAtlas(s,r,e):p.SpriteSheet(s,0,r.cutX,r.cutY,r.cutWidth,r.cutHeight,e),this.emit(l.ADD,t,s),s}}},create:function(t,e,i,n){var r=null;return this.checkKey(t)&&(r=new f(this,t,e,i,n),this.list[t]=r),r},exists:function(t){return this.list.hasOwnProperty(t)},get:function(t){return void 0===t&&(t="__DEFAULT"),this.list[t]?this.list[t]:t instanceof f?t:this.list.__MISSING},cloneFrame:function(t,e){if(this.list[t])return this.list[t].get(e).clone()},getFrame:function(t,e){if(this.list[t])return this.list[t].get(e)},getTextureKeys:function(){var t=[];for(var e in this.list)"__DEFAULT"!==e&&"__MISSING"!==e&&t.push(e);return t},getPixel:function(t,e,i,n){var r=this.getFrame(i,n);if(r){t-=r.x,e-=r.y;var s=r.data.cut;if(t+=s.x,e+=s.y,t>=s.x&&t<s.r&&e>=s.y&&e<s.b){var a=this._tempContext;a.clearRect(0,0,1,1),a.drawImage(r.source.image,t,e,1,1,0,0,1,1);var h=a.getImageData(0,0,1,1);return new o(h.data[0],h.data[1],h.data[2],h.data[3])}}return null},getPixelAlpha:function(t,e,i,n){var r=this.getFrame(i,n);if(r){t-=r.x,e-=r.y;var s=r.data.cut;if(t+=s.x,e+=s.y,t>=s.x&&t<s.r&&e>=s.y&&e<s.b){var o=this._tempContext;return o.clearRect(0,0,1,1),o.drawImage(r.source.image,t,e,1,1,0,0,1,1),o.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(t,e,i){return this.list[e]&&(t.texture=this.list[e],t.frame=t.texture.get(i)),t},renameTexture:function(t,e){var i=this.get(t);return!(!i||t===e||(i.key=e,this.list[e]=i,delete this.list[t],0))},each:function(t,e){for(var i=[null],n=1;n<arguments.length;n++)i.push(arguments[n]);for(var r in this.list)i[0]=this.list[r],t.apply(e,i)},destroy:function(){for(var t in this.list)this.list[t].destroy();this.list={},this.game=null,n.remove(this._tempCanvas)}});t.exports=m},function(t,e,i){var n=i(0),r=i(13),s=i(26),o=i(22),a=i(88),h=i(256),l=new n({Extends:h,initialize:function(t,e,i,n,r){h.call(this,t,e,i,n,r),this.add("__BASE",0,0,0,n,r),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=n,this.height=r,this.imageData=this.context.getImageData(0,0,n,r),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===o.WEBGL&&this.refresh(),this},draw:function(t,e,i){return this.context.drawImage(i,t,e),this.update()},drawFrame:function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var r=this.manager.getFrame(t,e);if(r){var s=r.canvasData,o=r.cutWidth,a=r.cutHeight,h=r.source.resolution;return this.context.drawImage(r.source.image,s.x,s.y,o,a,i,n,o/h,a/h),this.update()}return this},setPixel:function(t,e,i,n,r,s){if(void 0===s&&(s=255),t=Math.abs(Math.floor(t)),e=Math.abs(Math.floor(e)),this.getIndex(t,e)>-1){var o=this.context.getImageData(t,e,1,1);o.data[0]=i,o.data[1]=n,o.data[2]=r,o.data[3]=s,this.context.putImageData(o,t,e)}return this},putData:function(t,e,i,n,r,s,o){return void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=t.width),void 0===o&&(o=t.height),this.context.putImageData(t,e,i,n,r,s,o),this},getData:function(t,e,i,n){return t=r(Math.floor(t),0,this.width-1),e=r(Math.floor(e),0,this.height-1),i=r(i,1,this.width-t),n=r(n,1,this.height-e),this.context.getImageData(t,e,i,n)},getPixel:function(t,e,i){i||(i=new s);var n=this.getIndex(t,e);if(n>-1){var r=this.data,o=r[n+0],a=r[n+1],h=r[n+2],l=r[n+3];i.setTo(o,a,h,l)}return i},getPixels:function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.width),void 0===n&&(n=i),t=Math.abs(Math.round(t)),e=Math.abs(Math.round(e));for(var o=r(t,0,this.width),a=r(t+i,0,this.width),h=r(e,0,this.height),l=r(e+n,0,this.height),u=new s,c=[],d=h;d<l;d++){for(var p=[],f=o;f<a;f++)u=this.getPixel(f,d,u),p.push({x:f,y:d,color:u.color,alpha:u.alphaGL});c.push(p)}return c},getIndex:function(t,e){return t=Math.abs(Math.round(t)),e=Math.abs(Math.round(e)),t<this.width&&e<this.height?4*(t+e*this.width):-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(t,e,i,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.width),void 0===n&&(n=this.height),this.context.clearRect(t,e,i,n),this.update()},setSize:function(t,e){return void 0===e&&(e=t),t===this.width&&e===this.height||(this.canvas.width=t,this.canvas.height=e,this._source.width=t,this._source.height=e,this._source.isPowerOf2=a(t,e),this.frames.__BASE.setSize(t,e,0,0),this.width=t,this.height=e,this.refresh()),this},destroy:function(){h.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});t.exports=l},function(t,e,i){var n=i(0),r=i(13),s=i(18),o=new n({initialize:function(t,e,i,n,r,s,o){this.texture=t,this.name=e,this.source=t.source[i],this.sourceIndex=i,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(s,o,n,r)},setSize:function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this.cutX=i,this.cutY=n,this.cutWidth=t,this.cutHeight=e,this.width=t,this.height=e,this.halfWidth=Math.floor(.5*t),this.halfHeight=Math.floor(.5*e),this.centerX=Math.floor(t/2),this.centerY=Math.floor(e/2);var r=this.data,s=r.cut;s.x=i,s.y=n,s.w=t,s.h=e,s.r=i+t,s.b=n+e,r.sourceSize.w=t,r.sourceSize.h=e,r.spriteSourceSize.w=t,r.spriteSourceSize.h=e,r.radius=.5*Math.sqrt(t*t+e*e);var o=r.drawImage;return o.x=i,o.y=n,o.width=t,o.height=e,this.updateUVs()},setTrim:function(t,e,i,n,r,s){var o=this.data,a=o.spriteSourceSize;return o.trim=!0,o.sourceSize.w=t,o.sourceSize.h=e,a.x=i,a.y=n,a.w=r,a.h=s,a.r=i+r,a.b=n+s,this.x=i,this.y=n,this.width=r,this.height=s,this.halfWidth=.5*r,this.halfHeight=.5*s,this.centerX=Math.floor(r/2),this.centerY=Math.floor(s/2),this.updateUVs()},setCropUVs:function(t,e,i,n,s,o,a){var h=this.cutX,l=this.cutY,u=this.cutWidth,c=this.cutHeight,d=this.realWidth,p=this.realHeight,f=h+(e=r(e,0,d)),m=l+(i=r(i,0,p)),g=n=r(n,0,d-e),v=s=r(s,0,p-i),y=this.data;if(y.trim){var A=y.spriteSourceSize,x=e+(n=r(n,0,u-e)),w=i+(s=r(s,0,c-i));if(A.r<e||A.b<i||A.x>x||A.y>w)f=0,m=0,g=0,v=0;else{var b=Math.max(A.x,e),S=Math.max(A.y,i),E=Math.min(A.r,x)-b,T=Math.min(A.b,w)-S;g=E,v=T,f=o?h+(u-(b-A.x)-E):h+(b-A.x),m=a?l+(c-(S-A.y)-T):l+(S-A.y),e=b,i=S,n=E,s=T}}else o&&(f=h+(u-e-n)),a&&(m=l+(c-i-s));var _=this.source.width,M=this.source.height;return t.u0=Math.max(0,f/_),t.v0=Math.max(0,m/M),t.u1=Math.min(1,(f+g)/_),t.v1=Math.min(1,(m+v)/M),t.x=e,t.y=i,t.cx=f,t.cy=m,t.cw=g,t.ch=v,t.width=n,t.height=s,t.flipX=o,t.flipY=a,t},updateCropUVs:function(t,e,i){return this.setCropUVs(t,t.x,t.y,t.width,t.height,e,i)},setUVs:function(t,e,i,n,r,s){var o=this.data.drawImage;return o.width=t,o.height=e,this.u0=i,this.v0=n,this.u1=r,this.v1=s,this},updateUVs:function(){var t=this.cutX,e=this.cutY,i=this.cutWidth,n=this.cutHeight,r=this.data.drawImage;r.width=i,r.height=n;var s=this.source.width,o=this.source.height;return this.u0=t/s,this.v0=e/o,this.u1=(t+i)/s,this.v1=(e+n)/o,this},updateUVsInverted:function(){var t=this.source.width,e=this.source.height;return this.u0=(this.cutX+this.cutHeight)/t,this.v0=this.cutY/e,this.u1=this.cutX/t,this.v1=(this.cutY+this.cutWidth)/e,this},clone:function(){var t=new o(this.texture,this.name,this.sourceIndex);return t.cutX=this.cutX,t.cutY=this.cutY,t.cutWidth=this.cutWidth,t.cutHeight=this.cutHeight,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.halfWidth=this.halfWidth,t.halfHeight=this.halfHeight,t.centerX=this.centerX,t.centerY=this.centerY,t.rotated=this.rotated,t.data=s(!0,t.data,this.data),t.updateUVs(),t},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});t.exports=o},function(t,e,i){var n=i(17),r=i(0),s=i(88),o=i(165),a=new r({initialize:function(t,e,i,n,r){void 0===r&&(r=!1);var a=t.manager.game;this.renderer=a.renderer,this.texture=t,this.source=e,this.image=e,this.compressionAlgorithm=null,this.resolution=1,this.width=i||e.naturalWidth||e.videoWidth||e.width||0,this.height=n||e.naturalHeight||e.videoHeight||e.height||0,this.scaleMode=o.DEFAULT,this.isCanvas=e instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&e instanceof HTMLVideoElement,this.isRenderTexture="RenderTexture"===e.type,this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&e instanceof WebGLTexture,this.isPowerOf2=s(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=r,this.init(a)},init:function(t){var e=this.renderer;e&&(e.gl?this.isCanvas?this.glTexture=e.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=e.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=e.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=e.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),t.config.antialias||this.setFilter(1)},setFilter:function(t){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,t),this.scaleMode=t},setFlipY:function(t){return void 0===t&&(t=!0),this.flipY=t,this},update:function(){var t=this.renderer.gl;t&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):t&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&n.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});t.exports=a},function(t,e,i){var n=i(684),r=i(17),s=i(7);t.exports=function(t){var e=s(t,"data",[]),i=s(t,"canvas",null),o=s(t,"palette",n),a=s(t,"pixelWidth",1),h=s(t,"pixelHeight",a),l=s(t,"resizeCanvas",!0),u=s(t,"clearCanvas",!0),c=s(t,"preRender",null),d=s(t,"postRender",null),p=Math.floor(Math.abs(e[0].length*a)),f=Math.floor(Math.abs(e.length*h));i||(i=r.create2D(this,p,f),l=!1,u=!1),l&&(i.width=p,i.height=f);var m=i.getContext("2d");u&&m.clearRect(0,0,p,f),c&&c(i,m);for(var g=0;g<e.length;g++)for(var v=e[g],y=0;y<v.length;y++){var A=v[y];"."!==A&&" "!==A&&(m.fillStyle=o[A],m.fillRect(y*a,g*h,a,h))}return d&&d(i,m),i}},function(t,e){t.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(t,e,i){t.exports={AtlasXML:i(686),Canvas:i(687),Image:i(688),JSONArray:i(689),JSONHash:i(690),SpriteSheet:i(691),SpriteSheetFromAtlas:i(692),UnityYAML:i(693)}},function(t,e){t.exports=function(t,e,i){if(i.getElementsByTagName("TextureAtlas")){var n=t.source[e];t.add("__BASE",e,0,0,n.width,n.height);for(var r,s=i.getElementsByTagName("SubTexture"),o=0;o<s.length;o++){var a=s[o].attributes,h=a.name.value,l=parseInt(a.x.value,10),u=parseInt(a.y.value,10),c=parseInt(a.width.value,10),d=parseInt(a.height.value,10);if(r=t.add(h,e,l,u,c,d),a.frameX){var p=Math.abs(parseInt(a.frameX.value,10)),f=Math.abs(parseInt(a.frameY.value,10)),m=parseInt(a.frameWidth.value,10),g=parseInt(a.frameHeight.value,10);r.setTrim(c,d,p,f,m,g)}}return t}}},function(t,e){t.exports=function(t,e){var i=t.source[e];return t.add("__BASE",e,0,0,i.width,i.height),t}},function(t,e){t.exports=function(t,e){var i=t.source[e];return t.add("__BASE",e,0,0,i.width,i.height),t}},function(t,e,i){var n=i(56);t.exports=function(t,e,i){if(i.frames||i.textures){var r=t.source[e];t.add("__BASE",e,0,0,r.width,r.height);for(var s,o=Array.isArray(i.textures)?i.textures[e].frames:i.frames,a=0;a<o.length;a++){var h=o[a];s=t.add(h.filename,e,h.frame.x,h.frame.y,h.frame.w,h.frame.h),h.trimmed&&s.setTrim(h.sourceSize.w,h.sourceSize.h,h.spriteSourceSize.x,h.spriteSourceSize.y,h.spriteSourceSize.w,h.spriteSourceSize.h),h.rotated&&(s.rotated=!0,s.updateUVsInverted());var l=h.anchor||h.pivot;l&&(s.customPivot=!0,s.pivotX=l.x,s.pivotY=l.y),s.customData=n(h)}for(var u in i)"frames"!==u&&(Array.isArray(i[u])?t.customData[u]=i[u].slice(0):t.customData[u]=i[u]);return t}}},function(t,e,i){var n=i(56);t.exports=function(t,e,i){if(i.frames){var r=t.source[e];t.add("__BASE",e,0,0,r.width,r.height);var s,o=i.frames;for(var a in o)if(o.hasOwnProperty(a)){var h=o[a];s=t.add(a,e,h.frame.x,h.frame.y,h.frame.w,h.frame.h),h.trimmed&&s.setTrim(h.sourceSize.w,h.sourceSize.h,h.spriteSourceSize.x,h.spriteSourceSize.y,h.spriteSourceSize.w,h.spriteSourceSize.h),h.rotated&&(s.rotated=!0,s.updateUVsInverted());var l=h.anchor||h.pivot;l&&(s.customPivot=!0,s.pivotX=l.x,s.pivotY=l.y),s.customData=n(h)}for(var u in i)"frames"!==u&&(Array.isArray(i[u])?t.customData[u]=i[u].slice(0):t.customData[u]=i[u]);return t}}},function(t,e,i){var n=i(1);t.exports=function(t,e,i,r,s,o,a){var h=n(a,"frameWidth",null),l=n(a,"frameHeight",h);if(null===h)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var u=t.source[e];t.add("__BASE",e,0,0,u.width,u.height);var c=n(a,"startFrame",0),d=n(a,"endFrame",-1),p=n(a,"margin",0),f=n(a,"spacing",0),m=Math.floor((s-p+f)/(h+f))*Math.floor((o-p+f)/(l+f));(c>m||c<-m)&&(c=0),c<0&&(c=m+c),-1!==d&&(m=c+(d+1));for(var g=p,v=p,y=0,A=0,x=0;x<m;x++){y=0,A=0;var w=g+h,b=v+l;w>s&&(y=w-s),b>o&&(A=b-o),t.add(x,e,i+g,r+v,h-y,l-A),(g+=h+f)+h>s&&(g=p,v+=l+f)}return t}},function(t,e,i){var n=i(1);t.exports=function(t,e,i){var r=n(i,"frameWidth",null),s=n(i,"frameHeight",r);if(!r)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var o=t.source[0];t.add("__BASE",0,0,0,o.width,o.height);var a,h=n(i,"startFrame",0),l=n(i,"endFrame",-1),u=n(i,"margin",0),c=n(i,"spacing",0),d=e.cutX,p=e.cutY,f=e.cutWidth,m=e.cutHeight,g=e.realWidth,v=e.realHeight,y=Math.floor((g-u+c)/(r+c)),A=Math.floor((v-u+c)/(s+c)),x=y*A,w=e.x,b=r-w,S=r-(g-f-w),E=e.y,T=s-E,_=s-(v-m-E);(h>x||h<-x)&&(h=0),h<0&&(h=x+h),-1!==l&&(x=h+(l+1));for(var M=u,C=u,P=0,R=e.sourceIndex,O=0;O<A;O++){for(var L=0===O,I=O===A-1,D=0;D<y;D++){var B=0===D,k=D===y-1;if(a=t.add(P,R,d+M,p+C,r,s),B||L||k||I){var F=B?w:0,N=L?E:0,z=0,U=0;B&&(z+=r-b),k&&(z+=r-S),L&&(U+=s-T),I&&(U+=s-_);var G=r-z,V=s-U;a.cutWidth=G,a.cutHeight=V,a.setTrim(r,s,F,N,G,V)}M+=c,M+=B?b:k?S:r,P++}M=u,C+=c,C+=L?T:I?_:s}return t}},function(t,e){var i=0,n=function(t,e,n,r){var s=i-r.y-r.height;t.add(n,e,r.x,s,r.width,r.height)};t.exports=function(t,e,r){var s=t.source[e];t.add("__BASE",e,0,0,s.width,s.height),i=s.height;for(var o=r.split("\n"),a=/^[ ]*(- )*(\w+)+[: ]+(.*)/,h="",l="",u={x:0,y:0,width:0,height:0},c=0;c<o.length;c++){var d=o[c].match(a);if(d){var p="- "===d[1],f=d[2],m=d[3];if(p&&(l!==h&&(n(t,e,l,u),h=l),u={x:0,y:0,width:0,height:0}),"name"!==f)switch(f){case"x":case"y":case"width":case"height":u[f]=parseInt(m,10)}else l=m}}return l!==h&&n(t,e,l,u),t}},function(t,e,i){var n=i(0),r=i(7),s=i(4),o=i(695),a=new n({initialize:function(t,e){this.game=t,this.raf=new o,this.started=!1,this.running=!1,this.minFps=r(e,"min",5),this.targetFps=r(e,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=s,this.forceSetTimeOut=r(e,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=r(e,"deltaHistory",10),this.panicMax=r(e,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=r(e,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var t=window.performance.now();this.time=t,this.lastTime=t,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0;for(var e=0;e<this.deltaSmoothingMax;e++)this.deltaHistory[e]=Math.min(this._target,this.deltaHistory[e]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(t){if(this.started)return this;this.started=!0,this.running=!0;for(var e=0;e<this.deltaSmoothingMax;e++)this.deltaHistory[e]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=t,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var t=window.performance.now();this.now=t;var e=t-this.lastTime;e<0&&(e=0),this.rawDelta=e;var i=this.deltaIndex,n=this.deltaHistory,r=this.deltaSmoothingMax,s=e,o=e;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,s=Math.min(s,this._target)),s>this._min&&(s=n[i],s=Math.min(s,this._min)),n[i]=s,this.deltaIndex++,this.deltaIndex>r&&(this.deltaIndex=0),o=0;for(var a=0;a<r;a++)o+=n[a];o/=r}this.delta=o,this.time+=this.rawDelta,t>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0),this.framesThisSecond++;var h=o/this._target;this.callback(t,o,h),this.lastTime=t,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(t){this.running||(t&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=s,this.raf=null,this.game=null}});t.exports=a},function(t,e,i){var n=i(0),r=i(4),s=new n({initialize:function(){this.isRunning=!1,this.callback=r,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var t=this;this.step=function e(){var i=window.performance.now();t.lastTime=t.tick,t.tick=i,t.callback(i),t.timeOutID=window.requestAnimationFrame(e)},this.stepTimeout=function e(){var i=Date.now(),n=Math.min(Math.max(2*t.target+t.tick-i,0),t.target);t.lastTime=t.tick,t.tick=i,t.callback(i),t.timeOutID=window.setTimeout(e,n)}},start:function(t,e,i){this.isRunning||(this.callback=t,this.isSetTimeOut=e,this.target=i,this.isRunning=!0,this.timeOutID=e?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=r}});t.exports=s},function(t,e,i){var n=i(14);t.exports=function(t){var e,i=t.events;void 0!==document.hidden?e="visibilitychange":["webkit","moz","ms"].forEach((function(t){void 0!==document[t+"Hidden"]&&(document.hidden=function(){return document[t+"Hidden"]},e=t+"visibilitychange")})),e&&document.addEventListener(e,(function(t){document.hidden||"pause"===t.type?i.emit(n.HIDDEN):i.emit(n.VISIBLE)}),!1),window.onblur=function(){i.emit(n.BLUR)},window.onfocus=function(){i.emit(n.FOCUS)},window.focus&&t.config.autoFocus&&window.focus()}},function(t,e,i){t.exports={Canvas:i(698),Events:i(52),Snapshot:i(699),WebGL:i(700)}},function(t,e,i){t.exports={CanvasRenderer:i(227),GetBlendModes:i(229),SetTransform:i(93)}},function(t,e,i){t.exports={Canvas:i(228),WebGL:i(242)}},function(t,e,i){var n=i(73),r=i(18),s={PipelineManager:i(231),Pipelines:i(701),RenderTarget:i(126),Utils:i(20),WebGLPipeline:i(35),WebGLRenderer:i(230),WebGLShader:i(234)};s=r(!1,s,n),t.exports=s},function(t,e,i){var n=i(111),r=i(18),s={BitmapMaskPipeline:i(232),Events:i(233),GraphicsPipeline:i(235),LightPipeline:i(236),MultiPipeline:i(75),PointLightPipeline:i(237),PostFXPipeline:i(702),RopePipeline:i(238),SinglePipeline:i(239),UtilityPipeline:i(240)};s=r(!1,s,n),t.exports=s},function(t,e,i){var n=i(0),r=i(127),s=i(1),o=i(703),a=i(241),h=i(35),l=new n({Extends:h,initialize:function(t){t.renderTarget=s(t,"renderTarget",1),t.fragShader=s(t,"fragShader",o),t.vertShader=s(t,"vertShader",a),t.attributes=s(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.batchSize=1,t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],h.call(this,t),this.isPostFX=!0,this.gameObject,this.colorMatrix=new r,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){h.prototype.boot.call(this);var t=this.manager.UTILITY_PIPELINE;this.fullFrame1=t.fullFrame1,this.fullFrame2=t.fullFrame2,this.halfFrame1=t.halfFrame1,this.halfFrame2=t.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(t){this.bindAndDraw(t)},copyFrame:function(t,e,i,n,r){this.manager.copyFrame(t,e,i,n,r)},copyToGame:function(t){this.manager.copyToGame(t)},drawFrame:function(t,e,i){this.manager.drawFrame(t,e,i,this.colorMatrix)},blendFrames:function(t,e,i,n,r){this.manager.blendFrames(t,e,i,n,r)},blendFramesAdditive:function(t,e,i,n,r){this.manager.blendFramesAdditive(t,e,i,n,r)},clearFrame:function(t,e){this.manager.clearFrame(t,e)},blitFrame:function(t,e,i,n,r,s){this.manager.blitFrame(t,e,i,n,r,s)},copyFrameRect:function(t,e,i,n,r,s,o,a){this.manager.copyFrameRect(t,e,i,n,r,s,o,a)},bindAndDraw:function(t,e,i,n,r){void 0===i&&(i=!0),void 0===n&&(n=!0);var s=this.gl,o=this.renderer;this.bind(r),this.set1i("uMainSampler",0),e?(s.viewport(0,0,e.width,e.height),s.bindFramebuffer(s.FRAMEBUFFER,e.framebuffer),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,e.texture,0),i&&(n?s.clearColor(0,0,0,0):s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT))):(o.popFramebuffer(!1,!1,!1),o.currentFramebuffer||s.viewport(0,0,o.width,o.height)),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,t.texture),s.bufferData(s.ARRAY_BUFFER,this.vertexData,s.STATIC_DRAW),s.drawArrays(s.TRIANGLES,0,6),e?(s.bindTexture(s.TEXTURE_2D,null),s.bindFramebuffer(s.FRAMEBUFFER,null)):o.resetTextures()}});t.exports=l},function(t,e){t.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join("\n")},function(t,e,i){t.exports={BasePlugin:i(257),DefaultPlugins:i(125),PluginCache:i(16),PluginManager:i(249),ScenePlugin:i(705)}},function(t,e,i){var n=i(257),r=i(0),s=i(15),o=new r({Extends:n,initialize:function(t,e,i){n.call(this,e),this.scene=t,this.systems=t.sys,this.pluginKey=i,t.sys.events.once(s.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=o},function(t,e,i){var n=i(92),r=i(18),s={Events:i(15),GetPhysicsPlugins:i(252),GetScenePlugins:i(253),SceneManager:i(251),ScenePlugin:i(707),Settings:i(254),Systems:i(129)};s=r(!1,s,n),t.exports=s},function(t,e,i){var n=i(13),r=i(0),s=i(15),o=i(1),a=i(16),h=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.key=t.sys.settings.key,this.manager=t.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,t.sys.events.once(s.BOOT,this.boot,this),t.sys.events.on(s.START,this.pluginStart,this)},boot:function(){this.systems.events.once(s.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(s.SHUTDOWN,this.shutdown,this)},start:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",t,e),this},restart:function(t){var e=this.key;return this.manager.queueOp("stop",e),this.manager.queueOp("start",e,t),this},transition:function(t){void 0===t&&(t={});var e=o(t,"target",!1),i=this.manager.getScene(e);if(!e||!this.checkValidTransition(i))return!1;var n=o(t,"duration",1e3);this._elapsed=0,this._target=i,this._duration=n,this._willSleep=o(t,"sleep",!1),this._willRemove=o(t,"remove",!1);var r=o(t,"onUpdate",null);r&&(this._onUpdate=r,this._onUpdateScope=o(t,"onUpdateScope",this.scene));var a=o(t,"allowInput",!1);this.settings.transitionAllowInput=a;var h=i.sys.settings;return h.isTransition=!0,h.transitionFrom=this.scene,h.transitionDuration=n,h.transitionAllowInput=a,o(t,"moveAbove",!1)?this.manager.moveAbove(this.key,e):o(t,"moveBelow",!1)&&this.manager.moveBelow(this.key,e),i.sys.isSleeping()?i.sys.wake(o(t,"data")):this.manager.start(e,o(t,"data")),this.systems.events.emit(s.TRANSITION_OUT,i,n),this.systems.events.on(s.UPDATE,this.step,this),!0},checkValidTransition:function(t){return!(!t||t.sys.isActive()||t.sys.isTransitioning()||t===this.scene||this.systems.isTransitioning())},step:function(t,e){this._elapsed+=e,this.transitionProgress=n(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var t=this._target.sys,e=this._target.sys.settings;this.systems.events.off(s.UPDATE,this.step,this),t.events.emit(s.TRANSITION_COMPLETE,this.scene),e.isTransition=!1,e.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(t,e,i,n){return this.manager.add(t,e,i,n)},launch:function(t,e){return t&&t!==this.key&&this.manager.queueOp("start",t,e),this},run:function(t,e){return t&&t!==this.key&&this.manager.queueOp("run",t,e),this},pause:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("pause",t,e),this},resume:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("resume",t,e),this},sleep:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("sleep",t,e),this},wake:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("wake",t,e),this},switch:function(t){return t!==this.key&&this.manager.queueOp("switch",this.key,t),this},stop:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("stop",t,e),this},setActive:function(t,e,i){void 0===e&&(e=this.key);var n=this.manager.getScene(e);return n&&n.sys.setActive(t,i),this},setVisible:function(t,e){void 0===e&&(e=this.key);var i=this.manager.getScene(e);return i&&i.sys.setVisible(t),this},isSleeping:function(t){return void 0===t&&(t=this.key),this.manager.isSleeping(t)},isActive:function(t){return void 0===t&&(t=this.key),this.manager.isActive(t)},isPaused:function(t){return void 0===t&&(t=this.key),this.manager.isPaused(t)},isVisible:function(t){return void 0===t&&(t=this.key),this.manager.isVisible(t)},swapPosition:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.swapPosition(t,e),this},moveAbove:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.moveAbove(t,e),this},moveBelow:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.moveBelow(t,e),this},remove:function(t){return void 0===t&&(t=this.key),this.manager.remove(t),this},moveUp:function(t){return void 0===t&&(t=this.key),this.manager.moveUp(t),this},moveDown:function(t){return void 0===t&&(t=this.key),this.manager.moveDown(t),this},bringToTop:function(t){return void 0===t&&(t=this.key),this.manager.bringToTop(t),this},sendToBack:function(t){return void 0===t&&(t=this.key),this.manager.sendToBack(t),this},get:function(t){return this.manager.getScene(t)},getIndex:function(t){return void 0===t&&(t=this.key),this.manager.getIndex(t)},shutdown:function(){var t=this.systems.events;t.off(s.SHUTDOWN,this.shutdown,this),t.off(s.POST_UPDATE,this.step,this),t.off(s.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});a.register("ScenePlugin",h,"scenePlugin"),t.exports=h},function(t,e,i){var n=i(128),r=i(18),s={CreatePixelPerfectHandler:i(258),CreateInteractiveObject:i(259),Events:i(45),Gamepad:i(709),InputManager:i(244),InputPlugin:i(721),InputPluginCache:i(95),Keyboard:i(722),Mouse:i(736),Pointer:i(247),Touch:i(737)};s=r(!1,s,n),t.exports=s},function(t,e,i){t.exports={Axis:i(260),Button:i(261),Events:i(131),Gamepad:i(262),GamepadPlugin:i(716),Configs:i(717)}},function(t,e){t.exports="down"},function(t,e){t.exports="up"},function(t,e){t.exports="connected"},function(t,e){t.exports="disconnected"},function(t,e){t.exports="down"},function(t,e){t.exports="up"},function(t,e,i){var n=i(0),r=i(9),s=i(131),o=i(262),a=i(7),h=i(95),l=i(45),u=new n({Extends:r,initialize:function(t){r.call(this),this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,t.pluginEvents.once(l.BOOT,this.boot,this),t.pluginEvents.on(l.START,this.start,this)},boot:function(){var t=this.scene.sys.game,e=this.settings.input,i=t.config;this.enabled=a(e,"gamepad",i.inputGamepad)&&t.device.input.gamepads,this.target=a(e,"gamepad.target",i.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(l.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(l.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var t=this,e=this.target,i=function(e){!e.defaultPrevented&&t.isActive()&&(t.refreshPads(),t.queue.push(e))};this.onGamepadHandler=i,e.addEventListener("gamepadconnected",i,!1),e.addEventListener("gamepaddisconnected",i,!1),this.sceneInputPlugin.pluginEvents.on(l.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(l.UPDATE,this.update);for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].removeAllListeners()},disconnectAll:function(){for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].pad.connected=!1},refreshPads:function(){var t=navigator.getGamepads();if(t)for(var e=this.gamepads,i=0;i<t.length;i++){var n=t[i];if(n){var r=n.id,s=n.index,a=e[s];if(a)a.id!==r?(a.destroy(),e[s]=new o(this,n)):a.update(n);else{var h=new o(this,n);e[s]=h,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=h):this._pad3=h:this._pad2=h:this._pad1=h}}}else this.disconnectAll()},getAll:function(){for(var t=[],e=this.gamepads,i=0;i<e.length;i++)e[i]&&t.push(e[i]);return t},getPad:function(t){for(var e=this.gamepads,i=0;i<e.length;i++)if(e[i]&&e[i].index===t)return e[i]},update:function(){if(this.enabled){this.refreshPads();var t=this.queue.length;if(0!==t)for(var e=this.queue.splice(0,t),i=0;i<t;i++){var n=e[i],r=this.getPad(n.gamepad.index);"gamepadconnected"===n.type?this.emit(s.CONNECTED,r,n):"gamepaddisconnected"===n.type&&this.emit(s.DISCONNECTED,r,n)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var t=0;t<this.gamepads.length;t++)this.gamepads[t]&&this.gamepads[t].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});h.register("GamepadPlugin",u,"gamepad","gamepad","inputGamepad"),t.exports=u},function(t,e,i){t.exports={DUALSHOCK_4:i(718),SNES_USB:i(719),XBOX_360:i(720)}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,e,i){var n=i(76),r=i(57),s=i(0),o=i(128),a=i(259),h=i(258),l=i(71),u=i(96),c=i(77),d=i(45),p=i(9),f=i(1),m=i(33),g=i(95),v=i(6),y=i(16),A=i(8),x=i(51),w=i(15),b=i(58),S=i(78),E=new s({Extends:p,initialize:function(t){p.call(this),this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.manager=t.sys.game.input,this.pluginEvents=new p,this.enabled=!0,this.displayList,this.cameras,g.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var e={cancelled:!1};this._eventContainer={stopPropagation:function(){e.cancelled=!0}},this._eventData=e,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,t.sys.events.once(w.BOOT,this.boot,this),t.sys.events.on(w.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(w.DESTROY,this.destroy,this),this.pluginEvents.emit(d.BOOT)},start:function(){var t=this.systems.events;t.on(w.TRANSITION_START,this.transitionIn,this),t.on(w.TRANSITION_OUT,this.transitionOut,this),t.on(w.TRANSITION_COMPLETE,this.transitionComplete,this),t.on(w.PRE_UPDATE,this.preUpdate,this),t.once(w.SHUTDOWN,this.shutdown,this),this.manager.events.on(d.GAME_OUT,this.onGameOut,this),this.manager.events.on(d.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(d.START)},onGameOver:function(t){this.isActive()&&this.emit(d.GAME_OVER,t.timeStamp,t)},onGameOut:function(t){this.isActive()&&this.emit(d.GAME_OUT,t.timeStamp,t)},preUpdate:function(){this.pluginEvents.emit(d.PRE_UPDATE);var t=this._pendingRemoval,e=this._pendingInsertion,i=t.length,n=e.length;if(0!==i||0!==n){for(var r=this._list,s=0;s<i;s++){var o=t[s],a=r.indexOf(o);a>-1&&(r.splice(a,1),this.clear(o,!0))}t.length=0,this._pendingRemoval.length=0,this._list=r.concat(e.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(t,e){if(!this.isActive())return!1;if(this.pluginEvents.emit(d.UPDATE,t,e),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var i,n=this.manager,r=n.pointers,s=n.pointersTotal;for(i=0;i<s;i++)r[i].updateMotion();if(0===this._list.length)return!1;var o=this.pollRate;if(-1===o)return!1;if(o>0){if(this._pollTimer-=e,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var a=!1;for(i=0;i<s;i++){var h=0,l=r[i];this._tempZones=[],this._temp=this.hitTestPointer(l),this.sortGameObjects(this._temp,l),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),h+=this.processOverOutEvents(l),2===this.getDragState(l)&&this.processDragThresholdEvent(l,t),h>0&&(a=!0)}return a},update:function(t,e){if(!this.isActive())return!1;for(var i=e.length,n=!1,r=0;r<i;r++){var s=0,a=e[r];switch(this._tempZones=[],this._temp=this.hitTestPointer(a),this.sortGameObjects(this._temp,a),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),t){case o.MOUSE_DOWN:s+=this.processDragDownEvent(a),s+=this.processDownEvents(a),s+=this.processOverOutEvents(a);break;case o.MOUSE_UP:s+=this.processDragUpEvent(a),s+=this.processUpEvents(a),s+=this.processOverOutEvents(a);break;case o.TOUCH_START:s+=this.processDragDownEvent(a),s+=this.processDownEvents(a),s+=this.processOverEvents(a);break;case o.TOUCH_END:case o.TOUCH_CANCEL:s+=this.processDragUpEvent(a),s+=this.processUpEvents(a),s+=this.processOutEvents(a);break;case o.MOUSE_MOVE:case o.TOUCH_MOVE:s+=this.processDragMoveEvent(a),s+=this.processMoveEvents(a),s+=this.processOverOutEvents(a);break;case o.MOUSE_WHEEL:s+=this.processWheelEvent(a)}s>0&&(n=!0)}return this._updatedThisFrame=!0,n},clear:function(t,e){void 0===e&&(e=!1);var i=t.input;if(i){e||this.queueForRemoval(t),i.gameObject=void 0,i.target=void 0,i.hitArea=void 0,i.hitAreaCallback=void 0,i.callbackContext=void 0,t.input=null;var n=this._draggable.indexOf(t);return n>-1&&this._draggable.splice(n,1),(n=this._drag[0].indexOf(t))>-1&&this._drag[0].splice(n,1),(n=this._over[0].indexOf(t))>-1&&(this._over[0].splice(n,1),this.manager.resetCursor(i)),t}},disable:function(t){t.input.enabled=!1},enable:function(t,e,i,n){return void 0===n&&(n=!1),t.input?t.input.enabled=!0:this.setHitArea(t,e,i),t.input&&n&&!t.input.dropZone&&(t.input.dropZone=n),this},hitTestPointer:function(t){for(var e=this.cameras.getCamerasBelowPointer(t),i=0;i<e.length;i++){for(var n=e[i],r=this.manager.hitTest(t,this._list,n),s=0;s<r.length;s++){var o=r[s];o.input.dropZone&&this._tempZones.push(o)}if(r.length>0)return t.camera=n,r}return t.camera=e[0],[]},processDownEvents:function(t){var e=0,i=this._temp,n=this._eventData,r=this._eventContainer;n.cancelled=!1;for(var s=!1,o=0;o<i.length;o++){var a=i[o];if(a.input){if(e++,a.emit(d.GAMEOBJECT_POINTER_DOWN,t,a.input.localX,a.input.localY,r),n.cancelled||!a.input){s=!0;break}if(this.emit(d.GAMEOBJECT_DOWN,t,a,r),n.cancelled||!a.input){s=!0;break}}}return!s&&this.manager&&(t.downElement===this.manager.game.canvas?this.emit(d.POINTER_DOWN,t,i):this.emit(d.POINTER_DOWN_OUTSIDE,t)),e},getDragState:function(t){return this._dragState[t.id]},setDragState:function(t,e){this._dragState[t.id]=e},processDragThresholdEvent:function(t,e){var i=!1,n=this.dragTimeThreshold,r=this.dragDistanceThreshold;if((r>0&&l(t.x,t.y,t.downX,t.downY)>=r||n>0&&e>=t.downTime+n)&&(i=!0),i)return this.setDragState(t,3),this.processDragStartList(t)},processDragStartList:function(t){if(3!==this.getDragState(t))return 0;for(var e=this._drag[t.id],i=0;i<e.length;i++){var n=e[i],r=n.input;r.dragState=2,r.dragStartX=n.x,r.dragStartY=n.y,r.dragStartXGlobal=t.worldX,r.dragStartYGlobal=t.worldY,r.dragX=r.dragStartXGlobal-r.dragStartX,r.dragY=r.dragStartYGlobal-r.dragStartY,n.emit(d.GAMEOBJECT_DRAG_START,t,r.dragX,r.dragY),this.emit(d.DRAG_START,t,n)}return this.setDragState(t,4),e.length},processDragDownEvent:function(t){var e=this._temp;if(0===this._draggable.length||0===e.length||!t.primaryDown||0!==this.getDragState(t))return 0;this.setDragState(t,1);for(var i=[],n=0;n<e.length;n++){var r=e[n];r.input.draggable&&0===r.input.dragState&&i.push(r)}return 0===i.length?(this.setDragState(t,0),0):(i.length>1&&(this.sortGameObjects(i,t),this.topOnly&&i.splice(1)),this._drag[t.id]=i,0===this.dragDistanceThreshold&&0===this.dragTimeThreshold?(this.setDragState(t,3),this.processDragStartList(t)):(this.setDragState(t,2),0))},processDragMoveEvent:function(t){if(2===this.getDragState(t)&&this.processDragThresholdEvent(t,this.manager.game.loop.now),4!==this.getDragState(t))return 0;for(var e=this._tempZones,i=this._drag[t.id],n=0;n<i.length;n++){var r,s,o=i[n],a=o.input,h=a.target;if(h){var l=e.indexOf(h);0===l?(o.emit(d.GAMEOBJECT_DRAG_OVER,t,h),this.emit(d.DRAG_OVER,t,o,h)):l>0?(o.emit(d.GAMEOBJECT_DRAG_LEAVE,t,h),this.emit(d.DRAG_LEAVE,t,o,h),a.target=e[0],h=a.target,o.emit(d.GAMEOBJECT_DRAG_ENTER,t,h),this.emit(d.DRAG_ENTER,t,o,h)):(o.emit(d.GAMEOBJECT_DRAG_LEAVE,t,h),this.emit(d.DRAG_LEAVE,t,o,h),e[0]?(a.target=e[0],h=a.target,o.emit(d.GAMEOBJECT_DRAG_ENTER,t,h),this.emit(d.DRAG_ENTER,t,o,h)):a.target=null)}else!h&&e[0]&&(a.target=e[0],h=a.target,o.emit(d.GAMEOBJECT_DRAG_ENTER,t,h),this.emit(d.DRAG_ENTER,t,o,h));if(o.parentContainer){var u=t.worldX-a.dragStartXGlobal,c=t.worldY-a.dragStartYGlobal,p=o.getParentRotation(),f=u*Math.cos(p)+c*Math.sin(p),m=c*Math.cos(p)-u*Math.sin(p);f*=1/o.parentContainer.scaleX,m*=1/o.parentContainer.scaleY,r=f+a.dragStartX,s=m+a.dragStartY}else r=t.worldX-a.dragX,s=t.worldY-a.dragY;o.emit(d.GAMEOBJECT_DRAG,t,r,s),this.emit(d.DRAG,t,o,r,s)}return i.length},processDragUpEvent:function(t){for(var e=this._drag[t.id],i=0;i<e.length;i++){var n=e[i],r=n.input;if(r&&2===r.dragState){r.dragState=0,r.dragX=r.localX-n.displayOriginX,r.dragY=r.localY-n.displayOriginY;var s=!1,o=r.target;o&&(n.emit(d.GAMEOBJECT_DROP,t,o),this.emit(d.DROP,t,n,o),r.target=null,s=!0),n.input&&(n.emit(d.GAMEOBJECT_DRAG_END,t,r.dragX,r.dragY,s),this.emit(d.DRAG_END,t,n,s))}}return this.setDragState(t,0),e.splice(0),0},processMoveEvents:function(t){var e=0,i=this._temp,n=this._eventData,r=this._eventContainer;n.cancelled=!1;for(var s=!1,o=0;o<i.length;o++){var a=i[o];if(a.input){if(e++,a.emit(d.GAMEOBJECT_POINTER_MOVE,t,a.input.localX,a.input.localY,r),n.cancelled||!a.input){s=!0;break}if(this.emit(d.GAMEOBJECT_MOVE,t,a,r),n.cancelled||!a.input){s=!0;break}if(this.topOnly)break}}return s||this.emit(d.POINTER_MOVE,t,i),e},processWheelEvent:function(t){var e=0,i=this._temp,n=this._eventData,r=this._eventContainer;n.cancelled=!1;for(var s=!1,o=t.deltaX,a=t.deltaY,h=t.deltaZ,l=0;l<i.length;l++){var u=i[l];if(u.input){if(e++,u.emit(d.GAMEOBJECT_POINTER_WHEEL,t,o,a,h,r),n.cancelled||!u.input){s=!0;break}if(this.emit(d.GAMEOBJECT_WHEEL,t,u,o,a,h,r),n.cancelled||!u.input){s=!0;break}}}return s||this.emit(d.POINTER_WHEEL,t,i,o,a,h),e},processOverEvents:function(t){var e=this._temp,i=0,n=e.length,r=[];if(n>0){var s=this.manager,o=this._eventData,a=this._eventContainer;o.cancelled=!1;for(var h=!1,l=0;l<n;l++){var u=e[l];if(u.input){if(r.push(u),s.setCursor(u.input),u.emit(d.GAMEOBJECT_POINTER_OVER,t,u.input.localX,u.input.localY,a),i++,o.cancelled||!u.input){h=!0;break}if(this.emit(d.GAMEOBJECT_OVER,t,u,a),o.cancelled||!u.input){h=!0;break}}}h||this.emit(d.POINTER_OVER,t,r)}return this._over[t.id]=r,i},processOutEvents:function(t){var e=this._over[t.id],i=0,n=e.length;if(n>0){var r=this.manager,s=this._eventData,o=this._eventContainer;s.cancelled=!1;var a=!1;this.sortGameObjects(e,t);for(var h=0;h<n;h++){var l=e[h];if((l=e[h]).input){if(r.resetCursor(l.input),l.emit(d.GAMEOBJECT_POINTER_OUT,t,o),i++,s.cancelled||!l.input){a=!0;break}if(this.emit(d.GAMEOBJECT_OUT,t,l,o),s.cancelled||!l.input){a=!0;break}a||this.emit(d.POINTER_OUT,t,e)}}this._over[t.id]=[]}return i},processOverOutEvents:function(t){var e,i,n=this._temp,r=[],s=[],o=[],a=this._over[t.id],h=this._drag[t.id],l=this.manager;for(e=0;e<a.length;e++)i=a[e],-1===n.indexOf(i)&&-1===h.indexOf(i)?r.push(i):o.push(i);for(e=0;e<n.length;e++)i=n[e],-1===a.indexOf(i)&&s.push(i);var u=r.length,c=0,p=this._eventData,f=this._eventContainer;p.cancelled=!1;var m=!1;if(u>0){for(this.sortGameObjects(r,t),e=0;e<u;e++)if((i=r[e]).input){if(l.resetCursor(i.input),i.emit(d.GAMEOBJECT_POINTER_OUT,t,f),c++,p.cancelled||!i.input){m=!0;break}if(this.emit(d.GAMEOBJECT_OUT,t,i,f),p.cancelled||!i.input){m=!0;break}}m||this.emit(d.POINTER_OUT,t,r)}if(u=s.length,p.cancelled=!1,m=!1,u>0){for(this.sortGameObjects(s,t),e=0;e<u;e++)if((i=s[e]).input){if(l.setCursor(i.input),i.emit(d.GAMEOBJECT_POINTER_OVER,t,i.input.localX,i.input.localY,f),c++,p.cancelled||!i.input){m=!0;break}if(this.emit(d.GAMEOBJECT_OVER,t,i,f),p.cancelled||!i.input){m=!0;break}}m||this.emit(d.POINTER_OVER,t,s)}return a=o.concat(s),this._over[t.id]=this.sortGameObjects(a,t),c},processUpEvents:function(t){var e=this._temp,i=this._eventData,n=this._eventContainer;i.cancelled=!1;for(var r=!1,s=0;s<e.length;s++){var o=e[s];if(o.input){if(o.emit(d.GAMEOBJECT_POINTER_UP,t,o.input.localX,o.input.localY,n),i.cancelled||!o.input){r=!0;break}if(this.emit(d.GAMEOBJECT_UP,t,o,n),i.cancelled||!o.input){r=!0;break}}}return!r&&this.manager&&(t.upElement===this.manager.game.canvas?this.emit(d.POINTER_UP,t,e):this.emit(d.POINTER_UP_OUTSIDE,t)),e.length},queueForInsertion:function(t){return-1===this._pendingInsertion.indexOf(t)&&-1===this._list.indexOf(t)&&this._pendingInsertion.push(t),this},queueForRemoval:function(t){return this._pendingRemoval.push(t),this},setDraggable:function(t,e){void 0===e&&(e=!0),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i];n.input.draggable=e;var r=this._draggable.indexOf(n);e&&-1===r?this._draggable.push(n):!e&&r>-1&&this._draggable.splice(r,1)}return this},makePixelPerfect:function(t){void 0===t&&(t=1);var e=this.systems.textures;return h(e,t)},setHitArea:function(t,e,i){if(void 0===e)return this.setHitAreaFromTexture(t);Array.isArray(t)||(t=[t]);var n=!1,r=!1,s=!1,o=!1,h=!1,l=!0;if(v(e)){var u=e;e=f(u,"hitArea",null),i=f(u,"hitAreaCallback",null),n=f(u,"draggable",!1),r=f(u,"dropZone",!1),s=f(u,"cursor",!1),o=f(u,"useHandCursor",!1),h=f(u,"pixelPerfect",!1);var c=f(u,"alphaTolerance",1);h&&(e={},i=this.makePixelPerfect(c)),e&&i||(this.setHitAreaFromTexture(t),l=!1)}else"function"!=typeof e||i||(i=e,e={});for(var d=0;d<t.length;d++){var p=t[d];if(h&&"Container"===p.type);else{var m=p.input?p.input:a(p,e,i);m.customHitArea=l,m.dropZone=r,m.cursor=o?"pointer":s,p.input=m,n&&this.setDraggable(p),this.queueForInsertion(p)}}return this},setHitAreaCircle:function(t,e,i,s,o){void 0===o&&(o=r);var a=new n(e,i,s);return this.setHitArea(t,a,o)},setHitAreaEllipse:function(t,e,i,n,r,s){void 0===s&&(s=c);var o=new u(e,i,n,r);return this.setHitArea(t,o,s)},setHitAreaFromTexture:function(t,e){void 0===e&&(e=x),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i],r=n.frame,s=0,o=0;n.width?(s=n.width,o=n.height):r&&(s=r.realWidth,o=r.realHeight),("Container"!==n.type||0!==s&&0!==o)&&0!==s&&0!==o&&(n.input=a(n,new A(0,0,s,o),e),this.queueForInsertion(n))}return this},setHitAreaRectangle:function(t,e,i,n,r,s){void 0===s&&(s=x);var o=new A(e,i,n,r);return this.setHitArea(t,o,s)},setHitAreaTriangle:function(t,e,i,n,r,s,o,a){void 0===a&&(a=S);var h=new b(e,i,n,r,s,o);return this.setHitArea(t,h,a)},enableDebug:function(t,e){void 0===e&&(e=65280);var i=t.input;if(!i||!i.hitArea)return this;var n=i.hitArea,r=n.type,s=i.hitAreaDebug,o=this.systems.add,a=this.systems.updateList;s&&(a.remove(s),s.destroy(),s=null);var h=0,l=0;switch(r){case m.CIRCLE:s=o.arc(0,0,n.radius),h=n.x-n.radius,l=n.y-n.radius;break;case m.ELLIPSE:s=o.ellipse(0,0,n.width,n.height),h=n.x-n.width/2,l=n.y-n.height/2;break;case m.LINE:s=o.line(0,0,n.x1,n.y1,n.x2,n.y2);break;case m.POLYGON:s=o.polygon(0,0,n.points);break;case m.RECTANGLE:s=o.rectangle(0,0,n.width,n.height),h=n.x,l=n.y;break;case m.TRIANGLE:s=o.triangle(0,0,n.x1,n.y1,n.x2,n.y2,n.x3,n.y3)}return s&&(s.isFilled=!1,s.preUpdate=function(){s.setStrokeStyle(1/t.scale,e),s.setDisplayOrigin(t.displayOriginX,t.displayOriginY);var i=t.x,n=t.y,r=t.rotation,o=t.scaleX,a=t.scaleY;if(t.parentContainer){var u=t.getWorldTransformMatrix();i=u.tx,n=u.ty,r=u.rotation,o=u.scaleX,a=u.scaleY}s.setRotation(r),s.setScale(o,a),s.setPosition(i+h,n+l),s.setScrollFactor(t.scrollFactorX,t.scrollFactorY),s.setDepth(t.depth)},a.add(s),i.hitAreaDebug=s),this},removeDebug:function(t){var e=t.input;if(e&&e.hitAreaDebug){var i=e.hitAreaDebug;this.systems.updateList.remove(i),i.destroy(),e.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(t){return this.pollRate=t,this._pollTimer=0,this},setGlobalTopOnly:function(t){return this.manager.globalTopOnly=t,this},setTopOnly:function(t){return this.topOnly=t,this},sortGameObjects:function(t,e){if(t.length<2)return t;var i=e.camera.renderList;return t.sort((function(t,e){return i.indexOf(e)-i.indexOf(t)}))},sortDropZones:function(t){return t.length<2?t:(this.scene.sys.depthSort(),t.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(t,e){if(t.parentContainer||e.parentContainer){if(t.parentContainer===e.parentContainer)return e.parentContainer.getIndex(e)-t.parentContainer.getIndex(t);if(t.parentContainer===e)return-1;if(e.parentContainer===t)return 1;for(var i=t.getIndexList(),n=e.getIndexList(),r=Math.min(i.length,n.length),s=0;s<r;s++){var o=i[s],a=n[s];if(o!==a)return a-o}return n.length-i.length}return this.displayList.getIndex(e)-this.displayList.getIndex(t)},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(t){return this.manager.addPointer(t)},setDefaultCursor:function(t){return this.manager.setDefaultCursor(t),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(d.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var t=0;t<10;t++)this._drag[t]=[],this._over[t]=[];this.removeAllListeners();var e=this.manager;e.canvas.style.cursor=e.defaultCursor;var i=this.systems.events;i.off(w.TRANSITION_START,this.transitionIn,this),i.off(w.TRANSITION_OUT,this.transitionOut,this),i.off(w.TRANSITION_COMPLETE,this.transitionComplete,this),i.off(w.PRE_UPDATE,this.preUpdate,this),e.events.off(d.GAME_OUT,this.onGameOut,this),e.events.off(d.GAME_OVER,this.onGameOver,this),i.off(w.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(d.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(w.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});y.register("InputPlugin",E,"input"),t.exports=E},function(t,e,i){t.exports={Events:i(97),KeyboardManager:i(245),KeyboardPlugin:i(730),Key:i(274),KeyCodes:i(91),KeyCombo:i(275),AdvanceKeyCombo:i(277),ProcessKeyCombo:i(276),ResetKeyCombo:i(278),JustDown:i(732),JustUp:i(733),DownDuration:i(734),UpDuration:i(735)}},function(t,e){t.exports="keydown"},function(t,e){t.exports="keyup"},function(t,e){t.exports="keycombomatch"},function(t,e){t.exports="down"},function(t,e){t.exports="keydown-"},function(t,e){t.exports="keyup-"},function(t,e){t.exports="up"},function(t,e,i){var n=i(0),r=i(9),s=i(97),o=i(14),a=i(7),h=i(45),l=i(95),u=i(274),c=i(91),d=i(275),p=i(731),f=i(15),m=i(89),g=new n({Extends:r,initialize:function(t){r.call(this),this.game=t.systems.game,this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.manager=t.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,t.pluginEvents.once(h.BOOT,this.boot,this),t.pluginEvents.on(h.START,this.start,this)},boot:function(){var t=this.settings.input;this.enabled=a(t,"keyboard",!0);var e=a(t,"keyboard.capture",null);e&&this.addCaptures(e),this.sceneInputPlugin.pluginEvents.once(h.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(h.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(h.SHUTDOWN,this.shutdown,this),this.game.events.on(o.BLUR,this.resetKeys,this),this.scene.sys.events.on(f.PAUSE,this.resetKeys,this),this.scene.sys.events.on(f.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(t){return this.manager.addCapture(t),this},removeCapture:function(t){return this.manager.removeCapture(t),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:c.UP,down:c.DOWN,left:c.LEFT,right:c.RIGHT,space:c.SPACE,shift:c.SHIFT})},addKeys:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var n={};if("string"==typeof t){t=t.split(",");for(var r=0;r<t.length;r++){var s=t[r].trim();s&&(n[s]=this.addKey(s,e,i))}}else for(var o in t)n[o]=this.addKey(t[o],e,i);return n},addKey:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var n=this.keys;if(t instanceof u){var r=n.indexOf(t);return r>-1?n[r]=t:n[t.keyCode]=t,e&&this.addCapture(t.keyCode),t.setEmitOnRepeat(i),t}return"string"==typeof t&&(t=c[t.toUpperCase()]),n[t]||(n[t]=new u(this,t),e&&this.addCapture(t),n[t].setEmitOnRepeat(i)),n[t]},removeKey:function(t,e){void 0===e&&(e=!1);var i,n=this.keys;if(t instanceof u){var r=n.indexOf(t);r>-1&&(i=this.keys[r],this.keys[r]=void 0)}else"string"==typeof t&&(t=c[t.toUpperCase()]);return n[t]&&(i=n[t],n[t]=void 0),i&&(i.plugin=null,e&&i.destroy()),this},removeAllKeys:function(t){for(var e=this.keys,i=0;i<e.length;i++){var n=e[i];n&&(e[i]=void 0,t&&n.destroy())}return this},createCombo:function(t,e){return new d(this,t,e)},checkDown:function(t,e){if(void 0===e&&(e=0),this.enabled&&t.isDown){var i=m(this.time-t.timeDown,e);if(i>t._tick)return t._tick=i,!0}return!1},update:function(){var t=this.manager.queue,e=t.length;if(this.isActive()&&0!==e)for(var i=this.keys,n=0;n<e;n++){var r=t[n],o=r.keyCode,a=i[o],h=!1;void 0===r.cancelled&&(r.cancelled=0,r.stopImmediatePropagation=function(){r.cancelled=1},r.stopPropagation=function(){r.cancelled=-1}),-1!==r.cancelled&&(o===this.prevCode&&r.timeStamp===this.prevTime&&r.type===this.prevType||(this.prevCode=o,this.prevTime=r.timeStamp,this.prevType=r.type,"keydown"===r.type?(a&&(h=a.isDown,a.onDown(r)),r.cancelled||a&&h||(p[o]&&this.emit(s.KEY_DOWN+p[o],r),r.cancelled||this.emit(s.ANY_KEY_DOWN,r))):(a&&a.onUp(r),r.cancelled||(p[o]&&this.emit(s.KEY_UP+p[o],r),r.cancelled||this.emit(s.ANY_KEY_UP,r))),1===r.cancelled&&(r.cancelled=0)))}},resetKeys:function(){for(var t=this.keys,e=0;e<t.length;e++)t[e]&&t[e].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(h.MANAGER_PROCESS,this.update,this),this.game.events.off(o.BLUR,this.resetKeys),this.scene.sys.events.off(f.PAUSE,this.resetKeys,this),this.scene.sys.events.off(f.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var t=this.keys,e=0;e<t.length;e++)t[e]&&t[e].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});l.register("KeyboardPlugin",g,"keyboard","keyboard","inputKeyboard"),t.exports=g},function(t,e,i){var n=i(91),r={};for(var s in n)r[n[s]]=s;t.exports=r},function(t,e){t.exports=function(t){return!!t._justDown&&(t._justDown=!1,!0)}},function(t,e){t.exports=function(t){return!!t._justUp&&(t._justUp=!1,!0)}},function(t,e){t.exports=function(t,e){void 0===e&&(e=50);var i=t.plugin.game.loop.time-t.timeDown;return t.isDown&&i<e}},function(t,e){t.exports=function(t,e){void 0===e&&(e=50);var i=t.plugin.game.loop.time-t.timeUp;return t.isUp&&i<e}},function(t,e,i){t.exports={MouseManager:i(246)}},function(t,e,i){t.exports={TouchManager:i(248)}},function(t,e,i){var n=i(67),r=i(18),s={Builders:i(739),Events:i(138),TweenManager:i(755),Tween:i(137),TweenData:i(139),Timeline:i(284)};s=r(!1,s,n),t.exports=s},function(t,e,i){t.exports={GetBoolean:i(66),GetEaseFunction:i(49),GetNewValue:i(98),GetProps:i(279),GetTargets:i(134),GetTweens:i(280),GetValueOp:i(135),NumberTweenBuilder:i(281),StaggerBuilder:i(282),TimelineBuilder:i(283),TweenBuilder:i(99)}},function(t,e){t.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(t,e){t.exports="complete"},function(t,e){t.exports="loop"},function(t,e){t.exports="pause"},function(t,e){t.exports="resume"},function(t,e){t.exports="start"},function(t,e){t.exports="update"},function(t,e){t.exports="active"},function(t,e){t.exports="complete"},function(t,e){t.exports="loop"},function(t,e){t.exports="repeat"},function(t,e){t.exports="start"},function(t,e){t.exports="stop"},function(t,e){t.exports="update"},function(t,e){t.exports="yoyo"},function(t,e,i){var n=i(54),r=i(0),s=i(281),o=i(16),a=i(15),h=i(282),l=i(283),u=i(67),c=i(99),d=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,t.sys.events.once(a.BOOT,this.boot,this),t.sys.events.on(a.START,this.start,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(a.PRE_UPDATE,this.preUpdate,this),t.on(a.UPDATE,this.update,this),t.once(a.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(t){return l(this,t)},timeline:function(t){var e=l(this,t);return e.paused||(this._add.push(e),this._toProcess++),e},create:function(t){return c(this,t)},add:function(t){var e=c(this,t);return this._add.push(e),this._toProcess++,e},existing:function(t){return this._add.push(t),this._toProcess++,this},addCounter:function(t){var e=s(this,t);return this._add.push(e),this._toProcess++,e},stagger:function(t,e){return h(t,e)},preUpdate:function(){if(0!==this._toProcess){var t,e,i=this._destroy,n=this._active,r=this._pending;for(t=0;t<i.length;t++){e=i[t];var s=n.indexOf(e);-1===s?(s=r.indexOf(e))>-1&&(e.state=u.REMOVED,r.splice(s,1)):(e.state=u.REMOVED,n.splice(s,1))}for(i.length=0,i=this._add,t=0;t<i.length;t++)(e=i[t]).state===u.PENDING_ADD&&(e.init()?(e.play(),this._active.push(e)):this._pending.push(e));i.length=0,this._toProcess=0}},update:function(t,e){var i,n=this._active;e*=this.timeScale;for(var r=0;r<n.length;r++)(i=n[r]).update(t,e)&&(this._destroy.push(i),this._toProcess++)},remove:function(t){return n(this._add,t),n(this._pending,t),n(this._active,t),n(this._destroy,t),t.state=u.REMOVED,this},makeActive:function(t){if(-1!==this._add.indexOf(t)||-1!==this._active.indexOf(t))return this;var e=this._pending.indexOf(t);return-1!==e&&this._pending.splice(e,1),this._add.push(t),t.state=u.PENDING_ADD,this._toProcess++,this},each:function(t,e){for(var i=[null],n=1;n<arguments.length;n++)i.push(arguments[n]);for(var r in this.list)i[0]=this.list[r],t.apply(e,i)},getAllTweens:function(){for(var t=this._active,e=[],i=0;i<t.length;i++)e.push(t[i]);return e},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(t,e){void 0===e&&(e=!1);var i,n,r,s=this._active,o=[];for(Array.isArray(t)||(t=[t]),n=0;n<s.length;n++)for(i=s[n],r=0;r<t.length;r++)i.hasTarget(t[r])&&o.push(i);if(e)for(s=this._pending,n=0;n<s.length;n++)for(i=s[n],r=0;r<t.length;r++)i.hasTarget(t[r])&&o.push(i);return o},isTweening:function(t){for(var e,i=this._active,n=0;n<i.length;n++)if((e=i[n]).hasTarget(t)&&e.isPlaying())return!0;return!1},killAll:function(){for(var t=this.getAllTweens(),e=0;e<t.length;e++)t[e].stop();return this},killTweensOf:function(t){for(var e=this.getTweensOf(t),i=0;i<e.length;i++)e[i].stop();return this},pauseAll:function(){for(var t=this._active,e=0;e<t.length;e++)t[e].pause();return this},resumeAll:function(){for(var t=this._active,e=0;e<t.length;e++)t[e].resume();return this},setGlobalTimeScale:function(t){return this.timeScale=t,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var t=this.systems.events;t.off(a.PRE_UPDATE,this.preUpdate,this),t.off(a.UPDATE,this.update,this),t.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});o.register("TweenManager",d,"tweens"),t.exports=d},function(t,e){function i(t,e,i){var n=i?t[e]:Object.getOwnPropertyDescriptor(t,e);return!i&&n.value&&"object"==o(n.value)&&(n=n.value),!(!n||!function(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(n))&&(void 0===n.enumerable&&(n.enumerable=!0),void 0===n.configurable&&(n.configurable=!0),n)}function n(t,e){var i=Object.getOwnPropertyDescriptor(t,e);return!!i&&(i.value&&"object"==o(i.value)&&(i=i.value),!1===i.configurable)}function r(t,e,r,s){for(var o in e)if(e.hasOwnProperty(o)){var h=i(e,o,r);if(!1!==h){if(n((s||t).prototype,o)){if(a.ignoreFinals)continue;throw new Error("cannot override final property '"+o+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,o,h)}else t.prototype[o]=e[o]}}function s(t,e){if(e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)r(t,e[i].prototype||e[i])}}function a(t){var e,i;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");e=t.initialize,delete t.initialize}else if(t.Extends){var n=t.Extends;e=function(){n.apply(this,arguments)}}else e=function(){};t.Extends?(e.prototype=Object.create(t.Extends.prototype),e.prototype.constructor=e,i=t.Extends,delete t.Extends):e.prototype.constructor=e;var o=null;return t.Mixins&&(o=t.Mixins,delete t.Mixins),s(e,o),r(e,t,!0,i),e}a.extend=r,a.mixin=s,a.ignoreFinals=!1,t.exports=a},function(t,e,i){t.exports={Clock:i(758),TimerEvent:i(285)}},function(t,e,i){var n=i(0),r=i(16),s=i(15),o=i(285),a=i(54),h=new n({initialize:function(t){this.scene=t,this.systems=t.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],t.sys.events.once(s.BOOT,this.boot,this),t.sys.events.on(s.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(s.PRE_UPDATE,this.preUpdate,this),t.on(s.UPDATE,this.update,this),t.once(s.SHUTDOWN,this.shutdown,this)},addEvent:function(t){var e;return t instanceof o?(e=t,this.removeEvent(e),e.elapsed=e.startAt,e.hasDispatched=!1,e.repeatCount=-1===e.repeat||e.loop?999999999999:e.repeat):e=new o(t),this._pendingInsertion.push(e),e},delayedCall:function(t,e,i,n){return this.addEvent({delay:t,callback:e,args:i,callbackScope:n})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];a(this._pendingRemoval,i),a(this._pendingInsertion,i),a(this._active,i)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var t=this._pendingRemoval.length,e=this._pendingInsertion.length;if(0!==t||0!==e){var i,n;for(i=0;i<t;i++){n=this._pendingRemoval[i];var r=this._active.indexOf(n);r>-1&&this._active.splice(r,1),n.destroy()}for(i=0;i<e;i++)n=this._pendingInsertion[i],this._active.push(n);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(t,e){if(this.now=t,!this.paused){e*=this.timeScale;for(var i=0;i<this._active.length;i++){var n=this._active[i];if(!n.paused&&(n.elapsed+=e*n.timeScale,n.elapsed>=n.delay)){var r=n.elapsed-n.delay;n.elapsed=n.delay,!n.hasDispatched&&n.callback&&(n.hasDispatched=!0,n.callback.apply(n.callbackScope,n.args)),n.repeatCount>0?(n.repeatCount--,n.elapsed=r,n.hasDispatched=!1):this._pendingRemoval.push(n)}}}},shutdown:function(){var t;for(t=0;t<this._pendingInsertion.length;t++)this._pendingInsertion[t].destroy();for(t=0;t<this._active.length;t++)this._active[t].destroy();for(t=0;t<this._pendingRemoval.length;t++)this._pendingRemoval[t].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var e=this.systems.events;e.off(s.PRE_UPDATE,this.preUpdate,this),e.off(s.UPDATE,this.update,this),e.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null}});r.register("Clock",h,"time"),t.exports=h},function(t,e,i){var n=i(0),r=i(286),s=i(16),o=i(142),a=i(15),h=i(101),l=new n({Extends:r,initialize:function(t){r.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.events.once(a.DESTROY,this.destroy,this)},addChildCallback:function(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(o.ADDED_TO_SCENE,t,this.scene),this.events.emit(a.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(o.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(a.REMOVED_FROM_SCENE,t,this.scene)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(h(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,e){return t._depth-e._depth},getChildren:function(){return this.list},shutdown:function(){for(var t=this.list,e=t.length;e--;)t[e].destroy(!0);t.length=0,this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});s.register("DisplayList",l,"displayList"),t.exports=l},function(t,e,i){t.exports={CheckMatrix:i(141),MatrixToString:i(761),ReverseColumns:i(762),ReverseRows:i(763),Rotate180:i(764),RotateLeft:i(765),RotateMatrix:i(100),RotateRight:i(766),Translate:i(767),TransposeMatrix:i(287)}},function(t,e,i){var n=i(118),r=i(141);t.exports=function(t){var e="";if(!r(t))return e;for(var i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++){var o=t[i][s].toString();e+="undefined"!==o?n(o,2):"?",s<t[i].length-1&&(e+=" |")}if(i<t.length-1){e+="\n";for(var a=0;a<t[i].length;a++)e+="---",a<t[i].length-1&&(e+="+");e+="\n"}}return e}},function(t,e){t.exports=function(t){return t.reverse()}},function(t,e){t.exports=function(t){for(var e=0;e<t.length;e++)t[e].reverse();return t}},function(t,e,i){var n=i(100);t.exports=function(t){return n(t,180)}},function(t,e,i){var n=i(100);t.exports=function(t){return n(t,90)}},function(t,e,i){var n=i(100);t.exports=function(t){return n(t,-90)}},function(t,e,i){var n=i(288),r=i(289);t.exports=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),0!==i&&(i<0?n(t,Math.abs(i)):r(t,i)),0!==e)for(var s=0;s<t.length;s++){var o=t[s];e<0?n(o,Math.abs(e)):r(o,e)}return t}},function(t,e){t.exports=function(t,e,i,n,r){if(void 0===r&&(r=t),i>0){var s=i-t.length;if(s<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.push(e),n&&n.call(r,e),e):null;for(var o=e.length-1;o>=0;)-1!==t.indexOf(e[o])&&e.splice(o,1),o--;if(0===(o=e.length))return null;i>0&&o>s&&(e.splice(s),o=s);for(var a=0;a<o;a++){var h=e[a];t.push(h),n&&n.call(r,h)}return e}},function(t,e){t.exports=function(t,e,i,n,r,s){if(void 0===i&&(i=0),void 0===s&&(s=t),n>0){var o=n-t.length;if(o<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.splice(i,0,e),r&&r.call(s,e),e):null;for(var a=e.length-1;a>=0;)-1!==t.indexOf(e[a])&&e.pop(),a--;if(0===(a=e.length))return null;n>0&&a>o&&(e.splice(o),a=o);for(var h=a-1;h>=0;h--){var l=e[h];t.splice(i,0,l),r&&r.call(s,l)}return e}},function(t,e){t.exports=function(t,e){var i=t.indexOf(e);return-1!==i&&i<t.length&&(t.splice(i,1),t.push(e)),e}},function(t,e,i){var n=i(50);t.exports=function(t,e,i,r,s){void 0===r&&(r=0),void 0===s&&(s=t.length);var o=0;if(n(t,r,s))for(var a=r;a<s;a++)t[a][e]===i&&o++;return o}},function(t,e){t.exports=function(t,e,i){var n,r=[null];for(n=3;n<arguments.length;n++)r.push(arguments[n]);for(n=0;n<t.length;n++)r[0]=t[n],e.apply(i,r);return t}},function(t,e,i){var n=i(50);t.exports=function(t,e,i,r,s){if(void 0===r&&(r=0),void 0===s&&(s=t.length),n(t,r,s)){var o,a=[null];for(o=5;o<arguments.length;o++)a.push(arguments[o]);for(o=r;o<s;o++)a[0]=t[o],e.apply(i,a)}return t}},function(t,e,i){var n=i(50);t.exports=function(t,e,i,r,s){void 0===r&&(r=0),void 0===s&&(s=t.length);var o=[];if(n(t,r,s))for(var a=r;a<s;a++){var h=t[a];(!e||e&&void 0===i&&h.hasOwnProperty(e)||e&&void 0!==i&&h[e]===i)&&o.push(h)}return o}},function(t,e,i){var n=i(50);t.exports=function(t,e,i,r,s){if(void 0===r&&(r=0),void 0===s&&(s=t.length),n(t,r,s))for(var o=r;o<s;o++){var a=t[o];if(!e||e&&void 0===i&&a.hasOwnProperty(e)||e&&void 0!==i&&a[e]===i)return a}return null}},function(t,e){t.exports=function(t,e){var i=t.indexOf(e);if(i>0){var n=t[i-1],r=t.indexOf(n);t[i]=n,t[r]=e}return t}},function(t,e){t.exports=function(t,e,i){var n=t.indexOf(e);if(-1===n||i<0||i>=t.length)throw new Error("Supplied index out of bounds");return n!==i&&(t.splice(n,1),t.splice(i,0,e)),e}},function(t,e){t.exports=function(t,e){var i=t.indexOf(e);if(-1!==i&&i<t.length-1){var n=t[i+1],r=t.indexOf(n);t[i]=n,t[r]=e}return t}},function(t,e){t.exports=function(t,e,i){if(e===i)return t;var n=t.indexOf(e),r=t.indexOf(i);if(n<0||r<0)throw new Error("Supplied items must be elements of the same array");return n>r||(t.splice(n,1),r===t.length-1?t.push(e):t.splice(r,0,e)),t}},function(t,e){t.exports=function(t,e,i){if(e===i)return t;var n=t.indexOf(e),r=t.indexOf(i);if(n<0||r<0)throw new Error("Supplied items must be elements of the same array");return n<r||(t.splice(n,1),0===r?t.unshift(e):t.splice(r,0,e)),t}},function(t,e,i){var n=i(223);t.exports=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=null),void 0===i&&(i=1),null===e&&(e=t,t=0);for(var r=[],s=Math.max(n((e-t)/(i||1)),0),o=0;o<s;o++)r.push(t),t+=i;return r}},function(t,e){function i(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function n(t,e){return t<e?-1:t>e?1:0}t.exports=function t(e,r,s,o,a){for(void 0===s&&(s=0),void 0===o&&(o=e.length-1),void 0===a&&(a=n);o>s;){if(o-s>600){var h=o-s+1,l=r-s+1,u=Math.log(h),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(h-c)/h)*(l-h/2<0?-1:1);t(e,r,Math.max(s,Math.floor(r-l*c/h+d)),Math.min(o,Math.floor(r+(h-l)*c/h+d)),a)}var p=e[r],f=s,m=o;for(i(e,s,r),a(e[o],p)>0&&i(e,s,o);f<m;){for(i(e,f,m),f++,m--;a(e[f],p)<0;)f++;for(;a(e[m],p)>0;)m--}0===a(e[s],p)?i(e,s,m):i(e,++m,o),m<=r&&(s=m+1),r<=m&&(o=m-1)}}},function(t,e,i){var n=i(7),r=i(291),s=function(t,e,i){for(var n=[],r=0;r<t.length;r++)for(var s=0;s<e.length;s++)for(var o=0;o<i;o++)n.push({a:t[r],b:e[s]});return n};t.exports=function(t,e,i){var o=n(i,"max",0),a=n(i,"qty",1),h=n(i,"random",!1),l=n(i,"randomB",!1),u=n(i,"repeat",0),c=n(i,"yoyo",!1),d=[];if(l&&r(e),-1===u)if(0===o)u=0;else{var p=t.length*e.length*a;c&&(p*=2),u=Math.ceil(o/p)}for(var f=0;f<=u;f++){var m=s(t,e,a);h&&r(m),d=d.concat(m),c&&(m.reverse(),d=d.concat(m))}return o&&d.splice(o),d}},function(t,e,i){var n=i(68);t.exports=function(t,e,i,r){if(void 0===r&&(r=t),e<0||e>t.length-1)throw new Error("Index out of bounds");var s=n(t,e);return i&&i.call(r,s),s}},function(t,e,i){var n=i(50);t.exports=function(t,e,i,r,s){if(void 0===e&&(e=0),void 0===i&&(i=t.length),void 0===s&&(s=t),n(t,e,i)){var o=i-e,a=t.splice(e,o);if(r)for(var h=0;h<a.length;h++){var l=a[h];r.call(s,l)}return a}return[]}},function(t,e,i){var n=i(68);t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length);var r=e+Math.floor(Math.random()*i);return n(t,r)}},function(t,e){t.exports=function(t,e,i){var n=t.indexOf(e),r=t.indexOf(i);return-1!==n&&-1===r&&(t[n]=i,!0)}},function(t,e){t.exports=function(t,e){var i=t.indexOf(e);return-1!==i&&i>0&&(t.splice(i,1),t.unshift(e)),e}},function(t,e,i){var n=i(50);t.exports=function(t,e,i,r,s){if(void 0===r&&(r=0),void 0===s&&(s=t.length),n(t,r,s))for(var o=r;o<s;o++){var a=t[o];a.hasOwnProperty(e)&&(a[e]=i)}return t}},function(t,e){t.exports=function(t,e,i){if(e===i)return t;var n=t.indexOf(e),r=t.indexOf(i);if(n<0||r<0)throw new Error("Supplied items must be elements of the same array");return t[n]=i,t[r]=e,t}},function(t,e){t.exports="addedtoscene"},function(t,e){t.exports="destroy"},function(t,e){t.exports="removedfromscene"},function(t,e){t.exports="complete"},function(t,e){t.exports="created"},function(t,e){t.exports="error"},function(t,e){t.exports="loop"},function(t,e){t.exports="play"},function(t,e){t.exports="seeked"},function(t,e){t.exports="seeking"},function(t,e){t.exports="stop"},function(t,e){t.exports="timeout"},function(t,e){t.exports="unlocked"},function(t,e,i){var n=i(0),r=i(805),s=i(16),o=i(15),a=new n({Extends:r,initialize:function(t){r.call(this),this.checkQueue=!0,this.scene=t,this.systems=t.sys,t.sys.events.once(o.BOOT,this.boot,this),t.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(o.PRE_UPDATE,this.update,this),t.on(o.UPDATE,this.sceneUpdate,this),t.once(o.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(t,e){for(var i=this._active,n=i.length,r=0;r<n;r++){var s=i[r];s.active&&s.preUpdate.call(s,t,e)}},shutdown:function(){for(var t=this._active.length;t--;)this._active[t].destroy(!0);for(t=this._pending.length;t--;)this._pending[t].destroy(!0);for(t=this._destroy.length;t--;)this._destroy[t].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var e=this.systems.events;e.off(o.PRE_UPDATE,this.update,this),e.off(o.UPDATE,this.sceneUpdate,this),e.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});s.register("UpdateList",a,"updateList"),t.exports=a},function(t,e,i){var n=i(0),r=i(9),s=i(806),o=new n({Extends:r,initialize:function(){r.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(t){return this._pending.push(t),this._toProcess++,t},remove:function(t){return this._destroy.push(t),this._toProcess++,t},removeAll:function(){for(var t=this._active,e=this._destroy,i=t.length;i--;)e.push(t[i]),this._toProcess++;return this},update:function(){if(0===this._toProcess)return this._active;var t,e,i=this._destroy,n=this._active;for(t=0;t<i.length;t++){e=i[t];var r=n.indexOf(e);-1!==r&&(n.splice(r,1),this.emit(s.PROCESS_QUEUE_REMOVE,e))}for(i.length=0,i=this._pending,t=0;t<i.length;t++)e=i[t],(!this.checkQueue||this.checkQueue&&-1===n.indexOf(e))&&(n.push(e),this.emit(s.PROCESS_QUEUE_ADD,e));return i.length=0,this._toProcess=0,n},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});t.exports=o},function(t,e,i){t.exports={PROCESS_QUEUE_ADD:i(807),PROCESS_QUEUE_REMOVE:i(808)}},function(t,e){t.exports="add"},function(t,e){t.exports="remove"},function(t,e,i){var n=i(4),r=i(4);n=i(810),r=i(811),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e){t.exports=function(t,e,i,n){i.addToRenderList(e),this.pipeline.batchSprite(e,i,n)}},function(t,e){t.exports=function(t,e,i,n){i.addToRenderList(e),t.batchSprite(e,e.frame,i,n)}},function(t,e,i){var n=i(0),r=i(84),s=i(1),o=i(117),a=i(206),h=new n({initialize:function(t){this.parent=t,this.animationManager=t.scene.sys.anims,this.animationManager.on(o.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(t){var e=this.parent;if(void 0===t)return this.nextAnimsQueue.length=0,this.nextAnim=null,e;Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i];null===this.nextAnim?this.nextAnim=n:this.nextAnimsQueue.push(n)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(t){this.isPlaying&&this.stop();var e=this.animationManager,i="string"==typeof t?t:s(t,"key",null),n=this.exists(i)?this.get(i):e.get(i);if(n){this.currentAnim=n;var r=n.getTotalFrames(),o=s(t,"frameRate",n.frameRate),a=s(t,"duration",n.duration);n.calculateDuration(this,r,a,o),this.delay=s(t,"delay",n.delay),this.repeat=s(t,"repeat",n.repeat),this.repeatDelay=s(t,"repeatDelay",n.repeatDelay),this.yoyo=s(t,"yoyo",n.yoyo),this.showOnStart=s(t,"showOnStart",n.showOnStart),this.hideOnComplete=s(t,"hideOnComplete",n.hideOnComplete),this.skipMissedFrames=s(t,"skipMissedFrames",n.skipMissedFrames),this.timeScale=s(t,"timeScale",this.timeScale);var h=s(t,"startFrame",0);h>n.getTotalFrames()&&(h=0);var l=n.frames[h];0!==h||this.forward||(l=n.getLastFrame()),this.currentFrame=l}return this.parent},pause:function(t){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),void 0!==t&&this.setCurrentFrame(t),this.parent},resume:function(t){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),void 0!==t&&this.setCurrentFrame(t),this.parent},playAfterDelay:function(t,e){if(this.isPlaying){var i=this.nextAnim,n=this.nextAnimsQueue;i&&n.unshift(i),this.nextAnim=t,this._pendingStop=1,this._pendingStopValue=e}else this.delayCounter=e,this.play(t,!0);return this.parent},playAfterRepeat:function(t,e){if(void 0===e&&(e=1),this.isPlaying){var i=this.nextAnim,n=this.nextAnimsQueue;i&&n.unshift(i),-1!==this.repeatCounter&&e>this.repeatCounter&&(e=this.repeatCounter),this.nextAnim=t,this._pendingStop=2,this._pendingStopValue=e}else this.play(t);return this.parent},play:function(t,e){void 0===e&&(e=!1);var i=this.currentAnim,n=this.parent,r="string"==typeof t?t:t.key;if(e&&this.isPlaying&&i.key===r)return n;if(i&&this.isPlaying){var s=this.animationManager.getMix(i.key,t);if(s>0)return this.playAfterDelay(t,s)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t)},playReverse:function(t,e){void 0===e&&(e=!1);var i="string"==typeof t?t:t.key;return e&&this.isPlaying&&this.currentAnim.key===i?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t))},startAnimation:function(t){this.load(t);var e=this.currentAnim,i=this.parent;return e?(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat,e.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,0===this.delayCounter&&this.handleStart(),i):i},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(o.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(o.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(o.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(o.ANIMATION_COMPLETE,o.ANIMATION_COMPLETE_KEY)},emitEvents:function(t,e){var i=this.currentAnim,n=this.currentFrame,r=this.parent,s=n.textureFrame;r.emit(t,i,n,r,s),e&&r.emit(e+i.key,i,n,r,s)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var t=this.currentFrame;if(!t)return 0;var e=t.progress;return this.inReverse&&(e*=-1),e},setProgress:function(t){return this.forward||(t=1-t),this.setCurrentFrame(this.currentAnim.getFrameByProgress(t)),this.parent},setRepeat:function(t){return this.repeatCounter=-1===t?Number.MAX_VALUE:t,this.parent},globalRemove:function(t,e){void 0===e&&(e=this.currentAnim),this.isPlaying&&e.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=this.currentAnim,n=this.parent;return i?(e&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat),i.getFirstTick(this),this.emitEvents(o.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!t,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(i.frames[0]),this.parent):n},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var t=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(t)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var t=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(t)}return this.parent},stopAfterDelay:function(t){return this._pendingStop=1,this._pendingStopValue=t,this.parent},stopAfterRepeat:function(t){return void 0===t&&(t=1),-1!==this.repeatCounter&&t>this.repeatCounter&&(t=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=t,this.parent},stopOnFrame:function(t){return this._pendingStop=3,this._pendingStopValue=t,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(t,e){var i=this.currentAnim;if(this.isPlaying&&i&&!i.paused){if(this.accumulator+=e*this.timeScale,1===this._pendingStop&&(this._pendingStopValue-=e,this._pendingStopValue<=0))return this.stop();if(this.hasStarted){if(this.accumulator>=this.nextTick&&(this.forward?i.nextFrame(this):i.previousFrame(this),this.isPlaying&&0===this._pendingStop&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var n=0;do{this.forward?i.nextFrame(this):i.previousFrame(this),n++}while(this.isPlaying&&this.accumulator>this.nextTick&&n<60)}}else this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart())}},setCurrentFrame:function(t){var e=this.parent;return this.currentFrame=t,e.texture=t.frame.texture,e.frame=t.frame,e.isCropped&&e.frame.updateCropUVs(e._crop,e.flipX,e.flipY),t.setAlpha&&(e.alpha=t.alpha),e.setSizeToFrame(),e._originComponent&&(t.frame.customPivot?e.setOrigin(t.frame.pivotX,t.frame.pivotY):e.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(o.ANIMATION_UPDATE),3===this._pendingStop&&this._pendingStopValue===t&&this.stop()),e},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(t){return this.anims?this.anims.get(t):null},exists:function(t){return!!this.anims&&this.anims.has(t)},create:function(t){var e=t.key,i=!1;return e&&((i=this.get(e))||(i=new a(this,e,t),this.anims||(this.anims=new r),this.anims.set(e,i))),i},generateFrameNames:function(t,e){return this.animationManager.generateFrameNames(t,e)},generateFrameNumbers:function(t,e){return this.animationManager.generateFrameNumbers(t,e)},remove:function(t){var e=this.get(t);return e&&(this.currentAnim===e&&this.stop(),this.anims.delete(t)),e},destroy:function(){this.animationManager.off(o.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});t.exports=h},function(t,e,i){var n=i(4),r=i(4);n=i(814),r=i(815),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e){t.exports=function(t,e,i,n){i.addToRenderList(e),e.pipeline.batchSprite(e,i,n)}},function(t,e){t.exports=function(t,e,i,n){i.addToRenderList(e),t.batchSprite(e,e.frame,i,n)}},function(t,e,i){var n=i(4),r=i(4);n=i(817),i(292),r=i(292),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(146),r=i(94),s=i(24),o=i(20),a=function(t,e,i){this.x=t,this.y=e,this.width=i},h=function(t,e,i){this.points=[],this.pointsLength=1,this.points[0]=new a(t,e,i)},l=[],u=new s;t.exports=function(t,e,i,s){if(0!==e.commandBuffer.length){i.addToRenderList(e);var c=t.pipelines.set(e.pipeline,e);t.pipelines.preBatch(e);for(var d=r(e,i,s).calc,p=u.loadIdentity(),f=e.commandBuffer,m=i.alpha*e.alpha,g=1,v=c.fillTint,y=c.strokeTint,A=0,x=0,w=0,b=2*Math.PI,S=[],E=0,T=!0,_=null,M=o.getTintAppendFloatAlpha,C=0;C<f.length;C++)switch(f[C]){case n.BEGIN_PATH:S.length=0,_=null,T=!0;break;case n.CLOSE_PATH:T=!1,_&&_.points.length&&_.points.push(_.points[0]);break;case n.FILL_PATH:for(E=0;E<S.length;E++)c.batchFillPath(S[E].points,p,d);break;case n.STROKE_PATH:for(E=0;E<S.length;E++)c.batchStrokePath(S[E].points,g,T,p,d);break;case n.LINE_STYLE:g=f[++C];var P=M(f[++C],f[++C]*m);y.TL=P,y.TR=P,y.BL=P,y.BR=P;break;case n.FILL_STYLE:var R=M(f[++C],f[++C]*m);v.TL=R,v.TR=R,v.BL=R,v.BR=R;break;case n.GRADIENT_FILL_STYLE:var O=f[++C]*m,L=f[++C]*m,I=f[++C]*m,D=f[++C]*m;v.TL=M(f[++C],O),v.TR=M(f[++C],L),v.BL=M(f[++C],I),v.BR=M(f[++C],D);break;case n.GRADIENT_LINE_STYLE:g=f[++C];var B=f[++C]*m;y.TL=M(f[++C],B),y.TR=M(f[++C],B),y.BL=M(f[++C],B),y.BR=M(f[++C],B);break;case n.ARC:var k=0,F=f[++C],N=f[++C],z=f[++C],U=f[++C],G=f[++C],V=f[++C],H=f[++C];for(G-=U,V?G<-b?G=-b:G>0&&(G=G%b-b):G>b?G=b:G<0&&(G=b+G%b),null===_&&(_=new h(F+Math.cos(U)*z,N+Math.sin(U)*z,g),S.push(_),k+=.01);k<1+H;)w=G*k+U,A=F+Math.cos(w)*z,x=N+Math.sin(w)*z,_.points.push(new a(A,x,g)),k+=.01;w=G+U,A=F+Math.cos(w)*z,x=N+Math.sin(w)*z,_.points.push(new a(A,x,g));break;case n.FILL_RECT:c.batchFillRect(f[++C],f[++C],f[++C],f[++C],p,d);break;case n.FILL_TRIANGLE:c.batchFillTriangle(f[++C],f[++C],f[++C],f[++C],f[++C],f[++C],p,d);break;case n.STROKE_TRIANGLE:c.batchStrokeTriangle(f[++C],f[++C],f[++C],f[++C],f[++C],f[++C],g,p,d);break;case n.LINE_TO:null!==_?_.points.push(new a(f[++C],f[++C],g)):(_=new h(f[++C],f[++C],g),S.push(_));break;case n.MOVE_TO:_=new h(f[++C],f[++C],g),S.push(_);break;case n.SAVE:l.push(p.copyToArray());break;case n.RESTORE:p.copyFromArray(l.pop());break;case n.TRANSLATE:F=f[++C],N=f[++C],p.translate(F,N);break;case n.SCALE:F=f[++C],N=f[++C],p.scale(F,N);break;case n.ROTATE:p.rotate(f[++C])}t.pipelines.postBatch(e)}}},function(t,e,i){var n=i(4),r=i(4);n=i(819),r=i(820),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e){t.exports=function(t,e,i,n){i.addToRenderList(e);var r=e.list,s=r.length;if(0!==s){var o=e.localTransform;n?(o.loadIdentity(),o.multiply(n),o.translate(e.x,e.y),o.rotate(e.rotation),o.scale(e.scaleX,e.scaleY)):o.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),t.pipelines.preBatch(e);var a=-1!==e.blendMode;a||t.setBlendMode(0);for(var h=e.alpha,l=e.scrollFactorX,u=e.scrollFactorY,c=0;c<s;c++){var d=r[c];if(d.willRender(i)){var p,f,m,g;if(void 0!==d.alphaTopLeft)p=d.alphaTopLeft,f=d.alphaTopRight,m=d.alphaBottomLeft,g=d.alphaBottomRight;else{var v=d.alpha;p=v,f=v,m=v,g=v}var y=d.scrollFactorX,A=d.scrollFactorY;a||d.blendMode===t.currentBlendMode||t.setBlendMode(d.blendMode);var x=d.mask;x&&x.preRenderWebGL(t,d,i);var w=d.type;w!==t.currentType&&(t.newType=!0,t.currentType=w),t.nextTypeMatch=c<s-1&&r[c+1].type===t.currentType,d.setScrollFactor(y*l,A*u),d.setAlpha(p*h,f*h,m*h,g*h),d.renderWebGL(t,d,i,o),d.setAlpha(p,f,m,g),d.setScrollFactor(y,A),x&&x.postRenderWebGL(t,i),t.newType=!1}}t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,i,n){i.addToRenderList(e);var r=e.list;if(0!==r.length){var s=e.localTransform;n?(s.loadIdentity(),s.multiply(n),s.translate(e.x,e.y),s.rotate(e.rotation),s.scale(e.scaleX,e.scaleY)):s.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var o=-1!==e.blendMode;o||t.setBlendMode(0);var a=e._alpha,h=e.scrollFactorX,l=e.scrollFactorY;e.mask&&e.mask.preRenderCanvas(t,null,i);for(var u=0;u<r.length;u++){var c=r[u];if(c.willRender(i)){var d=c.alpha,p=c.scrollFactorX,f=c.scrollFactorY;o||c.blendMode===t.currentBlendMode||t.setBlendMode(c.blendMode),c.setScrollFactor(p*h,f*l),c.setAlpha(d*a),c.renderCanvas(t,c,i,s),c.setAlpha(d),c.setScrollFactor(p,f)}}e.mask&&e.mask.postRenderCanvas(t)}}},function(t,e,i){var n=i(0),r=i(1),s=new n({initialize:function(t,e,i,n,s){if("object"==o(t)){var a=t;t=r(a,"x",0),e=r(a,"y",0),i=r(a,"power",0),n=r(a,"epsilon",100),s=r(a,"gravity",50)}else void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=100),void 0===s&&(s=50);this.x=t,this.y=e,this.active=!0,this._gravity=s,this._power=0,this._epsilon=0,this.power=i,this.epsilon=n},update:function(t,e){var i=this.x-t.x,n=this.y-t.y,r=i*i+n*n;if(0!==r){var s=Math.sqrt(r);r<this._epsilon&&(r=this._epsilon);var o=this._power*e/(r*s)*100;t.velocityX+=i*o,t.velocityY+=n*o}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(t){this._epsilon=t*t}},power:{get:function(){return this._power/this._gravity},set:function(t){this._power=t*this._gravity}},gravity:{get:function(){return this._gravity},set:function(t){var e=this.power;this._gravity=t,this.power=e}}});t.exports=s},function(t,e,i){var n=i(47),r=i(0),s=i(23),a=i(823),h=i(824),l=i(825),u=i(1),c=i(290),d=i(294),p=i(149),f=i(826),m=i(827),g=i(8),v=i(101),y=i(5),A=i(53),x=new r({Mixins:[s.BlendMode,s.Mask,s.ScrollFactor,s.Visible],initialize:function(t,e){this.manager=t,this.texture=t.texture,this.frames=[t.defaultFrame],this.defaultFrame=t.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=f,this.x=new l(e,"x",0,!0),this.y=new l(e,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new l(e,"accelerationX",0,!0),this.accelerationY=new l(e,"accelerationY",0,!0),this.maxVelocityX=new l(e,"maxVelocityX",1e4,!0),this.maxVelocityY=new l(e,"maxVelocityY",1e4,!0),this.speedX=new l(e,"speedX",0,!0),this.speedY=new l(e,"speedY",0,!0),this.moveTo=!1,this.moveToX=new l(e,"moveToX",0,!0),this.moveToY=new l(e,"moveToY",0,!0),this.bounce=new l(e,"bounce",0,!0),this.scaleX=new l(e,"scaleX",1),this.scaleY=new l(e,"scaleY",1),this.tint=new l(e,"tint",16777215),this.alpha=new l(e,"alpha",1),this.lifespan=new l(e,"lifespan",1e3,!0),this.angle=new l(e,"angle",{min:0,max:360},!0),this.rotate=new l(e,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new l(e,"quantity",1,!0),this.delay=new l(e,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=n.NORMAL,this.follow=null,this.followOffset=new y,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,e&&this.fromJSON(e)},fromJSON:function(t){if(!t)return this;var e=0,i="";for(e=0;e<this.configFastMap.length;e++)i=this.configFastMap[e],p(t,i)&&(this[i]=u(t,i));for(e=0;e<this.configOpMap.length;e++)i=this.configOpMap[e],p(t,i)&&this[i].loadConfig(t);if(this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue,this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue,p(t,"speed")&&(this.speedX.loadConfig(t,"speed"),this.speedY=null),(d(t,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),p(t,"scale")&&(this.scaleX.loadConfig(t,"scale"),this.scaleY=null),p(t,"callbackScope")){var n=u(t,"callbackScope",null);this.emitCallbackScope=n,this.deathCallbackScope=n}return p(t,"emitZone")&&this.setEmitZone(t.emitZone),p(t,"deathZone")&&this.setDeathZone(t.deathZone),p(t,"bounds")&&this.setBounds(t.bounds),p(t,"followOffset")&&this.followOffset.setFromObject(u(t,"followOffset",0)),p(t,"frame")&&this.setFrame(t.frame),p(t,"reserve")&&this.reserve(t.reserve),this},toJSON:function(t){void 0===t&&(t={});var e=0,i="";for(e=0;e<this.configFastMap.length;e++)t[i=this.configFastMap[e]]=this[i];for(e=0;e<this.configOpMap.length;e++)this[i=this.configOpMap[e]]&&(t[i]=this[i].toJSON());return this.speedY||(delete t.speedX,t.speed=this.speedX.toJSON()),this.scaleY||(delete t.scaleX,t.scale=this.scaleX.toJSON()),t},startFollow:function(t,e,i,n){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=!1),this.follow=t,this.followOffset.set(e,i),this.trackVisible=n,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(1===this.frames.length)return this.defaultFrame;if(this.randomFrame)return c(this.frames);var t=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=A(this.currentFrame+1,0,this._frameLength)),t},setFrame:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=1),this.randomFrame=e,this.frameQuantity=i,this.currentFrame=0,this._frameCounter=0;var n=o(t);if(Array.isArray(t)||"string"===n||"number"===n)this.manager.setEmitterFrames(t,this);else if("object"===n){var r=t;(t=u(r,"frames",null))&&this.manager.setEmitterFrames(t,this);var s=u(r,"cycle",!1);this.randomFrame=!s,this.frameQuantity=u(r,"quantity",i)}return this._frameLength=this.frames.length,1===this._frameLength&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(t){return void 0===t&&(t=!0),this.radial=t,this},setPosition:function(t,e){return this.x.onChange(t),this.y.onChange(e),this},setBounds:function(t,e,i,n){if("object"==o(t)){var r=t;t=r.x,e=r.y,i=p(r,"w")?r.w:r.width,n=p(r,"h")?r.h:r.height}return this.bounds?this.bounds.setTo(t,e,i,n):this.bounds=new g(t,e,i,n),this},setSpeedX:function(t){return this.speedX.onChange(t),this.radial=!1,this},setSpeedY:function(t){return this.speedY&&(this.speedY.onChange(t),this.radial=!1),this},setSpeed:function(t){return this.speedX.onChange(t),this.speedY=null,this.radial=!0,this},setScaleX:function(t){return this.scaleX.onChange(t),this},setScaleY:function(t){return this.scaleY.onChange(t),this},setScale:function(t){return this.scaleX.onChange(t),this.scaleY=null,this},setGravityX:function(t){return this.gravityX=t,this},setGravityY:function(t){return this.gravityY=t,this},setGravity:function(t,e){return this.gravityX=t,this.gravityY=e,this},setAlpha:function(t){return this.alpha.onChange(t),this},setTint:function(t){return this.tint.onChange(t),this},setEmitterAngle:function(t){return this.angle.onChange(t),this},setAngle:function(t){return this.angle.onChange(t),this},setLifespan:function(t){return this.lifespan.onChange(t),this},setQuantity:function(t){return this.quantity.onChange(t),this},setFrequency:function(t,e){return this.frequency=t,this._counter=0,e&&this.quantity.onChange(e),this},setEmitZone:function(t){if(void 0===t)this.emitZone=null;else{var e=u(t,"type","random"),i=u(t,"source",null);switch(e){case"random":this.emitZone=new m(i);break;case"edge":var n=u(t,"quantity",1),r=u(t,"stepRate",0),s=u(t,"yoyo",!1),o=u(t,"seamless",!0);this.emitZone=new h(i,n,r,s,o)}}return this},setDeathZone:function(t){if(void 0===t)this.deathZone=null;else{var e=u(t,"type","onEnter"),i=u(t,"source",null);if(i&&"function"==typeof i.contains){var n="onEnter"===e;this.deathZone=new a(i,n)}}return this},reserve:function(t){for(var e=this.dead,i=0;i<t;i++)e.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(t,e){return void 0===t?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof t&&(this.emitCallback=t,e&&(this.emitCallbackScope=e)),this},onParticleDeath:function(t,e){return void 0===t?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof t&&(this.deathCallback=t,e&&(this.deathCallbackScope=e)),this},killAll:function(){for(var t=this.dead,e=this.alive;e.length>0;)t.push(e.pop());return this},forEachAlive:function(t,e){for(var i=this.alive,n=i.length,r=0;r<n;++r)t.call(e,i[r],this);return this},forEachDead:function(t,e){for(var i=this.dead,n=i.length,r=0;r<n;++r)t.call(e,i[r],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return v(this.alive,this.depthSortCallback),this},flow:function(t,e){return void 0===e&&(e=1),this.frequency=t,this.quantity.onChange(e),this.start()},explode:function(t,e,i){return this.frequency=-1,this.emitParticle(t,e,i)},emitParticleAt:function(t,e,i){return this.emitParticle(i,t,e)},emitParticle:function(t,e,i){if(!this.atLimit()){void 0===t&&(t=this.quantity.onEmit());for(var n=this.dead,r=this.follow?this.follow.x+this.followOffset.x:e,s=this.follow?this.follow.y+this.followOffset.y:i,o=0;o<t;o++){var a=n.pop();if(a||(a=new this.particleClass(this)),a.fire(r,s),this.particleBringToTop?this.alive.push(a):this.alive.unshift(a),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,a,this),this.atLimit())break}return a}},preUpdate:function(t,e){var i=(e*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var n=this.manager.getProcessors(),r=this.alive,s=this.dead,o=0,a=[],h=r.length;for(o=0;o<h;o++){var l=r[o];l.update(e,i,n)&&a.push({index:o,particle:l})}if((h=a.length)>0){var u=this.deathCallback,c=this.deathCallbackScope;for(o=h-1;o>=0;o--){var d=a[o];r.splice(d.index,1),s.push(d.particle),u&&u.call(c,d.particle),d.particle.resetPosition()}}this.on&&(0===this.frequency?this.emitParticle():this.frequency>0&&(this._counter-=e,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(t,e){return t.y-e.y}});t.exports=x},function(t,e,i){var n=new(i(0))({initialize:function(t,e){this.source=t,this.killOnEnter=e},willKill:function(t){var e=this.source.contains(t.x,t.y);return e&&this.killOnEnter||!e&&!this.killOnEnter}});t.exports=n},function(t,e,i){var n=new(i(0))({initialize:function(t,e,i,n,r){void 0===n&&(n=!1),void 0===r&&(r=!0),this.source=t,this.points=[],this.quantity=e,this.stepRate=i,this.yoyo=n,this.counter=-1,this.seamless=r,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var t=this.points[0],e=this.points[this.points.length-1];t.x===e.x&&t.y===e.y&&this.points.pop()}var i=this._length;return this._length=this.points.length,this._length<i&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(t){return this.source=t,this.updateSource()},getPoint:function(t){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var e=this.points[this.counter];e&&(t.x=e.x,t.y=e.y)}});t.exports=n},function(t,e,i){var n=i(0),r=i(87),s=i(49),a=i(1),h=i(53),l=new n({initialize:function(t,e,i,n){void 0===n&&(n=!1),this.propertyKey=e,this.propertyValue=i,this.defaultValue=i,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=n,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(t)},loadConfig:function(t,e){void 0===t&&(t={}),e&&(this.propertyKey=e),this.propertyValue=a(t,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(t){return this.propertyValue=t,this.setMethods()},setMethods:function(){var t=this.propertyValue,e=o(t);if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,"number"===e)this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(t))this.onEmit=this.randomStaticValueEmit;else if("function"===e)this.emitOnly?this.onEmit=t:this.onUpdate=t;else if("object"===e&&this.hasBoth(t,"start","end")){this.start=t.start,this.end=t.end;var i=this.has(t,"random");if(i&&(this.onEmit=this.randomRangedValueEmit),this.has(t,"steps"))this.steps=t.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var n=this.has(t,"ease")?t.ease:"Linear";this.ease=s(n,t.easeParams),i||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if("object"===e&&this.hasBoth(t,"min","max"))this.start=t.min,this.end=t.max,this.onEmit=this.randomRangedValueEmit;else if("object"===e&&this.has(t,"random")){var r=t.random;Array.isArray(r)&&(this.start=r[0],this.end=r[1]),this.onEmit=this.randomRangedValueEmit}else"object"===e&&this.hasEither(t,"onEmit","onUpdate")&&(this.has(t,"onEmit")&&(this.onEmit=t.onEmit),this.has(t,"onUpdate")&&(this.onUpdate=t.onUpdate));return this},has:function(t,e){return t.hasOwnProperty(e)},hasBoth:function(t,e,i){return t.hasOwnProperty(e)&&t.hasOwnProperty(i)},hasEither:function(t,e,i){return t.hasOwnProperty(e)||t.hasOwnProperty(i)},defaultEmit:function(t,e,i){return i},defaultUpdate:function(t,e,i,n){return n},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var t=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[t]},randomRangedValueEmit:function(t,e){var i=r(this.start,this.end);return t&&t.data[e]&&(t.data[e].min=i),i},steppedEmit:function(){var t=this.counter,e=this.counter+(this.end-this.start)/this.steps;return this.counter=h(e,this.start,this.end),t},easedValueEmit:function(t,e){if(t&&t.data[e]){var i=t.data[e];i.min=this.start,i.max=this.end}return this.start},easeValueUpdate:function(t,e,i){var n=t.data[e];return(n.max-n.min)*this.ease(i)+n.min}});t.exports=l},function(t,e,i){var n=i(0),r=i(44),s=i(71),o=new n({initialize:function(t){this.emitter=t,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(t,e){var i=this.emitter;this.frame=i.getFrame(),i.emitZone&&i.emitZone.getPoint(this),this.x+=void 0===t?i.x.onEmit(this,"x"):t,this.y+=void 0===e?i.y.onEmit(this,"y"):e,this.life=i.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var n=i.speedX.onEmit(this,"speedX"),o=i.speedY?i.speedY.onEmit(this,"speedY"):n;if(i.radial){var a=r(i.angle.onEmit(this,"angle"));this.velocityX=Math.cos(a)*Math.abs(n),this.velocityY=Math.sin(a)*Math.abs(o)}else if(i.moveTo){var h=i.moveToX.onEmit(this,"moveToX"),l=i.moveToY?i.moveToY.onEmit(this,"moveToY"):h,u=Math.atan2(l-this.y,h-this.x),c=s(this.x,this.y,h,l)/(this.life/1e3);this.velocityX=Math.cos(u)*c,this.velocityY=Math.sin(u)*c}else this.velocityX=n,this.velocityY=o;i.acceleration&&(this.accelerationX=i.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=i.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=i.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=i.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=i.delay.onEmit(this,"delay"),this.scaleX=i.scaleX.onEmit(this,"scaleX"),this.scaleY=i.scaleY?i.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=i.rotate.onEmit(this,"rotate"),this.rotation=r(this.angle),this.bounce=i.bounce.onEmit(this,"bounce"),this.alpha=i.alpha.onEmit(this,"alpha"),this.tint=i.tint.onEmit(this,"tint")},computeVelocity:function(t,e,i,n){var r=this.velocityX,s=this.velocityY,o=this.accelerationX,a=this.accelerationY,h=this.maxVelocityX,l=this.maxVelocityY;r+=t.gravityX*i,s+=t.gravityY*i,o&&(r+=o*i),a&&(s+=a*i),r>h?r=h:r<-h&&(r=-h),s>l?s=l:s<-l&&(s=-l),this.velocityX=r,this.velocityY=s;for(var u=0;u<n.length;u++)n[u].update(this,e,i)},checkBounds:function(t){var e=t.bounds,i=-this.bounce;this.x<e.x&&t.collideLeft?(this.x=e.x,this.velocityX*=i):this.x>e.right&&t.collideRight&&(this.x=e.right,this.velocityX*=i),this.y<e.y&&t.collideTop?(this.y=e.y,this.velocityY*=i):this.y>e.bottom&&t.collideBottom&&(this.y=e.bottom,this.velocityY*=i)},update:function(t,e,i){if(this.delayCurrent>0)return this.delayCurrent-=t,!1;var n=this.emitter,s=1-this.lifeCurrent/this.life;return this.lifeT=s,this.computeVelocity(n,t,e,i),this.x+=this.velocityX*e,this.y+=this.velocityY*e,n.bounds&&this.checkBounds(n),n.deathZone&&n.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=n.scaleX.onUpdate(this,"scaleX",s,this.scaleX),n.scaleY?this.scaleY=n.scaleY.onUpdate(this,"scaleY",s,this.scaleY):this.scaleY=this.scaleX,this.angle=n.rotate.onUpdate(this,"rotate",s,this.angle),this.rotation=r(this.angle),this.alpha=n.alpha.onUpdate(this,"alpha",s,this.alpha),this.tint=n.tint.onUpdate(this,"tint",s,this.tint),this.lifeCurrent-=t,this.lifeCurrent<=0)}});t.exports=o},function(t,e,i){var n=i(0),r=i(5),s=new n({initialize:function(t){this.source=t,this._tempVec=new r},getPoint:function(t){var e=this._tempVec;this.source.getRandomPoint(e),t.x=e.x,t.y=e.y}});t.exports=s},function(t,e,i){var n=i(4),r=i(4);n=i(829),r=i(830),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(24),r=i(20),s=new n,o=new n,a=new n,h=new n;t.exports=function(t,e,i,n){var l=e.emitters.list,u=l.length;if(0!==u){var c=t.pipelines.set(e.pipeline),d=s,p=o,f=a,m=h;n?(m.loadIdentity(),m.multiply(n),m.translate(e.x,e.y),m.rotate(e.rotation),m.scale(e.scaleX,e.scaleY)):m.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var g=i.roundPixels,v=e.defaultFrame.glTexture,y=r.getTintAppendFloatAlpha,A=c.setGameObject(e,e.defaultFrame);t.pipelines.preBatch(e);for(var x=0;x<u;x++){var w=l[x],b=w.alive,S=b.length;if(w.visible&&0!==S){i.addToRenderList(w);var E=w.scrollFactorX,T=w.scrollFactorY;t.setBlendMode(w.blendMode),w.mask&&(w.mask.preRenderWebGL(t,w,i),t.pipelines.set(e.pipeline));for(var _=0;_<S;_++){var M=b[_],C=M.alpha*i.alpha;if(!(C<=0)){f.applyITRS(M.x,M.y,M.rotation,M.scaleX,M.scaleY),d.copyFrom(i.matrix),d.multiplyWithOffset(m,-i.scrollX*E,-i.scrollY*T),f.e=M.x,f.f=M.y,d.multiply(f,p);var P=M.frame,R=-P.halfWidth,O=-P.halfHeight,L=R+P.width,I=O+P.height,D=p.getXRound(R,O,g),B=p.getYRound(R,O,g),k=p.getXRound(R,I,g),F=p.getYRound(R,I,g),N=p.getXRound(L,I,g),z=p.getYRound(L,I,g),U=p.getXRound(L,O,g),G=p.getYRound(L,O,g),V=y(M.tint,C);c.batchQuad(w,D,B,k,F,N,z,U,G,P.u0,P.v0,P.u1,P.v1,V,V,V,V,0,v,A)}}w.mask&&w.mask.postRenderWebGL(t,i)}}t.pipelines.postBatch(e)}}},function(t,e,i){var n=i(24),r=new n,s=new n,o=new n,a=new n;t.exports=function(t,e,i,n){var h=e.emitters.list,l=h.length;if(0!==l){var u=r.copyFrom(i.matrix),c=s,d=o,p=a;n?(p.loadIdentity(),p.multiply(n),p.translate(e.x,e.y),p.rotate(e.rotation),p.scale(e.scaleX,e.scaleY)):p.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);for(var f=t.currentContext,m=i.roundPixels,g=0;g<l;g++){var v=h[g],y=v.alive,A=y.length;if(v.visible&&0!==A){i.addToRenderList(v);var x=v.scrollFactorX,w=v.scrollFactorY;f.save(),f.globalCompositeOperation=t.blendModes[v.blendMode];for(var b=0;b<A;b++){var S=y[b],E=S.alpha*i.alpha;if(!(E<=0)){d.applyITRS(S.x,S.y,S.rotation,S.scaleX,S.scaleY),u.copyFrom(i.matrix),u.multiplyWithOffset(p,-i.scrollX*x,-i.scrollY*w),d.e=S.x,d.f=S.y,u.multiply(d,c);var T=S.frame,_=T.canvasData,M=-T.halfWidth,C=-T.halfHeight;f.globalAlpha=E,f.save(),c.setToContext(f),m&&(M=Math.round(M),C=Math.round(C)),f.imageSmoothingEnabled=!(!t.antialias||T.source.scaleMode),f.drawImage(T.source.image,_.x,_.y,_.width,_.height,M,C,_.width,_.height),f.restore()}}f.restore()}}}}},function(t,e){t.exports=function(t,e,i){var n=t.canvas,r=t.context,s=t.style,o=[],a=0,h=i.length;s.maxLines>0&&s.maxLines<i.length&&(h=s.maxLines),s.syncFont(n,r);for(var l=0;l<h;l++){var u=s.strokeThickness;u+=r.measureText(i[l]).width,s.wordWrap&&(u-=r.measureText(" ").width),o[l]=Math.ceil(u),a=Math.max(a,o[l])}var c=e.fontSize+s.strokeThickness,d=c*h,p=t.lineSpacing;return h>1&&(d+=p*(h-1)),{width:a,height:d,lines:h,lineWidths:o,lineSpacing:p,lineHeight:c}}},function(t,e){t.exports=function(t){t.parentNode&&t.parentNode.removeChild(t)}},function(t,e,i){var n=i(4),r=i(4);n=i(834),r=i(835),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(20);t.exports=function(t,e,i,r){if(0!==e.width&&0!==e.height){i.addToRenderList(e);var s=e.frame,o=s.width,a=s.height,h=n.getTintAppendFloatAlpha,l=t.pipelines.set(e.pipeline,e),u=l.setTexture2D(s.glTexture,e);t.pipelines.preBatch(e),l.batchTexture(e,s.glTexture,o,a,e.x,e.y,o/e.style.resolution,a/e.style.resolution,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,o,a,h(e.tintTopLeft,i.alpha*e._alphaTL),h(e.tintTopRight,i.alpha*e._alphaTR),h(e.tintBottomLeft,i.alpha*e._alphaBL),h(e.tintBottomRight,i.alpha*e._alphaBR),e.tintFill,0,0,i,r,!1,u),t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,i,n){0!==e.width&&0!==e.height&&(i.addToRenderList(e),t.batchSprite(e,e.frame,i,n))}},function(t,e,i){var n=i(0),r=i(19),s=i(7),o=i(837),a={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},h=new n({initialize:function(t,e){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(e,!1,!0);var i=s(e,"metrics",!1);this.metrics=i?{ascent:s(i,"ascent",0),descent:s(i,"descent",0),fontSize:s(i,"fontSize",0)}:o(this)},setStyle:function(t,e,i){for(var n in void 0===e&&(e=!0),void 0===i&&(i=!1),t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),a){var o=i?a[n][1]:this[n];this[n]="wordWrapCallback"===n||"wordWrapCallbackScope"===n?s(t,a[n][0],o):r(t,a[n][0],o)}var h=s(t,"font",null);null!==h&&this.setFont(h,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var l=s(t,"fill",null);return null!==l&&(this.color=l),e?this.update(!0):this.parent},syncFont:function(t,e){e.font=this._font},syncStyle:function(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"},syncShadow:function(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)},update:function(t){return t&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=o(this)),this.parent.updateText()},setFont:function(t,e){void 0===e&&(e=!0);var i=t,n="",r="";if("string"!=typeof t)i=s(t,"fontFamily","Courier"),n=s(t,"fontSize","16px"),r=s(t,"fontStyle","");else{var o=t.split(" "),a=0;r=o.length>2?o[a++]:"",n=o[a++]||"16px",i=o[a++]||"Courier"}return i===this.fontFamily&&n===this.fontSize&&r===this.fontStyle||(this.fontFamily=i,this.fontSize=n,this.fontStyle=r,e&&this.update(!0)),this.parent},setFontFamily:function(t){return this.fontFamily!==t&&(this.fontFamily=t,this.update(!0)),this.parent},setFontStyle:function(t){return this.fontStyle!==t&&(this.fontStyle=t,this.update(!0)),this.parent},setFontSize:function(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize!==t&&(this.fontSize=t,this.update(!0)),this.parent},setTestString:function(t){return this.testString=t,this.update(!0)},setFixedSize:function(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(!1)},setBackgroundColor:function(t){return this.backgroundColor=t,this.update(!1)},setFill:function(t){return this.color=t,this.update(!1)},setColor:function(t){return this.color=t,this.update(!1)},setResolution:function(t){return this.resolution=t,this.update(!1)},setStroke:function(t,e){return void 0===e&&(e=this.strokeThickness),void 0===t&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===t&&this.strokeThickness===e||(this.stroke=t,this.strokeThickness=e,this.update(!0)),this.parent},setShadow:function(t,e,i,n,r,s){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i="#000"),void 0===n&&(n=0),void 0===r&&(r=!1),void 0===s&&(s=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=i,this.shadowBlur=n,this.shadowStroke=r,this.shadowFill=s,this.update(!1)},setShadowOffset:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)},setShadowColor:function(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)},setShadowBlur:function(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)},setShadowStroke:function(t){return this.shadowStroke=t,this.update(!1)},setShadowFill:function(t){return this.shadowFill=t,this.update(!1)},setWordWrapWidth:function(t,e){return void 0===e&&(e=!1),this.wordWrapWidth=t,this.wordWrapUseAdvanced=e,this.update(!1)},setWordWrapCallback:function(t,e){return void 0===e&&(e=null),this.wordWrapCallback=t,this.wordWrapCallbackScope=e,this.update(!1)},setAlign:function(t){return void 0===t&&(t="left"),this.align=t,this.update(!1)},setMaxLines:function(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)},getTextMetrics:function(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}},toJSON:function(){var t={};for(var e in a)t[e]=this[e];return t.metrics=this.getTextMetrics(),t},destroy:function(){this.parent=void 0}});t.exports=h},function(t,e,i){var n=i(17);t.exports=function(t){var e=n.create(this),i=e.getContext("2d");t.syncFont(e,i);var r=i.measureText(t.testString);if("actualBoundingBoxAscent"in r){var s=r.actualBoundingBoxAscent,o=r.actualBoundingBoxDescent;return n.remove(e),{ascent:s,descent:o,fontSize:s+o}}var a=Math.ceil(r.width*t.baselineX),h=a,l=2*h;h=h*t.baselineY|0,e.width=a,e.height=l,i.fillStyle="#f00",i.fillRect(0,0,a,l),i.font=t._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(t.testString,0,h);var u={ascent:0,descent:0,fontSize:0},c=i.getImageData(0,0,a,l);if(!c)return u.ascent=h,u.descent=h+6,u.fontSize=u.ascent+u.descent,n.remove(e),u;var d,p,f=c.data,m=f.length,g=4*a,v=0,y=!1;for(d=0;d<h;d++){for(p=0;p<g;p+=4)if(255!==f[v+p]){y=!0;break}if(y)break;v+=g}for(u.ascent=h-d,v=m-g,y=!1,d=l;d>h;d--){for(p=0;p<g;p+=4)if(255!==f[v+p]){y=!0;break}if(y)break;v-=g}return u.descent=d-h,u.fontSize=u.ascent+u.descent,n.remove(e),u}},function(t,e,i){var n=i(17),r=i(0),s=i(23),o=i(14),a=i(37),h=i(122),l=i(85),u=i(295),c=i(5),d=new r({Extends:a,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Crop,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Tint,s.Transform,s.Visible,u],initialize:function(t,e,i,r,s,l,u){var d=t.sys.renderer;a.call(this,t,"TileSprite");var p=t.sys.textures.get(l),f=p.get(u);r&&s?(r=Math.floor(r),s=Math.floor(s)):(r=f.width,s=f.height),this._tilePosition=new c,this._tileScale=new c(1,1),this.dirty=!1,this.renderer=d,this.canvas=n.create(this,r,s),this.context=this.canvas.getContext("2d"),this.displayTexture=p,this.displayFrame=f,this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=h(f.width),this.potHeight=h(f.height),this.fillCanvas=n.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(e,i),this.setSize(r,s),this.setFrame(u),this.setOriginFromFrame(),this.initPipeline(),t.sys.game.events.on(o.CONTEXT_RESTORED,(function(t){if(t){var e=t.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=t.createTexture2D(0,e.LINEAR,e.LINEAR,e.REPEAT,e.REPEAT,e.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}}),this)},setTexture:function(t,e){return this.displayTexture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){var e=this.displayTexture.get(t);return this.potWidth=h(e.width),this.potHeight=h(e.height),this.canvas.width=0,e.cutWidth&&e.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=e,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(t,e){return void 0!==t&&(this.tilePositionX=t),void 0!==e&&(this.tilePositionY=e),this},setTileScale:function(t,e){return void 0===t&&(t=this.tileScaleX),void 0===e&&(e=t),this.tileScaleX=t,this.tileScaleY=e,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var t=this.displayFrame;if(t.source.isRenderTexture||t.source.isGLTexture)return void(this.dirty=!1);var e=this.fillContext,i=this.fillCanvas,n=this.potWidth,r=this.potHeight;this.renderer&&this.renderer.gl||(n=t.cutWidth,r=t.cutHeight),e.clearRect(0,0,n,r),i.width=n,i.height=r,e.drawImage(t.source.image,t.cutX,t.cutY,t.cutWidth,t.cutHeight,0,0,n,r),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(i,this.fillPattern):this.fillPattern=e.createPattern(i,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var t=this.canvas;if(t.width===this.width&&t.height===this.height||(t.width=this.width,t.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl)this.dirty=!1;else{var e=this.context;this.scene.sys.game.config.antialias||l.disable(e);var i=this._tileScale.x,n=this._tileScale.y,r=this._tilePosition.x,s=this._tilePosition.y;e.clearRect(0,0,this.width,this.height),e.save(),e.scale(i,n),e.translate(-r,-s),e.fillStyle=this.fillPattern,e.fillRect(r,s,this.width/i,this.height/n),e.restore(),this.dirty=!1}},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),n.remove(this.canvas),n.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(t){this._tilePosition.x=t,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(t){this._tilePosition.y=t,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(t){this._tileScale.x=t,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(t){this._tileScale.y=t,this.dirty=!0}}});t.exports=d},function(t,e,i){var n=i(20);t.exports=function(t,e,i,r){e.updateCanvas();var s=e.width,o=e.height;if(0!==s&&0!==o){i.addToRenderList(e),t.pipelines.preBatch(e);var a=n.getTintAppendFloatAlpha,h=t.pipelines.set(e.pipeline,e),l=h.setTexture2D(e.fillPattern,e);h.batchTexture(e,e.fillPattern,e.displayFrame.width*e.tileScaleX,e.displayFrame.height*e.tileScaleY,e.x,e.y,s,o,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.originX*s,e.originY*o,0,0,s,o,a(e.tintTopLeft,i.alpha*e._alphaTL),a(e.tintTopRight,i.alpha*e._alphaTR),a(e.tintBottomLeft,i.alpha*e._alphaBL),a(e.tintBottomRight,i.alpha*e._alphaBR),e.tintFill,e.tilePositionX%e.displayFrame.width/e.displayFrame.width,e.tilePositionY%e.displayFrame.height/e.displayFrame.height,i,r,!1,l),t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,i,n){e.updateCanvas(),i.addToRenderList(e),t.batchSprite(e,e.frame,i,n)}},function(t,e,i){var n=i(4),r=i(4);n=i(842),r=i(843),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(94),r=i(298),s=i(20);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=n(e,i,o);a.calcMatrix.copyFrom(h.calc);var l=e._displayOriginX,u=e._displayOriginY,c=i.alpha*e.alpha;if(t.pipelines.preBatch(e),e.isFilled){var d=a.fillTint,p=s.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*c);d.TL=p,d.TR=p,d.BL=p,d.BR=p,a.batchFillRect(-l,-u,e.width,e.height)}e.isStroked&&r(a,e,c,l,u),t.pipelines.postBatch(e)}},function(t,e,i){var n=i(299),r=i(300),s=i(93);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.currentContext;if(s(t,a,e,i,o)){var h=e._displayOriginX,l=e._displayOriginY;e.isFilled&&(n(a,e),a.fillRect(-h,-l,e.width,e.height)),e.isStroked&&(r(a,e),a.beginPath(),a.rect(-h,-l,e.width,e.height),a.stroke()),a.restore()}}},function(t,e,i){var n=i(4),r=i(4);n=i(845),r=i(847),t.exports={renderWebGL:n,renderCanvas:r}},function(t,e,i){var n=i(94),r=i(846),s=i(298);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=n(e,i,o),l=a.calcMatrix.copyFrom(h.calc),u=e._displayOriginX,c=e._displayOriginY,d=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&r(a,l,e,d,u,c),e.isStroked&&s(a,e,d,u,c),t.pipelines.postBatch(e)}},function(t,e,i){var n=i(20);t.exports=function(t,e,i,r,s,o){for(var a=n.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*r),h=i.pathData,l=i.pathIndexes,u=0;u<l.length;u+=3){var c=2*l[u],d=2*l[u+1],p=2*l[u+2],f=h[c+0]-s,m=h[c+1]-o,g=h[d+0]-s,v=h[d+1]-o,y=h[p+0]-s,A=h[p+1]-o,x=e.getX(f,m),w=e.getY(f,m),b=e.getX(g,v),S=e.getY(g,v),E=e.getX(y,A),T=e.getY(y,A);t.batchTri(i,x,w,b,S,E,T,0,0,1,1,a,a,a,2)}}},function(t,e,i){var n=i(44),r=i(299),s=i(300),o=i(93);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.currentContext;if(o(t,h,e,i,a)){var l=e.radius;h.beginPath(),h.arc(l-e.originX*(2*l),l-e.originY*(2*l),l,n(e._startAngle),n(e._endAngle),e.anticlockwise),e.closePath&&h.closePath(),e.isFilled&&(r(h,e),h.fill()),e.isStroked&&(s(h,e),h.stroke()),h.restore()}}},function(t,e,i){var n=i(143);i(21).register("image",(function(t,e,i,r){return this.displayList.add(new n(this.scene,t,e,i,r))}))},function(t,e,i){var n=i(21),r=i(144);n.register("sprite",(function(t,e,i,n){var s=new r(this.scene,t,e,i,n);return this.displayList.add(s),s}))},function(t,e,i){var n=i(145);i(21).register("graphics",(function(t){return this.displayList.add(new n(this.scene,t))}))},function(t,e,i){var n=i(147);i(21).register("container",(function(t,e,i){return this.displayList.add(new n(this.scene,t,e,i))}))},function(t,e,i){var n=i(21),r=i(148);n.register("particles",(function(t,e,i){return this.displayList.add(new r(this.scene,t,e,i))}))},function(t,e,i){var n=i(150);i(21).register("text",(function(t,e,i,r){return this.displayList.add(new n(this.scene,t,e,i,r))}))},function(t,e,i){var n=i(302);i(21).register("tileSprite",(function(t,e,i,r,s,o){return this.displayList.add(new n(this.scene,t,e,i,r,s,o))}))},function(t,e,i){var n=i(21),r=i(296);n.register("rectangle",(function(t,e,i,n,s,o){return this.displayList.add(new r(this.scene,t,e,i,n,s,o))}))},function(t,e,i){var n=i(301),r=i(21);r.register("arc",(function(t,e,i,r,s,o,a,h){return this.displayList.add(new n(this.scene,t,e,i,r,s,o,a,h))})),r.register("circle",(function(t,e,i,r,s){return this.displayList.add(new n(this.scene,t,e,i,0,360,!1,r,s))}))},function(t,e,i){var n=i(79),r=i(36),s=i(19),o=i(143);r.register("image",(function(t,e){void 0===t&&(t={});var i=s(t,"key",null),r=s(t,"frame",null),a=new o(this.scene,0,0,i,r);return void 0!==e&&(t.add=e),n(this.scene,a,t),a}))},function(t,e,i){var n=i(79),r=i(859),s=i(36),o=i(19),a=i(144);s.register("sprite",(function(t,e){void 0===t&&(t={});var i=o(t,"key",null),s=o(t,"frame",null),h=new a(this.scene,0,0,i,s);return void 0!==e&&(t.add=e),n(this.scene,h,t),r(h,t),h}))},function(t,e,i){var n=i(19);t.exports=function(t,e){var i=n(e,"anims",null);if(null===i)return t;if("string"==typeof i)t.anims.play(i);else if("object"==o(i)){var r=t.anims,s=n(i,"key",void 0);if(s){var a=n(i,"startFrame",void 0),h=n(i,"delay",0),l=n(i,"repeat",0),u=n(i,"repeatDelay",0),c=n(i,"yoyo",!1),d=n(i,"play",!1),p=n(i,"delayedPlay",0),f={key:s,delay:h,repeat:l,repeatDelay:u,yoyo:c,startFrame:a};d?r.play(f):p>0?r.playAfterDelay(f,p):r.load(f)}}return t}},function(t,e,i){var n=i(36),r=i(145);n.register("graphics",(function(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var i=new r(this.scene,t);return t.add&&this.scene.sys.displayList.add(i),i}))},function(t,e,i){var n=i(79),r=i(147),s=i(36),o=i(19);s.register("container",(function(t,e){void 0===t&&(t={});var i=o(t,"x",0),s=o(t,"y",0),a=o(t,"children",null),h=new r(this.scene,i,s,a);return void 0!==e&&(t.add=e),n(this.scene,h,t),h}))},function(t,e,i){var n=i(36),r=i(19),s=i(1),o=i(148);n.register("particles",(function(t,e){void 0===t&&(t={});var i=r(t,"key",null),n=r(t,"frame",null),a=s(t,"emitters",null),h=new o(this.scene,i,n,a);return void 0!==e&&(t.add=e),s(t,"add",!1)?this.displayList.add(h):this.updateList.add(h),h}))},function(t,e,i){var n=i(79),r=i(36),s=i(19),o=i(150);r.register("text",(function(t,e){void 0===t&&(t={});var i=s(t,"text",""),r=s(t,"style",null),a=s(t,"padding",null);null!==a&&(r.padding=a);var h=new o(this.scene,0,0,i,r);return void 0!==e&&(t.add=e),n(this.scene,h,t),h.autoRound=s(t,"autoRound",!0),h.resolution=s(t,"resolution",1),h}))},function(t,e,i){var n=i(79),r=i(36),s=i(19),o=i(302);r.register("tileSprite",(function(t,e){void 0===t&&(t={});var i=s(t,"x",0),r=s(t,"y",0),a=s(t,"width",512),h=s(t,"height",512),l=s(t,"key",""),u=s(t,"frame",""),c=new o(this.scene,i,r,a,h,l,u);return void 0!==e&&(t.add=e),n(this.scene,c,t),c}))},function(t,e,i){t.exports={Array:i(140),Base64:i(866),Objects:i(869),String:i(875),NOOP:i(4)}},function(t,e,i){t.exports={ArrayBufferToBase64:i(867),Base64ToArrayBuffer:i(868)}},function(t,e){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports=function(t,e){for(var n=new Uint8Array(t),r=n.length,s=e?"data:"+e+";base64,":"",o=0;o<r;o+=3)s+=i[n[o]>>2],s+=i[(3&n[o])<<4|n[o+1]>>4],s+=i[(15&n[o+1])<<2|n[o+2]>>6],s+=i[63&n[o+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s}},function(t,e){for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<i.length;r++)n[i.charCodeAt(r)]=r;t.exports=function(t){var e,i,r,s,o=(t=t.substr(t.indexOf(",")+1)).length,a=.75*o,h=0;"="===t[o-1]&&(a--,"="===t[o-2]&&a--);for(var l=new ArrayBuffer(a),u=new Uint8Array(l),c=0;c<o;c+=4)e=n[t.charCodeAt(c)],i=n[t.charCodeAt(c+1)],r=n[t.charCodeAt(c+2)],s=n[t.charCodeAt(c+3)],u[h++]=e<<2|i>>4,u[h++]=(15&i)<<4|r>>2,u[h++]=(3&r)<<6|63&s;return l}},function(t,e,i){t.exports={Clone:i(56),DeepCopy:i(110),Extend:i(18),GetAdvancedValue:i(19),GetFastValue:i(1),GetMinMaxValue:i(870),GetValue:i(7),HasAll:i(871),HasAny:i(294),HasValue:i(149),IsPlainObject:i(6),Merge:i(255),MergeRight:i(872),Pick:i(873),SetValue:i(874)}},function(t,e,i){var n=i(7),r=i(13);t.exports=function(t,e,i,s,o){void 0===o&&(o=i);var a=n(t,e,o);return r(a,i,s)}},function(t,e){t.exports=function(t,e){for(var i=0;i<e.length;i++)if(!t.hasOwnProperty(e[i]))return!1;return!0}},function(t,e,i){var n=i(56);t.exports=function(t,e){var i=n(t);for(var r in e)i.hasOwnProperty(r)&&(i[r]=e[r]);return i}},function(t,e,i){var n=i(149);t.exports=function(t,e){for(var i={},r=0;r<e.length;r++){var s=e[r];n(t,s)&&(i[s]=t[s])}return i}},function(t,e){t.exports=function(t,e,i){if(!t||"number"==typeof t)return!1;if(t.hasOwnProperty(e))return t[e]=i,!0;if(-1!==e.indexOf(".")){for(var n=e.split("."),r=t,s=t,o=0;o<n.length;o++){if(!r.hasOwnProperty(n[o]))return!1;s=r,r=r[n[o]]}return s[n[n.length-1]]=i,!0}return!1}},function(t,e,i){t.exports={Format:i(876),Pad:i(118),RemoveAt:i(877),Reverse:i(878),UppercaseFirst:i(130),UUID:i(879)}},function(t,e){t.exports=function(t,e){return t.replace(/%([0-9]+)/g,(function(t,i){return e[Number(i)-1]}))}},function(t,e){t.exports=function(t,e){return 0===e?t.slice(1):t.slice(0,e-1)+t.slice(e)}},function(t,e){t.exports=function(t){return t.split("").reverse().join("")}},function(t,e){t.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}},function(t,e,i){t.exports={Path:i(881),MoveTo:i(306),CubicBezier:i(303),Curve:i(59),Ellipse:i(304),Line:i(305),QuadraticBezier:i(307),Spline:i(308)}},function(t,e,i){var n=i(0),r=i(303),s=i(304),a=i(21),h=i(305),l=i(306),u=i(307),c=i(8),d=i(308),p=i(5),f=i(10),m=new n({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new p,this._tmpVec2A=new p,this._tmpVec2B=new p,"object"==o(t)?this.fromJSON(t):this.startPoint.set(t,e)},add:function(t){return this.curves.push(t),this},circleTo:function(t,e,i){return void 0===e&&(e=!1),this.ellipseTo(t,t,0,360,e,i)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);return t.equals(e)||this.curves.push(new h(e,t)),this},cubicBezierTo:function(t,e,i,n,s,o){var a,h,l,u=this.getEndPoint();return t instanceof p?(a=t,h=e,l=i):(a=new p(i,n),h=new p(s,o),l=new p(t,e)),this.add(new r(u,a,h,l))},quadraticBezierTo:function(t,e,i,n){var r,s,o=this.getEndPoint();return t instanceof p?(r=t,s=e):(r=new p(i,n),s=new p(t,e)),this.add(new u(o,r,s))},draw:function(t,e){for(var i=0;i<this.curves.length;i++){var n=this.curves[i];n.active&&n.draw(t,e)}return t},ellipseTo:function(t,e,i,n,r,o){var a=new s(0,0,t,e,i,n,r,o),h=this.getEndPoint(this._tmpVec2A),l=a.getStartPoint(this._tmpVec2B);return h.subtract(l),a.x=h.x,a.y=h.y,this.add(a)},fromJSON:function(t){this.curves=[],this.cacheLengths=[],this.startPoint.set(t.x,t.y),this.autoClose=t.autoClose;for(var e=0;e<t.curves.length;e++){var i=t.curves[e];switch(i.type){case"LineCurve":this.add(h.fromJSON(i));break;case"EllipseCurve":this.add(s.fromJSON(i));break;case"SplineCurve":this.add(d.fromJSON(i));break;case"CubicBezierCurve":this.add(r.fromJSON(i));break;case"QuadraticBezierCurve":this.add(u.fromJSON(i))}}return this},getBounds:function(t,e){void 0===t&&(t=new c),void 0===e&&(e=16),t.x=Number.MAX_VALUE,t.y=Number.MAX_VALUE;for(var i=new c,n=f.MIN_SAFE_INTEGER,r=f.MIN_SAFE_INTEGER,s=0;s<this.curves.length;s++){var o=this.curves[s];o.active&&(o.getBounds(i,e),t.x=Math.min(t.x,i.x),t.y=Math.min(t.y,i.y),n=Math.max(n,i.right),r=Math.max(r,i.bottom))}return t.right=n,t.bottom=r,t},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0;i<this.curves.length;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t},getEndPoint:function(t){return void 0===t&&(t=new p),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,t):t.copy(this.startPoint),t},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},getPoint:function(t,e){void 0===e&&(e=new p);for(var i=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=i){var s=n[r]-i,o=this.curves[r],a=o.getLength(),h=0===a?0:1-s/a;return o.getPointAt(h,e)}r++}return null},getPoints:function(t){void 0===t&&(t=12);for(var e,i=[],n=0;n<this.curves.length;n++){var r=this.curves[n];if(r.active)for(var s=r.getResolution(t),o=r.getPoints(s),a=0;a<o.length;a++){var h=o[a];e&&e.equals(h)||(i.push(h),e=h)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},getRandomPoint:function(t){return void 0===t&&(t=new p),this.getPoint(Math.random(),t)},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getStartPoint:function(t){return void 0===t&&(t=new p),t.copy(this.startPoint)},getTangent:function(t,e){void 0===e&&(e=new p);for(var i=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=i){var s=n[r]-i,o=this.curves[r],a=o.getLength(),h=0===a?0:1-s/a;return o.getTangentAt(h,e)}r++}return null},lineTo:function(t,e){t instanceof p?this._tmpVec2B.copy(t):this._tmpVec2B.set(t,e);var i=this.getEndPoint(this._tmpVec2A);return this.add(new h([i.x,i.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(t){return t.unshift(this.getEndPoint()),this.add(new d(t))},moveTo:function(t,e){return t instanceof p?this.add(new l(t.x,t.y)):this.add(new l(t,e))},toJSON:function(){for(var t=[],e=0;e<this.curves.length;e++)t.push(this.curves[e].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:t}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});a.register("path",(function(t,e){return new m(t,e)})),t.exports=m},function(t,e,i){var n=i(33),r=i(18),s={Circle:i(883),Ellipse:i(893),Intersects:i(903),Line:i(914),Mesh:i(937),Point:i(942),Polygon:i(956),Rectangle:i(965),Triangle:i(993)};s=r(!1,s,n),t.exports=s},function(t,e,i){var n=i(76);n.Area=i(884),n.Circumference=i(265),n.CircumferencePoint=i(132),n.Clone=i(885),n.Contains=i(57),n.ContainsPoint=i(886),n.ContainsRect=i(887),n.CopyFrom=i(888),n.Equals=i(889),n.GetBounds=i(890),n.GetPoint=i(263),n.GetPoints=i(264),n.Offset=i(891),n.OffsetPoint=i(892),n.Random=i(266),t.exports=n},function(t,e){t.exports=function(t){return t.radius>0?Math.PI*t.radius*t.radius:0}},function(t,e,i){var n=i(76);t.exports=function(t){return new n(t.x,t.y,t.radius)}},function(t,e,i){var n=i(57);t.exports=function(t,e){return n(t,e.x,e.y)}},function(t,e,i){var n=i(57);t.exports=function(t,e){return n(t,e.x,e.y)&&n(t,e.right,e.y)&&n(t,e.x,e.bottom)&&n(t,e.right,e.bottom)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.radius)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.radius===e.radius}},function(t,e,i){var n=i(8);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=t.left,e.y=t.top,e.width=t.diameter,e.height=t.diameter,e}},function(t,e){t.exports=function(t,e,i){return t.x+=e,t.y+=i,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e,i){var n=i(96);n.Area=i(894),n.Circumference=i(269),n.CircumferencePoint=i(133),n.Clone=i(895),n.Contains=i(77),n.ContainsPoint=i(896),n.ContainsRect=i(897),n.CopyFrom=i(898),n.Equals=i(899),n.GetBounds=i(900),n.GetPoint=i(267),n.GetPoints=i(268),n.Offset=i(901),n.OffsetPoint=i(902),n.Random=i(270),t.exports=n},function(t,e){t.exports=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI}},function(t,e,i){var n=i(96);t.exports=function(t){return new n(t.x,t.y,t.width,t.height)}},function(t,e,i){var n=i(77);t.exports=function(t,e){return n(t,e.x,e.y)}},function(t,e,i){var n=i(77);t.exports=function(t,e){return n(t,e.x,e.y)&&n(t,e.right,e.y)&&n(t,e.x,e.bottom)&&n(t,e.right,e.bottom)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.width,t.height)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}},function(t,e,i){var n=i(8);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=t.left,e.y=t.top,e.width=t.width,e.height=t.height,e}},function(t,e){t.exports=function(t,e,i){return t.x+=e,t.y+=i,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e,i){t.exports={CircleToCircle:i(309),CircleToRectangle:i(310),GetCircleToCircle:i(904),GetCircleToRectangle:i(905),GetLineToCircle:i(152),GetLineToLine:i(311),GetLineToPoints:i(312),GetLineToPolygon:i(313),GetLineToRectangle:i(154),GetRaysFromPointToPolygon:i(906),GetRectangleIntersection:i(907),GetRectangleToRectangle:i(908),GetRectangleToTriangle:i(909),GetTriangleToCircle:i(910),GetTriangleToLine:i(318),GetTriangleToTriangle:i(911),LineToCircle:i(153),LineToLine:i(60),LineToRectangle:i(314),PointToLine:i(322),PointToLineSegment:i(912),RectangleToRectangle:i(102),RectangleToTriangle:i(315),RectangleToValues:i(913),TriangleToCircle:i(317),TriangleToLine:i(319),TriangleToTriangle:i(320)}},function(t,e,i){var n=i(2),r=i(309);t.exports=function(t,e,i){if(void 0===i&&(i=[]),r(t,e)){var s,o,a,h,l=t.x,u=t.y,c=t.radius,d=e.x,p=e.y,f=e.radius;if(u===p)0==(a=(o=-2*p)*o-4*(s=1)*(d*d+(h=(f*f-c*c-d*d+l*l)/(2*(l-d)))*h-2*d*h+p*p-f*f))?i.push(new n(h,-o/(2*s))):a>0&&(i.push(new n(h,(-o+Math.sqrt(a))/(2*s))),i.push(new n(h,(-o-Math.sqrt(a))/(2*s))));else{var m=(l-d)/(u-p),g=(f*f-c*c-d*d+l*l-p*p+u*u)/(2*(u-p));0==(a=(o=2*u*m-2*g*m-2*l)*o-4*(s=m*m+1)*(l*l+u*u+g*g-c*c-2*u*g))?(h=-o/(2*s),i.push(new n(h,g-h*m))):a>0&&(h=(-o+Math.sqrt(a))/(2*s),i.push(new n(h,g-h*m)),h=(-o-Math.sqrt(a))/(2*s),i.push(new n(h,g-h*m)))}}return i}},function(t,e,i){var n=i(152),r=i(310);t.exports=function(t,e,i){if(void 0===i&&(i=[]),r(t,e)){var s=e.getLineA(),o=e.getLineB(),a=e.getLineC(),h=e.getLineD();n(s,t,i),n(o,t,i),n(a,t,i),n(h,t,i)}return i}},function(t,e,i){var n=i(124),r=i(313),s=new(i(34));function o(t,e,i,o,a){var h=Math.cos(t),l=Math.sin(t);s.setTo(e,i,e+h,i+l);var u=r(s,o);u&&a.push(new n(u.x,u.y,t,u.w))}function a(t,e){return t.z-e.z}t.exports=function(t,e,i){Array.isArray(i)||(i=[i]);for(var n=[],r=[],s=0;s<i.length;s++)for(var h=i[s].points,l=0;l<h.length;l++){var u=Math.atan2(h[l].y-e,h[l].x-t);-1===r.indexOf(u)&&(o(u,t,e,i,n),o(u-1e-5,t,e,i,n),o(u+1e-5,t,e,i,n),r.push(u))}return n.sort(a)}},function(t,e,i){var n=i(8),r=i(102);t.exports=function(t,e,i){return void 0===i&&(i=new n),r(t,e)&&(i.x=Math.max(t.x,e.x),i.y=Math.max(t.y,e.y),i.width=Math.min(t.right,e.right)-i.x,i.height=Math.min(t.bottom,e.bottom)-i.y),i}},function(t,e,i){var n=i(154),r=i(102);t.exports=function(t,e,i){if(void 0===i&&(i=[]),r(t,e)){var s=t.getLineA(),o=t.getLineB(),a=t.getLineC(),h=t.getLineD();n(s,e,i),n(o,e,i),n(a,e,i),n(h,e,i)}return i}},function(t,e,i){var n=i(315),r=i(154);t.exports=function(t,e,i){if(void 0===i&&(i=[]),n(t,e)){var s=e.getLineA(),o=e.getLineB(),a=e.getLineC();r(s,t,i),r(o,t,i),r(a,t,i)}return i}},function(t,e,i){var n=i(152),r=i(317);t.exports=function(t,e,i){if(void 0===i&&(i=[]),r(t,e)){var s=t.getLineA(),o=t.getLineB(),a=t.getLineC();n(s,e,i),n(o,e,i),n(a,e,i)}return i}},function(t,e,i){var n=i(320),r=i(318);t.exports=function(t,e,i){if(void 0===i&&(i=[]),n(t,e)){var s=e.getLineA(),o=e.getLineB(),a=e.getLineC();r(t,s,i),r(t,o,i),r(t,a,i)}return i}},function(t,e,i){var n=i(322);t.exports=function(t,e){if(!n(t,e))return!1;var i=Math.min(e.x1,e.x2),r=Math.max(e.x1,e.x2),s=Math.min(e.y1,e.y2),o=Math.max(e.y1,e.y2);return t.x>=i&&t.x<=r&&t.y>=s&&t.y<=o}},function(t,e){t.exports=function(t,e,i,n,r,s){return void 0===s&&(s=0),!(e>t.right+s||i<t.left-s||n>t.bottom+s||r<t.top-s)}},function(t,e,i){var n=i(34);n.Angle=i(61),n.BresenhamPoints=i(915),n.CenterOn=i(916),n.Clone=i(917),n.CopyFrom=i(918),n.Equals=i(919),n.Extend=i(920),n.GetEasedPoints=i(921),n.GetMidPoint=i(922),n.GetNearestPoint=i(923),n.GetNormal=i(924),n.GetPoint=i(171),n.GetPoints=i(172),n.GetShortestDistance=i(925),n.Height=i(926),n.Length=i(43),n.NormalAngle=i(323),n.NormalX=i(927),n.NormalY=i(928),n.Offset=i(929),n.PerpSlope=i(930),n.Random=i(173),n.ReflectAngle=i(931),n.Rotate=i(932),n.RotateAroundPoint=i(933),n.RotateAroundXY=i(156),n.SetToAngle=i(934),n.Slope=i(935),n.Width=i(936),t.exports=n},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=[]);var n=Math.round(t.x1),r=Math.round(t.y1),s=Math.round(t.x2),o=Math.round(t.y2),a=Math.abs(s-n),h=Math.abs(o-r),l=n<s?1:-1,u=r<o?1:-1,c=a-h;i.push({x:n,y:r});for(var d=1;n!==s||r!==o;){var p=c<<1;p>-h&&(c-=h,n+=l),p<a&&(c+=a,r+=u),d%e==0&&i.push({x:n,y:r}),d++}return i}},function(t,e){t.exports=function(t,e,i){var n=e-(t.x1+t.x2)/2,r=i-(t.y1+t.y2)/2;return t.x1+=n,t.y1+=r,t.x2+=n,t.y2+=r,t}},function(t,e,i){var n=i(34);t.exports=function(t){return new n(t.x1,t.y1,t.x2,t.y2)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x1,t.y1,t.x2,t.y2)}},function(t,e){t.exports=function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2}},function(t,e,i){var n=i(43);t.exports=function(t,e,i){void 0===i&&(i=e);var r=n(t),s=t.x2-t.x1,o=t.y2-t.y1;return e&&(t.x1=t.x1-s/r*e,t.y1=t.y1-o/r*e),i&&(t.x2=t.x2+s/r*i,t.y2=t.y2+o/r*i),t}},function(t,e,i){var n=i(214),r=i(49),s=i(2);t.exports=function(t,e,i,o,a){void 0===o&&(o=0),void 0===a&&(a=[]);var h,l,u=[],c=t.x1,d=t.y1,p=t.x2-c,f=t.y2-d,m=r(e,a),g=i-1;for(h=0;h<g;h++)l=m(h/g),u.push(new s(c+p*l,d+f*l));if(l=m(1),u.push(new s(c+p*l,d+f*l)),o>0){var v=u[0],y=[v];for(h=1;h<u.length-1;h++){var A=u[h];n(v,A)>=o&&(y.push(A),v=A)}var x=u[u.length-1];return n(v,x)<o&&y.pop(),y.push(x),y}return u}},function(t,e,i){var n=i(2);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=(t.x1+t.x2)/2,e.y=(t.y1+t.y2)/2,e}},function(t,e,i){var n=i(2);t.exports=function(t,e,i){void 0===i&&(i=new n);var r=t.x1,s=t.y1,o=t.x2,a=t.y2,h=(o-r)*(o-r)+(a-s)*(a-s);if(0===h)return i;var l=((e.x-r)*(o-r)+(e.y-s)*(a-s))/h;return i.x=r+l*(o-r),i.y=s+l*(a-s),i}},function(t,e,i){var n=i(10),r=i(61),s=i(2);t.exports=function(t,e){void 0===e&&(e=new s);var i=r(t)-n.TAU;return e.x=Math.cos(i),e.y=Math.sin(i),e}},function(t,e){t.exports=function(t,e){var i=t.x1,n=t.y1,r=t.x2,s=t.y2,o=(r-i)*(r-i)+(s-n)*(s-n);if(0===o)return!1;var a=((n-e.y)*(r-i)-(i-e.x)*(s-n))/o;return Math.abs(a)*Math.sqrt(o)}},function(t,e){t.exports=function(t){return Math.abs(t.y1-t.y2)}},function(t,e,i){var n=i(10),r=i(61);t.exports=function(t){return Math.cos(r(t)-n.TAU)}},function(t,e,i){var n=i(10),r=i(61);t.exports=function(t){return Math.sin(r(t)-n.TAU)}},function(t,e){t.exports=function(t,e,i){return t.x1+=e,t.y1+=i,t.x2+=e,t.y2+=i,t}},function(t,e){t.exports=function(t){return-(t.x2-t.x1)/(t.y2-t.y1)}},function(t,e,i){var n=i(61),r=i(323);t.exports=function(t,e){return 2*r(e)-Math.PI-n(t)}},function(t,e,i){var n=i(156);t.exports=function(t,e){var i=(t.x1+t.x2)/2,r=(t.y1+t.y2)/2;return n(t,i,r,e)}},function(t,e,i){var n=i(156);t.exports=function(t,e,i){return n(t,e.x,e.y,i)}},function(t,e){t.exports=function(t,e,i,n,r){return t.x1=e,t.y1=i,t.x2=e+Math.cos(n)*r,t.y2=i+Math.sin(n)*r,t}},function(t,e){t.exports=function(t){return(t.y2-t.y1)/(t.x2-t.x1)}},function(t,e){t.exports=function(t){return Math.abs(t.x1-t.x2)}},function(t,e,i){var n={Face:i(103),GenerateGridVerts:i(938),GenerateObjVerts:i(939),GenerateVerts:i(940),ParseObj:i(324),ParseObjMaterial:i(325),RotateFace:i(941),Vertex:i(104)};t.exports=n},function(t,e,i){var n=i(103),r=i(1),s=i(48),o=i(27),a=i(104),h=new o,l=new o,u=new s;t.exports=function(t){var e=r(t,"mesh"),i=r(t,"texture",null),s=r(t,"frame"),o=r(t,"width",1),c=r(t,"height",o),d=r(t,"widthSegments",1),p=r(t,"heightSegments",d),f=r(t,"x",0),m=r(t,"y",0),g=r(t,"z",0),v=r(t,"rotateX",0),y=r(t,"rotateY",0),A=r(t,"rotateZ",0),x=r(t,"zIsUp",!0),w=r(t,"isOrtho",!!e&&e.dirtyCache[11]),b=r(t,"colors",[16777215]),S=r(t,"alphas",[1]),E=r(t,"tile",!1),T=r(t,"flipY",!1),_=r(t,"width",null),M={faces:[],verts:[]};if(h.set(f,m,g),l.set(v,y,A),u.fromRotationXYTranslation(l,h,x),!i&&e)i=e.texture;else{if(!e||"string"!=typeof i)return M;i=e.scene.sys.textures.get(i)}var C=i.get(s);!_&&w&&i&&e&&(o=C.width/e.height,c=C.height/e.height);var P,R,O=o/2,L=c/2,I=Math.floor(d),D=Math.floor(p),B=I+1,k=D+1,F=o/I,N=c/D,z=[],U=[],G=0,V=1,H=0,W=1;C&&(G=C.u0,V=C.u1,T?(H=C.v1,W=C.v0):(H=C.v0,W=C.v1));var j=V-G,Y=W-H;for(R=0;R<k;R++){var X=R*N-L;for(P=0;P<B;P++){var q=P*F-O;U.push(q,-X);var J=G+j*(P/I),Q=H+Y*(R/D);z.push(J,Q)}}Array.isArray(b)||(b=[b]),Array.isArray(S)||(S=[S]);var K=0,Z=0;for(R=0;R<D;R++)for(P=0;P<I;P++){var $=2*(P+B*R),tt=2*(P+B*(R+1)),et=2*(P+1+B*(R+1)),it=2*(P+1+B*R),nt=b[Z],rt=S[K],st=new a(U[$],U[$+1],0,z[$],z[$+1],nt,rt).transformMat4(u),ot=new a(U[tt],U[tt+1],0,z[tt],z[tt+1],nt,rt).transformMat4(u),at=new a(U[it],U[it+1],0,z[it],z[it+1],nt,rt).transformMat4(u),ht=new a(U[tt],U[tt+1],0,z[tt],z[tt+1],nt,rt).transformMat4(u),lt=new a(U[et],U[et+1],0,z[et],z[et+1],nt,rt).transformMat4(u),ut=new a(U[it],U[it+1],0,z[it],z[it+1],nt,rt).transformMat4(u);E&&(st.setUVs(G,W),ot.setUVs(G,H),at.setUVs(V,W),ht.setUVs(G,H),lt.setUVs(V,H),ut.setUVs(V,W)),++Z===b.length&&(Z=0),++K===S.length&&(K=0),M.verts.push(st,ot,at,ht,lt,ut),M.faces.push(new n(st,ot,at),new n(ht,lt,ut))}return e&&(e.faces=e.faces.concat(M.faces),e.vertices=e.vertices.concat(M.verts)),M}},function(t,e,i){var n=i(103),r=i(48),s=i(27),o=i(104),a=new s,h=new s,l=new r;t.exports=function(t,e,i,r,s,u,c,d,p,f){void 0===i&&(i=1),void 0===r&&(r=0),void 0===s&&(s=0),void 0===u&&(u=0),void 0===c&&(c=0),void 0===d&&(d=0),void 0===p&&(p=0),void 0===f&&(f=!0);var m={faces:[],verts:[]},g=t.materials;a.set(r,s,u),h.set(c,d,p),l.fromRotationXYTranslation(h,a,f);for(var v=0;v<t.models.length;v++)for(var y=t.models[v],A=y.vertices,x=y.textureCoords,w=y.faces,b=0;b<w.length;b++){var S=w[b],E=S.vertices[0],T=S.vertices[1],_=S.vertices[2],M=A[E.vertexIndex],C=A[T.vertexIndex],P=A[_.vertexIndex],R=E.textureCoordsIndex,O=T.textureCoordsIndex,L=_.textureCoordsIndex,I=-1===R?{u:0,v:1}:x[R],D=-1===O?{u:0,v:0}:x[O],B=-1===L?{u:1,v:1}:x[L],k=16777215;""!==S.material&&g[S.material]&&(k=g[S.material]);var F=new o(M.x*i,M.y*i,M.z*i,I.u,I.v,k).transformMat4(l),N=new o(C.x*i,C.y*i,C.z*i,D.u,D.v,k).transformMat4(l),z=new o(P.x*i,P.y*i,P.z*i,B.u,B.v,k).transformMat4(l);m.verts.push(F,N,z),m.faces.push(new n(F,N,z))}return e&&(e.faces=e.faces.concat(m.faces),e.vertices=e.vertices.concat(m.verts)),m}},function(t,e,i){var n=i(103),r=i(104);t.exports=function(t,e,i,s,o,a,h){if(void 0===s&&(s=!1),void 0===a&&(a=16777215),void 0===h&&(h=1),t.length===e.length){var l,u,c,d,p,f,m,g,v,y,A,x={faces:[],vertices:[]},w=s?3:2,b=Array.isArray(a),S=Array.isArray(h);if(Array.isArray(i)&&i.length>0)for(l=0;l<i.length;l++){var E=i[l],T=2*i[l],_=i[l]*w;u=t[_],c=t[_+1],d=s?t[_+2]:0,p=e[T],f=e[T+1],m=b?a[E]:a,g=S?h[E]:h,v=0,y=0,A=0,o&&(v=o[_],y=o[_+1],A=s?o[_+2]:0),x.vertices.push(new r(u,c,d,p,f,m,g,v,y,A))}else{var M=0,C=0;for(l=0;l<t.length;l+=w)u=t[l],c=t[l+1],d=s?t[l+2]:0,p=e[M],f=e[M+1],m=b?a[C]:a,g=S?h[C]:h,v=0,y=0,A=0,o&&(v=o[l],y=o[l+1],A=s?o[l+2]:0),x.vertices.push(new r(u,c,d,p,f,m,g,v,y,A)),M+=2,C++}for(l=0;l<x.vertices.length;l+=3){var P=x.vertices[l],R=x.vertices[l+1],O=x.vertices[l+2];x.faces.push(new n(P,R,O))}return x}}},function(t,e){t.exports=function(t,e,i,n){var r,s;if(void 0===i&&void 0===n){var o=t.getInCenter();r=o.x,s=o.y}var a=Math.cos(e),h=Math.sin(e),l=t.vertex1,u=t.vertex2,c=t.vertex3,d=l.x-r,p=l.y-s;l.set(d*a-p*h+r,d*h+p*a+s),d=u.x-r,p=u.y-s,u.set(d*a-p*h+r,d*h+p*a+s),d=c.x-r,p=c.y-s,c.set(d*a-p*h+r,d*h+p*a+s)}},function(t,e,i){var n=i(2);n.Ceil=i(943),n.Clone=i(944),n.CopyFrom=i(945),n.Equals=i(946),n.Floor=i(947),n.GetCentroid=i(948),n.GetMagnitude=i(326),n.GetMagnitudeSq=i(327),n.GetRectangleFromPoints=i(949),n.Interpolate=i(950),n.Invert=i(951),n.Negative=i(952),n.Project=i(953),n.ProjectUnit=i(954),n.SetMagnitude=i(955),t.exports=n},function(t,e){t.exports=function(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))}},function(t,e,i){var n=i(2);t.exports=function(t){return new n(t.x,t.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y}},function(t,e){t.exports=function(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))}},function(t,e,i){var n=i(2);t.exports=function(t,e){if(void 0===e&&(e=new n),!Array.isArray(t))throw new Error("GetCentroid points argument must be an array");var i=t.length;if(i<1)throw new Error("GetCentroid points array must not be empty");if(1===i)e.x=t[0].x,e.y=t[0].y;else{for(var r=0;r<i;r++)e.x+=t[r].x,e.y+=t[r].y;e.x/=i,e.y/=i}return e}},function(t,e,i){var n=i(8);t.exports=function(t,e){void 0===e&&(e=new n);for(var i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=0;a<t.length;a++){var h=t[a];h.x>i&&(i=h.x),h.x<r&&(r=h.x),h.y>s&&(s=h.y),h.y<o&&(o=h.y)}return e.x=r,e.y=o,e.width=i-r,e.height=s-o,e}},function(t,e,i){var n=i(2);t.exports=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=new n),r.x=t.x+(e.x-t.x)*i,r.y=t.y+(e.y-t.y)*i,r}},function(t,e){t.exports=function(t){return t.setTo(t.y,t.x)}},function(t,e,i){var n=i(2);t.exports=function(t,e){return void 0===e&&(e=new n),e.setTo(-t.x,-t.y)}},function(t,e,i){var n=i(2),r=i(327);t.exports=function(t,e,i){void 0===i&&(i=new n);var s=(t.x*e.x+t.y*e.y)/r(e);return 0!==s&&(i.x=s*e.x,i.y=s*e.y),i}},function(t,e,i){var n=i(2);t.exports=function(t,e,i){void 0===i&&(i=new n);var r=t.x*e.x+t.y*e.y;return 0!==r&&(i.x=r*e.x,i.y=r*e.y),i}},function(t,e,i){var n=i(326);t.exports=function(t,e){if(0!==t.x||0!==t.y){var i=n(t);t.x/=i,t.y/=i}return t.x*=e,t.y*=e,t}},function(t,e,i){var n=i(328);n.Clone=i(957),n.Contains=i(157),n.ContainsPoint=i(958),n.Earcut=i(74),n.GetAABB=i(959),n.GetNumberArray=i(960),n.GetPoints=i(329),n.Perimeter=i(330),n.Reverse=i(961),n.Simplify=i(962),n.Smooth=i(963),n.Translate=i(964),t.exports=n},function(t,e,i){var n=i(328);t.exports=function(t){return new n(t.points)}},function(t,e,i){var n=i(157);t.exports=function(t,e){return n(t,e.x,e.y)}},function(t,e,i){var n=i(8);t.exports=function(t,e){void 0===e&&(e=new n);for(var i,r=1/0,s=1/0,o=-r,a=-s,h=0;h<t.points.length;h++)i=t.points[h],r=Math.min(r,i.x),s=Math.min(s,i.y),o=Math.max(o,i.x),a=Math.max(a,i.y);return e.x=r,e.y=s,e.width=o-r,e.height=a-s,e}},function(t,e){t.exports=function(t,e){void 0===e&&(e=[]);for(var i=0;i<t.points.length;i++)e.push(t.points[i].x),e.push(t.points[i].y);return e}},function(t,e){t.exports=function(t){return t.points.reverse(),t}},function(t,e){function i(t,e,i){var n=e.x,r=e.y,s=i.x-n,o=i.y-r;if(0!==s||0!==o){var a=((t.x-n)*s+(t.y-r)*o)/(s*s+o*o);a>1?(n=i.x,r=i.y):a>0&&(n+=s*a,r+=o*a)}return(s=t.x-n)*s+(o=t.y-r)*o}function n(t,e){var n=t.length-1,r=[t[0]];return function t(e,n,r,s,o){for(var a,h=s,l=n+1;l<r;l++){var u=i(e[l],e[n],e[r]);u>h&&(a=l,h=u)}h>s&&(a-n>1&&t(e,n,a,s,o),o.push(e[a]),r-a>1&&t(e,a,r,s,o))}(t,0,n,e,r),r.push(t[n]),r}t.exports=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1);var r=t.points;if(r.length>2){var s=e*e;i||(r=function(t,e){for(var i,n,r,s,o,a=t[0],h=[a],l=1,u=t.length;l<u;l++)r=a,(s=(n=i=t[l]).x-r.x)*s+(o=n.y-r.y)*o>e&&(h.push(i),a=i);return a!==i&&h.push(i),h}(r,s)),t.setTo(n(r,s))}return t}},function(t,e){var i=function(t,e){return t[0]=e[0],t[1]=e[1],t};t.exports=function(t){var e,n=[],r=t.points;for(e=0;e<r.length;e++)n.push([r[e].x,r[e].y]);var s=[];for(n.length>0&&s.push(i([0,0],n[0])),e=0;e<n.length-1;e++){var o=n[e],a=n[e+1],h=o[0],l=o[1],u=a[0],c=a[1];s.push([.85*h+.15*u,.85*l+.15*c]),s.push([.15*h+.85*u,.15*l+.85*c])}return n.length>1&&s.push(i([0,0],n[n.length-1])),t.setTo(s)}},function(t,e){t.exports=function(t,e,i){for(var n=t.points,r=0;r<n.length;r++)n[r].x+=e,n[r].y+=i;return t}},function(t,e,i){var n=i(8);n.Area=i(966),n.Ceil=i(967),n.CeilAll=i(968),n.CenterOn=i(115),n.Clone=i(969),n.Contains=i(51),n.ContainsPoint=i(970),n.ContainsRect=i(331),n.CopyFrom=i(971),n.Decompose=i(316),n.Equals=i(972),n.FitInside=i(973),n.FitOutside=i(974),n.Floor=i(975),n.FloorAll=i(976),n.FromPoints=i(151),n.FromXY=i(977),n.GetAspectRatio=i(158),n.GetCenter=i(978),n.GetPoint=i(108),n.GetPoints=i(170),n.GetSize=i(979),n.Inflate=i(980),n.Intersection=i(981),n.MarchingAnts=i(982),n.MergePoints=i(983),n.MergeRect=i(984),n.MergeXY=i(985),n.Offset=i(986),n.OffsetPoint=i(987),n.Overlaps=i(988),n.Perimeter=i(80),n.PerimeterPoint=i(989),n.Random=i(174),n.RandomOutside=i(990),n.SameDimensions=i(991),n.Scale=i(992),n.Union=i(293),t.exports=n},function(t,e){t.exports=function(t){return t.width*t.height}},function(t,e){t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t}},function(t,e){t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t}},function(t,e,i){var n=i(8);t.exports=function(t){return new n(t.x,t.y,t.width,t.height)}},function(t,e,i){var n=i(51);t.exports=function(t,e){return n(t,e.x,e.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.width,t.height)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}},function(t,e,i){var n=i(158);t.exports=function(t,e){var i=n(t);return i<n(e)?t.setSize(e.height*i,e.height):t.setSize(e.width,e.width/i),t.setPosition(e.centerX-t.width/2,e.centerY-t.height/2)}},function(t,e,i){var n=i(158);t.exports=function(t,e){var i=n(t);return i>n(e)?t.setSize(e.height*i,e.height):t.setSize(e.width,e.width/i),t.setPosition(e.centerX-t.width/2,e.centerY-t.height/2)}},function(t,e){t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t}},function(t,e){t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t}},function(t,e,i){var n=i(8);t.exports=function(t,e,i,r,s){return void 0===s&&(s=new n),s.setTo(Math.min(t,i),Math.min(e,r),Math.abs(t-i),Math.abs(e-r))}},function(t,e,i){var n=i(2);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=t.centerX,e.y=t.centerY,e}},function(t,e,i){var n=i(2);t.exports=function(t,e){return void 0===e&&(e=new n),e.x=t.width,e.y=t.height,e}},function(t,e,i){var n=i(115);t.exports=function(t,e,i){var r=t.centerX,s=t.centerY;return t.setSize(t.width+2*e,t.height+2*i),n(t,r,s)}},function(t,e,i){var n=i(8),r=i(102);t.exports=function(t,e,i){return void 0===i&&(i=new n),r(t,e)?(i.x=Math.max(t.x,e.x),i.y=Math.max(t.y,e.y),i.width=Math.min(t.right,e.right)-i.x,i.height=Math.min(t.bottom,e.bottom)-i.y):i.setEmpty(),i}},function(t,e,i){var n=i(80),r=i(2);t.exports=function(t,e,i,s){if(void 0===s&&(s=[]),!e&&!i)return s;e?i=Math.round(n(t)/e):e=n(t)/i;for(var o=t.x,a=t.y,h=0,l=0;l<i;l++)switch(s.push(new r(o,a)),h){case 0:(o+=e)>=t.right&&(h=1,a+=o-t.right,o=t.right);break;case 1:(a+=e)>=t.bottom&&(h=2,o-=a-t.bottom,a=t.bottom);break;case 2:(o-=e)<=t.left&&(h=3,a-=t.left-o,o=t.left);break;case 3:(a-=e)<=t.top&&(h=0,a=t.top)}return s}},function(t,e){t.exports=function(t,e){for(var i=t.x,n=t.right,r=t.y,s=t.bottom,o=0;o<e.length;o++)i=Math.min(i,e[o].x),n=Math.max(n,e[o].x),r=Math.min(r,e[o].y),s=Math.max(s,e[o].y);return t.x=i,t.y=r,t.width=n-i,t.height=s-r,t}},function(t,e){t.exports=function(t,e){var i=Math.min(t.x,e.x),n=Math.max(t.right,e.right);t.x=i,t.width=n-i;var r=Math.min(t.y,e.y),s=Math.max(t.bottom,e.bottom);return t.y=r,t.height=s-r,t}},function(t,e){t.exports=function(t,e,i){var n=Math.min(t.x,e),r=Math.max(t.right,e);t.x=n,t.width=r-n;var s=Math.min(t.y,i),o=Math.max(t.bottom,i);return t.y=s,t.height=o-s,t}},function(t,e){t.exports=function(t,e,i){return t.x+=e,t.y+=i,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e){t.exports=function(t,e){return t.x<e.right&&t.right>e.x&&t.y<e.bottom&&t.bottom>e.y}},function(t,e,i){var n=i(2),r=i(44);t.exports=function(t,e,i){void 0===i&&(i=new n),e=r(e);var s=Math.sin(e),o=Math.cos(e),a=o>0?t.width/2:t.width/-2,h=s>0?t.height/2:t.height/-2;return Math.abs(a*s)<Math.abs(h*o)?h=a*s/o:a=h*o/s,i.x=a+t.centerX,i.y=h+t.centerY,i}},function(t,e,i){var n=i(123),r=i(331),s=i(2);t.exports=function(t,e,i){if(void 0===i&&(i=new s),r(t,e))switch(n(0,3)){case 0:i.x=t.x+Math.random()*(e.right-t.x),i.y=t.y+Math.random()*(e.top-t.y);break;case 1:i.x=e.x+Math.random()*(t.right-e.x),i.y=e.bottom+Math.random()*(t.bottom-e.bottom);break;case 2:i.x=t.x+Math.random()*(e.x-t.x),i.y=e.y+Math.random()*(t.bottom-e.y);break;case 3:i.x=e.right+Math.random()*(t.right-e.right),i.y=t.y+Math.random()*(e.bottom-t.y)}return i}},function(t,e){t.exports=function(t,e){return t.width===e.width&&t.height===e.height}},function(t,e){t.exports=function(t,e,i){return void 0===i&&(i=e),t.width*=e,t.height*=i,t}},function(t,e,i){var n=i(58);n.Area=i(994),n.BuildEquilateral=i(995),n.BuildFromPolygon=i(996),n.BuildRight=i(997),n.CenterOn=i(998),n.Centroid=i(332),n.CircumCenter=i(999),n.CircumCircle=i(1e3),n.Clone=i(1001),n.Contains=i(78),n.ContainsArray=i(155),n.ContainsPoint=i(1002),n.CopyFrom=i(1003),n.Decompose=i(321),n.Equals=i(1004),n.GetPoint=i(271),n.GetPoints=i(272),n.InCenter=i(334),n.Perimeter=i(1005),n.Offset=i(333),n.Random=i(273),n.Rotate=i(1006),n.RotateAroundPoint=i(1007),n.RotateAroundXY=i(159),t.exports=n},function(t,e){t.exports=function(t){var e=t.x1,i=t.y1,n=t.x2,r=t.y2,s=t.x3,o=t.y3;return Math.abs(((s-e)*(r-i)-(n-e)*(o-i))/2)}},function(t,e,i){var n=i(58);t.exports=function(t,e,i){var r=i*(Math.sqrt(3)/2);return new n(t,e,t+i/2,e+r,t-i/2,e+r)}},function(t,e,i){var n=i(74),r=i(58);t.exports=function(t,e,i,s,o){void 0===e&&(e=null),void 0===i&&(i=1),void 0===s&&(s=1),void 0===o&&(o=[]);for(var a,h,l,u,c,d,p,f,m,g=n(t,e),v=0;v<g.length;v+=3)a=g[v],h=g[v+1],l=g[v+2],u=t[2*a]*i,c=t[2*a+1]*s,d=t[2*h]*i,p=t[2*h+1]*s,f=t[2*l]*i,m=t[2*l+1]*s,o.push(new r(u,c,d,p,f,m));return o}},function(t,e,i){var n=i(58);t.exports=function(t,e,i,r){return void 0===r&&(r=i),new n(t,e,t,e-r,t+i,e)}},function(t,e,i){var n=i(332),r=i(333);t.exports=function(t,e,i,s){void 0===s&&(s=n);var o=s(t),a=e-o.x,h=i-o.y;return r(t,a,h)}},function(t,e,i){var n=i(5);function r(t,e,i,n){return t*n-e*i}t.exports=function(t,e){void 0===e&&(e=new n);var i=t.x3,s=t.y3,o=t.x1-i,a=t.y1-s,h=t.x2-i,l=t.y2-s,u=2*r(o,a,h,l),c=r(a,o*o+a*a,l,h*h+l*l),d=r(o,o*o+a*a,h,h*h+l*l);return e.x=i-c/u,e.y=s+d/u,e}},function(t,e,i){var n=i(76);t.exports=function(t,e){void 0===e&&(e=new n);var i,r,s=t.x1,o=t.y1,a=t.x2,h=t.y2,l=t.x3,u=t.y3,c=a-s,d=h-o,p=l-s,f=u-o,m=c*(s+a)+d*(o+h),g=p*(s+l)+f*(o+u),v=2*(c*(u-h)-d*(l-a));if(Math.abs(v)<1e-6){var y=Math.min(s,a,l),A=Math.min(o,h,u);i=.5*(Math.max(s,a,l)-y),r=.5*(Math.max(o,h,u)-A),e.x=y+i,e.y=A+r,e.radius=Math.sqrt(i*i+r*r)}else e.x=(f*m-d*g)/v,e.y=(c*g-p*m)/v,i=e.x-s,r=e.y-o,e.radius=Math.sqrt(i*i+r*r);return e}},function(t,e,i){var n=i(58);t.exports=function(t){return new n(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,e,i){var n=i(78);t.exports=function(t,e){return n(t,e.x,e.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,e){t.exports=function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2&&t.x3===e.x3&&t.y3===e.y3}},function(t,e,i){var n=i(43);t.exports=function(t){var e=t.getLineA(),i=t.getLineB(),r=t.getLineC();return n(e)+n(i)+n(r)}},function(t,e,i){var n=i(159),r=i(334);t.exports=function(t,e){var i=r(t);return n(t,i.x,i.y,e)}},function(t,e,i){var n=i(159);t.exports=function(t,e,i){return n(t,e.x,e.y,i)}},function(t,e,i){var n=i(69);t.exports=function(t){void 0===t&&(t=1024);var e,i=[],r=255,s=0,o=0;for(e=0;e<=255;e++)i.push({r:r,g:e,b:o,color:n(r,e,o)});for(s=255,e=255;e>=0;e--)i.push({r:e,g:s,b:o,color:n(e,s,o)});for(r=0,e=0;e<=255;e++,s--)i.push({r:r,g:s,b:e,color:n(r,s,e)});for(s=0,o=255,e=0;e<=255;e++,o--,r++)i.push({r:r,g:s,b:o,color:n(r,s,o)});if(1024===t)return i;var a=[],h=0,l=1024/t;for(e=0;e<t;e++)a.push(i[Math.floor(h)]),h+=l;return a}},function(t,e){t.exports=function(t){var e={r:t>>16&255,g:t>>8&255,b:255&t,a:255};return t>16777215&&(e.a=t>>>24),e}},function(t,e,i){var n=i(26),r=i(337);t.exports=function(t,e,i){var s=i,o=i,a=i;if(0!==e){var h=i<.5?i*(1+e):i+e-i*e,l=2*i-h;s=r(l,h,t+1/3),o=r(l,h,t),a=r(l,h,t-1/3)}return(new n).setGLTo(s,o,a,1)}},function(t,e,i){var n=i(114);t.exports=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1);for(var i=[],r=0;r<=359;r++)i.push(n(r/359,t,e));return i}},function(t,e,i){var n=i(82),r=function(t,e,i,r,s,o,a,h){void 0===a&&(a=100),void 0===h&&(h=0);var l=h/a;return{r:n(t,r,l),g:n(e,s,l),b:n(i,o,l)}};t.exports={RGBWithRGB:r,ColorWithRGB:function(t,e,i,n,s,o){return void 0===s&&(s=100),void 0===o&&(o=0),r(t.r,t.g,t.b,e,i,n,s,o)},ColorWithColor:function(t,e,i,n){return void 0===i&&(i=100),void 0===n&&(n=0),r(t.r,t.g,t.b,e.r,e.g,e.b,i,n)}}},function(t,e,i){var n=i(123),r=i(26);t.exports=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=255),new r(n(t,e),n(t,e),n(t,e))}},function(t,e,i){var n=i(336);t.exports=function(t,e,i,r,s){return void 0===r&&(r=255),void 0===s&&(s="#"),"#"===s?"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1,7):"0x"+n(r)+n(t)+n(e)+n(i)}},function(t,e,i){t.exports={Align:i(1016),BaseShader:i(360),Bounds:i(1021),Canvas:i(1025),Color:i(335),ColorMatrix:i(127),Masks:i(1028),RGB:i(1029)}},function(t,e,i){var n=i(160),r=i(18),s={In:i(1017),To:i(1019)};s=r(!1,s,n),t.exports=s},function(t,e,i){t.exports={BottomCenter:i(338),BottomLeft:i(339),BottomRight:i(340),Center:i(341),LeftCenter:i(343),QuickSet:i(1018),RightCenter:i(344),TopCenter:i(345),TopLeft:i(346),TopRight:i(347)}},function(t,e,i){var n=i(160),r=[];r[n.BOTTOM_CENTER]=i(338),r[n.BOTTOM_LEFT]=i(339),r[n.BOTTOM_RIGHT]=i(340),r[n.CENTER]=i(341),r[n.LEFT_CENTER]=i(343),r[n.RIGHT_CENTER]=i(344),r[n.TOP_CENTER]=i(345),r[n.TOP_LEFT]=i(346),r[n.TOP_RIGHT]=i(347),r[n.LEFT_BOTTOM]=r[n.BOTTOM_LEFT],r[n.LEFT_TOP]=r[n.TOP_LEFT],r[n.RIGHT_BOTTOM]=r[n.BOTTOM_RIGHT],r[n.RIGHT_TOP]=r[n.TOP_RIGHT],t.exports=function(t,e,i,n,s){return r[i](t,e,n,s)}},function(t,e,i){t.exports={BottomCenter:i(348),BottomLeft:i(349),BottomRight:i(350),LeftBottom:i(351),LeftCenter:i(352),LeftTop:i(353),QuickSet:i(1020),RightBottom:i(354),RightCenter:i(355),RightTop:i(356),TopCenter:i(357),TopLeft:i(358),TopRight:i(359)}},function(t,e,i){var n=i(160),r=[];r[n.BOTTOM_CENTER]=i(348),r[n.BOTTOM_LEFT]=i(349),r[n.BOTTOM_RIGHT]=i(350),r[n.LEFT_BOTTOM]=i(351),r[n.LEFT_CENTER]=i(352),r[n.LEFT_TOP]=i(353),r[n.RIGHT_BOTTOM]=i(354),r[n.RIGHT_CENTER]=i(355),r[n.RIGHT_TOP]=i(356),r[n.TOP_CENTER]=i(357),r[n.TOP_LEFT]=i(358),r[n.TOP_RIGHT]=i(359),t.exports=function(t,e,i,n,s){return r[i](t,e,n,s)}},function(t,e,i){t.exports={CenterOn:i(342),GetBottom:i(28),GetBounds:i(1022),GetCenterX:i(62),GetCenterY:i(65),GetLeft:i(29),GetOffsetX:i(1023),GetOffsetY:i(1024),GetRight:i(30),GetTop:i(31),SetBottom:i(38),SetCenterX:i(63),SetCenterY:i(64),SetLeft:i(39),SetRight:i(40),SetTop:i(41)}},function(t,e,i){var n=i(28),r=i(29),s=i(30),o=i(31);t.exports=function(t,e){void 0===e&&(e={});var i=r(t),a=o(t);return e.x=i,e.y=a,e.width=s(t)-i,e.height=n(t)-a,e}},function(t,e){t.exports=function(t){return t.width*t.originX}},function(t,e){t.exports=function(t){return t.height*t.originY}},function(t,e,i){t.exports={CanvasInterpolation:i(226),CanvasPool:i(17),Smoothing:i(85),TouchAction:i(1026),UserSelect:i(1027)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e="none"),t.style.msTouchAction=e,t.style["ms-touch-action"]=e,t.style["touch-action"]=e,t}},function(t,e){t.exports=function(t,e){return void 0===e&&(e="none"),["-webkit-","-khtml-","-moz-","-ms-",""].forEach((function(i){t.style[i+"user-select"]=e})),t.style["-webkit-touch-callout"]=e,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t}},function(t,e,i){t.exports={BitmapMask:i(177),GeometryMask:i(178)}},function(t,e,i){var n=i(0),r=i(4),s=new n({initialize:function(t,e,i){this._rgb=[0,0,0],this.onChangeCallback=r,this.dirty=!1,this.set(t,e,i)},set:function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this._rgb=[t,e,i],this.onChange(),this},equals:function(t,e,i){var n=this._rgb;return n.r===t&&n.g===e&&n.b===i},onChange:function(){this.dirty=!0;var t=this._rgb;this.onChangeCallback.call(this,t[0],t[1],t[2])},r:{get:function(){return this._rgb[0]},set:function(t){this._rgb[0]=t,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(t){this._rgb[1]=t,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(t){this._rgb[2]=t,this.onChange()}},destroy:function(){this.onChangeCallback=null}});t.exports=s},function(t,e,i){var n=i(11),r=i(18),s={Events:i(55),FileTypes:i(1031),File:i(12),FileTypesManager:i(3),GetURL:i(105),LoaderPlugin:i(1059),MergeXHRSettings:i(161),MultiFile:i(32),XHRLoader:i(361),XHRSettings:i(106)};s=r(!1,s,n),t.exports=s},function(t,e,i){t.exports={AnimationJSONFile:i(1032),AsepriteFile:i(1033),AtlasJSONFile:i(1034),AtlasXMLFile:i(1035),AudioFile:i(362),AudioSpriteFile:i(1037),BinaryFile:i(1038),BitmapFontFile:i(1039),CSSFile:i(1041),GLSLFile:i(1042),HTML5AudioFile:i(363),HTMLFile:i(1043),HTMLTextureFile:i(1044),ImageFile:i(46),JSONFile:i(42),MultiAtlasFile:i(1045),MultiScriptFile:i(1046),OBJFile:i(1047),PackFile:i(1048),PluginFile:i(1049),SceneFile:i(1050),ScenePluginFile:i(1051),ScriptFile:i(364),SpriteSheetFile:i(1052),SVGFile:i(1053),TextFile:i(163),TilemapCSVFile:i(1054),TilemapImpactFile:i(1055),TilemapJSONFile:i(1056),UnityAtlasFile:i(1057),VideoFile:i(1058),XMLFile:i(162)}},function(t,e,i){var n=i(0),r=i(3),s=i(42),o=i(55),a=new n({Extends:s,initialize:function(t,e,i,n,r){s.call(this,t,e,i,n,r),this.type="animationJSON"},onProcess:function(){this.loader.once(o.POST_PROCESS,this.onLoadComplete,this),s.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});r.register("animation",(function(t,e,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new a(this,t[r]));else this.addFile(new a(this,t,e,n,i));return this})),t.exports=a},function(t,e,i){var n=i(0),r=i(3),s=i(1),o=i(46),a=i(6),h=i(42),l=i(32),u=new n({Extends:l,initialize:function(t,e,i,n,r,u){var c,d;if(a(e)){var p=e;e=s(p,"key"),c=new o(t,{key:e,url:s(p,"textureURL"),extension:s(p,"textureExtension","png"),normalMap:s(p,"normalMap"),xhrSettings:s(p,"textureXhrSettings")}),d=new h(t,{key:e,url:s(p,"atlasURL"),extension:s(p,"atlasExtension","json"),xhrSettings:s(p,"atlasXhrSettings")})}else c=new o(t,e,i,r),d=new h(t,e,n,u);c.linkFile?l.call(this,t,"atlasjson",e,[c,d,c.linkFile]):l.call(this,t,"atlasjson",e,[c,d])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,e.data,i),e.addToCache(),this.complete=!0}}});r.register("aseprite",(function(t,e,i,n,r){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new u(this,t[o]),this.addFile(s.files);else s=new u(this,t,e,i,n,r),this.addFile(s.files);return this})),t.exports=u},function(t,e,i){var n=i(0),r=i(3),s=i(1),o=i(46),a=i(6),h=i(42),l=i(32),u=new n({Extends:l,initialize:function(t,e,i,n,r,u){var c,d;if(a(e)){var p=e;e=s(p,"key"),c=new o(t,{key:e,url:s(p,"textureURL"),extension:s(p,"textureExtension","png"),normalMap:s(p,"normalMap"),xhrSettings:s(p,"textureXhrSettings")}),d=new h(t,{key:e,url:s(p,"atlasURL"),extension:s(p,"atlasExtension","json"),xhrSettings:s(p,"atlasXhrSettings")})}else c=new o(t,e,i,r),d=new h(t,e,n,u);c.linkFile?l.call(this,t,"atlasjson",e,[c,d,c.linkFile]):l.call(this,t,"atlasjson",e,[c,d])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,e.data,i),e.pendingDestroy(),this.complete=!0}}});r.register("atlas",(function(t,e,i,n,r){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new u(this,t[o]),this.addFile(s.files);else s=new u(this,t,e,i,n,r),this.addFile(s.files);return this})),t.exports=u},function(t,e,i){var n=i(0),r=i(3),s=i(1),o=i(46),a=i(6),h=i(32),l=i(162),u=new n({Extends:h,initialize:function(t,e,i,n,r,u){var c,d;if(a(e)){var p=e;e=s(p,"key"),c=new o(t,{key:e,url:s(p,"textureURL"),extension:s(p,"textureExtension","png"),normalMap:s(p,"normalMap"),xhrSettings:s(p,"textureXhrSettings")}),d=new l(t,{key:e,url:s(p,"atlasURL"),extension:s(p,"atlasExtension","xml"),xhrSettings:s(p,"atlasXhrSettings")})}else c=new o(t,e,i,r),d=new l(t,e,n,u);c.linkFile?h.call(this,t,"atlasxml",e,[c,d,c.linkFile]):h.call(this,t,"atlasxml",e,[c,d])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(t.key,t.data,e.data,i),e.pendingDestroy(),this.complete=!0}}});r.register("atlasXML",(function(t,e,i,n,r){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new u(this,t[o]),this.addFile(s.files);else s=new u(this,t,e,i,n,r),this.addFile(s.files);return this})),t.exports=u},function(t,e){t.exports=function(t){var e="";try{window.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):(e=new ActiveXObject("Microsoft.XMLDOM")).loadXML(t)}catch(t){e=null}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length?e:null}},function(t,e,i){var n=i(362),r=i(0),s=i(3),o=i(1),a=i(6),h=i(42),l=i(32),u=new r({Extends:l,initialize:function(t,e,i,r,s,u,c){if(a(e)){var d=e;e=o(d,"key"),i=o(d,"jsonURL"),r=o(d,"audioURL"),s=o(d,"audioConfig"),u=o(d,"audioXhrSettings"),c=o(d,"jsonXhrSettings")}var p;if(r){var f=n.create(t,e,r,s,u);f&&(p=new h(t,e,i,c),l.call(this,t,"audiosprite",e,[f,p]),this.config.resourceLoad=!1)}else p=new h(t,e,i,c),l.call(this,t,"audiosprite",e,[p]),this.config.resourceLoad=!0,this.config.audioConfig=s,this.config.audioXhrSettings=u},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,this.config.resourceLoad&&"json"===t.type&&t.data.hasOwnProperty("resources"))){var e=t.data.resources,i=o(this.config,"audioConfig"),r=o(this.config,"audioXhrSettings"),s=n.create(this.loader,t.key,e,i,r);s&&(this.addToMultiFile(s),this.loader.addFile(s))}},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1];t.addToCache(),e.addToCache(),this.complete=!0}}});s.register("audioSprite",(function(t,e,i,n,r,s){var o,a=this.systems.game,h=a.config.audio,l=a.device.audio;if(h&&h.noAudio||!l.webAudio&&!l.audioData)return this;if(Array.isArray(t))for(var c=0;c<t.length;c++)(o=new u(this,t[c])).files&&this.addFile(o.files);else(o=new u(this,t,e,i,n,r,s)).files&&this.addFile(o.files);return this}))},function(t,e,i){var n=i(0),r=i(11),s=i(12),o=i(3),a=i(1),h=i(6),l=new n({Extends:s,initialize:function(t,e,i,n,r){var o="bin";if(h(e)){var l=e;e=a(l,"key"),i=a(l,"url"),n=a(l,"xhrSettings"),o=a(l,"extension",o),r=a(l,"dataType",r)}var u={type:"binary",cache:t.cacheManager.binary,extension:o,responseType:"arraybuffer",key:e,url:i,xhrSettings:n,config:{dataType:r}};s.call(this,t,u)},onProcess:function(){this.state=r.FILE_PROCESSING;var t=this.config.dataType;this.data=t?new t(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});o.register("binary",(function(t,e,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new l(this,t[r]));else this.addFile(new l(this,t,e,n,i));return this})),t.exports=l},function(t,e,i){var n=i(0),r=i(3),s=i(1),o=i(46),a=i(6),h=i(32),l=i(1040),u=i(162),c=new n({Extends:h,initialize:function(t,e,i,n,r,l){var c,d;if(a(e)){var p=e;e=s(p,"key"),c=new o(t,{key:e,url:s(p,"textureURL"),extension:s(p,"textureExtension","png"),normalMap:s(p,"normalMap"),xhrSettings:s(p,"textureXhrSettings")}),d=new u(t,{key:e,url:s(p,"fontDataURL"),extension:s(p,"fontDataExtension","xml"),xhrSettings:s(p,"fontDataXhrSettings")})}else c=new o(t,e,i,r),d=new u(t,e,n,l);c.linkFile?h.call(this,t,"bitmapfont",e,[c,d,c.linkFile]):h.call(this,t,"bitmapfont",e,[c,d])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1];t.addToCache(),e.pendingDestroy();var i=t.cache.get(t.key),n=l(e.data,t.cache.getFrame(t.key),0,0,i);this.loader.cacheManager.bitmapFont.add(t.key,{data:n,texture:t.key,frame:null}),this.complete=!0}}});r.register("bitmapFont",(function(t,e,i,n,r){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new c(this,t[o]),this.addFile(s.files);else s=new c(this,t,e,i,n,r),this.addFile(s.files);return this})),t.exports=c},function(t,e){function i(t,e){return parseInt(t.getAttribute(e),10)}t.exports=function(t,e,n,r,s){void 0===n&&(n=0),void 0===r&&(r=0);var o=e.cutX,a=e.cutY,h=e.source.width,l=e.source.height,u=e.sourceIndex,c={},d=t.getElementsByTagName("info")[0],p=t.getElementsByTagName("common")[0];c.font=d.getAttribute("face"),c.size=i(d,"size"),c.lineHeight=i(p,"lineHeight")+r,c.chars={};var f=t.getElementsByTagName("char"),m=void 0!==e&&e.trimmed;if(m)var g=e.height,v=e.width;for(var y=0;y<f.length;y++){var A=f[y],x=i(A,"id"),w=String.fromCharCode(x),b=i(A,"x"),S=i(A,"y"),E=i(A,"width"),T=i(A,"height");m&&(b<v&&(v=b),S<g&&(g=S)),m&&0!==g&&0!==v&&(b-=e.x,S-=e.y);var _=(o+b)/h,M=(a+S)/l,C=(o+b+E)/h,P=(a+S+T)/l;if(c.chars[x]={x:b,y:S,width:E,height:T,centerX:Math.floor(E/2),centerY:Math.floor(T/2),xOffset:i(A,"xoffset"),yOffset:i(A,"yoffset"),xAdvance:i(A,"xadvance")+n,data:{},kerning:{},u0:_,v0:M,u1:C,v1:P},s&&0!==E&&0!==T){var R=s.add(w,u,b,S,E,T);R&&R.setUVs(E,T,_,M,C,P)}}var O=t.getElementsByTagName("kerning");for(y=0;y<O.length;y++){var L=O[y],I=i(L,"first"),D=i(L,"second"),B=i(L,"amount");c.chars[D].kerning[I]=B}return c}},function(t,e,i){var n=i(0),r=i(11),s=i(12),o=i(3),a=i(1),h=i(6),l=new n({Extends:s,initialize:function(t,e,i,n){var r="css";if(h(e)){var o=e;e=a(o,"key"),i=a(o,"url"),n=a(o,"xhrSettings"),r=a(o,"extension",r)}var l={type:"script",cache:!1,extension:r,responseType:"text",key:e,url:i,xhrSettings:n};s.call(this,t,l)},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("css",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){var n=i(0),r=i(11),s=i(12),o=i(3),a=i(1),h=i(6),l=i(360),u=new n({Extends:s,initialize:function(t,e,i,n,r){var o="glsl";if(h(e)){var l=e;e=a(l,"key"),i=a(l,"url"),n=a(l,"shaderType","fragment"),r=a(l,"xhrSettings"),o=a(l,"extension",o)}else void 0===n&&(n="fragment");var u={type:"glsl",cache:t.cacheManager.shader,extension:o,responseType:"text",key:e,url:i,config:{shaderType:n},xhrSettings:r};s.call(this,t,u)},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.split("\n"),e=this.extractBlock(t,0);if(e)for(;e;){var i=this.getShaderName(e.header),n=this.getShaderType(e.header),r=this.getShaderUniforms(e.header),s=e.shader;if(this.cache.has(i)){var o=this.cache.get(i);"fragment"===n?o.fragmentSrc=s:o.vertexSrc=s,o.uniforms||(o.uniforms=r)}else"fragment"===n?this.cache.add(i,new l(i,s,"",r)):this.cache.add(i,new l(i,"",s,r));e=this.extractBlock(t,e.offset)}else"fragment"===this.config.shaderType?this.cache.add(this.key,new l(this.key,this.data)):this.cache.add(this.key,new l(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(t){for(var e=0;e<t.length;e++){var i=t[e].trim();if("name:"===i.substring(0,5))return i.substring(5).trim()}return this.key},getShaderType:function(t){for(var e=0;e<t.length;e++){var i=t[e].trim();if("type:"===i.substring(0,5))return i.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(t){for(var e={},i=0;i<t.length;i++){var n=t[i].trim();if("uniform."===n.substring(0,8)){var r=n.indexOf(":");if(r){var s=n.substring(8,r);try{e[s]=JSON.parse(n.substring(r+1))}catch(t){}}}}return e},extractBlock:function(t,e){for(var i=-1,n=-1,r=-1,s=!1,o=!1,a=[],h=[],l=e;l<t.length;l++){var u=t[l].trim();if("---"===u)if(-1===i)i=l,s=!0;else{if(!s){o=!1;break}n=l,s=!1,o=!0}else s?a.push(u):o&&(h.push(u),r=l)}return s||-1===n?null:{header:a,shader:h.join("\n"),offset:r}}});o.register("glsl",(function(t,e,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new u(this,t[r]));else this.addFile(new u(this,t,e,i,n));return this})),t.exports=u},function(t,e,i){var n=i(0),r=i(11),s=i(12),o=i(3),a=i(1),h=i(6),l=new n({Extends:s,initialize:function(t,e,i,n){var r="html";if(h(e)){var o=e;e=a(o,"key"),i=a(o,"url"),n=a(o,"xhrSettings"),r=a(o,"extension",r)}var l={type:"text",cache:t.cacheManager.html,extension:r,responseType:"text",key:e,url:i,xhrSettings:n};s.call(this,t,l)},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("html",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){var n=i(0),r=i(11),s=i(12),o=i(3),a=i(1),h=i(6),l=new n({Extends:s,initialize:function(t,e,i,n,r,o){void 0===n&&(n=512),void 0===r&&(r=512);var l="html";if(h(e)){var u=e;e=a(u,"key"),i=a(u,"url"),o=a(u,"xhrSettings"),l=a(u,"extension",l),n=a(u,"width",n),r=a(u,"height",r)}var c={type:"html",cache:t.textureManager,extension:l,responseType:"text",key:e,url:i,xhrSettings:o,config:{width:n,height:r}};s.call(this,t,c)},onProcess:function(){this.state=r.FILE_PROCESSING;var t=this.config.width,e=this.config.height,i=[];i.push('<svg width="'+t+'px" height="'+e+'px" viewBox="0 0 '+t+" "+e+'" xmlns="http://www.w3.org/2000/svg">'),i.push('<foreignObject width="100%" height="100%">'),i.push('<body xmlns="http://www.w3.org/1999/xhtml">'),i.push(this.xhrLoader.responseText),i.push("</body>"),i.push("</foreignObject>"),i.push("</svg>");var n=[i.join("\n")],o=this;try{var a=new window.Blob(n,{type:"image/svg+xml;charset=utf-8"})}catch(t){return o.state=r.FILE_ERRORED,void o.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){s.revokeObjectURL(o.data),o.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(o.data),o.onProcessError()},s.createObjectURL(this.data,a,"image/svg+xml")},addToCache:function(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});o.register("htmlTexture",(function(t,e,i,n,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new l(this,t[s]));else this.addFile(new l(this,t,e,i,n,r));return this})),t.exports=l},function(t,e,i){var n=i(0),r=i(3),s=i(1),o=i(46),a=i(6),h=i(42),l=i(32),u=new n({Extends:l,initialize:function(t,e,i,n,r,o,u){if(a(e)){var c=e;e=s(c,"key"),i=s(c,"url",!1)?s(c,"url"):s(c,"atlasURL"),o=s(c,"xhrSettings"),n=s(c,"path"),r=s(c,"baseURL"),u=s(c,"textureXhrSettings")}var d=new h(t,e,i,o);l.call(this,t,"multiatlas",e,[d]),this.config.path=n,this.config.baseURL=r,this.config.textureXhrSettings=u},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"json"===t.type&&t.data.hasOwnProperty("textures"))){var e=t.data.textures,i=this.config,n=this.loader,r=n.baseURL,a=n.path,h=n.prefix,l=s(i,"baseURL",this.baseURL),u=s(i,"path",this.path),c=s(i,"prefix",this.prefix),d=s(i,"textureXhrSettings");n.setBaseURL(l),n.setPath(u),n.setPrefix(c);for(var p=0;p<e.length;p++){var f=e[p].image,m="MA"+this.multiKeyIndex+"_"+f,g=new o(n,m,f,d);if(this.addToMultiFile(g),n.addFile(g),e[p].normalMap){var v=new o(n,m,e[p].normalMap,d);v.type="normalMap",g.setLink(v),this.addToMultiFile(v),n.addFile(v)}}n.setBaseURL(r),n.setPath(a),n.setPrefix(h)}},addToCache:function(){if(this.isReadyToProcess()){for(var t=this.files[0],e=[],i=[],n=[],r=1;r<this.files.length;r++){var s=this.files[r];if("normalMap"!==s.type)for(var o=s.key.indexOf("_"),a=s.key.substr(o+1),h=s.data,l=0;l<t.data.textures.length;l++){var u=t.data.textures[l];if(u.image===a){i.push(h),e.push(u),s.linkFile&&n.push(s.linkFile.data);break}}}for(0===n.length&&(n=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,i,e,n),this.complete=!0,r=0;r<this.files.length;r++)this.files[r].pendingDestroy()}}});r.register("multiatlas",(function(t,e,i,n,r){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new u(this,t[o]),this.addFile(s.files);else s=new u(this,t,e,i,n,r),this.addFile(s.files);return this})),t.exports=u},function(t,e,i){var n=i(0),r=i(3),s=i(1),o=i(6),a=i(32),h=i(364),l=new n({Extends:a,initialize:function(t,e,i,n){var r="js",l=[];if(o(e)){var u=e;e=s(u,"key"),i=s(u,"url"),n=s(u,"xhrSettings"),r=s(u,"extension",r)}Array.isArray(i)||(i=[i]);for(var c=0;c<i.length;c++){var d=new h(t,{key:e+"_"+c.toString(),url:i[c],extension:r,xhrSettings:n});d.onProcess=function(){this.onProcessComplete()},l.push(d)}a.call(this,t,"scripts",e,l)},addToCache:function(){if(this.isReadyToProcess()){for(var t=0;t<this.files.length;t++){var e=this.files[t];e.data=document.createElement("script"),e.data.language="javascript",e.data.type="text/javascript",e.data.defer=!1,e.data.text=e.xhrLoader.responseText,document.head.appendChild(e.data)}this.complete=!0}}});r.register("scripts",(function(t,e,i){var n;if(Array.isArray(t))for(var r=0;r<t.length;r++)n=new l(this,t[r]),this.addFile(n.files);else n=new l(this,t,e,i),this.addFile(n.files);return this})),t.exports=l},function(t,e,i){var n=i(0),r=i(3),s=i(1),o=i(6),a=i(32),h=i(324),l=i(325),u=i(163),c=new n({Extends:a,initialize:function(t,e,i,n,r,h){var l,c,d=t.cacheManager.obj;if(o(e)){var p=e;e=s(p,"key"),l=new u(t,{key:e,type:"obj",cache:d,url:s(p,"url"),extension:s(p,"extension","obj"),xhrSettings:s(p,"xhrSettings"),config:{flipUV:s(p,"flipUV",r)}}),(n=s(p,"matURL"))&&(c=new u(t,{key:e,type:"mat",cache:d,url:n,extension:s(p,"matExtension","mat"),xhrSettings:s(p,"xhrSettings")}))}else l=new u(t,{key:e,url:i,type:"obj",cache:d,extension:"obj",xhrSettings:h,config:{flipUV:r}}),n&&(c=new u(t,{key:e,url:n,type:"mat",cache:d,extension:"mat",xhrSettings:h}));a.call(this,t,"obj",e,[l,c])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],i=h(t.data,t.config.flipUV);e&&(i.materials=l(e.data)),t.cache.add(t.key,i),this.complete=!0}}});r.register("obj",(function(t,e,i,n,r){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new c(this,t[o]),this.addFile(s.files);else s=new c(this,t,e,i,n,r),this.addFile(s.files);return this})),t.exports=c},function(t,e,i){var n=i(0),r=i(11),s=i(3),o=i(42),a=new n({Extends:o,initialize:function(t,e,i,n,r){o.call(this,t,e,i,n,r),this.type="packfile"},onProcess:function(){this.state!==r.FILE_POPULATED&&(this.state=r.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});s.register("pack",(function(t,e,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new a(this,t[r]));else this.addFile(new a(this,t,e,n,i));return this})),t.exports=a},function(t,e,i){var n=i(0),r=i(11),s=i(12),o=i(3),a=i(1),h=i(6),l=new n({Extends:s,initialize:function(t,e,i,n,o,l){var u="js";if(h(e)){var c=e;e=a(c,"key"),i=a(c,"url"),l=a(c,"xhrSettings"),u=a(c,"extension",u),n=a(c,"start"),o=a(c,"mapping")}var d={type:"plugin",cache:!1,extension:u,responseType:"text",key:e,url:i,xhrSettings:l,config:{start:n,mapping:o}};s.call(this,t,d),"function"==typeof i&&(this.data=i,this.state=r.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,e=this.config,i=a(e,"start",!1),n=a(e,"mapping",null);if(this.state===r.FILE_POPULATED)t.install(this.key,this.data,i,n);else{this.state=r.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var s=t.install(this.key,window[this.key],i,n);(i||n)&&(this.loader.systems[n]=s,this.loader.scene[n]=s)}this.onProcessComplete()}});o.register("plugin",(function(t,e,i,n,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new l(this,t[s]));else this.addFile(new l(this,t,e,i,n,r));return this})),t.exports=l},function(t,e,i){var n=i(0),r=i(11),s=i(12),o=i(3),a=i(1),h=i(6),l=new n({Extends:s,initialize:function(t,e,i,n){var r="js";if(h(e)){var o=e;e=a(o,"key"),i=a(o,"url"),n=a(o,"xhrSettings"),r=a(o,"extension",r)}var l={type:"text",extension:r,responseType:"text",key:e,url:i,xhrSettings:n};s.call(this,t,l)},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);"),e=eval;this.loader.sceneManager.add(this.key,e(t)),this.complete=!0}});o.register("sceneFile",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){var n=i(0),r=i(11),s=i(12),o=i(3),a=i(1),h=i(6),l=new n({Extends:s,initialize:function(t,e,i,n,o,l){var u="js";if(h(e)){var c=e;e=a(c,"key"),i=a(c,"url"),l=a(c,"xhrSettings"),u=a(c,"extension",u),n=a(c,"systemKey"),o=a(c,"sceneKey")}var d={type:"scenePlugin",cache:!1,extension:u,responseType:"text",key:e,url:i,xhrSettings:l,config:{systemKey:n,sceneKey:o}};s.call(this,t,d),"function"==typeof i&&(this.data=i,this.state=r.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,e=this.config,i=this.key,n=a(e,"systemKey",i),s=a(e,"sceneKey",i);this.state===r.FILE_POPULATED?t.installScenePlugin(n,this.data,s,this.loader.scene,!0):(this.state=r.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),t.installScenePlugin(n,window[this.key],s,this.loader.scene,!0)),this.onProcessComplete()}});o.register("scenePlugin",(function(t,e,i,n,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new l(this,t[s]));else this.addFile(new l(this,t,e,i,n,r));return this})),t.exports=l},function(t,e,i){var n=i(0),r=i(3),s=i(46),o=new n({Extends:s,initialize:function(t,e,i,n,r){s.call(this,t,e,i,r,n),this.type="spritesheet"},addToCache:function(){var t=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(t)}});r.register("spritesheet",(function(t,e,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new o(this,t[r]));else this.addFile(new o(this,t,e,i,n));return this})),t.exports=o},function(t,e,i){var n=i(0),r=i(11),s=i(12),o=i(3),a=i(1),h=i(6),l=new n({Extends:s,initialize:function(t,e,i,n,r){var o="svg";if(h(e)){var l=e;e=a(l,"key"),i=a(l,"url"),n=a(l,"svgConfig",{}),r=a(l,"xhrSettings"),o=a(l,"extension",o)}var u={type:"svg",cache:t.textureManager,extension:o,responseType:"text",key:e,url:i,xhrSettings:r,config:{width:a(n,"width"),height:a(n,"height"),scale:a(n,"scale")}};s.call(this,t,u)},onProcess:function(){this.state=r.FILE_PROCESSING;var t=this.xhrLoader.responseText,e=[t],i=this.config.width,n=this.config.height,o=this.config.scale;t:if(i&&n||o){var a=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("svg")[0],h=a.hasAttribute("viewBox"),l=parseFloat(a.getAttribute("width")),u=parseFloat(a.getAttribute("height"));if(!h&&l&&u)a.setAttribute("viewBox","0  0 "+l+" "+u);else if(h&&!l&&!u){var c=a.getAttribute("viewBox").split(/\s+|,/);l=c[2],u=c[3]}if(o){if(!l||!u)break t;i=l*o,n=u*o}a.setAttribute("width",i.toString()+"px"),a.setAttribute("height",n.toString()+"px"),e=[(new XMLSerializer).serializeToString(a)]}try{var d=new window.Blob(e,{type:"image/svg+xml;charset=utf-8"})}catch(t){return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var p=this,f=!1;this.data.onload=function(){f||s.revokeObjectURL(p.data),p.onProcessComplete()},this.data.onerror=function(){f?p.onProcessError():(f=!0,s.revokeObjectURL(p.data),p.data.src="data:image/svg+xml,"+encodeURIComponent(e.join("")))},s.createObjectURL(this.data,d,"image/svg+xml")},addToCache:function(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});o.register("svg",(function(t,e,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new l(this,t[r]));else this.addFile(new l(this,t,e,i,n));return this})),t.exports=l},function(t,e,i){var n=i(0),r=i(11),s=i(12),o=i(3),a=i(1),h=i(6),l=i(164),u=new n({Extends:s,initialize:function(t,e,i,n){var r="csv";if(h(e)){var o=e;e=a(o,"key"),i=a(o,"url"),n=a(o,"xhrSettings"),r=a(o,"extension",r)}var u={type:"tilemapCSV",cache:t.cacheManager.tilemap,extension:r,responseType:"text",key:e,url:i,xhrSettings:n};s.call(this,t,u),this.tilemapFormat=l.CSV},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});o.register("tilemapCSV",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new u(this,t[n]));else this.addFile(new u(this,t,e,i));return this})),t.exports=u},function(t,e,i){var n=i(0),r=i(3),s=i(42),o=i(164),a=new n({Extends:s,initialize:function(t,e,i,n){s.call(this,t,e,i,n),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:o.WELTMEISTER,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});r.register("tilemapImpact",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new a(this,t[n]));else this.addFile(new a(this,t,e,i));return this})),t.exports=a},function(t,e,i){var n=i(0),r=i(3),s=i(42),o=i(164),a=new n({Extends:s,initialize:function(t,e,i,n){s.call(this,t,e,i,n),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:o.TILED_JSON,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});r.register("tilemapTiledJSON",(function(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new a(this,t[n]));else this.addFile(new a(this,t,e,i));return this})),t.exports=a},function(t,e,i){var n=i(0),r=i(3),s=i(1),o=i(46),a=i(6),h=i(32),l=i(163),u=new n({Extends:h,initialize:function(t,e,i,n,r,u){var c,d;if(a(e)){var p=e;e=s(p,"key"),c=new o(t,{key:e,url:s(p,"textureURL"),extension:s(p,"textureExtension","png"),normalMap:s(p,"normalMap"),xhrSettings:s(p,"textureXhrSettings")}),d=new l(t,{key:e,url:s(p,"atlasURL"),extension:s(p,"atlasExtension","txt"),xhrSettings:s(p,"atlasXhrSettings")})}else c=new o(t,e,i,r),d=new l(t,e,n,u);c.linkFile?h.call(this,t,"unityatlas",e,[c,d,c.linkFile]):h.call(this,t,"unityatlas",e,[c,d])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(t.key,t.data,e.data,i),e.pendingDestroy(),this.complete=!0}}});r.register("unityAtlas",(function(t,e,i,n,r){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new u(this,t[o]),this.addFile(s.files);else s=new u(this,t,e,i,n,r),this.addFile(s.files);return this})),t.exports=u},function(t,e,i){var n=i(0),r=i(11),s=i(12),o=i(3),a=i(105),h=i(1),l=i(6),u=new n({Extends:s,initialize:function(t,e,i,n,r,o,a){void 0===n&&(n="loadeddata"),void 0===r&&(r=!1),void 0===o&&(o=!1),"loadeddata"!==n&&"canplay"!==n&&"canplaythrough"!==n&&(n="loadeddata");var h={type:"video",cache:t.cacheManager.video,extension:i.type,responseType:"blob",key:e,url:i.url,xhrSettings:a,config:{loadEvent:n,asBlob:r,noAudio:o}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),s.call(this,t,h)},onProcess:function(){if(this.state=r.FILE_PROCESSING,this.config.asBlob){var t=this.createVideoElement();this.data=t;var e=this;this.data.onloadeddata=function(){e.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(e.data),e.onProcessError()},s.createObjectURL(t,this.xhrLoader.response,""),t.load()}else this.onProcessComplete()},createVideoElement:function(){var t=document.createElement("video");return t.controls=!1,t.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(t.muted=!0,t.defaultMuted=!0,t.setAttribute("autoplay","autoplay")),t.setAttribute("playsinline","playsinline"),t.setAttribute("preload","auto"),t},onVideoLoadHandler:function(t){var e=t.target;e.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),e.removeEventListener("error",this.onErrorCallback,!0),this.data=e,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(t){var e=t.target;e&&(e.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),e.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var t=this.config.loadEvent;if(this.config.asBlob)s.prototype.load.call(this);else{this.percentComplete=0;var e=this.createVideoElement();e.addEventListener(t,this.onLoadCallback,!0),e.addEventListener("error",this.onErrorCallback,!0),e.src=a(this,this.loader.baseURL),e.load()}}});u.create=function(t,e,i,n,r,s,o){var a=t.systems.game;l(e)&&(i=h(e,"url",[]),n=h(e,"loadEvent","loadeddata"),r=h(e,"asBlob",!1),s=h(e,"noAudio",!1),o=h(e,"xhrSettings"),e=h(e,"key"));var c=u.getVideoURL(a,i);if(c)return new u(t,e,c,n,r,s,o)},u.getVideoURL=function(t,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var n,r=h(e[i],"url",e[i]);if(0===r.indexOf("blob:"))return{url:r,type:""};if(n=0===r.indexOf("data:")?r.split(",")[0].match(/\/(.*?);/):r.match(/\.([a-zA-Z0-9]+)($|\?)/),n=h(e[i],"type",n?n[1]:"").toLowerCase(),t.device.video[n])return{url:r,type:n}}return null},o.register("video",(function(t,e,i,n,r,s){var o;if(Array.isArray(t))for(var a=0;a<t.length;a++)(o=u.create(this,t[a]))&&this.addFile(o);else(o=u.create(this,t,e,i,n,r,s))&&this.addFile(o);return this})),t.exports=u},function(t,e,i){var n=i(0),r=i(11),s=i(1060),o=i(9),a=i(55),h=i(3),l=i(1),u=i(16),c=i(15),d=i(106),p=new n({Extends:o,initialize:function(t){o.call(this);var e=t.sys.game.config,i=t.sys.settings.loader;this.scene=t,this.systems=t.sys,this.cacheManager=t.sys.cache,this.textureManager=t.sys.textures,this.sceneManager=t.sys.game.scene,h.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(l(i,"baseURL",e.loaderBaseURL)),this.setPath(l(i,"path",e.loaderPath)),this.setPrefix(l(i,"prefix",e.loaderPrefix)),this.maxParallelDownloads=l(i,"maxParallelDownloads",e.loaderMaxParallelDownloads),this.xhr=d(l(i,"responseType",e.loaderResponseType),l(i,"async",e.loaderAsync),l(i,"user",e.loaderUser),l(i,"password",e.loaderPassword),l(i,"timeout",e.loaderTimeout),l(i,"withCredentials",e.loaderWithCredentials)),this.crossOrigin=l(i,"crossOrigin",e.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new s,this.inflight=new s,this.queue=new s,this._deleteQueue=new s,this.totalFailed=0,this.totalComplete=0,this.state=r.LOADER_IDLE,this.multiKeyIndex=0,t.sys.events.once(c.BOOT,this.boot,this),t.sys.events.on(c.START,this.pluginStart,this)},boot:function(){this.systems.events.once(c.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(c.SHUTDOWN,this.shutdown,this)},setBaseURL:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.baseURL=t,this},setPath:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.path=t,this},setPrefix:function(t){return void 0===t&&(t=""),this.prefix=t,this},setCORS:function(t){return this.crossOrigin=t,this},addFile:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];this.keyExists(i)||(this.list.set(i),this.emit(a.ADD,i.key,i.type,this,i),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(t){var e=t.hasCacheConflict();return e||this.list.iterate((function(i){if(i.type===t.type&&i.key===t.key)return e=!0,!1})),!e&&this.isLoading()&&(this.inflight.iterate((function(i){if(i.type===t.type&&i.key===t.key)return e=!0,!1})),this.queue.iterate((function(i){if(i.type===t.type&&i.key===t.key)return e=!0,!1}))),e},addPack:function(t,e){e&&t.hasOwnProperty(e)&&(t={packKey:t[e]});var i=0,n=this.baseURL,r=this.path,s=this.prefix;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var a=t[o],h=l(a,"baseURL",n),u=l(a,"path",r),c=l(a,"prefix",s),d=l(a,"files",null),p=l(a,"defaultType","void");if(Array.isArray(d)){this.setBaseURL(h),this.setPath(u),this.setPrefix(c);for(var f=0;f<d.length;f++){var m=d[f],g=m.hasOwnProperty("type")?m.type:p;this[g]&&(this[g](m),i++)}}}return this.setBaseURL(n),this.setPath(r),this.setPrefix(s),i>0},isLoading:function(){return this.state===r.LOADER_LOADING||this.state===r.LOADER_PROCESSING},isReady:function(){return this.state===r.LOADER_IDLE||this.state===r.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(a.START,this),0===this.list.size?this.loadComplete():(this.state=r.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(c.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(a.PROGRESS,this.progress)},update:function(){this.state===r.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each((function(t){if((t.state===r.FILE_POPULATED||t.state===r.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(t),this.list.delete(t),t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load()),this.inflight.size===this.maxParallelDownloads)return!1}),this)},nextFile:function(t,e){this.inflight&&(this.inflight.delete(t),this.updateProgress(),e?(this.totalComplete++,this.queue.set(t),this.emit(a.FILE_LOAD,t),t.onProcess()):(this.totalFailed++,this._deleteQueue.set(t),this.emit(a.FILE_LOAD_ERROR,t),this.fileProcessComplete(t)))},fileProcessComplete:function(t){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(t.state===r.FILE_ERRORED?t.multiFile&&t.multiFile.onFileFailed(t):t.state===r.FILE_COMPLETE&&(t.multiFile?t.multiFile.isReadyToProcess()&&t.multiFile.addToCache():t.addToCache()),this.queue.delete(t),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function(){this.emit(a.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=r.LOADER_COMPLETE,this.systems.events.off(c.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(a.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(t){this._deleteQueue.set(t)},saveJSON:function(t,e){return this.save(JSON.stringify(t),e)},save:function(t,e,i){void 0===e&&(e="file.json"),void 0===i&&(i="application/json");var n=new Blob([t],{type:i}),r=URL.createObjectURL(n),s=document.createElement("a");return s.download=e,s.textContent="Download "+e,s.href=r,s.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var t=this.systems.game.config,e=this.systems.settings.loader;this.setBaseURL(l(e,"baseURL",t.loaderBaseURL)),this.setPath(l(e,"path",t.loaderPath)),this.setPrefix(l(e,"prefix",t.loaderPrefix)),this.state=r.LOADER_IDLE},shutdown:function(){this.reset(),this.state=r.LOADER_SHUTDOWN,this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=r.LOADER_DESTROYED,this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});u.register("Loader",p,"load"),t.exports=p},function(t,e,i){var n=new(i(0))({initialize:function(t){if(this.entries=[],Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e])},set:function(t){return-1===this.entries.indexOf(t)&&this.entries.push(t),this},get:function(t,e){for(var i=0;i<this.entries.length;i++){var n=this.entries[i];if(n[t]===e)return n}},getArray:function(){return this.entries.slice(0)},delete:function(t){var e=this.entries.indexOf(t);return e>-1&&this.entries.splice(e,1),this},dump:function(){for(var t=0;t<this.entries.length;t++)this.entries[t]},each:function(t,e){var i,n=this.entries.slice(),r=n.length;if(e)for(i=0;i<r&&!1!==t.call(e,n[i],i);i++);else for(i=0;i<r&&!1!==t(n[i],i);i++);return this},iterate:function(t,e){var i,n=this.entries.length;if(e)for(i=0;i<n&&!1!==t.call(e,this.entries[i],i);i++);else for(i=0;i<n&&!1!==t(this.entries[i],i);i++);return this},iterateLocal:function(t){var e,i=[];for(e=1;e<arguments.length;e++)i.push(arguments[e]);var n=this.entries.length;for(e=0;e<n;e++){var r=this.entries[e];r[t].apply(r,i)}return this},clear:function(){return this.entries.length=0,this},contains:function(t){return this.entries.indexOf(t)>-1},union:function(t){var e=new n;return t.entries.forEach((function(t){e.set(t)})),this.entries.forEach((function(t){e.set(t)})),e},intersect:function(t){var e=new n;return this.entries.forEach((function(i){t.contains(i)&&e.set(i)})),e},difference:function(t){var e=new n;return this.entries.forEach((function(i){t.contains(i)||e.set(i)})),e},size:{get:function(){return this.entries.length},set:function(t){return t<this.entries.length?this.entries.length=t:this.entries.length}}});t.exports=n}])},"object"==o(e)&&"object"==o(t)?t.exports=s():(n=[],void 0===(r="function"==typeof(i=s)?i.apply(e,n):i)||(t.exports=r))}).call(this,i(6)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t){t.exports=JSON.parse('{"resources":["output.ogg","output.m4a","output.mp3","output.ac3"],"spritemap":{"carving":{"start":0,"end":0.19201814058956915,"loop":false},"chisel_broken":{"start":2,"end":3.944013605442177,"loop":false},"coin":{"start":5,"end":5.6,"loop":false},"finish_area":{"start":7,"end":8.535986394557824,"loop":false},"finish_cube":{"start":10,"end":11.227755102040817,"loop":false},"wall_break":{"start":13,"end":13.888004535147392,"loop":false}}}')},function(t,e){t.exports="data:audio/mp4;base64,AAAAGGZ0eXBNNEEgAAACAGlzb21pc28yAAAACGZyZWUAAZ2+bWRhdN4CAExhdmM1OC41Mi4xMDIAAjCADgDknbA/F+SRV+or9FftNcdAGfkSS2X5t+wXnE355+gKCQEhPINIRYAAqGWmjjhgBQOzKf4sAeTfI/+AAptfTNlAAAWwNDRkMPXeMzgAABw01F+D1PkfucAKA0+WgiMIf9wABpYAsLBxgQG4RFOY+v2mDlIAAABfGEUQRgp1XBqR3nxfuoAHADVsdpPLDRpmetC9l6D3QAT4/zfHzGh4fwn0vNyiAI034IUAVuWIfD/5nkPjN20n132wT+FXtQn5R6WT0uRsbAkKUCzBkBB/cWmH8UQOP+xNvMeTx2sO7APGGNxupxOeiAybcc2QBkCC2B43/n/b3nsTSE81CAmQP8tWohRhfnISE6ZCc8KRP7mc3JfXH8XBBuuJeG/YhPIcpIbKSQAslClEoweu1e4yIRz4XkUiod0i/i5AT8jMiJmK6cHR9W1B539ytv4kiULk/zbaN/x0do31aWgc29pXUKyxwKDstbGX4AD++C/morhYoAAAAAAD9YAR4b7WI/bz7hEfk/6WI8z5SR7534j3zxaR86eYCPpv4QEflB80SH7Ue1k/FHgoj2vqpHw9zOZenW5yAl5n8tkus6wlxbnBLs3hUl5e8GkvgB+BMl9OvhKRj+UCPgjTUBaJXc4S5f30lxbAEc7w8jxnmJHnHFyPG9ARw+JI5bPZWzBLS5sjIzZHa44jXzJHhPJSPKuDkdrgiNGeRmWiOVvkbFMjQr2bMlFpGJEIxpxF6yKifTcmhJHqkrmQJYGQShwSTmEmk1JTcnkIwTW+HuXjw7S/ndqA0ZkIRI5axDxKQj3v+KcFGRMMicGtaxJTOceFF5tT+08uZdfUZ/tbJrUP1m9Y8420nRYq7h2kj94RgHt8Pdp3zHZlaizjy3PgNi1iP6VaRCTEkgh2X92qYfrOXNNO5n5Vyf+U7qbjm+nJP13o/YFURP8NkMedxkTNwUZMAtkywKXATb5/5JprtbhC9x99eFrUcnCxYiY1BG8szHLIe+67H9k3sca22MMfzzraM57nnurOdUSebQ+f58DOqcgG77lcPaHjMav0VBFbSDbo4MvSpVmE+I4KPw7GfYahD/Q9jmG4eyI+/VaP3hX/Xor4JI2O9kZFpDyDf/KmXLSX1veihfXF+YvmORZC4wfyY3SvFzYbKqco25lcUU1OeMPOrVOH0ixH8xO14XINVTjavGz341be8ZdkuJYj5Z8C60DPnXe9o7Blw2D+i5dcU7kNIt3V4Qk28y6ZybekuS9LoF4T889wdhjh4SHfUMiokTBRqALkhKNQjPlsbI6DHuU65Gv9WRw3fy6cAALCp+6R1WaaalpnNLXevCRTppYZ2skC3DDAjvambFgnwkqrG14a+agEAHErYeg6Zj0MacAA/jgt1OsNDgrFUKCYYAAAAAAD9wGVohLAYcli48rL61Ix4RGukgEhLivlIn8oODEN7LIrkEc7kiC65KQUkF5Js0lSiz+kjJqkcxwAhdASMuhwwL6b2PQgf+XZX7YkAhIQMrCoIFVeq/g0OE3Lav4fMdFCb7tqXAWJU9wE9yrz7HWJXx3z2hvFD1mEVSZBDtAKpdi248MBJWzmSeq8r849G8DgLCbzLXvRuPe5NjZkk4nMuL4X6L+lx6mzFqzvPHY2UqsKa/M8drIr65CQEwp2/efaN9BS3HqxvYrNksr/g90am+FkGSo3krQXThrssKYoLsXLpPjNodp8SVerDibCtIuR57hAtjlMxCRwXn36rDymXKg7boJd0rtITK23E52cdxtT0dEAdQ3GSLvUwkh7Huc2xyMq2aOzSKZqbKX8uIitiNA7KSaxkdrN2LyjhZNxozYpTnLlLWiSZQi0bnF8XdWwQAieuQMb/+n3cPClCcALuLh4TV8+PW3m83+ICPXg208ZjiQAEwAiHt7nICcUx5DWEdvbI5EOPq+H3SABQaG/MMFUA7uOLtJRKxhUU1hFBAYQFBqOddIoI0K8ThQTJFzQTQspTC7NwAD8OC1x8LFUA1s6mfGab1vx5pOWuHOs0ABphmgcAw2AAAbrs7WkB39uVkLaxE+VIcKsUPZg31ncuoIviOOUrm9S+Kspr/Lik7+tkToa1qPFYyr9rgfqn7Xt5XhUyaU7wkvK8dwjv4tbI8ncmBHj08nJtfl1tqVHkDmUiiRZV1J0oFP1UYTloo82PAXA8nHJ0LCwHudLWwJQAlRpUbZCJLpSCDsSZoTDwtIEs5OC6GiCqnFCAd5yJgiPKKTZEk+UTRJWZT8JM2aIAUYCoBrkW1UInYFsXLOKmXNvypwolsJK6lUq/FpTqbqmUWQJRUNEnfeGd+jFIbpJYbWpC9JQq4sVhW9VsQXLN44Zq5tToZJxrRQIh2r0uo43kaxaBV1dbrer2bR8mzzT7Hc5R0EzCEacdH8ubbbGpgBTmVU/axQKaqn8nvAmaK54o4WbVTsMSThAkkKugKaSZhYUutpPeO0SdDJyd+W6FaC9lRhGcYSgwSzwz5Br5EldF9RDbziWftGk4MsuJCScKYZCvIUcsJhUyrrGIY3gXsmuOeGhqNNC8ADkOC2w5qtzfv8TgpmgAAAAAaYZ3wAMNkAAFlwuf9jN+qZL+29LUEHpDrP12mbAjHYqrML4Vs/N5nbMYvnI36MVRsLMwuZfivqyqJNrNFJ3ONjUsYYZE945qpUYdLfBKjwPIosWMDwlogkpooym5WCMhSKMdCGUOVJUi0JooIZDaUmypwBRCsixeAFwioqYRTaJJwRK9s46fDuN6/ItLNPTcdHaEi1julrFAHF0O+Y0N+50AotqusvnswV44Qzb5JLl5Xo5Zm+EgeFPhOcjBMZsFstZHurW1kU8BUaoe8uN++Kq0enBhGnndTNCRJMqMVkK8VVUAc440F26kdToqowjnN4A3kjOZms/yZm6/NQ9byU0/5r0MWFevBmW5XreTB0s6/VYUWWtJPw9Gqt7463BM9BhjNl2rPIdCwaXs6yza4ipGdxSko4BTFUyGjNbegCYpfAgDLQtCzM9alUFqwGKDdna7nNB8ADkNILCLVAHTNvi7rLmVbFQMIBwARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARhABwDkm7A+PgMBbLNVytK0/td9cPfj3p13LyPideFABB11Y8fgA1Dfuf/+AP/n/tAT++7Zzu6j37DXTdY7f19m5a6IOr5Qaz8dgYA7GtLPUkYC/N2CGwGaZQv3bPrQwWILZcQk5SPDQXIcY5h/rPXZGcgcAOadtviG5NAb+U366f6gB/v/qAD/d/qAAXfVhgAd9OP5B31DfgBzHGsXj4gDMRKK64m/0LxfEYLef1OSK5Boc7BYPCLA2DNFp1MWXYtIHb/+0iN3Y9xwZRg2M8QpvMfQkYZp8O7xhB+5dz0M32sggsDnFCmXi0pc+vJclOEnFEXC1kT73K+5/3Z+HrounJ29fI/1/Yc2a+X9zC7YhuB/9EE5SVpNcYEaKFrg5dHguUHSSUEhl+DWFuHJ4JXKQ5Hy8hxrh+WvViA22JBIY++QBwKsB1RhFnlIdb7CR2W//SbB1N4v2fyb8RWACfROFk8lhSQ8wRxGdopPdHdeGXUHHpqnF++JZuMTXpyR8pWAu1FZxvzIJL46/SpDL6whWxJDERSEaneltuRIWHy/QHkbHpfiZMlAgmSTRZJ36pNk2W35JbKPjgd2T4OvPm8j8rzbWzchHIwmEmWce5qX0EBRKALodgaXFPF0v2VWRpVNbWxyNMEvyp9hklMlioTEh4FQCjAAbnaqStmMma4v5YmFJN6CAG0KFOgFHEHEHA0qQEYg5QGBxK8Y2fLabLaVYATS5THhy4cuHTGycvppLjQifLfaxL1h45Ice2hLG9dI+AfABLPGI+NOnEPh141I9dyBOLVJ1O2kfkFgyGM4KR2fMiLvNJLwrxQlusDQFQh27sxLhHJSO8zRPhelIcv8SkObirLpJPpOlIYO8S2nNyHE9wSDUJ76eQ4JxUhyTDkbuQJ1cQR3Wox+ghJqE9Hzsnp9ATtUycfIENSiZ5RGKD20k8pOqezL5DWccIcy4GThc8J9M0xLCyfKSdzDSs6frhLDvIhMQ0PFCOrET2e1J5hhIgCE/EyomZoBIoiEWxKx7ViZNgk8VWIT7mQZxPDYuxqv9/Akk5EPz4iFVTG0AohmMmRkKJwrpO1apohZrkYQMDHID4f435v53yfpex9mAfQ/T/c/j/g/n+w/X4ABMvgv5KaAAAAAAB/zoBugioXNZGhLIbPNEtfOIHtXbTJSYhNoSVQNEQiEmhg9WZlkZwScmVg18jg4NEJIFPdw6qJhNZoyQzWdOtyaSrhu1pGickq2SYgmWuRqGqZEsyyb0kX0SJohHAVKitkrFQgQBKUslDRgMYmk0zPIz7FmGn8JFEEhABk2ZQUOtHkXzLteTBCIygE2SLUwxOQMhGbUMogAhILaAgEkjIpmWrDJIaTIDvwlElkqhshMrudaEclXnEp9olGkUFZIxahG/MIx4F2mIDLj6JKcEiwpGjPIRF/eqBGSkyiUFmV4JFSiISdHkX1SM9hEaMgCmYPGFFEtAnpZEJv/2gS1uWXUG4KwikZEYTn14kpnK5IQ61PRJqhB+Rj7ZmPiZ2SSeexwbEwYODFJMWSMskMZJAptin7PNEXzz35ZRIAP28oBu4GHdV96yiKCZ9JGFkKFZyeMsCE9fnqT9UoIf6qxh0t0dmTEsmgIiARMTrgiFHFCx9S/ndG4sk7HsVGH7Iy9rjKw4HnryXmH+TPXENh2avt/uDabTF+SBZr6TNtP/Yux8ob9yJtP9j8Nr7Foc/Mx7mNkG8ukslOKDTFpLXXVUQU4x+FsDPX7ql3opEI7XS3dEefePu+RjPdc5Osz0uKVVfLnqh379tX0Lbtm9ATeB9V6CoxVi47TNsVZtNHU2Y/yOeC9Gq2u7c84mdahT+Ya9jp5UaZR2vcVoSlVQ1DauK4Z523I5aPBYrKsuSFAHBognADUawJCJB0ye6yacGTLHkl9ZLAOtsiSOyeo6zSUcmdu1Mi1xtCQQ/YaOyqvQypbUY3Ka7SzobBdiq9WsUyhwJGhuOcyNKlTTK1kp65PRZb7hZ3G12FfXNSbZVhq1YnTMnE4W44l5hEZKirWdSVM9Cp6znNl4AEaOC/oobhMSDAAAAAAAH/kAjG0RHF7kjxDtla+EyHsX12S+Ankwj1bpxK/1cnu+bZ2ikeBb0n4H4cQ6R18jyHgGCTCWh46Q0nESXTOBEbRSLXE9roSHIMASiVSXR8YQ0donoTEqXUCW8wZHbZeoaBPgusI7bQkOFZqu2k9aAlDYRdoSMBZCDhCWk4ST0te7MjdtwjNYTx84jquGEd7kiWEukuKZ8lR2ZLa3SDSYEWfqxLnswmDAEOFzyGb0hPMZAmIhGDyQjss4Q1tUnjIRBMLIc8jo9cR2mWI4vIE4OcIcMzhLDXrshEL4yduWRwsskFdoVLkrWhwl8jGqWZBJV8QTxoSUgNFIIRaloKJ4ytlWfgASMaEQoybGmkqgCY12pN36Rl1yBR5OB/xI1sARCshCqS3E/D1oPIYrHFYoyAzExBIknUIUklRJx7DqFxJrZWLLZLNjT4T48lFh/vCMJdCwCKUEYZHR3PzQRjx5Umk2lIoQRGqZzY9PKIrqCSdA99zySU2UikgxyQoVTh+JwGD8r7FqOxBZAaSiJJHZRQdNe7UWMkUHodRirEn2v/V6h5z8D1LU5/suveiiTg9s8K2tCzqHQLdERGXclnhlQueOquWp485JADy0RIkkcnDvkJ2DxnWRPr+QIcrmwVHZmLyNTNoD+nXjWJtm7R/i/IS2TBQUSL5XaG/iQh1sL9CfgeHwHwOgQLPfntpEIuYdF9mP2G7/2XphHwXmGZAxzbJEAMgL9V7mc3BeEP+J8i2naoe1eMZ5pn8ruPZMHm/4Xrv6RlONXTz16r/JId9zFhoscPpxY4pfk6NJFkulZF4JubF57QvGos1b1/LdZPfovNNUXI+qsmFxKzHHORMqN9I1DLzIL3eHUdGlYPefqQVz9e4Yh49BHQc7ieW6ryXjZlxpW1e+AfVCQua0p+K9x8Xd4GwAKwB+f6fkgA8ZKF/Ir3lmQYN8VQymdBvCK6SvBJXsCQTwAEiOC/oodiEgAAAAAAA/63QsUpDiCSeRx5HNcQIYzESfYIaTD1y4lFgkH2SOeER3uV/hEsjkZaWQs1iEOhK8wjg7VQwSN/Ik8JJJNgkcmYjikEYcwnDgk4d2VUEoIyDDEI0qoKpAc8hVnEMZVtypQCq3lk0YsnZzJOQvJzCYhk8TQJxF2qCXK5FswhUjkIRCEnBkMTiSFqXnQhCSvKk/7XZ0ckCkQpHIYC2QBJJRK9RQaGEQHGIoVbrSbHWnUJyFE6r5YOQEkhKjEJT7MTREWux94YEAnHXg6/HicGWTBDwNRMwtj5AhECiIDWQQG3CWeXxn7NVMyuIAD3LKJCa1E2xibVkyBotFvD0ho3Zy1sf7vxWJ6pgh/6GUOavd8dUInvXDeh4zjfjP6/lN8MPZEjc7+NXQGpA+/y34+yrQpAAc+/1yYAQrxChSR+TCom5Odyay/ieO5XNY4uq7oD8pQgeOgJhJK4XRaArjJlMTasmcPHxARyDVECixEmAN3hrMni33T6hW4M7g6O1YQGP+53yTGKiw6GyoAguAQiwSDVVgDnVPsjzC6wf/5MIcxnNcfPkwiJiDRYIv7BaALsB8xNOk72hDFGFoA/oWYH7R9Q9M9IwQBAQcEBpjvDh5MpSZRXeH32QAECGIMUQOYgAP2T8RfGjYp6h+I/adqKjA1QG5PuGkNGVTFPXPYXHF2C4MuckYZVEDEhea9j7De6c25ICxAow2Ypq6VJC+N19wduWBrz8h8xemMcvb///gYKbjiPEzyrxdwP9heMBwnaMhjOqWB2tnJCRZ9D43k6uRYNNoFkN5xfRpauttOUeqfENCR2HEfpO8ZGPyv0ePq9gzRclkY2AOncf8MmEJMhbPFH2IKpk9m8Z/VyYAkxB/FxlZDvjiGqMbP2Nl0AEwBcCcgcBJDgv7QDohCAAAAAAAOG/+4JyRk9fwQjLgZWzBDpmhJxLxDRUyGChk9/CJQ80RztQhIgE9fqCGGkTtIJ4PBEYFysCkMoAjSxRJmAIY6ISHHISnkbOXIVsUTHbJWbpLL1iW1jEWWSWEASyUggdZLF5UlRy5NOcI39QRhYkjwDo5GVCJX8aQ1Fojk6ROfSJWNyT3cyzeYEAQSczbURRJa6SQp2COAtkcThSWnnEqdolgNYTjSSWXwpLF64mq8RLDoqMRvaMhPjk8HbIycf8wRmQyQI5EpyEiITRFIsWQZdI4uxkKYQoox8qpjEJYbFoECNmRe9SU8BAkggcZOXEI1QEaEPAgkIcUiERFZLqJRcQjNiwgickqvtGLnRM7ox+PnTlITob8ESFEJMCSiG9SlYWTFVMYk1Hk3i1piswfo3YcsFJBgXfE/1TXmj8x/Pnji+0vr2++X9VWfBuw2DCJnFQrfOSME9YD2f/ox8H77XRsuEjIloCWpTVuygA2KUko9nyMoX/wfwcisBFAeiJYg9k0ESWi1gfRfK/KxI5uPunLGVzqTOogN+dhW5AJlNRBb2s0OQBknhJEiUW2VRT+TzDJ4CIEfykVJlwuesrhsY9FHrgHNEk5OBM4amBZh7ZJjYRhAIpDZqP6tRKloBJBpRhkZJalikTs5tlomCw8eil1/OVbRycQZEy/pBIwSIAZCLjm7BfV7BkwdjH8nqApNgLMDzNJgJVcSlpIiASKatgfbiQjZDdWKOOLJFFa5MhBzqwkCBj5/zuQjS0zyzwKTw2IH2roefAWca8dFNzxWtgbT24RIHknPH4r7V5l8VHHs0Vz7S+G7NkF05Hx6LaPYWstQ+tDdtVuaAuTRPRvH/Keee9nvIuXGx+PEINA6YWDnmfFjufG0d43jiWHUlqmvpBy9rbjdua9409epHwmK5FhkxwCmq99luKln+o8W3K2G5JdMUwqJqV1qdw3uHZqweAzSpEJMBD/x9J7JpEc6DI8AAKJhwBHjgv65CJQAAAAAAH/cBb+xIYLZEfN3CiGA7OS03ByPSMeR3WdIz+KkH2SFWeQLqicfgpDTwCUiCR11knkjkZ+MIjkEH3J0yBDF1SOQwVA4CXMWSn70nwEGV5MryCWNrEdEsjhLxHJYUhgpZKk4mygQk539yRrNytnCVfJUXrSfGddWCyBcqR2FIjEvk72itXHkM1gyOPtk4WDIYCCQLiSdbRE9ToieeyJARfw1SBlaMStRSUrIEIOrJLgksNIJX9cSHmiFRJICcMqLH52kkl1ZcFnSlLcgnDYQAfKrpPhEoUoggt1QLGRt6so/gpGAgih13P1DWA6DVMqpTsk4D5mHlaBQsGxQbX0lKAiYRkLYiBRXlyLU0DBl5MX6TZoc7BJSqBEtT8ISGckWARTCtMpJgZMbKw8HdzHlQhAiJnBP4eOk+CtIPaWU51FUBcnM/gZDiWnD5m5h8Vx/Eu5Q1Cilc+BJIBdlvIac4VFByePvmfHUOqtw1CXWfOPgFQq9j/FkSmopdnk8w+pfFcZEBCoJhEocmwvu3z1cFwEOL27M61JMikYouwyay1BKJQGWi4i19pkl+GQUKzjXl8ZLiM7JustALsYLo/eElwycQxGScgodcUyQAf8yMQlSmIILQzaDHwOVGXSsmg2QTEDHs4mP22/OlVZKPBnZtiRP7Op6lbdjeUSbCkgFrZpM5MFXlVGdCVpD+qScGH/RzqH0jJhrGYSEDiXO+Dlk4JILLY6z7T7x4txAkEPD+qa+3T7TlYMzgsOXQ+jTOfJbq3DUwBJZfnUfM2svu5AAplLxVMwMelwcm4Lav/0nKr/TZ8BdwltFVeQSUAAkIHifB8X5aukU+hycPbs8T+R84THuUnlo5x7Z9d138N61YetZ9BITq8Q6q1n0dxpzR/N3l3V6dYNPyV399F8d9T6R4gzTKxlG/XaVntiroVlOPv/P2XFbS9W/3f330AAPBOUAR38kHFSOVkrOzoSlNh3wVyuAEcOC/rUIlAAAAAAAf9byUCAcQQ5JzAn0TxATqKJkuEfCfKiPY+vkam5I5u0SlcRI4zA0BLIWcORPoyOXyJHE6Qg12DTiEKyRk3yQ8+SxFEmmRd6SeMnES40nJ0JHQ2rrmEc00jiLBCbfJSs4RxdkhnYJGFviOwxxK8wkeWTweGIX6RLZwJWwZOwwiigTmYomM5GfCIXCksHIIwqBHPyiY2koMup4dnSSBpJGDkiEfh0twibrMu3SWCKRuUyCgkdFgSbwkZkgkGhvUkXDksO+Lu0hRgaOInncdZWRMHESBGIQFE4KsrTKBddgvsOQVERRCMQZFaiBWk4pqigkwtJuL3LxyYRQcgoJFYCBYFvx+mqLgWYEkaBdsOgQkIB5VPKwrPJnaFq2iF52jEEnn6L0YTSPKiycI+DIJxW/cJnJbwf8+EVIYkYtYGJupkSAJvSRhgu4VFJ2BkAOCLoU+AE27xsRfLISUE4kCsFEqoq7HMwv7pCAT2S7w4AjPHNpACJPJZoSZkd5/XLRXKianHkFGPD1ObJ6beIRKb6hk10uPnxNBrzrBJPORIPhTExqwBUrwZnJaLSc0soSbQPdQ7ELrMhCWSIax3EAimdH7yoA5Woz7BJFISEq6yEJCSYyUTBJDWSWvJ5CEORQcKsItFKIqFgxbTWQJDJ0IvRv9joYm0Mwa7ok5JbcmoIFkk0TNrfe7qVj0ZBcoidGAFJCMREMkEFTq//Pxf9+0U0ED/XQkQnCGRXB8yIiZ1NdorxqzIAyJwUKGw9f1Oe8Vp+d5kRA9zoE31ipzYIfBl6Ts4+d0cz1yL+NzqgxDPudAzOWxSS2Hcfa+u86E4DLKJmDRBoZzRZCHqfz1WfvcBMYvsXVX8lZp0nuHF+L+m/r/qfotFAy3oDJ+8YLHEeNOLNQebaZ/LOmUj5/piLcx8gVTkD5bj/9PJeYof3SwThoAZI2cOPeQ6wUqQwrDdovVeXl8+0AHsWdhXlnrec4azETnnnVLMFZOa3AEYOC/sIoAAAAAAD/qAJM2BLu7iHM/TZLkvgG7c2Q1c8j2DUEqlAhEaRqYGdjkc1wknEn2OXO2JIXcQTI8gK9aVwmxJCGMjOw+dofgxHV4MhXmSo4lbyRLS4AlCmkzrlGRWs2iIhGHqicxpHVSrdiEHZInjjVmQjRy5KwIjj6xLMFoGkSwl8lEuY9ik5ySKJlijIxoWDtJlwO3SapGTrVmwSONkEY8udyEAq86IwEEYEsjRxWmSIG2e6XC2nFI4m+QnIqbAy7gSER5KFEx9GwGfWhyEOUQMMgNL/u1JCCKVohGA3Hsn2HJwCSx5BhXar/TaUMmUtrXJlJnaXPqOQUGciNrH+mJQhkjwLSERKkiGTWKutZaJMyCAy5MDb9Mi+NXIp2u0HDk+BUp7qfgTSYpVEClRWQR5VGTMmfx24YkUn30mIUuTP5vsRJAqhdKEazhkgsIAqEnxa2ikWJIlH6BdJSQRfwqwBS2dkkQqwUfdOvMFJlaFd5sDB6NkwHGZMISZhkZJKKGSgQpbUReKjp2TCLrLg6uEfaJaImSsbVdowiKnkQLogFnHx1ds3hU4+YSmiJvVdxv6HGD4n9JE5tiUQgjBBbqLSSSLJrtWTwklhlJ2PoRMQyNYs6jx+TsSuVEY0G0Fcp/icky2GfxEVFTfF5CHJ6yMshExa2kWfTl+HLiiL4JFTKkRkFudRbT+keg+22sKe6Pq+tgf5ZSRKSamTQo6gFaxJPJ4oRIKTU9yTCTQT5vB251MRhtIwj+z4Zkx5KSuZh2oOxW/df7rhsUpIZiQh9g5IUnU/smk3x7dgRiYw4Ma4ptuwHl9DF9BF+B0ZxfgIO1fAsnm8loQmWsl0f9x2bLxfkpeL987u4n+xUQau6P6MqYbfpH6HuH87m3PvzP8Xv2WQ4Zl3M8b9j7x5V27FOMvs3O2SOmPuUxTbi33qN+mtbO3677ynf7p1j3V6FMdMCAAAAAAAAkPNBhIt6nHnzMBiHMTSyZcw7EKORrY0sQBwAEUOC/ooajIYAAAAAAD/uUBCiMnwL0uR6tjiUXwYQyHjsjR2RK7uSXF9MTHTuiKQuUrPMTixyZGEV0iEMEuwpdn2s354gywSPSJayPjxxKvFJaPEY+lEDYwkSSQDk6X9LwPEE8qrmgng3kqeVwaiT0Osl6CS0l0nbmEVwiIxk48IhKhY/gErbKSJYCcTQuxZJKbEINskzTicugSwcifsBk2FRN0nBOSqyycGsRK8lSJQgf+RMMkkTDkkGJseRVDJskXdhSbKeTIpBCpfUTm1SIgkoFKfhEYhSGTszsUg0FZo1bY48fkmRFBIwcNYOlRfydBpIuqEjGIrHfF1wMGJWsDHxqJOSCO3RzK/rjmj76QUMlDk/2yAy1oWVQkjnukP4Czn5Uhfs4EbtOpA8okCDlwuQoGdzXa6sQZeyYvb9ih5ulAXa1YB6MJHDd5pfJJgazBQQfXPplKS4HQlFK8RlkP3ioxUS39JgQSIR1kXJwiRBkQkIATt2fhbPqI25CCgSscgQc3+LVmSU10WmgzVrD2DE/X7SISgM7plln3wgsHzhFocED9NIDL1LZpaZJQIHf0yAzB6aTaMkIGQxedWM/b31Oa3v/B6/++s8n939dU5FuwupOUuXchH2tJ4OEGREG0xViCtTeNNfCPJmPLoM7FmcNrHJhLaIPU+Z4Ryj4dfEsgqU/xMqgroP1v8llYNFA+QgeCHl8E25JkjM3SVWSeD+7nD2XPfKEl4RAf2+Z/X2DqfWPMMYZx2NqBS+uNNtab/i6ht0kcXy6G0lc58DUEU3bRIbpFqB12G0+vRs3ss8kj7D2HyfK81R2qE+Q3S5UdT4BnXbxbsAR+iocpxP6zTWCsNcoPWsEw2q1rNOjXEFPiXSV50vp/+/T+rtABeMwkqd4hk6YUM0upNPyI72ePDRExyhwd7XpQ5ik9vAEgOC/sEOhEWhAAAAAAAf6OHqYMmzSQqZMEAmfPkZE4gUJOnWI0xWlPrteQBZWaQSrIxAobvT/ZtIl8yuvIQuSLuiEoMEm+QRPPrMEyjrWSTe7mSqsFUTXGJ0LZN1EmMxKaXvshAhcchW9EIzjVO60gZOjyfOJiOTgX8HwRONJIIjEHGIIOQq4chhLvHpOKwmuKSEIhCQQQmqSbSf+XIcgAJxQE2vuoGQAkIxyJXzMzO6ycN5OFLzokhJKQmzCcF5OPXJ4yPY7setqAVCC6zscJBBP4RBEEhNiEzIu0FbEIQFkUiuYmWNd7iDWEQtJ0ZxNMn9fXSSDFkEH6xtAEpH5RugEqilYXhpMwiZik4CcL5t119Zl4FRgx+y6FkEt5o2HYwCDmEwRCcQFZCIQIJAxq5GTE2V0P3y6gCVocgYOdyE1oocGVAEEpwBRM6aanUuP4HejkamHrjKgseE9M3FsaBbg3AwP/U7TPg+EeTQQmtZNgrHRSWLYcTdFoYed1VmD1AgqMQjAqNRNtkndk4JLITZ5B50Ha9FCIEN+c/Dk4kKZ35APv3s/DsmFn+CSMEgYt2B8DwM1TCwQsumJkFKw5MJ+50r9Z0RUpaGNb5JWBjwPOmdCaYugHYO5Sbmc3ZUJMpfF9SXy/N8VGMmhtTnuemKkDxYQA4g1hCRGtVBM5yb4UzOIRaRCdOIqATSXBgEJFghbqUBAJtnE5USz0c8fdSbETOD7oQQ4g5hBAe7SaEE0n7PyPEPqBAJcNvam9zkwhwMKbtz7ReO183SX/r/p9rdscZ4OCsx5AEQGiiC95wfkTHgEsZ/f/i9H0nnzXnMH5yncHB979byXpBhS1/pN3Z8qzX/NdlZMF+4yznclZg+cICBt0mAVnhkLxD5jPio4GhoP7ghuj2HOeRfm+6396YQCDVP3/vN1nwAAAAAAC4AQIogOAASBYL+miCQAAAAAAA/n6BUbyKMQR1JSdgEv05kxRN58GIRGa6pRAECo6dTjIQIZEAyUEZAbalcTj2OFEQfGI0XE4FMmUZCjJyrSJ1RECTyLRc3VvNkzHESXiKatETyIIhKLgCcCUQp2bOidoksTlSOIwd3yiAWkBi5UJxJEsXyeBTWN0mGXdDSVCARnQrpqT9FItQTiXiFd/bRNi66yJPFXCFmkSxEkgfAk41IhJXnWWQo0rrkyqei7BC9hyWpmkZwyWQk4A8lGkfvCVRP1YkMmd6VuOybOreGQKcnEmWZQl+jWECtphIRCMOFdRaBhkI0UlNCRwOLINu2nUIRI2VzEYacqHrNhEyiUFE6yp0Jg9LIEInAdXR8fPyqAktPocoI+w5VZjwN1nqQNvkIwi/j4Kvj+gRfx6hDEPl/ppIRLGFgIXRWIbqFkEFqCyuDAY0+Ay97oSO8k0erfgPzc98Z9kWDVfaBIwbpJQCfm/ymaCRYfCmokHy0yhmcesP61Rk+2kimu4udy/auOus0eVhZj0N9cmcGVQZI4CRYki15FabFLJhyTFeN2oLReVUWqT6/mmVgVqrHqv2Z9JYoLNNZfw2p25nF3QyKqGWqcuPpC8dkz8DW2Qi0Ebqi0h+H5JmKpSYMH8mRAEiFFRAuoRIJCUFeBIk8HFvp26e4iSSkmsJENRQ/xVZgIkaRIUiQPeP6X3ciZXtFvIJSo9jQbRGROMiIezcnFysgk11FpIwYRGCgiYZFAJ0ESEskxMhfAaH+Z+8/TZ2DkIf/K0g/rnH8zgISJx7Rd1vA/dZe3v8D+B/u30SGCuSYCTZxI5JmDq79/1t8iv0NX8hbO+/T1iblw3CT65pnlLTkGdeIpX3cOKS433HfOG0jKf+3/567abjqmKkZC5cp4z1mq5v3307RwvVvRvcp9JLYEzEppTW843fNsTTYzM5LRP85BmnB8UUUUUp1B8vjGnz/pPPp73pb6pV+MW35wcAQyc2v3VflECJvukJA33SMgQAHh7AAfv+wAP1/QAH+j339EE99wGHADIZces/8iI9gT8I+XiffrZPO9kJ9BkE+D83JkzxPrfTSBtET5DvyPU4pLrXCCO/1BCJoSWMnEcTqSDsfY+UI5DBECZYlhI5HFSCEfF/JEKLPdCMYEuiJOT90u6NdaOAZDL0TTOytxZOFiHpHrkqB+mUpK8ojOpXXnyObmEMLSI40NZyCXFNuRyPJiPFM0TYa68CR5d5/J2NKS7V2IngopDV5e0sIRp8uI+MtkRwPMyfRNJWVwmumQx2mJeJeokg7MjQ4UiJYnHkuh7MnnUkeBcGIY3QkqtclmlkQAJuvEtHNJy6ZGIMkwxKBiSeVATHnSOPwGV8UQjtx9eqUhMc0kkUrjIjTdmJJQaBLNZomM9uBrIRF6CRS2c7zH8BPhCODuETMJSIBJw5dDzBUoCTT0UD2GTC9dEHgjTqXIRLvPditn10PAheLWaHHo//zIQc2em65GyuLX9bA7xlAPUH71g0lvPcPIGlm5kmlq9EpjkA9fu9L5TltJZP23kr+yUsM+2FjZj6PqZLuvXSk7Vq1VACUOMShyCWXyhLMQCGGxBEEi3aNS4XIRKgJJziDYJKdtiCJRLH619EIeFnyARPoSeQxhIVmtMCTFSIQLxKplJZdYkSi5nbBAQbSCRLHyBPqF5CI0hAb13RbiSHXaizlEoZsnFIMBkIHsVdplWMTCjWdAJlQZIgaBFx9YwZVfWCOrunqJBpjLP4GnuhMKJPFwsTAH5OLY6NU5klJXOtSwyBxUGWr7sDvrlC0wXcPu+tQbG031jPW1qnB4j2lINH+B5//157triZ039oOd6H9TP+FCZbSdyk7fIc/BhXOXDQ5iL12OV1XUA9EdhmGRSPOwKYpjZECzMB66Qt1CS5ZPAHIX6hAtSh4trVsdEICSMOFk03MnCAhuqZQD9m8X5kmQufZXBdAu08BBYdBA07vaTRdcw2h4q84mf1MAZWwEXOT/g7NXAASL4L3SIMgQDpQAAAAAAHCimmG7xwDDYAA7OeVp5MEMgg90IJHgkhjJMNk5FBuxStgS8KSM1an+a7z7guKO9JejdXeJUnUIG5N/o3YmE2aD3b902ND474xyaDivXNCCduuvdOzs2XLmnsjsbp2XwV6k8L3z9N8W0x8H+R/Y4xsJL9ZckoA9n7DwEHrvYWif8sqAgCxIsmiIoDqBywD5qReD5c7V8guQXXmmsSkLpnJfVObHzXjruV2ZiuabWORLacuM37EICPfmrjLzrQTiXI2qnNJPZPyPIXlP3TKsNww3BYZflJkISy7brOOmtZ1pSFp33gpK3bHO2RfK16gsYdPCZKrvmdcFuGfGEt1x2y5a+bdd81rvSNjzmUnDsPZOPdCyPVc0bQ0d6DX8jicy8F34DGrbbx5QaejFvt7SK01hc9Jya949h5KBpdlymBU5KGIZT17YrcFa3fCpPtfNuqN/NydbE/LMMEylOcnOpVTfB0FThFAtsLOkx2aUfyfBuimpfy9zQqlU6nTQU6V4+r7XBHkBdJDQKfFRi1VU2t6KTCiTORvOGeqfyZonKdS/S/eta/Mtxd+ABHDgu9LsMCUMBYYmAAAAAAA6/0vm7FuCIV9hj2SShSuJb3JnZWEnAwdacVNXbsidyQz61n3Z2uuk5j0bzT830zkEc+I5lzLDttxPv/EvALeH4r3ZWoYf3j+Gs8cmix4PjXmfqj1aNP11QnpihA1kGRcItcvb3oP7m4qe1F9x/rOZ0cg1jheys8804KLgPZXME17Xvb1P0Sbs+5HjMDQJFKo1PjuG5+m0jc6P7yq5lF4dGG8JLdosHKzji9fkPGvvA+NnNssLp4t7xL14YAJt17SRc5BqELIYR8LwVZq8hSz4AaqMJs/j6EmeWDSyCXhRXV4r9pnhP4bbV7yaGzbCzm3db4mhnossUDQlRo8RUmz7ljJz+O0nluBGwDlnoDS3SzRYlbXjNhlwNXYDw1kC0tTGUKegMNhz46ER0CJL8eERTqO2ok/MeMTszM7iqnIU7nwAuc5YQmcEIILvWV8aQfOVo9/3+01Bw2t3I8GQUJQ9R9zX62cI6H4UdyYhguLf/mu7IeobJ5D0OtmQovXl21Y07jpKu+gAAAvZNaqd8yVqCpIokAQxJ5eABHDgu1LgjjNAAAAAAAH++mWGQDEiZqTjVg32CbZdFmWS/mGirNhqXKrzxFWjzq+vc1+T6/0Hj/77UBeZoty/zdYdO3eOpy9h/TIqQOGsA7ttjt3wzN2Mwz9R+ImQUY6t/c4p2jZGyPzqxC4dFdIMfNv1DyHZFV15AKo7OkXwri1ZiMYczZ5P1h4tPmrhzDQzHOr+ZA7q9rYxh6/nBCrB1Rs0qMi7NwLSv5CMKqb7P0pmNxRgeZeXkzYJt0VHaYI1JK5isFzJFvidwYIMiuKlW2JzjCwbeOZoGTSEkyV2hr7cb155VPbCpznJws1GSiPGh4Dn107l2WDWp7TEtNhokuhbSdFRY1bE6U1ectcK2m4jcThWdt6vW0u06dxj7zbtLIQOZFVJFquIIJHBMaXOLsi3VSKrF5znOc6TSkqk2VPiquLL0Mrbh4fgVmG/m2m/gb8dTnhep8b8btou8dLBwcY1hecmGn/PcOXyoBusTKFiqsWGKUaLYgLQ02aCc5s8yrlT0+AEYOC7UWDsNBCkAAAAAAD/vl5KFdGnbHEWQ6JOShI8mtIX2uM9euWqqXpxyc7YrIca6U4jxRqPWvWUN7u3XtuiLIsHh9xViP0T1rswgAfRp2O59J9x/U9Gcy+JGkgA11RQ/sES2tD31zVhEh9F6lUc3yRI1/zVtTqmKYbke9dERNSgnoU9aXanvLce+iGOJ4idAuGCrlCyZKq7mVLgi6KhsR9i0Gx5G34SnJxdwMNc8LT1hyHp6ypvm75vl39Pj3LdsoGrt7Sr/Cxp0myuehkCBcSpKBtRtH0E5UfLysmNcNsRZWh1GGquX2X3QzRxHzvlT6HJ1V3tjpbnKW0Z6NqVYEZiFCdSn6Zxk7JBrwOM6PeiMvdDMZaJ0ScZMduOudanym9RT+ahAflW+qdrjdnoqoOsUZmvx66V2aT73auzwDFqNePxT43qx8g4aE45e/JnicAFH+fZStb0z1np4PtkyNkknGqmmil5/WLTWEZW5ZYR4ARA4LpTmKY0MAAAAAAB/nir2BKNQJ5KWSMioC2NRnYmCDjP1zOeRMfCnpXF6MTaj426a1z9h6s2RJMrEzjk0fxu+/teBA7yctoFwIvpv8WgwBRQfy1Tl11bXcVweYYX2JypzHsjIYfPt5/Hc39Td/we6A9nTHxDTPqeqbz1SG4z7dwlz3L8m3eN5v4C57XXLzJUGlWDX9Hj6znneo/OrVPUm3wj+pf6WvWSi00FTzdOs88tKWoWgKuk6rl2CnLQYElPl91nPXBvgsIqJBsWjHb7bVIGeNm0lWyWhdGrkDeAqfXY6qPgE2TFMiZOriRr2dLcqKF8s0HOtEpb6+l5HOTRVWqaxMynqs3eapVzVacLLk2HmMzqWpDNqLKqtDpm1afgh3KJh6v5FTCu+6uynf4l2n3Z2S1O3V2WKDnjpspasHOlaAP76y46JkbWEueQj14rt1vEx0PMgmbKsuQlEOSendEhPorwOSdF2IB0UBvHNmHO1B9VDDuB9I4yhqK/SBKsOJ1JW2FQTPVjGy1ssDFCGsOsp2gJrgAEaWC50qCsNCCcAAAAAAB/zWt8AhGqk4Vknj8BzpU0WgFEwkwcPg3luxuA+D5h+pVTHu3M3d35t5i7k+xkyp5tu5NRuprku/kAlIDB9kJnN+dJgPaRyKg98WHd4fqc9e6U3bpflvAqIJ2M7fg/Xtb8Nkbt/f0oh/YfJfUvj31Br5TUsRb5DeNS84935Exs11lCE252PG0zefjQ7R2LOa6LPJ8b0jKLJXY5QbtWcnZ9rpqDYNh67aoNgPhK7fN5VQUp11XYsM6yMwRTTPOmEFEk1jfRwJmiITsqKdgq2tDytj3eyxaDdCKhQn9dKe8WxHGMYDalLfEePLuBXVBm67uyHt4um70Eu1fG3LLGegxIrCiALGOXSGaUolOl+q1S4CUKLJZJm3zgdkSUBcWtasmzCsjBnhptRwho8DQoG9PHEczG7TkRIMjX/du/lnRJ+a4Bq3cIlYtaBlOElf3hWD45gEEl2zluqmNeMS11tC5NgB79ebgEanZrNOGiVmQN2udNyuIMkDdiLNIAAAC29gAPPgAH/lQJHJm7HhY8oQF4KPE32vVMTk9KjWXdiSpul55C6YDHn7TH3L9q2n2C2VtKCiZp51EEJMC3G8nrfEFWakbvHDX2UuP9Di8wmxUjp8+nnChS7md1Pz+j7frEAibSfx7vGMzvqCQ/Gf4y1WVS3pJh/MHvxuN+nNpqyfwe1quMB1y8mq4+mOH7B7z5fZK/JauUK/17Wch63vNQxTWp3wL205n06lVHHxRWiFQotaUgEDl1hfi/AoBIfSH533u8uCcbfXfEeRyn1s7/t23svsEnpPG8pxmc5j/Dd84X5w2yvm9zCnYOEgrVGqG7DTwchC4JotnixU7Q5NzPYPo6wWaYaNLj1cHXqQvHQo76tqjsQRZTonoDpSAkI0yIq2HWE7sF254GWtiQedulV1j93ckDqsKxsowOwANDQG4yv+h8X+1d18JJ/as+J0ujBagEUitiLd2ewx7SWOstMMjui/y3JVhWTpCnX6nTzcI0Z9HxfZ0nd+XLbjqZfd5e3IcABIPgt9PYNCYsBQYh0Ij0IAAAAAABx/83kBKTDIgATCqXkWiLn3FJDyxZGXtbtD5sKMx3Dn3CJidWxvNcwpeLuM6JFq3YNCghsoB5ydmcr7/OvrEyfB/GQfmvRM77z7T2bOcPeSN2+1cbZhJBr54PGOZ/stR67OVyTbz+GqOAZy7dzeFxvYWRyaznVuLFB4mMh2z1eH1oRFFEpAbdCHFKAifhCGyDIcBmI1jRFwwwR7KOOgsU9S19CS5ICGetPfGzYpLoW4qXAk0J1I7/AzpDkaHvgoiij3DUaru4UB1oxq1JFrvE/C7dHFOQ0JhbJsPVUJaY1JRwy9NLAQQYeDoqquENlR2aJe7bX2z9+mjyPnbuk9ms0IAryx75AJcY7ZbZGOQqF0c6FxkqWs1AloEAtmBRIcAZYFHPAvXTUWQm0VtgUN/F6l2r5T+cDF1NsPjpxXleMzpmQKRfwAAWFALAcARY4LnR4Uw0GISKAAAAAAA/75YCCaJKzlrvzVm1CEYPI2JfbaAE6979HxuqL425C5XTEH9JGSoV7p9PfVbC4wsnrmnvrstiuoXW1W9a/fLoJ5ZrT7RPP2fmNvLX8ufs+cC0VltuLOuvmOj+ovXb13r/v+6xyrek/iP3P/FbH3enxs30AUCxddJ7BxtUkfV+WXeurcypLdaX2u7TaTLBo0zef25djYXhXD1nT8aqNO/fruxEtndUgXFvcIefT29Hj+aUoei/x7S22e1MkkouQTL0mFxOTrfBx/POCpijtU8YQkaUajY1EZHTQFhHl6ohnK10LHI7qJvGuLZ98Y37qk3FPeazgtTE0p3ak1WqfkGZ2MlKV3vNiTiUqVUUsLkrl6VKhQJaugIiEIUBUdk4pbtHbul3SPXM/uxtnrDt4vb0FVUweR8Hr1/SZI4AASXVoAV+79y+ssM8vFHc5MFe2c1yg6BXdE3LKFN6gGa7OSHabrYZEchSWHeFGYi/wYp3V5IMr6hPwQPwBFDgudPgTCQghQoAAAAAAD/vmmwRyrSWQ30owSU+HdbSIm0ST2bZShmJbeaSphojp9vclt7LrTLIIju+breJ+DTX3UQbuFsHl2vPtnrzpxOkWnPLp4x2rs2pgZ6fPg2RKc3U7dmu35r4iKc04KtVDHZTtehT2xKeapcDvPoWBRv3NNZZv7PqOvGJ+QVH2wfIIXDClggISUI8wDgIuGRfVF2uVOL2A8QD3exoe70KOlAwiiq1l/eZWVUiURmG0NzRLiZjSSmhQcUqGYAounDLYPFcvf4VQakSI6RNAXxSqIl0oEQfwW7HKWJwuLHamjwgiqsUOHIvdwaumi6eNxP0x/Sluw0pkscV6lGZIkHgR9ZjADmDgKiDc2sY994l8DzcfxkMBbFvNJCTWtIMaQkPHu7kNpUSq28BcNbQ4XuYHrrk2gGIvlX0opqwYVED9P3ZhXLcXmEqBjfQoSxp0yniAZJF5Bt0o+SW/fN5rI0lGEONh3lZKfOeKFBhQiKryjhv8ARQ4LpTmKiQAAAAAAH/WTIKKQRjYOpzTDQ8vZX33MsGU9UaGdC+YHArGOF6cEBhM5sHX+HeIYVlPknCbC8y1dv2RvUGLa3sCXR88Qr7/sW4+L4wwzTceU/qjC9sd+rXBbwccabUtmZRUZlpD96DtnOdMVZ61lcuD3zg9gNeeMKnF6xyVSnbBcKQQ3V6/d6KPdwFsIUrMow9jyoRQNfKWGLN1N8foSETqmj4wq9wq1ULgncmZvDmUaknNRMzBkFxrYRI5OwN1+frcNNz70voT/AQgb6bdGiq7JHwdGqcJhsL281IOz4oySWNWzAWjhjJwAJmywUoZB8RMsmEOmNB38RqRSEvTgVmodBPDHoXG4Uy7ZdLtBaerSsi7eU+/RqsHzsTTBNnM29ABpT+oGdubpcV8q2RvnAIAyWKJtSPCCA6QLIpTcAfhxBFb0zz2+Hx++/P6lpy3oq4C9Pw1O7u716tK8JqO4zHmr2UAC7TiHLBM72Rg5kguisyMHeFXoU7KvAEWOCx0yw06CMRBiJCgAAAAAAP+4Alh8VWTSEA35Zn2ruf9LEJSFBMFeyRJ2lkrkC3zr43JVd5w3bsTVOyfEasRQfm8l1XasiHPveFt3kuPeH+o5X7fJdczvauabS86L/3tpO21iE8wyva+N00aAqh9D5uYLrfsFXx+45DaJHSqW3s2G3rnevMsJjGtjFely6OhWZLT0Qi434655foXDLkAiRH1cKq5OSvRTq0iwHP5CRkwSET5rlFpNkapHsyY0Fs/PxMUIlwIIrXwyyo4iKLCTNzojqptbiXNj1AnnKwWNrfnU6V7tMdgMwair7E9GHFJZNBVlxSLUgu0G4wEmf0twfLeJlkhJ0u537BzVMCfLSvOAKQzrq+vhSBhjTGAhDSxhV5xrumSra8UiAACtKGf8bp945wP+9rrgobyLcH7t3uj5MPoWy5mKKn5//xgEJRflH5SBm/FiIbltAUFhOmIae/WSzi74jNBYA1XyhpFOAEYOCx06xUWFMRBmcAAAAAAB/vpVAhRMQwsIhfg93cfu+xWyOdwrG0zGzM44xfGY2uc4f+TsVzhx7pvbPz+YMbdsX+K4veYfJetE5zXPwtZTuCKawbC6MI3krWkZz8L7Fh9OJttmh+zXr4Xb8gdGr3jNzeAUz9EY5TpLuNbF4XqEjLn/HBgmTWybrcd0diuoWV3ffn11kDp1j6tV2oQyqo2TrCaeLZIxUY4yUKEmXsHbQc9pG2vP1ZiKdaUSEK6SVnx4AhklqYY6w7uvLMSlK0xBkRBdEqqG3aq5BKIAsACzfLrFAZIYUACiyauMZAk9uIVEJ4NlgenRxVHPy8TnmeTAc4Rr/t0Y+8cl5yO4IFK5ok1IrTbJ1WoozRQtwsxAABjytj9ufXxePjk4f959LzpwRQDj62r0qq2DUc+I3uTT+mQAK69oFHZWR2rddSlHUtS7Tj0dSxc8gvwARI4LtSIMxjMAAAAAAA/2nHihgumIjhkclD5QlYO5FKn6rjeNozZtLxGR9GkU22zQMsvx7BYxbMRS5fo7sG2O4NGfQSM12G1p+ibDrgsEt8HGnK1BinmOOyepunvnYbuHYuz/G5GmYLlMsDxDbl0gpWrBJDmL7vup1/TaiB55VDVwD5BsMuRuUdyX+HE8Yoa0/cCP5r16f3D0DzPpZVfxRFZzqEWlNHmGRBik3x2wR2OsURDWkcgUrG8Qo5m7qrcM454hFhpS9tnlkKpMTjPO915S4ZVZlWwJuVLTNoSIodhGiu1OC8HSW1W7ca33w5JQS++Vb7m7MKym1v+9bpJexshn0DwEtqqCcfi4rTs2j7av3+F3cf/WPjWeCwKXBx1zE0nO0Guzd5qnMnTjXNGegEVda1+E76u62Tz/fYS58YME9Wj8Ft92HsrLcFMg0b2Z59+EWKa1+NsAAALj2VEYiUxFK4Duqa2QLUNLFDHKGlOokELP7L4oElZ54uTRUxb/e5q7nJbtpdm0LtTXQbV17x2eAEWWCx02xUeGsFBmEigAAAAAAP95YCVGARXmcFPnVGdyaP3+n0t7UNhAVix5UkG5MDV7GHShULWA26g51YZdlyXCkGKXRYUPLES7AtuSZUFFr12UvvLnj1Z8HhLTyisZ7pucZ3cuLo4QdX2H2TnWr+o4mrQ8hZeIunw59/RrZM7Qr1YNvV6EVWs7jav4R6SSu8G738vdE0soJVYypdOoiST4uk1MXV/ikqM3GaIdGqtOyyWhZkIy42yeLG6A5epBcQrtEpm9xADU2+v2t3Iy/xsQmQnv92Xcb85SD5xwiv1E/j1ZBsbEo8d+eSTZJpFoxnHpEIUNLiXdqpAnb5sV7jt07iqqRYXFAhFMGXdoVtfOQIalEvTphpKRw04y2nnEJObbYMgg4FPgBFWjaFAiMQCKOCqDVVsqwbk4ABsXuQBv0lnxiy8IAQR29VGyFel+zYZRi+L6sAKFKlX7Ur9hF3qOXw6hjnPKzLzQ9TlgST8tEl5cuABGJ2Oy3JwDZithOm+KqEDTvUmIkCAB/nf8JQa4z/Lg/7AA/7/9gAf5ErENx0d6BSwVBRX6u7u8l8s1G27r9kV6H6Pd6oHhS6BO8WmVwFkYyMSOroqGxPTKtBIzmiwHFTAhwzefPuL32b9zt44bIcSNRcZQAQE/wu4xso6gsuf+N33aZcXZityOSDBlOpiSLMd04EwKgdg/yESKXM1N2aLr+tAkHyCEVdCAyewnBdQZ8zUi3to/IuE40yGcZCkUGGF0zPzDbGgsmbOIEkJxQISd+uHlv5bFyR6UNNwIqh7HrGLW5FO+kTRJVF7dU4XVluto0nI8nyrN5ls8diIyEolaiy3Ay5tK1YV3F/cquDl6a6OwFOCigdt2gGY4jl2oj1fkvg3Cs8E3S0/nazLbdJ5RzoRZ7S5vcNX5pgkb4hEW8sl2AgkRbLT4m4P1K7fkmZyMavflXEChFst90TB6SKywEFR4Soo4UIYZo7sP7+IbgGZsZgcbBFACA/sA4ABIvgsbKo9qojDQgj0QiAAAAAAAf+TilQUCHtxzs5AbVHjf1soEDhXJ5M+TV8H1/uG85FlUsYroUcmrOL7HMuVfFZJ51D+lt2+j4Jf4HDRwe+3TcismmWR9U9UQ/4Hmn7N6917huSfyMZTboGU6Qj50x1iWUblnrRWvuqn1t7auhMFLdpPfd99u0z2rxDQ9Ic1cs/EzDILZW1F7YpLwlp/W6NYmqeYMPFs/cbPubeNWwueTx5dNykrvwcVRhs4kFaRsdfV7mnSO5dUXMK0dKXQ3BikWq9d7J0j3TDELMVRc+UwMyTyPJW2Uof2ip9EUkpsVPNlA6lMykoYA0Ie2BFMNoEeIcJiYKNNQQTojzQbFxBbJ05Nqn6WwrRX7vJqKvDyLjoNppscZ5EA83IgrE4mamm/duF86J2A75/nWj9rD7TQKafkZOR3q7XjerT0wuytRsmCzsSwVK97JeHvjAAgJUWFwT4BFlgsdasMDsMDYaCMOhQgAAAAAAB3/9wJXRU7PTvDf3NVZtsdCtkQwDBzgxEeyPJ5+c3EWU3pQ7SkyCTZbkM9sK2rr2NTUXlOeezmtDyzp5XaPY6x5VId4/gNTx2Zsc2V9z65t9gqvp/6nGtee7JnPHukdW+P8oPYfnLdl+pY7FWaq13Sew+eaDoebPfh9I+NM1GNYXOccubCpV6J5guK7HsGfKdtnc2LKVb1l1mXLow1EIyayICZE3byofHKnUDjc0TibbIyDC0djEiZ8kAuPi/WoBMDQ0QSemRUldOp1KSOH5HRSY6KEyk+Z6OhH7vlZqdFHJ51tVWfGVwNjfsJlTYhdppabZyjqRC1Dn4N69Y4q5GozR0KqC/tKd3fljhYUoxsQkUbLMSUIdm8QUscaWnFQk0M59bjjmxiUVH8epsSfB3AAxaYQCM3jSIA98SABMwvoaRSBEAFAAMEyz9ZulrwVB+f3Ji3N/XRA27t4+AOYG1yNYEvvXsurYzxuxy2vXhDvdm4ARSdsjMbLGChFAbMayhcsVNkTfMSyRvqHZIgAACV7d/Xn+33+wOu/5/P+Ov/AAdf7BXPZUWtGGc4YCsOSXdgsx7Wfzxdo1vyOK7so82XxvplEB0s6o3wSRJPJ0uxZEcn8LI43e0lpaFtk6cVvKnBYUbna1ViXmMqGXDVjcFhe4GYyuqbbENSg/qylyRnh87p0tAAwiNDmyQvNeezAlJO9etcY+RibkU6UzU2IahLGVdx48SkiZuMOCCKuEZpd8hsDKvArxOpm/QwjpqjQAkqVDoPQQaZSyVej92YTyuHti9PdyrQRbkvkn1npNEp0wK4qq6y7Qwi88KD1qx0sAAArcu9zhYAAECxkRoAAAEAEtnV1WqHI51jQG30n5Foxu92ei+17ozD3nbXhXXsnnglnY4jOWr8NdptBUTViIcNZ7gibCywNtriwAHru7TykxJMMhtPlk4ci3JZFEAhCrk480hhrdn1pdwxJIazITNFIGRWarK5gc2tGtwrj2o8tCxfEeERZMqFItbLTqRKKjE3ArnByiykYjgBHvgsTIukCINhVABIoAAAAAAH/eoDwT8TIetvXx+/Kgzwdz1MzVu3GHDFVdS2YxPgYtl7IIyKx2gCggO6wuRsnAJKH+VdrVwS3yEQhIuJn2dSEUkyqEiSB8LgKMkSgSzjS0fvz9NgQCQi6OuhOBNwaESnziUhRKAwkhBJCSR1kqEglBcSK0lRkEjJJGLdwtRcpTsskqRU5SJEcufgcmgoQXtGTh0kxTsMkk5IhiQgd91oDHyCQIErFwIHKeAn+I9e4u5u1XvwkEf1L171qxifnte9xau2DurIRSSzzbPOv7NDnUBEos0NPdV9aX7h+4/ffbSIg3DFKP8V4ywrZ0Y6NjrP0f6VsmDOpap5xyLlHi0iSH9h3+emJ3rJ0865FzC0mesyq6iZCx4MWwrpMG20VKqK2VUmk5cLFKiyTk8Sp4MFIAYYIYjOlJrLoICY8Im69VnqoiOEs9Xi6IWro3vv44K0nptwz3R3MojgCtBOpIG4iaxguay4JwlUNTeqxuKVIAuU4gLHwxSxSjx+GBK1D4zHX7ykD2g2f3AY2ZY9FINwARY4LFCrdQ7DAWFQWGhCOAAAAAAA/7qQEGIrRd79YeBjI1OKhJfMUWwUAY5Oa9xYfKlbjPzUk1LkfVee9zX7kGJQWeLA+S42zV5gvy1/7gF9etI/tP5XursvFqlDxTYeU/kajBX3r+U0Fuiw1t6s0t+Jo3yOD6GV/DbBkGl9Y467eyXz70BxGwdLOPN3iToq5wL30ndTom5nljWCmnjx8Ub6KnX0dX2YoeekFkLHZDAcBvWOq72PJY+uVxoJHJnUY9uCoQkEFAxIJGN0rd2KoWZXmEy3X9vd1H3MiV1zJIjaB8iVsOlDWWjBBnmpxSL+WX5KIQjslEDJPdgvHevCWX0oo2dqRHRQ7MdObd9R+c8vIYLTB0BWwfNZeZPWqzgAAmzYDVjmqmqi0pXZ3Syhy2FHV1Qe2L1JBZ8w97qbHz2v+n8OHr+gZYfONccjP4+m3UVZGP8yYvE/T9vsAAB5CBTM1rLI4oU3PEyYVZNrcyIDbbIVNAd/27R2u8ABGDgsUKtVMYqDEwAAAAAAD/bVNDHy6GNY482fhkJJy4zcg6jErcBjks65m3hAnB79maeZYBhvt2f29nCMHPDKYzGnwv1Liqn+I6T+ldIQmldGX204nmOK2Dn/VvMXa2wkB/yul/t0vAaekeUNjR5SLrvFdl13v39LPhsdoXc75pZFM92bHdXwNp5fY/b7LOqRhsjjjXHmzdfDsUlVHrWca5cEj+pUPp22tVb5BDZiYkBh50UgNvGIRHBVRKRDjQx51ZdhPv9zbEsbENBSS9yGM/PTAGRcqTCoypUsjcOuBGTMmCgtcqs18piQFDTkKww0gARQ7kIYtOcecGO7dNnRa+X/D0J+OMoY/Hy5DFPx9G4FEAFCnrysYBjZOWd9LDD252TGGFWMzBSNkzADvXUDSzW4U64p5sAAFcE7kt/1qjQm/rWr55gdv1u4Z+aLy/vdrN+kr0ewCwg6zcN6M9chmy6dyEMTpNKcmqcbfrwBGjgscJs9HgdhgjGQRmAAAAAAAf86y6GQg/F0ErMjv1Jdiz2ICWIUWd4w5d7nNRvL+iwjJz19NzwuxnM0XnMcRnL790Y/xopOgfJtfO+b1eS0uOcSNuTw6Avz+b2LPghMHt9nzmmfcdyvFeMV59jwrV07xo8Su5Q4Y7Zr17WWx9LrfoX2WHgZ22H3KcoDQhif0G6E4p0hCpg0h+NmM/Aq6BhhgkVV0xxzkNTeanLqgZhlJU7PGcinBbBQj15KQOKWa5xmmDuJOyPM0IsWjMQE01SAl3mKZxKbzZRxtPaGZMqpCeF8mZJqZru/HbbLbnJJgggbgKeCHS/svUEIY8Ff8tJeTdg8vBuAmMScBqVZaXlIFmn2eH+0WS1W5e/PlIOXbVzPl1QAAAJZOhM4HGcudmEbCwRKBAjfS5aLjVqvyxxjeOBpwFuV0KVBSvTb7oATQrGzHSdnUMafbTZCvAzzcfFCuKsHARo4LFC7VBrDBWOYRKAAAAAAA/63vVAiIvitZUGfc9z2yCyyFOhElTTUylhZbp183rJx+75ckdF88an+BxwrSVMbAfvXKHtX2Xt3X1G6N3Tny/tviHf1luea8x61gx/nu+6yFVS4bDN+dz0xFIG+FtguGP2K4WKMYatT1Iaf6t1ibbTRKUuJTlwMJNqVjCbuVZvu0aFYzUMBu9ra04pdGAV2iSyTVkVbQVyFpk2DLnJZO1TuO/MgjOSqcDJhBLolU4MOOjFSCCJDUTwJk1pIUorCVAXETHZRGNOaimeVKZhZdZ3obPJ7lyyWryZLz6yoycVwagjT+dhj1ewppNUCaM3iC/FTGuG4fmkN+vklOPEXJi74axZT2d+yv4z5QcmmNtNF08DQK2LXhhgzner3WvWCIMSjEYSC01WNLz9Tkd3bIWjFLhFX10JEIXKu9jWrHJf/32ECWqE4062VlCGbLrL5KU7oJsmT6XknNtpv4AEkOC80WCsNCAHSgAAAAAAN9Uoa3yqLRzfd7nh843B3BoyGN+n4u1u+e4uMo9J53CTCD4uQqYpeq8EQQgxSERM+oJxqBOfJldRASSCS8YkyIJnJU4pJ/pzsEgY9YG7LtwZA4dY66IOg0QgmRlnqyoggMXePy89WR03+jdAP1pMRCZQ7m++fpJA15Hnv/2/Vea2hghegwZBh/o/7+lvtnhmZ/uf5/8nZf3TuB+39+nfk/B0z44zy+ekE99HKjcZm/W38Pj79GE2OfIELTPFYjCAxZN7f7BQODcsWPTbRC1+xl0eLq6g9BoczRxeT+hxoA1kFXgoRIjJxCFllyKhmOmnVyyiVRadOOPs//92GXlv0EAGTjZERjEqIRQIIGmb3FC2W4JhKGyySpawmc5wdv3dXHWlQ7jExCFUOPDss8c/HxlehUz7JReAPqpErid1zsVyz6Svf2S55qx28HYv1f8+WYHpNR/XPuAfWoZR3qHJ+md/v+3W1owxfATo4KnYqIx4KhRDpQAAAAAADUogPwnQIzNfa+l1teDGTKxxjOLAAtcvCquWzOjhJdYlZP1fv/wfdurv1koar/L2O+SdAtPfGlgzjhHxnsXOJHn9rq/OvVPSO4MIkHC8lZkyAH9xZPD+19jrVcrlcjBCB26sI5zNt+V8PVkizN/V5+csFHY03AWQFmuRWEYhBjdl7P+dN//tnsz39SWBbERklOZnSn++XZZnbcveV3GAuv8fGWX+s7Sy3URERXNvySzsztnQroRLu/q6pprsZJ3kkE5ZRinl93V1FQRDHKQmEoJ02zvHUBCEs4GKiYgA0FQBiJUVFREYCW3ZZnAxKDDI1SFz1EkVBC58cDAQIMAMtOeXTn7+PwntfR/X/h9H8Q0D9g1+6Jj9B8Au6f5vZTW+Q8eu1OH2WMWAFEP0ZgOABNjgu1Dh6CEOlAAAAAAANeGBBDuUP7JMI6xcSRC+9kjCrNm4pnHk4nu0cEggykbz5dI6BDpXnhrjrQ3MUg9aaJmQP4qdSVKO0VxWzge8zFX/fv3zRPpej+UoFgYb72rmWJq/2L6Rc+4PWbERX+spND1hfvTJnDN/bvHnovR/89O7RtIEZ9lZo1c6ZHuNiavmb3/KMRzLlVm3ZtRZ5GyMnmMjGcA8UUH6FiJEz5K6Ywausyqva9Xi8UiI/VtxwEXT0dOK9AilOAiCk00/TyakN8hOA83ex4uEvKtytdhqWcp9AskmxqSLc+bMudJwqndVRN6k+hDPL2NS2hfyZqhyMvj0OLsWCSZc0Yiik3ScnJZKtj6XF1pradPUz8p0aJKJDSrNLVUrG9a+zYhfH9mbuameyQbbfevEBMAT5Vu5QZqcqpq8Ug6lJxJPVm5SowgO2JBrp6yzhEIymrWqnFmIqUcJRgiKfCAkDf9gC98K+6gtlbSJqSLyqtuCYHAE4OC7UWGqIA6UAAAAAABroBHRsmj9cwmVCWbB418UuK8Py15XUC9+6ZAUJv896xTV+4PWtdN7VcSxxlu8f9OhaiBQw4J4NrDnZ18aTqPIBJnD8xW4JlDmW4urrpJ6l/SpK6RZ8/F+AeLykKsh7h5q8d/5d8t7hvT3fumM97g+L4xTH5E4x5hb6tjtd48yup6T+h6U/2z277dhJyUZWq5owdpMqm0dHFAkgIDP70DUTLoTVM+wOs0q2GMKr68UKQkyQLLZRSqhMwiAGrqI7hwLEWmQk/kzMoqFRVWDATY0jIWvZVeLAXQr9xr/T1uRu9d5smc0Jqqftbm94S+xpbb6SiI1OLBXidYvwxYNtOTrHr05MtEyQKTNSc7nOdKmkUyZ8iOY0VRblOVFEzFgFHozd4u5elJDMZaq57CBb4xToayjVNJnW1JJQqk7kgqc/W6LAXanHYT5tGVfA2tYnxwDvu+rn2zQTx51uowUnvfD5zFZ4ASo4LzBqDCEEIdKAAAAAAAblQDjk9JM5CUtBMCsezvncxc7dS9jexvH5GzU3aDETsZP+qOVOlf8uU7VHSlW7Ry7yf4S93DYwONtnWXs5X5mkvub2D/V1nuGr+enHKJCIj0SAr06oh6asHLvQnmJj84uylF4y9/BdFQxRrIEXVMc0lI9J0d+PxWf8CuW+Un5k3e99CeZsr3kpqG5C9xDbqGOVVGpPgeVSGOXIJPq9Zup7JfI/dtvLrdc3TmgXiN2KUac9jIhXXS7mrLA0VZUr4wRjEJVUyTQGSkhwqoilczSZdpgbZpaN4MKWGN49bUzjKdrPSKCyLFol8oeEjF90l/F4NbVRrrGWTZ0hYFKllBM5dQXN8quqCzZNFDbX3Occ8akU0GzbQ3TU2DXNFwyEZ1JMwn76LFSzBVFVSmGCayTW1RpU44lwFYSZK71FIZ3JTmiWWmoHpU44GoLKcOFmBqdAZygcFiNOhYUFDQR308dG8wd4QOABKDgudMsLCoLEQYh0oAAAAAABu0BPOdGEhI7lu1H7mcT3lC8pru9vRb4rZ2WYInSN7mjCr5qy4N54tPUfVTT0L9NVNEaniDfDRLjafrjtjTVGyNAhPFPPv/VBRsLxPiT3W4fx8ltFi6/ZWvS8f8IwtXk71Rmja3nFs8LkpFLeyqrQSNYlErbd42wXmQxkQl/q3BWDjHwG0KCULBVcni5NLENYKocYOiUPALNubHPo4/F5Xc3+fliAInHtIyuCIq2ZsB0oIMTlkzCySflft/B8GbaqYrOGQYpKxiT7s8IICjZlw6SALW0QzBS3T8cuI46ETJctIGXhNOny8fGuA165By30naVFthgNoY2Sg7Muj4i3YRohM9/3rMqDxuuiFsS7MrWu6rxWyzRTIdmYmUlXcT1sYAAE5AkPXITPzpSn/PhIgRHphUyUBBgaOehhyc6t3SVCtSEu08ogcAEgOC/UKCqQzgAAAAAAL/5lUO/KikkqC8fL3w+LHF1rxZ3J9y/Ec75i1T8bQAHfjj9f5zw6f1/DSoSQJTF8Z3mj78x3p2CtrRNbhfE+gmUlDA40x+DHifqarxX9BO4PxF1myoOqvTa3B6DxlnDBRXaP0X7TrxuRs1/OY+FnLmf6q43Lz7y7xTk0F2j6S5t+J17S88s+NewZh2HIy5wnK+4tYuQfSvQuaprotTKRaTq33v/ldIbZ927nzqL8jzNsqlHl7grpCPsRpbHUEvvVM1V6eZGKmLJaNuW9Ik7gTwHTjxSVyx5mXNOgRLNWFRu0wbmb7ddyrEIQlslpkCcamuU9AxSenHFQETEHV645FOZw+RpHxtUr3ki0aLz7rzsw6nkxcDMTZxVGpAk0JycCJe8U6ja2T5whBG4fB7bDFecsKOFAbMkkzrPwZul8X5+0o1jehW+SWoh8tRAWR0sKJwyinjOSEP1XySA7832bu1ey87jfX8I7tY+Hf86OKQVqmcsOzGdJhvdGr53VNEAAJlQEhFnAgBwBKDgudFgthhLDEWkAAAAAAAG7QMQyeUhQFrT3Tw5zviCsW6uvzxH6gswLGrLpizeUEHNVPLdVU/MHVillrDau5j1jDHVqj4zJFt/+a1RAP4H2zDKf7T43hUO139P/16rnqSi7/POEjsqwWI1hjWrZoGsWRPx/a9Lt9nxceudTnAdUxihji8fDKy9r6v784dfkZDBcmznx6vb5dnCeIARwAiWBm3sCQFEgMQ8fAoQJTEjgbisRGKCYw3VvkEEGBLn3+r3WOtmutGxtcZuNbLNUYkwjEqDAgeDLbjqoVDFnt8ctChUVFRQobTcYkQ1Ph93t54xuAwxUcDuO4xIibZbjB8b7gEEQ5fd93t577nOGMBDk5GRwNpMABeX3e7LTp7fu+73eOWKhUVExioqGEKFRUMAAhQqJjydXPEwQm2NCgQsY3AocDuKyXt//eXLLJFzzlK6DzzGMoNRuyugwjLJLM85VAAKIiIP+gGIA4AEwOC6UWHMMQ6UAAAAAAA3LShtsZdG6L1vY4vZcGDyLYgNWOanRJudPv2JkinPHlw6k0nwza+jKS80/ByoPq/Vuie4Pz0j87xfSX12iS/gv6XsV6c/kQB2D1p6drb7j0X99np1fxn15L4B8t+dz59u+C/zYPqXrSTGJ9dU7z1VwWGLn1sx13tV3/NeeMwbdWyA2HOLlD5pPTzziYUdTQMJJ9CqKSsX1FuElFQgc45TSjovIKA8kkCqv0bUkL5y6mpqQppkQwDZ4HmzMLJjhtRyJ2222NPxbC2mFNYZNEmnQlUq8omV3UpB6jR4NSyzIwyrYCGCyaKUcowTKOU9gk2FVBg4zORZqsbGnSaofFf2qU2aVjsk3pVtI01K211OjV//Z1sZqvGCGTjFvUYum8UNG0koshCEl65mhjuPec4d+S07CxVQx/Xa1UaGdS0HoOmZAeYVVYR4K1kJL8AZwrdpJUZmZiPQZAe/1AcABLDgutEYdCYkFYYh0oAAAAAABuTJBMHzFBM7F8ul9GPyb7hdpknjtrm3x6LRaGIqXbrq2//TznF/p6XzjkN4zOiledeWdToNL97e90bMHF+5c8uO+vkKIA1yKqUiJ9v1tytHKxTGe4fNzuYdD8fxhPheyKTz3rfZ/P7kDyW9fUQ1yy/t+Za5mb/wfx0ApttFDbB0S8yM2OZSePTjpCJdFc8hHt+T9UmAqa2LAh7P63sJDj8JJ0PLJlAZmrDXZYjh0cWoMxIAieqq30JylVlO0ixiaKPq+L992EH39WkJaZYrNuE3ZNe89Wf0YDv2ITgBVvnFHb765JLxdf43WaJlWuAmMooTSSCXi0EeWwbjE2kbTxYjmtkJN01l+lghemjawo1NGYA53OcIQkDpOXEecFsNrSlOE0xp/L29QaNUWtTsYLzTMle4VdqBe96wcwA7AYbhciW43R3KTzYAOASI4LzBLDA7FAWFQWGIdKAAAAAAAb+AcyURDIky13y6kgkoEHgJNwSMw8+N5QnUOZrtNZqZWFY5WzjrAR/wZMf8FkWd1TsHKwnDLx/wtmo/k8v57sYOrxdxZCJ0n4LXRN+Z55JJKBVtk+V2wH5OgQXnUwOh5/NqnUXFdUvcN6clYH5H1X+HrOGdTdwYtBm+qaOW7m5idUO5p3zhLBhNy0CHQu2Tmv3fmGCo6+qtXUKSar3VzorlvI4Eqj4tV7vaRq6boOjFuZtHhxKl6Qm+ijdQxr74oMeiXKjxfZ/+fRZhJJesBb59EywdPWDRmCyj7mYlc+zU2oVLKqlqh0vBkYKlnY+OCu3WMYdyxHNZ7bG8QhPjWC+WQPepqLuwmQCzcLCwL0rHBXMu+LWFJGmNUFYsFY6mPuFRWfCWuOk3+pNTF6OdTVNdspfs1mCMOvDp16JLtVjlJy60ZAEAJIn7XDRhZMuAOiCGgjxjPMNDMgkS5/rUV35rWXriR8EmxKuRDabYAADMWEmFM2IEYFe4HJ/KYHAEiOC60WB2GCUKBWFgmTQiMAAAAAAB/3cMoKCATfKJSjVkGogftPYJQIrwOgQ+kzW96KBrbOehtL9CfN1R+B7Y3qSEiWw8WYMH99WqLNBO4Oovw1FA+Z6pkPaPcfx3U+0Pnc4eNdo7cE7p4v/0/Xp3Lj0EsjTdZEhA9u6qrUV9+aZNXMpfz1pDJQAdT7BqnvHQ4YoxmrjMLm95ztu051x7z6H8T9TlMye3184bE5zgoJwqhYII8ORZXcyzMUr7s9ZeZiDhZO1epRihCo0CQnxSRS8CzIJSsvF0NrrXkinMorkpjJJ46ivY2izSItN+CjngBxlyLaIP2qsNgPJm5TVzepWdrsiNt3cR8OWTi2AnOc5yaWKZnxRxwM761H1Sa0aM1AToBZUnI3cFNReDQ5tHNuartujm261Ec0UjBpy2QywgA4BV8VibGnkGuQLKVvtDotUpZBRQUk5tVHZYGRoyZMdelulu7Z6Y1kZzebv8kj3+EOcAt/klJf+rABPFKGjhACQAmBdcKhwEgOC60SCWFiQFjiYAAAAAAB/3UDjqiCQklOyETTHdurt4/7YCaNPwvFO/o5cU4xaSIHliN4n4lXBK2FInSUFgVuCldcb24CUzVCDuht3LSvtKvjNgfesR+8/cscVX+R3V9F9TjDa2BA5Z2BKRdJp/wJyH8HrEWocv7VfruosZ59Hryn4P+k3vBZuiFtG/VfIx+rQQsnBE5wJudngiHB0GVLSHTRkUhIoiBWBGmXAwZNtui8GXLq4MSns0QWDDO/V/ltAwt7vFYCiSdANpeuz3cE8kEZJVVKW8JCroYtUZSSS6OVCdwmeBns1/xuHDhnXZQYAAE9VSq097HLN33rZg0/T4SJi1JUV4Y5AhCEYo/Oxn/v/mPMJqtfmbFSmt1FI5O71CD2KyE4m/dgBqYvZMqwAA8gsnd7vhikMhwKMxBQwQN8xKAAk0ahAkIwAANqmeRyVmYQALTAWAErABAi4ABIDgvzDgLDQol0IAAAAAAD/rKjkHypCdFlQPf1ZitQmje4I6+zLb4TU60uGQRV7lfitcOK6fD82laKy85dOzzBqZv3WLk0NMLHVOkuKnJR+1na8mqERU1Cv3C99e7Sf/WLqyi/p6l0JywY4osVQg7CyADtOzAkzsrQv5frDxb0X7lg5/BOr4g5aDDLAu8vGe/JmF/Fogfw3Nvn0860IgcSHFyunsDYdWTD5R+rpN++F6aY1Xi/iGO2XQWSDLwFYJK+n5smDcbsgzdgkVVZ6nHN+xY5ryblWbpFxGRNDRVqg+XTuajUb4AwuBZRrU2bppI0luhbZqMddfWXD0bzcfJUVH6aQgQAeQROkHf8DQJRLRLQBSYh13eSSl6b0SGlFztjaVVdzXwwoDift4eEwFAAlDMA7TukpAKKzaXG2XfT24kdYEYIUjoDDUVntMcE07xGtNEpO2SsiirNl69eC9qyVMmdxCyV5sjQ6QARgCAkqC1wFjgARI4L1Q7DA6Cw0EJUIAAAAAAB1/PGKGPhk8fmZOwcnnIhTYpqxFWJOtuC2EYoxZintuIok/Mlar1LiHYGqs11atXvGRixzbq7F4wedXwTvHn34XOMeXs3b5kO9uSZuiGXbhpzvKJcbZuuNigmfaU9i9O7mJBH+uz9Idz9mW83OwPtPnSDWlw8YkRhsUfVr96e0JvqTSQO4/r//HjX/xrEf1H0nOM6n9p6f/c8a599o2VPx9TcGwYHK+CkIiHunkLgY4LR4PLNhzL6KN4Gu/aUpC8p7LKzFhDeqxNuswrF5cL9p01WVWp9XIvUc6bzCr6xkylequouBciGXwRqiapS20WwCrZIRYKSTGBkcEvDNQ3mTxqLgm3knKVDUojGM7nI4tIlbIokVSA7XBz29LBA0Fnc9zVxRIpvZdKuH4rkAX91OM2DUoOEiud819NuCKM6BhIRY9v57kokMzmEfMex/BLBiixnhxfxwvIFMKIDFjzNum08biY+kaq9++Y3EVmkSUTtbKZxfMMBNa7QXnX4AESOC80SwwFiIQRoYAAAAAAD/yoB/XIr0NatILZkOHyRBUs9yC4Xq/xtnGnZLUhY/ka+HU5G1l6NXa69AgXbWiJcFsHxRayGTVeccZlQG4NgMHQmTEfKPPT/1PsOl/AO5OUfk+V+NZSGQCOZC7s2fsL7HSO8PgIJh1h0ZrC3Ac/Y8BkwNgKX3XnfBxfZ+aMjXK3bl97PbidPYMYaxg8bUn6/G/1PfnUEiSLG+Nxn2reUfaofT6e7sBmhg6kproi5/TqpStZQkLHohAgJ/QEaTnGKGzu1sY+v7wqPNmyh6/yPbmB89iUCQ0+6yjqkpmqN08Mc1uz1dbOdLr4kXBJbQsxzeWe7ZKM1ies5bhAGQAWjMTzIKwC61N3n1XmBUE7sEl5FedGUipPBza1YJ2f60Q/wthXwFN5PL2eT9a8UINU+9TAH9wANu4t2+4eoEvUB6bAkChQAm7TItC/pRK0eW88eRLi42QOhgAG4Tkev1nZMS43r/LvaXb1RnrJMD2+ARI4L3ArCxkGY0MAAAAAAB/1tW4CDY5ElcnBh5VHzrwKjszqTieGJ6eks9NtaQnV+UUrgijgiq3fKi+s0UcrfU25h3i9Pd3z6XdPcOcMd+bd1/E/XeBdPOPS/6nTH1r+0+/zvEfLONp+BZ4q/qUF5/zToCtRx9lYH6/UtbB6r/K5gT3Nra492u7diz5LEtrTEPX+mVDNE8v93QE5/p+kzDhEOr18XzNr8hLgowyAMKUL9ibEldOJwON76YRl0fKgZG04C5TJqBUUY6Rdxpahksb++QdZdJ1oo4rgn8dtO5XgCJgHbjEaJVG77brOwit7UHqur6pV72Svj19W68LrKpMLHSgb5QACjCIIpmWR5LvT5LTiusFteRN9IxIyAD8+vQapNChovPI/3vabd7H7bi3/Kpk+iu9jd72dH7IO3/UUBtjPs/3r6k6PnN9stDQAVDyPISjydn8Lj4eMfCoSVAZmnS6QOThMztHBurZqaNBFXDCoZM1kP4mRn4ABElgsjGqrCgKHESFAAAAAAAf9wBEKiVW2SjyLOHrTt7ajQ3/edjxryxEVlDWIV9joWaC63nluzNdLL1RK/cDnEDsRgwT9Li+YbHyl+gkK7x2BLwtPB7W/4vdco4mj73vGk8lmcnp+++8fxEapLD7RzG81sPfbyC9JKxCto0yxv63aIyaSgeGoZNpMOhRaaUoLTV0BnQ0T4wn45WW5GHiRjBBmZQR70KKScultn6IyA6AWuhhGkhmmA/xBzFLNcbLGWhhBijHAJaqdEUscuwxBdkMgG1M8al7Vat4UwfFxp0mSWSFnOWdRzQYMxJbhw87CzZ+wB0H6XNdmNfAf5UE5ztn8nvIR71oaw7+1Etx7b4vUiW9Wu1avGWHZHz6PbkWHn2vEZ/nc4ANPkS+aKyhRBmbuYdVgR7kR3TFn3XonhgipOLl4O9j7OQgyUwGcAQydNsxqKMUBv0SBu02cESBuVIgoAD/f/ULqmvx1P+ABfn6/tKEoff62KxGkrMiaBhiJdXcEqnmdxabi26dFmVkFU24/DpMGHLBAmKP44LOXzRAw0d0x/16by8ZBowhfxzVx7iElsFgOKt8VFZBY4em2vu+P/XOde05nB41YMOzJYOLeFkTbm9lR1qEXciaPbzaVN2T3fvH7sVMxbVL5HQoqDLMgrGFLor2mQCoEZ/i7xcszB5YqZnFrTYTj28jWXDYpcvzdIWrJTFLg2PmHV0k4tzFXvSuiUvvgRgXkK4kfFQdQYBWsF2iafJa18VOjbD5EoFZ5I5KX0UTt1GOvK5eNba7JW2hi0meoLq2qF67nG4x/MS0GVWdPGuHl3ykBdjHQAmZ0ZdNs8gbqPeWs8h93QLogTPAxxgyYfJFHqam/swZ42Fsfs+4cwcUq3vB6Q2WFsVDKUcgpdu5J06WuOhDzQ7i+sS7Z4zawpEuW/bxryEQ1zUV1PSIJmCYiTeSG572BpShv33eLKc+jqhOlS0igFzgBEPgslSsNBgthZJkQoAAAAAAD/vUBWgJ1rE6CZUhY/m0DOwcFiiuus6rtq0rOpdNAGU8jWQ7cotXnD5xnxqzyiAyzze5fyb+chQbT5GBju1X8dYqsHHDbR5/1DcpLw7e5wv3vobf6+c2HYxuW++/s45xu2YbE2xZ5R2yLyVylSTBSjpLcphX3ch4Zmr2rObIiimk5KZQnIHywcwTghXxI02Z7N7MRG9LrpEsBKiDLilCXvU6U+ngcK/dBrliNoP13aQq+x1vV8nU44i8pYe/nw608LBs2oUebmcd/HVneuAzM0LKSJYFYuI06kUc87KqLBjRj39Td31KTE7PfqAu8P80OdsaXwwkfz9q0BN2/fzdfmorm4ODhSQO5PbU7pEgDfMrxB4VCTuyGV8T4CFO9fLejnvu2/a+eydDoDThP7m896L1NQHrv1G+nPj/xOhK9PxgZfx2HgaRxhGi5f+ykWYuVt19gKB4pIdU7MQIcARA4LHTrLR7CxkIZEIAAAAAAAf92YCMKORFkqigkSIrWBWJ/krPyLO49LfBWuXdm78u7PdhiYE7J0OkZCkYVNLyvzN6/yf0OwPOH2ui45g/y+b+M8TTN5PE9x1XOgCAjY8NoX4PlfX5k94fe+L5JzH8Xyl6h+07v2n2J/Q1Ryj9p0C0db6ehlHAZZg8nh6/Eu4PzPX16cebZ0tf8r7/e9g9E9ErGQ75/wfUeiRjvO39utydzp02cZxFDr5ZrIcYpEptXRz7ctWGGZn5YoYRiQkNNONHqmNI1yetwaPkNTNGcjREFhZN2+P3JziB9U4CvPbnZrk+vYd0tgGU9yXdUK5juBAoiilIALUHOi7AJxMs87LL8C5kE3gi03JUIC7O4nTJ5B1WEggd6t916E77/BFVglFuWrBvyP5eczT0Mh4fxhBJISXcwdFMwUAxH5//n47icc8cAKXOVw759IeDVigIULRdUnfctJXmuGjLxmZ73ARQ4L8x1OhAAAAAAAD/yAoI5ESaFBag4JCWNRFhcG03IMNcc0apqjwze5x2pFqeX5Dae3F+75Ud98dC8+/EEkwq3HQAaVnVnlWSKCJkIRGQvJxJPD6por6C3wSgDmlYtIJI6ySRWjKIxCemcv94POZ/vlBl6XoY8ui/UkkoydHk2ZZswkGGSmgIlO+Lj199xz7WJdzcrd8dd2iOyd59MYjbXquafEJaJxt6DzF9fx4P/NUJMqA3tdRbeD619df2vsL05b1/9V8N+o6qf2L6hnqwtxXlzzxTCJjmi1i1e/ccctU2wVzHG6JFjjlVlswevlpaUxzquwqrwRc/OWp+MqqblPW1DhkqqJg/2d3EHdf86/CYnkpXRX5JLhp3S21Vm5s1skjzFqvRsSC9gvoK4OsKEt10PWaGxV4WBOUCzKfXMCMgMd1SkbkYvJXIJsgFJY1rE5CNzN4cWWJMu74QYlYLwxOYwCJTFJC6zYAMb/k+H3YxNZvtrIABDbdKjAQ5ZNxVtBKWkSw7Bm5Xd+2097nWYOFbr6ZrgAQw4LxQoHYVHAUEZ0KAAAAAAA/3AToklJPZp51J9o4r6EtnCGvGpEZ88+l5RxOsJEQ8lLcjDO6R4XfLVh2FTf6nrWwenthXaF3ZT8VG8kR/brrNPCkqovtw5cT9EwdEVq3yq1D2z+lwFEsmp36HMNmgIhQREXYGyem9pOjC+sFeveaZlBnOwdwzzGfzvjPLuaGLyfwWBE9cJV67y7/N8PwslOfmuX43gFmd+lFQuJvFvZsV72Kn1O2x4jVlaMs07uFaW2slNVU58ijFQkiXoRktYBVqtkkgYKxYvWUhL5qlA0UpIJ9X/uNwKaiR2fZ04xPP5eqS+n6f1zIH7/1SBKS8IRgnVIpaMQXQBHGsn+Hi5DX9rpbSecOsejft73lCbj0tSW/NKcOLsv1ndnHAB/i48eejfgM8UsABDhMaG8gnWcoDx7IXcxhruIbFnukjFvy8KRSBFscS59rldvn/AAQg4LzRLDBVGgTIhGCAAAAAAC+vwDTDPSH5hsAAARfGIWFfD3cGVhYR79wscSgCeJsjrgdZyAxm4oAuZR43ZqpNgSY4R0LuiYaDBo2uzVsG7Efd6Oh/17lupx0l2T8d+A1B/Hn8lpGIhDdA67USEIiQUtDS/GkwB7CyaGvp9DK78o/rPPbvN1VQZyDRExmyArBw28jR2IfJ5MJpffXi5AIfn8+D07bg+0fr28VjNv2PWX3/TfBKxLwT9TD+k/yH/L2b0SfaTJt79Xs2wz2sbPZyfPvWLCuV2rxn+2hzwjxU6kbrkeBWSz4DC1GndMigghigz26VH9vrm8RPGqczqOuF/ms0TmmgsJJhucuFeNKu1AFV2g9eVWMoSGXOctso6wyDoNGBeXNlPHcpEJl2GWd8qo77QCUioU7zGGAYUYo47znFYAXx5yXj6/d31IddXjOI33QZ560kD1QXQ377YBvBan/6bplQN7hlqAN1ieD9ygf79TlsLOaXUbS9fbA1YwP4xQJxjKGJZD4QAZpBJsXdCCRE0JKcbmPgBCDgscJttCgVhYiCMyGAAAAAAHl4/yAVlBrptTp/zcic3WIkrWfpCz29kwtjoSUtTn+yKKQ4c89ZPmMu8E2S69k8Po1mGyGH6tZos5SyG1iXUH7x0PF/iM/cWWmH5Xuf7h+H56bKP17zrgr/5Ru8FW9Qca9x7ujSbZYDovsj8Z//jRpEOYdeXxPOb0lgP9i4vyx6bIKVhbWSGiCwU675g5ZPWTQsGlPe9sf13Udr8asgbC0sNy7JrVgAzFsuoLRb4Fu4xnHEKpyuPfDlURHGcbg4i90eCkGFrifKwnkpEmLAUU7DUH9Rv0/4wCVc4kIX4V4YYCwG4s9y0THiT3uxUhBgULgBC69ftdVArUUOYuNUHopasVCV6+e3BjldjuzZjVmsn/deVx9V1f7oAeFUmZjCjh1PjmFK1XMZG2C7k8j3TH4OqioV+iNLplQ0tyIL7vmu59ELjOHAqFbyT9Wb7LwEAOC80SwoOQoiAoUAAAAABK8/AAZ0CSh0JOX+v1RimWqVRvagwoXO0w0ViUMdNgcRvanvGPdPp7f/FOOU0AhMaZRsHnWP+dtbwf8j6ZlYTlqUFx/UVZv8vtogFW/SZCbTl00+gicyj6j7y44Lmyux9p9IUALpHn1h5a+6Hm3IfynGGF9XMcwaYV2OY2y7Gl/QqcJ1d+5to13augFV1VyxSO64HrEJRUPA2QCDVJYei4KjrXPXnjDbJ0lcrMe5Tksb+fXpmJs8Qg3JqHBmI0MHOQRA6bMIAmooxLNUSMtkY7vjBwMa2iYEiJN2b8Vbo3E4AoAYexzB33ke3Saf6cwC7I0Zypu5vXfB/PI3mJ/2aOKZQRhIuu+M75383JaT8Lp5zCSNiyLxq3qDwAiMad7e27vQXMwJ1CaBTmLrjJ/KmAHWZ7ovET5j2ScXOUmtSzmU8PobHO4dEkyXWdj3v3m3eQfIoTLAvhJJZgyNqjhstHoeqPhpbWrx0s+ScAQ44LEyKJbYFYUHIRKiQAAAAAB/vKlJUH6WsRUatEbLLz5e6sXnOLc28plVQgGg5cF9a9UXCfl5RyvIuAB+1ZNB3Z13rvkbh9Ci+KjfFe7qhT+kJIDBc6rwARKOTBV3YGHdOV2LIBNve3kQpnZ/tXsP03f9QE4lsn/vvX+Fm7Wd2gqIH7ugC1mDjTc+Idhd00Y3ZiVM87G0REeG9PZv2Tm31rC/XYD9K4Psi8uZdXSHmmjjo14+lYTt3MT6TRWnWKMonHpeRn4m7rQNNYocEhNk6R1uE5ymrOLZZyemeUOf2vTTmPNKoB4BQB7fs3Rv5Tot4qSX6uncDuUEWnTtH0NFPZLGr3aeyfRfpfnutBl5yCkDbelqdfU1eXpXz+wC4MmEQ54lrmD1dYSi5LkqtTsFFxpvlPEqNOeITynFMA0YdIi7xmvRrNhEJAebHJjN3iNlJ3YKkk+NvNUUpEKYws4m21wD+OC9wKwqOwmVgogA1sAAAAe3r9YABOigkBv0/lGDxFtxE/fm0lW3MfTJUDFA5BaH7ITjciloYvkb7FVWouRq4D60j2bmTjbl+0Q/2fsv4vXnyXN34Po+6UEVhn0D4zq6iievVqDeHouDAt5FrQiYBfvMrBqYWb5VBgwsv5VTb5v/DRV1hIgJdIOrPTa1ERGH+zpni3NOqezPzYrpGwbtDozLTs6735Sv/WlYJFo+jBzvLcW3dVWNao1gBawuPwNictIeYzznCmquUoyTOmhqqk/FN5Xei4uTmkjxi5FQ8MzoQQxQXTlWaerKhbwKKBTLCIepIYcAAn5/T8/nPd2fDOYB3Xjcbku/njANx3/w7YkAAAACiSJWrMqHj04lA1PGHhdKPrYPe2OVuiv0KlfSPEv/MKelRlB9+VnFzBKR8vVepg07xx7j4z1cIQDdMH1mv30GPWgN0tlVOQ65yyoSEUoco5oO4Ba3uiru3Q9xBCAa4577caP3I8L6lXaMdQn6cs0ICeAD+OCxQu0Udw2GTINwsJDA9vF/HzgAABxmcbnHj9YAFmEk2PGW/StFYJLooZTzWAmNwkChX5k2unt5lWPkFTHniO6dd1tbCcXvOnrKc0ZTH9J0hHvB+SIfsfxWpBKnfHf+6HXkIfZ2zvXpKm/5qaKWfvRs9yfOjFrs1e3qzaK2sefvNdyrv2VaLgdZ3kV4weY8Z6p2sy+gk9Jsgav0WA08LPPOGvRhNR0uabzodlh81yy4L1UKpEMxJIc4JkkN19kzc+Xf2fJ7TybFhrDNWRbdiP4oBgFMLAwAwVytiqgAXPEbtXPbGAtcboF1vnHOKxuYwh0HXfxf+P/jdekdPs3zOVgEM735SBmp1LxA7j9xs/9l4sv8tskeJcPCiEh6MtmbD87lVU2YZ9mSJnlIFNdOGbcKLLv6ls+c8K7O6D3CKA/PTgrY95THOUpLOhdsUCgSn+G00hCBwm6JUaT695VXAOQSXuHEpA8wnV/h0T99n4AD+WCw1KFUFh2FhIFRMKAmFhIMP3Z37Z+QAAD718/v80v4Pn6AUSojER4m2eggDEpSkxka3oY1CiSk2pKQESctFSGXmU4eGBigFwVsKuL5gN+w1mWyDS60+OC1Wjt5uta0uz9fwy1ix6LoHyk2arh+XyyDHqJQGGCbO5uUZpy23wTJFkowFgeAABsqctPfDAvS7m9dbbOl2KYXDFHLj1bdfTT67ia2/GQ3rgDDDBBJbljOoEXnP4M65GAEFAOiPJdT8pJAhjlUBAABFO7tqNmw7sFEWtu3VvDMFbJjxooGNMKGXCInB+5Tb+VxQBs/TLZtV4sZmquQNrEhiUQiUIiD+GNKL/TmsZFg58s93O9QUFVN/V2Q0XRORNX1maZ2DmeeQAY3E1DX4AORJeYVDoSjFgLAmElyP/P/GeoDhi5nCCzENJRYtim0NFQkz0LWJ9xskXu3g4LQFgAgLnBwUv382OG9juAEKnNrzFHqEgbtJlCEgrtJoJ0gb0UiB0gA7b/z+fAHXtxX9QHnf851/UB957D31XgEADZMEFd6vaYSZx9B6Q2Z43tLvD3/D69RgqIrmeDMPNaLSebc0hz7HuO+8VcnIHDiOK5zabMATKcg4eTY5GEEmRcuRiBCEzm0cPYyjvje18NoH5O7bZaey5/iE0FSQsryvsMRjgsAJF3KR0mhU44IKdVk9l9Ghria60MDZkKcdKhrUE0FVw5TDM+OAJ4D2VbRCdL/iFZgUqwCAGKbRw8n2tkAOlreG6/4GCq7jlUNRAu831mfU3SDIEIlAT3lyb8FMeQkyJ+k7z29T3vH3vDGYPleZ7DlerVECGy6Y+uV+h0yVcdEtCfhcur1uk9xLdbaNpUcNlOYO3EzNBxB5EfgIuFTfR1JkeYd/m6vx6AqgABXWcjam7eIjD6VU56BL6rxW4fF8doVNxF7i37Sa3W8yKUxQ+ctTNqRc0pB0+lZmcAEO+ClXGhsFBOFBCNDsIAAAAAA9v5VAB+9O8dU7NAN7piDHaJ+RgyVRf8G6W1wWC8/fFcieqbi/1EiAtJXIvMeVyeB1MggEtmg5/k0VmGqQMvhoyXkYAm0V1GIhDNRvzt3BICgkIASJAZWpkrT/Fcx4+lfT/GLUh6GnQhJjK2JKwMhBl0F3RpWI5iRQUUP715dxldQ/XsrCoIO6OXvr3RrzekGjSvxrCtpX8F8R6Bq3aFHejwC/054c5ssYUtZz1qp9JevQK/ftYbk092jIkCRCGgQevaS7K0kiV5t9R6DWdlyGfaI5AJA02IS7S7PqDMai2o+dknrNr0YZZGeec5uroaCHlEvJHh1+ahEA6aCc2IRuhaPW8zrJila3axQLUKqBKsse61smSOtxJeEI2iwCqGvYFBQUAUgAyeFzSK/o4HXDqQr7oILxx7NOYmL30etdTFgCzqzYFxTjsZquvjGjBRVH/i3xHxXU/SSbTbdOVv4c4FWJAE2ZgKONQlTckIjROxTmVSS8AQg4LxBGEpmIiAAAAACVrf+QADWtRDfK0hbDNAySsR+N2CanziacaH3Zl1gavbsda2vDRWpG56lWReevmfhaBDLpPLvi6LE6PJiYiWaKiRTfB/bSMAH7/+CRUiiIxIjCR4hKfUJSxVM2WA4h9DnQX5yZwZOJ/oIAP9m6j9CrZ0/A5T6rpnyzsyn73Gz97t0LlnjWOH6vTseZ1ilr+7E9VfXqtB737fGfM4R9PZVx8bRajH1f6zUuVm/Xz8b38FlpBPJh05Jy6M0s7gYZAPDRrRqDloZAIQTHx74AwWnw0IE0GGdC4EgzmwgDMCUyCdIKiv9sIrFzIBATVKWQaGN95kJBcDMyibpc5nVI+ALQ7osOACAutrBObj0zMRh4UHpdAr1a54PxBxNqHmGe4T94QBjf+YwERXfFuNoD4jXCwirsDnREaVBK0ChJg6S4s7enrkFztCbISMLznEVvAQY4L3AzMjAEoAAANbH+hvQBphlXgAw2AAAkHiy8AAQVCcBbeUjM0VEO9R25GzsNtOl3hBHLNklXJeNui1L2JxlzXly3Q8s1yC8rsX3PpnYmz9h1MSxAf05MLKh+U7QmEFychqt5md34OJ8VEHrGla5LUQyBw1GO0CfY6vmUPRZAYSJB/Uog3dXei4vNHJs/2Dsb9BxafoPXLaZOTm3m7EeY7A6s2fiWs4+0I4FKnOuxrA2ZJb+d9hdsa/paMNj8jbd/J62y5X9NyMo03dbjV5E0MhPUI19k3kIxq0smfaWZSxVo2/FW+3o/9o7zMCI0HOC7toGh/WRaGgTbYvyRWTh2f6LHy+XfAEW7lFtauJY3SSTJQV5eKcXSf8/XEgeY56B5Xb3n/iNZ6CroqYd0kH4f8AyGH634ZVPXG9fmszevPo2IXQv2QsgSDruOYwE4BQunTq6CQ95EDzZ3Mx+ME+i2RAq05xo9EP7bAHL6f4ABAjgqFmorCkKDYLkZR7devPHjz/UAAAvia75/FypvQGmGbwADDYAHD/i5WznVZEdJEmpVLIxhuRvUEb2WRkaSLI4vA8LafRp54+izMIHePU/8OR9F4TrfCcbe65J6Q89xCOobzBo/zz/N8ZvrRPynnfJ3rVBByECUQEQBkhz085e1dE6F8R86zVBRrl9F9ZymhTX3OXKwyZnlPBRz9kbKA+Oq1XrEQU/4aeoYBmwp6kiZ/XfVbd59TdF4JdLBTFpUhnC8pfAhZJjdXsaea+AYbsMBr4vB4v9Ll0+EDDPGrtxkpmTVs/1P6tNXe7yDIA2DJwZij/8xlVGYwic8dEQ9b6yigVhrZ1NxGSCmW0ngZRUMSer6MObhzjlkxVq9P+GtKsalhEWdKsymeeLO9XE0QH8hy/99WoS7N1nm9WEheR5gmpuYapws2S8dNFvCdai6kpkWIULbb3NLxVawM0qi5AEVZCY5UgyoBzkYUUciGZqb55680QVFlWCyM6nnLjRAKcCl2q0GgeAA/jgsNRsjFUbPQZ59vXsZ+QAAXj21trRi8sA1d9r9+5Nq6gjTZJkn7EsqzG01ZSqXmbZjLlkLCzxEcytS3aUcBelbHLLlx2dtHTeDyyz2Rr3/L8V4vg55Iw6UAcyZSeorcsBjvPTksl4p625uqrEqYpjMYg/W3GUe/yPXI+DjQIcvybNlICP3WTc/ld+tz6b/M0nTtFBXhTII6zju7LXhXIZdkZ79t6hA+3/MNRQthyJYgQDbXVa91ctsOqW3HvKmuaemtcRlEAeAursgXqAGqQiLOC1MtU/dL1VIRAF+4are3VOndgd2uQ7aHzGj9qIHOPVnQC2WhOx2dLIn3f7FmDbdL4Yy1Vjc3zltse0EzswIta+A1cy6qzB9SOezs7IDVR0oXGoGxPHRJa1FuD7rEp9qKgmU6VIdVd1trOxpDAe7ZUiK/YRERW4yHFIBoQMJnu5Dwtrt9zM5s+Af43o94OEPMBnAAP44LEzKQg2ETkOPPG/P2bAASjz4PO7Sr3JfRkobd1JDjUtufVfk71zurM+GF3gZZBznsmTZsldKQo5VBuDGm1KDw0MmMGjJiP7j/4676Dj1PrNutY9LO6KOBv0SjKAJSpNDc6DQtEt2qtTWzTu7CR4pDzV7U7XFAgjBwP4YpFEPLA/d4CL8MFk5lIxEzbgOF3t/dARcFB8HMBCBbvUiVuFQCKek8eKoifv0GdOqNiRcTszvhI6sHGNFvp4vI5GX12hGiBo6xsNYK7uB7c//1hRxUC6bLhd/l2xMXATUegyVpF+M8o7vo5+QOspW2Hjva/k6mgsAg6YMAW41KnAA/jgqkIajjzoFcqKzM6tcqpxvL0y8sVBUDg/+bujR/XLmEgpcrw7+/PmOW1fsU18gDi1GRnZKDeIzU0QFjW+2Czq1eXaC/Y98oYC+fc6mXea8eS0r8seQWMlnqVncxNTNsrzE/JvUg0q0pNNAjfSaCg4ppaCJc1FtJcSdWEhlUSqV6k+QQXZQBw0kkXo7wHgBEAwgpGTBpSYF3xlqWarhifDGw8aG9/PnlqRACoAVr5lq7xnpdTwMZDAkZZoTdRBcZcGeTBYkIj/yfBJKQPuFxmtpxudqYeftCdTtoykPlK+NcwpdY3dmhV0ohznehGESNpaPXMdLe+Q70lE7ayFpI1yzY3WRfZurWSUz7sA5UZEyO630y0aO5nmU/CQpokVAV752AQGL1ZYzMjCh6iQ8S0vhQEtqDNNDRCFLLYMTGckV0gmER2B5DwYbZ3KhZrWemmt6IKc7mGKQUkN3n41HFp4VEIcA/jggSOYZHGhCJJ9/t93rdSmBeS5kU1mS0arLlSuAw+TrTAzQV+JO/yvUXaI1g1PN58Qo12VN68JJL5j60MPI87/v0jDfXlze+g+txEKlUrWLHGT/Rj4YyYfJMpEiCdhCMAqKWuFrAIhiBSI7gR6WJw0Fbi+wUeG0be5FeNMKtLWLJ26u7VS82GH4LMq64lBF1+lOirXggfWP+vnsLng01MKJPAD6OARAJFM1CCLQiLWNahCIq25YKqqqjxpWcb0rNZYKWJgpfLQU7jFSm4WoJUpMKuvzeb/NFvdJBYxSjW+TCSZ3/jUNNvbIN/38KWa3tZpsFop0EhTXCQFIAu6gJsIuLa8QZsWxQqxRod3LB2STWlVBQpdiwpq1m3SrNqEmiFXgpcR0bElOlQhEqBhGWADgAOQ3AkRtmAdF44sPq6zEtd7qKu8UAM6M5ZvfI0fMPgABmgDgARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwDkWACIIBIQTMnRIXRgHSgLR4iAAyw8/GVRzXt3dc+1YAefgAAAAAGAS/x/j4iURERlEQgLZn2ePj4+Pj45yqUXZZZZZZZdWWUQgABRERlllPEQgAAAARERlllllEREA7wAAAAAAAAGHd3d3d7Q8PDw8PD1u7iAAAAAAAAABT8A5JzaMlVAb9gsb9gsb9ZPU529qqp3+/7AA/d+wAP3c56B+M+X7gWsQAANTpbjwEzm8P4Ar8TUHq+gbSkHGDnV9EANIqrZLtk9tuaMU56XREkhY7l35+QmQ9ry/H4xqieSN2OT0kTq+iW8XECRSN7Rk/D3iskqGR7V1whOHxT2Xm8lmeYEeQZOi96RsHIfc7nGA5cnYWRmyY9+v7Da8fWSNwpKc4i9xE4plBR3ljvbaaAkgLIggkmKIkbojflJLNJwR24vB1vITZPbkw9orqBVRjxJuO7lhSqpxiMLQ5HR4ETQQgEZMRMjY/BvrM+tfXM5p0hwaKHG/eGPzVgHreWQ/wnqF797p5htA+/9TomiBvKQchTaTnx7cZgZJVDwqDpeVuNyYWw/Gvz3gy2JkVcxtgtgcSOQ+QMgvZ5FXQbYbYWFuWFhUWFhYnznWdblbDpxzYXXnnkNI0zcyxH+Z/tnB+ZoryX9XrQVumJCD+IJjATwU4hwX3ORpciJV/fc7xye84CR+lHkchms9bwLECT+MvkYlUaRtRu1iX1p7STwMOzKMzo7D15q6xgd08bTz3FszQ96dMd12Q62h2w52wjwyeyltTXdQr21A3SuelpZUymkdGI464ErLVxTEM6USJOfKazh9+K445x7hET44YxTHS4z1l6WEDV4T7GSHVmTN9bsm26G2ITtbUjhx5uZHGMYCNTZE4g6Yi6JmcH1+Jj4lXUT2ElqGBznbTb5FXUVbDeWeXTLOfMQFAQCznznzysyuwnpvU1ahpT7D+xk1JGJCt30SQ4L4xJjvkDRNX+cbxxLF9Or3kjUn5SR5SBCItbocW1p5R+41cko1EsOlZ6WIRZkvZX8aNlx9cX9dmc9k6wsWQcLHAEM+C/pcIiYoAAAAAAHn7tDTDa555hs8DlJ4fbXNs5x4jhLBbV/uXCYVbTbuXCXNc1lXzqmSsWf2G90tGksK4L9lwz9tjr02pQby/FNrt387rjAgdBeS49BsDJw/avnSIgaIJCTj5PS5FL6wQSYygzkSulRODJwIvr3eXaxIScCVlVxGVPI0aJGQIkRmDwyNq8RkhIuwpHW6shi6BDtXh4j8OfwzE/gP5cIx+NEoFYijTkeAaEgHAEsRLyrLI06xG3ctSYSpYHAqpGRXI0WYNHJWL1B0SOG1JHUXiUDNEtfqSWSjEanDiPPerE8Bwkl8s/xykPy6cvIee/EJLvuvIajdE8rDI8G4kQydolt9WTnSCN+kRamxUkkUCVSHUMQjNiVgMkZZJqv65FbplMSEskw1phIsgWKrKyCTmUGIiuHdrSRYpKMnBYRGKrzwkUPoWrf8uyeHfxsL/A+K6u/XXvzD6z4rbxiSg1qsjALbzCTyWiWVQ/Nee+4EgE+xkVK+8EkKoYWQQkRA1ASEkkkNaoIsHXQySReVkSA2R2t3Vjrv30mEedaqzz3TevGXdUd9w45yN2Vt7yUiMfrBIpvs5EYdmS+Gxi+///fjbeDgRK1HgJeCfepJq15apSFbdH9k3icc0DzDyDX2SvIta0zEO4qvjG2dGxD8Fmv7zzx/a4P+5jrR0jxUQosAAZiU4LfWOvRd6fXs5/CzBT0xRF0gUAGgUzSpY60ljqOeNc0uGOsWf+K5a+KyP+t95mKYj+idGxD4b/FUyC4jj0kYEq6ahLjuYs2Rk9MzyyTycz+C/dv3VVfF8DO9HVxxxAUmD+P8X8PeJzUAD4YSO4kjM00zAVeDuIoZtjxxvlIa5K3cCpFqDSlHd6xgyZGxIYUhF8rQE5j4AD+OCwgGIWhioGxoFh2FQodx0cP2/f9uuwAAAP3/Y/cAEO7akkJlWzBsD6VLhh8Cu3bLMyFFkDVUMlQimjhDBtqqqOlspVKZ2zms0K1hVTHuGDU7VKFp8R+0rj4Imw3WFiWm8sySx9USeAlFgEEeHyGS+/RCB/T8Jfar7/kuaeDSEahb5MW3ZDXXJEbT06Vh4RHnavXzBVnpfHBkTzScHuZO99PSfz3+lxH+x9+HIh96DEeOcKI8q3hHCk+HpiCqbFNu/23+/LplmiIJO4oRBXJT1+ExYOAEAMzMwAbJX5MJCr8n//JIIIeOOLAbMleEggCxNOC6FeIYAA012kBSswkKUap5WOGlbZsKydAwYZNYWTh4+LkoRk1NR4c6P4DXb6JAzLMADBhgKfXX60FLOu4PhhI4g/d5JBAAdWdRrNWgpdNOtmQAA5piFsh04MHJBBEknqseRvMIx+GkeRZYnhyUVVIaHEkEskAd0DPHj2sdrIkGrzaSrXAEwca/4p4M1MDG6RjdvXP1tfIOi66Hlg+vyggdgKcBPCF8Lwn7r8ajPijvrplNRlfy1auvgD+OCwgFkIWDWVg6EQ6EQ6GwuIRqGwmEThx9DucfbYAD21NPBxw9z9eb547pphm//gw2AAAI9oURqDm6FAiCS35CM0t+ZLtlB3SYmEFEkgEzHTpIo4Y15Pjk+rUKEIRzlQsxW2IZxhjzfjimdhkCzcHy5L4tfJwn+Nf+NQR/Lb3IjtLsq6zi2LLL7S6eKWlSpz0Jiwzqwh16w4L9iI8B4IT8BfhFJ5n+QIR/pDfhFI+OeNkcBZIGFuuMnDB1lRV66Oy7HtJ4AAsAWWsAADAhgVoSqmNKWa9Vn2VRYH2UPUWhIiwRv+D+7jkACIRW2Y5ufQjOGxYF3VYjEc+vtRfJEokYht6pMaidDEkOO8dqbVE6somDTEacaA0CfHJxH9fL92lR/jjj0vp/r9kDLz9C88bX2jWE7A1Vjg40luvcCIFeAD+OCxKxiWgxaMQ2FxaIRWEw6cD93jfP7/sAAHmAgZKhGmGbwADDYAAAjy0uAidCnnq3hRwusLkGMbAX71vyI7TThu4aUevehiMMVVwAChQPMxBUSyneFdE33xc/jHEyC8ARw/oQh+8D6gk/nHzEj1bWYAD/xxJpV49Ulg9DRmE8qntPYrJd02/HZMCTuXyef+rZH7MfzUSP7/PCZP0iYnVWQgB9Ly5F0DnciP77//6f+75rGFACYWAGmmOaoHy20kuJMdqioo0fFl5StS0AF6/h+Hp1AAAJb/7a/J5HtRIghEZ9MjBuWloyeR8AkOHViGEqkucYfAF5wZIUJn0PudXwRHAAP44LDFLKwkJYUDYUEwrDASOfdFg8dV4rfnrv0lPbqivt9/t91V7/CYTTTDNwABhsAAAR16KzDHVZyuHH7++eUEI3zJLEQs75hubstrTcRATeInY2MqDutP+grOMMaWXqrDFVlVR3JFk59A7NXi70eIWlPO25u/ZOcTgNJ9sy5L8TnzqIavezJryRA8Y3A62iaizVGxHjUSU874kndEh6l9aIxLBPUfEEj9tv3PEPit8pyfW1k8aSsWeHOmFI1wwaPtv6pO5dwCZX3WXM+bmSQJ+W0F7gNhEsS9/yk6LaXkPOgPtKlzbAelqVK1WiAABojmnwNrEiW6vWqaPAN+CrUzN0aloAaO3en4EeKAAAAAK13EpY7SPDrIale+9QGWAETIe72cXMSEAMrllwvp8v3r/woE2UaFKRwvBCXS/G5M2MJV6pKNJlc9LimGidsxLQMmygJw3HU47eLdRDkdPfoDcEeidYyXJOOUDAGBTFBJztKCh4oGVKP6pZ0uK4AD+OCxG5hiKyiLSSHQuHRCKwmHTgP3fsAAA9JMRQF5EoeNelTUpEdTpA9r1nbHS+7AJ6t1iVh/d2cpqIHdzoKuGZtEbeeky0yPLPIJH5MfYWhOxkcSfL9kiLzoAMvNNPHihjTjbaUmYphoiGTJ5RI/NL7eEvZfwHIcQikrK+pY4mrSiHSlfRCAYQA1vvH9+/w2p/O7AOL+712MUABnAKdxkdbgJpHa5KjmEel7MmIhMtchmxSqE6WC4zxqohwDkOBCAFDUqywJgyFhSFg2Fg0GBWFioMAAG9P2fv+z9wft++9D9v3KUDfOyHAzJf1+MC503KOraOcyjKTD1R2znIVaT1Xc3tXsG2p8l+ohIeSnfcTXoep6huIoYQgTpkEYjplSqy8DERjCl4/t+ERk7Il4H+QJLgMSg4rihqA9VcauKMGFsGO+RU5pqUY8ovz7ESOUne4MR9WeGsf+2iPYqVZO5LfqY8KIMEWVUZYLZNl9MBlrVp8yISKEtcqIas4kVqizOQBZ2fbf+x6DjY4TjyVG7NyMzvzAGIfHj4zmFouxqCmuKwA7z2L+K8pkBg0GV1ltkziI5jGHkHRDjQoTQAALAeYmUGVRKcio7P+7/PhAIBgIBRHnK1hIUUEL4FojUhax9AQkYQgAEWoZMLxCFKxwms/GSERFjCJFnksPAu5lYoqeH1iUUWAddMauk85KggU5GBfliv6AjQaIF4BOpWjeZFTdI1lYHK6OCGVksEDKEIDiiitewxu3sBrqi9K1C0Hw1rsJX5Eg2rD4HOP4A/jgF6EEViMNiEah0ThMehEOhsOmEOhA1t+/7AAAHrAoXMmWwAKvuGS7H51D3pgUzrwPKBy0VQUowYHLpHIKiEhJPovgEkiHU0Km3CuPYu4VFADChhYjk0dQVCHbc+T59zYjh0zMXaR80QCwAhAti1AHz8/gtr/XogAAJ0NPru9xkAoJd0ADYuABTp6izzb0+TCjgXbv/k2jTQKBMDgDkOBmUdhWWByFhSFAwFiWFgocAAGWfs/f9n7t3Hr2UP0/FFKCeaaVWZb3swGrBKNGwHqJu2lVUEVG4u4hAD3SBkUFGvpr+GrboyMhxWnYapnTIE29decX8cZfatQAWYOOz7cIMl3biCFCvaz15pYTliV3qFHT6ysCABpRooG+naUIbTAEdlq7Hqy2haACgAApvyRI1AT0HnSK5CdGvYoC1PhEBQnLAEww2XVtfZq2utx6rsPmstm61TnllleqNeNhOV/JSZkY5bZwswdXDELkIRhqdd6b671k0vSwxt/3945QAqEedNhZJmR56BUlBXQIAFNgEVj7cJJKya1UJDBbDixW32S6adMvgfLVi4PNOAhTJrqocgBn7+ZRXn86QDFoxy0IiGCAaAREjO7I+xFI3Iee1J6wVJcBBz8fy/wGMzfx2BKESWWWO9iynwqDdkJTNNF0pWKaHzvU7afA/FL4NAGoN8ADkOBAg4TWIQ2LQiTQmHQiHRCHQ2HQiLRCHQiF+wAP8NoqMUcYALezJzz05+n/lPuFSwAoDWUoDztgyUunO8aw3k00F4AGgAFjt+UhVy4jMxRDjmMx9h5aAaaBoGgD31FgZ/CxgARCf3j/WhVSIDcAADR1rQiaJr2StX5tNACwTACXYEwKhfgDkOBBAFliGDWWEsSwsNCgAAH7P3/Z+4AH7fqqlUG+gUteGHdINYUZqNM+bWNLtkG3FFOeLHI1LN4q6aJAjW3QK5XW2SdDt3MGKlDQhgiogAABrL9jJziSapIg6WMKABXk6OKzKVxQABjSwEOpCZ4xN/KSGV0uPgwoCwAAAOImdSRApgQS0S1v0+OBsIykkjjTEsRjjciDD8tALageg85yEIFPCOooawBQq2lpMIUdbFAUTrVx4RRnCnpnQOEBwKEUtdxxnQjGfO4CajXLw6RTlOMNt9ZJyNNAgF5Z20lGcF+o4gTWoXwtupmqnkrnULqDJQNVHIOzEbtuGmWXIQRilOcSF2V4oMAApQ0cSgGuZEWAGAAShW5WWu5MWWW/tkYq58XGfvFpzSUrmGywDizYpc3sq/Jk86ZBYB9ZZ4YBeBeAfiY5FF6CrA+WnGtdoDjUPuuy5irgA5DgaUEskEYcBYcjYaFAAAHj1+/7P3AA/b9aUqgYDTNL0toO28a7ENYpAmDj2xelW0Ud3a7MGFVnS0EI+62WaXrYTKNPDvJQsjhcSZzjGBI//wYhEWDmVcNeAAAFQAnEKSAOAAAAaNBLMCRqcYJEo2OHYJ8wwDQAAloIFDiAApyLwSZeyq3IhWMITMKEUm9JjPQyoU9X8UuztSYAumidAgZQa+on3fxpKwruv6vLVrlq2MkJnLCJOaBpgxgwigrc645SEjKefGWm0E7h9wfwnc6u0TKUZZayTTOkxDVfDxqvXSVJRTQR0KyWZEqK1G+elrLW7t6/ixw0dKNPU3SwvKNrLVB0f8z6rEgIGaXwIupI5cqjOfgJqt5kCAqhad96nYeqR6ni8k9o40KGGwCLH7ztRsKAq1pQfbkxegHGa2BbCUIC1AbDx48AA5jgatiYMhsMFY1BYMBYaFQAAB68fv+z9wAqc6pSqNMMrHnmGwAAA3WIyUbhLcAI12JHYqrPhoqspmOSsEmKdAAUiBZBRxEOcC0uyDqWKmvnZXFNAwUofStgkI1L8OrgAABN21pI7YiRfyr/9iKcdd+H2yallAAAAGQApI6KIhoHWWk36EgCAQHUpRayFOQMa+8yIFjuSrH71YZV4hAwKQ3JiQaTeUNcApUHoV5JJZyHqcsRpB5ZEFNWYsNZhgb7Ox6EXDfZdJb1lK09myVCZgoNQHCQJjC+xmFTZDlocljRg53jeBuMUWGYgZkI4IEQAqB8BKNJ0XreiwGegCskYmct96j4P6/erigkOAd0Vsk4nd2Z6qFPSd3T47KyqNIUMSh3lBQmNysHhU4pR5RRBAftgYjVufo9H5dWScdLkg8Y9GD+tPYfLCbG1O9l0bnW4AOQ4GrZYHQWFAWJIWDIWKgwAAA/b9/Xj9wAN6UpVBeM6LINMgDPeIzlA8dEWVMsYLInKgSFHzN2c20i3DVymB1ynl7LzIKztiamia4sYBikKx37i9rq8UGLKABjGEsCxBziM0cwo0GYyxpsihVFzmB5AAAAAC3CAtxi1tlmWiPTa1KcUWgAA0IgEiL8uWptxgELFQd12azGSaiUGMqBLm2zZ1RjsKKR82N119Tybr4ExlootI1M4L0wqTq/mLwraeMOfqftlSl6DxzhFxymrI6a2kecLccJLqWKQgnlpNoqrVnOtEskBG7UGpJlrRlfJ2x23+j141+YVc0J1Y4Ej81WqfK88O29vn+x+SxyjGsJNKFvJ6ZGG84PnlqmwBFrjfiGAiKHillmEjAbYaKScFpElI0eLtkMRJe+ch0qS2k2HF4kAvZVikRoMq+CF1y3UFrQBDOav/7OAAOQ4GtZGXAZExUGAAAH7fvv7fuAB48qUoJJ7321wCTKTzMNhApWBUCT25ttDPZrSAikSoKux7gA4U7XXZkjlQTlkE1RyJQQsA+bDcmiySWWUAFloR0TJeWuPiLzAHFHLb3TGQBTPFcRQAAAABK1Y72eh3grQk68rwA7++4yF7saZWJDd4WvpLzM6LPhlgTVVw4jOLusm4xJ7LCACEkGaHBr8SZ6rcqNe7/8l94DJZZUQ315hcxUcZJylwrAxiRdmFiKcNgJzTWgj2hI7Dh0m71mVKneuYAiAkKCbzSNU649Z9BwLlsTr3ydTjRM6cUq9LpP7F5qaDPACWa8VEmCl77s6qf9C/hLdaRVQTEwg5dhKyxnIoxLWbLKTkdmYQzLScHTNEhXKiRLrzID6X7v6BnpYttJCCIA1WNIEKaFL+xj4API4EixZHYWIhlIZ9CknGZGtkIg/b9/2filKClZFKo+2mGaB+DDYAADEWhSrl5+nMqcS0IuMU/6UbqI67G/RYp2xdoZvjQc1lsLnGYDZBOkzP15f97hgY6nL065+OuAHo06ImYeozQAAAAAQZqFCqc7zVSXwYAA8TSGByAkEjVXg11yRUKgLKIQ+J8baNiB6uLYY28DeUZwHAFUMqIZjUWgLgpDMF4JVCJteaDJq/UoHbyaCMmmIgG8OP6/bUxWUXOr3mrwzdJRx/f23uRARVy9Tb/ayEhdKNU7lZFEZggAUBwDuOBpQFhuOwsKBIdwqQTLkgAAP2/f7b/cKUUrcVVKoAhBO43hWUl8xSnt799DmqXVLWt9uFciGFwO4bGQJCuwofEWhLTLXG8KLnN3euXqthAXKI9OkMr5rwNDOFBSvTerdhPosAAAAAloBq1eWtrMaSq70lRR8GbmMEBwMaIooZgovKXDl1rnyIq1LNAStVzZvB+xbZMR1sZT3P6v2dn0ojPT9+8GV0nw+rz6UOa/dzgr9CmIHyFqKiVTGewa3hJb6zn10lmVyTjZnEYcv+LFhs751vTVFIMm888/f+/2VVKKouZC5z13vq1RQi7Jih5sttOGV1aHEiCrIK960+AsEg4AA5DgBInQykMeoEOhMOo9IiSWOePnn4Y/pWLqvHF8pd93g8IHiACvDDhChAtVmXwOionOa5x9NRcgVcrkAef8vYAAVQ+9f7q0QG0BlgJ/wg4AA5CuC44ABGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAH3gIATGF2YzU4LjUyLjEwMgACMEAOARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcA5FaCDEETCEOvAmh+faQVy+ve9/Hr2TfxjfHIVVXPPPPPPPPPOVZVVVXMG3+iqqrZnnnnnnnnnmq/0/oOAOSdsvpjKEgb7c2RIG/RIG/STviZYD7bStefnX3H7AH7vHn9gC+vX7kHfcMRyDwHc/+pzIEQVbcf0+ogPM5o/73Qoa2IfKgTt0haYDA0fnPOhPygHBWbsjh8OC6weL7gkwCQ+yZJHtIswGAZz2YIWeLcev+q21LId19rbGFHXKZY7nODPIh/dNgapbdzq8KwKiSIjBP3ZwZZRalb8C224OLuC2n08UlG/832xNIgnS8ureedUSaW6AY9qDU3m7aq3++cXteUHN/4S+JXFyXB9kyUzg/NEUhOcogrzk+tW2hG4h4WFb+P3Bw+n+V8jO3N2dh9lN/tEsyO0b7idORDPMR/E4jOHJEEKZHmeQ3WwuFL8ruKMMlpGJifIFmBH7sdApYdvfhnDCbJRX1neilG7Wvq8tmnOcwLyiyxgS2kRwGiABsP9z1DPMaw40JrYaViHfTfYGRfM7XXpTuXYDY8V02/NV4fxPRHGEG7Bp/qDMOy5xuhYkFgmUEzgqlt2W1IK/6f2mfyw4MBBxWfAQoJzWIVo+TYJPK7YllIZHBYAnzfsEtccIaXVkMZaIvOTpTic5lnCIKPgAvkyYEkzPx+eqyYoJOC/1DvWmbrHawpj7gzhNJvHv7X3Xn+yoZPgMI9IsBVTuM0BRPg0v9UcAEQnNr6h6r7lGr8coRN+QwAHRYAH+d/wAD/O/4AB/1p77RwOAO+mgcBlY93JumERgpI2ubEPGuTIwaZGYnrQkhlnGg/wPsL8y5qp1+m51ARt3CMJEyh/taO0dHxTkmhBMGg0JYo/jrbyCLnJ2pahdBoICD8J6Ho+UyXruy7ZpHzk4gPiRHruGn7e1hl7Ug9b/SEhGaknot/VjrxRKT0Ua7ENk8YeSFoHuY5Bx10a5I+QnWqwUlfXeCuiQ+4EvYljmkOG8EIhg8KL4XU5KHM4kadFbjyMY7EFyGLWedlj63aHhYRqwxQMqVVuXwKW63LUYvS9Nqjj9OqM9bhTlHRxb0zwPdfNLw0paWcA6j4zwwLwvAfdnTOmdMAOs2sctn6d0G2/ImvvbY3juVx9JXXDwTiRDfvISupEOqwSD/GZHguFyscht+XEHlJa/qZGGEna6uSzRfOSGUbY5COCZ4NEnynSRpZbpanSIcTafQJMW0vJGlmB4Vfyarxk661MSE2XTSPUAiOJy/A7BzsAlhMRawY3oYKmhoxUqhyHapmrYzQ4RLKyKlb/ZJEfFSF5UgtTt2cQlZygNZr2ylLxEnZl4DnP3j7z5ZZbPn6PMs62KZ58jTf3VZSDZnkPhej/tB7n+L7oOs9B5888yZ3f/L/l6mUDMmZQ1aoV1DubKOeLpikoHjYn4e3GTopHXYklrKBF7sqAfL6hsZ6+iLpjq0TkoJser76y/NECy/3ZxmQuTicqTqDtrWu9ppIkVhnvWNJGmXGvf+eTytLdXNlJwYYIYIQD4ABIvgu9DsMCs0jsVCkIlAAAAAAAf7y0EzKdjUmWkYxp0VKKBqA8igytfWb1dmowGK2zEYq4fAuBVsP/+JDQSQ/Bg4MCpomAQCHMPkGT9/80ma+Seck9JKBBJHWSWP5LursrHTokf/hmuTiXPQxbQlXRyEja40S01olHSSIgkIHK3S2FZIm7Cb6r90qsXvWmuC50gE2YklSiULC+9ZFbL+5+Qf6rXqF8fp2pSd1WsLRSdUjsTRSd4pp2io6S5WWpafklfiNUf18uaDMLJjOJkshOZGoqXNJ3OxryGt9SoJxlMsmSDk3NUMVEViNuIRoxeEhWVNXTNuaZxISJEmXgUAGV/yJcXblsyCsnSgAAAAA2M3lzyM7c2KqcAKKYZA/lcCOLllgBhYAAAaKKKhFKQN5Sg1heddZE4ASGQ3tFzSA4pEuYJYXIY+NMWnYUrP7Dus9b0+m6bKKykAVOl23lfu3TT3T1T9u77ovVO4d3kAZa2s7HZezppfWWS75cLj2DTXhccaO/KzsL7vMgySWEM5niI8STy88hXxJERiIikqFshwrOk8TrCVJP6nV1f3RnGa+eqqfGH+qR1TkJaM9ZZkPaSkrCWLho3ZLBRUf5X1n9nmtMAO3ESOyLzQhXFVg9cDFhWhk1aEW7+Hdx4ABIjgvcBQNioKisMjsuiEYAAAAAABya/7zYIGZYgqtW1AW58v3B+c1LkMZM5u5iCIxCdPIRyEwyydzDk8hlyecxROucgOCQeKtyk2I+rEGw7VcTmYcnmNMT0WVJ359jLIRnEHFwdhMcEnVAQkcmIRfDxL1zVJa6CQiUCEU+CiJtcTjBvcgUZApuSeXyYR18QAggcloiJqik4kAlidMT6TjiU42PFUIaAW3cyiN65uuHV7AinI72hy5qJTYxAyfOUzk7I0Zov6v1vrAgAJAY8AF7zcfNbu40xxlvzuq7A0Y4c/2XRncGtK/7XpPfn1Crdx/6979iSe3H4bPHk8RMYet6UzBhED9uPQoE5duZbHtDRM7Re9pDaPh9LSkwiVBGnaI4Q+KUufEEMA0ALLAAEQUb6Xz/SZ46Bq2wOEBY8KQWQc+v9ZESFWpt/+6fv9mfq/77azAAAveYfypjsCdzE34QhD4PJjCdRRHbR9XxRwOxiPqOev2H2WlNigAw1MMccWWlxp1eLHG40gAyw7POjtGn9dZLUixRjwogsRQ2XuckJhKHz7JssnK5fdmvyDOJ7nakdVyAlqd8Sx1ckYXw7vyJI2RL2MV0J0QYYsAAAAAAsCjB1nNdJXUcgtpCPArcl1AoEHGqZOWAAAAAAEQSCYKnAEeOC/ggLisLksMhsQlAAAAAAAf49igRwYZdEoO5qakcRis4zF1+0QkSHIkF2gSIfAnESwSOZ2pD11tsqBImL77/t9ryaOUA2MHBaxDNeSSWyyNTSLdLWIv03N2VYBGHCJvzZPzJ8UCGu6xd6ZYLMw6yeSAPgtuh9B4+/JG/VSIxdQ+NftvVSLLVv99Icm30sCIoBqk9CHYW0OaJFDwcdkYmcUnwSQNLk+FmG/qzFGcwWBJrqinEeAwiKBb1jLDnLTJx1Q4+7XSkjJWgr9UrawpTkF0wrjaNtq4IMhgOQkdLyQlwHrBK5NJNJ7U7dUzWmnUnsl+ulKWAhgyiIAAAAIhUlowEJ9uIXRKDyQoZEcH/xVJCRrhDDAA06iXoUQwsk/3fssOb64xCwtJKqVU0000cm4xI+NOfrqvC67Pq/h9fAAACkcmOXTUJiI21BxYhQyxHDUZdhzE1LS06VwFUAAGhl8r8T0sWvf4nfQAABHyeu95AQ189rc169+6/0CVXVEdTByv04nD25DH8DI6ZhLF1rOfw7KweBRx6hzOi958DncAAABgFGGrkkF3DhxIV8hgKsp5AgwhGxCIlDuGSBizQAAAADGAvacARrODYLxL3lRZY4ABHjgv4JHYdC4rE4bEJQAAAAAPMB/noDAbnQDwWaWWDMdGugbvkFTsmJ3QwgnqJHU9FIyR0r9fi+anLBKprjEkzb0jgDfyeB+ZkYyLVbgYiKxEcoMj68964+o2y5vYlDh8S4o7Akvut/6u3Y8yR2BwwhIeQ43gCPK5tmVejKoRfc+17LkinIIruuFb8dCikaJ9VaCZ6zm62/c7+1Qo5AcRh7cjKUq6DOWkQdyOzCHW/0kQfg7Jz0pjhyPx30+xu5rdVQQSWH2hLNeXSPR4FA0+gOh3POH4wx3T9NttuTRWZtZQOwUoAAEadbbrE8PQpp9NCq2dUUCZHzE+mMw1TPmAYcNHLOoDhirXCNhPocChGa3qcTCwY90+y+O9arSDU7X0zShWEZ6c13TGRTn8PQ6Dd0sOSjKwJWwSR9iR4FJIyQeQulkydZiWbHtr/rej9DIAAAFymTP5KKADNBWNfThbbG72l1uXByk7tAhxzBkeNdHIK3MvbqgQ2Ezhjia4r/pz6rtMUgAAU3WM9RzG+GTe4HPnchJWBoXA3UEi4WpIFEkIKDoAAAAAE4AsveiBwVhszyl4stYGNJbcU4ABLDgvcCsUCsTksLhsLh0oAAAAAABwaShUpII2GtEcHAQtApqzsT4nIkgaqt7Ck9ErgUPvKaN+AYzbe1yd13E3+9MeINMl7+JmnEuktodNTj7o2xXtiHsWIZnbuaGuQ9Wa7oMFoG9cJZHPEZFLnb952LPVgWDS9UMcfZtm1OoRVjhER6SIwguxvn2xAxI8w+ohcN7WjzHaBsOcuCOVidDtp+APin4FIGj4w2Z0ntL5jsXd5ABZ9GTeyXmEbGVlXKz6TUX5DLN5VZGNV/+fr4fkaGegW+xDGIcMBhmk58q9LgiWYsM2b8nxGMHAzRKjWmWHsYdOgaGbacH3cmIfcWPAaYnvGPiMy1ieO0plTIS3Jv9x4EKUy7aqJdWhWABLfYqaeBxgwxkQv1twqQFNuWQ123ujNPi9uIyqMmLAkyiIUQUQnmfd9sQuNrAVDROz/x+k9AJwAdX7+oAKIAAGPP4HvIFZZZZM+PwGwwqXzBFLSaImTw4FW9CmM6yUWSZ69RjjiAAACilAaDNHr/uPKovELsEREP1ergpjiAcBJDgsJFv1BkVhcNiEmhAAAAAAAf78ZbhFEpbP+aA8kqBHCZog0WTZcJcukTM9xIFFhdqkkyDVIWNbUBJum7jKXgLPPsyiIYzQEfa/ByfZKX7HFa56iUh34w8YmGFczagsYcGIDyFjiFdKVyvg8eTL0JiZmKUMcL/bTKdjMRFmlGDg9tKktIRF7C0i5CJZCJRWRnk1EDetqYoKqJjsZR3gJflCJoe5c0xWOqaeRDwoh46U5oMeGQixdeUAAYWzhlOlAaaYjKjK3ikYAqBjrLcVxRjTphgxhh1AYtMdu2iOEhk8Xms6hmFEa1OJeMMKYBQDHzGH/g64S8CmFiiObWa1yS4EB40BjTrdQAYiGRDrmJO5VNoYTmkrfATg4IlncDYvDyWKjEY0r+K/WmPX+nSJgZMS9haToIXMsHAAAKWsbmvdudilnxIjW+3WOR8cWwAN/UdT6p948PEyYYYJ6DVyvO0xE2VSePETjcHIyGkW25mylDBaZhbJ1bknZXpu1gAAAAAAMKY6bpNKh7TfJp6xZQcD3JXYWYGgAAAAABUAICYoADJwASQ4LCRbcwrK4rG4rHIbE4bDItCIwAAAAAAH+XD1ltMN7EjmGQAAEsnv28zA6eTrLyrtfRZE+ZIbvckFDjRhV2h2LlHZRMOzn1UjwJrnuNMbPyiVnSEvLnwuIcDylaCuQscZjKKNHRjjjlFt71bJ2JohGMSIBLFRANRMUO/laayCAR4uLADDBF0QOmGLjQNPi98TITQG/D6fcaAChzXPF0ywkdcZ+J4NjZew2ShziRUMYFwZ6+mBx/E7eQR0cP0G0hoNHu9pwZXTSKEGY44IDhQAyQImCI9ukJTiWBXZzBBkK2OYKOaDNrPgIxyXkAOG7uRlmt/X8PleP1/NEjdvArKst16Gpl1H4/HRkY2FIbi+S03EyahknjpZ9Gq4N57HAsAAsAZOdVOlIVqGHkSY7cvYlKKhghQUjo/PSi3hgAq9f0j8f/kuh7mkJwDGmGiDFHmFuQb4L+zj6WRzjiernEOMuJ7WuQtFl/NS2JA8xBjWXxzb7fegAAAAAaWa5WP7ZdYSSIpFiScmWQlx//Q+obbkAFAAAIABdUDgATA4L2wrFAnDYXDYVDYnDYtKAAAAAAAb/moaYbvAHMMgAANeu6Gv6/NtsLZw+UM3ZKyzzVKgbPGQIGs1kcBduw9lzBD5o2obBvbcqEJKFcOen6oyQ1/Yft5Ovw0jpY/YHIuWmS0Y9OFibK08Kzob8AZ3188TErx9wv9suMUBE6A+uGLNMMWdz9gRqvFAAAZuUw30yViSrSq4niL6pU3ZB54tuEQmFWzZWI7Ogr6qjd3KlrCIRGkpACbleIdx3BYckY1Qe8fJ1yTSM6WzWIMDBzDnmIAAEikmqKkJflsc1ga2CaqoAYga2hriFfygMk8X33S0cqTTBmE8S0SXELQHC3Vq3AWgykwKVJ124iOc5w2yvA4BACEarsViQEz/HIxI1EjqhekEAAAAArwOA1NACw5H8vvWm3GIBR8dja2tbgANvTPto2Kfe0IhwAAAADTRIV2F+dwV8sRyUeMSekk5PuThAZvK7pgfh8TrMMAAAAAAAA6pliIbqyrAmZP6btjTCQ0soAAAAAAOASg4FPdHFZHDY5DZQDpAAAAAAADeA7rmyhumUqy7j77+/yvZpkdOIahZJ3WSWWgBJmmaDPI0kWq0jxvAk4wFluuFVMMGPDgmTNQjUehVwZ0XwlPrfQU70MMvMLABgLNHeq++2EakrHgJoiSGAYeQkgwJZFm86dHA0Gev47vN1r16FVAxe9qDpOiIED3xwNQY4hNsVPi83HjowAWBOW+B2PpdP1DHRZVrfdz48mEIcsdO5NhdU9nJRyxgAAAwYAApy/Fdv/hVFjGKAAACzAMBElOfpJmBcvKFNnjBxxUMkbJh/JFkHSxV35sA7b6/XaGQAW/29lCpV1GGhy/TNVeVbxdC8sAAAKEMA5pN+W1raNBBQAVtY4lgt4VsJxuJeeePrHiubP5sd+N6aQCY1/ef6uox53VrLAk0MD7RFHCfLEEKLGBEtHjcEN/1yAj7TL4eZs0TSDtt77g9g7j++fVbzZjFu9oMcbZgCcAAAAChzU7mgPcNCUJefWV67TSw0g0P2+rlcoAAAAADgAEoOBz22RWVxWiQ2UA6QAAAAAAA34g/C24QAJPiCnpzdJcAl9HoDShxxUb8ybHwk4yNUz6C5JbUS4NpLHidBNa2nA0QYBQMMNZjQjsbKlsnbnE6xdRNl17LiAi4vS+VT9BIhJJ7U6UBz5iNlULrejVYfOmAaIl6RkXspuCgOIIUjRo1tXXr0azz0SVbJlESiyiEI0eiMC4AAoDf7ridZ6CBxOs9j6D6OkYQjPSsggtN2r7nVhj5YAAAAAAKDg27CuNvHm2rnyygAAADAHYG9aROB67kaVAxm51cxMYwaHZQrdpiQpJmVbPzbBNPQGGAAAAGsa2nG2t2faYOFH11jjs94eTDAAANHLA6h7wQmqOicTVhwGauH8KfZFpAysH6XocEWkorIdtbc/bvFegkApx/seYbWDaiNU+O5DHgB40gCwMkSlGACFGxVOD8hkCflVGyftUtCrVEunbFPVCCdAnQwUl99HMDwx0+xNkVlA1oAAAACgZpYA7icQlnsIvwlCvJwSTuusj8rq4hoFAAAAcBLDghVqUVigVhktBcNhQNBUNlAOkAAAAAAAN1IPl+Lh8zXbWU3eaWFz9TstjQyqsgNnCCkZ3rLub7Yp7j/KkjNMQv9O0pvr673dJsUje3hDIUsnByjEjEgoCFmAAjriGgwXeWBFJSRkmm2UhTb3YBrv9P0WBF/8kxoAzamZsbfoxoyBAnJSXk2+piPkiBtrOtfo+KnWY3V4GXtUVKj/SRln2g+oKUYAAF4+P5GfSwVlxuHxeVxcRy/nvpnH6b/wu5cHGgAy6LsvOd16nX+NbQAvLX9H9x8b7j/d/jAgQMQ5u3Sht2fSzgmLicNb7uIA6nrWSFtYn61QZnN4DPPYAw6ccAfDtv/7V/S/qpVGIvgbS2dWbhjRPM8+p1lS+f9ta0ATj/5YHtXZrYv+fqCN8e/AZHRhQAAZwX83VFdNtmtRWYStS2YCmDb92s/5oXNs8qeKqjNZRFgYYUUAAAAAFjSP27kBFjFyGCIfBZi7ij5AYAAAAABwEiOBk2tRWKRWFxWQw2HQ2fQiLQiEAAAAADyAfz/1vQeSQXJEEAS++zYVe5sykEmm3gJ5ASjAaJC95T/g6nDAEOJ9v6I6QdZM0UmaeTtaet0/77c2RSsDeYg6HtrbZ1soZynhNQmI3w0Ad0JDvp4agE3c9N82sfpGOxzSzBkjsIgNRQJVAlNGMTf4L9r+KZ1WSRFsXB6mI52UTJCwWFlUSI8aAoGGChXE/N9P+1og5PieJ7zUySVKP5Lyg7Ix4AsHCgAAAAAAAJGttnimvFo8AAAAAGgUOoeC8rP/wz6mxrK4wZnVPegU36JBjyE0cf76/vQW9xHAdrkAw7qRY6b6yGGik3aPLqo2VxZRRxweLCsUMvONS0HtufKO6B3Uh8mPVQIUAAAABaCJVoQkUXHQWF9ARGGix1KKPUKEVCKYOBRsY5BPT1QUSFIOVD2MMkNlEos1/tbFVuezq4R7o1oXAUBgiRgPzyIAAAFmimw1huoX5IgZvYdGrJMJUpwU0AAAAAFQAQVA4BJDghNwMNhcVhklh0Nn0IkAAAAAA7wH4/8gKzh59xUS6uCgTTfQiZePKyE/1ohCTqqqz6AQo4z7f44yilz3V+vPDJtzfghCCYhDXcUIW8b4t//vibX/i80gis1qEcQOO3MxbsS5Av0Dk/0mRdCq7bYWAQ0+WkXDjmMCTc++LcBqKM3WWOWmYsnGfbpQjiAOOdpylzTi41bxleT8J3T+IhIoWeSXBR+mEAwQS8lRy5iuN4Xp+DhSTPlVo80Xr6Z4z7HrXG99QVWHAAAAAF7f6X3r2rvsZACr0v5749+3eocSs4mb+1fnfnv1f67wcjseZIAKZ9g7HvDOksEDQTKxBJqa0L3LAkIFFAAAwzh5UXSagclwWzxZhPPLu6N1bDVxYAAABRR9zSgXHwJmBx5kIGChbrZWTTBjwgxRoMnuURy0btyXWZJIBF1sQIapi8r6Tqtrck4VhRRSgAAZLSEoAAAADTVBIhS1ouuAdsecUKXIRJQCkXFAAAAAABYAWC4CocAS44KRcTDYWFYZJYdDATDYpHpQAAAAAOsB+9pY4neeK0LI3GpWJPOuGTYfIwviWk/4v0ROlOnnHSuaaAylyoQk4fAX9Q+jeRdoyqDKxPZyIyYNxkjhMPUhPq1ldu4rlK8te7ZGUOcsVUINGeiduZ2oZVv2Bo412tiBKzNZETHkKVkxHmO5O5KLC/VJMUaIgrzAAfa1kZMWhKGnDFygtHkqVlElofcbD+c8aqQvejU8pSkSsbIeKVuzO9sqELISn+u/AQCtWJrk8NsZa65VUwAAAAADxn6Z8B9p0bAANX0v5n6p4XEI1fVfo3PxxgrqfL8CgAGbUrbZty2OB95cbcVxU0CwAHKDcb5S3OUlwv50Kwv+YfdQPonIjj+CbXNyYsUoAAAAAMR4ZuHY/7M24Zwz0T5/sBWYe6Plnv/652OtAAADPd0ndvu/d//O6r9z9g/s/ccIAHASQ4IPbUFY3DYVFZHDYdDYXDZdCIdGAAAAAB4AP1/8tQOacTlLKQW+xLxu4jnr+6IjmsiExDKaytAVfHElzdtkhyJU7SfGuFEYrtwWCWPuuPvhCYjEsVnScebUybi0PeU2NSeAPcWaICtyIrzdSH3eV4hLN1fJlVadlIUdhs5hq7zYlOkVIS/NI51Andcxkplf1JVU0w6M1gceYpdIxuZEW9VYJ6P3+4lOSEcjbxBG/ByzAGy60jMYvE3OYFf+SLxjHTy+XAJOZ56mIoLx0OOVYCgAAAAAANer6k4v9OrXgYAAAAAAAAsVyfXfS/In84iwABk0T7UbRhQGmGd96S/C6yLzxzBV3qMO57ugWNBIMdd47xs41VKQxYAACGL+71lSHKFXodX6Oja89t5tgAznDjfySYwiJWVAeLLzi4AAAADQBx8E3DWh6mPIP393VOr7uRaTVMYfQSaMkFfNexXSUUAAAAAAAAAAAAMUI46ttwT7t13okmB6uhysdKAAAAAAqIjgEkOBkXNgqGxSOwiGz6MQ6EAAAAAAA4pP/IPSqFEQgmEUHfY4GCc5Wgzvq6hEiOMBxohkaEUQiHIMxj6i25wopnPh+t+ZCMHjNT7ei0bDgaxImETRIYPE6bxeHnJ4jj9wRjzyGDgckOA+tin0YMkhwQpG43K4oPShOzbqUkivaFkahbseypRoU+hFhAPA1tqyxdpOTFQ4IUzY1scZgaFgpHC3fNdOqGMRBMIoJzvF1sBDgggqUREHY/+KIg7P5d3YGzD/nuTn2AMKBgAAAAAACMFKW8HZs5d6AQoAABGp8h7RyO5VzS2HQ/R/t+jRXV/d/jH+C+H7hhBgArFDon/TUbPrXxHOz7RnywAAAf0+UVGCeOjNzTEqFjlmMo87ZnpG8oRQAAAAAChAWa6HaBiJCSoNcUuNLAAACwKRud92UQKbq23QfTbSP/Zdo04z5+Gnx2BgmF6TjgAAAAAAAAAAYBo70cU7Cu8GkNvyeA83jBQAAAAAAABfgBKDggREusBcNkcNhcNhkNl0oAAAAAABvVdUNASiE/xm9BU0Shz3POrSYbJLK4LtaQhWIxiTsF1JJUi1IqnlE8KovnM2dyZC45lZ+YtvRLFn8WljGIv1RXtzY1POqBRl+2x5fl0jveGbEDaMWkw6JCdOoUJ+TRf8H2lRHgMFZvfldUs0qGCnTHdxlda8lrhXKjcJ1EtCK686lSmrm901ZxSCpWjnc6nEmPDjHSWQnCc5SW25JZwidb2P1+FMlSl0X7fMpWxA20OAAAAAAAFpj2ESRBosrlAAAAAAAaB7V/x8jPljPAUAObfvde9poWACKbhxb8f2XVlVQCrBQ8k4nUR6SRuPImYE6uUAAMDD/36ntsAzc2ilfWbMRIUWwxOfhSiGwMdn4kAMuy/x/pTg+0+WRg8FjlgAABpo7hLWNE4NMulvW07DjmaoMb355d+vzqK0QRtExCyy0DQcAAAAAAAAAABuc0fiZ+jXaSzAWuLTkIAAAAAAAAcAEkOCggFT3KSWJw2Nw2SQ6UAAAAAABxaqUOykxSVJz3x9dw7SMMpDoNCzAZJfIpggjRUCCL88TWVxHBlpedct1LJwPAZN0Sq6TYmMcsDDANNNcjfmCe+3JaKRovzhD4gtmJVAss1SUWQ680aC1oQhBJ3qvYhRBU6VbqUSw42yOBgIYj2xL5zFk6fWXE+X3oDjgDXBIHHHIdcZl7WIw3VKawnKxJUwqYqaynPZkvof/m6DIFftXn2lIwvH+J/mf5rT+rerAAc/ufvf/5/m34jukAAAAAKLxv0M/lp9rWhyhgKPaf+k5sNMLKMNOwS1gf2++mslgXMyJzNxr7+oDS4QunfIo9PrygAALAAEYMySI4lRcUBr1AWxB/JD79kFtDtz+LUQanZrrzM/lOAAvi+L+5woJ78FhMAks6WAAAAAGn60ASQAlDLgDJPiZDA/25+U4t+/+nYGEkIHN3KUHbb1BCm4+ihBAAAAAAAA0xB315L+7IrdUhJ0i+odLx+RiADgEoOBkXNxWKR2ORWTSgAAAAAAHBcqD+YhDVVUQounLsuTtzJhMgYUnVzFYizBoziymIohnvIaCUHNVACB23F3e/tmfrKAIQwcoliIm5NiSJzBijoeHfGc90/TcPdau7GAXXXl7StudbTjgIIcEA0dGnPopONbo1s8IUYA7G1+L5qbZigwLCwkmzBAS0JzradOnPjmJGBIkSFDjtt/bbp33V/MwMAAAAz0OH9yAMPF5GCKYAl8/mUGYm2YUAAAAAABQr3umebHFB3WOIAAALzbNDyn8Z4iuJqYIjdj9r+Ka4l6Z93+GyxrOYAZ7xz13j3K07hjbOLrUFYsAAAAoUDG9E36tHHtcAAWWrf92wgempKbEu4pSLoOb1+fKzAByOz/Yf9N/nfofT+A8jphKbEY893cDhT1jClMlrI2t+ky/9gwp/XLKg6mBveCHUCiKAAYpvAAAAAAAAKB7FtHW8HxXHxdC+H4dMY4AAAAAABwEoOAj21BWUw2GS2Ew0FQ2UA6QAAAAAAA3pVC0B/4+PhExQrSX8IkFXY2k9mzCIid0GU0d1x9kupypqdplZdFvAJw5RG0b7LoWIrkQ0CizqWgjFZSsLC0u2tR8sTRMvQ/ajSjrWQzM2H3kKIOYiGLVbEDfyh0YoilEuRpSLdKqDPH584OdSlKi5EMeVlZegT8lc8WiRhFNMLEMANx9zfyBRjTBlPo/uVQXFClMstTgfL+FqaIADPk/lvyv4tw8oAF44uP+z9z/tLUi4rWynwXPzjMeI7/V0NSIBeVxrYitM/B95k6FrTLEEStktecEAB+RufkYATNe9wrvNFZYKLuw0ijemnR8dSAGfX5vmn4PQ3YbibSFeWAAYAow8RyNKcasTbRx8ryXUPkEas1ti5rmOlKZmxYFGNEAAAAAAAAAANKEOZYukFjlrUPXf1ZQgSAAAAAAAA4ABJDgQ9ukVkUNlUNhENBcNlAOkAAAAAAAN/ICQqZBJrNOu6A3BPeSMnAJFFZUVQH2l6Vm7nn3CXgSFEXpbeTk1as65TAg8ov9GaUDIdmOMcSHT8HW9WECMrAuADxB8GraFkI8FgOJ7p/afp5vOwo7VQRMmE1IqjFIBhrKJGkZUEShCVG2gSrUBdi92pF7pgz2+ba6ltEGV1EoR9xtlqZsCZCNbjkKzx7PvssBAHQ+08E5/f69GYAHtf3w/3O61RMhELAoZCyPGmI2Ga5WDA3I7EwgAAAAAAAEJrsNCDyaPTY4FgYCFZmjpir+QAYgoxX9vLx7YAJrvMYo7yAagQ4LFk0Xa6hti5UOilAPNu/goELtv4WC8q9yjBCgk2bx3W9l7/z8iACpjq65Fxn5lnmcdIWUyXljjgWUAojRnuTXXSS7HSvIx6OjumaXSMYrB0SzdecNazGfHAAAAAAAAAAAwyICRezgy+ao5dTB5c+zTOKQTTSgAAAADgAEmOBj3SR2KBWFQ0FQ2UQ6QAAAAAAB/y35VNMM7jDmGwCAEsQeY3TrK8HUjg6vImYOMMBds+LvJw0dAkSdILSKCLNLurFPON8EJmsrcvMdlrTAsDn1ZkUKajLPChp2ToxGaKgTxiMgUFNbPLBwcYR4NTsjkdehQmNyzAAx68L1JS1stY5Ziwl1/FaIHKa8SkAYBgNMXrjFM8kWEcjaPIwCy0Hw6YDquWYKZIFZxjToFzXJ9U/J/jnt2n3Kcd/G8f+B91+8+jThAAAAc0aEtdyuWqlhKOOWAAAAAHmLzX2WRsCBFTXOUdm6zZCLD6zG9bjo4bKeI708DljLgIC1q/fEpgIhFlLKxOTtFtmPFEUANv2YK6f79M/LoKHQWj9VcmdYrd4Pds+TeU0v/f6/s7oAGu/dNz9AU5N9K2kDd7thq4wYBSgXmP2zTfZ+VPiuCu7V3JMhRuLzDqnPzikrL8wx0kOmjgBqYUUAAAAAKUkyOpUdb4Iv2b/r4JnB4OCgAAAAASAcBIDgQ9tYVlcVicdp0Ii0QAAAAAABy/95xQ9WdUrQCLUKy5UuisnPJUJXszuMNHHMN7DJzMcgb7JfMcwwFTJHWT09ip41FETySqokQycECBeOaKOewyTp5OhGdrqZsLYz2vTjNTjihK3OSvNvx1YcGaBaasHJQgkxwwtEmRnJLzj508qgqEUDECisnVVmsqyKBZCBbjLMNSqoMOhFFCwFTwK6dBOONZfk+h63qNJGxQsD+DUA/tqmhFKAAAAAAAVhhn1L7AsMJwUxEmGAXocj6HqOt+D/D1+mtn1v9unGHotA9x2nU59l8aVBjyYilF0VCEmQ0mooYcBosPFumUQ5YAYopVwwFmKKEVZzypuEoGQ7d382YW5YbTZi/M9yXzTR1RxOCFoBAAAAAApRkWN+scoSNlnmCOtBGA0sAMET2HzdqvNmt+uc1/q+OOrRv4pEeRfzN6GrMHNa36lQrYGMjo5YAAABhRqRHTVDBz9k47g71sjk90syjQAAAAABVYEeAAR44ENbkFZZPYVDQZDZHCJQAAAAAAH/NgaB5Vy2VxbCksJ12yNpKgwk54tDR+wxVUgUGayIwkMjdqaBHO2Pas4tY5h+42bUJaSH2FNqxCFpRVUTEpu1I1ImFsu7t4mVpIsaeoqKg2x91zub55G5J65s6+mGMApae/2vXSq9nDCyllT0O5M4tg8MOuQKx1hOgYBoi0ptkgspAY5aSWjEAAAAvM62II1uV5fuPgp0FVu8d/u/5/ofGd2nEADT/s37j6zodBvABet2Xq3x3u3I+M62sYb+n9l0XQ/Gukg8N3nRdDr8WAC6oaRpaQREPnf9dxR0Nl16cJgAWAK1/j4cPjjv7ZHjN9pHWHz1aNIsPhdz3hl1PyT+S9a32BGGHYSL4dl1BJNxU2+5ALAChgMNSeM3rdgOPc+ywDjofLJmHrWm4i0YrSb4gkDxq0uXIGFIvnKNQGAAAAAAGQxjEcRvL8F4PzdnKnIAORSoSJFrXEqkqCkYTuko4AR44GRbGFZWDIqC47C4aDIbKJQAAAAAAH/WUg6fXvpqyvrmWfnJssavMi/uyBlkMvkyEtPD7a0CNzhZ2Xwk8Y7AFaZ+364zZzHubLvw3ahCKkae4o7XGyc6JYU1JUb6gM+2jSs+lITySqAV6FoaM4yU2K2kD/M+v7EXGGDmFi7mtFOcjT5pidALfapzTNBjidoQisCVacCNM4FNifHD5SOTGz8lV60uTskp9BXQt1FUG91clb3UHL4nmNNYrQ/Pf6TkTr8QAiPUFh3VT9x8eUrMCnuhQB1X4/qOD7rw4E8fP3vWdd32xLw9DLlZSAAple6ycflaiwzTRsXfq2eLFMGFGt5eR1+yhaMgDiq08QxZ0Tue9HwOkrut/A/FdeQDPx/tyrbbjnDXDaTjF8nygAAAAQ3H0/wpM7n+GnQmbtYcvTdE27IkYuCknA2hzR28IwIAKFFAAAAAANMWNf2OTOevfQFpmMWAAAAAAAWAaAFpoAqTTkEeRwAEcOCAoa6OKwuNA2GSWOQiUAAAAAAB/1ulDzSACPV+jz87wK7G5TGCZIjl9iRMJEiMLNMcv20jh8LWbYVFKtNj7E+k8hjJVl0DU4tst1r1yw6Gh6SCoS2+jGTWVPkMjjBa8YkKoO9jjgeHABEC4YRz3VAw9pA0sxAkozyqhwNtccZAyGR7XNPjjIBECRIMYea06umSMDxP5CExPdVJmHRRDi4UXjVLw7XUgF6P52GWhWGA/Bp3BxrXjSdFNHAAAAKrPkfH6dujoUnPOQDx/yPpfF8DS2hyffcnT3xJfH6xIxaHj2xA4eex6r6S2NGW5MS4pfSuMAACtXzWlIFaV95zup25ND0v+f+3dz4vSeqcLLIAY6vjuNyfM+1+q/FeHhBZAwR6vS3Qb0vLsvYNU21p6R3rozgzKa6CcHMSSA+30lOgaAAAAAGGlsDTIJEY9QkxF/ifhvrfMAAtGla1MUEYQjtb+1HVCakNDQv+0AnwBIDgcKGtrCsUCsMnsMkschEoAAAAAAD/mtKHe0N+CmhQVOpN4aEu0kI+B7/hSxuhZnxxlKE4NmP7kRaVHZrtUJI2oRYOzbfXoNGSZSWmQqylFFSnBzRVC0k3W7VLpVQKoUE2ZjvEuXI/F2SFgZ6QJECJiYNVX9eApSKOH/vhWwimhCVFokkoqajY3CjOqcmD+MzcMhLFFKHorLIanRRgBWhwy4jRx0Pe/9V/WRo440ATer2X+U/ZOvheOLIvORGzxGt0ezdclX3HomO2Vs+l4zExilSNmq8Tx8Z/Ef9JwyKYilAscwACt2GrpAa+nWh2s6vJ2mt1f6B3HQ4+NyADO+6d19h0fI+8+CxzAAYsbE9HoY3T9OSVBPPMW71YoisMaB9PYraGTNqCvAwAWAAAAAGAUvxKQt94Vrn9u/QfuHxnmyAEwF5gAdhYIAUcBHjgY90kdhcdhUNBkNkkIlAAAAAAAf83l0P5Z2dhQWFLHRPg++N/kQWCUDB8KbFHO3nK5IPBJORguju0dh3BlPLWZZu0jlYBIt4jTHo7rzUosSotFIkK0qFitp85L5oyGslIC1Rd0MawtoHloLMLVHGkPPEDrkeCsvdCIC3NLbqwmFxJhCBA0/NkTgDfbjD0JgA+bHiaKxpY7IUsDEaB7UB25rH1rzHluXgKaROUWAAGt8s7hnlQdX4/1v8XtGUY93+g/uPY8WAAAAC9q+c6zdApQ4AAFTGtj18f3eo4HqPB1wyj3/3M9LOGGt9h1mgAA1clmUg/86nd1bl6AU6lZFgAAAR1en7akXfG0WcrrdiamSXQ1T4L/J5Z0BX1Hj+VABet/KeP6IkCmY9YnVBZovACwAAFNroHwEyGu9jl6s4Nz3n/mm2ITH9H6MkgUpRdKyK0nSgAAAAAAABhgExzN39jRFuE/hPv18XmyAFgRqILEbAg494qiSqBwARo4FPdJFYpHYVDYZDZRKAAAAAAA/zxnFD9QspRrQ7AeUJAu1NAZ7dk0SDHESdryGElMwlFGq8L+wpU7rpiTqcqxGGbz59UYGBgSJEaE8fTr4U5LcmELjZ4ekS2OfPjFABhZp0VfStbxs6Jl4B40tKhRwX4Gt4cykvVEIvHGDxKVzY55cODCLAi5OnTsa2OUcdlGfIVHArQNdGyJDHQgKRjjk7tjGNb1bha6qHQ+Y/xn1LnRBkjeFH8UqH058csAAAAAZsZqTz7SttxNRTFgABWWWVfBe4fR/rmpxgrpf0L1fTzkdFl5juOgAFXv4pkZ1sa8iQjblRqLW0LApYAAnff/D29mAvuiVWcpfAPDiOCMm9Poexu7+mOSWxwdSKAMtb7d+D5m/NsiI09Iid1DmAaAAODHKAdXWIonAF2XGPgPXmBXYH1zr8Yx7sg47AdLAB2SQAAAAAABQRF4fbw+HE4YeNiQyS4aSIyfJZoAAAAAAVmAt1SCK0pl/t8lZpLW/RvhXgEaOBT3SRWGSWORWQSgAAAAAAP+6rwfqSTUpMYdsFwmlaYrScRjTKVWTo4gqeK8UkbB6ZbrGwtbHIrYc5OBkSMolXuVUnLCOvOrRbJWXO5c3HPGBI0CscJrOcHlRWZmGpQEEKFRng0+3TZUEKtDAKM9q1dhJMPdhHyqLBiE6njnFpZDr1RRAyPoky4CkrCdTqSK2sHVj9VqQcctkVMMvELywvGC71uD1+iuGGHnn+r+n8Hoi2Q9oiza4cTGKGAAAAAvGI909y4Wtt0wAVx9b2z8X8e+uYQI4H9P8w0OHpyavoPUMtcoAWSyLpHqrBh0UBZgch5oZoFYwAAAETGoXprUT4AAGG3NRvqchqa0Kyaszez8V/DNg/2HM2AAq/bOj8z2PUdh6v3ORJiOno70+TGWeaoQ1KB+yC8TxFnBfMLrkNksEGXnS0Y47SdKAAAAAAABTYj1L9IyBH+q//8sFfL4UBywAAAAAAUSnHJu5K07zeZ5V1pxekap91N3xqpfgAEaOBwsi5SewqGwuGyOESgAAAAAAP+bzWD7hYdodiFofEqkqomWLQe5mQnFUVVIcwqitfydSR1vm/Umir7q1auX50gWrL0Asd0pFtpZDrLU9qqkfQIhoBPiSMVWchzhoq4CjqYc6UOssj8RxDmPLUaClAnQOL50iyIRIRUeXaaYaYJTn5HdjuVhjANACxBB3C6ntYtvm0iZnCBYmlAvYRl6zlNhezS/aPSKgrK93ZfbuEDHuf/T+//2f4tOIALz0vPOj83w6gAC3vWl23Q7w5WfzD+E+78eaY6Wf2mp4+dAq5wjXZLMaSeLzvubQYy1+9HmkQUAArv+//qNAjSWWQCGbvh4MWuFVtckFl7Qx+m//K09lgCo0ov31fd4bPicOWhgAAAAFVYE2/VHF6plFDik89H/UFHDXcfLUWM8gOHEJhQAAAAAAAAFDtKzbBMT8mFneP+97DV/hjAAMtblEvLi46WHsSywv2/E6WW/bci83eV97gEYOBzXWT2FQ2GQ2USgAAAAAAP9r1zY9TCJzhNIU2NXdkQaFkip8ucIoOGjACjgPX2khZxtpAMWkZbubc9+pZXyEtQdwZcQz29QRsDp1BsIWNOkdkDmPOwyUgkeHFz2roFw58Y4aAGGlsXvr7mF0imAKiHTby1cmHXiHBT7FSzlUzQSCDggKZjskAqdEkWef7QH/WoQK8+gMKADEE9n3P3r1eaFbvSeAqBfzHsf8B6t9PWgABj4n7j/uPVuJdgAMc/G8fV4mJjG7xn1/n+mfFO4YTq8fzl6+jMAVllNptcb9lkGVyzOHNmknGvHNAAASdf3Xv4QKRvfYkvB6UftDikJ0lM6Ylk1pQsnix8D/Kdj6vukAnPX8B8C5j0zZWy2hxlABpgDAA0iOOUD7ulBGg5qyYCfifdapaDMVX0ZHz0xK7hLAAAAAAAAAAKNZMDk1iQBAxMicd3waEXqd1us0sAAAAACd7QKGghNyj/90v9OdpVc+Kx40VHbgAEUOCAkW3IKyyewqGz6RAgAAAAAAHTD/yHMe3soGYZZdqy4WDn7Bq5LDaQhMRTkLaxm5NK/x8YnmNcTdA8jXxNQZn3VW5snwsAqwZTYIAlQpzwqiOiRjpjHl05VaQK7brhMXyY+BE9zqdLZUFIop8w0cBNWf5OoqROmilokjgWZkNbbjVHhMaiXlln0z0yRr1CwGkhADMw+UFVmBwc6OXx8hq/I/Xej+Y9ym03n8N9p627RjqdP+7+tdL3TX18L3aABn539X/lc+bju0AAV3ntnxT4tWdFTj6/+hcfwn4H3vbPP0tTjaW7QAEXKejvvU/K/ofcdyZlm80s+I9JDgVfr8G5KYFb3ptij299u/L8o4W/j3RWPzScTHziaAkQG+16PLEMAAAAMAbMvT+H0UJZYMx5QhquIjAsQABlEs/MNCjnRL8+6p716z3o3Guy4ZTKu50SofehAAAAAAAAAAssctQuLB3UkQFA+8z42THf95CMLKKAAAABLbsGb1wFvgAEYOBk3KU2aQkUAAAAAAB/1tgfntvmh3NAcWeeL62rnYnUvkWF/Ewyen8dm2kfgSFaVY2B8Obam2QHafskqSfj6pgzWsuFRUDyNcuXsjEayswj26zKXe2gIzBkIFmAAAaMyEhsSl8RBIMIYlZhOsR9lYxujDiZ5QshjHNy3ljYx40UUsDyU6uTLxVlonp9SebtupAdIx67lpCwnDxeIL6ac8YDH1XpO5ZBn2/j/7x929U+ScrKbAF8nz3rdHwvI2yACd3omHp3Yb7DofE+g7rzum6bSmuH1nOx6TXABhWv6b4D+V9e9I/1Pg+q7iggNLpdPWz4cY8K5xTObW3wwi7kOUt1CsnN8lT347DDXbSSsOAAAAACDIdr9V0dClhQzRupCUA4AAAaXC+NqEBM4PdZg6anm5rIYkGOZjQPKBwQ2lE5ohQACMYQAAAAAGMYj2COWs7A+S/iv275f12y4AEEtDSEif5gLPzf+RivOqk6AF3WYGYtKv0eFaOABFjgZFzlNnIr6+QAAAAAA/6yoGYwiuikawB8Va5w7Z1aQMexkqaI8aUUHcRKMGzoWom0jW6btjP/1KVrJCmWMVqYC0RSMYDyRmOKaUUof3iMylsFEcNSMxhRQNLXI0AoHENSF/M7LFMADUds7c911KhFFKQn11931r14NKKA1McPnkidkcbbkv1agyCXwaXCutIKauLAAXhy9G4E6nN4HW7dC8HHx/839b7p6p+JwkAFuZ3vT62jlgAC9vKww6vg80TXhNmlhgk1ePvzyyAnicfds5vdPdfWv5TuP3n5H1Hz/u/BvEAvn8TjcOONxtopnas8ZY460Dj2qVUx3ZwYcKETKFGuoYwAAAADBENy837AgmtMR0PMKoA4wGmgDMGrp3cGIxR85ir6sw+tthxaiyLD0joic4MHYRSgADUqUUAAAAANnPQ3ab9X2qO5EGYl4wwAAAAADAgs6z02DD3jPrvhFA+ZdC3S4MMAZwzPJ5OQ/ARQ4GTZ2HYUFYlFYZHYXHYVDZ0KAAAAAAA/8qShuyiAgzMBWxTpslgmSSAEuWb57p+m6bpvP/uliU8CPBDSqZOx/IsMojB8yxo4JM1QoaZFsl6f1p7vEyYC+5rzhzQJJQ0nrv/fc0/CJAFl4o000tm1kxFokTGzEMGm+fLX6uMGJkxEHOpKgHn3oVknDxYFAAAqtICtC+DxYgm+P+l/+5/w/l2ywAAAwySNxdyOIZkBoAAC7vp1uVmyBjp62nuon19tdYAYlzm9XxMgKzF5SxNykVk8WAAAAV9tfp3kWKgzn01GVy4UxLRjfj+jQq58xe2YybxpQAAAAGKDZZ0txFXzK7sSbCQAA0CzS1GO9/d186itDuf3YWkMvI0vVGUMTzlE4KlFMWBgAAAAAAAAAsxTXV/XBtoyam41n7P3BHhgAAAAAAIdJNQGMlaBTosgq72UrYesAGhyfOM7BUBEnt5OWKXxhK9qk6j4BFDgZFsQVlc9hUNBkVhUNiIoAAAAAAD/rMQab8ccZmZmZgDVTOJC0VKUEjFpchYVgETaOTj/yJY7IWbB9h1TiOK0zBadywSh5X5S9Y9iqFZGNTFpkS0mTMj7DPOTUEID+yldCh/qppT2+35VwzJiLHiP10jFgKy3jgJNJNQxoAAIZIzSrjjFmAAAYalOiDgmX7P43tARgpoAAAALygDdPn/ZhBe/kdr8/t+p4IAFTl//eB1soAArLhfG9DtyoI4dVrYwamjp8jeAACYdP4f4PMMguyAqoxoAAABWej7LkEGMb2mdhgHB4d+34fCwd6+jddp7JAHRdJof3b47zOHPddPGADXulcUt0iWDRDMDgPuNtLbzF/+vT1V0wdmNQAAAAAAKCE2PZNCqyL7nf3jSMNAAAAAAAKtWwyBKuOPSdDM0XRk3aDNDvDes9Clil9avFBquAARI4FPbTFZZPQVDAZFZBEg36/oAAAAAAH+1dNj85ktClYy8MTAPCPtVFY7qJeeMKFUBOsCM6nZrVUwsYo5H1pjJ3qOAYDnWEDu5RPMKJmyRmI1ItcipyTmEZpsJUVY3pQYf/sstUPI/DOIwYANMd1ampNOuNLADVBv0518wYQ8YfXL1wyFWWUzSxZ5/YmQX1Voe2TNAfSG4SBe7VuYCt3xnQxyLuNL9r/u3TYcAAK31v3c/+y9hnjMbQArnaXde926eIZ63AwwsZamWhIADaJf2H27y/QlZTEyEKEfFEC8Z9HSFScqf/8UOIEKdR3Oo+z59ZxePoABhGn134jzfS8LyXY6gABrlf+5dm7G6152dKZG0LNPuSn2FUFAAGSCnAAAAAAAAAABRcj+ZSJ+I8OmGlUggAAAAAAB/7y1uUmnetK5+KFCSZZCMa4uhPAECe3stisuVKGUPAAQw4IChrpKbDIrHIUKAAAAAAA/5pKGth0+YMKT/D0zhUWPV9pxyGAlcV8x8x9l5jWsifSMEiE42Ku+Ltpac/B8Lo3JoSOH5ATiw8inWtbEPDLlh4VCjqJhUW/HE7WCMk0uAaGThOgtjjgBQghaZ6evsBFMKWhJwAQYZY6UILbMxI3XAAFjSX0xtx238tmaAAAAUcYBHIWjiRIUjNsURnyxwAGAF6U51go3+lfvXF6LZKcdb5n/iez+jfP4oAGc9hyvAcbW7LAAFOP2vvPmvyqJE871bTcDTgnH4nLU1MkADDd5/9H+H7n7z0n1/7367pzUgMeF4Ll9bAmU7BVkwuNqv54FSNtyNV1gjMrl9234gE8jp/Vf4r7p8P5nmeD8fwYBIF53OO/e3cK8Wz84IXuNauVtcfu00tZWymTy+1VOcPgAAAAAAYBpjt4+IlTtGTjf2D849bw6WQADgBB6PMlJe46AM6nhbJlgh5EjLpAul61cqq+QuT4vQGTC7f0df9lFwBDDgZNyUVhk1hcVkIaCAAAAAAAfv53oPaBO7iasAE+7GPzomfRVmDRXxXFz7bsetq5sHMSiaggYMAXs5FxserPPdaGJYcv/sc1XZn0Z1cB9MiMXAdpYkQ1op2qveS2R4cUwcAGRigI3qgTKwO80QxgwGqVpDm7OJ4CigBmg1wqxYYwYY0sBAAwYtMrI3N9PJgNodiLXmAABMSDGPs8sYMwn24wAK8910dmBaGGAAAAABde7fu/4/Dn44wAByfG8PqdfKAjuvUaWGzNnFd5tyDPCQVysvWP/k+2/b/h/u/6f5nX2gC61uZ2+wG+votMO/n7S0IToTd19PP7oebFtnIAL1/qeBwv1vwvgfT187WIAHj3n7vozuGZhMV8cueE+WHyP2tMEXmrSYWAyE8AAAAAAAAAAyXa7hRIZ/vUrCoklOOKGGFgAAAAAAFsXAFnkgT18Uu4hcIdXE/hi3dCF3OCHSAD12CRfgBDDgU1zQNhk9hUNBkVhcNiQr/f/VFAAAAAAf71Ae14fNzguzJGldzfnhTtEsVcb/TgfTjG/OEYGoIiKY9OCJCxJt+M1vKJBZztTrkV1lkrJTFdpels6mPQWnq3ikhhpJSeUKAZCiPIRD4pgw5x3cStCPECiwNMXOqF5WF7IwM1x5CgGhOtsuR4AgFYa5YfwhTtk8GjfT98MQ4FgAAF3y8eKkNP4v5PCQ3cL7X95vTAAGX3n4tpQAAXfH5/f6mwG7jaM58TbBXDzAAA2HcYyNPotHDu44eLAAAAIzj0UFulVF68mxBKHAtB8/7/YfEV71ji0AF9B8x/IekeG6fb5npfVaIUFDROXQ/nY1pX/Hh2seHba8pIFsn/w9rLTSx5UgAAAAAAwKGJfoVKfPtQj8l2SXflwAAAAAABf3JEOqoj8ZVq6DFZv9jCAE8FSG0pMOoL0FxxnFdpDXHVwFnHcABBjghVqUVlk9hcNhcNlQoAAAAAAD/IDb6jWS9vAxDPUsspBGOdGn28qVSbAbK2Jqi++N+eCAATqslD4JM56nIypFSf7C1+qyfNouLHdhqywyTr0iFbZHCizoyis5VaQiJzgjTIPXAA1384Vj2DKoZoIUMBcJeSZzXaGezRAGBPJde4KDuQUGTMcQ4zc4JClNGoHM92+OiRfhYY4GauyKAADUx6ri6/OCdD948n4/TmIVyf6n/tdF6xjmADHbxPG/lXfc3S4gAGGH3Pzn1PU2QG/x3NzrpdKI5/b9z1tCsAASUy39ouQ6CLpSbGkUcAAAA38Dwuv0QAB7cGw6sUXRNDsKyzOPpvNJ363H8OQC8vRfBpS58wQaCrByLFAA4ABQiXTpHt83RH3j8X43TOpYc5rlo+Vx3eM75xoSNHGgFgKqKAAAAAAAAAIDkh3FQRtbf+MrFiF50ggNKAAAAAA4PROJnubgwfzujSo8uvSkIeIDYoU9/3gHhTMxC/PfjBFDhR7oPd8ABBDgZNycVhYMjsKhoLhsqFAAAAAAAf6MsNndUx13zwChJfT3fjU0T4CW2pqZmig/na6Ke7KqafLLVuCzRRbaxSPahDDUyRJFMK1+SKDGKIIIOzZjmJy2vmuVcPnmInSkCF7PjgAAAGo1OQsnn+bpA6UaAN/g9xZ8GMAAMOxGtUWzrssc8MCEUtXPoQGQiro5n1JJgtWustEaUdHHAG70fIvPAprfj+/7DKE0E46L5pd+aF4wwoAAAY7CsicOJ7vTWhKACt2t+o+E+2+vaOBbR8FwNPPPDPW0s/ie4ee+F0rAYaGFsz7+4OwQ+ig9UO9IfEAwoAE8fYCQ3Jna1o9DZX8yxsltScIv5O732gAMY8Hazd2infJ9VhbSKAgFgAJm5PJEBs7EtAP22XyWG7ddt5z2DUgZ1Xs21ifq2NTQmOoAAAAAAAAAAsZurTuIiB1rhXO/KewYzFHAAAAAAAF0+/b26Mlx+t7qDYFAU/RvE/kRKB7cMSlTQElqHH38Of4UHL2cBAjgZNyUVhklhMNhcNlQoAAAAAAD/G9KEwATnQjvMlxdWjORqtogpcEfKqlPGCsPGJENHY8lVXTMg3F69/1joljlkb7qJEZYULcIrE1FpRRixwQiuHghFzmTqPHh2kQYsAA0DC1N22DJg//+20ooAbAdE26Ww044AaM8xz5K7SzwwxYwGoVkZqPnTrudXQvjM/q+8/oKTUWorIxYBfp+j0VIVrp9ld8mS10k+zRPbG0vKAAAAAXv9z/Qvme3U4UGM4AMdf3nZ2/qutUFcvpNXuXEF6nJ52zk9V2HAAa2Wv3Vwtvq+0w7ebmEyVyTMUGbRTCuLHpfjBm7E/JMhuhUjpgHgCrYw8M0Wl5ffa+qAFbj8wXon/2kRXgSADRwADDBIQ3ufazf0V8lWI/JKkB9i/QOeEusO9eo5t9Y2LpLTCYQAAAAAAAAAAwdDVLiwMU8SkflNa3Xl8s8AAAAAADFDyh4LeUPxlph6SlW5SU9RnQEpWpRt6AFZvqTmUuPp5Bial/p77gECOCE2thWWR2Fx2EQ2Fw2VCgAAAAAAP8DkaxsASwQpGLUZbzyNVwIXl6XhWI6JoHPCLZ0P9ItEhJEL3PclU4XZCyldOVQkaJ5NI0pFGDFH0CE8cW2Qp44xzinPW+FTHg7NNLOY0BBjCWV66p9q/JdRLDGiXAbJBAIOQR8IBQDjqj4cyADTCgA+IjGXDskKZJJff/Os8dsFiGmFgAE2al9KWTh0fm8xhvz6r0/9d/Qe6ZAAAAEM27V8sV1c0AAAALx9vqODsYjO9fT43HyhVcT0XJnDj7IATlRs3zIaiByuXmhlMOHY7GAAABlgAC+nU7YyhaisiKdPxl3d37lDDuOtsAavDzR4df4apRW4ttOiABoAaYXnjTRAC6KJV+O9DbOUubXTNCvUsCBD2hX42/N7xbAowAAAAAAAAAAFw+I+QKHW1YBT9ARgmHAAAAAABDC7G0rpb7iP2fiXON9DhmjGY/HyE8Rv0PRB+DIfCf0WTEZCsVtkk4AA/jghNrQVlk9hUNhkVhUNhkLBQj9/ftKAAAAAA/cBoWa0K2ShLCFSydMh4PLpe31EzRtxoU722z6VRzGTPgd/wp9u06wPw/Pwfz5J63M/3+1oz5ZqJAkKZJDgCOTCCDVNoChO6TLG875Xyr1S0R4sgPoWE6WZCO0GptjlABprK4s35IAY00tAOOOK3HIkZCOSnKxD5dJ4siq4gyoIwHNTQwwgXPTV0m2TK9H0HdtaVU5/U6n/x9LOhoRngBnnnn2v579E9U5GjWGEC8oDn+r+teY1AY11+pxOL6xo4Vu7XR2YiABaEf6/XQfIOL7ZMPpjwAAAACfXoQOyD5He37oDua16U9Qo6W1tt75d+gdBUgGro+Y87+HhxfY/C+Y8PmCrNMhH1adh6L7W2XqyM8RjJjdTljf9e/b16V9X4wAAAAAAADKMVqhiNHS//ifUuR1eIAFkFHhDI+FTIZ/j5EH+xQ+tsQahucahRNA/FY5kWoDtAVcDOOozdcH/YcABAjgZFoYdhQVjYNhk8BclhcNhcKFfzv1vXIAAAAAH8gPaNv7ba4tE5UKizijhrZ40IVy6aTKQy8pSZUoQjVObqQaBhnp3NzJdFhwGNB3jXRNNjNizJeiK3DiuWZXKCuIb0mHQZ34vckrm6rkgFiCCGSR1NxBAUAAB9DCorBRzDojMw4keLTE6pbPdstD2dIR4wY8WVlN4kyx0YAPi+3Xxlcq/d+ldt7xp3iAXjGOvz/eeL32cY44gBu8b3fyXdNgZY9HpRnoXGV8W7AAVrko9joODuG0t3SiCM5zgBoAazjd7e7LvvC03U7dm/l8HDkwAN/Dj9f33NWrqfebpAACKb/NtD+TeDSFBkaSPzjhdPIm+bru105AAAAAAAAQQKPP7lN+B79XP9jMAAwCDNvH6J4sID9wEHEO5lTfLIjnpknFZDNEVLKmmUp1Id/g8uIHeilOAAP44ITcpTQXFQXDYkIwQAAAAAAH7gNV7O27G6ubCrYbmRot+HKw0FLjjSdmdsqbXMAYVYOesHjEtNBIXSNJ4QdvZbz11yRkxeFU6WoswUY6MoomYDjFgpyVzLj1H8k5bKc4eOHzrEopmbIVkKyatux5MKQGTMJz6pEeaMkHwAoVG3OxPC2xfyhAAAMGPPakhcymckfnzWUrKOPs6tIUQoZ4QJb9SNPaCce97Li7terOn+1/ofYdfwrwkAJ5fj/GcHS5gAF7p7DZxPM2FY9JrYYakMt+PSzhBABd7+d8f/EcTwj5d7jw/I6+wCSu4dv0+AsPJh5/UNRPeWb5p/Q9CqNgkPxOp4mIBfJ6n3vB+Xnu+P6DV6c5lihEdNvWSkPFcowEH8f4L+oMonuD0+1OW7SjHU4QAAAAAABTZ6f1nq9Y7Z2f+Tw/nNsFmAAAAAATUzX8HN+YVkGJeetS8z5btPQzQ8ozdxr6d3zksNnsxJr84RO1ilJKIPgD+OCEWxBWJxWGU2GRWFw2GQoV+53PGwAAAAAfuA0Iqq/Rtc44qVQ+JLCcEijJ5SUqXXiBpGNQIHCQMEjtOEk3nU2MARuRgxIk0n/LLj8dBxGMzPFnEiBkuRu+Jwe9sHBtjGtmgiC1uHnAu/+azVhMKGGGY8Ts9lYiQnjSgdHuO4+/3zlSwKThyEkiYMKiQ6jXgKAAEQBE+QyknOFeQ4mIXn2vcfz72LoGYAF6HG/T9mqoABn3bft0ZyGU4dz0dfVgR02vogAIw8P+WfW+u/GPefn2W0BYRyq66hWApXPvGGqUKjAhSkrRe0l2sR/db19UACd/tnh+g8NzfeuLtkADHirvdmFR8hfmZ4hpOYVUXP3ZfT+TwcxWWQAAAACzTQe2+iuwkCroX+i9w5ucgAOgPPeXzncPONnIQ7p6d74RQPbixuukatfDQIHn19GfckhGJB3hLeivAAP44ITayFY0DYZTYXFQXDYZCwUI/f9Ovb9vx+QAAAHx7gH7gNCetZEtxYcDn0J6T7D6/jo8gkqlIcNPq6hHRMgyWk4JaCWpAUYqJG1PNugok8NRzg8tGFGiijAMYiRN2AymHABvgDRYT+ITw15n7rkA8UWAIBfGSKm6nPilAYA0I4FjhxjFAFinw337kzd/edAhjY8WWAAECysL2LnODDkerdxgEZdj8/vaAAJ7T41xl2IADldD1+lEBlnV51gu9YGUTJjmOMf4n5j/U+46GvnM1hACr1uJwwHe2OX9ytLSWwlmPSxxDZb+wr7enAAHY+B2XW3jjOtQCJArFVUav+k86wWtVqMutdqn31UkAAAAAAAAKMdqWTwb+19/CdX2e+pAA1dyTlDsUA6n3/NCG1HTJvrMGOC07T/26HCApskBshgNxt/3Q4byb+joPC4AA/jgVFoYdhYVllNBklhkWkfv+wAAAAAAHrdWPpi81arITPQhFE6d2CwOqAtEhaJxTgRE0UjexBGWimIdIrYV55YKOn0Pl50zdVMjoFSwSmY/xRtAqfp4U40OZOswHjbV4d85UFN5rUWMCZu0bzNsK/gAGGGppjr7QTQMAAGSlJkJi0zXMUT5l17kuDIVyYUoYfeLrOcriLBOtye+2wRTT6ntuPoyZZWAXj1HXbb2TEZABhzum6KoArPNol1lqzIAAx+L/S+l/duk4OnzaqwDdrxztoLeY1hXnMQjh0A3VdJ12OO7r1syAFOX43uGlLf0sAF9DqeeeU/6P7Z630uMZ7I5vY6Wr0mOeYAAAAAAAPTmMIZ6J5F4z9d8z0M2AAABgcADuOCGWQh2EhWKWMFRQGRoV127r699gIpKAAAH7gIwqN80h00RiHS6CYQoE6v+7EwBZRL7KvtH1eYIKjKMYL9J0jYbvXjeezap/1bUylvycsTrNlJSeumP949mqAoABmz5cv7IAADi+2908zpyCUpa85bPXf/2nwcBTPIEqu7FovjYwXFtHuvZ8m5CWCgT2VYRiAArdzuFlvgMJnaArVpcgBec7+Z8d9v7hr+Z1cwAFZFCm14/m+WnEW+uVO740ZmABIc5rXqwAHKk4NXSxdVbBu66mWje3Z4VjoUADMC93keR+1z+35dfpaMQAALVN5nRX5T/63AU5S50Fwd6HqJgP9Mq8X/1XixoZes++bT/Pw526t4kA/5+AAP44GTZyHLBHKUKv8fPt+eOQAAAAAfr79XQQ1HHFxfTWBXgV1glG8kDiMiiijTY7t4DwWYiPAB7Tu6+r7+eTwreK5U3cvts2ou5wggt23/t6FYxBh0Xn2rmoHFlEDC1SJzjWv5N5nhTAZUYLFJnGVzUVBaF3yfHcmwKgFZZdj0+jBQDHyxrOv1/Xu/j7/GBnr8L+s1vXOk5mpIACpjIBr87K9mKstfuHU6XDm5GQBWEc/j479WSAJ1uDw/qPa3o49w7rlk5utrY7tKYgAADW8d8W/kP073DX1uJwkgAYL+QMr3JmHfJdl53tW6ZBQDjWQUlzrRU996WjcKBVo5+AAOo4KVZqPA5DA5DCKDJGI0B3Xr6+f38ev35e/1r5mpzwqrcfb7/PFd+cewBDOaSzP0i82htwQVOA1S5Smyqm13ABLSUVwg5lo8lyqngawcSsI6amoNCqKEtAnWQ8GK1mzwCmRAJNNsLsPbjwUAjdZfYiChjKVQU5ZSU3sV2igdFE4/6bP/CcEy4J0dv2MmOi+W4QcNTmKMc5Igvovqn4/wNtYkzY1aiUqKbDoKDC2huEIA7ia0UFElR3r3g98QmnHEMwIQtfPNr+26PN0eJvmsZcJRDhHfRCR5E1pQsIQgmyWyB2xZhyHr93e1kioG2ID6BICESF2P3NdqdKycRSnOMFZynOWdG47FABEqQJzoGcuVRliMpfi0o/tWFtnAMpznAcNTjqn+tYaYIqWW0canGWcAAKWF6SZg5U1FU5APRF6z5HT0cep4OMZaExLMu5oycTQ6T5nrfNftXQexIRUzIhu8Nxdpgy0o4/cNKsyBRpfu7umwSFVh3qBjGZnoQxY3o14TkL0AzCEGuYXiysbGRPSHAA5DgVNkgcvEalcmhEOjfsAAAAAACBEg58UWtLCo3DgW5vD8kozCiwRshZMJawEk3AhOTBraCyqnC4x3zDAVfj/knSQiIUkAv4T2OQJ8P1sAVllpyADOorDuXXdVcrJhALQkqgvCAsnpsiQRIUprXJKCxP03ub1051g7AZ+vt+GowBYAEBuME6lWYleM/GwARnGEduoAFw4uh6fqtGaxwht3cCSggAAZZ8vxstZyrgWAFQcADkOCtwVhQeRMUAzOePn6evxle/1PfWp3xMuiuOdby+ddGWA2ltilzTJqojukjp9kVt88KNn6TAjt1dbxc+eV0Lw72mnxXTN4z/z/LkD3KV2xTp3dXIYGwBWB9v1Xsr4AfEBEsdGaJvOAlOjKOHKsfYEhwB8SLtLur1VAT0TjkE2GkDSDsREByiLNHQbmTjnYRXUXwdy5ORDPPYYilkhRGmtpioRMqFFlTTyRxFGJDT3KldG+2ASoDOA6AI3HmriEtFENqaVPVFG8FaL+Cq0tKMsJwMStWN1M4RbYkuhCQzkAB02XKToASYjPat2M5ahPGvvqMELzgV6oOKUIADs0eFlUXbzanHYBULfrjDC4wlGWA5zXG2stBE0xUR9x3PiKc4Z4Kng1s+QVNkx5JJOhy8XQxSb7hgMUdxxGCIUq9HR+B9d6LgdD5j7TixZJpGNLruvurrXBLeNogUqb4AUTLtppao4KySYqVGrPDwtpOjMmgRbAtG0gYJ0nvuieW2CRM5LsOAAOQ4Jod9Kc+9AAAAAAECmSDfetnlIrOU0uq5XuuveN1OWXK/afBSTVZYfHeu2ARgCEY49xxE+zsMv0X1JJp9NK/ZrlQnTlAumIlKZkvr9u9xI1JJ0YYQlXCxq2EZDTLun6E8AgAZSGeGHKA23FmA6du+D7fxr699kRAS976nADgA5Dgr0LoMBYSDAD17fp+r3+AAAAApQEHSVYyI7PfrOFalETlsxoQvB/9VyiQFIKDCD/dCRGjSDKOc/xviuyAxFTT1oBqzyCsclyHMmiVHzoAMBWTEpETtbQSeyJdRRSuF6K1doIDIPKXyzLwFxpAJAJOlp0gCUkkaSCSCiMkUXBxqQgvdti0sliKCAjBOqaYEYHNphikq6SXOpY7hAORHgJpxUR7tH+FEBxKjgQxUBsPApOJHFMsG9sUTSAJiACRa19kEuSyOY1voFhpjcTAWZmUi0/JQU3vyAnLRJSHa6kp5YxASsWJvbeZtRX7kIG5QHmIzISUwo1ChreC4DYBFQ7G1WEEDDJtamUYaB3QNnOrSwFCQ/ROk29RtizQIASmBiqU1U/6q/IEhwqH9u2WtOk081SjX3EqABT5zu2SpwsEamIcRaQj1mlpbnxTsaEwzRFLCJs58Z6RpktKFaunyGIPL5qQuVUVKcb7vpfAzYa7jNF6VaTXP4KlprnNzmD1/NvMM8ADkOBpqkXkUPT2Pff4/b6z1+/jrutdy5u5lspeSb67vzlcUGxmZirrGvEDjBiEvP7XAKxdAf+MJDZAAt27tECvgUJ8DAnhktx6qLM1587MrznP+QgjXn2QUZv55qKJN54ZZawfd2UWHnlJtVTkcteStf81+USvaUJ4caGM+la7p0mlTcW/hIZcCEIf6iWtwofSWGmKKbt9q1Tx4sS++NGXLh7CeO9rY8dDlDMF6dvts+kJsIjGLR/W7NGevIgKYBOs0CfdLcFln4fxSv3WPh2bv4ADkOAJmXagHRblj35rE0YXWdbXGBlG6/8r7qMysd7l+KmpwAOQ0AxsHtQJUq6Xg4ADkLIMaF3DgARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGEAHAOScbDaQOoICapgLq/DN/IXrN9t3rvKzjkAAAAEHf3wAAIvq72ztnySy3KcAztD7B4gQ4hwD5v/z+AgU7hxfGGv8j9woYDMHFscRCpPJN80kLGzVjijQQ4BxohwrMinkBSzT9Pq5EarPJPwiDIBqQ4xuxwOTYn/7WcEhXrE6m0VxFQZ2wNxjk9hgKimUBI/5oEiB2HHPPdV5Y+2bspcmaCTlmIEnEI9EhkuCkOJaU+OvaBhldPs+HSXqsiCHUDLTkEojCaaxO+5gKLQmphqXdb7wz5j9T5oQREItWTfNJ4K2qMngp1qxjf0XsNxwOFWROeQUGmukECC76vFcwyYCM9x47W14AFmM9F/D1UWABLVytahOpI9egL0zZAH22trVi6OM6nATpHIsDuYgehaA8EOSXNJsrEMPPI4lBLF4UhViEB6wn2H18TjtI7LlhG/jCIMQS6rmyVDOEvAPjoj1zHke+fNAnq+CEPRH03JY7TYHDyZLk6nwlvw7B7hAkwitJF2fJ8Qq0UEnRl7kIuyBLGb8h4b7rfHeRKnhyXgaJ2tb7iV66R8Q0Se1nk8nOIQQEKmNyYwm6DkwFR4kkOUStUSAFEia+38/k4pKCAiSyQzHTCHR90S51lCZcSTqQqhjELHJyewskOgZIhrLxME+ogE83gCXi6f9dJKKQzuHJ3qBC/CJYNtSlx+IkdpMuNI4NV008fyCdigSp3CJr5LFSP/Vq6EkiLdmKJ83+SxP6K9fJ0bBGVCotWVQk8z9eiXtfwdK2arEfGZNMcjp/rcQ4nZs3LErtS65cyxqxL3pobJBI5f/z6n/4VfoT7neGR6yH5zxyjUlnqiT2vtUs2ERym/JddNsKPW08L50ETq4a0qn2HTm+oI4GRbVI3JOhL+uXlf5eplR/QwMDA5ppn4BGPgv7qGD8fkAAAAAA/5liX71TLve8piWhJFQuV8qZx23LVSCLPpawcBOnMEfcBpnDZ5Q8xHby5yJgukMHDjUiwJEBCJ2EYMwjdiEY2blH04S+CvxCIdE0RK9LJXqtFkytAwKQSEn/MSQDY/+UiMf+W1TYIFATGD5zO4CSrVruJOyRLK44nw3cEvg38CiPr7rBHs/ASOWtEa9cjQaRhkwEd4VEIkxlFA/bElnyTGljGlCeRub0ng+6EuraUliYV3B53IhL+dzj0t3Ni0hNt6hOVQfyYMDvL79t6E0jv31k5prwLl6/xLiDhSoUrtgsc3SHIAiMkJKLAl8nE/4RJUSX45LheS2aRpWsevJJyRPvPDyMGK7YDXASQwTzK4u4KKF+6X8XeB/vORceq9QyPsCkaPLaHA6lrqb5km5hIBiAHk798iTNcE+BrcdBEJQcSRgArNBMAiKFaHzswlGMSn9kI88kkcpX/y0KDO8DJleWhSsKgRXzIJERPG7QL6p3AxNR4sVpsHSPMN0mIxZJMiiNzEZ3zJGxtiSN0SwBCVdBKI0lCDUzfyVjFee5rNFaYOxZ9DLovRvwEzFn6ESFBJPgEnSCUKySppI4S1gHWCK4drh4MSUskU3ql6YELKqsemqUviO5JmNXUWsTZ0JUIdGWmfpnKwaICsrhRkTU4pCJBIs8a/1mS9ClSrIqJijKepisKmoLTJEJyJEVK8jJqEZdYjTxhHRcHIzMuTtbsh7JzEz8KrAVCqzqgmwGAgzqD8j0qRSD+LFaZVVJ3QaDNS0MahStKylOigYMxOZ1OZOt8t25JJ7ykSvUCc7UE2yfQ9UwTRm6PSOLHIkFF6b/JqyrfqotUl77Lv6seGAAFFFKAAAAGGLGGGSYvqmnZhYI7kiel+LFu2nYE1DFlgAACpkMEiK1kZ2NaqSQkzaeno5UadmWrWNaqQUDTKenp5suMsZGdnY1SS6NNuAARI4L+hw2NCgAAAAAAD/vliso0tO9izMiMROIx7fKNkKyjrKcPoyNsAKQ25rujwzJT7kKnyAR+sxn8JVZCHMIeD9fQlPs12Ux4bWYKIjkPBXCSP58fhoRxPEpUky2b5n3UgOhLssnczhPhW0J4GFdQCBQ+IUZAf3ceY9D8H/p/87MbjycR46Ej89/ZxH6F9HJwqJOID8B7PMr+dvvlKZujdvR5MD54/ztWJYvnRO14xJeVLROkXzBRp6aSA9/X/weR5XB3xMiyAQelXWag0kIFohhsKQsTyEpVSGIHUQSggtOqePPskrAogBAKyDQ3IcmuDll9G4e6iTaxBs4hNlkgOowmABCE0jxPrtQo3tRJSatddXHiWGPK5Ikfm8m1djA/FkyjJqgk2BJpcTRAut3xfG+jK4P3SQNGIRohCfUITJRCPFINEQkViEYtoPItokJlXJisg4isYJDK6QhWjSyCzzknDIpEQAiVY93loORRZSCZ5DDaYjxBJG9I7+wd8/GtHHkMgqXD5lUZuueu3EBTfsdikvPRf1/sON06ifOU9fZAhM7qJU8oRpc0IavLk0QiAS3jbiLudRZM6NoWUTv38GyRDgHFyHAcF/R+EqQnY3TmQR/KquV4BIJeMiVqOT4PZJCHLzfX8hks8uP3E3wScWETSkmw+LPCAgEhJxCcFhApchi/F+u0WS7AUKOuzy+R+mGLoJ9cIMPTNzHkophggGlayIGLiuJyHHFphrMm7q3X7ddpfrZNeXJ4zMZN5BlbtpPGaAjzSBUwyMMpMQqkBnLkKCCqjucRpQEgMG7/J/+fmCLjjE7pAp2t4xNQSM7Q5O4dROsIROFkMIUgQfVpI79RZUiXavUmST8dyiX+juTiNZjlKBb5SKi/YtJIwLEAAAAAAB3d4UR2sdNBQ1Tu7dG5uQwNiwbv7sMpVQvN71lIhz1R3gARY4L+uQkUAAAAAAB/vLrAToOgHIZBKXiimoFhRUmFuL28333n4mARLU1uEpeZEBmsSCTCCqvW+mpxifO5Jm2Jn45nWStX1pTi2YCUiiS4P5OJ/LXZUUonSARCD9V0/g7ieZ54T8CfRgl7yzpLZEJRizoyZXfhMEZxXt7lnsbc5CBPu+r3sS2m6J/KX8J+P9hMkKbSZH5spfNk4bMCnLBH9HOnounycOwRz2qJYHbTMHJOanONIREq6AF46SIjBnkmnJNoEpMIiyhdPCSXGulEqNYmgZFkAjDVdB7GHlqd1e0xYkNBIoeS33EYqdXSJ8ZitvnJHESWqUxE4MF0/dLvOSwWRICifiSLCE2cpI8DdQCU6w0T6upVEQI/e7szqLNNRBm3JiSQk5AP+Gt4tTkJCiEq88liZpEfWie+i1NCqed/EIw4xFryLmeeTKTO+MJqwJAKvBbogkhFJHP9f/Wc01wokGESjSCUuER0uFIufbh59WSKYgKATBBoUD/kONpqRS8iyBTnX8TrtMqLoYFXmL0CstoP4xJ8AjJlEeGYIjArE55/C/lbPDXba6rEqeEnchHtXeCXiv5Akd3zgj4S5GRz0WVY3nWERrjMxLQ+6c6jx6klMpYGr7iRBA8/IGFLCCZBPz8sSIin3q4SQUyvAsYJE7v75KEeMtI2iK6wZPTKgsIm9zLCe6lVkT/05cx8b0mZnyG4n2vSSkozD/Bycif2fmEhBJERkMJEzCLoxGVXI4PIkGYXH8YlbAQqaclIzhGtDrItP/X+w8Xg8IfgAAAAAABHex9j2WOfRZCRwHQC1Ms6wDVCqzQcV1KYkGDJ+14Wnj/FEM9V4Qv/C0jERFqUXGzoWKP7HyshsdrW8Dk70LjT0F/x/RdZgAEYiWD3JWYhBP5WVn8KjHJCo+ScKG90JzpmOBwAESOC/sQolAAAAAAH/W9ywSzC715YmAdcAMmKHKK0Wwnt0cWchjb1EjkuVk51f9QQMMlE3U/CZzZ4plzA1k4+GJ888VE/g54WJ+OOek+AQ823F1X7oTBgCcXy2S+AHOCfTZhKCHy7+StSS4QjwLqRD7A/bAlzXwiSxNTt6p0kIwaBX94rUmX/UJ+PxuTkzid911qI6nwkQ+ZH2eIewOeE7WMJ5emQQnHw+r9i8wOF2Yx0x1lDi/joCY4lu8bI8i85k42X2LrHonTcdLmURemv/zrFf0JJ8UhJYRwtUj6dwNqhqAJIQLsTUwZC37kMpMp5cZj4H3rsqyt0fMTBBMtVo4m8hCZUld9ZKJQpJKgwmdREACEuSR3eBs20QcgmFRG3wgnkKeTlWJTJxsSTrEIHJ9Lu8Gx5ofSLezd84IbkuWB7JfP8G1Rf1SPFsiS02krNNDDk+h6rLUexXNZKLEJw+BY/ORz8KxHUGGcymMgiQRPVJ4bJk8fNqKEQtTidXNEUl654LPpCLMASNGl+J1XP6/9T9t8HCiJwD5DZUUfdpE0YgVnzkQW1h0uYdwSaDOryceMSw8IhEsEsMzZPmBGMuURT5DrmGSgkJbbgxHvPw7I+EeTEasr7n1jqdYkNobSBeVX7SRhCv73hv3HvGQWpbB/MTiek8/0CCEegk0QMnB/aSfRk6QQrKJ4bBEjY0hx/hJDLrJ3JUuE+uk0nwRFjA7K3ldBeaNj8lSHk1JI7MTTiJJLwcpKXA/hbSTKw6GMfWaApkUxiFRpPDbS6cCS2dy11wC/fX7ci3aqnXSYOYAAAWBzQ2MkdydIXRIuyRyvrqUD/gNk3OrXQCiA3Wax1S2DsqNqHHWTMH4USXUIU98Rx+NlWX4NWcKVTXWQg9OvXTnnSM7O8pj/CJbh8cFvzeWCoJsj9ZKpwoAAAAAAEBgxPT5ZVyCtZ2UoP8/fDxjN+tWi2aYI3kAv4nRNLFoIZNfsEmt+AESOC/sQoAAAAAAD/m6lCXFzIf7LZaQUsB0pqRyul2N60INYw9GxYgiSQ1fBiWKk2c/K6Cei5iTIi0y/kaEjeTx+Ro6Ujy/yyQ+g/ywJeBejEsbMJADx4r/cJciEeJ+DyH0O+MpLK4+fQbCycPmqoqFaeoCXHvFxH1FxgjRuk5oLPCSHLleJKg7MBrmlKMpYkK8R0bybo8mcxJeMfhIT+W3g2hmEEHodVfNnnCDQWN4C15w3LBCKDWjgCc3uRDFd4Jcdn2OeyP7n9aMzXSlWYTJPMFnCzonBopK/XJ9GrESktYvDPa8kzbNnE2nl2DKyRS4ypurVqTwzPKJDETfLt0FR4OiR1Mb1LKw8rRiGhhEQzSMstanI02ktZAx8IgPREtHcJuD9wooU7BSJhGODtu8ibmTMZztaua7Z0iZM5LW8r5OWQkwoop8tqnwLut0xDB5ojUyJGM/NNaHIw0XWsk9hBE4hG1EzVZLmcZKDFJQF0HBoM2v6hVJ5SNifLSyZV26KfDVmeqia43yZAqCIDR5j4VaiLci0a5kHa8VJQUka5ZQuVlM/T77JSof4SdXVBWu6TtIi/ckpvgUlwy1lYHAhbZQrBqZEvNaVlSajwxYAUzQx4Vp1Ri8vx5Do7lqTI1dIJQGY9gkRglUEzxJPESnc4J9+gkERSUlueNI6ZmF7vrCuxrWPMTdsUMtmj1xJhNKkUp7t0agNLNjPn6tC4EEnGyhKxnideKQr0JfcSELHortJzX67ir5TGAMAAW5q3LyrnzRkrlycQgSdZsj61hkoE/ia/9V+0kBkJNtUSsgIudl90EjCIJuY8zRLG1iUjQEcHVl2XUzLEH4aRYCGdg8kuIzMv3lo80/ItFZkrEkg+7T6O7iO9cdNAAAAADmBrJ+RUTdMBfIiEgXI6Vf/Geghv0Qd0oWEprUXiCgCjhZSY4BDjgv43DaEKAAAAAAA/5AE4EKsYnwFLNSkMmLQJm8suyR8/ccqE4sTKwMSJoiEutcJIcFk48ERSYjyzSE+SR7HPrVUjr6MgYJLAd0J+TfcZHvV7d5MYp55o9AyBsSGs+LBH5pe4yPNthK0XjboX00nFzhPwH4NJ/ml/DsT7L2EnsbdBWSD6pCKbP0/0ZdkaKwQJAK6DGTwvGrOp4OgnK8Qkqv5ayf4E+3E+Y4iHbg9L3l+29/W4miJZuj5wvj0cnjNCQA4lvO+Y8yXbnmebxpolPMRbDINkdvZ2kk8EHO/cyXYND0t6PWILjOtxSeVZ3IkKkhOHHNA5PuE5qiceyRnmyDYIhVxxBIaf8CbpRCHiCCYhIuInaH/BuvMEstlqAUQjaEipeAiIpZLoiSDYQ7FRpk8uV4BOs/+/RK+snwifGBqIDrk34rHxiQhZWCSDKjEkVn+QitpOroSGC3xKNAnwsk+Bfwvr/eRKDUJZ6eQW2tQERSJVDUpiUE+kqaJwbxDBwbewBA4bTBMqvHsmEt+lacSUK1mTbOiQj499s1lKxwZz5Rk6dWmxJ6GoS2lGxx5DLlYUygJKOSEUgeXK6pTmE8gIjybI0ReJhDLoIo5pqjOrhhpiAGVavg/E/F5Nsc1FOu5BNbyJG5CXbgvDJYhUGLJgMHGRlYIllc9WbLeTjw0w3C/UjJqgyYxt6TlgzqSJGUdYVDhi16B0VCMgaKRCPHiSPHJhCFniPC7xBqPDqldby6VBEMWADFgBoCxGeYV92JGMSIMk5pPCTyL10HDu4hIA7PJRYNc2cElMv2nFrsPNpECycjIkuWUibpRPU6IjmqxCEHb31+109O1EG+ZJOvJZhQNT+kugnEUCik37N+3LZpQAAAAAHZuEuTH1SGWGhzY3VJlg9cHZ+4OIev1BjMnRwQGqx5hB00kjFcAQw4L+xCgAAAAAAP9wBJFDAIFSio9wCFoz7Go6DI0hQXtPsIloAEgm/VkZLSPJPFpGFgatt6+Qs+XSWdmcEnuOWLuLO0MhpeUkPffk8hhcUQvxsfBkrqHBBki7wlsvk6S+DPSyWlk9MedVyCyakikfGfxNIfqY+15L6+c0J5HJkcLhieUwhFZop1XRBOSSQiY/GR4JniOfrWNqycBJDI70j5/+TxL8YGvlfq1TuooP9JyeK26QlGbopyKAjk5jJmhEz44h46yZPkeyx7rPfkih0q73+nLQiJlfPX2HK6yOQwBHGdpJaGrWTaQoACmYiNFLAVAmS039LysCbyM5BEsYhEnZ2aTsWyJblmOtxcnosRpCJgMq2rFxlUk4Tcr1SO0k4IglbRWsK302e+7YHcNHrKRN5yRdEINg3Qfvvzjnd3R791yakljosvKzU9/UiU2PkQnCp5P4OQl60nEwFmyCYHfrJ3NaoyAD4GAgZJHQSZdbwg7SFgLvXKlFI3rhEcQnKGRr1XTtCKaZwIeVRT7gSDWkzgrKBNxIBNaIAW3Pq/mshKWQfjCefhEMJjyVtuTYFvGl4WTg5v9ul4snhIwjETacjRkS6z2mOYKIeNKMLAAAAAAAED2xtLp7L/Pez2NI7DJQDkFEJBHQEL+65XBR3URGTWIuBbRIJ/c/tKsIUAABs5xAkEePx3STKb+LGGEEA/GpNRiBGEIvACO1yxDUa0jetkKcX0TISf1dShqxkaaWOAAAAAIPJ/3+h6QIuGTU0hYGSiUiYhkZBcfgoMkqk9BJTTELWPJPn0JBJwZpPGakhnJxOuwhrskSsQPR6M9TrM8zG4NLQI1NdyIsCx2YtGy68lCJ6n1bHwwhQAAAAAAKv2Bw82jHMpgbMsXphotL7EDSTZggMCcSZ8NRVbAC9tG/85MhHAAQg4L+tQoUccgAAAAAH+QFScHlWt/StUCoUahmquqTnF8+b8lEBOJpyWwi5DFKASUYRJHTyWJnVkUkFhLrPjQj3g9mUOK4I4OjLHCT8Peayf5VPo+R59zAnAm992KP5u3oJCbwAhwj7Fkur3Cevo0TL8vyAHmrIEsl0T16T+8P6fSHon0mQBgiWbwBJMclUCs3YHBpBLAJ+gx9FIitkeHc3IaPEk5M0nwbUk/k9+YUl6o+fpLNuopmQx591Ht6jZ1BriC6IVrayGW0ahPC68noOGkaHeLulEgCbnZSupITiVgUYZlDhTE33CdGWTBz0l2JxNiPuueW1HqklQDlLkAlHWkahkEUDr4kGjkzKEIuKJYmmQyewIAmEyE4VWCQbRg+lkss+7xy+ojBUShEJZUPysu6MlADmqRPxZEA8rFrEDfYW3kNtEAyenq2C39uxvv+04pLGRbMP2zsHHgiNB2VrHHcOR1+RJaHjJATef/45Mye0tgf+yMOwQJOI0a92oogZFEX1ggpcvL5p+reIkKOiJ4q/j+DGO6sCR2B5oTA0gzEkjCJCPxbd7JtOn1Fz7XJlgkI6SWd4AQTgcA12QJljyaLBU78CPTrj/Ay4skINaRiT1f/92BcBgFAAAAAAAAAAGKbClwuZS4O2tA72oePvq7G8BJEOliy1Eranqem0KMWBoiQ4OOWKpO2f0EHiyhxoxiIl04Gmy0gfwiT1k+Q7AlCrE9RwMngEkZdci2mSGPnqPZqsJhAFA0CwMEEYK5MRa6poRIQSKoWCWCOJvk5BpcBLKSMi1LVOVw2OIgc5ImYJMt0FAIiiEeXJIDQRw/QSackTIwklP92dBkChqZE2CqDNqMKMAU2A0y4EHR6OiunYAP7At6rAOBxs9KbDY8St2AFFE+hb0akACsBoHpeQF3zN0DYWrgAEGOC/sQoAAAAAAD/QARrQLth/rdqsJZqE6fd+rZC1N+l+q3Xxshw7hRCSXMNuOqPYfT5fDkOiT0fiAj1jG1icmJeBiopHVRGmEh6c8dkf4lvksn9q88SrtJORt/46UHkpPACXk73OS/BR5TIeVcV6rlYEk0SPO08nrfZJHwd94SHx7hkd80lASQG3+x2VixODGoc+zCEO6QvxyM3l5DouSIhmkdR5RI/Dn8wBHyV4HI1ckQQiWgu3rrm3LueP5Occ+0z4KRJKyu8nlurkOs9EJwdqQuw6xDpU7I46ijXMKB+xmRNAIiwpHARSOK5ySdr7rGRAGOMdwycqxTygGZFsPB/jyMAN1DJMkztMJaWzb0uoJZDKZ8nabZxiSBEiTyeKMSnswIPKVmxbQF5HlVBGHToYcS2MsrLpOMTn1/kEu5bMcpQhaMeNikSSqFjkaUH8JuO3QEE1q7ZWUafqpLmtQjSzeBxKjDRRZkLPwJZMSpxKBjXaLDde8FtKARQahw9h8DtgkvKEtJbJSiyNuImOP4zv2fUE4hiIAwmNcZLYkqFChispCIkqaluzgBOJwvhhKC8mJOo62ZRB9TfU7FRTRIUC1We61KJslFlAA44GOx0CGud1rygBzt1LYHSWANnaXOsD/zJyR0mQgk+0XYLnr8hGhggAAAAYzkqxE/JrbbPMRbarohJQ5Fh4ww6IVxwS3zzrWI5jNkqG9l3HEuRYGgXWhAyePS0CjkdVZrmaM0o0oBIHcJMp4+lWXKkHJycnSiGDj0HhebiJyZMTzISGwm1mQWk0xyOAmYGUlCcSu6Qnvt0TnySV3khDLJIvFctpJIR3+f6DDG6yaBhAA001z+HeyWIJtaEmcCqKaAAAAABfOdNyPNf1wsCMhWdEm0MTcJ+kAX6gXkgrUr7fHOI45ifxIRczWrgECOC/sQo+PcAAAAAA/wAIcH19iQ6nXCbKZJkRxtuW4fWrchEVEIDWQwR5V9/SxlqIN2gQhYwlaFXASMI92doJ5W6RWuVKBLBnmQPrJK1wol7o+MJL+LH/GAIfIPw2S1ka1ZXJuVFVMahZhDqvq0j+N38d5P4YeA7HhSsioRNZB+BIeCfYpH8+/4cCfyv8KE8DmiWPpk8hh/U/rlAhIw6tiy8jz5q5k3Fu1yPC+AEJoSOb5wR8sfKUl9y+BVNflaNaZNa+MdgEwFJYvAWZWqmMuN+/oxIsxpHIZYh4064R0PICOfhxp/FbZ041NS8Qyet/ymEibD2gomLAEOc6chKLpLjZv1S7WT0rIhXs1yxzIMaa//lJQcySxmItYJLLRyWJhEzrmd2O86tIqNK7sClzPGrkRJzSYdX0qSr4gkgM6uJGGq4loCyzcGyMmyyEwZIBmPNg54xPNLRFdo79zYQSW0jE50CzVkbd4jyKES4hxMnqKPPXYPNhAjydK9UDJQX4ainnksmLEk8fgCbw2kb8fPWvZdt67yJWgMAFj41WViYkNvYUWtMuPksQ4hUC3l7tUJMfWSVDlxG9jyFnTEEUsrPJz3kxOlWQTYCRnXt6t0VBFpV3jLyxkDgdCgly3KYcEhkKcsiR3R9NJTTHOxz3JY15WMInDjk4sAnZmyiInhDWM3OrqmESZGIVRKyE6uAssQot1SmGTnEQlsYt/PAhSnUTErDFKaJoU9/kQCIqjkkBoUZHZ8ZJs6kQ6p24nDxJHKTCcYGS4EMfMERnBhDSxGbXlm7YZKCzuklGPlQN03ZPrk8+AldgY/CSgUrNT7QRXEtNZHJAIFxhOYQnPETbGI4DKkOGa8llZJLg7yHHciQtFu9ZAE6on0EGgATbqk7FBTW/c9ttcBaOxiSkZ7xi0aUAAAAAAFI4K46eyQ5W8f/L/FI/2YIeOAY02XPVdpobTIPpHuC7lsyn++i2gFHwBADgv62ChQ+PcAAAAAD94AI+DY9qx7tPK5pjVxmlhcrPzj9VK4yKhEgXSWE8CEe4daI42H1yQNDIYfllCU6IPnbAktL7IIaq6RhxqJMJ6daQSJ+Lkey+diPx2/RwR+f3pIhz2RQdewbNHQBiWMok/JHXyX6LP2nENR5NJXBWaiZiY/KSgaol4f94EvyHfkzJ/VvPk+s5MnxWuQbqiAHaL2dkN5ICCAjVFwolit4Q43sbvmV0UnahE8D9SCXPfOlTZzvOVidMq+heNCD2E3F//4N01VlcAsaITLPJb/w2Rye9wWrWb9c0Zqxswl5YpolarDy2RBQI4eIQnWiPHeTEYaGim88g1KKFaRKhxGymysiXaPkMphrqWTx00kQmQc0RnxiOJnEqabvDv/IcwkSuTsQCQQ3ebjgiVu4TGUiOh43MWAE5R5pgq4bt+Zw5WHJkihk59fgxpRS+3yePuR/EhGqQZM7CNCMRhHJS6JLjXPCXIdcQuRbQGTInKligp110iJpOAktvdJMoyA5RLMVLHD/VjOtwZ2hE8dCoAPQ3nxKDAoIEpGIQ1kmQPP/MJ3Z2O0rR863KWo/uUipZKljiWq4kQzufI8VneIkRQiTZ5ISCURn6THDTThNarsfvvZcXNMYo3TOlV5ZInQQXEk+ZLJoSlTLwbEYWC6evatyaDOsMkEZGTh8rTiBc3dxbGBZlImchJLiY1322Qd7WyEHGduIxrEostDAAABhYq5EvbqrJXaO/bRASEO6MKS470AhtbRPLcSJ1rJOAggJmZlzwMWUzRFCgMp5ltI5GPDx8fAgWnAwBZCKAiQ8u4AhJjknzCKYFseJfhyCqBENYlBdRUwlRhY/h5CKSiZwlw7rGPOCEyYYh0rNkLUIhJfwg+/PLM10/iLtKGXfldWaCOAflp+yX1C7ADwMQrWYHW5ftVDLuqIM1/g1b4Y3jEOlGj1AJAuFb1TPueoOPX9PVSYSkz473PAP44L+tDDz4AAAAAAfuAEeNVpfISQB8x8cNdJ+nNS9dRx/SrYeTq8peICcqVRBfwVFuJ9f5dQm9Iw41oyCfeuNkPGcCzG3F4GhyAcmpJO76TJe8Pg2S0GyJsj0C7hkzOJCKRob8j429ZEfwnfeAj8Z+jkNFEoccyq+0dfI43z2Q97/mAJ/fnshPwZlCXD5pENUjJVZou5CZqJHMBIGkEkYknk8WQW4lNyfAyMeMQ9LfKYh8UOfkNjclax8Vy9jPzdV2kUlJKSGzTUjPzxiZzkJlEnolkPHveSXKqFZQc26Mq2YIEleEx1I45fFlScQrUMrVSW5nE58IgpJAZCYVPBZhxZPKowxZbNEtyabOhiGGISeogoJHE4MirJELVjzqozEVHzvgqLqycAmlVaIIVXecTIjBmEAklcPOpqQ+o+MkQB+VmhaUscCx4xrcvy4sj3W6tEkTB9OyYQhQvkcBxcj1jJkOd3rMV1xaAeKSM2JWYCEGp+nnjBGEJcKi48rDSflyICErmHlilxVjg5BFEkI8vHJAXw/dUYSuCyijiRAmhNpGx/CyrOIInk9HwgloOYSphyIlEgiJyS4JA5Ht1JOpjSeh2ZPhnUSfBM8QHYIwG3c/gb2/lN4SDvP27OoKiRQY1AYQo4iWnw6G4Jp+8/NNkkcXoiGBxpOSPhIlhUGclFF/ewR3Zbh7twY7va1tCOAAAAAAAABpq9GA6pJWWaxATpQCE+KSpWicDpxO5hiHJOW2ZZ8husTSmZiLxQNMLNLcsFcufdm7Bsc1TXbseSjvzqfOzCVCdZouLU5IIyWwpfvZ9oEKErmapx2ikkzNEsjz3HucJYPakdpsyWBjECw7NXVMpAjDJScscCxTAANF4SGh+lKOj3A/KEmcTfRtAmBNM6C0IS3GupsIDo2OThvhfuw781vQWGRf5kn6Ih/n0/wD+OC+KG2oYP3/YAAAAAD9wAh3zG3aGhBdCJkisLRinf+suS7xsqUpVvd3J0tRK6cYRkFI9l4mTyJCMSeRo4EjjPDZHa1ahBwC5KU/pyZMI9SyZD7A+gyPerOZPHuuuJZDjkdLeJ9j6+T+y32BJ4nYE8TQvblihiSfiiF/wKQ+HHxYJ/iN7QS8B60ni65HUSCVcNjBIgETOWX0kptYhCqVNTJS9VkAGQRE8lgSXvv4cEfrX4bIwavYMuh2T8PLgtQZUdtG9Y1mzizKhfJ6xxdj5cjzfsBDKSbTJR8xxqwCIjw3DuLYjxjXAsegIot2fPoofus8fcvFh2WsM9mmlmmCsp4y535s8nHmkRQKiMT22eJ23kaoOdXVzSSFkCdeLTRFpa3vEUFJEJOySAB2KR2/bH+eQJ+y8i3JbUou4rg3QuVV4Oyqs6DJkmE2yCe57ATk7wjwrBEYJ5WATCv4mpaJIiyQk50OQQHIRrqLUp/5e1/GiArti2sBf95jRujHptok13IWBiQ1wB9lFokyaRPPJ/nSwcnE4qSwMq79uRSv1v+vLLuSyMB5EpiKikMnEIdOuEsa7QtCgp2jk6BCIaYhKGTHjRQA8yq5Qq1rQHvFCBX5U0JG1kSEqsRw0qhz0AXHkciUEmYEggOoN4d+ZBFjpWYFQYoAAAAAAAABDSntdC5E9R2aTI6tQk4OqJcq0pKlw8jm8jLlsg45IgaqKeQLAsDAABR0qOCtoiYJAsKZMwQTAIGhXerO8KpAbeIAVUeAlOuTjtJqfPxbphk6CMDhE6eoJc71xODAIG5qS0sqxo5OML4WOsrgmQb6TAYUYAAAKRIvQ472oEn/GZFdx3H02zUU+uRgnkCcd1O289L8AGFDp7dPBqJZ9Vcgo9CvUhoypqbgA/jgv60MJQAAAAAD9wAj4N2nW8zB1tBULGMgYs84jcPsFoQsGkEo3Fife6UvXPLiSIBLg/ACSzy2qux27xIlUdWIu373qYBEZbeGS0vikn8oProR4luCViB4fM4LGITUAlEwJHmXg4h+fn8ChLwzzQhVMSGLHoJUd5gSi+AiXHf0IEvphnSXGsHWQv7dnvJGDrvYlQqwchMVQlnNWSNjCOKYRiuI3YRHyp75JaKKQzU7V3/v4HONgZCGTix/8v49zRCvrAJy42BJI4HfEtpmCb5XTfYNClwo0c4KO9JmK+agTaICIZJDOBJMHm+larZDOyJx+KAHxUPgUpj7FetjzJBJSjEI0sjb3RPKW5kkP3xIgAUmglqFLS/AMmxM6RiZgk1xKInrKwsrSUUUAABm2KnMEm/6vnaT4R0PH1HJh+YiMAhEQCdriuPsOQ3kGnPVbtd4OSebOgcFmZ0uc21KrqbAl52gToqxyWUSi3KzBaiFhYGUElfVE3ZbNhWTBhxkDzIx/H4LTF5UQ308jfyFF4yVhE1HIwBEBRZRbojh1vFJY2hWWmoCJpuECp1yECjQNAAAAA0pTWYTGOU/t86AJnPbqiTrRJMzOs6iTzpAyfGyrDJBSSU8jCl2jNJ5mX6dorviKbYtHQAAAAAAACjQFHSKKtBLSOSHQISrRHMwCXSLtFbQju8mRRJtBs6poAt4jnBxjCzAADDQOqagqEiIIjqUBLdtCO7IJCDD+8ySYJEzyEKKTkoyACgCaplMZPVbEhxHDEL+iIzuOkcBMIoDkyFUKsqTv6uqYMxDDAaAAAAzobSNunmM9MrPlguLRukCfn7BZyEMGiEfFjISj1PtZzZAxHe5EVQly+paEpYt+O/Ly8AD+OC/lcNlQwAAAAAAH7gBHe17SHapLA0BXUmRiwIqK/56j/yxNCiXScmSlCOZ0YRyuSJkJVtuiI06stV5PFgqPZcudPY/eRgeDiE34WkvCuS8l62FdudYJCFXJYf5oke8/Pgj3nN/uc6i5l+iJFlki8KJemvlmQ0M3A9XkGbUt+WwyNiqrjmu0EcFTwKgTDKqXHSoKuNaQ4V3Yn6b8Bk7OC/8W93vGvQNV1X0BCFd3XlN8oEI2cOS5PoSXI8rY0QkZUD6+5mwzWzDgPIz42tQaSBAkqRKFE+Lmj5VEo7SVNJBCjAPCz8Kk8PoocmPJqiEqqSexyE/Hp+CfSpmgf5snO72p6tTZdrlFuwqBDjqSsi+LqiQCwA0BRhi0MRz7SXtMwpp7mQn3okCdKuAI8ccTBwkjNbe9ZE7dkwtTqk8mibGl/uYes8Y83f+pHgHSN2ppthZjMmVQCyaWihRwdXAWBpaRUhEowpXnE9TgSGEyxLTS7SNarHATiAIpHfmf9HkcjHkURiP3MaoVwFgUAAAAAAAAUUharYq3okkE5OLNJ1rE/gJKB2QTUugQ4PCnxGvrfDoyzyklvH+R8rgRcJCQBho5iRG78yf1CAohEcQg2eQvcIJaSKTl8TI3Y5GK0kFOYiS38WoziMcQwAAAAswpmOoR1PkMjAq2qWpREyFz/EdI7Bk1pFsOh4M+wqiCTbhyeh4SR3NWVLBLjePJEd+GgTt9eukfVvNNhMBg4AAAAAING/n/vm3uJw/onG9YjOt1E4LpfR6EG2bY9VIP7/GX70aFbYO1MQB27ht+W+QMbP31cAD+OC/lcNkQrCOu5QAAAAAH7gGPOtysMmAW/WlcmRHVA80xKjmvqfBcMSHIgaDShK9lZ8G09Pk7+uyESbSIQ6Hm6k5VQQzXAiHwE4kT1ZSCXbrn8XblbMIQMbdHuMl4W8BkocPvV1dbflv75OzBJ9y+BJDpLSMSTP1vKtqZ1zBrc/pE7aMAjLMSiXyRJHMBO9lSfhLCkvdvQaC3VFHq7dVHX+biMNPJUfOZYwzmCx4JG1gCXgDVUPYvR3ONbLMEENNHLLiEjcIbIAid1nCAhjbEMUJvmNE9rJo45qFhiPpvgUuRqRJzZRFZqLNMUCY61DkWWBulrrdVSK/2IriZ3J446PPbQPlxziGAAABgFDGsMFpl0o3LPGTxToIlI0xHL0CWroUHD+qWDKpqp/++mVIQic72Orwi8GxNHeTC2zGbOdY4xrxrLHw1p8oTjIDqB6eNWzoPhYJHDYYlaHY2erZf1MgQZEoJlBjk6iUYZovwbKoI/TmgWAAAAAAAABQGDxtAMc5MARFBs27XEHHlep2SzAooBEDvwnCEj5DpGtTWa2leD2PW6EgAAw0VkWqj1fUSZfBddQlg9dMlwhqMQSx8y7my3AueLTDCosvAsAMAAAAADBlFZ4vJPhSD9hJINGR5GlqOCRGTAlkFDs4hGHu8qTiGgxBLc44lORWRPmM+IPf/DfxZnd3DQLVwrmSbSqY2cqJQP6bxnhyWg6hPk2QC1Ara3BKACwwifEr50FGFgKa61mVKABmAHv4A/jgv5UDZHCg2CggAAAAAPPgP3ACPStZaov/nXasYfVFB1K7EqIpr4zgtWsFXzfPuuT80RCj+Fukje5ET0hPD25GVhaDg0YlN5oS8v/JEh4By+PIvXnbR38LjmfJdk8vEPp9wWzdFZ4d3Y2NfYyF6sR86dZITKJGOAlAhXdHxTH4uL9ATYbW4ZnQSl4MjNo2KEjLxBHlPyOIcG7aSkPbmSKUmxtPl60krCJ5PFzqTDSI4jLk2Qici7kIXJT/bCZZZGiFigptzFMGflZtFR/p+cRYmtjxGFnywBu300OiCPmYZOJosgSARkYUkbB3Ftx0WDJy1KswNtv94YKuCVEvo73e8J9BySlTLzQAAACgKZQSCNDAgclw5DARqr47dIVdtRdjJ4PplpA7V2W22jsqxjZKLMG/bYS4MN8cmVVIRQAKZSLuPxxVGKMNGHUlYatiWegk7LkijJ6Il3EJlBQQyZBb0WVQoxFgIPreXt8NRgAAAAAAAAAAGGCuISUAWKfJhySkfnCMZpMpplR3LgQbMHm10CGilDb6TWVcTM4FAKMhUoW6NYE1GIncRwW7JZCATzORqSBg6JZGRKuknttIxhygAAAAAAAc1e0/qCLltxBFThrJNKIZNg0CmtlkjAJYfhpCphSWE3ZDIwKIdheTyS4HWnvOBwvD1stIAENwQt/UixaLZFg/QCMQVCAq93tKPfpeCnALILiAyQ6WisQMFNn9fWdNOWQjkAzX6TgD+OC+OGzsGySFDCcdgAAAAfv+wfuAEcpQIQATOTW7NMvPqSVO3UaiqyTOsHAIBxa3LjyhZ029uNiGHx9Fa2ZiTxIIsQ6lJ3eIk/Y3YSPpXCXbjM02S6qiQQgYoljPaBH6LePSb5tDwtRp33/Ql6iS9K+NSHgzPYCWuD1KiDZ1Fy5Vs2vqo1ygUhHMTMHCCYMqRwXh0h2/gNYZ/1jHOIaBAkcV09sLKwguXAUY8iEud8GIYgsWcu1DqsgXsixjR3O78z/aflLOiXlTrAouosHY2gABWbZsmvXSV6qSCfQcfxiWPzNize8ZAmywMhmua5+K9D+tfZt6Ph00v6X5MyAsLZTFpFZMRR1zFef7sjUYR2EQli7hCWr9R8PLwKnBNzg+uQI8BUFgrtOn/duJ/8XwzA0x79N51HPigUBRRbWJjwpKdBJ34N2zJbpYKDWGTQYAP5u56bc8f/gv2zrFQlCgBQDgYBoAAAWBadmw6+ooFZDnwPCxpkNa0K3A5XJzJj4FEmaWwOWALlZDy2IhGXPSTABhpYp9UQPN6kRuIqm0RkCeIypHG5cnj4X88rgnpScD6aBhSwAAAAAAA0p3VEH6/+r5vPnjBj3Plvm/e8y/HkgtJwBENBiSS8WRyIyQRdVVsL0f8l0Nm7x3K2ACrmUTVflGpaQDucujO9Mbpw1P7D2JvmAN/0DayGigtJ8H5YoO0iCjN8ZxrHEscgGJBOAD+OC8oG1IGyOFDBxugAAAAfv+wfuAUTysgVlbHwxKfUjqopoEIrccqjv+iK/OhffxI0bZTVXAiQOEEgJ9e5FfqzyDVpHJPI/Cr4Wk8jhMezXcj0CujEi4clp/SRP4/8mIYZtZyY/kpY8/Io25F3wsI8cyBFEOtk0GiOWCCaWloW8yI0k4xLqftIgZeTYhGHyEjyTnZGRI+H2RYomt2JrpBxBYUh4z7+7WIpXdkkjrl0ALuDfr0eSHBDhRbPPDth8og0kSMPo94LIbLn6gpEmvrPN7x1FaEQQiCJmxVBYCZV53Hu6MJQJQIPU8p3WImZRORPJ1JUvJ/yeIWTPc4aBAw+N4gUUAAAAAqEURSYtQXRHrbAE5FIho22IrRvb3B+yp9FofAxseRPXPKyZQTWDpoj2hpg0+YIAAYMAABgGoVG260UQPMI05WPZxNkUnbiEgi3ETEskQn0BAp6FDeVG8qIxjANMQN7ft3gylGsP5g7gmHY+LjHxEB9Vb/f9ph43wcGAQiLX2jIx5M8lyqDWmHOt4AACKkBZ/5k/9a5OAAaaICs5hn140TU8klRLAZonnNsT2mEJ8N2hPGUpaeQGagS4KGNDSxALAAAAAAMLGcxvYHj7uFNFcjF/dhQ8mgoQNbMlc5DVyCTcITyuBJrHj8Ds8Pwu0+Pv1MYAOc+b730Dowk3u3x1kz5ObaX5pae3XmB7GOt8gGbSg1xolRa6mGnj/LPJi0cHSSFNe9J3/AAP44L+VA2Iw2IwoUPPgAAAAD7/YH7gCOz0WPIcog0iMhPo0CAEbUzepirhhGKTUpzou7jTKKJ8SJVgUTh+6KuTwk3J0AldyZLtvayWvwEroir3lD1IkaWTxvhAl7TwZDbLlSfAHXIvThGNXIeF+fEuEza3YRKyViPpe6Bbh7L+2kmFrpcnTMnRiFTlZDxdvSXn3iJCbAxG5UDFOU6p6jVDWuWE/Zc+LyBniOBiE+DYMjKN+i2mao9ZajtXNMLgV52B5vZi+kcYaAAaADzdD1gBSkz09Oydhc18rzrYJRo5DDS7bIoQRM4lh8KRnXCDCkooSYLhLgNLK0bKREA8go7omc3E0bZOKG5ZUDDzogggCJDhQAYgejmwiRg3UnjmM1WQuIsjdM+KluXu2mJXI/lOigTvrqn15OgYiok9QPOrrPJFDU5aS5O4IqrClAWUYMzdqpor2P9oSlyiI5ZLkd+VaMgT6b6D+WTQYo7lziVFs0CkDeWOmSQR7yqGJRM0lKyRGpZ6cqZIx44UCR5U/ofyhJAZ9L+267IMm3YagZ9UM4vCHSrCFB93EZQLpuBgAGmmIFyFXgb/wEe9SMisRlWCHeLdn4MjWpkSvIwWu7r7N4ELHAwABm/O4TETU4izjI/I3sRKHYJ28iTFXIWr3OTlvWHrbhnKEUwAAxAs8byH9JiAQiCy/fWaZudUALG19b9f4ehrC3PYJpkWpmtdfVhF4LniNpDgF8Y/ZiOAD+OC/lENiMNiMKFAAAAAA45B+4D4DHq7Ivh6VDz0vGbquvLVLgt4pOIhaU5AItku3L8/gtPWkWgjGm1tj7Z7/JleTzpfpnli2pJiYC2cwhw7ihH6EfBIn4Tz1nibz9ZXOSo4Ynsp5HORcfK+g/xkg5tmw6gByX5X0hk0tSDolBLIZ0n6Q4uT0vGiJnkzmx4Fb5DI7zNUaVkhaM8eKEBRSUnMEOG7gnvV1NCwmKKK8sZfcX9D7Jelz6LxGoAUKTpWpwOyIZoXQGqsIbM58Tx2uLNEX3JOFzViJAcLALpFEX2GCa0I0uAOiWxcrkTvI7SN7pQoaaqpQ8k5e4w8UcGf/z80LU2um919iak5LxSbeb6X5vYmikKKDFsDIQDWIY0pHMCYI7kPRhERruRur0zFbfARhQCV2Lazo5+H+TIJaTmxpzoLG7XN6ZJx51B71WEMKMNELSsmNpkX8uTkYAnPZWMzdeM1o/J9HRnamdCECi9FJpTQYU7vTOx9u1+pXTFc7QCWHkElAFWihAUjBUhbC7Us/l5tzo0jCfKS/0sPqA1FqRq5Rha3KZL4mlmCM2tOMijDXmbNZccXjuopVBWrqKSxkqAZtpeNsofUHyMOUAACfvfxjxxnh3VCyMjQQLQhMas74kkGCSWcllVWaV01bcFMOFKWOAAgUohQgc/f/HtABBIEJjyScro8DQIebH350i5fS0RyeyrQ1GcF/veN77VDug6f9foY8d6JzrgAEIOC/lcNiENiEKFAAAAAAAf5ytBMtiWD0q8LhxCgKMAVGoJ/C/fmSlGctASN+EkRNoJTXEVcqAfZ5TpEq027IF6moGzq2Uwk8TUJenPKhCdfmY6pFWC3EEJkUhnOXEOLQ96XykW2DwvN9s023UUWaljJupIaXxUQ2+iIJPimwaReVoBhTCjDjFyV09k5ZF02pspQ4SngVeYWJEM5+/8Vpma5XDnQhNlaoAkkDuPNKU0evX6qvL4jZ4KAow5JFeUZ+QrUBKA7rNgVq7BlZtfT1ZE6SSMY6NMoIGpO0SRfZ9y62Pmo1l1zXjX1n1QkYJGPAJxDWmCui1kLkVdjq4uuc7lJghVKOc6Rc3G/GsBedI8bSH/4kkF4qVUPefSf14+ota2nnr+ds5LMAAAAA1k8WBjcHPYq/yPslsN5A7lDG5WPP+bJZ/EEdZgyVSdd5oc4hi0gwgCKEjyoXL6MDQACzB17O4NGRzbhef8d0SVS8h72pJWRsbWx+Hy+r5YBAAJIduk3BV4JMdRzypk5Pw8uF/41oUjDJHOOdvPUIh+ORwAAAAKYUU3P+rFxhqJbsOd40bZXgkjmqYD8N5/vqyXCYAAAAMhcKpQApLAYnQ7WXeodvKOL4vbUHhGdWjLd6kRAsqD4CjEEugomuK8AECOC/lkNicNicKFAAAAAAAf4OY0wzfwAYbAAAETy6FbwxaSrkIxpiIZGdQzWveES6XEgIsN2cmgBA8WpjPy85HwvV9skJMwj0q8QiIoBptl1X84TloI0euEfG3qsnmsp6ZNcju76cSuxyfjHqZFPIZ/g78ca0J6rzFPiZicvYc50plggPREeQ+wZT7UTwNonDfxm3DsKRqyAcwVTcV8EGzSOAIRYslgnUMFzphD5gh5iXo1C42zfVvxCWexGwcXWGljRueS85qo4hRQGDnh7a8wyebJ6SAp9FXOKliNCATkYMciULR6cTUizT5y11oypEEAA6ZwtxJjxZQzN4hh6DoHI/q4NKGaJZaHM4P/V+kCWwcM+2bBwN+PoOZljpyLu3s/HW48d058QQGyZxXqq5bsik6FChuPFlLT744wclFibSMQ0AAARLUhfK5Cfj0jZ76rkKykgrW7rpNdpyPEeVkIcWTg9ZRk7DysUaUKUKgjJaPFlgACLKy02XPg+MucScIOdxeG9Oj+dbMx4HuTB0E0MJuZj9Pv/93/vn1+YsLAAPP7FMlO1cvGe+KtRTOIk2wScUlZRJgVCYMlyNmuNZoWAAAAAX1fX1yMcbEU1HrmCmG7U+yWYwlGSTC0kWBpq2OWdm+I744qj1OYAAAGN7lnI3/Tx/h/n6YAOQXM5jk9Xk3NsLlyZfepKUvnoEQAf6lupcxXdekqZebcAThwAEKOCxEa9KGzOJCgSgAAAAAf5qwEgjxxHhal/CjetfYSlZUZxo/r9ju13UKRqW8wqCpGMvIJ9NYRpQKJGdUGnCbROTNpyGt8Vkos4+jHWIqRHlSGj4qS19CxgSHlBwHRMI6HWGD4G3CVINQl5BLKhJcE4aSpLiWYkwwjMswo0BUdyZOKSW/BrGhKWbR0BgAAAseFvyAfXSNJ1kplY4M9tKw4hSzAACgKo+Y3Ww//CLHbKiTlV8GGs9usDYrVXmDY7XwEmxX7NzaHAAMSRB4RnhgEUG8SMmXVI4z3LCH1R2hCcEFvIpJadLdxVSsrSpEJ+u4JIuY28vZIJpjqWwbtAChE+G7BkJiRlgAAaiaFhYozDrijZnH6YwEKF6/JkoFL7e0qIppRQFgAAM10fX19+5PLnr/m/M1Hm5BFqOsKUpNCSiQOYOT3WvGPGAAAAAAAACiigaaoTSMGrmQi41dj9s9KgywkQGFgAAAAAAAAAAU74G+6WO6ekWBCkHv4vNsZxvKyX4QAagiO5MI+Pv8YjPAB6TqfYfJ2crwpABFVS4eI4gPPPM1k3JaPeqQgHDSViYHEp0HbSqlp3hxQsM4AQQ4LEhriYbQ4bC4bDIbE4kKAAAAAAA/0AS5K/CsnLcj+qsM0P5lZWcF/JHjS4bFc/5BzXj77KWUDFixGXjqw6Rdxp4pqBKcdWKLJ8Uj4o5CR4TE9gTw4TjiiFjVEPBPCyHE49SwK3H1/lV20Z9c7aYtydwS2SijbqIFx5HoPhsltWEZbHNGDqVlz0MlEGNQt7lgghBFEEkwMqydMHUoxYoAAFCxzvD7VnSSTGj3rv/ppgA4x/sfiqI6vysAgtn6Iz3KAcnGqYnK8Y3BOpbsFrWt1fCUpBkogGGFFxJUq1EWKaXAuDEQm0TJKfUkkx99uyYyf4Xp+WdsRHnjIkHgcmEy9OWzc0Pa3Gt/zTMLiOFw0ajTg99wvZFksRgAADj6T6g9X5P9BkR1THkh9lI8snYznkjHG5KaTDmgAAAAAX73wP2D9mjqMWHclxqp3Peqy0umjf1NALiefwfRaE2AAAAABTIfcTnsMnALr6zZXhPimh+aeB7rQAAAAAGjzy5OLu8bnaYqcpdsKOrc5NUpmIIhbyJoZuWMUqU1N/lQAL/W4f8V5AAG66UPbVL5rlfsEA4PJ0eAwPj/hIn1/s9cK35BV7Ir434b8aNXrGgW0+DscAEIOCxKW5GGyUORWEQ2Fw2JRIUPr5AAAAAAv97ZYu9NgwM/hbnCFnhrgKQCoJNm9wtuYaIhUNMj8BggeXbqWTkVI7stpUTueJ+TKYCPQ593h8tWFdi6TJUcIT8q9Kl3h1mmxxxe1iMX16QR+iNPIoBfVxSuwnyzAkMpk6FMIUKnQlzerrwGNNxKdnVAa3W+sriwLAAAAAxuxlzBOj6KgDKXq4BBQcdM5q3FSma8mIoACognv8zjPNEZob99tgv618P2wpvchRQAbOMlGDCFgMbcV3Bf0GVoy0dDLkn4tchsYsEcpYZLuv46xxpzGCuzZ4mE0n0qYaiUpi/X2TkpQMUUUUUV+p5/LrlcVTa8tUxJ2U8v/D/bedpgAAGeXI6fluPdX4Pz3b6m40bNmWZJbX1y/vVyAAAAAAAZxDcOdR/+U/F7l99/B4OO3aAAAAAAiBouSmb6m9iSND9KR7rniN31vGVFdk1sPZCNzjGAkBX38pAAHMWnoEPdIAxsAh/sH6VDoPKVpxc0KKgdrhhthXv4/m/aMzAO6AseAQY4LEhriYbO4rDobIIkCRB5eAAAAAHmB/o3LBKIj8x/psx4hhFxuSvtb/LknJh/IlLV10WOFW2leIRRAuIJwBHO4KZ8ViCZ4O9N1oCuphCTfwCWrpUUA8TIwdOQ6X3QjgJUut+5fLIhR3asqW1p2Lg4ZkB2uRg0SOqWR6nDmV08SAwDGpXw2izTBha8zsEnFjWaeh01eMWYAAAAYYhb+JWk/m8+PEPS4U6Xceox1TB9RpS0R51Jl+J81RP2J/qjaWdbJ+Mo3Os2aVKUAA5UyFOMACmqPO7sXIFS9HtFGJIiiJi+1uNpYndmnbFa8hwLGXOBwqTVo+qUAoAYZBY4OuFMgEAAAEKgeyPF4ycDefMYqg+2/B9RytmkAAAVlpb7OLvNv7/3yq42PwmaDgejFpGAAAAADBk0RgdogIIBJxshlx0wsDiAAAAAAAAAAA0uFI6+z2rq4qhDb+dhdw4xWaJG+CyuWm59Vod/KhS3gBt+4GMhUHDm5+SPev17SM3Ww6tbJFVJma6d5fhqLM8uR3038AEGOChMa4iGxKGwwGSWFA2QxIUHx7gAAAA/0/oD/RUDPtf8YScENmewt67+06yU6io6z+B6OCRYNXyVDsp5xS8xE4GGJc68WkN9QtULZRI1GaSdRJ4/lROQqPh0C+nK4mEo3BSdvBZ7jd3lgWhFM99YX5PoyMbmJ4egRtTKlJENPAcdk3AMNNQisGIESBlUlZBbQxZgAAAAGF6XjWfhS2ltMqRBEyeXq5qOz6nr3uQk0+onm4YbeKkBswvdy4owFDAU+Pf76kWFelQ1cieXJBT9O4zKqLSJOAvXVPL6ksobcsFu8GH6H/ocq0Fbux9f0Yz08QI7bvfyz8D1nK7lv4Xm+7xXVb8MwAAFoiCNtoGH2KsgakfswK6kMBhYIhV7iZHuEeYAAAAAAGDu1O3v7tVWslYNAAAAAAAAAAAAMUkFGTfG6wI3Wb5ZuTTpDRpS39HP6TxPnWpwOsPOORhBm0gBqkpFBkbiOHgYO+OqT50JexlzwM8qLqR5cWcTWD9nPaLZcpT4AQY4LCAWNb3DYRDYaCYbFAlFYXFYzChn7/m52AABxyAP9P6B/oGxLc7ge42AWQhejulEZBBHQKx2EmHF6H4mtK550Pe5SEUZHh/lkjjbPKKJOWviX3whnuWksBB4oGHDc5NswltNDaUD+tpKCLQ6JIjCJ7KQ9Ixj0yRXmSFF3ii8DAGEjlXFA0wRir66GkyC8LtgADQHkV6p+hxvsfgAByzHq+l1+bHDSQl2eC7v2tKiIRI9DYavGgHWJ/9R2YAUZBLMZqT+NKNeZ0PzvKgWhBCYzb5opQ7cpzZjgWBRbTnAWcxjhxmzrJfO5znOVKyBNpjRoZTP26jj93x2AOvr/x3wAwnC5mhhfkPc9cgi7JXHLAAC5RStud1OOUgBad/UfI/+8nHs02QAX4CigAAAAAAAAAwRTeLigLqgI5ooAd22MW0WhczciV1Eql2TOJ///zdeICmFnPkSP2xDtU/89qtOEWFcDWdnQvrV7wr6gWFbGJlz5nUrAJAfj1dZRvz0+AECOCwse4iGxCGxSSwoFw2GQ2FwoYPjvYAAAAP1/QP5ACU1nXfXLACZVC5a0+ohGSKkRWjyBmXGBAZpfO1qR+wl26srUyB7RLbo2+qHgQ8hJMRZ/OSOMRZKiYh3SRhRyPJNbRJemaTvM6LkWaAhyz6x2865HuW0BEck70E6vLAw1WjQ+BoGJ6a/VEEJ3EgKA0AAAADTYDNuvagApFz0a5gIXgQdo1rF4ro4iNVnFqocVsoFNdRuKIlBXGDkS+nxAAzIAAUoAFxtaPJHLMoYacdNJM06MRRkr6l3KsuEIV7z6p0OeKI6HyVTWWQKcb1/3L/K/gaw6D1V0WOnXP5XFzCUNT1rP8qgEIsRjtDe+Q5zqAGwjYgeLAABChqwdzUbSABDX939r/yIwzZMFumPVQ0AAAAAAAVk1/cdH5J6NIBqreqo1MgZRff+TiTWTR7Gf/2tLKgAG21CAO+zo6gP5HZJmUCJXNEDVDCsPqhgHqYidH1rxIaWjrUcxu20/d53TC+AAP44LvI7EobKYbCgbIYUMSvbnYAAAAP3/YP3AKLhy0GkzShRTVEUo+IfOwCTg69Qg92MXnRSsDBqkGQClFIEnGxLaaMlFLIycpEPKJbfzRN2wlsvOi0MXtQkSgT0fPSA2VkLyPHB4sByhXJy1r/7k67QKQqSycY740EoANA+2SgGNBU9RJEHKhP5Po8cADW6TQ9U53+9/TPMRzdLONKAGDAYpJtxNEg50RmPq55ZNEhxs2kDk0Kqt5XXgoBz9+QB17SUaAGDMmz6pjsiUmyUOnIijFpRAFFvfoHUqCOltvmDFgWpupOcAAAAACzW8sRZhuCPjzUpqV+VkcT+v5XHd4ua4eeEAAADPjX8WpmjZUhkdTobTvuucTWbheAAADqaGg89EaBB7oAAAAAaUkSU5p1oF8ttxWO1drVSgAAAAAAAAAAADTkfwalUaM+AJsoz1p7hPjdoETE6pICF+Kizt9naQCwWS5bfl43xwFDB5Mdz6hR0zQRM0exZt78K+n/WEl+qPBXz+s9eG46GLJxPnAaaYH4A/jgsIBY1xENhgIhsMBkVhENhQNhcVhQ72nv+/j0AAAAH7/sH7qlQUVhKKFWL0xPdNcKc+WpUCkFZ5BRp5kSyEXhDLJQAWxSiQjPkyulUGNFbsniqPVZCqY+iRquEQ5E47F36QqyucLjwx9iDmGGaLivRTec0/PJBz5O3A/DrY4AaIjRjAAAf0WQhQOZOUr+BQAAAAFDDiNW1MzsK/V4gADSgQOFfujA4VTLpI+HcabRnV51qThtXxhLxDVNcgfRgAyQNySc7Nuo0AFq3tHAxCNxk7nggUPb9VkC/GgA1Ok+zfyv0brsJ487KGKm2XQkCrs4zmiwxQAAAAH574u3+1/vsnAxjyIkkFmOWaWHEKN8UaF5gQAAAAAAkZjUxUBfQcEP8PV1tfTAAAR8DlZetzemlkkEjpG4HDEtaTMPSH2+yYazO/aZD2bu7hvgSRxQ8fmJeeB6o43QKEYPhQDr3pbsVQKhT7ZR/+AYMq6f17zx+sLh220eVBlbfgcZwAP44LCx7iobDATDYjDYhDYTDYXFYTChi64745DjkAH3+zz4A67D9wAlMN1H+TrRSfFlW09s7A59WTEHRGhl6ngYaFPfjQOlyRnRpCnWocz/MMNds+lt/OkNVhqIE/RTginXIcF2dqYrlVim1eYBjMeSYhNzlF1tQVckB/7qqjDQA1jcBpoFFqf82TV2ICNDxQpoAAAADFmFHqKAIN6OEMc21pAAAHq2q/tEGjpWDfzOtsevUHDoAdX06i/92bR1FgGlOaagBTJuHrfBYpaxXSKyibCZEPGEc6CKDpaVUCrB/BkqAAAxe4+eN7c7QDGtMLeBwNA93VQ4b8WKUAAAAAD6Qv5/fFuikVxnR2oUeBt7P8EE8LogmAAAAACA46Mb6t99/+ck/sMvA7YAABWt18/G67HJEojTl0v3KHwn05z2MOYj6Bey/lgCtf4n+5kP6k4h0PUnnhsyPMKpIE2MGxgHQzXzgUBUPM9eWXrElhfNdR+ltgIFQiHwi4AD+OC7yJg2JA2GAyNA2Fg2FRWEwoY6+B+wefAAP3/Z+/7B7ev3/YP3ALPhbTah0LMScHm2XBllqGZZmtcZ8dFACggN0qhrZOiFLmLJyieOBLhloDASemyfZI427WK2wAGqPYuQb9AicByeEJSBYFMKFcbYmk+lqHBSstUFAAAEC4wAAVnsYgAO3vI8wLANfoPjt4w8zMaWPUs5pQAaPCIx34SAOMBhWYyGJCluV4AyHAX+sB/GmD/wuoAAaaUYIOpV/Jp53FeKQ6XFUMkr5IxoL4HzHl9NAHe5pAXxO5Y8DwXG0+X0W7Bz8NX9J/CuABXovUmC/igmA9GYVQ4IeWOAAWcPxznFcP1ra80QhQ4UjAAAAAFJmWtSaDKf/jN/w9rXRYAADfC/d8ZgYEbNkxWF4eq2kKOGRRQD+rgKZxJVyJZcz4ISohV1DmiQ8a0oZMJ/yyMOGdVV16aodo0M+2aT0N92q/2NBpm/udBIULcAA/jgu8jsLisLlsLBsMkQx99ZZ+w+vkAXl4/H5A/X9A/cArKrnJXGe1tm5mJjHW5wtt1qQ62TGDaC2TUPtjUKyERplOfWYNCohdIgaU3tzynMwLCZIbK4AUI0IRHwalViNCwZMJQDn7Aj+G06RhxyDzOAQ0AAxuHwACjTc1/icw78SwFo1PmvXdoVoQAAABqigFy1QwqEAgiIu4O90PgbTruTnlMYRnFNoAMOFFgmFAT03qS1BCDad4U0+EkYxfFzAw0tQAMu49F+76f1eXPq9rDVh1XTsAAABbcLPXKWfZCeGBeOOWMMW0lapMaCoc4AjRCUAAAAAMMYGOeagC5PmvsmPH1OGAAAZGXS2Z8jajm/Lf/p/J/xr++QaeGc5gAGlco5Y/s/nmAP7CF0B/mHJ+juyk18CHKvI6AdU75HIk5vyKki0zdrIWdY7GdsH3+g8AP44LDCrYo7CwrDJaCwZKxj8X69j9v3/Z+/7AAvH7/sOOX7/s/f9p+oBd0Hd0gbeM1vIxtTcxW6GLcmxiR/lhOi4q6AXJhHiCsNK2jk/qK2ADDO0iQhDHK1O+BgAKTJQD1iRjYGM0sss00SC6doUTTs7SKxubYIBoFgvOFAWAJXbdKHH9AADOff+ooz2SAaBRYGuFpisE+roUC+gCCe1KXAC4q8UIF+e3lNAAMaUAFAYeOaf9Idp+NKrz1dEA36UAXoyAKy1/SvU/uXWb+C3YYXjrzim6UkAAo1iFGF9J7jlCxmISvQOORRleJ82V3I0jogCBBlPH8+/G/jn/q/G9a9UzAME1oxDp8dXoee1uMVgVysv2L4/6H/O0mMaEyBACUGKq8wd1IYmlMkClBGzInYTWc4ExACs3UKsYPJe1yJaDotFVATVMKvFJExKsKWeVwA0t4FYcqcA/jguqBkbBsKBkyBgLBkSBkTGP3ft+/fX7e3p+/7APPg/f9nHInx8/v+z9/2fuAUHAj9siGudogA65KxsZ8ZsvZ9bHBYXr0MnipEo82nKMY9kYB5WkR+YUaU3rebL0ahFFGgDN0TLB7LPsCwMAoDFluZYSnfCWlBwGE2RyQUNDVkz+s9pwsJABcd50sM4qeImUXekDCzABGUgp79/qefg27/7sAdEQI4+UgWBqbeh+b/s3kKz0MtLbABq7NOAMJCwMd/L29Xm1oaGERIsBWLjnVKE/0RI6XC9PY9o8thAgtznE0lhaNKADxKzGAUMseh/xvq/5pzdpeVAE0qMREhD/KGtBlp6nafV/o37X3PM3SAApkYwlAQ4ZfWioUGaeBvmo2SORUnbBhULmSUKbEFMuZ3gpiskQLUEV0YzK0jMoE17MyQItDhLMQ8A/jgsLKtQhsMw0MhM4454+v2DrsAEoAddnqX9/et9Cxo0HqcQUzdEzM35WMh4xQLsW9xxxgBlHdbXP4y0UBZY0CtODnGaABoa6ztEjY6CMAAALEERLZU4upPcZZd0oABhgF9jSuDTKABqsbIACsAusNH0b+6ZM9TRRdtWKAKhiC8cxUHP5P818dwVnTIM6wubgAAAvf0v2h3856WG7RJAAu1AATl4X4HQ+Z8DCbALWFyABZCuLzPrP1/69YAAC8dLf7f03U+4V/BgASByOoU5P4LqZgjcsXBcBaNanAD+OCw0y0SKBy9jvjqs0fP137/j8/HvefFevv9vvV/nj2/PXXrzXj8fmvr59rupMEzGeZsKZCN3zw/ICJEWZ9R1h4WMc0UiDdSbHwspeWLAuOl7l2wcQwApSTQ6nOgAGo/MtMnZFjheIKfHErxdFFoGPteRHEJ3+5Wh33T2XF13T6Bb55wGroRuMQ+tUs1b00CwtJPzywDc4ZdYwFcTD3n8p0Gv3TVY+L9243GSndWnhp8Wu/7qwQJCs1anpHtXB0ZxvVuKiv0zu/G16rgcHV2Z447TOc6jAF6vScrsf07jN+Oj4DzOnOMzhhWWGMwjidx+f6tmC7yyvGd+n3T577vGOGlXKDQpnF3oYVLTjCQZCiOm7t+A+Oe57YS0gDLVvTylN3jns2XABjq+H7h2H2nuLXiiQCmoOKKwTglzoJAYgB1nURv5aTipVJnNxmKglR6qJrQShTDyigsdaogiT975k9VjpUjU0DEso7BIEJ6MxMG4AP44LCAXbYZZoXFoTG5NCoRHpH7/sAAAA9QAoLpQl4oZTE4YJIanWra8HvvNFsVdV9DLMAKr4+T8SFek/heRrGylzra2cX1P5b6/iE0kF5fUvSNFYwAMMcgVpgEhGGt7l2/BsxGPdcACgK9J4vocYgIN3xtKQW/0HTe00bwKA+9gLh6vs6SJgJAAAAXfL/P9D4HCJkAANR1fL8/t6M6CIATFgcAA/jgsIBptncNCkyBgNhYLmY792Wb1nr6/T9f29u/qvt+Pt8Hv549/N96njz69q79t9N3QoIycOaojY+qgynRwaqZczJbWouRjuYqSQIciDP3D9fDpgQzAD98+vYokKMA1NidNmaCkFNHToWgajkIoJNm3uWUgOCIQga4eg+r+H2GTchBOWScU4I8KYZZJVHWJ2Q4sx43yenMVlezHIM8OJ+J7lNa/H6hdeedfdZTe1qYTezgZbukvKCsM4Janaeq/UcXexg48mfT+7d31NSb6DGg/yjMeUbGpZ1AQjenKQhmpVj7hVp8W+D3P9pN506UOBhYA0yz1WVQjJKirGvyv5P3+suc9UtJxOW2xGsY53mw1yokUY63+j777PxdTdE5aUmLLCNVkLmcs762c9PCsKsvW/N6r9TrtPSo4oy21VGJVnCXPAooAF5COXA0hqJmopvQ7FNyJ0tSfROlQsqsexivCt4h7BBCKtDgK5qao1qKkTMlEPfIWyoQGUw4A/jgltlkaq0LpEWkEIP3/YAAAB6gAVIH6NhcCojIGvrbBKtGaBCj8mVhwADUf/XEU5QAaAvok8FMTHK7sN3+q9SmwsBr+32cclJkBUcfdLLWeyAZhAV3f47IXGCO7YAK0qwiOupCvf9W6BgJrd2AitujACp3fi41IAUAAcfV82E3EyBAAFJLAms+HyeNpFgAAAELqBd9dltxmlkAAMipIOAD+OC5QOiQSQwOQwViIV+5lg9/j9v3/b8fn937fj3+t8d8TviOeO+udPHVKpQvZEOrgaUzx1Hqdm3Fc1nNlWKqpDIanXosiFAhZM0xkkf3Ve9lYdrNUc80ETYTI1CYCb2PyFcFYQh1fyNorRLc7q8AoTk48Bx2oIZA6KIeu3tNYCAjkDdm1E4AEA5Aduy68QEckeSQKQkM1dgM+ZTjDqevwuYIAQES9TWP+gvDmtPuNMfOsgVzGIj1sK41ctHZF8WuJ8Y9R1JAdhI2Z8wjt5qiK0a0ooAU0K7RvLEgaBJBYXFppfRe1eqpWJlyipnW2/s3N1ts3hGdVBbJnmHyX3nR5ajDPRkc/s0CiTqUdwBcwEcYCjXkSWkUpFRajc4JjBOtR0Dw7Xt/VAHOOcpNiUZbnHGKTec/uyNe9alIGz/OJQsDX3ft///u2QWCNMojSE3FK5794lbwKyWS4ROEMVZq00xrTMbdeubDCUCV7uD2HPQ5c723bcho8800dGubhg4AA/jgnZp0Jm0Ih0YP3/YAAAAD1AhQe1SBqxdhkXNFa8Ay1v99pSGr7j+kbIDk/4Xq7BhsA3+r+0bAKgoasa4Lz0ICrhsxCsQEwC8eDomi5cK2wjehAv8fwGprkoCgnE9rMXVbkSAT6H2MCcAs0v2+sEBIBGaX6Lz3lrhESCxYDgAD4OCggGE2ejxBhIV9wCpvWT8/q+33KlQAClKKHfgBmdtozMQiFwVyuzBCHCywXwVUNGLZHxYLuF+pjRAMBu8a9siJhwA3EI+LAABAL0qGXFCEjxC2HeSYhxw3MkFPMSjIRK9qlz492i6dwMDXUQkQIkNV5k92mWaANz4ki4QlLu/VmOEkAgNj/h73eChCImEbYQDlBfvfggw4JkIvPPQG2AR6Fg+AYlSSN/Z9CKACcSTqBmRWsZWVRFAdgBkaCNMLhFOsdkWU8Fwx624trZYVPNU1vCEt5BPDFOoxEFIaaaB0ixGuYFvImFDlabP28wkaqNazMCi8ASb00T46Y4FhWpUKoxCWG9KGmNa9qr/1vaxXhNuASdTk5QlIGfIeZMetApg0IVtQmeOAYqWhS840VawSLcdBWyPh0SBBzaY2gWI96zVjOt5Kwayxjk092IDHIupVWohPsWCG7YiQLr218SbS68C+AAP44EephXohHq37v2fu8el5+/7fHufr+gAD0CUSpJkBcmxbJtHOhWS7X71Z4g4AscV/awV7ODU6XW5A8+oKzExAZdwmIB6hAAzFIC3AqAWmEwFQCoQ4A7Dgh0pYUEYSJE+hagAePP2++9Pn6AAKVVVSqp8jGOcKgmo1FqFYQqOn28otRwLZ/5iKhJGF2DlvTiorw3x68s6nH8t8HOzLHLV7vzPKVtjSV23X0wus9/D7DoSs46rkfXkU0rbw2kZA6zdvxkcAmPdW2tEdwQBso5SIghc3CgIQQqdgenEnXAMCfbIFEiWYUTJmhWJhf5bLyGBj9V0SIKOfdRU987u+q2atovQqI1ac5mpL+F/oV6H2y4w//UElvyq2+j4IPc8vekXk/bBZ0b0tlnJDsAW15H3xI2ebKJr3YdNZDGTqWhiEKeS6TkC/4wolqrBklA91XPYguLAsBUIAC7gDkOAEGlUCPae5ESTWSDnKfWVespaoKGCoBuh+dgK+H3QF9/8O0Gfh90BePn2kGazlilyxIZcfgDxDyDzQKRHAA5DKDGnAOhAOhAOheO5N62oOAARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAH3gIATGF2YzU4LjUyLjEwMgACMEAOARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcBGCAHARggBwEYIAcA/jUCYl14C0P30HXvipGO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"},function(t,e,i){"use strict";i.r(e);var n={};i.r(n),i.d(n,"AABB",(function(){return he})),i.d(n,"ArrayCollisionMatrix",(function(){return ce})),i.d(n,"BODY_SLEEP_STATES",(function(){return Pe})),i.d(n,"BODY_TYPES",(function(){return Ce})),i.d(n,"Body",(function(){return Re})),i.d(n,"Box",(function(){return Te})),i.d(n,"Broadphase",(function(){return We})),i.d(n,"COLLISION_TYPES",(function(){return ms})),i.d(n,"ConeTwistConstraint",(function(){return un})),i.d(n,"Constraint",(function(){return Ni})),i.d(n,"ContactEquation",(function(){return Xi})),i.d(n,"ContactMaterial",(function(){return xn})),i.d(n,"ConvexPolyhedron",(function(){return xe})),i.d(n,"Cylinder",(function(){return Ar})),i.d(n,"DistanceConstraint",(function(){return cn})),i.d(n,"Equation",(function(){return Ui})),i.d(n,"EventTarget",(function(){return de})),i.d(n,"FrictionEquation",(function(){return vn})),i.d(n,"GSSolver",(function(){return $r})),i.d(n,"GridBroadphase",(function(){return Je})),i.d(n,"Heightfield",(function(){return Sr})),i.d(n,"HingeConstraint",(function(){return fn})),i.d(n,"JacobianElement",(function(){return zi})),i.d(n,"LockConstraint",(function(){return dn})),i.d(n,"Mat3",(function(){return ie})),i.d(n,"Material",(function(){return wn})),i.d(n,"NaiveBroadphase",(function(){return Ke})),i.d(n,"Narrowphase",(function(){return gs})),i.d(n,"ObjectCollisionMatrix",(function(){return ee})),i.d(n,"Particle",(function(){return xr})),i.d(n,"Plane",(function(){return wr})),i.d(n,"PointToPointConstraint",(function(){return nn})),i.d(n,"Pool",(function(){return ps})),i.d(n,"Quaternion",(function(){return pe})),i.d(n,"RAY_MODES",(function(){return oi})),i.d(n,"Ray",(function(){return ai})),i.d(n,"RaycastResult",(function(){return Ze})),i.d(n,"RaycastVehicle",(function(){return Fn})),i.d(n,"RigidVehicle",(function(){return hr})),i.d(n,"RotationalEquation",(function(){return an})),i.d(n,"RotationalMotorEquation",(function(){return pn})),i.d(n,"SAPBroadphase",(function(){return ki})),i.d(n,"SHAPE_TYPES",(function(){return ge})),i.d(n,"SPHSystem",(function(){return cr})),i.d(n,"Shape",(function(){return ve})),i.d(n,"Solver",(function(){return Zr})),i.d(n,"Sphere",(function(){return ar})),i.d(n,"SplitSolver",(function(){return ns})),i.d(n,"Spring",(function(){return bn})),i.d(n,"Transform",(function(){return ye})),i.d(n,"Trimesh",(function(){return Nr})),i.d(n,"Vec3",(function(){return re})),i.d(n,"Vec3Pool",(function(){return fs})),i.d(n,"WheelInfo",(function(){return Dn})),i.d(n,"World",(function(){return No}));i(3);function r(t,e,i,n){return new(i||(i=Promise))((function(r,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((n=n.apply(t,e||[])).next())}))}const s=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"];function o(t){return t.toLowerCase().replace(/^angle ?\((.+)\)*$/,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"")}const a="undefined"==typeof window,h=(()=>{if(a)return;const{userAgent:t,platform:e,maxTouchPoints:i}=window.navigator,n=/(iphone|ipod|ipad)/i.test(t),r="iPad"===e||"MacIntel"===e&&i>0&&!window.MSStream;return{isIpad:r,isMobile:/android/i.test(t)||n||r,isSafari12:/Version\/12.+Safari/.test(t)}})();const l=[],u=[];function c(t,e){if(t===e)return 0;const i=t;t.length>e.length&&(t=e,e=i);let n=t.length,r=e.length;for(;n>0&&t.charCodeAt(~-n)===e.charCodeAt(~-r);)n--,r--;let s,o=0;for(;o<n&&t.charCodeAt(o)===e.charCodeAt(o);)o++;if(n-=o,r-=o,0===n)return r;let a,h,c=0,d=0,p=0;for(;d<n;)u[d]=t.charCodeAt(o+d),l[d]=++d;for(;p<r;)for(s=e.charCodeAt(o+p),a=p++,c=p,d=0;d<n;d++)h=s===u[d]?a:a+1,a=l[d],c=l[d]=a>c?h>c?c+1:h:h>a?a+1:h;return c}function d(t){return null!=t}class p extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}const f=({mobileTiers:t=[0,15,30,60],desktopTiers:e=[0,15,30,60],override:i={},glContext:n,failIfMajorPerformanceCaveat:l=!1,benchmarksURL:u="https://unpkg.com/detect-gpu@4.0.26/dist/benchmarks"}={})=>r(void 0,void 0,void 0,(function*(){const f={};if(a)return{tier:0,type:"SSR"};const{isIpad:m=!!(null==h?void 0:h.isIpad),isMobile:g=!!(null==h?void 0:h.isMobile),screenSize:v=window.screen,loadBenchmarks:y=(t=>r(void 0,void 0,void 0,(function*(){const e=yield fetch(`${u}/${t}`).then(t=>t.json());if(parseInt(e.shift().split(".")[0],10)<4)throw new p("Detect GPU benchmark data is out of date. Please update to version 4x");return e})))}=i;let{renderer:A}=i;const x=(t,e,i,n,r)=>({device:r,fps:n,gpu:i,isMobile:g,tier:t,type:e});let w,b="";if(A)A=o(A),w=[A];else{const t=n||function(t,e=!1){const i={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:e,powerPreference:"high-performance",stencil:!1};t&&delete i.powerPreference;const n=window.document.createElement("canvas"),r=n.getContext("webgl",i)||n.getContext("experimental-webgl",i);return null!=r?r:void 0}(null==h?void 0:h.isSafari12,l);if(!t)return x(0,"WEBGL_UNSUPPORTED");const e=t.getExtension("WEBGL_debug_renderer_info");if(e&&(A=t.getParameter(e.UNMASKED_RENDERER_WEBGL)),!A)return x(1,"FALLBACK");b=A,A=o(A),w=function(t,e,i){return"apple gpu"===e?function(t,e,i){if(!i)return[e];const n=function(t){const e=t.createShader(35633),i=t.createShader(35632),n=t.createProgram();if(!(i&&e&&n))return;t.shaderSource(e,"\n    precision highp float;\n    attribute vec3 aPosition;\n    varying float vvv;\n    void main() {\n      vvv = 0.31622776601683794;\n      gl_Position = vec4(aPosition, 1.0);\n    }\n  "),t.shaderSource(i,"\n    precision highp float;\n    varying float vvv;\n    void main() {\n      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;\n      enc = fract(enc);\n      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);\n      gl_FragColor = enc;\n    }\n  "),t.compileShader(e),t.compileShader(i),t.attachShader(n,e),t.attachShader(n,i),t.linkProgram(n),t.detachShader(n,e),t.detachShader(n,i),t.deleteShader(e),t.deleteShader(i),t.useProgram(n);const r=t.createBuffer();t.bindBuffer(34962,r),t.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const s=t.getAttribLocation(n,"aPosition");t.vertexAttribPointer(s,3,5126,!1,0,0),t.enableVertexAttribArray(s),t.clearColor(1,1,1,1),t.clear(16384),t.viewport(0,0,1,1),t.drawArrays(4,0,3);const o=new Uint8Array(4);return t.readPixels(0,0,1,1,6408,5121,o),t.deleteProgram(n),t.deleteBuffer(r),o.join("")}(t),r="801621810",s="8016218135",o="80162181161",a=(null==h?void 0:h.isIpad)?[["a7",o,12],["a8",s,15],["a8x",s,15],["a9",s,15],["a9x",s,15],["a10",s,15],["a10x",s,15],["a12",r,15],["a12x",r,15],["a12z",r,15],["a14",r,15],["m1",r,15]]:[["a7",o,12],["a8",s,12],["a9",s,15],["a10",s,15],["a11",r,15],["a12",r,15],["a13",r,15],["a14",r,15]];let l;return"80162181255"===n?l=a.filter(([,,t])=>t>=14):(l=a.filter(([,t])=>t===n),l.length||(l=a)),l.map(([t])=>`apple ${t} gpu`)}(t,e,i):[e]}(t,A,g)}const S=(yield Promise.all(w.map(t=>r(void 0,void 0,void 0,(function*(){var e;const i=(t=>{const e=g?["adreno","apple","mali-t","mali","nvidia","powervr"]:["intel","apple","amd","radeon","nvidia","geforce"];for(const i of e)if(t.includes(i))return i})(t);if(!i)return;const n=`${g?"m":"d"}-${i}${m?"-ipad":""}.json`,r=f[n]=null!==(e=f[n])&&void 0!==e?e:y(n);let s;try{s=yield r}catch(e){if(e instanceof p)throw e;return}const o=function(t){var e;const i=(t=t.replace(/\([^)]+\)/,"")).match(/\d+/)||t.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return null!==(e=null==i?void 0:i.join("").replace(/\W|amd/g,""))&&void 0!==e?e:""}(t);let a=s.filter(([,t])=>t===o);a.length||(a=s.filter(([e])=>e.includes(t)));const h=a.length;if(0===h)return;let l,[u,,,d]=h>1?a.map(e=>[e,c(t,e[0])]).sort(([,t],[,e])=>t-e)[0][0]:a[0],A=Number.MAX_VALUE;const{devicePixelRatio:x}=window,w=v.width*x*v.height*x;for(const t of d){const[e,i]=t,n=e*i,r=Math.abs(w-n);r<A&&(A=r,l=t)}if(!l)return;const[,,b,S]=l;return[A,b,u,S]}))))).filter(d).sort(([t=Number.MAX_VALUE,e],[i=Number.MAX_VALUE,n])=>t===i?e-n:t-i);if(!S.length){const t=s.find(t=>A.includes(t));return t?x(0,"BLOCKLISTED",t):x(1,"FALLBACK",`${A} (${b})`)}const[,E,T,_]=S[0];if(-1===E)return x(0,"BLOCKLISTED",T,E,_);const M=g?t:e;let C=0;for(let t=0;t<M.length;t++)E>=M[t]&&(C=t);return x(C,"BENCHMARK",T,E,_)}));i(5);var m=i(0);function g(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return v(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw s}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var x=function(){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;y(this,t);var r=new m.InstancedMesh(e,i,n);r.instanceMatrix.setUsage(THREE.DynamicDrawUsage),this.instancedMesh=r,E.threeScene.add(r),this.dummy=new m.Object3D,this.list=[]}var e,i,n;return e=t,(i=[{key:"clear",value:function(){this.dummy.position.set(0,0,0),this.dummy.updateMatrix();for(var t=0;t<this.list.length;t++)this.instancedMesh.setMatrixAt(t,this.dummy.matrix);this.instancedMesh.instanceMatrix.needsUpdate=!0;var e,i=g(this.list);try{for(i.s();!(e=i.n()).done;){var n=e.value;n.body&&(E.cannonPhysics.world.remove(n.body),n.body=null)}}catch(t){i.e(t)}finally{i.f()}this.list=[]}},{key:"initBodyData",value:function(t){var e=new CANNON.Box(new CANNON.Vec3(.5*t.x,.5*t.y,.5*t.z));this.bodyShape=e}},{key:"addItem",value:function(t,e,i){var n={pos:t,qt:e||new m.Quaternion,index:this.list.length};if(i){var r=new CANNON.Body({mass:void 0===i.mass?1:i.mass,shape:this.bodyShape,position:new CANNON.Vec3(t.x,t.y,t.z)});n.body=r,r.item=n,E.cannonPhysics.world.add(r),r.quaternion.copy(n.qt),r.label=i.label,r.sleep(),i.isSensor&&(r.collisionResponse=!1),n.ignoreBodyPos=i.ignoreBodyPos,i.collisionCallback&&r.addEventListener("collide",i.collisionCallback)}return this.list.push(n),n}},{key:"removeItem",value:function(t){var e=this.list.indexOf(t);-1!=e&&this.list.splice(e,1)}},{key:"changeMaterial",value:function(t){this.instancedMesh.material=t}},{key:"update",value:function(){var t=this.dummy,e=this.list.length;if(e>0){for(var i=e-1;i>=0;i--){var n=this.list[i];n.body&&!n.ignoreBodyPos?(t.position.copy(n.body.position),t.quaternion.copy(n.body.quaternion),(n.body.position.y<-15||n.body.position.z>E.camZ+10)&&(E.cannonPhysics.world.remove(n.body),this.removeItem(n),n.body=null,t.position.set(0,0,0))):(t.position.copy(n.pos),n.pos.z>E.camZ+10&&(n.body&&(E.cannonPhysics.world.remove(n.body),n.body=null),this.removeItem(n),t.position.set(0,0,0))),t.updateMatrix(),this.instancedMesh.setMatrixAt(i,t.matrix)}this.instancedMesh.instanceMatrix.needsUpdate=!0}}}])&&A(e.prototype,i),n&&A(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),w={phaserGame:null,phaserScene:null,threeScene:null,threeRenderer:null,threeCamera:null,tweens:null,brickController:null,coinController:null,audioIcon:null,objects:[],woodList:[],seaLevel:-1.32,sideTerrainWidth:47.45,trunkWidth:30.4,trunkCapWidth:1.4,levelNo:0,curScore:0,brickScale:2,brickDim:new m.Vector3(1,.4,.56),scorePerDig:10,prevScores:[],bestScore:0,scoreAreaScale:1.6,collisionGroupDefault:1,collisionGroupChisel:2,collisionGroupBrick:4,collisionGroupCoin:8,collisionGroupKilling:16,backgroundColorNo:0,backgroundColors:["#aeffff","#ef72fc","#fffc40","#ff8ce4","#bef540"],showRewarded:!0,brickColors:{3:1,5:1,7:2,8:3,9:4},inputLocked:!1,gameLogo:i(4),locales:{level:"Level",tutorial:"Hold to dig",try_again:"Try Again!",best:"Best",level_passed:"Level Passed",revive_text:"REVIVE",no_thanks:"No Thanks",fb_invite:"Invite friends",fb_share:"Share with friends",tap_to_restart:"TAP TO RESTART"}};w.brickDim.multiplyScalar(w.brickScale),window.globals=w,w.lockInput=function(){w.inputLocked=!0,w.phaserScene.input.enabled=!1},w.unlockInput=function(){w.inputLocked=!1,w.phaserScene.input.enabled=!0},w.pfPostprocessData={enable:!1,gearboxMode:!1,fxaa:{enable:!0},colorEdit:{enable:!0,hue:0,saturation:.1},general:{enable:!0,ambientIntensity:.4,dirIntensity:.7,pauseGame:!1},toon:{enable:!1,outlineColor:"#ff0000",edgeSens:.5},grayscale:{enable:!1},lut:{enable:!1,texName:"20_oh_brother",lutPower:1,texture:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAABhUlEQVRIiY1VQZIDIQhkHaiK85vN5/c9yQscL9G57B4UBQaTPVkJLdjdwHz9xPhbNoIaEPisgaBs7fxOzxErgeDcEF6BoI74o+NNjo2gBIR7ekLp+CLyMo7z157f4tr9mU+fBPf0aPfEf7PGtX41OTBThDIeLoD9zHTrv0njAkLZENp9eU/iEA6KSkCLyxxf5Dj6+85FjgOjIm5xM66J85uQC1hlGWALVOPiqgDjWQDGW1y7b/NOghlvilAVJgwDTPfJs8Xx0qWjA7QAukWaA7tLvOE6QYc458kYXeJKIIc44xLtLvHRAUsBZv7ViJdAgOwAJ6wB4SXmOJN2YDrhO6DE3BCSInjFZTEiXg6uL7tI4pjgKd8tzDpUfileiyM7yDP9Xweswmq2zIx75MaIqR1xXYYH7W8Favf98WSB5m67ckB3RlwHRGs7Ba7ifXZALlmvfYu4P78Oup01QW+JmyVvxMREUWxO3wGPuHTAjsU7gexnNCmHNW4t0MSvBGBc4vhiSf4BdqMHFr4bgpcAAAAASUVORK5CYII="},vignette:{enable:!1,offset:1.5,color:"#ff0000",animateSpeed:1,animateRatio:0},unreal_bloom:{enable:!1,exposure:1,bloomStrength:.25,bloomThreshold:0,bloomRadius:0},pixelate:{enable:!1,pixelSize:1},film:{enable:!1,nIntensity:.5,sIntensity:.5,sCount:.5,grayscale:1},afterImage:{enable:!1,damp:.96}};var b,S,E=w;function T(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var _=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i={width:800,height:800,type:Phaser.CANVAS,render:{antialias:!0,transparent:!0},scene:{preload:function(){b=this,E.phaserScene=this,E.tweens=E.phaserScene.tweens,this.load.atlas("atlas","https://cdn.jsdelivr.net/gh/my-files-schoolum/spi@main/assets/ui/atlas.png","https://cdn.jsdelivr.net/gh/my-files-schoolum/spi@main/assets/ui/atlas.json"),this.load.image("loading_bg_waves","https://cdn.jsdelivr.net/gh/my-files-schoolum/spi@main/assets/ui/loading_bg_waves.png")},create:function(){S.canvas.style.zIndex=2,e&&e();this.textures.addSpriteSheetFromAtlas("finger_explosion",{atlas:"atlas",frame:"line_streak",frameWidth:100,frameHeight:30});this.anims.create({key:"finger_explosion-anim",frames:this.anims.generateFrameNumbers("finger_explosion",{start:0,end:15,first:0}),frameRate:30,repeat:0})},update:function(){}},banner:!1};S=new Phaser.Game(i),E.phaserGame=S}var e,i,n;return e=t,(i=[{key:"initPreloader",value:function(t){var e=b.add.tileSprite(0,0,512,256,"loading_bg_waves").setOrigin(0),i=b.add.image(0,0,"atlas","loading_logo"),n=b.add.container(),r=b.add.image(0,0,"atlas","loading_bar_bg"),s=b.add.image(176,-39,"atlas","loading_bar_mask").setOrigin(1,0),o=b.add.image(-60,-41.5,"atlas","loading_chisel").setOrigin(1,.5);s.scaleY=1.1,n.add([r,s,o]),n.width=r.width,n.height=r.height,e.onResizeCallback=function(t,r){e.width=Math.ceil(t),e.height=Math.ceil(r),i.setScale(Math.min(.5*t/i.width,.3*r/i.height)),i.x=.5*t,i.y=.2*r,n.x=.5*t,n.y=.7*r,n.setScale(Math.min(.8*t/n.width,.3*r/n.height)),t>r&&(i.setScale(Math.min(.35*t/i.width,.24*r/i.height)),n.setScale(Math.min(.5*t/n.width,.15*r/n.height)))},b.tweens.add({targets:o,x:180,duration:250,onUpdate:function(){var t=190-o.x;s.scaleX=t/240},onComplete:function(){t("preloader")}}),[e,i,n].forEach((function(t){t.setDepth(99)})),this.removePreloader=function(){e.destroy(),n.destroy(),i.destroy()}}},{key:"resize",value:function(t,e){var i=S.config.width,n=S.config.height,r=Math.min(t/i,e/n)+.0015,s=t/r,o=e/r;S.canvas&&(S.canvas.style["-ms-transform"]="scale("+r+")",S.canvas.style["-webkit-transform"]="scale3d("+r+", 1)",S.canvas.style["-moz-transform"]="scale("+r+")",S.canvas.style["-o-transform"]="scale("+r+")",S.canvas.style.transform="scale("+r+")",S.canvas.style.transformOrigin="top left",S.scale.resize(s,o),S.scene.scenes.forEach((function(t){t.cameras.resize(s,o),t.w=s,t.h=o,t.children.list.forEach((function(t){t.onResizeCallback&&t.onResizeCallback(s,o)}))})))}}])&&T(e.prototype,i),n&&T(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),M={isWebGLAvailable:function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}},isWebGL2Available:function(){try{var t=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!t.getContext("webgl2"))}catch(t){return!1}},getWebGLErrorMessage:function(){return this.getErrorMessage(1)},getWebGL2ErrorMessage:function(){return this.getErrorMessage(2)},getErrorMessage:function(t){var e={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext},i='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>',n=document.createElement("div");return n.id="webglmessage",n.style.fontFamily="monospace",n.style.fontSize="13px",n.style.fontWeight="normal",n.style.textAlign="center",n.style.background="#fff",n.style.color="#000",n.style.padding="1.5em",n.style.width="400px",n.style.margin="5em auto 0",i=(i=e[t]?i.replace("$0","graphics card"):i.replace("$0","browser")).replace("$1",{1:"WebGL",2:"WebGL 2"}[t]),n.innerHTML=i,n}};var C=function(){var t={material:{},texture:{},geometry:{},cannonShape:{},ammoShape:{}},e=0;this.init=function(){this.textureLoader||(this.textureLoader=new m.TextureLoader)},this.loadTexture=function(){},this.addItem=function(i,n,r,s){if(n||(n="storageData"+e,e++),!s)return t[i][n]?t[i][n]:void(t[i][n]=r);t[i][n]=r},this.hasItem=function(e,i){return t[e][i]},this.getItem=function(e,i){return t[e][i]},this.removeItem=function(e,i){t[e][i]=null},this.refreshItem=function(t,e,i){this.addItem(t,e,i,!0)}};const P={type:"change"},R={type:"start"},O={type:"end"};class L extends m.EventDispatcher{constructor(t,e){super(),document,this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new m.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:m.MOUSE.ROTATE,MIDDLE:m.MOUSE.DOLLY,RIGHT:m.MOUSE.PAN},this.touches={ONE:m.TOUCH.ROTATE,TWO:m.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",X),this._domElementKeyEvents=t},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(P),i.update(),r=n.NONE},this.update=function(){const e=new m.Vector3,c=(new m.Quaternion).setFromUnitVectors(t.up,new m.Vector3(0,1,0)),d=c.clone().invert(),p=new m.Vector3,f=new m.Quaternion,g=2*Math.PI;return function(){const t=i.object.position;e.copy(t).sub(i.target),e.applyQuaternion(c),o.setFromVector3(e),i.autoRotate&&r===n.NONE&&E(2*Math.PI/60/60*i.autoRotateSpeed),i.enableDamping?(o.theta+=a.theta*i.dampingFactor,o.phi+=a.phi*i.dampingFactor):(o.theta+=a.theta,o.phi+=a.phi);let m=i.minAzimuthAngle,v=i.maxAzimuthAngle;return isFinite(m)&&isFinite(v)&&(m<-Math.PI?m+=g:m>Math.PI&&(m-=g),v<-Math.PI?v+=g:v>Math.PI&&(v-=g),o.theta=m<=v?Math.max(m,Math.min(v,o.theta)):o.theta>(m+v)/2?Math.max(m,o.theta):Math.min(v,o.theta)),o.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,o.phi)),o.makeSafe(),o.radius*=h,o.radius=Math.max(i.minDistance,Math.min(i.maxDistance,o.radius)),!0===i.enableDamping?i.target.addScaledVector(l,i.dampingFactor):i.target.add(l),e.setFromSpherical(o),e.applyQuaternion(d),t.copy(i.target).add(e),i.object.lookAt(i.target),!0===i.enableDamping?(a.theta*=1-i.dampingFactor,a.phi*=1-i.dampingFactor,l.multiplyScalar(1-i.dampingFactor)):(a.set(0,0,0),l.set(0,0,0)),h=1,!!(u||p.distanceToSquared(i.object.position)>s||8*(1-f.dot(i.object.quaternion))>s)&&(i.dispatchEvent(P),p.copy(i.object.position),f.copy(i.object.quaternion),u=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",q),i.domElement.removeEventListener("pointerdown",V),i.domElement.removeEventListener("pointercancel",j),i.domElement.removeEventListener("wheel",Y),i.domElement.removeEventListener("pointermove",H),i.domElement.removeEventListener("pointerup",W),null!==i._domElementKeyEvents&&i._domElementKeyEvents.removeEventListener("keydown",X)};const i=this,n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=n.NONE;const s=1e-6,o=new m.Spherical,a=new m.Spherical;let h=1;const l=new m.Vector3;let u=!1;const c=new m.Vector2,d=new m.Vector2,p=new m.Vector2,f=new m.Vector2,g=new m.Vector2,v=new m.Vector2,y=new m.Vector2,A=new m.Vector2,x=new m.Vector2,w=[],b={};function S(){return Math.pow(.95,i.zoomSpeed)}function E(t){a.theta-=t}function T(t){a.phi-=t}const _=function(){const t=new m.Vector3;return function(e,i){t.setFromMatrixColumn(i,0),t.multiplyScalar(-e),l.add(t)}}(),M=function(){const t=new m.Vector3;return function(e,n){!0===i.screenSpacePanning?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(i.object.up,t)),t.multiplyScalar(e),l.add(t)}}(),C=function(){const t=new m.Vector3;return function(e,n){const r=i.domElement;if(i.object.isPerspectiveCamera){const s=i.object.position;t.copy(s).sub(i.target);let o=t.length();o*=Math.tan(i.object.fov/2*Math.PI/180),_(2*e*o/r.clientHeight,i.object.matrix),M(2*n*o/r.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(_(e*(i.object.right-i.object.left)/i.object.zoom/r.clientWidth,i.object.matrix),M(n*(i.object.top-i.object.bottom)/i.object.zoom/r.clientHeight,i.object.matrix)):i.enablePan=!1}}();function L(t){i.object.isPerspectiveCamera?h/=t:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*t)),i.object.updateProjectionMatrix(),u=!0):i.enableZoom=!1}function I(t){i.object.isPerspectiveCamera?h*=t:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/t)),i.object.updateProjectionMatrix(),u=!0):i.enableZoom=!1}function D(t){c.set(t.clientX,t.clientY)}function B(t){f.set(t.clientX,t.clientY)}function k(){if(1===w.length)c.set(w[0].pageX,w[0].pageY);else{const t=.5*(w[0].pageX+w[1].pageX),e=.5*(w[0].pageY+w[1].pageY);c.set(t,e)}}function F(){if(1===w.length)f.set(w[0].pageX,w[0].pageY);else{const t=.5*(w[0].pageX+w[1].pageX),e=.5*(w[0].pageY+w[1].pageY);f.set(t,e)}}function N(){const t=w[0].pageX-w[1].pageX,e=w[0].pageY-w[1].pageY,i=Math.sqrt(t*t+e*e);y.set(0,i)}function z(t){if(1==w.length)d.set(t.pageX,t.pageY);else{const e=K(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);d.set(i,n)}p.subVectors(d,c).multiplyScalar(i.rotateSpeed);const e=i.domElement;E(2*Math.PI*p.x/e.clientHeight),T(2*Math.PI*p.y/e.clientHeight),c.copy(d)}function U(t){if(1===w.length)g.set(t.pageX,t.pageY);else{const e=K(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);g.set(i,n)}v.subVectors(g,f).multiplyScalar(i.panSpeed),C(v.x,v.y),f.copy(g)}function G(t){const e=K(t),n=t.pageX-e.x,r=t.pageY-e.y,s=Math.sqrt(n*n+r*r);A.set(0,s),x.set(0,Math.pow(A.y/y.y,i.zoomSpeed)),L(x.y),y.copy(A)}function V(t){!1!==i.enabled&&(0===w.length&&(i.domElement.setPointerCapture(t.pointerId),i.domElement.addEventListener("pointermove",H),i.domElement.addEventListener("pointerup",W)),function(t){w.push(t)}(t),"touch"===t.pointerType?function(t){switch(Q(t),w.length){case 1:switch(i.touches.ONE){case m.TOUCH.ROTATE:if(!1===i.enableRotate)return;k(),r=n.TOUCH_ROTATE;break;case m.TOUCH.PAN:if(!1===i.enablePan)return;F(),r=n.TOUCH_PAN;break;default:r=n.NONE}break;case 2:switch(i.touches.TWO){case m.TOUCH.DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;i.enableZoom&&N(),i.enablePan&&F(),r=n.TOUCH_DOLLY_PAN;break;case m.TOUCH.DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;i.enableZoom&&N(),i.enableRotate&&k(),r=n.TOUCH_DOLLY_ROTATE;break;default:r=n.NONE}break;default:r=n.NONE}r!==n.NONE&&i.dispatchEvent(R)}(t):function(t){let e;switch(t.button){case 0:e=i.mouseButtons.LEFT;break;case 1:e=i.mouseButtons.MIDDLE;break;case 2:e=i.mouseButtons.RIGHT;break;default:e=-1}switch(e){case m.MOUSE.DOLLY:if(!1===i.enableZoom)return;!function(t){y.set(t.clientX,t.clientY)}(t),r=n.DOLLY;break;case m.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===i.enablePan)return;B(t),r=n.PAN}else{if(!1===i.enableRotate)return;D(t),r=n.ROTATE}break;case m.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===i.enableRotate)return;D(t),r=n.ROTATE}else{if(!1===i.enablePan)return;B(t),r=n.PAN}break;default:r=n.NONE}r!==n.NONE&&i.dispatchEvent(R)}(t))}function H(t){!1!==i.enabled&&("touch"===t.pointerType?function(t){switch(Q(t),r){case n.TOUCH_ROTATE:if(!1===i.enableRotate)return;z(t),i.update();break;case n.TOUCH_PAN:if(!1===i.enablePan)return;U(t),i.update();break;case n.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;!function(t){i.enableZoom&&G(t),i.enablePan&&U(t)}(t),i.update();break;case n.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;!function(t){i.enableZoom&&G(t),i.enableRotate&&z(t)}(t),i.update();break;default:r=n.NONE}}(t):function(t){if(!1===i.enabled)return;switch(r){case n.ROTATE:if(!1===i.enableRotate)return;!function(t){d.set(t.clientX,t.clientY),p.subVectors(d,c).multiplyScalar(i.rotateSpeed);const e=i.domElement;E(2*Math.PI*p.x/e.clientHeight),T(2*Math.PI*p.y/e.clientHeight),c.copy(d),i.update()}(t);break;case n.DOLLY:if(!1===i.enableZoom)return;!function(t){A.set(t.clientX,t.clientY),x.subVectors(A,y),x.y>0?L(S()):x.y<0&&I(S()),y.copy(A),i.update()}(t);break;case n.PAN:if(!1===i.enablePan)return;!function(t){g.set(t.clientX,t.clientY),v.subVectors(g,f).multiplyScalar(i.panSpeed),C(v.x,v.y),f.copy(g),i.update()}(t)}}(t))}function W(t){J(t),0===w.length&&(i.domElement.releasePointerCapture(t.pointerId),i.domElement.removeEventListener("pointermove",H),i.domElement.removeEventListener("pointerup",W)),i.dispatchEvent(O),r=n.NONE}function j(t){J(t)}function Y(t){!1!==i.enabled&&!1!==i.enableZoom&&r===n.NONE&&(t.preventDefault(),i.dispatchEvent(R),function(t){t.deltaY<0?I(S()):t.deltaY>0&&L(S()),i.update()}(t),i.dispatchEvent(O))}function X(t){!1!==i.enabled&&!1!==i.enablePan&&function(t){let e=!1;switch(t.code){case i.keys.UP:C(0,i.keyPanSpeed),e=!0;break;case i.keys.BOTTOM:C(0,-i.keyPanSpeed),e=!0;break;case i.keys.LEFT:C(i.keyPanSpeed,0),e=!0;break;case i.keys.RIGHT:C(-i.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),i.update())}(t)}function q(t){!1!==i.enabled&&t.preventDefault()}function J(t){delete b[t.pointerId];for(let e=0;e<w.length;e++)if(w[e].pointerId==t.pointerId)return void w.splice(e,1)}function Q(t){let e=b[t.pointerId];void 0===e&&(e=new m.Vector2,b[t.pointerId]=e),e.set(t.pageX,t.pageY)}function K(t){const e=t.pointerId===w[0].pointerId?w[1]:w[0];return b[e.pointerId]}i.domElement.addEventListener("contextmenu",q),i.domElement.addEventListener("pointerdown",V),i.domElement.addEventListener("pointercancel",j),i.domElement.addEventListener("wheel",Y,{passive:!1}),this.update()}}const I={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class D{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){}}const B=new m.OrthographicCamera(-1,1,1,-1,0,1),k=new m.BufferGeometry;k.setAttribute("position",new m.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),k.setAttribute("uv",new m.Float32BufferAttribute([0,2,0,0,2,0],2));class F{constructor(t){this._mesh=new m.Mesh(k,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,B)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}class N extends D{constructor(t,e){super(),this.textureID=void 0!==e?e:"tDiffuse",t instanceof m.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=m.UniformsUtils.clone(t.uniforms),this.material=new m.ShaderMaterial({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new F(this.material)}render(t,e,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}}class z extends D{constructor(t,e){super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,e,i){const n=t.getContext(),r=t.state;let s,o;r.buffers.color.setMask(!1),r.buffers.depth.setMask(!1),r.buffers.color.setLocked(!0),r.buffers.depth.setLocked(!0),this.inverse?(s=0,o=1):(s=1,o=0),r.buffers.stencil.setTest(!0),r.buffers.stencil.setOp(n.REPLACE,n.REPLACE,n.REPLACE),r.buffers.stencil.setFunc(n.ALWAYS,s,4294967295),r.buffers.stencil.setClear(o),r.buffers.stencil.setLocked(!0),t.setRenderTarget(i),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),r.buffers.color.setLocked(!1),r.buffers.depth.setLocked(!1),r.buffers.stencil.setLocked(!1),r.buffers.stencil.setFunc(n.EQUAL,1,4294967295),r.buffers.stencil.setOp(n.KEEP,n.KEEP,n.KEEP),r.buffers.stencil.setLocked(!0)}}class U extends D{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}class G{constructor(t,e){if(this.renderer=t,void 0===e){const i=t.getSize(new m.Vector2);this._pixelRatio=t.getPixelRatio(),this._width=i.width,this._height=i.height,(e=new m.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new N(I),this.clock=new m.Clock}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const e=this.passes.indexOf(t);-1!==e&&this.passes.splice(e,1)}isLastEnabledPass(t){for(let e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(t){void 0===t&&(t=this.clock.getDelta());const e=this.renderer.getRenderTarget();let i=!1;for(let e=0,n=this.passes.length;e<n;e++){const n=this.passes[e];if(!1!==n.enabled){if(n.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(e),n.render(this.renderer,this.writeBuffer,this.readBuffer,t,i),n.needsSwap){if(i){const e=this.renderer.getContext(),i=this.renderer.state.buffers.stencil;i.setFunc(e.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),i.setFunc(e.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==z&&(n instanceof z?i=!0:n instanceof U&&(i=!1))}}this.renderer.setRenderTarget(e)}reset(t){if(void 0===t){const e=this.renderer.getSize(new m.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,e){this._width=t,this._height=e;const i=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this.renderTarget1.setSize(i,n),this.renderTarget2.setSize(i,n);for(let t=0;t<this.passes.length;t++)this.passes[t].setSize(i,n)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}}new m.OrthographicCamera(-1,1,1,-1,0,1);const V=new m.BufferGeometry;V.setAttribute("position",new m.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),V.setAttribute("uv",new m.Float32BufferAttribute([0,2,0,0,2,0],2));const H={uniforms:{tDiffuse:{value:null},resolution:{value:new m.Vector2(1/1024,1/512)}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\tprecision highp float;\n\n\tuniform sampler2D tDiffuse;\n\n\tuniform vec2 resolution;\n\n\tvarying vec2 vUv;\n\n\t// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)\n\n\t//----------------------------------------------------------------------------------\n\t// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag\n\t// SDK Version: v3.00\n\t// Email:       gameworks@nvidia.com\n\t// Site:        http://developer.nvidia.com/\n\t//\n\t// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n\t//\n\t// Redistribution and use in source and binary forms, with or without\n\t// modification, are permitted provided that the following conditions\n\t// are met:\n\t//  * Redistributions of source code must retain the above copyright\n\t//    notice, this list of conditions and the following disclaimer.\n\t//  * Redistributions in binary form must reproduce the above copyright\n\t//    notice, this list of conditions and the following disclaimer in the\n\t//    documentation and/or other materials provided with the distribution.\n\t//  * Neither the name of NVIDIA CORPORATION nor the names of its\n\t//    contributors may be used to endorse or promote products derived\n\t//    from this software without specific prior written permission.\n\t//\n\t// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY\n\t// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n\t// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n\t// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n\t// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n\t// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n\t// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n\t// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n\t// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n\t// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n\t// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\t//\n\t//----------------------------------------------------------------------------------\n\n\t#ifndef FXAA_DISCARD\n\t\t\t//\n\t\t\t// Only valid for PC OpenGL currently.\n\t\t\t// Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n\t\t\t//\n\t\t\t// 1 = Use discard on pixels which don't need AA.\n\t\t\t//     For APIs which enable concurrent TEX+ROP from same surface.\n\t\t\t// 0 = Return unchanged color on pixels which don't need AA.\n\t\t\t//\n\t\t\t#define FXAA_DISCARD 0\n\t#endif\n\n\t/*--------------------------------------------------------------------------*/\n\t#define FxaaTexTop(t, p) texture2D(t, p, -100.0)\n\t#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)\n\t/*--------------------------------------------------------------------------*/\n\n\t#define NUM_SAMPLES 5\n\n\t// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha\n\tfloat contrast( vec4 a, vec4 b ) {\n\t\t\tvec4 diff = abs( a - b );\n\t\t\treturn max( max( max( diff.r, diff.g ), diff.b ), diff.a );\n\t}\n\n\t/*============================================================================\n\n\t\t\t\t\t\t\t\t\tFXAA3 QUALITY - PC\n\n\t============================================================================*/\n\n\t/*--------------------------------------------------------------------------*/\n\tvec4 FxaaPixelShader(\n\t\t\tvec2 posM,\n\t\t\tsampler2D tex,\n\t\t\tvec2 fxaaQualityRcpFrame,\n\t\t\tfloat fxaaQualityEdgeThreshold,\n\t\t\tfloat fxaaQualityinvEdgeThreshold\n\t) {\n\t\t\tvec4 rgbaM = FxaaTexTop(tex, posM);\n\t\t\tvec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\t// . S .\n\t\t\t// W M E\n\t\t\t// . N .\n\n\t\t\tbool earlyExit = max( max( max(\n\t\t\t\t\tcontrast( rgbaM, rgbaN ),\n\t\t\t\t\tcontrast( rgbaM, rgbaS ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaE ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaW ) )\n\t\t\t\t\t< fxaaQualityEdgeThreshold;\n\t\t\t// . 0 .\n\t\t\t// 0 0 0\n\t\t\t// . 0 .\n\n\t\t\t#if (FXAA_DISCARD == 1)\n\t\t\t\t\tif(earlyExit) FxaaDiscard;\n\t\t\t#else\n\t\t\t\t\tif(earlyExit) return rgbaM;\n\t\t\t#endif\n\n\t\t\tfloat contrastN = contrast( rgbaM, rgbaN );\n\t\t\tfloat contrastS = contrast( rgbaM, rgbaS );\n\t\t\tfloat contrastE = contrast( rgbaM, rgbaE );\n\t\t\tfloat contrastW = contrast( rgbaM, rgbaW );\n\n\t\t\tfloat relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );\n\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\tbool horzSpan = relativeVContrast > 0.;\n\t\t\t// . 1 .\n\t\t\t// 0 0 0\n\t\t\t// . 1 .\n\n\t\t\t// 45 deg edge detection and corners of objects, aka V/H contrast is too similar\n\t\t\tif( abs( relativeVContrast ) < .3 ) {\n\t\t\t\t\t// locate the edge\n\t\t\t\t\tvec2 dirToEdge;\n\t\t\t\t\tdirToEdge.x = contrastE > contrastW ? 1. : -1.;\n\t\t\t\t\tdirToEdge.y = contrastS > contrastN ? 1. : -1.;\n\t\t\t\t\t// . 2 .      . 1 .\n\t\t\t\t\t// 1 0 2  ~=  0 0 1\n\t\t\t\t\t// . 1 .      . 0 .\n\n\t\t\t\t\t// tap 2 pixels and see which ones are \"outside\" the edge, to\n\t\t\t\t\t// determine if the edge is vertical or horizontal\n\n\t\t\t\t\tvec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\t\tfloat matchAlongH = contrast( rgbaM, rgbaAlongH );\n\t\t\t\t\t// . 1 .\n\t\t\t\t\t// 0 0 1\n\t\t\t\t\t// . 0 H\n\n\t\t\t\t\tvec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\t\tfloat matchAlongV = contrast( rgbaM, rgbaAlongV );\n\t\t\t\t\t// V 1 .\n\t\t\t\t\t// 0 0 1\n\t\t\t\t\t// . 0 .\n\n\t\t\t\t\trelativeVContrast = matchAlongV - matchAlongH;\n\t\t\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\t\t\tif( abs( relativeVContrast ) < .3 ) { // 45 deg edge\n\t\t\t\t\t\t\t// 1 1 .\n\t\t\t\t\t\t\t// 0 0 1\n\t\t\t\t\t\t\t// . 0 1\n\n\t\t\t\t\t\t\t// do a simple blur\n\t\t\t\t\t\t\treturn mix(\n\t\t\t\t\t\t\t\t\trgbaM,\n\t\t\t\t\t\t\t\t\t(rgbaN + rgbaS + rgbaE + rgbaW) * .25,\n\t\t\t\t\t\t\t\t\t.4\n\t\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\thorzSpan = relativeVContrast > 0.;\n\t\t\t}\n\n\t\t\tif(!horzSpan) rgbaN = rgbaW;\n\t\t\tif(!horzSpan) rgbaS = rgbaE;\n\t\t\t// . 0 .      1\n\t\t\t// 1 0 1  ->  0\n\t\t\t// . 0 .      1\n\n\t\t\tbool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );\n\t\t\tif(!pairN) rgbaN = rgbaS;\n\n\t\t\tvec2 offNP;\n\t\t\toffNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n\t\t\toffNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n\n\t\t\tbool doneN = false;\n\t\t\tbool doneP = false;\n\n\t\t\tfloat nDist = 0.;\n\t\t\tfloat pDist = 0.;\n\n\t\t\tvec2 posN = posM;\n\t\t\tvec2 posP = posM;\n\n\t\t\tint iterationsUsed = 0;\n\t\t\tint iterationsUsedN = 0;\n\t\t\tint iterationsUsedP = 0;\n\t\t\tfor( int i = 0; i < NUM_SAMPLES; i++ ) {\n\t\t\t\t\titerationsUsed = i;\n\n\t\t\t\t\tfloat increment = float(i + 1);\n\n\t\t\t\t\tif(!doneN) {\n\t\t\t\t\t\t\tnDist += increment;\n\t\t\t\t\t\t\tposN = posM + offNP * nDist;\n\t\t\t\t\t\t\tvec4 rgbaEndN = FxaaTexTop(tex, posN.xy);\n\t\t\t\t\t\t\tdoneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );\n\t\t\t\t\t\t\titerationsUsedN = i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!doneP) {\n\t\t\t\t\t\t\tpDist += increment;\n\t\t\t\t\t\t\tposP = posM - offNP * pDist;\n\t\t\t\t\t\t\tvec4 rgbaEndP = FxaaTexTop(tex, posP.xy);\n\t\t\t\t\t\t\tdoneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );\n\t\t\t\t\t\t\titerationsUsedP = i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(doneN || doneP) break;\n\t\t\t}\n\n\n\t\t\tif ( !doneP && !doneN ) return rgbaM; // failed to find end of edge\n\n\t\t\tfloat dist = min(\n\t\t\t\t\tdoneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,\n\t\t\t\t\tdoneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.\n\t\t\t);\n\n\t\t\t// hacky way of reduces blurriness of mostly diagonal edges\n\t\t\t// but reduces AA quality\n\t\t\tdist = pow(dist, .5);\n\n\t\t\tdist = 1. - dist;\n\n\t\t\treturn mix(\n\t\t\t\t\trgbaM,\n\t\t\t\t\trgbaN,\n\t\t\t\t\tdist * .5\n\t\t\t);\n\t}\n\n\tvoid main() {\n\t\t\tconst float edgeDetectionQuality = .2;\n\t\t\tconst float invEdgeDetectionQuality = 1. / edgeDetectionQuality;\n\n\t\t\tgl_FragColor = FxaaPixelShader(\n\t\t\t\t\tvUv,\n\t\t\t\t\ttDiffuse,\n\t\t\t\t\tresolution,\n\t\t\t\t\tedgeDetectionQuality, // [0,1] contrast needed, otherwise early discard\n\t\t\t\t\tinvEdgeDetectionQuality\n\t\t\t);\n\n\t}\n\t"},W={uniforms:{tDiffuse:{value:null}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tfloat l = linearToRelativeLuminance( texel.rgb );\n\n\t\t\tgl_FragColor = vec4( l, l, l, texel.w );\n\n\t\t}"},j={uniforms:{tDiffuse:{value:null},resolution:{value:new m.Vector2}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec2 resolution;\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec2 texel = vec2( 1.0 / resolution.x, 1.0 / resolution.y );\n\n\t\t// kernel definition (in glsl matrices are filled in column-major order)\n\n\t\t\tconst mat3 Gx = mat3( -1, -2, -1, 0, 0, 0, 1, 2, 1 ); // x direction kernel\n\t\t\tconst mat3 Gy = mat3( -1, 0, 1, -2, 0, 2, -1, 0, 1 ); // y direction kernel\n\n\t\t// fetch the 3x3 neighbourhood of a fragment\n\n\t\t// first column\n\n\t\t\tfloat tx0y0 = texture2D( tDiffuse, vUv + texel * vec2( -1, -1 ) ).r;\n\t\t\tfloat tx0y1 = texture2D( tDiffuse, vUv + texel * vec2( -1,  0 ) ).r;\n\t\t\tfloat tx0y2 = texture2D( tDiffuse, vUv + texel * vec2( -1,  1 ) ).r;\n\n\t\t// second column\n\n\t\t\tfloat tx1y0 = texture2D( tDiffuse, vUv + texel * vec2(  0, -1 ) ).r;\n\t\t\tfloat tx1y1 = texture2D( tDiffuse, vUv + texel * vec2(  0,  0 ) ).r;\n\t\t\tfloat tx1y2 = texture2D( tDiffuse, vUv + texel * vec2(  0,  1 ) ).r;\n\n\t\t// third column\n\n\t\t\tfloat tx2y0 = texture2D( tDiffuse, vUv + texel * vec2(  1, -1 ) ).r;\n\t\t\tfloat tx2y1 = texture2D( tDiffuse, vUv + texel * vec2(  1,  0 ) ).r;\n\t\t\tfloat tx2y2 = texture2D( tDiffuse, vUv + texel * vec2(  1,  1 ) ).r;\n\n\t\t// gradient value in x direction\n\n\t\t\tfloat valueGx = Gx[0][0] * tx0y0 + Gx[1][0] * tx1y0 + Gx[2][0] * tx2y0 +\n\t\t\t\tGx[0][1] * tx0y1 + Gx[1][1] * tx1y1 + Gx[2][1] * tx2y1 +\n\t\t\t\tGx[0][2] * tx0y2 + Gx[1][2] * tx1y2 + Gx[2][2] * tx2y2;\n\n\t\t// gradient value in y direction\n\n\t\t\tfloat valueGy = Gy[0][0] * tx0y0 + Gy[1][0] * tx1y0 + Gy[2][0] * tx2y0 +\n\t\t\t\tGy[0][1] * tx0y1 + Gy[1][1] * tx1y1 + Gy[2][1] * tx2y1 +\n\t\t\t\tGy[0][2] * tx0y2 + Gy[1][2] * tx1y2 + Gy[2][2] * tx2y2;\n\n\t\t// magnitute of the total gradient\n\n\t\t\tfloat G = sqrt( ( valueGx * valueGx ) + ( valueGy * valueGy ) );\n\n\t\t\tgl_FragColor = vec4( vec3( G ), 1 );\n\n\t\t}"},Y={uniforms:{tDiffuse:{value:null},resolution:{value:null},pixelSize:{value:1}},vertexShader:"\n\n\t\tvarying highp vec2 vUv;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvUv = uv;\n\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float pixelSize;\n\t\tuniform vec2 resolution;\n\n\t\tvarying highp vec2 vUv;\n\n\t\tvoid main(){\n\n\t\t\tvec2 dxy = pixelSize / resolution;\n\t\t\tvec2 coord = dxy * floor( vUv / dxy );\n\t\t\tgl_FragColor = texture2D(tDiffuse, coord);\n\n\t\t}"},X={uniforms:{tDiffuse:{value:null},time:{value:0},nIntensity:{value:.5},sIntensity:{value:.05},sCount:{value:4096},grayscale:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\n\t\t// control parameter\n\t\tuniform float time;\n\n\t\tuniform bool grayscale;\n\n\t\t// noise effect intensity value (0 = no effect, 1 = full effect)\n\t\tuniform float nIntensity;\n\n\t\t// scanlines effect intensity value (0 = no effect, 1 = full effect)\n\t\tuniform float sIntensity;\n\n\t\t// scanlines effect count value (0 = no effect, 4096 = full effect)\n\t\tuniform float sCount;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t// sample the source\n\t\t\tvec4 cTextureScreen = texture2D( tDiffuse, vUv );\n\n\t\t// make some noise\n\t\t\tfloat dx = rand( vUv + time );\n\n\t\t// add noise\n\t\t\tvec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx, 0.0, 1.0 );\n\n\t\t// get us a sine and cosine\n\t\t\tvec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );\n\n\t\t// add scanlines\n\t\t\tcResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;\n\n\t\t// interpolate between source and result by intensity\n\t\t\tcResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );\n\n\t\t// convert to grayscale if desired\n\t\t\tif( grayscale ) {\n\n\t\t\t\tcResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );\n\n\t\t\t}\n\n\t\t\tgl_FragColor =  vec4( cResult, cTextureScreen.a );\n\n\t\t}"},q={uniforms:{tDiffuse:{value:null},hue:{value:0},saturation:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float hue;\n\t\tuniform float saturation;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\n\t\t\t// hue\n\t\t\tfloat angle = hue * 3.14159265;\n\t\t\tfloat s = sin(angle), c = cos(angle);\n\t\t\tvec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;\n\t\t\tfloat len = length(gl_FragColor.rgb);\n\t\t\tgl_FragColor.rgb = vec3(\n\t\t\t\tdot(gl_FragColor.rgb, weights.xyz),\n\t\t\t\tdot(gl_FragColor.rgb, weights.zxy),\n\t\t\t\tdot(gl_FragColor.rgb, weights.yzx)\n\t\t\t);\n\n\t\t\t// saturation\n\t\t\tfloat average = (gl_FragColor.r + gl_FragColor.g + gl_FragColor.b) / 3.0;\n\t\t\tif (saturation > 0.0) {\n\t\t\t\tgl_FragColor.rgb += (average - gl_FragColor.rgb) * (1.0 - 1.0 / (1.001 - saturation));\n\t\t\t} else {\n\t\t\t\tgl_FragColor.rgb += (average - gl_FragColor.rgb) * (-saturation);\n\t\t\t}\n\n\t\t}"};class J extends D{constructor(t,e,i,n,r){super(),this.scene=t,this.camera=e,this.overrideMaterial=i,this.clearColor=n,this.clearAlpha=void 0!==r?r:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new m.Color}render(t,e,i){const n=t.autoClear;let r,s;t.autoClear=!1,void 0!==this.overrideMaterial&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),r=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:i),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,r),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=s),t.autoClear=n}}class Q{constructor(t=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let e=0;e<256;e++)this.p[e]=Math.floor(256*t.random());this.perm=[];for(let t=0;t<512;t++)this.perm[t]=this.p[255&t];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(t,e,i){return t[0]*e+t[1]*i}dot3(t,e,i,n){return t[0]*e+t[1]*i+t[2]*n}dot4(t,e,i,n,r){return t[0]*e+t[1]*i+t[2]*n+t[3]*r}noise(t,e){let i,n,r;const s=(t+e)*(.5*(Math.sqrt(3)-1)),o=Math.floor(t+s),a=Math.floor(e+s),h=(3-Math.sqrt(3))/6,l=(o+a)*h,u=t-(o-l),c=e-(a-l);let d,p;u>c?(d=1,p=0):(d=0,p=1);const f=u-d+h,m=c-p+h,g=u-1+2*h,v=c-1+2*h,y=255&o,A=255&a,x=this.perm[y+this.perm[A]]%12,w=this.perm[y+d+this.perm[A+p]]%12,b=this.perm[y+1+this.perm[A+1]]%12;let S=.5-u*u-c*c;S<0?i=0:(S*=S,i=S*S*this.dot(this.grad3[x],u,c));let E=.5-f*f-m*m;E<0?n=0:(E*=E,n=E*E*this.dot(this.grad3[w],f,m));let T=.5-g*g-v*v;return T<0?r=0:(T*=T,r=T*T*this.dot(this.grad3[b],g,v)),70*(i+n+r)}noise3d(t,e,i){let n,r,s,o;const a=(t+e+i)*(1/3),h=Math.floor(t+a),l=Math.floor(e+a),u=Math.floor(i+a),c=1/6,d=(h+l+u)*c,p=t-(h-d),f=e-(l-d),m=i-(u-d);let g,v,y,A,x,w;p>=f?f>=m?(g=1,v=0,y=0,A=1,x=1,w=0):p>=m?(g=1,v=0,y=0,A=1,x=0,w=1):(g=0,v=0,y=1,A=1,x=0,w=1):f<m?(g=0,v=0,y=1,A=0,x=1,w=1):p<m?(g=0,v=1,y=0,A=0,x=1,w=1):(g=0,v=1,y=0,A=1,x=1,w=0);const b=p-g+c,S=f-v+c,E=m-y+c,T=p-A+2*c,_=f-x+2*c,M=m-w+2*c,C=p-1+.5,P=f-1+.5,R=m-1+.5,O=255&h,L=255&l,I=255&u,D=this.perm[O+this.perm[L+this.perm[I]]]%12,B=this.perm[O+g+this.perm[L+v+this.perm[I+y]]]%12,k=this.perm[O+A+this.perm[L+x+this.perm[I+w]]]%12,F=this.perm[O+1+this.perm[L+1+this.perm[I+1]]]%12;let N=.6-p*p-f*f-m*m;N<0?n=0:(N*=N,n=N*N*this.dot3(this.grad3[D],p,f,m));let z=.6-b*b-S*S-E*E;z<0?r=0:(z*=z,r=z*z*this.dot3(this.grad3[B],b,S,E));let U=.6-T*T-_*_-M*M;U<0?s=0:(U*=U,s=U*U*this.dot3(this.grad3[k],T,_,M));let G=.6-C*C-P*P-R*R;return G<0?o=0:(G*=G,o=G*G*this.dot3(this.grad3[F],C,P,R)),32*(n+r+s+o)}noise4d(t,e,i,n){const r=this.grad4,s=this.simplex,o=this.perm,a=(Math.sqrt(5)-1)/4,h=(5-Math.sqrt(5))/20;let l,u,c,d,p;const f=(t+e+i+n)*a,m=Math.floor(t+f),g=Math.floor(e+f),v=Math.floor(i+f),y=Math.floor(n+f),A=(m+g+v+y)*h,x=t-(m-A),w=e-(g-A),b=i-(v-A),S=n-(y-A),E=(x>w?32:0)+(x>b?16:0)+(w>b?8:0)+(x>S?4:0)+(w>S?2:0)+(b>S?1:0),T=s[E][0]>=3?1:0,_=s[E][1]>=3?1:0,M=s[E][2]>=3?1:0,C=s[E][3]>=3?1:0,P=s[E][0]>=2?1:0,R=s[E][1]>=2?1:0,O=s[E][2]>=2?1:0,L=s[E][3]>=2?1:0,I=s[E][0]>=1?1:0,D=s[E][1]>=1?1:0,B=s[E][2]>=1?1:0,k=s[E][3]>=1?1:0,F=x-T+h,N=w-_+h,z=b-M+h,U=S-C+h,G=x-P+2*h,V=w-R+2*h,H=b-O+2*h,W=S-L+2*h,j=x-I+3*h,Y=w-D+3*h,X=b-B+3*h,q=S-k+3*h,J=x-1+4*h,Q=w-1+4*h,K=b-1+4*h,Z=S-1+4*h,$=255&m,tt=255&g,et=255&v,it=255&y,nt=o[$+o[tt+o[et+o[it]]]]%32,rt=o[$+T+o[tt+_+o[et+M+o[it+C]]]]%32,st=o[$+P+o[tt+R+o[et+O+o[it+L]]]]%32,ot=o[$+I+o[tt+D+o[et+B+o[it+k]]]]%32,at=o[$+1+o[tt+1+o[et+1+o[it+1]]]]%32;let ht=.6-x*x-w*w-b*b-S*S;ht<0?l=0:(ht*=ht,l=ht*ht*this.dot4(r[nt],x,w,b,S));let lt=.6-F*F-N*N-z*z-U*U;lt<0?u=0:(lt*=lt,u=lt*lt*this.dot4(r[rt],F,N,z,U));let ut=.6-G*G-V*V-H*H-W*W;ut<0?c=0:(ut*=ut,c=ut*ut*this.dot4(r[st],G,V,H,W));let ct=.6-j*j-Y*Y-X*X-q*q;ct<0?d=0:(ct*=ct,d=ct*ct*this.dot4(r[ot],j,Y,X,q));let dt=.6-J*J-Q*Q-K*K-Z*Z;return dt<0?p=0:(dt*=dt,p=dt*dt*this.dot4(r[at],J,Q,K,Z)),27*(l+u+c+d+p)}}const K={defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new m.Vector2},cameraProjectionMatrix:{value:new m.Matrix4},cameraInverseProjectionMatrix:{value:new m.Matrix4},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tNormal;\n\t\tuniform sampler2D tDepth;\n\t\tuniform sampler2D tNoise;\n\n\t\tuniform vec3 kernel[ KERNEL_SIZE ];\n\n\t\tuniform vec2 resolution;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform mat4 cameraProjectionMatrix;\n\t\tuniform mat4 cameraInverseProjectionMatrix;\n\n\t\tuniform float kernelRadius;\n\t\tuniform float minDistance; // avoid artifacts caused by neighbour fragments with minimal depth difference\n\t\tuniform float maxDistance; // avoid the influence of fragments which are too far away\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t}\n\n\t\tfloat getLinearDepth( const in vec2 screenPosition ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tvec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\n\n\t\t\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\n\n\t\t\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\n\n\t\t\tclipPosition *= clipW; // unprojection.\n\n\t\t\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\n\n\t\t}\n\n\t\tvec3 getViewNormal( const in vec2 screenPosition ) {\n\n\t\t\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = getDepth( vUv );\n\t\t\tfloat viewZ = getViewZ( depth );\n\n\t\t\tvec3 viewPosition = getViewPosition( vUv, depth, viewZ );\n\t\t\tvec3 viewNormal = getViewNormal( vUv );\n\n\t\t\tvec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );\n\t\t\tvec3 random = vec3( texture2D( tNoise, vUv * noiseScale ).r );\n\n\t\t\t// compute matrix used to reorient a kernel vector\n\n\t\t\tvec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );\n\t\t\tvec3 bitangent = cross( viewNormal, tangent );\n\t\t\tmat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );\n\n\t\t float occlusion = 0.0;\n\n\t\t for ( int i = 0; i < KERNEL_SIZE; i ++ ) {\n\n\t\t\t\tvec3 sampleVector = kernelMatrix * kernel[ i ]; // reorient sample vector in view space\n\t\t\t\tvec3 samplePoint = viewPosition + ( sampleVector * kernelRadius ); // calculate sample point\n\n\t\t\t\tvec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 ); // project point and calculate NDC\n\t\t\t\tsamplePointNDC /= samplePointNDC.w;\n\n\t\t\t\tvec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5; // compute uv coordinates\n\n\t\t\t\tfloat realDepth = getLinearDepth( samplePointUv ); // get linear depth from depth texture\n\t\t\t\tfloat sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar ); // compute linear depth of the sample view Z value\n\t\t\t\tfloat delta = sampleDepth - realDepth;\n\n\t\t\t\tif ( delta > minDistance && delta < maxDistance ) { // if fragment is before sample point, increase occlusion\n\n\t\t\t\t\tocclusion += 1.0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tocclusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );\n\n\t\t\tgl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );\n\n\t\t}"},Z={defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:"varying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"uniform sampler2D tDepth;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tfloat getLinearDepth( const in vec2 screenPosition ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = getLinearDepth( vUv );\n\t\t\tgl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );\n\n\t\t}"},$={uniforms:{tDiffuse:{value:null},resolution:{value:new m.Vector2}},vertexShader:"varying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"uniform sampler2D tDiffuse;\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec2 texelSize = ( 1.0 / resolution );\n\t\t\tfloat result = 0.0;\n\n\t\t\tfor ( int i = - 2; i <= 2; i ++ ) {\n\n\t\t\t\tfor ( int j = - 2; j <= 2; j ++ ) {\n\n\t\t\t\t\tvec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;\n\t\t\t\t\tresult += texture2D( tDiffuse, vUv + offset ).r;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );\n\n\t\t}"};class tt extends D{constructor(t,e,i,n){super(),this.width=void 0!==i?i:512,this.height=void 0!==n?n:512,this.clear=!0,this.camera=e,this.scene=t,this.kernelRadius=8,this.kernelSize=32,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=.005,this.maxDistance=.1,this._visibilityCache=new Map,this.generateSampleKernel(),this.generateRandomKernelRotations();const r=new m.DepthTexture;r.format=m.DepthStencilFormat,r.type=m.UnsignedInt248Type,this.beautyRenderTarget=new m.WebGLRenderTarget(this.width,this.height),this.normalRenderTarget=new m.WebGLRenderTarget(this.width,this.height,{minFilter:m.NearestFilter,magFilter:m.NearestFilter,depthTexture:r}),this.ssaoRenderTarget=new m.WebGLRenderTarget(this.width,this.height),this.blurRenderTarget=this.ssaoRenderTarget.clone(),this.ssaoMaterial=new m.ShaderMaterial({defines:Object.assign({},K.defines),uniforms:m.UniformsUtils.clone(K.uniforms),vertexShader:K.vertexShader,fragmentShader:K.fragmentShader,blending:m.NoBlending}),this.ssaoMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new m.MeshNormalMaterial,this.normalMaterial.blending=m.NoBlending,this.blurMaterial=new m.ShaderMaterial({defines:Object.assign({},$.defines),uniforms:m.UniformsUtils.clone($.uniforms),vertexShader:$.vertexShader,fragmentShader:$.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new m.ShaderMaterial({defines:Object.assign({},Z.defines),uniforms:m.UniformsUtils.clone(Z.uniforms),vertexShader:Z.vertexShader,fragmentShader:Z.fragmentShader,blending:m.NoBlending}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new m.ShaderMaterial({uniforms:m.UniformsUtils.clone(I.uniforms),vertexShader:I.vertexShader,fragmentShader:I.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:m.DstColorFactor,blendDst:m.ZeroFactor,blendEquation:m.AddEquation,blendSrcAlpha:m.DstAlphaFactor,blendDstAlpha:m.ZeroFactor,blendEquationAlpha:m.AddEquation}),this.fsQuad=new F(null),this.originalClearColor=new m.Color}dispose(){this.beautyRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(t,e){switch(!1===t.capabilities.isWebGL2&&(this.noiseTexture.format=m.LuminanceFormat),t.setRenderTarget(this.beautyRenderTarget),t.clear(),t.render(this.scene,this.camera),this.overrideVisibility(),this.renderOverride(t,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(t,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(t,this.blurMaterial,this.blurRenderTarget),this.output){case tt.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=m.NoBlending,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e);break;case tt.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=m.NoBlending,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e);break;case tt.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=m.NoBlending,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e);break;case tt.OUTPUT.Depth:this.renderPass(t,this.depthRenderMaterial,this.renderToScreen?null:e);break;case tt.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=m.NoBlending,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e);break;case tt.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=m.NoBlending,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e),this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=m.CustomBlending,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e)}}renderPass(t,e,i,n,r){t.getClearColor(this.originalClearColor);const s=t.getClearAlpha(),o=t.autoClear;t.setRenderTarget(i),t.autoClear=!1,null!=n&&(t.setClearColor(n),t.setClearAlpha(r||0),t.clear()),this.fsQuad.material=e,this.fsQuad.render(t),t.autoClear=o,t.setClearColor(this.originalClearColor),t.setClearAlpha(s)}renderOverride(t,e,i,n,r){t.getClearColor(this.originalClearColor);const s=t.getClearAlpha(),o=t.autoClear;t.setRenderTarget(i),t.autoClear=!1,n=e.clearColor||n,r=e.clearAlpha||r,null!=n&&(t.setClearColor(n),t.setClearAlpha(r||0),t.clear()),this.scene.overrideMaterial=e,t.render(this.scene,this.camera),this.scene.overrideMaterial=null,t.autoClear=o,t.setClearColor(this.originalClearColor),t.setClearAlpha(s)}setSize(t,e){this.width=t,this.height=e,this.beautyRenderTarget.setSize(t,e),this.ssaoRenderTarget.setSize(t,e),this.normalRenderTarget.setSize(t,e),this.blurRenderTarget.setSize(t,e),this.ssaoMaterial.uniforms.resolution.value.set(t,e),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(t,e)}generateSampleKernel(){const t=this.kernelSize,e=this.kernel;for(let i=0;i<t;i++){const n=new m.Vector3;n.x=2*Math.random()-1,n.y=2*Math.random()-1,n.z=Math.random(),n.normalize();let r=i/t;r=m.MathUtils.lerp(.1,1,r*r),n.multiplyScalar(r),e.push(n)}}generateRandomKernelRotations(){const t=new Q,e=new Float32Array(16);for(let i=0;i<16;i++){const n=2*Math.random()-1,r=2*Math.random()-1,s=0;e[i]=t.noise3d(n,r,s)}this.noiseTexture=new m.DataTexture(e,4,4,m.RedFormat,m.FloatType),this.noiseTexture.wrapS=m.RepeatWrapping,this.noiseTexture.wrapT=m.RepeatWrapping,this.noiseTexture.needsUpdate=!0}overrideVisibility(){const t=this.scene,e=this._visibilityCache;t.traverse((function(t){e.set(t,t.visible),(t.isPoints||t.isLine)&&(t.visible=!1)}))}restoreVisibility(){const t=this.scene,e=this._visibilityCache;t.traverse((function(t){const i=e.get(t);t.visible=i})),e.clear()}}tt.OUTPUT={Default:0,SSAO:1,Blur:2,Beauty:3,Depth:4,Normal:5};const et={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new m.Color(0)},defaultOpacity:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n\t\t\tfloat v = dot( texel.xyz, luma );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}"};class it extends D{constructor(t,e,i,n){super(),this.strength=void 0!==e?e:1,this.radius=i,this.threshold=n,this.resolution=void 0!==t?new m.Vector2(t.x,t.y):new m.Vector2(256,256),this.clearColor=new m.Color(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let r=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);this.renderTargetBright=new m.WebGLRenderTarget(r,s),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let t=0;t<this.nMips;t++){const e=new m.WebGLRenderTarget(r,s);e.texture.name="UnrealBloomPass.h"+t,e.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(e);const i=new m.WebGLRenderTarget(r,s);i.texture.name="UnrealBloomPass.v"+t,i.texture.generateMipmaps=!1,this.renderTargetsVertical.push(i),r=Math.round(r/2),s=Math.round(s/2)}const o=et;this.highPassUniforms=m.UniformsUtils.clone(o.uniforms),this.highPassUniforms.luminosityThreshold.value=n,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new m.ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const a=[3,5,7,9,11];r=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);for(let t=0;t<this.nMips;t++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(a[t])),this.separableBlurMaterials[t].uniforms.texSize.value=new m.Vector2(r,s),r=Math.round(r/2),s=Math.round(s/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=e,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new m.Vector3(1,1,1),new m.Vector3(1,1,1),new m.Vector3(1,1,1),new m.Vector3(1,1,1),new m.Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const h=I;this.copyUniforms=m.UniformsUtils.clone(h.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new m.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:h.vertexShader,fragmentShader:h.fragmentShader,blending:m.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new m.Color,this.oldClearAlpha=1,this.basic=new m.MeshBasicMaterial,this.fsQuad=new F(null)}dispose(){for(let t=0;t<this.renderTargetsHorizontal.length;t++)this.renderTargetsHorizontal[t].dispose();for(let t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose()}setSize(t,e){let i=Math.round(t/2),n=Math.round(e/2);this.renderTargetBright.setSize(i,n);for(let t=0;t<this.nMips;t++)this.renderTargetsHorizontal[t].setSize(i,n),this.renderTargetsVertical[t].setSize(i,n),this.separableBlurMaterials[t].uniforms.texSize.value=new m.Vector2(i,n),i=Math.round(i/2),n=Math.round(n/2)}render(t,e,i,n,r){t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();const s=t.autoClear;t.autoClear=!1,t.setClearColor(this.clearColor,0),r&&t.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=i.texture,t.setRenderTarget(null),t.clear(),this.fsQuad.render(t)),this.highPassUniforms.tDiffuse.value=i.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,t.setRenderTarget(this.renderTargetBright),t.clear(),this.fsQuad.render(t);let o=this.renderTargetBright;for(let e=0;e<this.nMips;e++)this.fsQuad.material=this.separableBlurMaterials[e],this.separableBlurMaterials[e].uniforms.colorTexture.value=o.texture,this.separableBlurMaterials[e].uniforms.direction.value=it.BlurDirectionX,t.setRenderTarget(this.renderTargetsHorizontal[e]),t.clear(),this.fsQuad.render(t),this.separableBlurMaterials[e].uniforms.colorTexture.value=this.renderTargetsHorizontal[e].texture,this.separableBlurMaterials[e].uniforms.direction.value=it.BlurDirectionY,t.setRenderTarget(this.renderTargetsVertical[e]),t.clear(),this.fsQuad.render(t),o=this.renderTargetsVertical[e];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,t.setRenderTarget(this.renderTargetsHorizontal[0]),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,r&&t.state.buffers.stencil.setTest(!0),this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(i),this.fsQuad.render(t)),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=s}getSeperableBlurMaterial(t){return new m.ShaderMaterial({defines:{KERNEL_RADIUS:t,SIGMA:t},uniforms:{colorTexture:{value:null},texSize:{value:new m.Vector2(.5,.5)},direction:{value:new m.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat fSigma = float(SIGMA);\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = float(i);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\n\t\t\t\t\t\tweightSum += 2.0 * w;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})}getCompositeMaterial(t){return new m.ShaderMaterial({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform sampler2D dirtTexture;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}"})}}it.BlurDirectionX=new m.Vector2(1,0),it.BlurDirectionY=new m.Vector2(0,1);const nt={uniforms:{damp:{value:.96},tOld:{value:null},tNew:{value:null}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float damp;\n\n\t\tuniform sampler2D tOld;\n\t\tuniform sampler2D tNew;\n\n\t\tvarying vec2 vUv;\n\n\t\tvec4 when_gt( vec4 x, float y ) {\n\n\t\t\treturn max( sign( x - y ), 0.0 );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 texelOld = texture2D( tOld, vUv );\n\t\t\tvec4 texelNew = texture2D( tNew, vUv );\n\n\t\t\ttexelOld *= damp * when_gt( texelOld, 0.1 );\n\n\t\t\tgl_FragColor = max(texelNew, texelOld);\n\n\t\t}"};class rt extends D{constructor(t=.96){super(),this.shader=nt,this.uniforms=m.UniformsUtils.clone(this.shader.uniforms),this.uniforms.damp.value=t,this.textureComp=new m.WebGLRenderTarget(window.innerWidth,window.innerHeight,{magFilter:m.NearestFilter}),this.textureOld=new m.WebGLRenderTarget(window.innerWidth,window.innerHeight,{magFilter:m.NearestFilter}),this.shaderMaterial=new m.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.shader.vertexShader,fragmentShader:this.shader.fragmentShader}),this.compFsQuad=new F(this.shaderMaterial);const e=new m.MeshBasicMaterial;this.copyFsQuad=new F(e)}render(t,e,i){this.uniforms.tOld.value=this.textureOld.texture,this.uniforms.tNew.value=i.texture,t.setRenderTarget(this.textureComp),this.compFsQuad.render(t),this.copyFsQuad.material.map=this.textureComp.texture,this.renderToScreen?(t.setRenderTarget(null),this.copyFsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(),this.copyFsQuad.render(t));const n=this.textureOld;this.textureOld=this.textureComp,this.textureComp=n}setSize(t,e){this.textureComp.setSize(t,e),this.textureOld.setSize(t,e)}}var st={uniforms:{tDiffuse:{value:null},outlineColor:{value:new m.Color(0)},edgeSens:{value:.5},magnitude:{value:.6},resolution:{value:new m.Vector2(800,600)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","uniform vec3 outlineColor;","uniform float edgeSens;","uniform float magnitude;","varying vec2 vUv;","\n        float applyKernel(mat3 gx, mat3 gy, sampler2D sampler, vec2 uv) {\n            float final = 0.0;\n            \n           \n            float horizontal = 0.0;\n            float vertical = 0.0;\n            \n            for (int i = 0; i < 3; i++) {\n                for (int j = 0; j < 3; j++) {\n                  vec2 d = vec2(float(i), float(j)) / resolution;\n                  float averagePixel = dot(texture2D(sampler, uv+d).xyz, vec3(edgeSens));\n                    \n                  horizontal += averagePixel * gx[i][j];\n                  vertical += averagePixel * gy[i][j];\n                }\n            }\n            \n            final = sqrt(horizontal * horizontal + vertical * vertical);\n            return final;\n        }\n        ","","void main() {","\n            mat3 Gx = mat3(-1.0, 0.0, 1.0,\n                -2.0, 0.0, 2.0,\n                -1.0, 0.0, 1.0);\n\n            mat3 Gy = mat3(-1.0, -2.0, -1.0,\n                0.0, 0.0, 0.0,\n                1.0, 2.0, 1.0);\n            \n            vec2 uv = vUv;\n\n            vec4 color = texture2D(tDiffuse, uv);\n            float edgeIntensity = applyKernel(Gx, Gy, tDiffuse, uv);\n            \n            vec4 edgeColor = mix(        \n                vec4(outlineColor, 1.0),\n                color,\n                1.0-edgeIntensity);\n            \n            color = mix(\n                color,\n                edgeColor,\n                1.0);\n            \n            gl_FragColor = edgeColor;\n\n        ","}"].join("\n")},ot={uniforms:{tDiffuse:{value:null},offset:{value:1},color:{value:new m.Color(0)},animateRatio:{value:.5},animateSpeed:{value:.1},time:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float offset;","uniform float animateRatio;","uniform float animateSpeed;","uniform float time;","uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = vec4(1.0, 1.0, 1.0, 1.0);","\tvec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( offset - animateRatio * abs(sin(time * animateSpeed)) );","\n            vec3 newColor = mix( texel.rgb, vec3(0.0, 0.0, 0.0), dot( uv, uv ) );\n\n            newColor.r = max(0.0, newColor.r);\n            newColor.g = max(0.0, newColor.g);\n            newColor.b = max(0.0, newColor.b);\n\n            // newColor.r = min(1.0, newColor.r);\n            // newColor.g = min(1.0, newColor.g);\n            // newColor.b = min(1.0, newColor.b);\n\n            float rat = min(newColor.r, newColor.g);\n            rat = min(rat, newColor.b);\n\n            vec4 defColor = texture2D( tDiffuse, vUv );\n\n\n            vec3 tempColor = vec3(\n                color.r * (1.0 - rat) + defColor.r * newColor.r,\n                color.g * (1.0 - rat) + defColor.g * newColor.g,\n                color.b * (1.0 - rat) + defColor.b * newColor.b\n            );    \n            \n            // tempColor = vec3(\n            //     newColor.r,\n            //     newColor.g,\n            //     newColor.b\n            // ); \n            \n            gl_FragColor = vec4( tempColor, 1.0 );             \n            \n\n         ","}"].join("\n")};const at={uniforms:{tDiffuse:{value:null}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 tex = texture2D( tDiffuse, vUv );\n\n\t\t\tgl_FragColor = LinearTosRGB( tex );\n\n\t\t}"};function ht(t){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ut(t,e){return(ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=pt(t);if(e){var r=pt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return dt(this,i)}}function dt(t,e){if(e&&("object"===ht(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function pt(t){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ft,mt,gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ut(t,e)}(s,t);var e,i,n,r=ct(s);function s(t,e,i,n){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(o=r.call(this)).renderScene=e,o.renderCamera=i,o.selectedObjects=void 0!==n?n:[],o.visibleEdgeColor=new m.Color(1,1,1),o.hiddenEdgeColor=new m.Color(.1,.04,.02),o.edgeGlow=0,o.usePatternTexture=!1,o.edgeThickness=1,o.edgeStrength=3,o.downSampleRatio=2,o.pulsePeriod=0,o._visibilityCache=new Map,o.resolution=void 0!==t?new m.Vector2(t.x,t.y):new m.Vector2(256,256);var a={minFilter:m.LinearFilter,magFilter:m.LinearFilter,format:m.RGBAFormat},h=Math.round(o.resolution.x/o.downSampleRatio),l=Math.round(o.resolution.y/o.downSampleRatio);o.maskBufferMaterial=new m.MeshBasicMaterial({color:16777215}),o.maskBufferMaterial.side=m.DoubleSide,o.renderTargetMaskBuffer=new m.WebGLRenderTarget(o.resolution.x,o.resolution.y,a),o.renderTargetMaskBuffer.texture.name="OutlinePass.mask",o.renderTargetMaskBuffer.texture.generateMipmaps=!1,o.depthMaterial=new m.MeshDepthMaterial,o.depthMaterial.side=m.DoubleSide,o.depthMaterial.depthPacking=m.RGBADepthPacking,o.depthMaterial.blending=m.NoBlending,o.prepareMaskMaterial=o.getPrepareMaskMaterial(),o.prepareMaskMaterial.side=m.DoubleSide,o.prepareMaskMaterial.fragmentShader=function(t,e){var i=e.isPerspectiveCamera?"perspective":"orthographic";return t.replace(/DEPTH_TO_VIEW_Z/g,i+"DepthToViewZ")}(o.prepareMaskMaterial.fragmentShader,o.renderCamera),o.renderTargetDepthBuffer=new m.WebGLRenderTarget(o.resolution.x,o.resolution.y,a),o.renderTargetDepthBuffer.texture.name="OutlinePass.depth",o.renderTargetDepthBuffer.texture.generateMipmaps=!1,o.renderTargetMaskDownSampleBuffer=new m.WebGLRenderTarget(h,l,a),o.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",o.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,o.renderTargetBlurBuffer1=new m.WebGLRenderTarget(h,l,a),o.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",o.renderTargetBlurBuffer1.texture.generateMipmaps=!1,o.renderTargetBlurBuffer2=new m.WebGLRenderTarget(Math.round(h/2),Math.round(l/2),a),o.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",o.renderTargetBlurBuffer2.texture.generateMipmaps=!1,o.edgeDetectionMaterial=o.getEdgeDetectionMaterial(),o.renderTargetEdgeBuffer1=new m.WebGLRenderTarget(h,l,a),o.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",o.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,o.renderTargetEdgeBuffer2=new m.WebGLRenderTarget(Math.round(h/2),Math.round(l/2),a),o.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",o.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;o.separableBlurMaterial1=o.getSeperableBlurMaterial(4),o.separableBlurMaterial1.uniforms.texSize.value.set(h,l),o.separableBlurMaterial1.uniforms.kernelRadius.value=1,o.separableBlurMaterial2=o.getSeperableBlurMaterial(4),o.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(h/2),Math.round(l/2)),o.separableBlurMaterial2.uniforms.kernelRadius.value=4,o.overlayMaterial=o.getOverlayMaterial();var u=I;return o.copyUniforms=m.UniformsUtils.clone(u.uniforms),o.copyUniforms.opacity.value=1,o.materialCopy=new m.ShaderMaterial({uniforms:o.copyUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,blending:m.NoBlending,depthTest:!1,depthWrite:!1,transparent:!0}),o.enabled=!0,o.needsSwap=!1,o._oldClearColor=new m.Color,o.oldClearAlpha=1,o.fsQuad=new F(null),o.tempPulseColor1=new m.Color,o.tempPulseColor2=new m.Color,o.textureMatrix=new m.Matrix4,o}return e=s,(i=[{key:"dispose",value:function(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()}},{key:"setSize",value:function(t,e){this.renderTargetMaskBuffer.setSize(t,e),this.renderTargetDepthBuffer.setSize(t,e);var i=Math.round(t/this.downSampleRatio),n=Math.round(e/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(i,n),this.renderTargetBlurBuffer1.setSize(i,n),this.renderTargetEdgeBuffer1.setSize(i,n),this.separableBlurMaterial1.uniforms.texSize.value.set(i,n),i=Math.round(i/2),n=Math.round(n/2),this.renderTargetBlurBuffer2.setSize(i,n),this.renderTargetEdgeBuffer2.setSize(i,n),this.separableBlurMaterial2.uniforms.texSize.value.set(i,n)}},{key:"changeVisibilityOfSelectedObjects",value:function(t){var e=this._visibilityCache;function i(i){i.isMesh&&(!0===t?i.visible=e.get(i):(e.set(i,i.visible),i.visible=t))}for(var n=0;n<this.selectedObjects.length;n++)this.selectedObjects[n].traverse(i)}},{key:"changeVisibilityOfNonSelectedObjects",value:function(t){var e=this._visibilityCache,i=[];function n(t){t.isMesh&&i.push(t)}for(var r=0;r<this.selectedObjects.length;r++)this.selectedObjects[r].traverse(n);this.renderScene.traverse((function(n){if(n.isMesh||n.isSprite){for(var r=!1,s=0;s<i.length;s++)if(i[s].id===n.id){r=!0;break}if(!1===r){var o=n.visible;!1!==t&&!0!==e.get(n)||(n.visible=t),e.set(n,o)}}else(n.isPoints||n.isLine)&&(!0===t?n.visible=e.get(n):(e.set(n,n.visible),n.visible=t))}))}},{key:"updateTextureMatrix",value:function(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}},{key:"render",value:function(t,e,i,n,r){if(this.selectedObjects.length>0){t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();var o=t.autoClear;t.autoClear=!1,r&&t.state.buffers.stencil.setTest(!1),t.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);var a=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,t.setRenderTarget(this.renderTargetDepthBuffer),t.clear(),t.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,t.setRenderTarget(this.renderTargetMaskBuffer),t.clear(),t.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=a,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,t.setRenderTarget(this.renderTargetMaskDownSampleBuffer),t.clear(),this.fsQuad.render(t),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){var h=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(h),this.tempPulseColor2.multiplyScalar(h)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,t.setRenderTarget(this.renderTargetEdgeBuffer1),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=s.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,t.setRenderTarget(this.renderTargetBlurBuffer1),t.clear(),this.fsQuad.render(t),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=s.BlurDirectionY,t.setRenderTarget(this.renderTargetEdgeBuffer1),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=s.BlurDirectionX,t.setRenderTarget(this.renderTargetBlurBuffer2),t.clear(),this.fsQuad.render(t),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=s.BlurDirectionY,t.setRenderTarget(this.renderTargetEdgeBuffer2),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,r&&t.state.buffers.stencil.setTest(!0),t.setRenderTarget(i),this.fsQuad.render(t),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=o}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=i.texture,t.setRenderTarget(null),this.fsQuad.render(t))}},{key:"getPrepareMaskMaterial",value:function(){return new m.ShaderMaterial({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new m.Vector2(.5,.5)},textureMatrix:{value:null}},vertexShader:"#include <morphtarget_pars_vertex>\n\t\t\t\t#include <skinning_pars_vertex>\n\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tuniform mat4 textureMatrix;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <morphtarget_vertex>\n\t\t\t\t\t#include <skinning_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t\tvPosition = mvPosition;\n\t\t\t\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n\n\t\t\t\t}",fragmentShader:"#include <packing>\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 cameraNearFar;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n\t\t\t\t\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );\n\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\n\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\n\n\t\t\t\t}"})}},{key:"getEdgeDetectionMaterial",value:function(){return new m.ShaderMaterial({uniforms:{maskTexture:{value:null},texSize:{value:new m.Vector2(.5,.5)},visibleEdgeColor:{value:new m.Vector3(1,1,1)},hiddenEdgeColor:{value:new m.Vector3(1,1,1)}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec3 visibleEdgeColor;\n\t\t\t\tuniform vec3 hiddenEdgeColor;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\n\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\n\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\n\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\n\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\n\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\n\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\n\t\t\t\t\t// gl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\n\n                    if(edgeColor.b == 1.0 && edgeColor.r == 1.0)\n                    {\n                        gl_FragColor = vec4(edgeColor, 0.0) * vec4(d);\n                    }\n                    else\n                    {\n                        gl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\n                    }\n\t\t\t\t}"})}},{key:"getSeperableBlurMaterial",value:function(t){return new m.ShaderMaterial({defines:{MAX_RADIUS:t},uniforms:{colorTexture:{value:null},texSize:{value:new m.Vector2(.5,.5)},direction:{value:new m.Vector2(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float kernelRadius;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, kernelRadius);\n\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\n\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\n\t\t\t\t\tvec2 uvOffset = delta;\n\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat w = gaussianPdf(uvOffset.x, kernelRadius);\n\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\n\t\t\t\t\t\tweightSum += (2.0 * w);\n\t\t\t\t\t\tuvOffset += delta;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t}"})}},{key:"getOverlayMaterial",value:function(){return new m.ShaderMaterial({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform sampler2D edgeTexture1;\n\t\t\t\tuniform sampler2D edgeTexture2;\n\t\t\t\tuniform sampler2D patternTexture;\n\t\t\t\tuniform float edgeStrength;\n\t\t\t\tuniform float edgeGlow;\n\t\t\t\tuniform bool usePatternTexture;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\n\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\n\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\n\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\n\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\n\t\t\t\t\tif(usePatternTexture)\n\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\n\t\t\t\t\tgl_FragColor = finalColor;\n\t\t\t\t}",blending:m.CustomBlending,depthTest:!1,depthWrite:!1,transparent:!0})}}])&&lt(e.prototype,i),n&&lt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(D);function vt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function yt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(i),!0).forEach((function(e){At(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):vt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function At(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function xt(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return wt(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return wt(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw s}}}}function wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function bt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}gt.BlurDirectionX=new m.Vector2(1,0),gt.BlurDirectionY=new m.Vector2(0,1);var St,Et=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(){var t={def:E.pfPostprocessData.lut.texture||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAABhUlEQVRIiY1VQZIDIQhkHaiK85vN5/c9yQscL9G57B4UBQaTPVkJLdjdwHz9xPhbNoIaEPisgaBs7fxOzxErgeDcEF6BoI74o+NNjo2gBIR7ekLp+CLyMo7z157f4tr9mU+fBPf0aPfEf7PGtX41OTBThDIeLoD9zHTrv0njAkLZENp9eU/iEA6KSkCLyxxf5Dj6+85FjgOjIm5xM66J85uQC1hlGWALVOPiqgDjWQDGW1y7b/NOghlvilAVJgwDTPfJs8Xx0qWjA7QAukWaA7tLvOE6QYc458kYXeJKIIc44xLtLvHRAUsBZv7ViJdAgOwAJ6wB4SXmOJN2YDrhO6DE3BCSInjFZTEiXg6uL7tI4pjgKd8tzDpUfileiyM7yDP9Xweswmq2zIx75MaIqR1xXYYH7W8Favf98WSB5m67ckB3RlwHRGs7Ba7ifXZALlmvfYu4P78Oup01QW+JmyVvxMREUWxO3wGPuHTAjsU7gexnNCmHNW4t0MSvBGBc4vhiSf4BdqMHFr4bgpcAAAAASUVORK5CYII="};if(!t.def)return;var e=function(e){var i=new Image,n={filter:!0,img:i,name:e,size:8};Mt[e]=n;var r=Tt(n.filter?m.LinearFilter:m.NearestFilter);i.onload=function(){var t=n.size,e=t*t,s=t;n.size=t,_t.canvas.width=e,_t.canvas.height=s,_t.drawImage(i,0,0);var o=_t.getImageData(0,0,e,s);r.image.data=new Uint8Array(o.data.buffer),r.image.width=e,r.image.height=s,r.needsUpdate=!0,n.texture=r},i.src=t[e]};for(var i in t)e(i)}()}var e,i,n;return e=t,(i=[{key:"init",value:function(){var t=this;mt={scene:E.threeScene,renderer:E.threeRenderer,camera:E.threeCamera},ft=E;var e=new G(mt.renderer);this.composer=e;var i=new J(mt.scene,mt.camera);i.name="render",e.addPass(i);var n=new N(at);n.name="gamma",e.addPass(n),ft.enableOutline&&this.initOutline();var r=ft.pfPostprocessData;function s(t){return e.passes.find((function(e){return e.name==t}))}if(window.pfUpdatePostProcessValues=function(e){for(var i in t.enabled=e.enable,e){var n=e[i];if(n&&void 0!==n.enable)if("general"!=i){var r=s(i);r.enabled=n.enable,r.updateValues&&r.updateValues(n)}else E.ambientLight.intensity=n.ambientIntensity,E.dirLight.intensity=n.dirIntensity,E.stopUpdate=n.pauseGame}},r){this.time=0;var o=r.gearboxMode,a=r.toon,h=r.lut,l=r.unreal_bloom,u=r.vignette,c=r.colorEdit,d=r.pixelate,p=r.film,f=r.afterImage;if(r.bokeh,r.motionBlur,r.grayscale=r.grayscale||{},r.grayscale.enable||r.lut.enable,this.enabled=r.enable,(h.enable||o)&&this.initLUT(h.texName,h.lutPower),(c.enable||o)&&this.initColorEdit(c.hue,c.saturation),(d.enable||o)&&this.initPixelate(d.pixelSize),(l.enable||o)&&this.initBloom(l.exposure,l.bloomStrength,l.bloomThreshold,l.bloomRadius),(a.enable||o)&&this.initToonShader(new m.Color(a.outlineColor),a.edgeSens),(p.enable||o)&&this.initFilmShader(p.nIntensity,p.sIntensity,p.sCount,p.grayscale),(f.enable||o)&&this.initAfterImagePass(f.damp),(u.enable||o)&&this.initVignette(u.offset,u.color,u.animateSpeed,u.animateRatio),(r.fxaa.enable||o)&&this.initFXAA(),o){var g,v=xt(e.passes);try{for(v.s();!(g=v.n()).done;){var y=g.value;if("render"!=y.name&&"lut_nearest"!=y.name&&"gamma"!=y.name){var A=r[y.name];A&&(y.enabled=A.enable||!1)}}}catch(t){v.e(t)}finally{v.f()}}}}},{key:"initMotionPass",value:function(t){var e=new MotionBlurPass(mt.scene,mt.camera,{samples:7,expandGeometry:0,interpolateGeometry:1,smearIntensity:t,blurTransparent:!1,renderCameraBlur:!0});this.composer.addPass(e),e.name="motionBlur"}},{key:"initLUT",value:function(t,e){var i={uniforms:{tDiffuse:{value:null},lutMap:{value:null},lutMapSize:{value:1},lutPower:{value:e}},vertexShader:"\n              varying vec2 vUv;\n              void main() {\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n              }\n            ",fragmentShader:"\n              #include <common>\n        \n              #define FILTER_LUT true\n        \n              uniform sampler2D tDiffuse;\n              uniform sampler2D lutMap;\n              uniform float lutMapSize;\n              uniform float lutPower;\n        \n              varying vec2 vUv;\n        \n              vec4 sampleAs3DTexture(sampler2D tex, vec3 texCoord, float size) {\n                float sliceSize = 1.0 / size;                  // space of 1 slice\n                float slicePixelSize = sliceSize / size;       // space of 1 pixel\n                float width = size - 1.0;\n                float sliceInnerSize = slicePixelSize * width; // space of size pixels\n                float zSlice0 = floor( texCoord.z * width);\n                float zSlice1 = min( zSlice0 + 1.0, width);\n                float xOffset = slicePixelSize * 0.5 + texCoord.x * sliceInnerSize;\n                float yRange = (texCoord.y * width + 0.5) / size;\n                float s0 = xOffset + (zSlice0 * sliceSize);\n        \n                #ifdef FILTER_LUT\n        \n                  float s1 = xOffset + (zSlice1 * sliceSize);\n                  vec4 slice0Color = texture2D(tex, vec2(s0, yRange));\n                  vec4 slice1Color = texture2D(tex, vec2(s1, yRange));\n                  float zOffset = mod(texCoord.z * width, 1.0);\n                  return mix(slice0Color, slice1Color, zOffset);\n        \n                #else\n        \n                  return texture2D(tex, vec2( s0, yRange));\n        \n                #endif\n              }\n        \n              void main() {\n                vec4 originalColor = texture2D(tDiffuse, vUv);\n                vec4 luttedColor = sampleAs3DTexture(lutMap, originalColor.xyz, lutMapSize);\n                gl_FragColor = mix(originalColor, luttedColor, lutPower);\n                // gl_FragColor = sampleAs3DTexture(lutMap, originalColor.xyz, lutMapSize);\n              }\n            "},n={uniforms:yt({},i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader.replace("#define FILTER_LUT","//")},r=new N(i);r.renderToScreen=!0;var s=new N(n);s.renderToScreen=!0,this.composer.addPass(r),this.composer.addPass(s);var o=Mt.def,a=o.filter?r:s;r.enabled=o.filter,s.enabled=!o.filter;var h=o.texture;a.uniforms.lutMap.value=h,a.uniforms.lutMapSize.value=o.size,r.name="lut",s.name="lut_nearest",r.updateValues=function(t){a.uniforms.lutPower.value=t.lutPower,function(t,e){var i=new Image,n={filter:!0,img:i,name:"asd",size:8},r=Tt(n.filter?m.LinearFilter:m.NearestFilter);i.onload=function(){var t=n.size,s=t*t,o=t;n.size=t,_t.canvas.width=s,_t.canvas.height=o,_t.drawImage(i,0,0);var a=_t.getImageData(0,0,s,o);r.image.data=new Uint8Array(a.data.buffer),r.image.width=s,r.image.height=o,r.needsUpdate=!0,n.texture=r,e(r)},i.src=t}(t.texture,(function(t){a.uniforms.lutMap.value=t}))}}},{key:"initBloom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.25,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r={exposure:t,bloomStrength:e,bloomThreshold:i,bloomRadius:n},s=new it(new m.Vector2(E.w,E.h),1.5,.4,.85);s.exposure=r.exposure,s.threshold=r.bloomThreshold,s.strength=r.bloomStrength,s.radius=r.bloomRadius,this.bloomPass=s,this.composer.addPass(s),s.name="unreal_bloom",s.updateValues=function(t){s.exposure=t.exposure,s.threshold=t.bloomThreshold,s.strength=t.bloomStrength,s.radius=t.bloomRadius}}},{key:"initFXAA",value:function(){var t=new N(H);this.composer.addPass(t),this.fxaaPass=t,t.name="fxaa"}},{key:"initAfterImagePass",value:function(t){var e=new rt;e.shaderMaterial.uniforms.damp.value=t,this.composer.addPass(e),this.afterImagePass=e,e.name="afterImage",e.updateValues=function(t){e.shaderMaterial.uniforms.damp.value=t.damp}}},{key:"initFilmShader",value:function(t,e,i,n){var r=new N(X);r.material.uniforms.nIntensity.value=t,r.material.uniforms.sIntensity.value=0,r.material.uniforms.sCount.value=.5,r.material.uniforms.grayscale.value=.9,this.composer.addPass(r),this.filmPass=r,r.name="film",r.updateValues=function(t){r.material.uniforms.nIntensity.value=t.nIntensity}}},{key:"initPixelate",value:function(t){var e=new N(Y);e.material.uniforms.resolution.value=new m.Vector2(1e3,1e3),e.material.uniforms.pixelSize.value=t,this.composer.addPass(e),this.pixelatePass=e,e.name="pixelate",e.updateValues=function(t){e.material.uniforms.pixelSize.value=t.pixelSize}}},{key:"initColorEdit",value:function(t,e){var i=new N(q);i.material.uniforms.hue.value=t,i.material.uniforms.saturation.value=e,this.composer.addPass(i),this.hueSaturationPass=i,i.name="colorEdit",i.updateValues=function(t){i.material.uniforms.hue.value=t.hue,i.material.uniforms.saturation.value=t.saturation}}},{key:"initVignette",value:function(t,e,i,n){var r=new N(ot);r.material.uniforms.offset.value=t,r.material.uniforms.color.value.set(e),r.material.uniforms.animateSpeed.value=i,r.material.uniforms.animateRatio.value=n,this.composer.addPass(r),this.vignettePass=r,r.name="vignette",r.updateValues=function(t){r.material.uniforms.offset.value=t.offset,r.material.uniforms.color.value.set(t.color),r.material.uniforms.animateSpeed.value=t.animateSpeed,r.material.uniforms.animateRatio.value=t.animateRatio}}},{key:"initSobelShader",value:function(){var t=new N(j);this.composer.addPass(t),this.sobelShader=t,t.name="sobel"}},{key:"initGrayscaleShader",value:function(){var t=new N(W);this.composer.addPass(t),t.name="grayscale"}},{key:"initToonShader",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,i=new N(st);this.composer.addPass(i),this.toonShader2=i,t&&i.uniforms.outlineColor.value.copy(t),i.uniforms.edgeSens.value=e,i.name="toon",i.updateValues=function(t){i.uniforms.outlineColor.value.set(t.outlineColor),i.uniforms.edgeSens.value=t.edgeSens}}},{key:"initOutline",value:function(){var t=[],e=new gt(new m.Vector2(1e3,1e3),E.threeScene,E.threeCamera,t);E.outlinePass=e,e.visibleEdgeColor.set("#000000"),e.hiddenEdgeColor.set("#FFFFFF"),e.edgeThickness=.03,e.edgeStrength=10,e.edgeGlow=.1,e.pulsePeriod=0,e.name="outline",E.outlinedObjects=t,this.composer.addPass(e)}},{key:"render",value:function(){this.composer.render()}},{key:"update",value:function(t,e){this.time+=e,this.filmPass&&(this.filmPass.material.uniforms.time.value=this.time),this.vignettePass&&(this.vignettePass.material.uniforms.time.value=this.time)}},{key:"resize",value:function(t,e){this.composer&&(this.composer.setSize(t,e),this.toonShader&&(this.toonShader.uniforms.resolution.value.x=t,this.toonShader.uniforms.resolution.value.y=e),this.toonShader2&&(this.toonShader2.uniforms.resolution.value.x=t,this.toonShader2.uniforms.resolution.value.y=e),this.sobelShader&&(this.sobelShader.uniforms.resolution.value.x=t,this.sobelShader.uniforms.resolution.value.y=e),this.pixelatePass&&(this.pixelatePass.uniforms.resolution.value.x=t,this.pixelatePass.uniforms.resolution.value.y=e),this.fxaaPass&&(this.fxaaPass.material.uniforms.resolution.value.x=1/t,this.fxaaPass.material.uniforms.resolution.value.y=1/e),this.ssaoPass&&(this.ssaoPass.width=t,this.ssaoPass.height=e),this.nodepost&&this.nodepost.setSize(t,e))}}])&&bt(e.prototype,i),n&&bt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Tt=(St=new Uint8Array([0,0,0,255,255,0,0,255,0,0,255,255,255,0,255,255,0,255,0,255,255,255,0,255,0,255,255,255,255,255,255,255]),function(t){var e=new m.DataTexture(St,4,2,m.RGBAFormat);return e.minFilter=t,e.magFilter=t,e.needsUpdate=!0,e.flipY=!1,e}),_t=document.createElement("canvas").getContext("2d"),Mt={};function Ct(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Pt=i(0);window.THREE=Pt;var Rt=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config={width:800,height:800,FOV:60,cameraNear:1,cameraFar:1500,resolution:2,maxDimension:1e3},this.readyCallback=e;var n=new C;this.storage=n,E.storage=this.storage;var r=new Et;r.loadAssets&&r.loadAssets(),this.postprocess=r,this.initRenderer((function(){i.initDepthTarget(),i.postprocess&&i.postprocess.init(),i.readyCallback&&i.readyCallback()}))}var e,i,n;return e=t,(i=[{key:"initRenderer",value:function(t){var e=this,i=this.config,n=function n(){M.isWebGLAvailable()?function(){var n={antialias:!1,alpha:!1,powerPreference:"high-performance"},r=new Pt.WebGLRenderer(n);r.outputEncoding=Pt.sRGBEncoding;var s=!0,o=1,a=!1,h=!1,l=0,u=1;void 0!==a&&(r.xr.enabled=a),void 0!==s&&(r.shadowMap.enabled=s),void 0!==o&&(r.shadowMap.type=o),void 0!==l&&(r.toneMapping=l),void 0!==u&&(r.toneMappingExposure=u),void 0!==h&&(r.physicallyCorrectLights=h),n.canvas||document.body.appendChild(r.domElement);var c=new Pt.PerspectiveCamera(i.FOV||80,i.width/i.height,i.cameraNear||1,i.cameraFar||1500),d=new Pt.Scene,p=E.backgroundColors[E.backgroundColorNo];r.setClearColor(p,1),d.fog=new Pt.Fog(p,150,250),E.changeBackgroundColor=function(){E.backgroundColorNo++,E.backgroundColorNo>=E.backgroundColors.length&&(E.backgroundColorNo=0);var t=E.backgroundColorNo,e=E.backgroundColors[t],i=new Pt.Color(e),n=new Pt.Color(p);E.tweens.add({targets:n,r:i.r,g:i.g,b:i.b,duration:1e3,easing:"easeInOutQuad",onUpdate:function(){r.setClearColor(n,1),d.fog.color=n}}),p=e};var f=E.main;f.scene=d,f.camera=c,f.renderer=r,E.threeScene=d,E.threeRenderer=r,E.threeCamera=c,e.renderer=r,e.camera=c,e.scene=d,r.setSize(i.width,i.height),r.getContext().canvas.addEventListener("webglcontextlost",(function(t){t.preventDefault(),e.contextLost=!0}),!1),r.getContext().canvas.addEventListener("webglcontextrestored",(function(t){e.contextLost=!1}),!1),e.initTestControls();var m=e.initControls();E.controls=m,e.inited=!0,t()}():setTimeout((function(){n()}),250)};setTimeout((function(){n()}),50)}},{key:"resize",value:function(t,e){var i=E.threeCamera,n=E.threeRenderer;if(n){var r,s,o=E.threeRenderer.domElement,a=this.config,h=a.resolution||1,l=1/h;if(a.maxDimension&&t*h>a.maxDimension&&e*h>a.maxDimension){var u=a.maxDimension;l=Math.min(t/u,e/u)+.0015,h=1,r=Math.ceil(t/l),s=Math.ceil(e/l)}else r=t*h,s=e*h;o.style["-ms-transform"]="scale("+l+")",o.style["-webkit-transform"]="scale3d("+l+", 1)",o.style["-moz-transform"]="scale("+l+")",o.style["-o-transform"]="scale("+l+")",o.style.transform="scale("+l+")",o.style.transformOrigin="top left";var c=r/s;i.aspect=c,i.updateProjectionMatrix(),n.setSize(r,s),this.depthTarget&&this.depthTarget.setSize(r,s),this.postprocess&&this.postprocess.resize(r,s)}}},{key:"update",value:function(t,e){this.inited&&!this.contextLost&&(this.postprocess&&this.postprocess.enabled?(this.postprocess.update(e,t),this.postprocess.render()):this.renderer.render(this.scene,this.camera))}},{key:"initTestControls",value:function(){var t,e=this;this.isTest=!1,window.onkeydown=function(i){"a"!=i.key||e.isTest||(e.isTest=!0,t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2?arguments[2]:void 0,r=new L(e.camera,document.body);return r.enableDamping=!0,r.dampingFactor=.25,r.screenSpacePanning=!1,void 0!==n&&(r.maxPolarAngle=n),r.minDistance=t,r.maxDistance=i,r}(0,1500)),"s"==i.key&&e.isTest&&(e.isTest=!1,t.dispose&&t.dispose()),E.main.isTest=e.isTest,"q"==i.key&&(E.stopGame=!0),"w"==i.key&&(E.stopGame=!1)}}},{key:"initControls",value:function(){var t={isDown:!1},e=document.body;function i(e){t.prevX=t.mouseX,t.prevY=t.mouseY,t.mouseX=e.pageX,t.mouseY=e.pageY}function n(r){t.isDown=!1,e.removeEventListener("mouseup",n),e.removeEventListener("mousemove",i)}function r(e){t.prevX=t.mouseX,t.prevY=t.mouseY,t.mouseX=e.touches[0].pageX,t.mouseY=e.touches[0].pageY}function s(i){t.isDown=!1,e.removeEventListener("touchend",s),e.removeEventListener("touchmove",r)}return e.addEventListener("mousedown",(function(r){t.downX=r.pageX,t.downY=r.pageY,t.mouseX=r.pageX,t.mouseY=r.pageY,t.prevX=r.pageX,t.prevY=r.pageY,t.isDown=!0,e.addEventListener("mouseup",n),e.addEventListener("mousemove",i)})),e.addEventListener("touchstart",(function(i){t.downX=i.touches[0].pageX,t.downY=i.touches[0].pageY,t.mouseX=i.touches[0].pageX,t.mouseY=i.touches[0].pageY,t.prevX=i.touches[0].pageX,t.prevY=i.touches[0].pageY,t.isDown=!0,e.addEventListener("touchend",s),e.addEventListener("touchmove",r)})),t}},{key:"initDepthTarget",value:function(){}},{key:"initDepthTarget2",value:function(){var t,e,i,n,r,s,o=!0,a={format:Pt.DepthFormat,type:Pt.UnsignedShortType};Pt.DepthFormat,Pt.DepthStencilFormat,Pt.UnsignedShortType,Pt.UnsignedIntType,Pt.UnsignedInt248Type,function(){if(!1===(i=new Pt.WebGLRenderer).capabilities.isWebGL2&&!1===i.extensions.has("WEBGL_depth_texture"))return o=!1,void(document.querySelector("#error").style.display="block");i.setPixelRatio(window.devicePixelRatio),i.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(i.domElement),(t=new Pt.PerspectiveCamera(70,window.innerWidth/window.innerHeight,1,1500)).position.z=4,(n=new L(t,i.domElement)).enableDamping=!0,function(){r&&r.dispose();var t=parseFloat(a.format),e=parseFloat(a.type);(r=new Pt.WebGLRenderTarget(window.innerWidth,window.innerHeight)).texture.minFilter=Pt.NearestFilter,r.texture.magFilter=Pt.NearestFilter,r.stencilBuffer=t===Pt.DepthStencilFormat,r.depthTexture=new Pt.DepthTexture,r.depthTexture.format=t,r.depthTexture.type=e}(),function(){e=new Pt.Scene;for(var t=new Pt.TorusKnotGeometry(1,.3,128,64),i=new Pt.MeshBasicMaterial({color:"blue"}),n=0;n<50;n++){var r=2*Math.random()*Math.PI,s=2*Math.random()-1,o=5*Math.sqrt(1-s*s),a=new Pt.Mesh(t,i);a.position.set(Math.cos(r)*o,Math.sin(r)*o,5*s),a.rotation.set(Math.random(),Math.random(),Math.random()),e.add(a)}}(),function(){new Pt.OrthographicCamera(-1,1,1,-1,0,1),s=new Pt.ShaderMaterial({vertexShader:"\n          varying vec2 vUv;\n  \n          void main() {\n            vUv = uv;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n          }\n        ",fragmentShader:"\n          #include <packing>\n  \n          varying vec2 vUv;\n          uniform sampler2D tDiffuse;\n          uniform sampler2D tDepth;\n          uniform float cameraNear;\n          uniform float cameraFar;\n  \n  \n          float readDepth( sampler2D depthSampler, vec2 coord ) {\n            float fragCoordZ = texture2D( depthSampler, coord ).x;\n            float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n            return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n          }\n  \n          void main() {\n            //vec3 diffuse = texture2D( tDiffuse, vUv ).rgb;\n            float depth = readDepth( tDepth, vUv );\n  \n            gl_FragColor.rgb = 1.0 - vec3( depth );\n            gl_FragColor.a = 1.0;\n          }\n        ",uniforms:{cameraNear:{value:t.near},cameraFar:{value:t.far},tDiffuse:{value:null},tDepth:{value:null}}});var e=new Pt.PlaneGeometry(2,2),i=new Pt.Mesh(e,s);(new Pt.Scene).add(i)}()}(),function t(){o&&(requestAnimationFrame(t),i.setRenderTarget(r),i.render(E.threeScene,E.threeCamera),s.uniforms.tDiffuse.value=r.texture,s.uniforms.tDepth.value=r.depthTexture,E.waterShader&&(E.waterShader.uniforms.depthTexture.value=r.depthTexture),n.update())}()}}])&&Ct(e.prototype,i),n&&Ct(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ot(t){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function It(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Dt(t,e){return(Dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Nt(t);if(e){var r=Nt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return kt(this,i)}}function kt(t,e){if(e&&("object"===Ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ft(t)}function Ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nt(t){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zt=24,Ut=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dt(t,e)}(s,t);var e,i,n,r=Bt(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Lt(this,s),t=r.call(this),E.lowQuality&&(zt=12);var a=[E.trunkModel,E.trunkModelBirch,E.trunkModelGold],h=a[o].clone();t.type=o,t.add(h);var l=2==o?"gold_ingot_start":"trunk_cap_front",u=2==o?"gold_ingot_final":"trunk_cap_end";if(t.frontCap=h.getObjectByName(l),t.endCap=h.getObjectByName(u),t.hasFrontCap=i,t.hasEndCap=n,t.frontCap=t.frontCap,t.endCap=t.endCap,i||(t.frontCap.parent.remove(t.frontCap),t.frontCap=null),n||(t.tempEndCap=t.endCap,t.endCap.tempParent=t.endCap.parent,t.endCap.parent.remove(t.endCap),t.endCap=null),2!=o){var c=["trunk_detail01","trunk_detail02","trunk_detail03"].filter((function(t){return Math.random()<.5}));c.forEach((function(t){var e=h.getObjectByName(t);e&&e.parent.remove(e)}))}var d=[{lightMat:E.woodMats.wood,darkMat:E.woodMats.wood_dark},{lightMat:E.woodMats.wood_birch,darkMat:E.woodMats.wood_dark_birch},{lightMat:E.woodMatsGold.wood,darkMat:E.woodMatsGold.wood_dark}],p=d[o],f=p.lightMat,m=p.darkMat,g=t.initPlane(m),v=t.initPlane(f);return t.posDataTop=g.geometry.attributes.position,t.posDataBottom=v.geometry.attributes.position,t.add(v),t.add(g),E.threeScene.add(Ft(t)),t.position.z=e,t.length=30.5,t.initPhysics(),t}return e=s,(i=[{key:"clearOnLevelEnd",value:function(){E.cannonPhysics.world.remove(this.body),E.threeScene.remove(this)}},{key:"initPhysics",value:function(){var t=.5*E.trunkWidth,e=this.position.z-.5*E.trunkWidth;this.frontCap&&(t+=.5*E.trunkCapWidth,e+=.5*E.trunkCapWidth),this.endCap&&(t+=.5*E.trunkCapWidth,e-=.5*E.trunkCapWidth);var i=new CANNON.Box(new CANNON.Vec3(2.5,2,t)),n=new CANNON.Body({mass:0});n.addShape(i),n.position.set(0,-2,e),E.cannonPhysics.world.add(n),this.body=n}},{key:"initPlane",value:function(t){var e=new m.PlaneBufferGeometry(2.54,30.5,1,zt),i=new m.Mesh(e,t);return i.rotation.x=-Math.PI/2,i.position.z-=15.25,i.rotation.z=Math.PI,i}},{key:"resetVertexPositions",value:function(){for(var t=0;t<this.posDataTop.count;t++){var e=3*t+2;this.posDataTop.array[e]=0,this.posDataBottom.array[e]=-.01}this.posDataTop.needsUpdate=!0,this.posDataBottom.needsUpdate=!0}},{key:"changeVertexWithPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,i=this.position.z-t;if(!(i<0||i>30.5)){var n=i*zt/30.5,r=2*(n=Math.round(n))*3+2,s=r+3;this.changeVertex(r,s,e)}}},{key:"chiselEntered",value:function(t){this.changeVertex(2,5,t),this.changeVertex(8,11,t)}},{key:"chiselPassed",value:function(t){var e=2*(zt-1)*3+2,i=e+3;this.changeVertex(e,i,t)}},{key:"changeVertex",value:function(t,e,i){this.posDataTop.array[t]=i,this.posDataTop.array[e]=i,this.posDataTop.needsUpdate=!0,this.posDataBottom.array[t]=i+.01,this.posDataBottom.array[e]=i+.01,this.posDataBottom.needsUpdate=!0}},{key:"throwEndCap",value:function(){if(this.hasEndCap){E.threeScene.attach(this.endCap);var t=new CANNON.Cylinder(2.4,2.4,1,10),e=new CANNON.Body({mass:1});e.addShape(t,new CANNON.Vec3,new CANNON.Quaternion(.7071067811865475,0,0,.7071067811865476)),e.position.copy(this.endCap.position),E.cannonPhysics.world.add(e),e.collisionResponse=!1,e.velocity.y=20,e.velocity.z=-30,e.angularVelocity.x=-2,setTimeout((function(){e.collisionResponse=!0}),500),this.endCap.body=e,E.objects.push(this.endCap)}}},{key:"addWall",value:function(t){for(var e=E.brickDim.x,i=E.brickDim.y,n=1.5*-e,r=function(t){for(var r,s=0;s<3;s++)for(var o=0;o<8;o++){var a=s*e+n,h=.5*i+o*i;if(o%2==0){if(0==s||3==s)continue}else a+=.5*e;var l={label:"brick"},u={x:a,y:h,z:t},c=E.brickController.addItem(u,null,l);l&&!r&&(r=c.body)}r.addEventListener("wakeup",(function(t){E.sendScoreTexts("300",[{x:0,y:7,z:r.position.z}],0)}))},s=0;s<5;s++)r(t-3.5-6*s)}}])&&It(e.prototype,i),n&&It(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(m.Object3D);function Gt(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return Vt(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Vt(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw s}}}}function Vt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Ht(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Wt,jt,Yt,Xt,qt,Jt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,n=[{key:"simpleShader",value:function(t){var e={uMap:{type:"t",value:t.material.map}},i=new THREE.ShaderMaterial({uniforms:e,vertexShader:"\n            varying vec2 vUv;\n            void main()\n            {\n                \n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }\n        ",fragmentShader:"    \n            uniform sampler2D uMap;\n            varying vec2 vUv;\n            void main( void ) {\n                vec4 tex1 = texture2D(uMap, vUv * 1.0);\n                gl_FragColor = vec4(\n                    tex1.r, // R\n                    tex1.g, // R\n                    tex1.b, // R\n                    tex1.a\n                );\n            } \n        ",lights:!1,side:THREE.DoubleSide});i.transparent=!0,t.material=i}},{key:"simpleShader2",value:function(t){var e={uMap:{type:"t",value:t.map}};return new THREE.ShaderMaterial({uniforms:e,vertexShader:"\n            varying vec2 vUv;\n            void main()\n            {\n                \n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }\n        ",fragmentShader:"    \n            uniform sampler2D uMap;\n            varying vec2 vUv;\n            void main( void ) {\n                vec4 tex1 = texture2D(uMap, vUv * 1.0);\n                gl_FragColor = vec4(\n                    tex1.r, // R\n                    tex1.g, // R\n                    tex1.b, // R\n                    tex1.a\n                );\n            } \n        ",lights:!1,side:THREE.DoubleSide})}},{key:"moveToScene",value:function(t){t.updateWorldMatrix(!0),t.getWorldPosition(t.position),t.getWorldScale(t.scale),t.getWorldQuaternion(t.quaternion),E.threeScene.add(t)}},{key:"getWorldPosition",value:function(t){t.updateWorldMatrix(!0);var e=new THREE.Vector3;return t.getWorldPosition(e)}},{key:"modelToBox3",value:function(t,e){t.updateWorldMatrix(!0);var i=(new m.Box3).setFromObject(t);if(e){var n=new m.Box3Helper(i);E.threeScene.add(n)}var r=(new m.Vector3).addVectors(i.min,i.max).multiplyScalar(.5),s=(new m.Vector3).subVectors(i.max,i.min);return t.dimensions=s,[r,s,i]}},{key:"takeSnapshot",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r={antialias:!0,alpha:!0,preserveDrawingBuffer:!0},s=E.main,o=new THREE.Scene,a=new THREE.WebGLRenderer(r);a.outputEncoding=s.renderer.outputEncoding,a.gammaFactor=s.renderer.gammaFactor,a.setClearColor(0,0);var h=t;if(h){if(e)for(var l=0;l<s.scene.children.length;l++){var u=s.scene.children[l];u.type.indexOf("Light")>=0&&h.push(u)}}else h=s.scene.children.concat();var c,d=Gt(h);try{for(d.s();!(c=d.n()).done;){var p=c.value;o.add(p.clone())}}catch(t){d.e(t)}finally{d.f()}function f(t,e){var i=1/n;t.setAttribute("style"," -ms-transform: scale("+i+"); -webkit-transform: scale3d("+i+", 1); -moz-transform: scale("+i+"); -o-transform: scale("+i+"); transform: scale("+i+"); transform-origin: top left;");var r=window.innerWidth,s=window.innerHeight;document.body.style.maxWidth=r+"px",document.body.style.maxHeight=s+"px";var o=(r*=n)+"px",a=(s*=n)+"px";t.style.maxWidth=o,t.style.maxHeight=a,t.style.width=o,t.style.height=a,e.setSize(r,s)}f(a.domElement,a);var m=s.camera,g=m.position.clone();i&&m.position.copy(i),a.render(o,m);for(var v=a.domElement.toDataURL(),y=o.children.length-1;y>=0;y--)o.remove(o.children[y]);return m.position.copy(g),v}},{key:"addTrail",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#000000",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:60,o=E.threeScene,a=new THREE.TrailRenderer(o,!0),h=THREE.TrailRenderer.createBaseMaterial(),l=new THREE.Color(i);return h.uniforms.headColor.value.set(l.r,l.g,l.b,n),h.uniforms.tailColor.value.set(l.r,l.g,l.b,r),a.initialize(h,s,!1,0,e,t),a.activate(),a}}],(i=[{key:"addSimpleOutline",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.02,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=[];t.traverse((function(t){t.material&&n.push(t)})),n.forEach((function(t){var n=t.clone();t.parent.add(n),n.material=new MeshLambertMaterial({color:i,side:THREE.BackSide}),n.material.onBeforeCompile=function(t){var i="\n                    vec3 transformed = position + objectNormal*".concat(e,";\n                ");t.vertexShader=t.vertexShader.replace("#include <begin_vertex>",i)}}))}}])&&Ht(e.prototype,i),n&&Ht(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Qt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Kt=[];function Zt(t,e,i){E.storage&&E.storage.addItem(t,e,i)}function $t(t,e){if(E.storage)return E.storage.getItem(t,e)}var te=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,n=[{key:"initCannon",value:function(t,e){Wt=t,Yt=e,qt="cannon"}},{key:"initAmmoRaw",value:function(t,e){t,Yt=e,qt="ammoRaw"}},{key:"initAmmo",value:function(t){Xt=t,qt="ammo"}},{key:"initMatter",value:function(t){jt=t,qt="matter"}},{key:"clear",value:function(){Kt=[]}},{key:"destroyObject",value:function(t){var e=Kt.indexOf(t);e<0||(Kt.splice(e,1),t.body&&("cannon"==qt?Yt.remove(t.body):"matter"==qt?jt.removeBody(t.body):"ammoRaw"==qt&&Ammo.destroy(t.body)),E.threeScene.remove(t))}},{key:"addBox",value:function(t){var e,i=t.x,n=void 0===i?0:i,r=t.y,s=void 0===r?0:r,o=t.z,a=void 0===o?0:o,h=t.wx,l=void 0===h?1:h,u=t.wy,c=void 0===u?1:u,d=t.wz,p=void 0===d?1:d,f=t.color,m=t.mass,g=void 0===m?1:m,v=t.specificMatName,y=void 0===v?0:v,A=t.noPhysics,x=void 0!==A&&A,w=t.addToWorld,b=void 0===w||w,S="box"+l+"_"+c+"_"+p;if(x);else if("cannon"==qt)(T=$t("cannonShape",S))||Zt("cannonShape",S,T=new Wt.Box(new Wt.Vec3(l/2,c/2,p/2))),e=function(t,e,i,n,r){var s=new Wt.Body({mass:r});return s.addShape(t),s.position.set(e,i,n),Yt.addBody(s),s}(T,n,s,a,g);else if("ammoRaw"==qt){var T;(T=$t("ammoShape",S))||Zt("ammoShape",S,T=new Ammo.btBoxShape(new Ammo.btVector3(l/2,c/2,p/2)));var _=new Ammo.btTransform;_.setIdentity(),_.setOrigin(new Ammo.btVector3(n,s,a)),_.setRotation(new Ammo.btQuaternion(0,0,0,1));var M=new Ammo.btDefaultMotionState(_),C=new Ammo.btVector3(0,0,0);T.calculateLocalInertia(g,C);var P=new Ammo.btRigidBodyConstructionInfo(g,M,T,C);e=new Ammo.btRigidBody(P),Yt.addRigidBody(e)}else if("matter"==qt){var R=jt.meterToPixel||30;e=jt.rectangle(n*R,a*R,l*R,p*R)}var O=$t("geometry",S);O||Zt("geometry",S,O=new THREE.BoxBufferGeometry(l,c,p));var L="lambert_"+f+"_"+y,I=$t("material",L);I||Zt("material",L,I=new THREE.MeshLambertMaterial({color:f}));var D=new THREE.Mesh(O,I);return D.position.set(n,s,a),"ammo"==qt&&Xt.add.existing(D,{mass:g}),D.body=e,e&&(e.mesh=D,e.color=f),b&&E.threeScene.add(D),Kt.push(D),D}},{key:"addSphere",value:function(t){var e,i=t.x,n=t.y,r=t.z,s=t.radius,o=t.detail,a=t.color,h=t.mass,l=void 0===h?1:h,u=t.noPhysics,c=void 0!==u&&u,d=t.uniqueMaterial,p=void 0!==d&&d,f=t.addToWorld,m=void 0===f||f,g="sphere"+s+"_"+o;if(c);else if("ammoRaw"==qt){(w=$t("ammoShape",g))||((w=new Ammo.btSphereShape(s)).setMargin(.05),Zt("ammoShape",g,w));var v=new Ammo.btTransform;v.setIdentity(),v.setOrigin(new Ammo.btVector3(i,n,r)),v.setRotation(new Ammo.btQuaternion(0,0,0,1));var y=new Ammo.btDefaultMotionState(v),A=new Ammo.btVector3(0,0,0);w.calculateLocalInertia(l,A);var x=new Ammo.btRigidBodyConstructionInfo(l,y,w,A);e=new Ammo.btRigidBody(x),Yt.addRigidBody(e)}else if("cannon"==qt){var w;(w=$t("cannonShape",g))||Zt("cannonShape",g,w=new Wt.Sphere(s)),(e=new Wt.Body({mass:l})).addShape(w),e.position.set(i,n,r),Yt.addBody(e)}var b,S=$t("geometry",g);if(S||Zt("geometry",g,S=new THREE.SphereBufferGeometry(s,o,o)),p)b=new THREE.MeshLambertMaterial({color:a});else{var T="lambert_"+a;(b=$t("material",T))||Zt("material",T,b=new THREE.MeshLambertMaterial({color:a}))}var _=new THREE.Mesh(S,b);return _.position.set(i,n,r),"ammo"==qt&&Xt.add.existing(_,{mass:l}),_.body=e,e&&(e.mesh=_,e.color=a),m&&E.threeScene.add(_),Kt.push(_),_}},{key:"addCone",value:function(t){var e,i=t.x,n=t.y,r=t.z,s=t.baseRadius,o=t.height,a=t.segment,h=t.color,l=t.mass,u=void 0===l?1:l;if("cannon"==qt){var c="cone"+s+"_"+o+"_"+a,d=$t("cannonShape",c);d||Zt("cannonShape",c,d=new Wt.Box(new Wt.Vec3(s,o/2,s))),(e=new Wt.Body({mass:u})).addShape(d),e.position.set(i,n,r),Yt.addBody(e)}var p=$t("geometry",c);p||Zt("geometry",c,p=new THREE.ConeBufferGeometry(s,o,a));var f="lambert_"+h,m=$t("material",f);m||Zt("material",f,m=new THREE.MeshLambertMaterial({color:h}));var g=new THREE.Mesh(p,m);return g.position.set(i,n,r),g.body=e,e&&(e.mesh=g,e.color=h),E.threeScene.add(g),Kt.push(g),g}},{key:"addCylinder",value:function(t){var e,i=t.x,n=t.y,r=t.z,s=t.baseRadius,o=t.height,a=t.segment,h=t.color,l=t.mass,u=void 0===l?1:l,c=t.openEnded,d=t.thetaStart,p=void 0===d?0:d,f=t.thetaLength,m=void 0===f?2*Math.PI:f,g=t.noPhysics,v=void 0!==g&&g,y=t.physicsDimensions,A=void 0===y?null:y,x=t.uniqueMaterial,w=void 0!==x&&x,b=A&&A.baseRadius||s,S=A&&A.height||o;if("cannon"==qt&&!v){var T="cylinder"+b+"_"+S+"_"+a+"_"+c,_=$t("cannonShape",T);_||Zt("cannonShape",T,_=new Wt.Box(new Wt.Vec3(b,S/2,b))),(e=new Wt.Body({mass:u})).addShape(_),e.position.set(i,n,r),Yt.addBody(e)}var M,C=$t("geometry",T);if(C||Zt("geometry",T,C=new THREE.CylinderBufferGeometry(s,s,o,a,1,c,p,m)),w)M=new THREE.MeshLambertMaterial({color:h});else{var P="lambert_"+h;(M=$t("material",P))||Zt("material",P,M=new THREE.MeshLambertMaterial({color:h}))}M.side=THREE.DoubleSide;var R=new THREE.Mesh(C,M);return R.position.set(i,n,r),R.body=e,e&&(e.mesh=R,e.color=h),E.threeScene.add(R),Kt.push(R),R}}],(i=null)&&Qt(e.prototype,i),n&&Qt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();class ee{constructor(){this.matrix={}}get(t,e){let{id:i}=t,{id:n}=e;if(n>i){const t=n;n=i,i=t}return`${i}-${n}`in this.matrix}set(t,e,i){let{id:n}=t,{id:r}=e;if(r>n){const t=r;r=n,n=t}i?this.matrix[`${n}-${r}`]=!0:delete this.matrix[`${n}-${r}`]}reset(){this.matrix={}}setNumObjects(t){}}class ie{constructor(t){void 0===t&&(t=[0,0,0,0,0,0,0,0,0]),this.elements=t}identity(){const t=this.elements;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1}setZero(){const t=this.elements;t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0}setTrace(t){const e=this.elements;e[0]=t.x,e[4]=t.y,e[8]=t.z}getTrace(t){void 0===t&&(t=new re);const e=this.elements;return t.x=e[0],t.y=e[4],t.z=e[8],t}vmult(t,e){void 0===e&&(e=new re);const i=this.elements,n=t.x,r=t.y,s=t.z;return e.x=i[0]*n+i[1]*r+i[2]*s,e.y=i[3]*n+i[4]*r+i[5]*s,e.z=i[6]*n+i[7]*r+i[8]*s,e}smult(t){for(let e=0;e<this.elements.length;e++)this.elements[e]*=t}mmult(t,e){void 0===e&&(e=new ie);const i=this.elements,n=t.elements,r=e.elements,s=i[0],o=i[1],a=i[2],h=i[3],l=i[4],u=i[5],c=i[6],d=i[7],p=i[8],f=n[0],m=n[1],g=n[2],v=n[3],y=n[4],A=n[5],x=n[6],w=n[7],b=n[8];return r[0]=s*f+o*v+a*x,r[1]=s*m+o*y+a*w,r[2]=s*g+o*A+a*b,r[3]=h*f+l*v+u*x,r[4]=h*m+l*y+u*w,r[5]=h*g+l*A+u*b,r[6]=c*f+d*v+p*x,r[7]=c*m+d*y+p*w,r[8]=c*g+d*A+p*b,e}scale(t,e){void 0===e&&(e=new ie);const i=this.elements,n=e.elements;for(let e=0;3!==e;e++)n[3*e+0]=t.x*i[3*e+0],n[3*e+1]=t.y*i[3*e+1],n[3*e+2]=t.z*i[3*e+2];return e}solve(t,e){void 0===e&&(e=new re);const i=[];let n,r;for(n=0;n<12;n++)i.push(0);for(n=0;n<3;n++)for(r=0;r<3;r++)i[n+4*r]=this.elements[n+3*r];i[3]=t.x,i[7]=t.y,i[11]=t.z;let s=3;const o=s;let a;let h;do{if(n=o-s,0===i[n+4*n])for(r=n+1;r<o;r++)if(0!==i[n+4*r]){a=4;do{h=4-a,i[h+4*n]+=i[h+4*r]}while(--a);break}if(0!==i[n+4*n])for(r=n+1;r<o;r++){const t=i[n+4*r]/i[n+4*n];a=4;do{h=4-a,i[h+4*r]=h<=n?0:i[h+4*r]-i[h+4*n]*t}while(--a)}}while(--s);if(e.z=i[11]/i[10],e.y=(i[7]-i[6]*e.z)/i[5],e.x=(i[3]-i[2]*e.z-i[1]*e.y)/i[0],isNaN(e.x)||isNaN(e.y)||isNaN(e.z)||e.x===1/0||e.y===1/0||e.z===1/0)throw`Could not solve equation! Got x=[${e.toString()}], b=[${t.toString()}], A=[${this.toString()}]`;return e}e(t,e,i){if(void 0===i)return this.elements[e+3*t];this.elements[e+3*t]=i}copy(t){for(let e=0;e<t.elements.length;e++)this.elements[e]=t.elements[e];return this}toString(){let t="";for(let e=0;e<9;e++)t+=this.elements[e]+",";return t}reverse(t){void 0===t&&(t=new ie);const e=ne;let i,n;for(i=0;i<3;i++)for(n=0;n<3;n++)e[i+6*n]=this.elements[i+3*n];e[3]=1,e[9]=0,e[15]=0,e[4]=0,e[10]=1,e[16]=0,e[5]=0,e[11]=0,e[17]=1;let r=3;const s=r;let o;let a;do{if(i=s-r,0===e[i+6*i])for(n=i+1;n<s;n++)if(0!==e[i+6*n]){o=6;do{a=6-o,e[a+6*i]+=e[a+6*n]}while(--o);break}if(0!==e[i+6*i])for(n=i+1;n<s;n++){const t=e[i+6*n]/e[i+6*i];o=6;do{a=6-o,e[a+6*n]=a<=i?0:e[a+6*n]-e[a+6*i]*t}while(--o)}}while(--r);i=2;do{n=i-1;do{const t=e[i+6*n]/e[i+6*i];o=6;do{a=6-o,e[a+6*n]=e[a+6*n]-e[a+6*i]*t}while(--o)}while(n--)}while(--i);i=2;do{const t=1/e[i+6*i];o=6;do{a=6-o,e[a+6*i]=e[a+6*i]*t}while(--o)}while(i--);i=2;do{n=2;do{if(a=e[3+n+6*i],isNaN(a)||a===1/0)throw`Could not reverse! A=[${this.toString()}]`;t.e(i,n,a)}while(n--)}while(i--);return t}setRotationFromQuaternion(t){const e=t.x,i=t.y,n=t.z,r=t.w,s=e+e,o=i+i,a=n+n,h=e*s,l=e*o,u=e*a,c=i*o,d=i*a,p=n*a,f=r*s,m=r*o,g=r*a,v=this.elements;return v[0]=1-(c+p),v[1]=l-g,v[2]=u+m,v[3]=l+g,v[4]=1-(h+p),v[5]=d-f,v[6]=u-m,v[7]=d+f,v[8]=1-(h+c),this}transpose(t){void 0===t&&(t=new ie);const e=this.elements,i=t.elements;let n;return i[0]=e[0],i[4]=e[4],i[8]=e[8],n=e[1],i[1]=e[3],i[3]=n,n=e[2],i[2]=e[6],i[6]=n,n=e[5],i[5]=e[7],i[7]=n,t}}const ne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class re{constructor(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=i}cross(t,e){void 0===e&&(e=new re);const i=t.x,n=t.y,r=t.z,s=this.x,o=this.y,a=this.z;return e.x=o*r-a*n,e.y=a*i-s*r,e.z=s*n-o*i,e}set(t,e,i){return this.x=t,this.y=e,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(t,e){if(!e)return new re(this.x+t.x,this.y+t.y,this.z+t.z);e.x=t.x+this.x,e.y=t.y+this.y,e.z=t.z+this.z}vsub(t,e){if(!e)return new re(this.x-t.x,this.y-t.y,this.z-t.z);e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z}crossmat(){return new ie([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const t=this.x,e=this.y,i=this.z,n=Math.sqrt(t*t+e*e+i*i);if(n>0){const t=1/n;this.x*=t,this.y*=t,this.z*=t}else this.x=0,this.y=0,this.z=0;return n}unit(t){void 0===t&&(t=new re);const e=this.x,i=this.y,n=this.z;let r=Math.sqrt(e*e+i*i+n*n);return r>0?(r=1/r,t.x=e*r,t.y=i*r,t.z=n*r):(t.x=1,t.y=0,t.z=0),t}length(){const t=this.x,e=this.y,i=this.z;return Math.sqrt(t*t+e*e+i*i)}lengthSquared(){return this.dot(this)}distanceTo(t){const e=this.x,i=this.y,n=this.z,r=t.x,s=t.y,o=t.z;return Math.sqrt((r-e)*(r-e)+(s-i)*(s-i)+(o-n)*(o-n))}distanceSquared(t){const e=this.x,i=this.y,n=this.z,r=t.x,s=t.y,o=t.z;return(r-e)*(r-e)+(s-i)*(s-i)+(o-n)*(o-n)}scale(t,e){void 0===e&&(e=new re);const i=this.x,n=this.y,r=this.z;return e.x=t*i,e.y=t*n,e.z=t*r,e}vmul(t,e){return void 0===e&&(e=new re),e.x=t.x*this.x,e.y=t.y*this.y,e.z=t.z*this.z,e}addScaledVector(t,e,i){return void 0===i&&(i=new re),i.x=this.x+t*e.x,i.y=this.y+t*e.y,i.z=this.z+t*e.z,i}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(t){return void 0===t&&(t=new re),t.x=-this.x,t.y=-this.y,t.z=-this.z,t}tangents(t,e){const i=this.length();if(i>0){const n=se,r=1/i;n.set(this.x*r,this.y*r,this.z*r);const s=oe;Math.abs(n.x)<.9?(s.set(1,0,0),n.cross(s,t)):(s.set(0,1,0),n.cross(s,t)),n.cross(t,e)}else t.set(1,0,0),e.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}lerp(t,e,i){const n=this.x,r=this.y,s=this.z;i.x=n+(t.x-n)*e,i.y=r+(t.y-r)*e,i.z=s+(t.z-s)*e}almostEquals(t,e){return void 0===e&&(e=1e-6),!(Math.abs(this.x-t.x)>e||Math.abs(this.y-t.y)>e||Math.abs(this.z-t.z)>e)}almostZero(t){return void 0===t&&(t=1e-6),!(Math.abs(this.x)>t||Math.abs(this.y)>t||Math.abs(this.z)>t)}isAntiparallelTo(t,e){return this.negate(ae),ae.almostEquals(t,e)}clone(){return new re(this.x,this.y,this.z)}}re.ZERO=new re(0,0,0),re.UNIT_X=new re(1,0,0),re.UNIT_Y=new re(0,1,0),re.UNIT_Z=new re(0,0,1);const se=new re,oe=new re,ae=new re;class he{constructor(t){void 0===t&&(t={}),this.lowerBound=new re,this.upperBound=new re,t.lowerBound&&this.lowerBound.copy(t.lowerBound),t.upperBound&&this.upperBound.copy(t.upperBound)}setFromPoints(t,e,i,n){const r=this.lowerBound,s=this.upperBound,o=i;r.copy(t[0]),o&&o.vmult(r,r),s.copy(r);for(let e=1;e<t.length;e++){let i=t[e];o&&(o.vmult(i,le),i=le),i.x>s.x&&(s.x=i.x),i.x<r.x&&(r.x=i.x),i.y>s.y&&(s.y=i.y),i.y<r.y&&(r.y=i.y),i.z>s.z&&(s.z=i.z),i.z<r.z&&(r.z=i.z)}return e&&(e.vadd(r,r),e.vadd(s,s)),n&&(r.x-=n,r.y-=n,r.z-=n,s.x+=n,s.y+=n,s.z+=n),this}copy(t){return this.lowerBound.copy(t.lowerBound),this.upperBound.copy(t.upperBound),this}clone(){return(new he).copy(this)}extend(t){this.lowerBound.x=Math.min(this.lowerBound.x,t.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,t.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,t.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,t.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,t.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,t.upperBound.z)}overlaps(t){const e=this.lowerBound,i=this.upperBound,n=t.lowerBound,r=t.upperBound,s=n.x<=i.x&&i.x<=r.x||e.x<=r.x&&r.x<=i.x,o=n.y<=i.y&&i.y<=r.y||e.y<=r.y&&r.y<=i.y,a=n.z<=i.z&&i.z<=r.z||e.z<=r.z&&r.z<=i.z;return s&&o&&a}volume(){const t=this.lowerBound,e=this.upperBound;return(e.x-t.x)*(e.y-t.y)*(e.z-t.z)}contains(t){const e=this.lowerBound,i=this.upperBound,n=t.lowerBound,r=t.upperBound;return e.x<=n.x&&i.x>=r.x&&e.y<=n.y&&i.y>=r.y&&e.z<=n.z&&i.z>=r.z}getCorners(t,e,i,n,r,s,o,a){const h=this.lowerBound,l=this.upperBound;t.copy(h),e.set(l.x,h.y,h.z),i.set(l.x,l.y,h.z),n.set(h.x,l.y,l.z),r.set(l.x,h.y,l.z),s.set(h.x,l.y,h.z),o.set(h.x,h.y,l.z),a.copy(l)}toLocalFrame(t,e){const i=ue,n=i[0],r=i[1],s=i[2],o=i[3],a=i[4],h=i[5],l=i[6],u=i[7];this.getCorners(n,r,s,o,a,h,l,u);for(let e=0;8!==e;e++){const n=i[e];t.pointToLocal(n,n)}return e.setFromPoints(i)}toWorldFrame(t,e){const i=ue,n=i[0],r=i[1],s=i[2],o=i[3],a=i[4],h=i[5],l=i[6],u=i[7];this.getCorners(n,r,s,o,a,h,l,u);for(let e=0;8!==e;e++){const n=i[e];t.pointToWorld(n,n)}return e.setFromPoints(i)}overlapsRay(t){const{direction:e,from:i}=t,n=1/e.x,r=1/e.y,s=1/e.z,o=(this.lowerBound.x-i.x)*n,a=(this.upperBound.x-i.x)*n,h=(this.lowerBound.y-i.y)*r,l=(this.upperBound.y-i.y)*r,u=(this.lowerBound.z-i.z)*s,c=(this.upperBound.z-i.z)*s,d=Math.max(Math.max(Math.min(o,a),Math.min(h,l)),Math.min(u,c)),p=Math.min(Math.min(Math.max(o,a),Math.max(h,l)),Math.max(u,c));return!(p<0)&&!(d>p)}}const le=new re,ue=[new re,new re,new re,new re,new re,new re,new re,new re];class ce{constructor(){this.matrix=[]}get(t,e){let{index:i}=t,{index:n}=e;if(n>i){const t=n;n=i,i=t}return this.matrix[(i*(i+1)>>1)+n-1]}set(t,e,i){let{index:n}=t,{index:r}=e;if(r>n){const t=r;r=n,n=t}this.matrix[(n*(n+1)>>1)+r-1]=i?1:0}reset(){for(let t=0,e=this.matrix.length;t!==e;t++)this.matrix[t]=0}setNumObjects(t){this.matrix.length=t*(t-1)>>1}}class de{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[t]&&(i[t]=[]),i[t].includes(e)||i[t].push(e),this}hasEventListener(t,e){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[t]||!i[t].includes(e))}hasAnyEventListener(t){if(void 0===this._listeners)return!1;return void 0!==this._listeners[t]}removeEventListener(t,e){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[t])return this;const n=i[t].indexOf(e);return-1!==n&&i[t].splice(n,1),this}dispatchEvent(t){if(void 0===this._listeners)return this;const e=this._listeners[t.type];if(void 0!==e){t.target=this;for(let i=0,n=e.length;i<n;i++)e[i].call(this,t)}return this}}class pe{constructor(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),this.x=t,this.y=e,this.z=i,this.w=n}set(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(t,e){const i=Math.sin(.5*e);return this.x=t.x*i,this.y=t.y*i,this.z=t.z*i,this.w=Math.cos(.5*e),this}toAxisAngle(t){void 0===t&&(t=new re),this.normalize();const e=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(t.x=this.x,t.y=this.y,t.z=this.z):(t.x=this.x/i,t.y=this.y/i,t.z=this.z/i),[t,e]}setFromVectors(t,e){if(t.isAntiparallelTo(e)){const e=fe,i=me;t.tangents(e,i),this.setFromAxisAngle(e,Math.PI)}else{const i=t.cross(e);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(t.length()**2*e.length()**2)+t.dot(e),this.normalize()}return this}mult(t,e){void 0===e&&(e=new pe);const i=this.x,n=this.y,r=this.z,s=this.w,o=t.x,a=t.y,h=t.z,l=t.w;return e.x=i*l+s*o+n*h-r*a,e.y=n*l+s*a+r*o-i*h,e.z=r*l+s*h+i*a-n*o,e.w=s*l-i*o-n*a-r*h,e}inverse(t){void 0===t&&(t=new pe);const e=this.x,i=this.y,n=this.z,r=this.w;this.conjugate(t);const s=1/(e*e+i*i+n*n+r*r);return t.x*=s,t.y*=s,t.z*=s,t.w*=s,t}conjugate(t){return void 0===t&&(t=new pe),t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=0):(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}normalizeFast(){const t=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===t?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}vmult(t,e){void 0===e&&(e=new re);const i=t.x,n=t.y,r=t.z,s=this.x,o=this.y,a=this.z,h=this.w,l=h*i+o*r-a*n,u=h*n+a*i-s*r,c=h*r+s*n-o*i,d=-s*i-o*n-a*r;return e.x=l*h+d*-s+u*-a-c*-o,e.y=u*h+d*-o+c*-s-l*-a,e.z=c*h+d*-a+l*-o-u*-s,e}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}toEuler(t,e){let i,n,r;void 0===e&&(e="YZX");const s=this.x,o=this.y,a=this.z,h=this.w;switch(e){case"YZX":const t=s*o+a*h;if(t>.499&&(i=2*Math.atan2(s,h),n=Math.PI/2,r=0),t<-.499&&(i=-2*Math.atan2(s,h),n=-Math.PI/2,r=0),void 0===i){const e=s*s,l=o*o,u=a*a;i=Math.atan2(2*o*h-2*s*a,1-2*l-2*u),n=Math.asin(2*t),r=Math.atan2(2*s*h-2*o*a,1-2*e-2*u)}break;default:throw new Error(`Euler order ${e} not supported yet.`)}t.y=i,t.z=n,t.x=r}setFromEuler(t,e,i,n){void 0===n&&(n="XYZ");const r=Math.cos(t/2),s=Math.cos(e/2),o=Math.cos(i/2),a=Math.sin(t/2),h=Math.sin(e/2),l=Math.sin(i/2);return"XYZ"===n?(this.x=a*s*o+r*h*l,this.y=r*h*o-a*s*l,this.z=r*s*l+a*h*o,this.w=r*s*o-a*h*l):"YXZ"===n?(this.x=a*s*o+r*h*l,this.y=r*h*o-a*s*l,this.z=r*s*l-a*h*o,this.w=r*s*o+a*h*l):"ZXY"===n?(this.x=a*s*o-r*h*l,this.y=r*h*o+a*s*l,this.z=r*s*l+a*h*o,this.w=r*s*o-a*h*l):"ZYX"===n?(this.x=a*s*o-r*h*l,this.y=r*h*o+a*s*l,this.z=r*s*l-a*h*o,this.w=r*s*o+a*h*l):"YZX"===n?(this.x=a*s*o+r*h*l,this.y=r*h*o+a*s*l,this.z=r*s*l-a*h*o,this.w=r*s*o-a*h*l):"XZY"===n&&(this.x=a*s*o-r*h*l,this.y=r*h*o-a*s*l,this.z=r*s*l+a*h*o,this.w=r*s*o+a*h*l),this}clone(){return new pe(this.x,this.y,this.z,this.w)}slerp(t,e,i){void 0===i&&(i=new pe);const n=this.x,r=this.y,s=this.z,o=this.w;let a,h,l,u,c,d=t.x,p=t.y,f=t.z,m=t.w;return h=n*d+r*p+s*f+o*m,h<0&&(h=-h,d=-d,p=-p,f=-f,m=-m),1-h>1e-6?(a=Math.acos(h),l=Math.sin(a),u=Math.sin((1-e)*a)/l,c=Math.sin(e*a)/l):(u=1-e,c=e),i.x=u*n+c*d,i.y=u*r+c*p,i.z=u*s+c*f,i.w=u*o+c*m,i}integrate(t,e,i,n){void 0===n&&(n=new pe);const r=t.x*i.x,s=t.y*i.y,o=t.z*i.z,a=this.x,h=this.y,l=this.z,u=this.w,c=.5*e;return n.x+=c*(r*u+s*l-o*h),n.y+=c*(s*u+o*a-r*l),n.z+=c*(o*u+r*h-s*a),n.w+=c*(-r*a-s*h-o*l),n}}const fe=new re,me=new re,ge={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};class ve{constructor(t){void 0===t&&(t={}),this.id=ve.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw"computeBoundingSphereRadius() not implemented for shape type "+this.type}volume(){throw"volume() not implemented for shape type "+this.type}calculateLocalInertia(t,e){throw"calculateLocalInertia() not implemented for shape type "+this.type}calculateWorldAABB(t,e,i,n){throw"calculateWorldAABB() not implemented for shape type "+this.type}}ve.idCounter=0,ve.types=ge;class ye{constructor(t){void 0===t&&(t={}),this.position=new re,this.quaternion=new pe,t.position&&this.position.copy(t.position),t.quaternion&&this.quaternion.copy(t.quaternion)}pointToLocal(t,e){return ye.pointToLocalFrame(this.position,this.quaternion,t,e)}pointToWorld(t,e){return ye.pointToWorldFrame(this.position,this.quaternion,t,e)}vectorToWorldFrame(t,e){return void 0===e&&(e=new re),this.quaternion.vmult(t,e),e}static pointToLocalFrame(t,e,i,n){return void 0===n&&(n=new re),i.vsub(t,n),e.conjugate(Ae),Ae.vmult(n,n),n}static pointToWorldFrame(t,e,i,n){return void 0===n&&(n=new re),e.vmult(i,n),n.vadd(t,n),n}static vectorToWorldFrame(t,e,i){return void 0===i&&(i=new re),t.vmult(e,i),i}static vectorToLocalFrame(t,e,i,n){return void 0===n&&(n=new re),e.w*=-1,e.vmult(i,n),e.w*=-1,n}}const Ae=new pe;class xe extends ve{constructor(t){void 0===t&&(t={});const{vertices:e=[],faces:i=[],normals:n=[],axes:r,boundingSphereRadius:s}=t;super({type:ve.types.CONVEXPOLYHEDRON}),this.vertices=e,this.faces=i,this.faceNormals=n,0===this.faceNormals.length&&this.computeNormals(),s?this.boundingSphereRadius=s:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=r?r.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const t=this.faces,e=this.vertices,i=this.uniqueEdges;i.length=0;const n=new re;for(let r=0;r!==t.length;r++){const s=t[r],o=s.length;for(let t=0;t!==o;t++){const r=(t+1)%o;e[s[t]].vsub(e[s[r]],n),n.normalize();let a=!1;for(let t=0;t!==i.length;t++)if(i[t].almostEquals(n)||i[t].almostEquals(n)){a=!0;break}a||i.push(n.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let t=0;t<this.faces.length;t++){for(let e=0;e<this.faces[t].length;e++)if(!this.vertices[this.faces[t][e]])throw new Error(`Vertex ${this.faces[t][e]} not found!`);const e=this.faceNormals[t]||new re;this.getFaceNormal(t,e),e.negate(e),this.faceNormals[t]=e;const i=this.vertices[this.faces[t][0]];if(e.dot(i)<0)for(let e=0;e<this.faces[t].length;e++);}}getFaceNormal(t,e){const i=this.faces[t],n=this.vertices[i[0]],r=this.vertices[i[1]],s=this.vertices[i[2]];xe.computeNormal(n,r,s,e)}static computeNormal(t,e,i,n){const r=new re,s=new re;e.vsub(t,s),i.vsub(e,r),r.cross(s,n),n.isZero()||n.normalize()}clipAgainstHull(t,e,i,n,r,s,o,a,h){const l=new re;let u=-1,c=-Number.MAX_VALUE;for(let t=0;t<i.faces.length;t++){l.copy(i.faceNormals[t]),r.vmult(l,l);const e=l.dot(s);e>c&&(c=e,u=t)}const d=[];for(let t=0;t<i.faces[u].length;t++){const e=i.vertices[i.faces[u][t]],s=new re;s.copy(e),r.vmult(s,s),n.vadd(s,s),d.push(s)}u>=0&&this.clipFaceAgainstHull(s,t,e,d,o,a,h)}findSeparatingAxis(t,e,i,n,r,s,o,a){const h=new re,l=new re,u=new re,c=new re,d=new re,p=new re;let f=Number.MAX_VALUE;const m=this;if(m.uniqueAxes)for(let o=0;o!==m.uniqueAxes.length;o++){i.vmult(m.uniqueAxes[o],h);const a=m.testSepAxis(h,t,e,i,n,r);if(!1===a)return!1;a<f&&(f=a,s.copy(h))}else{const a=o?o.length:m.faces.length;for(let l=0;l<a;l++){const a=o?o[l]:l;h.copy(m.faceNormals[a]),i.vmult(h,h);const u=m.testSepAxis(h,t,e,i,n,r);if(!1===u)return!1;u<f&&(f=u,s.copy(h))}}if(t.uniqueAxes)for(let o=0;o!==t.uniqueAxes.length;o++){r.vmult(t.uniqueAxes[o],l);const a=m.testSepAxis(l,t,e,i,n,r);if(!1===a)return!1;a<f&&(f=a,s.copy(l))}else{const o=a?a.length:t.faces.length;for(let h=0;h<o;h++){const o=a?a[h]:h;l.copy(t.faceNormals[o]),r.vmult(l,l);const u=m.testSepAxis(l,t,e,i,n,r);if(!1===u)return!1;u<f&&(f=u,s.copy(l))}}for(let o=0;o!==m.uniqueEdges.length;o++){i.vmult(m.uniqueEdges[o],c);for(let o=0;o!==t.uniqueEdges.length;o++)if(r.vmult(t.uniqueEdges[o],d),c.cross(d,p),!p.almostZero()){p.normalize();const o=m.testSepAxis(p,t,e,i,n,r);if(!1===o)return!1;o<f&&(f=o,s.copy(p))}}return n.vsub(e,u),u.dot(s)>0&&s.negate(s),!0}testSepAxis(t,e,i,n,r,s){xe.project(this,t,i,n,we),xe.project(e,t,r,s,be);const o=we[0],a=we[1],h=be[0],l=be[1];if(o<l||h<a)return!1;const u=o-l,c=h-a;return u<c?u:c}calculateLocalInertia(t,e){const i=new re,n=new re;this.computeLocalAABB(n,i);const r=i.x-n.x,s=i.y-n.y,o=i.z-n.z;e.x=1/12*t*(2*s*2*s+2*o*2*o),e.y=1/12*t*(2*r*2*r+2*o*2*o),e.z=1/12*t*(2*s*2*s+2*r*2*r)}getPlaneConstantOfFace(t){const e=this.faces[t],i=this.faceNormals[t],n=this.vertices[e[0]];return-i.dot(n)}clipFaceAgainstHull(t,e,i,n,r,s,o){const a=new re,h=new re,l=new re,u=new re,c=new re,d=new re,p=new re,f=new re,m=this,g=n,v=[];let y=-1,A=Number.MAX_VALUE;for(let e=0;e<m.faces.length;e++){a.copy(m.faceNormals[e]),i.vmult(a,a);const n=a.dot(t);n<A&&(A=n,y=e)}if(y<0)return;const x=m.faces[y];x.connectedFaces=[];for(let t=0;t<m.faces.length;t++)for(let e=0;e<m.faces[t].length;e++)-1!==x.indexOf(m.faces[t][e])&&t!==y&&-1===x.connectedFaces.indexOf(t)&&x.connectedFaces.push(t);const w=x.length;for(let t=0;t<w;t++){const n=m.vertices[x[t]],r=m.vertices[x[(t+1)%w]];n.vsub(r,h),l.copy(h),i.vmult(l,l),e.vadd(l,l),u.copy(this.faceNormals[y]),i.vmult(u,u),e.vadd(u,u),l.cross(u,c),c.negate(c),d.copy(n),i.vmult(d,d),e.vadd(d,d);const s=x.connectedFaces[t];p.copy(this.faceNormals[s]);const o=this.getPlaneConstantOfFace(s);f.copy(p),i.vmult(f,f);const a=o-f.dot(e);for(this.clipFaceAgainstPlane(g,v,f,a);g.length;)g.shift();for(;v.length;)g.push(v.shift())}p.copy(this.faceNormals[y]);const b=this.getPlaneConstantOfFace(y);f.copy(p),i.vmult(f,f);const S=b-f.dot(e);for(let t=0;t<g.length;t++){let e=f.dot(g[t])+S;if(e<=r&&(e=r),e<=s){const i=g[t];if(e<=1e-6){const t={point:i,normal:f,depth:e};o.push(t)}}}}clipFaceAgainstPlane(t,e,i,n){let r,s;const o=t.length;if(o<2)return e;let a=t[t.length-1],h=t[0];r=i.dot(a)+n;for(let l=0;l<o;l++){if(h=t[l],s=i.dot(h)+n,r<0)if(s<0){const t=new re;t.copy(h),e.push(t)}else{const t=new re;a.lerp(h,r/(r-s),t),e.push(t)}else if(s<0){const t=new re;a.lerp(h,r/(r-s),t),e.push(t),e.push(h)}a=h,r=s}return e}computeWorldVertices(t,e){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new re);const i=this.vertices,n=this.worldVertices;for(let r=0;r!==this.vertices.length;r++)e.vmult(i[r],n[r]),t.vadd(n[r],n[r]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(t,e){const i=this.vertices;t.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),e.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let n=0;n<this.vertices.length;n++){const r=i[n];r.x<t.x?t.x=r.x:r.x>e.x&&(e.x=r.x),r.y<t.y?t.y=r.y:r.y>e.y&&(e.y=r.y),r.z<t.z?t.z=r.z:r.z>e.z&&(e.z=r.z)}}computeWorldFaceNormals(t){const e=this.faceNormals.length;for(;this.worldFaceNormals.length<e;)this.worldFaceNormals.push(new re);const i=this.faceNormals,n=this.worldFaceNormals;for(let r=0;r!==e;r++)t.vmult(i[r],n[r]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let t=0;const e=this.vertices;for(let i=0;i!==e.length;i++){const n=e[i].lengthSquared();n>t&&(t=n)}this.boundingSphereRadius=Math.sqrt(t)}calculateWorldAABB(t,e,i,n){const r=this.vertices;let s,o,a,h,l,u,c=new re;for(let i=0;i<r.length;i++){c.copy(r[i]),e.vmult(c,c),t.vadd(c,c);const n=c;(void 0===s||n.x<s)&&(s=n.x),(void 0===h||n.x>h)&&(h=n.x),(void 0===o||n.y<o)&&(o=n.y),(void 0===l||n.y>l)&&(l=n.y),(void 0===a||n.z<a)&&(a=n.z),(void 0===u||n.z>u)&&(u=n.z)}i.set(s,o,a),n.set(h,l,u)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(t){void 0===t&&(t=new re);const e=this.vertices;for(let i=0;i<e.length;i++)t.vadd(e[i],t);return t.scale(1/e.length,t),t}transformAllPoints(t,e){const i=this.vertices.length,n=this.vertices;if(e){for(let t=0;t<i;t++){const i=n[t];e.vmult(i,i)}for(let t=0;t<this.faceNormals.length;t++){const i=this.faceNormals[t];e.vmult(i,i)}}if(t)for(let e=0;e<i;e++){const i=n[e];i.vadd(t,i)}}pointIsInside(t){const e=this.vertices,i=this.faces,n=this.faceNormals,r=new re;this.getAveragePointLocal(r);for(let s=0;s<this.faces.length;s++){let o=n[s];const a=e[i[s][0]],h=new re;t.vsub(a,h);const l=o.dot(h),u=new re;r.vsub(a,u);const c=o.dot(u);if(l<0&&c>0||l>0&&c<0)return!1}return-1}static project(t,e,i,n,r){const s=t.vertices.length,o=Se;let a=0,h=0;const l=Ee,u=t.vertices;l.setZero(),ye.vectorToLocalFrame(i,n,e,o),ye.pointToLocalFrame(i,n,l,l);const c=l.dot(o);h=a=u[0].dot(o);for(let t=1;t<s;t++){const e=u[t].dot(o);e>a&&(a=e),e<h&&(h=e)}if(h-=c,a-=c,h>a){const t=h;h=a,a=t}r[0]=a,r[1]=h}}const we=[],be=[],Se=(new re,new re),Ee=new re;class Te extends ve{constructor(t){super({type:ve.types.BOX}),this.halfExtents=t,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const t=this.halfExtents.x,e=this.halfExtents.y,i=this.halfExtents.z,n=re,r=[new n(-t,-e,-i),new n(t,-e,-i),new n(t,e,-i),new n(-t,e,-i),new n(-t,-e,i),new n(t,-e,i),new n(t,e,i),new n(-t,e,i)],s=[new n(0,0,1),new n(0,1,0),new n(1,0,0)],o=new xe({vertices:r,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:s});this.convexPolyhedronRepresentation=o,o.material=this.material}calculateLocalInertia(t,e){return void 0===e&&(e=new re),Te.calculateInertia(this.halfExtents,t,e),e}static calculateInertia(t,e,i){const n=t;i.x=1/12*e*(2*n.y*2*n.y+2*n.z*2*n.z),i.y=1/12*e*(2*n.x*2*n.x+2*n.z*2*n.z),i.z=1/12*e*(2*n.y*2*n.y+2*n.x*2*n.x)}getSideNormals(t,e){const i=t,n=this.halfExtents;if(i[0].set(n.x,0,0),i[1].set(0,n.y,0),i[2].set(0,0,n.z),i[3].set(-n.x,0,0),i[4].set(0,-n.y,0),i[5].set(0,0,-n.z),void 0!==e)for(let t=0;t!==i.length;t++)e.vmult(i[t],i[t]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(t,e,i){const n=this.halfExtents,r=[[n.x,n.y,n.z],[-n.x,n.y,n.z],[-n.x,-n.y,n.z],[-n.x,-n.y,-n.z],[n.x,-n.y,-n.z],[n.x,n.y,-n.z],[-n.x,n.y,-n.z],[n.x,-n.y,n.z]];for(let n=0;n<r.length;n++)_e.set(r[n][0],r[n][1],r[n][2]),e.vmult(_e,_e),t.vadd(_e,_e),i(_e.x,_e.y,_e.z)}calculateWorldAABB(t,e,i,n){const r=this.halfExtents;Me[0].set(r.x,r.y,r.z),Me[1].set(-r.x,r.y,r.z),Me[2].set(-r.x,-r.y,r.z),Me[3].set(-r.x,-r.y,-r.z),Me[4].set(r.x,-r.y,-r.z),Me[5].set(r.x,r.y,-r.z),Me[6].set(-r.x,r.y,-r.z),Me[7].set(r.x,-r.y,r.z);const s=Me[0];e.vmult(s,s),t.vadd(s,s),n.copy(s),i.copy(s);for(let r=1;r<8;r++){const s=Me[r];e.vmult(s,s),t.vadd(s,s);const o=s.x,a=s.y,h=s.z;o>n.x&&(n.x=o),a>n.y&&(n.y=a),h>n.z&&(n.z=h),o<i.x&&(i.x=o),a<i.y&&(i.y=a),h<i.z&&(i.z=h)}}}const _e=new re,Me=[new re,new re,new re,new re,new re,new re,new re,new re],Ce={DYNAMIC:1,STATIC:2,KINEMATIC:4},Pe={AWAKE:0,SLEEPY:1,SLEEPING:2};class Re extends de{constructor(t){void 0===t&&(t={}),super(),this.id=Re.idCounter++,this.index=-1,this.world=null,this.vlambda=new re,this.collisionFilterGroup="number"==typeof t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof t.collisionResponse||t.collisionResponse,this.position=new re,this.previousPosition=new re,this.interpolatedPosition=new re,this.initPosition=new re,t.position&&(this.position.copy(t.position),this.previousPosition.copy(t.position),this.interpolatedPosition.copy(t.position),this.initPosition.copy(t.position)),this.velocity=new re,t.velocity&&this.velocity.copy(t.velocity),this.initVelocity=new re,this.force=new re;const e="number"==typeof t.mass?t.mass:0;this.mass=e,this.invMass=e>0?1/e:0,this.material=t.material||null,this.linearDamping="number"==typeof t.linearDamping?t.linearDamping:.01,this.type=e<=0?Re.STATIC:Re.DYNAMIC,typeof t.type==typeof Re.STATIC&&(this.type=t.type),this.allowSleep=void 0===t.allowSleep||t.allowSleep,this.sleepState=Re.AWAKE,this.sleepSpeedLimit=void 0!==t.sleepSpeedLimit?t.sleepSpeedLimit:.1,this.sleepTimeLimit=void 0!==t.sleepTimeLimit?t.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new re,this.quaternion=new pe,this.initQuaternion=new pe,this.previousQuaternion=new pe,this.interpolatedQuaternion=new pe,t.quaternion&&(this.quaternion.copy(t.quaternion),this.initQuaternion.copy(t.quaternion),this.previousQuaternion.copy(t.quaternion),this.interpolatedQuaternion.copy(t.quaternion)),this.angularVelocity=new re,t.angularVelocity&&this.angularVelocity.copy(t.angularVelocity),this.initAngularVelocity=new re,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new re,this.invInertia=new re,this.invInertiaWorld=new ie,this.invMassSolve=0,this.invInertiaSolve=new re,this.invInertiaWorldSolve=new ie,this.fixedRotation=void 0!==t.fixedRotation&&t.fixedRotation,this.angularDamping=void 0!==t.angularDamping?t.angularDamping:.01,this.linearFactor=new re(1,1,1),t.linearFactor&&this.linearFactor.copy(t.linearFactor),this.angularFactor=new re(1,1,1),t.angularFactor&&this.angularFactor.copy(t.angularFactor),this.aabb=new he,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new re,this.isTrigger=Boolean(t.isTrigger),t.shape&&this.addShape(t.shape),this.updateMassProperties()}wakeUp(){const t=this.sleepState;this.sleepState=Re.AWAKE,this.wakeUpAfterNarrowphase=!1,t===Re.SLEEPING&&this.dispatchEvent(Re.wakeupEvent)}sleep(){this.sleepState=Re.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(t){if(this.allowSleep){const e=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),n=this.sleepSpeedLimit**2;e===Re.AWAKE&&i<n?(this.sleepState=Re.SLEEPY,this.timeLastSleepy=t,this.dispatchEvent(Re.sleepyEvent)):e===Re.SLEEPY&&i>n?this.wakeUp():e===Re.SLEEPY&&t-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(Re.sleepEvent))}}updateSolveMassProperties(){this.sleepState===Re.SLEEPING||this.type===Re.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(t,e){return void 0===e&&(e=new re),t.vsub(this.position,e),this.quaternion.conjugate().vmult(e,e),e}vectorToLocalFrame(t,e){return void 0===e&&(e=new re),this.quaternion.conjugate().vmult(t,e),e}pointToWorldFrame(t,e){return void 0===e&&(e=new re),this.quaternion.vmult(t,e),e.vadd(this.position,e),e}vectorToWorldFrame(t,e){return void 0===e&&(e=new re),this.quaternion.vmult(t,e),e}addShape(t,e,i){const n=new re,r=new pe;return e&&n.copy(e),i&&r.copy(i),this.shapes.push(t),this.shapeOffsets.push(n),this.shapeOrientations.push(r),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=this,this}removeShape(t){const e=this.shapes.indexOf(t);return-1===e||(this.shapes.splice(e,1),this.shapeOffsets.splice(e,1),this.shapeOrientations.splice(e,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=null),this}updateBoundingRadius(){const t=this.shapes,e=this.shapeOffsets,i=t.length;let n=0;for(let r=0;r!==i;r++){const i=t[r];i.updateBoundingSphereRadius();const s=e[r].length(),o=i.boundingSphereRadius;s+o>n&&(n=s+o)}this.boundingRadius=n}updateAABB(){const t=this.shapes,e=this.shapeOffsets,i=this.shapeOrientations,n=t.length,r=Oe,s=Le,o=this.quaternion,a=this.aabb,h=Ie;for(let l=0;l!==n;l++){const n=t[l];o.vmult(e[l],r),r.vadd(this.position,r),o.mult(i[l],s),n.calculateWorldAABB(r,s,h.lowerBound,h.upperBound),0===l?a.copy(h):a.extend(h)}this.aabbNeedsUpdate=!1}updateInertiaWorld(t){const e=this.invInertia;if(e.x!==e.y||e.y!==e.z||t){const t=De,i=Be;t.setRotationFromQuaternion(this.quaternion),t.transpose(i),t.scale(e,t),t.mmult(i,this.invInertiaWorld)}else;}applyForce(t,e){if(void 0===e&&(e=new re),this.type!==Re.DYNAMIC)return;this.sleepState===Re.SLEEPING&&this.wakeUp();const i=ke;e.cross(t,i),this.force.vadd(t,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(t,e){if(void 0===e&&(e=new re),this.type!==Re.DYNAMIC)return;const i=Fe,n=Ne;this.vectorToWorldFrame(t,i),this.vectorToWorldFrame(e,n),this.applyForce(i,n)}applyTorque(t){this.type===Re.DYNAMIC&&(this.sleepState===Re.SLEEPING&&this.wakeUp(),this.torque.vadd(t,this.torque))}applyImpulse(t,e){if(void 0===e&&(e=new re),this.type!==Re.DYNAMIC)return;this.sleepState===Re.SLEEPING&&this.wakeUp();const i=e,n=ze;n.copy(t),n.scale(this.invMass,n),this.velocity.vadd(n,this.velocity);const r=Ue;i.cross(t,r),this.invInertiaWorld.vmult(r,r),this.angularVelocity.vadd(r,this.angularVelocity)}applyLocalImpulse(t,e){if(void 0===e&&(e=new re),this.type!==Re.DYNAMIC)return;const i=Ge,n=Ve;this.vectorToWorldFrame(t,i),this.vectorToWorldFrame(e,n),this.applyImpulse(i,n)}updateMassProperties(){const t=He;this.invMass=this.mass>0?1/this.mass:0;const e=this.inertia,i=this.fixedRotation;this.updateAABB(),t.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),Te.calculateInertia(t,this.mass,e),this.invInertia.set(e.x>0&&!i?1/e.x:0,e.y>0&&!i?1/e.y:0,e.z>0&&!i?1/e.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(t,e){const i=new re;return t.vsub(this.position,i),this.angularVelocity.cross(i,e),this.velocity.vadd(e,e),e}integrate(t,e,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==Re.DYNAMIC&&this.type!==Re.KINEMATIC||this.sleepState===Re.SLEEPING)return;const n=this.velocity,r=this.angularVelocity,s=this.position,o=this.force,a=this.torque,h=this.quaternion,l=this.invMass,u=this.invInertiaWorld,c=this.linearFactor,d=l*t;n.x+=o.x*d*c.x,n.y+=o.y*d*c.y,n.z+=o.z*d*c.z;const p=u.elements,f=this.angularFactor,m=a.x*f.x,g=a.y*f.y,v=a.z*f.z;r.x+=t*(p[0]*m+p[1]*g+p[2]*v),r.y+=t*(p[3]*m+p[4]*g+p[5]*v),r.z+=t*(p[6]*m+p[7]*g+p[8]*v),s.x+=n.x*t,s.y+=n.y*t,s.z+=n.z*t,h.integrate(this.angularVelocity,t,this.angularFactor,h),e&&(i?h.normalizeFast():h.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}Re.idCounter=0,Re.COLLIDE_EVENT_NAME="collide",Re.DYNAMIC=Ce.DYNAMIC,Re.STATIC=Ce.STATIC,Re.KINEMATIC=Ce.KINEMATIC,Re.AWAKE=Pe.AWAKE,Re.SLEEPY=Pe.SLEEPY,Re.SLEEPING=Pe.SLEEPING,Re.wakeupEvent={type:"wakeup"},Re.sleepyEvent={type:"sleepy"},Re.sleepEvent={type:"sleep"};const Oe=new re,Le=new pe,Ie=new he,De=new ie,Be=new ie,ke=(new ie,new re),Fe=new re,Ne=new re,ze=new re,Ue=new re,Ge=new re,Ve=new re,He=new re;class We{constructor(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}collisionPairs(t,e,i){throw new Error("collisionPairs not implemented for this BroadPhase class!")}needBroadphaseCollision(t,e){return 0!=(t.collisionFilterGroup&e.collisionFilterMask)&&0!=(e.collisionFilterGroup&t.collisionFilterMask)&&(0==(t.type&Re.STATIC)&&t.sleepState!==Re.SLEEPING||0==(e.type&Re.STATIC)&&e.sleepState!==Re.SLEEPING)}intersectionTest(t,e,i,n){this.useBoundingBoxes?this.doBoundingBoxBroadphase(t,e,i,n):this.doBoundingSphereBroadphase(t,e,i,n)}doBoundingSphereBroadphase(t,e,i,n){const r=je;e.position.vsub(t.position,r);const s=(t.boundingRadius+e.boundingRadius)**2;r.lengthSquared()<s&&(i.push(t),n.push(e))}doBoundingBoxBroadphase(t,e,i,n){t.aabbNeedsUpdate&&t.updateAABB(),e.aabbNeedsUpdate&&e.updateAABB(),t.aabb.overlaps(e.aabb)&&(i.push(t),n.push(e))}makePairsUnique(t,e){const i=Ye,n=Xe,r=qe,s=t.length;for(let i=0;i!==s;i++)n[i]=t[i],r[i]=e[i];t.length=0,e.length=0;for(let t=0;t!==s;t++){const e=n[t].id,s=r[t].id,o=e<s?`${e},${s}`:`${s},${e}`;i[o]=t,i.keys.push(o)}for(let s=0;s!==i.keys.length;s++){const s=i.keys.pop(),o=i[s];t.push(n[o]),e.push(r[o]),delete i[s]}}setWorld(t){}static boundingSphereCheck(t,e){const i=new re;t.position.vsub(e.position,i);const n=t.shapes[0],r=e.shapes[0];return Math.pow(n.boundingSphereRadius+r.boundingSphereRadius,2)>i.lengthSquared()}aabbQuery(t,e,i){return[]}}const je=new re;new re,new pe,new re;const Ye={keys:[]},Xe=[],qe=[];new re;class Je extends We{constructor(t,e,i,n,r){void 0===t&&(t=new re(100,100,100)),void 0===e&&(e=new re(-100,-100,-100)),void 0===i&&(i=10),void 0===n&&(n=10),void 0===r&&(r=10),super(),this.nx=i,this.ny=n,this.nz=r,this.aabbMin=t,this.aabbMax=e;const s=this.nx*this.ny*this.nz;if(s<=0)throw"GridBroadphase: Each dimension's n must be >0";this.bins=[],this.binLengths=[],this.bins.length=s,this.binLengths.length=s;for(let t=0;t<s;t++)this.bins[t]=[],this.binLengths[t]=0}collisionPairs(t,e,i){const n=t.bodies.length,r=t.bodies,s=this.aabbMax,o=this.aabbMin,a=this.nx,h=this.ny,l=this.nz,u=h*l,c=l,d=s.x,p=s.y,f=s.z,m=o.x,g=o.y,v=o.z,y=a/(d-m),A=h/(p-g),x=l/(f-v),w=(d-m)/a,b=(p-g)/h,S=(f-v)/l,E=.5*Math.sqrt(w*w+b*b+S*S),T=ve.types,_=T.SPHERE,M=T.PLANE;T.BOX,T.COMPOUND,T.CONVEXPOLYHEDRON;const C=this.bins,P=this.binLengths,R=this.bins.length;for(let t=0;t!==R;t++)P[t]=0;const O=Math.ceil;function L(t,e,i,n,r,s,o){let d=(t-m)*y|0,p=(e-g)*A|0,f=(i-v)*x|0,w=O((n-m)*y),b=O((r-g)*A),S=O((s-v)*x);d<0?d=0:d>=a&&(d=a-1),p<0?p=0:p>=h&&(p=h-1),f<0?f=0:f>=l&&(f=l-1),w<0?w=0:w>=a&&(w=a-1),b<0?b=0:b>=h&&(b=h-1),S<0?S=0:S>=l&&(S=l-1),d*=u,p*=c,f*=1,w*=u,b*=c,S*=1;for(let t=d;t<=w;t+=u)for(let e=p;e<=b;e+=c)for(let i=f;i<=S;i+=1){const n=t+e+i;C[n][P[n]++]=o}}for(let t=0;t!==n;t++){const e=r[t],i=e.shapes[0];switch(i.type){case _:{const t=i,n=e.position.x,r=e.position.y,s=e.position.z,o=t.radius;L(n-o,r-o,s-o,n+o,r+o,s+o,e);break}case M:{const t=i;t.worldNormalNeedsUpdate&&t.computeWorldNormal(e.quaternion);const n=t.worldNormal,r=m+.5*w-e.position.x,s=g+.5*b-e.position.y,o=v+.5*S-e.position.z,d=Qe;d.set(r,s,o);for(let t=0,i=0;t!==a;t++,i+=u,d.y=s,d.x+=w)for(let t=0,r=0;t!==h;t++,r+=c,d.z=o,d.y+=b)for(let t=0,s=0;t!==l;t++,s+=1,d.z+=S)if(d.dot(n)<E){const t=i+r+s;C[t][P[t]++]=e}break}default:e.aabbNeedsUpdate&&e.updateAABB(),L(e.aabb.lowerBound.x,e.aabb.lowerBound.y,e.aabb.lowerBound.z,e.aabb.upperBound.x,e.aabb.upperBound.y,e.aabb.upperBound.z,e)}}for(let t=0;t!==R;t++){const n=P[t];if(n>1){const r=C[t];for(let t=0;t!==n;t++){const n=r[t];for(let s=0;s!==t;s++){const t=r[s];this.needBroadphaseCollision(n,t)&&this.intersectionTest(n,t,e,i)}}}}this.makePairsUnique(e,i)}}const Qe=new re;new re;class Ke extends We{constructor(){super()}collisionPairs(t,e,i){const n=t.bodies,r=n.length;let s,o;for(let t=0;t!==r;t++)for(let r=0;r!==t;r++)s=n[t],o=n[r],this.needBroadphaseCollision(s,o)&&this.intersectionTest(s,o,e,i)}aabbQuery(t,e,i){void 0===i&&(i=[]);for(let n=0;n<t.bodies.length;n++){const r=t.bodies[n];r.aabbNeedsUpdate&&r.updateAABB(),r.aabb.overlaps(e)&&i.push(r)}return i}}class Ze{constructor(){this.rayFromWorld=new re,this.rayToWorld=new re,this.hitNormalWorld=new re,this.hitPointWorld=new re,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(t,e,i,n,r,s,o){this.rayFromWorld.copy(t),this.rayToWorld.copy(e),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(n),this.shape=r,this.body=s,this.distance=o}}let $e,ti,ei,ii,ni,ri,si;const oi={CLOSEST:1,ANY:2,ALL:4};$e=ve.types.SPHERE,ti=ve.types.PLANE,ei=ve.types.BOX,ii=ve.types.CYLINDER,ni=ve.types.CONVEXPOLYHEDRON,ri=ve.types.HEIGHTFIELD,si=ve.types.TRIMESH;class ai{get[$e](){return this._intersectSphere}get[ti](){return this._intersectPlane}get[ei](){return this._intersectBox}get[ii](){return this._intersectConvex}get[ni](){return this._intersectConvex}get[ri](){return this._intersectHeightfield}get[si](){return this._intersectTrimesh}constructor(t,e){void 0===t&&(t=new re),void 0===e&&(e=new re),this.from=t.clone(),this.to=e.clone(),this.direction=new re,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=ai.ANY,this.result=new Ze,this.hasHit=!1,this.callback=t=>{}}intersectWorld(t,e){return this.mode=e.mode||ai.ANY,this.result=e.result||new Ze,this.skipBackfaces=!!e.skipBackfaces,this.collisionFilterMask=void 0!==e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionFilterGroup=void 0!==e.collisionFilterGroup?e.collisionFilterGroup:-1,this.checkCollisionResponse=void 0===e.checkCollisionResponse||e.checkCollisionResponse,e.from&&this.from.copy(e.from),e.to&&this.to.copy(e.to),this.callback=e.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(hi),li.length=0,t.broadphase.aabbQuery(t,hi,li),this.intersectBodies(li),this.hasHit}intersectBody(t,e){e&&(this.result=e,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!t.collisionResponse)return;if(0==(this.collisionFilterGroup&t.collisionFilterMask)||0==(t.collisionFilterGroup&this.collisionFilterMask))return;const n=di,r=pi;for(let e=0,s=t.shapes.length;e<s;e++){const s=t.shapes[e];if((!i||s.collisionResponse)&&(t.quaternion.mult(t.shapeOrientations[e],r),t.quaternion.vmult(t.shapeOffsets[e],n),n.vadd(t.position,n),this.intersectShape(s,r,n,t),this.result.shouldStop))break}}intersectBodies(t,e){e&&(this.result=e,this.updateDirection());for(let e=0,i=t.length;!this.result.shouldStop&&e<i;e++)this.intersectBody(t[e])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(t,e,i,n){if(function(t,e,i){i.vsub(t,Di);const n=Di.dot(e);e.scale(n,Bi),Bi.vadd(t,Bi);return i.distanceTo(Bi)}(this.from,this.direction,i)>t.boundingSphereRadius)return;const r=this[t.type];r&&r.call(this,t,e,i,n,t)}_intersectBox(t,e,i,n,r){return this._intersectConvex(t.convexPolyhedronRepresentation,e,i,n,r)}_intersectPlane(t,e,i,n,r){const s=this.from,o=this.to,a=this.direction,h=new re(0,0,1);e.vmult(h,h);const l=new re;s.vsub(i,l);const u=l.dot(h);o.vsub(i,l);if(u*l.dot(h)>0)return;if(s.distanceTo(o)<u)return;const c=h.dot(a);if(Math.abs(c)<this.precision)return;const d=new re,p=new re,f=new re;s.vsub(i,d);const m=-h.dot(d)/c;a.scale(m,p),s.vadd(p,f),this.reportIntersection(h,f,r,n,-1)}getAABB(t){const{lowerBound:e,upperBound:i}=t,n=this.to,r=this.from;e.x=Math.min(n.x,r.x),e.y=Math.min(n.y,r.y),e.z=Math.min(n.z,r.z),i.x=Math.max(n.x,r.x),i.y=Math.max(n.y,r.y),i.z=Math.max(n.z,r.z)}_intersectHeightfield(t,e,i,n,r){t.data,t.elementSize;const s=xi;s.from.copy(this.from),s.to.copy(this.to),ye.pointToLocalFrame(i,e,s.from,s.from),ye.pointToLocalFrame(i,e,s.to,s.to),s.updateDirection();const o=wi;let a,h,l,u;a=h=0,l=u=t.data.length-1;const c=new he;s.getAABB(c),t.getIndexOfPosition(c.lowerBound.x,c.lowerBound.y,o,!0),a=Math.max(a,o[0]),h=Math.max(h,o[1]),t.getIndexOfPosition(c.upperBound.x,c.upperBound.y,o,!0),l=Math.min(l,o[0]+1),u=Math.min(u,o[1]+1);for(let o=a;o<l;o++)for(let a=h;a<u;a++){if(this.result.shouldStop)return;if(t.getAabbAtIndex(o,a,c),c.overlapsRay(s)){if(t.getConvexTrianglePillar(o,a,!1),ye.pointToWorldFrame(i,e,t.pillarOffset,Ai),this._intersectConvex(t.pillarConvex,e,Ai,n,r,yi),this.result.shouldStop)return;t.getConvexTrianglePillar(o,a,!0),ye.pointToWorldFrame(i,e,t.pillarOffset,Ai),this._intersectConvex(t.pillarConvex,e,Ai,n,r,yi)}}}_intersectSphere(t,e,i,n,r){const s=this.from,o=this.to,a=t.radius,h=(o.x-s.x)**2+(o.y-s.y)**2+(o.z-s.z)**2,l=2*((o.x-s.x)*(s.x-i.x)+(o.y-s.y)*(s.y-i.y)+(o.z-s.z)*(s.z-i.z)),u=l**2-4*h*((s.x-i.x)**2+(s.y-i.y)**2+(s.z-i.z)**2-a**2),c=bi,d=Si;if(!(u<0))if(0===u)s.lerp(o,u,c),c.vsub(i,d),d.normalize(),this.reportIntersection(d,c,r,n,-1);else{const t=(-l-Math.sqrt(u))/(2*h),e=(-l+Math.sqrt(u))/(2*h);if(t>=0&&t<=1&&(s.lerp(o,t,c),c.vsub(i,d),d.normalize(),this.reportIntersection(d,c,r,n,-1)),this.result.shouldStop)return;e>=0&&e<=1&&(s.lerp(o,e,c),c.vsub(i,d),d.normalize(),this.reportIntersection(d,c,r,n,-1))}}_intersectConvex(t,e,i,n,r,s){const o=Ei,a=Ti,h=s&&s.faceList||null,l=t.faces,u=t.vertices,c=t.faceNormals,d=this.direction,p=this.from,f=this.to,m=p.distanceTo(f),g=h?h.length:l.length,v=this.result;for(let t=0;!v.shouldStop&&t<g;t++){const s=h?h[t]:t,f=l[s],g=c[s],y=e,A=i;a.copy(u[f[0]]),y.vmult(a,a),a.vadd(A,a),a.vsub(p,a),y.vmult(g,o);const x=d.dot(o);if(Math.abs(x)<this.precision)continue;const w=o.dot(a)/x;if(!(w<0)){d.scale(w,fi),fi.vadd(p,fi),mi.copy(u[f[0]]),y.vmult(mi,mi),A.vadd(mi,mi);for(let t=1;!v.shouldStop&&t<f.length-1;t++){gi.copy(u[f[t]]),vi.copy(u[f[t+1]]),y.vmult(gi,gi),y.vmult(vi,vi),A.vadd(gi,gi),A.vadd(vi,vi);const e=fi.distanceTo(p);!ai.pointInTriangle(fi,mi,gi,vi)&&!ai.pointInTriangle(fi,gi,mi,vi)||e>m||this.reportIntersection(o,fi,r,n,s)}}}}_intersectTrimesh(t,e,i,n,r,s){const o=_i,a=Li,h=Ii,l=Ti,u=Mi,c=Ci,d=Pi,p=Oi,f=Ri,m=t.indices;t.vertices;const g=this.from,v=this.to,y=this.direction;h.position.copy(i),h.quaternion.copy(e),ye.vectorToLocalFrame(i,e,y,u),ye.pointToLocalFrame(i,e,g,c),ye.pointToLocalFrame(i,e,v,d),d.x*=t.scale.x,d.y*=t.scale.y,d.z*=t.scale.z,c.x*=t.scale.x,c.y*=t.scale.y,c.z*=t.scale.z,d.vsub(c,u),u.normalize();const A=c.distanceSquared(d);t.tree.rayQuery(this,h,a);for(let s=0,h=a.length;!this.result.shouldStop&&s!==h;s++){const h=a[s];t.getNormal(h,o),t.getVertex(m[3*h],mi),mi.vsub(c,l);const d=u.dot(o),g=o.dot(l)/d;if(g<0)continue;u.scale(g,fi),fi.vadd(c,fi),t.getVertex(m[3*h+1],gi),t.getVertex(m[3*h+2],vi);const v=fi.distanceSquared(c);!ai.pointInTriangle(fi,gi,mi,vi)&&!ai.pointInTriangle(fi,mi,gi,vi)||v>A||(ye.vectorToWorldFrame(e,o,f),ye.pointToWorldFrame(i,e,fi,p),this.reportIntersection(f,p,r,n,h))}a.length=0}reportIntersection(t,e,i,n,r){const s=this.from,o=this.to,a=s.distanceTo(e),h=this.result;if(!(this.skipBackfaces&&t.dot(this.direction)>0))switch(h.hitFaceIndex=void 0!==r?r:-1,this.mode){case ai.ALL:this.hasHit=!0,h.set(s,o,t,e,i,n,a),h.hasHit=!0,this.callback(h);break;case ai.CLOSEST:(a<h.distance||!h.hasHit)&&(this.hasHit=!0,h.hasHit=!0,h.set(s,o,t,e,i,n,a));break;case ai.ANY:this.hasHit=!0,h.hasHit=!0,h.set(s,o,t,e,i,n,a),h.shouldStop=!0}}static pointInTriangle(t,e,i,n){n.vsub(e,Di),i.vsub(e,ui),t.vsub(e,ci);const r=Di.dot(Di),s=Di.dot(ui),o=Di.dot(ci),a=ui.dot(ui),h=ui.dot(ci);let l,u;return(l=a*o-s*h)>=0&&(u=r*h-s*o)>=0&&l+u<r*a-s*s}}ai.CLOSEST=oi.CLOSEST,ai.ANY=oi.ANY,ai.ALL=oi.ALL;const hi=new he,li=[],ui=new re,ci=new re,di=new re,pi=new pe,fi=new re,mi=new re,gi=new re,vi=new re;new re,new Ze;const yi={faceList:[0]},Ai=new re,xi=new ai,wi=[],bi=new re,Si=new re,Ei=new re,Ti=(new re,new re,new re),_i=new re,Mi=new re,Ci=new re,Pi=new re,Ri=new re,Oi=new re;new he;const Li=[],Ii=new ye,Di=new re,Bi=new re;class ki extends We{static checkBounds(t,e,i){let n,r;0===i?(n=t.position.x,r=e.position.x):1===i?(n=t.position.y,r=e.position.y):2===i&&(n=t.position.z,r=e.position.z);const s=t.boundingRadius;return r-e.boundingRadius<n+s}static insertionSortX(t){for(let e=1,i=t.length;e<i;e++){const i=t[e];let n;for(n=e-1;n>=0&&!(t[n].aabb.lowerBound.x<=i.aabb.lowerBound.x);n--)t[n+1]=t[n];t[n+1]=i}return t}static insertionSortY(t){for(let e=1,i=t.length;e<i;e++){const i=t[e];let n;for(n=e-1;n>=0&&!(t[n].aabb.lowerBound.y<=i.aabb.lowerBound.y);n--)t[n+1]=t[n];t[n+1]=i}return t}static insertionSortZ(t){for(let e=1,i=t.length;e<i;e++){const i=t[e];let n;for(n=e-1;n>=0&&!(t[n].aabb.lowerBound.z<=i.aabb.lowerBound.z);n--)t[n+1]=t[n];t[n+1]=i}return t}constructor(t){super(),this.axisList=[],this.world=null,this.axisIndex=0;const e=this.axisList;this._addBodyHandler=t=>{e.push(t.body)},this._removeBodyHandler=t=>{const i=e.indexOf(t.body);-1!==i&&e.splice(i,1)},t&&this.setWorld(t)}setWorld(t){this.axisList.length=0;for(let e=0;e<t.bodies.length;e++)this.axisList.push(t.bodies[e]);t.removeEventListener("addBody",this._addBodyHandler),t.removeEventListener("removeBody",this._removeBodyHandler),t.addEventListener("addBody",this._addBodyHandler),t.addEventListener("removeBody",this._removeBodyHandler),this.world=t,this.dirty=!0}collisionPairs(t,e,i){const n=this.axisList,r=n.length,s=this.axisIndex;let o,a;for(this.dirty&&(this.sortList(),this.dirty=!1),o=0;o!==r;o++){const t=n[o];for(a=o+1;a<r;a++){const r=n[a];if(this.needBroadphaseCollision(t,r)){if(!ki.checkBounds(t,r,s))break;this.intersectionTest(t,r,e,i)}}}}sortList(){const t=this.axisList,e=this.axisIndex,i=t.length;for(let e=0;e!==i;e++){const i=t[e];i.aabbNeedsUpdate&&i.updateAABB()}0===e?ki.insertionSortX(t):1===e?ki.insertionSortY(t):2===e&&ki.insertionSortZ(t)}autoDetectAxis(){let t=0,e=0,i=0,n=0,r=0,s=0;const o=this.axisList,a=o.length,h=1/a;for(let h=0;h!==a;h++){const a=o[h],l=a.position.x;t+=l,e+=l*l;const u=a.position.y;i+=u,n+=u*u;const c=a.position.z;r+=c,s+=c*c}const l=e-t*t*h,u=n-i*i*h,c=s-r*r*h;this.axisIndex=l>u?l>c?0:2:u>c?1:2}aabbQuery(t,e,i){void 0===i&&(i=[]),this.dirty&&(this.sortList(),this.dirty=!1);const n=this.axisIndex;let r="x";1===n&&(r="y"),2===n&&(r="z");const s=this.axisList;e.lowerBound[r],e.upperBound[r];for(let t=0;t<s.length;t++){const n=s[t];n.aabbNeedsUpdate&&n.updateAABB(),n.aabb.overlaps(e)&&i.push(n)}return i}}class Fi{static defaults(t,e){void 0===t&&(t={});for(let i in e)i in t||(t[i]=e[i]);return t}}class Ni{constructor(t,e,i){void 0===i&&(i={}),i=Fi.defaults(i,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=t,this.bodyB=e,this.id=Ni.idCounter++,this.collideConnected=i.collideConnected,i.wakeUpBodies&&(t&&t.wakeUp(),e&&e.wakeUp())}update(){throw new Error("method update() not implmemented in this Constraint subclass!")}enable(){const t=this.equations;for(let e=0;e<t.length;e++)t[e].enabled=!0}disable(){const t=this.equations;for(let e=0;e<t.length;e++)t[e].enabled=!1}}Ni.idCounter=0;class zi{constructor(){this.spatial=new re,this.rotational=new re}multiplyElement(t){return t.spatial.dot(this.spatial)+t.rotational.dot(this.rotational)}multiplyVectors(t,e){return t.dot(this.spatial)+e.dot(this.rotational)}}class Ui{constructor(t,e,i,n){void 0===i&&(i=-1e6),void 0===n&&(n=1e6),this.id=Ui.idCounter++,this.minForce=i,this.maxForce=n,this.bi=t,this.bj=e,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new zi,this.jacobianElementB=new zi,this.enabled=!0,this.multiplier=0,this.setSpookParams(1e7,4,1/60)}setSpookParams(t,e,i){const n=e,r=t,s=i;this.a=4/(s*(1+4*n)),this.b=4*n/(1+4*n),this.eps=4/(s*s*r*(1+4*n))}computeB(t,e,i){const n=this.computeGW();return-this.computeGq()*t-n*e-this.computeGiMf()*i}computeGq(){const t=this.jacobianElementA,e=this.jacobianElementB,i=this.bi,n=this.bj,r=i.position,s=n.position;return t.spatial.dot(r)+e.spatial.dot(s)}computeGW(){const t=this.jacobianElementA,e=this.jacobianElementB,i=this.bi,n=this.bj,r=i.velocity,s=n.velocity,o=i.angularVelocity,a=n.angularVelocity;return t.multiplyVectors(r,o)+e.multiplyVectors(s,a)}computeGWlambda(){const t=this.jacobianElementA,e=this.jacobianElementB,i=this.bi,n=this.bj,r=i.vlambda,s=n.vlambda,o=i.wlambda,a=n.wlambda;return t.multiplyVectors(r,o)+e.multiplyVectors(s,a)}computeGiMf(){const t=this.jacobianElementA,e=this.jacobianElementB,i=this.bi,n=this.bj,r=i.force,s=i.torque,o=n.force,a=n.torque,h=i.invMassSolve,l=n.invMassSolve;return r.scale(h,Gi),o.scale(l,Vi),i.invInertiaWorldSolve.vmult(s,Hi),n.invInertiaWorldSolve.vmult(a,Wi),t.multiplyVectors(Gi,Hi)+e.multiplyVectors(Vi,Wi)}computeGiMGt(){const t=this.jacobianElementA,e=this.jacobianElementB,i=this.bi,n=this.bj,r=i.invMassSolve,s=n.invMassSolve,o=i.invInertiaWorldSolve,a=n.invInertiaWorldSolve;let h=r+s;return o.vmult(t.rotational,ji),h+=ji.dot(t.rotational),a.vmult(e.rotational,ji),h+=ji.dot(e.rotational),h}addToWlambda(t){const e=this.jacobianElementA,i=this.jacobianElementB,n=this.bi,r=this.bj,s=Yi;n.vlambda.addScaledVector(n.invMassSolve*t,e.spatial,n.vlambda),r.vlambda.addScaledVector(r.invMassSolve*t,i.spatial,r.vlambda),n.invInertiaWorldSolve.vmult(e.rotational,s),n.wlambda.addScaledVector(t,s,n.wlambda),r.invInertiaWorldSolve.vmult(i.rotational,s),r.wlambda.addScaledVector(t,s,r.wlambda)}computeC(){return this.computeGiMGt()+this.eps}}Ui.idCounter=0;const Gi=new re,Vi=new re,Hi=new re,Wi=new re,ji=new re,Yi=new re;class Xi extends Ui{constructor(t,e,i){void 0===i&&(i=1e6),super(t,e,0,i),this.restitution=0,this.ri=new re,this.rj=new re,this.ni=new re}computeB(t){const e=this.a,i=this.b,n=this.bi,r=this.bj,s=this.ri,o=this.rj,a=qi,h=Ji,l=n.velocity,u=n.angularVelocity;n.force,n.torque;const c=r.velocity,d=r.angularVelocity;r.force,r.torque;const p=Qi,f=this.jacobianElementA,m=this.jacobianElementB,g=this.ni;s.cross(g,a),o.cross(g,h),g.negate(f.spatial),a.negate(f.rotational),m.spatial.copy(g),m.rotational.copy(h),p.copy(r.position),p.vadd(o,p),p.vsub(n.position,p),p.vsub(s,p);const v=g.dot(p),y=this.restitution+1;return-v*e-(y*c.dot(g)-y*l.dot(g)+d.dot(h)-u.dot(a))*i-t*this.computeGiMf()}getImpactVelocityAlongNormal(){const t=Ki,e=Zi,i=$i,n=tn,r=en;return this.bi.position.vadd(this.ri,i),this.bj.position.vadd(this.rj,n),this.bi.getVelocityAtWorldPoint(i,t),this.bj.getVelocityAtWorldPoint(n,e),t.vsub(e,r),this.ni.dot(r)}}const qi=new re,Ji=new re,Qi=new re,Ki=new re,Zi=new re,$i=new re,tn=new re,en=new re;class nn extends Ni{constructor(t,e,i,n,r){void 0===e&&(e=new re),void 0===n&&(n=new re),void 0===r&&(r=1e6),super(t,i),this.pivotA=e.clone(),this.pivotB=n.clone();const s=this.equationX=new Xi(t,i),o=this.equationY=new Xi(t,i),a=this.equationZ=new Xi(t,i);this.equations.push(s,o,a),s.minForce=o.minForce=a.minForce=-r,s.maxForce=o.maxForce=a.maxForce=r,s.ni.set(1,0,0),o.ni.set(0,1,0),a.ni.set(0,0,1)}update(){const t=this.bodyA,e=this.bodyB,i=this.equationX,n=this.equationY,r=this.equationZ;t.quaternion.vmult(this.pivotA,i.ri),e.quaternion.vmult(this.pivotB,i.rj),n.ri.copy(i.ri),n.rj.copy(i.rj),r.ri.copy(i.ri),r.rj.copy(i.rj)}}class rn extends Ui{constructor(t,e,i){void 0===i&&(i={});const n=void 0!==i.maxForce?i.maxForce:1e6;super(t,e,-n,n),this.axisA=i.axisA?i.axisA.clone():new re(1,0,0),this.axisB=i.axisB?i.axisB.clone():new re(0,1,0),this.angle=void 0!==i.angle?i.angle:0}computeB(t){const e=this.a,i=this.b,n=this.axisA,r=this.axisB,s=sn,o=on,a=this.jacobianElementA,h=this.jacobianElementB;n.cross(r,s),r.cross(n,o),a.rotational.copy(o),h.rotational.copy(s);return-(Math.cos(this.angle)-n.dot(r))*e-this.computeGW()*i-t*this.computeGiMf()}}const sn=new re,on=new re;class an extends Ui{constructor(t,e,i){void 0===i&&(i={});const n=void 0!==i.maxForce?i.maxForce:1e6;super(t,e,-n,n),this.axisA=i.axisA?i.axisA.clone():new re(1,0,0),this.axisB=i.axisB?i.axisB.clone():new re(0,1,0),this.maxAngle=Math.PI/2}computeB(t){const e=this.a,i=this.b,n=this.axisA,r=this.axisB,s=hn,o=ln,a=this.jacobianElementA,h=this.jacobianElementB;n.cross(r,s),r.cross(n,o),a.rotational.copy(o),h.rotational.copy(s);return-(Math.cos(this.maxAngle)-n.dot(r))*e-this.computeGW()*i-t*this.computeGiMf()}}const hn=new re,ln=new re;class un extends nn{constructor(t,e,i){void 0===i&&(i={});const n=void 0!==i.maxForce?i.maxForce:1e6;super(t,i.pivotA?i.pivotA.clone():new re,e,i.pivotB?i.pivotB.clone():new re,n),this.axisA=i.axisA?i.axisA.clone():new re,this.axisB=i.axisB?i.axisB.clone():new re,this.collideConnected=!!i.collideConnected,this.angle=void 0!==i.angle?i.angle:0;const r=this.coneEquation=new rn(t,e,i),s=this.twistEquation=new an(t,e,i);this.twistAngle=void 0!==i.twistAngle?i.twistAngle:0,r.maxForce=0,r.minForce=-n,s.maxForce=0,s.minForce=-n,this.equations.push(r,s)}update(){const t=this.bodyA,e=this.bodyB,i=this.coneEquation,n=this.twistEquation;super.update(),t.vectorToWorldFrame(this.axisA,i.axisA),e.vectorToWorldFrame(this.axisB,i.axisB),this.axisA.tangents(n.axisA,n.axisA),t.vectorToWorldFrame(n.axisA,n.axisA),this.axisB.tangents(n.axisB,n.axisB),e.vectorToWorldFrame(n.axisB,n.axisB),i.angle=this.angle,n.maxAngle=this.twistAngle}}new re,new re;class cn extends Ni{constructor(t,e,i,n){void 0===n&&(n=1e6),super(t,e),void 0===i&&(i=t.position.distanceTo(e.position)),this.distance=i;const r=this.distanceEquation=new Xi(t,e);this.equations.push(r),r.minForce=-n,r.maxForce=n}update(){const t=this.bodyA,e=this.bodyB,i=this.distanceEquation,n=.5*this.distance,r=i.ni;e.position.vsub(t.position,r),r.normalize(),r.scale(n,i.ri),r.scale(-n,i.rj)}}class dn extends nn{constructor(t,e,i){void 0===i&&(i={});const n=void 0!==i.maxForce?i.maxForce:1e6,r=new re,s=new re,o=new re;t.position.vadd(e.position,o),o.scale(.5,o),e.pointToLocalFrame(o,s),t.pointToLocalFrame(o,r),super(t,r,e,s,n),this.xA=t.vectorToLocalFrame(re.UNIT_X),this.xB=e.vectorToLocalFrame(re.UNIT_X),this.yA=t.vectorToLocalFrame(re.UNIT_Y),this.yB=e.vectorToLocalFrame(re.UNIT_Y),this.zA=t.vectorToLocalFrame(re.UNIT_Z),this.zB=e.vectorToLocalFrame(re.UNIT_Z);const a=this.rotationalEquation1=new an(t,e,i),h=this.rotationalEquation2=new an(t,e,i),l=this.rotationalEquation3=new an(t,e,i);this.equations.push(a,h,l)}update(){const t=this.bodyA,e=this.bodyB;this.motorEquation;const i=this.rotationalEquation1,n=this.rotationalEquation2,r=this.rotationalEquation3;super.update(),t.vectorToWorldFrame(this.xA,i.axisA),e.vectorToWorldFrame(this.yB,i.axisB),t.vectorToWorldFrame(this.yA,n.axisA),e.vectorToWorldFrame(this.zB,n.axisB),t.vectorToWorldFrame(this.zA,r.axisA),e.vectorToWorldFrame(this.xB,r.axisB)}}new re,new re;class pn extends Ui{constructor(t,e,i){void 0===i&&(i=1e6),super(t,e,-i,i),this.axisA=new re,this.axisB=new re,this.targetVelocity=0}computeB(t){this.a;const e=this.b;this.bi,this.bj;const i=this.axisA,n=this.axisB,r=this.jacobianElementA,s=this.jacobianElementB;r.rotational.copy(i),n.negate(s.rotational);return-(this.computeGW()-this.targetVelocity)*e-t*this.computeGiMf()}}class fn extends nn{constructor(t,e,i){void 0===i&&(i={});const n=void 0!==i.maxForce?i.maxForce:1e6;super(t,i.pivotA?i.pivotA.clone():new re,e,i.pivotB?i.pivotB.clone():new re,n);(this.axisA=i.axisA?i.axisA.clone():new re(1,0,0)).normalize();(this.axisB=i.axisB?i.axisB.clone():new re(1,0,0)).normalize(),this.collideConnected=!!i.collideConnected;const r=this.rotationalEquation1=new an(t,e,i),s=this.rotationalEquation2=new an(t,e,i),o=this.motorEquation=new pn(t,e,n);o.enabled=!1,this.equations.push(r,s,o)}enableMotor(){this.motorEquation.enabled=!0}disableMotor(){this.motorEquation.enabled=!1}setMotorSpeed(t){this.motorEquation.targetVelocity=t}setMotorMaxForce(t){this.motorEquation.maxForce=t,this.motorEquation.minForce=-t}update(){const t=this.bodyA,e=this.bodyB,i=this.motorEquation,n=this.rotationalEquation1,r=this.rotationalEquation2,s=mn,o=gn,a=this.axisA,h=this.axisB;super.update(),t.quaternion.vmult(a,s),e.quaternion.vmult(h,o),s.tangents(n.axisA,r.axisA),n.axisB.copy(o),r.axisB.copy(o),this.motorEquation.enabled&&(t.quaternion.vmult(this.axisA,i.axisA),e.quaternion.vmult(this.axisB,i.axisB))}}const mn=new re,gn=new re;class vn extends Ui{constructor(t,e,i){super(t,e,-i,i),this.ri=new re,this.rj=new re,this.t=new re}computeB(t){this.a;const e=this.b;this.bi,this.bj;const i=this.ri,n=this.rj,r=yn,s=An,o=this.t;i.cross(o,r),n.cross(o,s);const a=this.jacobianElementA,h=this.jacobianElementB;o.negate(a.spatial),r.negate(a.rotational),h.spatial.copy(o),h.rotational.copy(s);return-this.computeGW()*e-t*this.computeGiMf()}}const yn=new re,An=new re;class xn{constructor(t,e,i){i=Fi.defaults(i,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=xn.idCounter++,this.materials=[t,e],this.friction=i.friction,this.restitution=i.restitution,this.contactEquationStiffness=i.contactEquationStiffness,this.contactEquationRelaxation=i.contactEquationRelaxation,this.frictionEquationStiffness=i.frictionEquationStiffness,this.frictionEquationRelaxation=i.frictionEquationRelaxation}}xn.idCounter=0;class wn{constructor(t){void 0===t&&(t={});let e="";"string"==typeof t&&(e=t,t={}),this.name=e,this.id=wn.idCounter++,this.friction=void 0!==t.friction?t.friction:-1,this.restitution=void 0!==t.restitution?t.restitution:-1}}wn.idCounter=0;class bn{constructor(t,e,i){void 0===i&&(i={}),this.restLength="number"==typeof i.restLength?i.restLength:1,this.stiffness=i.stiffness||100,this.damping=i.damping||1,this.bodyA=t,this.bodyB=e,this.localAnchorA=new re,this.localAnchorB=new re,i.localAnchorA&&this.localAnchorA.copy(i.localAnchorA),i.localAnchorB&&this.localAnchorB.copy(i.localAnchorB),i.worldAnchorA&&this.setWorldAnchorA(i.worldAnchorA),i.worldAnchorB&&this.setWorldAnchorB(i.worldAnchorB)}setWorldAnchorA(t){this.bodyA.pointToLocalFrame(t,this.localAnchorA)}setWorldAnchorB(t){this.bodyB.pointToLocalFrame(t,this.localAnchorB)}getWorldAnchorA(t){this.bodyA.pointToWorldFrame(this.localAnchorA,t)}getWorldAnchorB(t){this.bodyB.pointToWorldFrame(this.localAnchorB,t)}applyForce(){const t=this.stiffness,e=this.damping,i=this.restLength,n=this.bodyA,r=this.bodyB,s=Sn,o=En,a=Tn,h=_n,l=In,u=Mn,c=Cn,d=Pn,p=Rn,f=On,m=Ln;this.getWorldAnchorA(u),this.getWorldAnchorB(c),u.vsub(n.position,d),c.vsub(r.position,p),c.vsub(u,s);const g=s.length();o.copy(s),o.normalize(),r.velocity.vsub(n.velocity,a),r.angularVelocity.cross(p,l),a.vadd(l,a),n.angularVelocity.cross(d,l),a.vsub(l,a),o.scale(-t*(g-i)-e*a.dot(o),h),n.force.vsub(h,n.force),r.force.vadd(h,r.force),d.cross(h,f),p.cross(h,m),n.torque.vsub(f,n.torque),r.torque.vadd(m,r.torque)}}const Sn=new re,En=new re,Tn=new re,_n=new re,Mn=new re,Cn=new re,Pn=new re,Rn=new re,On=new re,Ln=new re,In=new re;class Dn{constructor(t){void 0===t&&(t={}),t=Fi.defaults(t,{chassisConnectionPointLocal:new re,chassisConnectionPointWorld:new re,directionLocal:new re,directionWorld:new re,axleLocal:new re,axleWorld:new re,suspensionRestLength:1,suspensionMaxLength:2,radius:1,suspensionStiffness:100,dampingCompression:10,dampingRelaxation:10,frictionSlip:10.5,forwardAcceleration:1,sideAcceleration:1,steering:0,rotation:0,deltaRotation:0,rollInfluence:.01,maxSuspensionForce:Number.MAX_VALUE,isFrontWheel:!0,clippedInvContactDotSuspension:1,suspensionRelativeVelocity:0,suspensionForce:0,slipInfo:0,skidInfo:0,suspensionLength:0,maxSuspensionTravel:1,useCustomSlidingRotationalSpeed:!1,customSlidingRotationalSpeed:-.1}),this.maxSuspensionTravel=t.maxSuspensionTravel,this.customSlidingRotationalSpeed=t.customSlidingRotationalSpeed,this.useCustomSlidingRotationalSpeed=t.useCustomSlidingRotationalSpeed,this.sliding=!1,this.chassisConnectionPointLocal=t.chassisConnectionPointLocal.clone(),this.chassisConnectionPointWorld=t.chassisConnectionPointWorld.clone(),this.directionLocal=t.directionLocal.clone(),this.directionWorld=t.directionWorld.clone(),this.axleLocal=t.axleLocal.clone(),this.axleWorld=t.axleWorld.clone(),this.suspensionRestLength=t.suspensionRestLength,this.suspensionMaxLength=t.suspensionMaxLength,this.radius=t.radius,this.suspensionStiffness=t.suspensionStiffness,this.dampingCompression=t.dampingCompression,this.dampingRelaxation=t.dampingRelaxation,this.frictionSlip=t.frictionSlip,this.forwardAcceleration=t.forwardAcceleration,this.sideAcceleration=t.sideAcceleration,this.steering=0,this.rotation=0,this.deltaRotation=0,this.rollInfluence=t.rollInfluence,this.maxSuspensionForce=t.maxSuspensionForce,this.engineForce=0,this.brake=0,this.isFrontWheel=t.isFrontWheel,this.clippedInvContactDotSuspension=1,this.suspensionRelativeVelocity=0,this.suspensionForce=0,this.slipInfo=0,this.skidInfo=0,this.suspensionLength=0,this.sideImpulse=0,this.forwardImpulse=0,this.raycastResult=new Ze,this.worldTransform=new ye,this.isInContact=!1}updateWheel(t){const e=this.raycastResult;if(this.isInContact){const i=e.hitNormalWorld.dot(e.directionWorld);e.hitPointWorld.vsub(t.position,kn),t.getVelocityAtWorldPoint(kn,Bn);const n=e.hitNormalWorld.dot(Bn);if(i>=-.1)this.suspensionRelativeVelocity=0,this.clippedInvContactDotSuspension=10;else{const t=-1/i;this.suspensionRelativeVelocity=n*t,this.clippedInvContactDotSuspension=t}}else e.suspensionLength=this.suspensionRestLength,this.suspensionRelativeVelocity=0,e.directionWorld.scale(-1,e.hitNormalWorld),this.clippedInvContactDotSuspension=1}}const Bn=new re,kn=new re;class Fn{constructor(t){this.chassisBody=t.chassisBody,this.wheelInfos=[],this.sliding=!1,this.world=null,this.indexRightAxis=void 0!==t.indexRightAxis?t.indexRightAxis:2,this.indexForwardAxis=void 0!==t.indexForwardAxis?t.indexForwardAxis:0,this.indexUpAxis=void 0!==t.indexUpAxis?t.indexUpAxis:1,this.constraints=[],this.preStepCallback=()=>{},this.currentVehicleSpeedKmHour=0,this.numWheelsOnGround=0}addWheel(t){void 0===t&&(t={});const e=new Dn(t),i=this.wheelInfos.length;return this.wheelInfos.push(e),i}setSteeringValue(t,e){this.wheelInfos[e].steering=t}applyEngineForce(t,e){this.wheelInfos[e].engineForce=t}setBrake(t,e){this.wheelInfos[e].brake=t}addToWorld(t){t.addBody(this.chassisBody);const e=this;this.preStepCallback=()=>{e.updateVehicle(t.dt)},t.addEventListener("preStep",this.preStepCallback),this.world=t}getVehicleAxisWorld(t,e){e.set(0===t?1:0,1===t?1:0,2===t?1:0),this.chassisBody.vectorToWorldFrame(e,e)}updateVehicle(t){const e=this.wheelInfos,i=e.length,n=this.chassisBody;for(let t=0;t<i;t++)this.updateWheelTransform(t);this.currentVehicleSpeedKmHour=3.6*n.velocity.length();const r=new re;this.getVehicleAxisWorld(this.indexForwardAxis,r),r.dot(n.velocity)<0&&(this.currentVehicleSpeedKmHour*=-1);for(let t=0;t<i;t++)this.castRay(e[t]);this.updateSuspension(t);const s=new re,o=new re;for(let r=0;r<i;r++){const i=e[r];let a=i.suspensionForce;a>i.maxSuspensionForce&&(a=i.maxSuspensionForce),i.raycastResult.hitNormalWorld.scale(a*t,s),i.raycastResult.hitPointWorld.vsub(n.position,o),n.applyImpulse(s,o)}this.updateFriction(t);const a=new re,h=new re,l=new re;for(let r=0;r<i;r++){const i=e[r];n.getVelocityAtWorldPoint(i.chassisConnectionPointWorld,l);let s=1;switch(this.indexUpAxis){case 1:s=-1}if(i.isInContact){this.getVehicleAxisWorld(this.indexForwardAxis,h);const e=h.dot(i.raycastResult.hitNormalWorld);i.raycastResult.hitNormalWorld.scale(e,a),h.vsub(a,h);const n=h.dot(l);i.deltaRotation=s*n*t/i.radius}!i.sliding&&i.isInContact||0===i.engineForce||!i.useCustomSlidingRotationalSpeed||(i.deltaRotation=(i.engineForce>0?1:-1)*i.customSlidingRotationalSpeed*t),Math.abs(i.brake)>Math.abs(i.engineForce)&&(i.deltaRotation=0),i.rotation+=i.deltaRotation,i.deltaRotation*=.99}}updateSuspension(t){const e=this.chassisBody.mass,i=this.wheelInfos,n=i.length;for(let t=0;t<n;t++){const n=i[t];if(n.isInContact){let t;const i=n.suspensionRestLength-n.suspensionLength;t=n.suspensionStiffness*i*n.clippedInvContactDotSuspension;const r=n.suspensionRelativeVelocity;let s;s=r<0?n.dampingCompression:n.dampingRelaxation,t-=s*r,n.suspensionForce=t*e,n.suspensionForce<0&&(n.suspensionForce=0)}else n.suspensionForce=0}}removeFromWorld(t){this.constraints,t.removeBody(this.chassisBody),t.removeEventListener("preStep",this.preStepCallback),this.world=null}castRay(t){const e=Gn,i=Vn;this.updateWheelTransformWorld(t);const n=this.chassisBody;let r=-1;const s=t.suspensionRestLength+t.radius;t.directionWorld.scale(s,e);const o=t.chassisConnectionPointWorld;o.vadd(e,i);const a=t.raycastResult;a.reset();const h=n.collisionResponse;n.collisionResponse=!1,this.world.rayTest(o,i,a),n.collisionResponse=h;const l=a.body;if(t.raycastResult.groundObject=0,l){r=a.distance,t.raycastResult.hitNormalWorld=a.hitNormalWorld,t.isInContact=!0;const e=a.distance;t.suspensionLength=e-t.radius;const i=t.suspensionRestLength-t.maxSuspensionTravel,s=t.suspensionRestLength+t.maxSuspensionTravel;t.suspensionLength<i&&(t.suspensionLength=i),t.suspensionLength>s&&(t.suspensionLength=s,t.raycastResult.reset());const o=t.raycastResult.hitNormalWorld.dot(t.directionWorld),h=new re;n.getVelocityAtWorldPoint(t.raycastResult.hitPointWorld,h);const l=t.raycastResult.hitNormalWorld.dot(h);if(o>=-.1)t.suspensionRelativeVelocity=0,t.clippedInvContactDotSuspension=10;else{const e=-1/o;t.suspensionRelativeVelocity=l*e,t.clippedInvContactDotSuspension=e}}else t.suspensionLength=t.suspensionRestLength+0*t.maxSuspensionTravel,t.suspensionRelativeVelocity=0,t.directionWorld.scale(-1,t.raycastResult.hitNormalWorld),t.clippedInvContactDotSuspension=1;return r}updateWheelTransformWorld(t){t.isInContact=!1;const e=this.chassisBody;e.pointToWorldFrame(t.chassisConnectionPointLocal,t.chassisConnectionPointWorld),e.vectorToWorldFrame(t.directionLocal,t.directionWorld),e.vectorToWorldFrame(t.axleLocal,t.axleWorld)}updateWheelTransform(t){const e=Nn,i=zn,n=Un,r=this.wheelInfos[t];this.updateWheelTransformWorld(r),r.directionLocal.scale(-1,e),i.copy(r.axleLocal),e.cross(i,n),n.normalize(),i.normalize();const s=r.steering,o=new pe;o.setFromAxisAngle(e,s);const a=new pe;a.setFromAxisAngle(i,r.rotation);const h=r.worldTransform.quaternion;this.chassisBody.quaternion.mult(o,h),h.mult(a,h),h.normalize();const l=r.worldTransform.position;l.copy(r.directionWorld),l.scale(r.suspensionLength,l),l.vadd(r.chassisConnectionPointWorld,l)}getWheelTransformWorld(t){return this.wheelInfos[t].worldTransform}updateFriction(t){const e=Wn,i=this.wheelInfos,n=i.length,r=this.chassisBody,s=Yn,o=jn;this.numWheelsOnGround=0;for(let t=0;t<n;t++){const e=i[t];e.raycastResult.body&&this.numWheelsOnGround++,e.sideImpulse=0,e.forwardImpulse=0,s[t]||(s[t]=new re),o[t]||(o[t]=new re)}for(let t=0;t<n;t++){const n=i[t],a=n.raycastResult.body;if(a){const i=o[t];this.getWheelTransformWorld(t).vectorToWorldFrame(Hn[this.indexRightAxis],i);const h=n.raycastResult.hitNormalWorld,l=i.dot(h);h.scale(l,e),i.vsub(e,i),i.normalize(),h.cross(i,s[t]),s[t].normalize(),n.sideImpulse=or(r,n.raycastResult.hitPointWorld,a,n.raycastResult.hitPointWorld,i),n.sideImpulse*=Xn}}this.sliding=!1;for(let e=0;e<n;e++){const n=i[e],o=n.raycastResult.body;let a=0;if(n.slipInfo=1,o){const i=0,h=n.brake?n.brake:i;a=Kn(r,o,n.raycastResult.hitPointWorld,s[e],h),a+=n.engineForce*t;const l=h/a;n.slipInfo*=l}if(n.forwardImpulse=0,n.skidInfo=1,o){n.skidInfo=1;const e=n.suspensionForce*t*n.frictionSlip,i=e*e;n.forwardImpulse=a;const r=.5*n.forwardImpulse/n.forwardAcceleration,s=1*n.sideImpulse/n.sideAcceleration,o=r*r+s*s;if(n.sliding=!1,o>i){this.sliding=!0,n.sliding=!0;const t=e/Math.sqrt(o);n.skidInfo*=t}}}if(this.sliding)for(let t=0;t<n;t++){const e=i[t];0!==e.sideImpulse&&e.skidInfo<1&&(e.forwardImpulse*=e.skidInfo,e.sideImpulse*=e.skidInfo)}for(let t=0;t<n;t++){const e=i[t],n=new re;if(e.raycastResult.hitPointWorld.vsub(r.position,n),0!==e.forwardImpulse){const i=new re;s[t].scale(e.forwardImpulse,i),r.applyImpulse(i,n)}if(0!==e.sideImpulse){const i=e.raycastResult.body,s=new re;e.raycastResult.hitPointWorld.vsub(i.position,s);const a=new re;o[t].scale(e.sideImpulse,a),r.vectorToLocalFrame(n,n),n["xyz"[this.indexUpAxis]]*=e.rollInfluence,r.vectorToWorldFrame(n,n),r.applyImpulse(a,n),a.scale(-1,a),i.applyImpulse(a,s)}}}}new re,new re,new re;const Nn=new re,zn=new re,Un=new re;new ai,new re;const Gn=new re,Vn=new re,Hn=[new re(1,0,0),new re(0,1,0),new re(0,0,1)],Wn=new re,jn=[],Yn=[],Xn=1,qn=new re,Jn=new re,Qn=new re;function Kn(t,e,i,n,r){let s=0;const o=i,a=qn,h=Jn,l=Qn;t.getVelocityAtWorldPoint(o,a),e.getVelocityAtWorldPoint(o,h),a.vsub(h,l);return s=-n.dot(l)*(1/(ir(t,i,n)+ir(e,i,n))),r<s&&(s=r),s<-r&&(s=-r),s}const Zn=new re,$n=new re,tr=new re,er=new re;function ir(t,e,i){const n=Zn,r=$n,s=tr,o=er;return e.vsub(t.position,n),n.cross(i,r),t.invInertiaWorld.vmult(r,o),o.cross(n,s),t.invMass+i.dot(s)}const nr=new re,rr=new re,sr=new re;function or(t,e,i,n,r){if(r.lengthSquared()>1.1)return 0;const s=nr,o=rr,a=sr;t.getVelocityAtWorldPoint(e,s),i.getVelocityAtWorldPoint(n,o),s.vsub(o,a);return-.2*r.dot(a)*(1/(t.invMass+i.invMass))}class ar extends ve{constructor(t){if(super({type:ve.types.SPHERE}),this.radius=void 0!==t?t:1,this.radius<0)throw new Error("The sphere radius cannot be negative.");this.updateBoundingSphereRadius()}calculateLocalInertia(t,e){void 0===e&&(e=new re);const i=2*t*this.radius*this.radius/5;return e.x=i,e.y=i,e.z=i,e}volume(){return 4*Math.PI*Math.pow(this.radius,3)/3}updateBoundingSphereRadius(){this.boundingSphereRadius=this.radius}calculateWorldAABB(t,e,i,n){const r=this.radius,s=["x","y","z"];for(let e=0;e<s.length;e++){const o=s[e];i[o]=t[o]-r,n[o]=t[o]+r}}}class hr{constructor(t){void 0===t&&(t={}),this.wheelBodies=[],this.coordinateSystem=void 0!==t.coordinateSystem?t.coordinateSystem.clone():new re(1,2,3),t.chassisBody?this.chassisBody=t.chassisBody:this.chassisBody=new Re({mass:1,shape:new Te(new re(5,.5,2))}),this.constraints=[],this.wheelAxes=[],this.wheelForces=[]}addWheel(t){let e;void 0===t&&(t={}),e=t.body?t.body:new Re({mass:1,shape:new ar(1.2)}),this.wheelBodies.push(e),this.wheelForces.push(0);const i=void 0!==t.position?t.position.clone():new re,n=new re;this.chassisBody.pointToWorldFrame(i,n),e.position.set(n.x,n.y,n.z);const r=void 0!==t.axis?t.axis.clone():new re(0,0,1);this.wheelAxes.push(r);const s=new fn(this.chassisBody,e,{pivotA:i,axisA:r,pivotB:re.ZERO,axisB:r,collideConnected:!1});return this.constraints.push(s),this.wheelBodies.length-1}setSteeringValue(t,e){const i=this.wheelAxes[e],n=Math.cos(t),r=Math.sin(t),s=i.x,o=i.z;this.constraints[e].axisA.set(-n*s+r*o,0,r*s+n*o)}setMotorSpeed(t,e){const i=this.constraints[e];i.enableMotor(),i.motorTargetVelocity=t}disableMotor(t){this.constraints[t].disableMotor()}setWheelForce(t,e){this.wheelForces[e]=t}applyWheelForce(t,e){const i=this.wheelAxes[e],n=this.wheelBodies[e],r=n.torque;i.scale(t,lr),n.vectorToWorldFrame(lr,lr),r.vadd(lr,r)}addToWorld(t){const e=this.constraints,i=this.wheelBodies.concat([this.chassisBody]);for(let e=0;e<i.length;e++)t.addBody(i[e]);for(let i=0;i<e.length;i++)t.addConstraint(e[i]);t.addEventListener("preStep",this._update.bind(this))}_update(){const t=this.wheelForces;for(let e=0;e<t.length;e++)this.applyWheelForce(t[e],e)}removeFromWorld(t){const e=this.constraints,i=this.wheelBodies.concat([this.chassisBody]);for(let e=0;e<i.length;e++)t.removeBody(i[e]);for(let i=0;i<e.length;i++)t.removeConstraint(e[i])}getWheelSpeed(t){const e=this.wheelAxes[t],i=this.wheelBodies[t].angularVelocity;return this.chassisBody.vectorToWorldFrame(e,ur),i.dot(ur)}}const lr=new re,ur=new re;class cr{constructor(){this.particles=[],this.density=1,this.smoothingRadius=1,this.speedOfSound=1,this.viscosity=.01,this.eps=1e-6,this.pressures=[],this.densities=[],this.neighbors=[]}add(t){this.particles.push(t),this.neighbors.length<this.particles.length&&this.neighbors.push([])}remove(t){const e=this.particles.indexOf(t);-1!==e&&(this.particles.splice(e,1),this.neighbors.length>this.particles.length&&this.neighbors.pop())}getNeighbors(t,e){const i=this.particles.length,n=t.id,r=this.smoothingRadius*this.smoothingRadius,s=dr;for(let o=0;o!==i;o++){const i=this.particles[o];i.position.vsub(t.position,s),n!==i.id&&s.lengthSquared()<r&&e.push(i)}}update(){const t=this.particles.length,e=pr,i=this.speedOfSound,n=this.eps;for(let n=0;n!==t;n++){const t=this.particles[n],r=this.neighbors[n];r.length=0,this.getNeighbors(t,r),r.push(this.particles[n]);const s=r.length;let o=0;for(let i=0;i!==s;i++){t.position.vsub(r[i].position,e);const n=e.length(),s=this.w(n);o+=r[i].mass*s}this.densities[n]=o,this.pressures[n]=i*i*(this.densities[n]-this.density)}const r=fr,s=mr,o=gr,a=vr,h=yr;for(let e=0;e!==t;e++){const t=this.particles[e];let i,l;r.set(0,0,0),s.set(0,0,0);const u=this.neighbors[e],c=u.length;for(let d=0;d!==c;d++){const c=u[d];t.position.vsub(c.position,a);const p=a.length();i=-c.mass*(this.pressures[e]/(this.densities[e]*this.densities[e]+n)+this.pressures[d]/(this.densities[d]*this.densities[d]+n)),this.gradw(a,o),o.scale(i,o),r.vadd(o,r),c.velocity.vsub(t.velocity,h),h.scale(1/(1e-4+this.densities[e]*this.densities[d])*this.viscosity*c.mass,h),l=this.nablaw(p),h.scale(l,h),s.vadd(h,s)}s.scale(t.mass,s),r.scale(t.mass,r),t.force.vadd(s,t.force),t.force.vadd(r,t.force)}}w(t){const e=this.smoothingRadius;return 315/(64*Math.PI*e**9)*(e*e-t*t)**3}gradw(t,e){const i=t.length(),n=this.smoothingRadius;t.scale(945/(32*Math.PI*n**9)*(n*n-i*i)**2,e)}nablaw(t){const e=this.smoothingRadius;return 945/(32*Math.PI*e**9)*(e*e-t*t)*(7*t*t-3*e*e)}}const dr=new re,pr=new re,fr=new re,mr=new re,gr=new re,vr=new re,yr=new re;class Ar extends xe{constructor(t,e,i,n){if(void 0===t&&(t=1),void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=8),t<0)throw new Error("The cylinder radiusTop cannot be negative.");if(e<0)throw new Error("The cylinder radiusBottom cannot be negative.");const r=n,s=[],o=[],a=[],h=[],l=[],u=Math.cos,c=Math.sin;s.push(new re(-e*c(0),.5*-i,e*u(0))),h.push(0),s.push(new re(-t*c(0),.5*i,t*u(0))),l.push(1);for(let n=0;n<r;n++){const d=2*Math.PI/r*(n+1),p=2*Math.PI/r*(n+.5);n<r-1?(s.push(new re(-e*c(d),.5*-i,e*u(d))),h.push(2*n+2),s.push(new re(-t*c(d),.5*i,t*u(d))),l.push(2*n+3),a.push([2*n,2*n+1,2*n+3,2*n+2])):a.push([2*n,2*n+1,1,0]),(r%2==1||n<r/2)&&o.push(new re(-c(p),0,u(p)))}a.push(h),o.push(new re(0,1,0));const d=[];for(let t=0;t<l.length;t++)d.push(l[l.length-t-1]);a.push(d),super({vertices:s,faces:a,axes:o}),this.type=ve.types.CYLINDER,this.radiusTop=t,this.radiusBottom=e,this.height=i,this.numSegments=n}}class xr extends ve{constructor(){super({type:ve.types.PARTICLE})}calculateLocalInertia(t,e){return void 0===e&&(e=new re),e.set(0,0,0),e}volume(){return 0}updateBoundingSphereRadius(){this.boundingSphereRadius=0}calculateWorldAABB(t,e,i,n){i.copy(t),n.copy(t)}}class wr extends ve{constructor(){super({type:ve.types.PLANE}),this.worldNormal=new re,this.worldNormalNeedsUpdate=!0,this.boundingSphereRadius=Number.MAX_VALUE}computeWorldNormal(t){const e=this.worldNormal;e.set(0,0,1),t.vmult(e,e),this.worldNormalNeedsUpdate=!1}calculateLocalInertia(t,e){return void 0===e&&(e=new re),e}volume(){return Number.MAX_VALUE}calculateWorldAABB(t,e,i,n){br.set(0,0,1),e.vmult(br,br);const r=Number.MAX_VALUE;i.set(-r,-r,-r),n.set(r,r,r),1===br.x?n.x=t.x:-1===br.x&&(i.x=t.x),1===br.y?n.y=t.y:-1===br.y&&(i.y=t.y),1===br.z?n.z=t.z:-1===br.z&&(i.z=t.z)}updateBoundingSphereRadius(){this.boundingSphereRadius=Number.MAX_VALUE}}const br=new re;class Sr extends ve{constructor(t,e){void 0===e&&(e={}),e=Fi.defaults(e,{maxValue:null,minValue:null,elementSize:1}),super({type:ve.types.HEIGHTFIELD}),this.data=t,this.maxValue=e.maxValue,this.minValue=e.minValue,this.elementSize=e.elementSize,null===e.minValue&&this.updateMinValue(),null===e.maxValue&&this.updateMaxValue(),this.cacheEnabled=!0,this.pillarConvex=new xe,this.pillarOffset=new re,this.updateBoundingSphereRadius(),this._cachedPillars={}}update(){this._cachedPillars={}}updateMinValue(){const t=this.data;let e=t[0][0];for(let i=0;i!==t.length;i++)for(let n=0;n!==t[i].length;n++){const r=t[i][n];r<e&&(e=r)}this.minValue=e}updateMaxValue(){const t=this.data;let e=t[0][0];for(let i=0;i!==t.length;i++)for(let n=0;n!==t[i].length;n++){const r=t[i][n];r>e&&(e=r)}this.maxValue=e}setHeightValueAtIndex(t,e,i){this.data[t][e]=i,this.clearCachedConvexTrianglePillar(t,e,!1),t>0&&(this.clearCachedConvexTrianglePillar(t-1,e,!0),this.clearCachedConvexTrianglePillar(t-1,e,!1)),e>0&&(this.clearCachedConvexTrianglePillar(t,e-1,!0),this.clearCachedConvexTrianglePillar(t,e-1,!1)),e>0&&t>0&&this.clearCachedConvexTrianglePillar(t-1,e-1,!0)}getRectMinMax(t,e,i,n,r){void 0===r&&(r=[]);const s=this.data;let o=this.minValue;for(let r=t;r<=i;r++)for(let t=e;t<=n;t++){const e=s[r][t];e>o&&(o=e)}r[0]=this.minValue,r[1]=o}getIndexOfPosition(t,e,i,n){const r=this.elementSize,s=this.data;let o=Math.floor(t/r),a=Math.floor(e/r);return i[0]=o,i[1]=a,n&&(o<0&&(o=0),a<0&&(a=0),o>=s.length-1&&(o=s.length-1),a>=s[0].length-1&&(a=s[0].length-1)),!(o<0||a<0||o>=s.length-1||a>=s[0].length-1)}getTriangleAt(t,e,i,n,r,s){const o=Er;this.getIndexOfPosition(t,e,o,i);let a=o[0],h=o[1];const l=this.data;i&&(a=Math.min(l.length-2,Math.max(0,a)),h=Math.min(l[0].length-2,Math.max(0,h)));const u=this.elementSize,c=(t/u-a)**2+(e/u-h)**2>(t/u-(a+1))**2+(e/u-(h+1))**2;return this.getTriangle(a,h,c,n,r,s),c}getNormalAt(t,e,i,n){const r=Pr,s=Rr,o=Or,a=Lr,h=Ir;this.getTriangleAt(t,e,i,r,s,o),s.vsub(r,a),o.vsub(r,h),a.cross(h,n),n.normalize()}getAabbAtIndex(t,e,i){let{lowerBound:n,upperBound:r}=i;const s=this.data,o=this.elementSize;n.set(t*o,e*o,s[t][e]),r.set((t+1)*o,(e+1)*o,s[t+1][e+1])}getHeightAt(t,e,i){const n=this.data,r=_r,s=Mr,o=Cr,a=Er;this.getIndexOfPosition(t,e,a,i);let h=a[0],l=a[1];i&&(h=Math.min(n.length-2,Math.max(0,h)),l=Math.min(n[0].length-2,Math.max(0,l)));const u=this.getTriangleAt(t,e,i,r,s,o);!function(t,e,i,n,r,s,o,a,h){h.x=((s-a)*(t-o)+(o-r)*(e-a))/((s-a)*(i-o)+(o-r)*(n-a)),h.y=((a-n)*(t-o)+(i-o)*(e-a))/((s-a)*(i-o)+(o-r)*(n-a)),h.z=1-h.x-h.y}(t,e,r.x,r.y,s.x,s.y,o.x,o.y,Tr);const c=Tr;return u?n[h+1][l+1]*c.x+n[h][l+1]*c.y+n[h+1][l]*c.z:n[h][l]*c.x+n[h+1][l]*c.y+n[h][l+1]*c.z}getCacheConvexTrianglePillarKey(t,e,i){return`${t}_${e}_${i?1:0}`}getCachedConvexTrianglePillar(t,e,i){return this._cachedPillars[this.getCacheConvexTrianglePillarKey(t,e,i)]}setCachedConvexTrianglePillar(t,e,i,n,r){this._cachedPillars[this.getCacheConvexTrianglePillarKey(t,e,i)]={convex:n,offset:r}}clearCachedConvexTrianglePillar(t,e,i){delete this._cachedPillars[this.getCacheConvexTrianglePillarKey(t,e,i)]}getTriangle(t,e,i,n,r,s){const o=this.data,a=this.elementSize;i?(n.set((t+1)*a,(e+1)*a,o[t+1][e+1]),r.set(t*a,(e+1)*a,o[t][e+1]),s.set((t+1)*a,e*a,o[t+1][e])):(n.set(t*a,e*a,o[t][e]),r.set((t+1)*a,e*a,o[t+1][e]),s.set(t*a,(e+1)*a,o[t][e+1]))}getConvexTrianglePillar(t,e,i){let n=this.pillarConvex,r=this.pillarOffset;if(this.cacheEnabled){const s=this.getCachedConvexTrianglePillar(t,e,i);if(s)return this.pillarConvex=s.convex,void(this.pillarOffset=s.offset);n=new xe,r=new re,this.pillarConvex=n,this.pillarOffset=r}const s=this.data,o=this.elementSize,a=n.faces;n.vertices.length=6;for(let t=0;t<6;t++)n.vertices[t]||(n.vertices[t]=new re);a.length=5;for(let t=0;t<5;t++)a[t]||(a[t]=[]);const h=n.vertices,l=(Math.min(s[t][e],s[t+1][e],s[t][e+1],s[t+1][e+1])-this.minValue)/2+this.minValue;i?(r.set((t+.75)*o,(e+.75)*o,l),h[0].set(.25*o,.25*o,s[t+1][e+1]-l),h[1].set(-.75*o,.25*o,s[t][e+1]-l),h[2].set(.25*o,-.75*o,s[t+1][e]-l),h[3].set(.25*o,.25*o,-Math.abs(l)-1),h[4].set(-.75*o,.25*o,-Math.abs(l)-1),h[5].set(.25*o,-.75*o,-Math.abs(l)-1),a[0][0]=0,a[0][1]=1,a[0][2]=2,a[1][0]=5,a[1][1]=4,a[1][2]=3,a[2][0]=2,a[2][1]=5,a[2][2]=3,a[2][3]=0,a[3][0]=3,a[3][1]=4,a[3][2]=1,a[3][3]=0,a[4][0]=1,a[4][1]=4,a[4][2]=5,a[4][3]=2):(r.set((t+.25)*o,(e+.25)*o,l),h[0].set(-.25*o,-.25*o,s[t][e]-l),h[1].set(.75*o,-.25*o,s[t+1][e]-l),h[2].set(-.25*o,.75*o,s[t][e+1]-l),h[3].set(-.25*o,-.25*o,-Math.abs(l)-1),h[4].set(.75*o,-.25*o,-Math.abs(l)-1),h[5].set(-.25*o,.75*o,-Math.abs(l)-1),a[0][0]=0,a[0][1]=1,a[0][2]=2,a[1][0]=5,a[1][1]=4,a[1][2]=3,a[2][0]=0,a[2][1]=2,a[2][2]=5,a[2][3]=3,a[3][0]=1,a[3][1]=0,a[3][2]=3,a[3][3]=4,a[4][0]=4,a[4][1]=5,a[4][2]=2,a[4][3]=1),n.computeNormals(),n.computeEdges(),n.updateBoundingSphereRadius(),this.setCachedConvexTrianglePillar(t,e,i,n,r)}calculateLocalInertia(t,e){return void 0===e&&(e=new re),e.set(0,0,0),e}volume(){return Number.MAX_VALUE}calculateWorldAABB(t,e,i,n){i.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),n.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)}updateBoundingSphereRadius(){const t=this.data,e=this.elementSize;this.boundingSphereRadius=new re(t.length*e,t[0].length*e,Math.max(Math.abs(this.maxValue),Math.abs(this.minValue))).length()}setHeightsFromImage(t,e){const{x:i,z:n,y:r}=e,s=document.createElement("canvas");s.width=t.width,s.height=t.height;const o=s.getContext("2d");o.drawImage(t,0,0);const a=o.getImageData(0,0,t.width,t.height),h=this.data;h.length=0,this.elementSize=Math.abs(i)/a.width;for(let t=0;t<a.height;t++){const e=[];for(let r=0;r<a.width;r++){const s=(a.data[4*(t*a.height+r)]+a.data[4*(t*a.height+r)+1]+a.data[4*(t*a.height+r)+2])/4/255*n;i<0?e.push(s):e.unshift(s)}r<0?h.unshift(e):h.push(e)}this.updateMaxValue(),this.updateMinValue(),this.update()}}const Er=[],Tr=new re,_r=new re,Mr=new re,Cr=new re,Pr=new re,Rr=new re,Or=new re,Lr=new re,Ir=new re;class Dr{constructor(t){void 0===t&&(t={}),this.root=t.root||null,this.aabb=t.aabb?t.aabb.clone():new he,this.data=[],this.children=[]}reset(){this.children.length=this.data.length=0}insert(t,e,i){void 0===i&&(i=0);const n=this.data;if(!this.aabb.contains(t))return!1;const r=this.children;if(i<(this.maxDepth||this.root.maxDepth)){let n=!1;r.length||(this.subdivide(),n=!0);for(let n=0;8!==n;n++)if(r[n].insert(t,e,i+1))return!0;n&&(r.length=0)}return n.push(e),!0}subdivide(){const t=this.aabb,e=t.lowerBound,i=t.upperBound,n=this.children;n.push(new Dr({aabb:new he({lowerBound:new re(0,0,0)})}),new Dr({aabb:new he({lowerBound:new re(1,0,0)})}),new Dr({aabb:new he({lowerBound:new re(1,1,0)})}),new Dr({aabb:new he({lowerBound:new re(1,1,1)})}),new Dr({aabb:new he({lowerBound:new re(0,1,1)})}),new Dr({aabb:new he({lowerBound:new re(0,0,1)})}),new Dr({aabb:new he({lowerBound:new re(1,0,1)})}),new Dr({aabb:new he({lowerBound:new re(0,1,0)})})),i.vsub(e,kr),kr.scale(.5,kr);const r=this.root||this;for(let t=0;8!==t;t++){const i=n[t];i.root=r;const s=i.aabb.lowerBound;s.x*=kr.x,s.y*=kr.y,s.z*=kr.z,s.vadd(e,s),s.vadd(kr,i.aabb.upperBound)}}aabbQuery(t,e){this.data,this.children;const i=[this];for(;i.length;){const n=i.pop();n.aabb.overlaps(t)&&Array.prototype.push.apply(e,n.data),Array.prototype.push.apply(i,n.children)}return e}rayQuery(t,e,i){return t.getAABB(Fr),Fr.toLocalFrame(e,Fr),this.aabbQuery(Fr,i),i}removeEmptyNodes(){for(let t=this.children.length-1;t>=0;t--)this.children[t].removeEmptyNodes(),this.children[t].children.length||this.children[t].data.length||this.children.splice(t,1)}}class Br extends Dr{constructor(t,e){void 0===e&&(e={}),super({root:null,aabb:t}),this.maxDepth=void 0!==e.maxDepth?e.maxDepth:8}}const kr=new re,Fr=new he;class Nr extends ve{constructor(t,e){super({type:ve.types.TRIMESH}),this.vertices=new Float32Array(t),this.indices=new Int16Array(e),this.normals=new Float32Array(e.length),this.aabb=new he,this.edges=null,this.scale=new re(1,1,1),this.tree=new Br,this.updateEdges(),this.updateNormals(),this.updateAABB(),this.updateBoundingSphereRadius(),this.updateTree()}updateTree(){const t=this.tree;t.reset(),t.aabb.copy(this.aabb);const e=this.scale;t.aabb.lowerBound.x*=1/e.x,t.aabb.lowerBound.y*=1/e.y,t.aabb.lowerBound.z*=1/e.z,t.aabb.upperBound.x*=1/e.x,t.aabb.upperBound.y*=1/e.y,t.aabb.upperBound.z*=1/e.z;const i=new he,n=new re,r=new re,s=new re,o=[n,r,s];for(let e=0;e<this.indices.length/3;e++){const a=3*e;this._getUnscaledVertex(this.indices[a],n),this._getUnscaledVertex(this.indices[a+1],r),this._getUnscaledVertex(this.indices[a+2],s),i.setFromPoints(o),t.insert(i,e)}t.removeEmptyNodes()}getTrianglesInAABB(t,e){Ur.copy(t);const i=this.scale,n=i.x,r=i.y,s=i.z,o=Ur.lowerBound,a=Ur.upperBound;return o.x/=n,o.y/=r,o.z/=s,a.x/=n,a.y/=r,a.z/=s,this.tree.aabbQuery(Ur,e)}setScale(t){const e=this.scale.x===this.scale.y&&this.scale.y===this.scale.z,i=t.x===t.y&&t.y===t.z;e&&i||this.updateNormals(),this.scale.copy(t),this.updateAABB(),this.updateBoundingSphereRadius()}updateNormals(){const t=zr,e=this.normals;for(let i=0;i<this.indices.length/3;i++){const n=3*i,r=this.indices[n],s=this.indices[n+1],o=this.indices[n+2];this.getVertex(r,jr),this.getVertex(s,Yr),this.getVertex(o,Xr),Nr.computeNormal(Yr,jr,Xr,t),e[n]=t.x,e[n+1]=t.y,e[n+2]=t.z}}updateEdges(){const t={},e=(e,i)=>{t[e<i?`${e}_${i}`:`${i}_${e}`]=!0};for(let t=0;t<this.indices.length/3;t++){const i=3*t,n=this.indices[i],r=this.indices[i+1],s=this.indices[i+2];e(n,r),e(r,s),e(s,n)}const i=Object.keys(t);this.edges=new Int16Array(2*i.length);for(let t=0;t<i.length;t++){const e=i[t].split("_");this.edges[2*t]=parseInt(e[0],10),this.edges[2*t+1]=parseInt(e[1],10)}}getEdgeVertex(t,e,i){const n=this.edges[2*t+(e?1:0)];this.getVertex(n,i)}getEdgeVector(t,e){const i=Gr,n=Vr;this.getEdgeVertex(t,0,i),this.getEdgeVertex(t,1,n),n.vsub(i,e)}static computeNormal(t,e,i,n){e.vsub(t,Wr),i.vsub(e,Hr),Hr.cross(Wr,n),n.isZero()||n.normalize()}getVertex(t,e){const i=this.scale;return this._getUnscaledVertex(t,e),e.x*=i.x,e.y*=i.y,e.z*=i.z,e}_getUnscaledVertex(t,e){const i=3*t,n=this.vertices;return e.set(n[i],n[i+1],n[i+2])}getWorldVertex(t,e,i,n){return this.getVertex(t,n),ye.pointToWorldFrame(e,i,n,n),n}getTriangleVertices(t,e,i,n){const r=3*t;this.getVertex(this.indices[r],e),this.getVertex(this.indices[r+1],i),this.getVertex(this.indices[r+2],n)}getNormal(t,e){const i=3*t;return e.set(this.normals[i],this.normals[i+1],this.normals[i+2])}calculateLocalInertia(t,e){this.computeLocalAABB(qr);const i=qr.upperBound.x-qr.lowerBound.x,n=qr.upperBound.y-qr.lowerBound.y,r=qr.upperBound.z-qr.lowerBound.z;return e.set(1/12*t*(2*n*2*n+2*r*2*r),1/12*t*(2*i*2*i+2*r*2*r),1/12*t*(2*n*2*n+2*i*2*i))}computeLocalAABB(t){const e=t.lowerBound,i=t.upperBound,n=this.vertices.length;this.vertices;const r=Jr;this.getVertex(0,r),e.copy(r),i.copy(r);for(let t=0;t!==n;t++)this.getVertex(t,r),r.x<e.x?e.x=r.x:r.x>i.x&&(i.x=r.x),r.y<e.y?e.y=r.y:r.y>i.y&&(i.y=r.y),r.z<e.z?e.z=r.z:r.z>i.z&&(i.z=r.z)}updateAABB(){this.computeLocalAABB(this.aabb)}updateBoundingSphereRadius(){let t=0;const e=this.vertices,i=new re;for(let n=0,r=e.length/3;n!==r;n++){this.getVertex(n,i);const e=i.lengthSquared();e>t&&(t=e)}this.boundingSphereRadius=Math.sqrt(t)}calculateWorldAABB(t,e,i,n){const r=Qr,s=Kr;r.position=t,r.quaternion=e,this.aabb.toWorldFrame(r,s),i.copy(s.lowerBound),n.copy(s.upperBound)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}static createTorus(t,e,i,n,r){void 0===t&&(t=1),void 0===e&&(e=.5),void 0===i&&(i=8),void 0===n&&(n=6),void 0===r&&(r=2*Math.PI);const s=[],o=[];for(let o=0;o<=i;o++)for(let a=0;a<=n;a++){const h=a/n*r,l=o/i*Math.PI*2,u=(t+e*Math.cos(l))*Math.cos(h),c=(t+e*Math.cos(l))*Math.sin(h),d=e*Math.sin(l);s.push(u,c,d)}for(let t=1;t<=i;t++)for(let e=1;e<=n;e++){const i=(n+1)*t+e-1,r=(n+1)*(t-1)+e-1,s=(n+1)*(t-1)+e,a=(n+1)*t+e;o.push(i,r,a),o.push(r,s,a)}return new Nr(s,o)}}const zr=new re,Ur=new he,Gr=new re,Vr=new re,Hr=new re,Wr=new re,jr=new re,Yr=new re,Xr=new re,qr=new he,Jr=new re,Qr=new ye,Kr=new he;class Zr{constructor(){this.equations=[]}solve(t,e){return 0}addEquation(t){!t.enabled||t.bi.isTrigger||t.bj.isTrigger||this.equations.push(t)}removeEquation(t){const e=this.equations,i=e.indexOf(t);-1!==i&&e.splice(i,1)}removeAllEquations(){this.equations.length=0}}class $r extends Zr{constructor(){super(),this.iterations=10,this.tolerance=1e-7}solve(t,e){let i=0;const n=this.iterations,r=this.tolerance*this.tolerance,s=this.equations,o=s.length,a=e.bodies,h=a.length,l=t;let u,c,d,p,f,m;if(0!==o)for(let t=0;t!==h;t++)a[t].updateSolveMassProperties();const g=es,v=is,y=ts;g.length=o,v.length=o,y.length=o;for(let t=0;t!==o;t++){const e=s[t];y[t]=0,v[t]=e.computeB(l),g[t]=1/e.computeC()}if(0!==o){for(let t=0;t!==h;t++){const e=a[t],i=e.vlambda,n=e.wlambda;i.set(0,0,0),n.set(0,0,0)}for(i=0;i!==n;i++){p=0;for(let t=0;t!==o;t++){const e=s[t];u=v[t],c=g[t],m=y[t],f=e.computeGWlambda(),d=c*(u-f-e.eps*m),m+d<e.minForce?d=e.minForce-m:m+d>e.maxForce&&(d=e.maxForce-m),y[t]+=d,p+=d>0?d:-d,e.addToWlambda(d)}if(p*p<r)break}for(let t=0;t!==h;t++){const e=a[t],i=e.velocity,n=e.angularVelocity;e.vlambda.vmul(e.linearFactor,e.vlambda),i.vadd(e.vlambda,i),e.wlambda.vmul(e.angularFactor,e.wlambda),n.vadd(e.wlambda,n)}let t=s.length;const e=1/l;for(;t--;)s[t].multiplier=y[t]*e}return i}}const ts=[],es=[],is=[];class ns extends Zr{constructor(t){for(super(),this.iterations=10,this.tolerance=1e-7,this.subsolver=t,this.nodes=[],this.nodePool=[];this.nodePool.length<128;)this.nodePool.push(this.createNode())}createNode(){return{body:null,children:[],eqs:[],visited:!1}}solve(t,e){const i=rs,n=this.nodePool,r=e.bodies,s=this.equations,o=s.length,a=r.length,h=this.subsolver;for(;n.length<a;)n.push(this.createNode());i.length=a;for(let t=0;t<a;t++)i[t]=n[t];for(let t=0;t!==a;t++){const e=i[t];e.body=r[t],e.children.length=0,e.eqs.length=0,e.visited=!1}for(let t=0;t!==o;t++){const e=s[t],n=r.indexOf(e.bi),o=r.indexOf(e.bj),a=i[n],h=i[o];a.children.push(h),a.eqs.push(e),h.children.push(a),h.eqs.push(e)}let l,u=0,c=ss;h.tolerance=this.tolerance,h.iterations=this.iterations;const d=os;for(;l=hs(i);){c.length=0,d.bodies.length=0,us(l,cs,d.bodies,c);const e=c.length;c=c.sort(ds);for(let t=0;t!==e;t++)h.addEquation(c[t]);h.solve(t,d),h.removeAllEquations(),u++}return u}}const rs=[],ss=[],os={bodies:[]},as=Re.STATIC;function hs(t){const e=t.length;for(let i=0;i!==e;i++){const e=t[i];if(!(e.visited||e.body.type&as))return e}return!1}const ls=[];function us(t,e,i,n){for(ls.push(t),t.visited=!0,e(t,i,n);ls.length;){const t=ls.pop();let r;for(;r=hs(t.children);)r.visited=!0,e(r,i,n),ls.push(r)}}function cs(t,e,i){e.push(t.body);const n=t.eqs.length;for(let e=0;e!==n;e++){const n=t.eqs[e];i.includes(n)||i.push(n)}}function ds(t,e){return e.id-t.id}class ps{constructor(){this.objects=[],this.type=Object}release(){const t=arguments.length;for(let e=0;e!==t;e++)this.objects.push(e<0||arguments.length<=e?void 0:arguments[e]);return this}get(){return 0===this.objects.length?this.constructObject():this.objects.pop()}constructObject(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}resize(t){const e=this.objects;for(;e.length>t;)e.pop();for(;e.length<t;)e.push(this.constructObject());return this}}class fs extends ps{constructor(){super(...arguments),this.type=re}constructObject(){return new re}}const ms={sphereSphere:ve.types.SPHERE,spherePlane:ve.types.SPHERE|ve.types.PLANE,boxBox:ve.types.BOX|ve.types.BOX,sphereBox:ve.types.SPHERE|ve.types.BOX,planeBox:ve.types.PLANE|ve.types.BOX,convexConvex:ve.types.CONVEXPOLYHEDRON,sphereConvex:ve.types.SPHERE|ve.types.CONVEXPOLYHEDRON,planeConvex:ve.types.PLANE|ve.types.CONVEXPOLYHEDRON,boxConvex:ve.types.BOX|ve.types.CONVEXPOLYHEDRON,sphereHeightfield:ve.types.SPHERE|ve.types.HEIGHTFIELD,boxHeightfield:ve.types.BOX|ve.types.HEIGHTFIELD,convexHeightfield:ve.types.CONVEXPOLYHEDRON|ve.types.HEIGHTFIELD,sphereParticle:ve.types.PARTICLE|ve.types.SPHERE,planeParticle:ve.types.PLANE|ve.types.PARTICLE,boxParticle:ve.types.BOX|ve.types.PARTICLE,convexParticle:ve.types.PARTICLE|ve.types.CONVEXPOLYHEDRON,cylinderCylinder:ve.types.CYLINDER,sphereCylinder:ve.types.SPHERE|ve.types.CYLINDER,planeCylinder:ve.types.PLANE|ve.types.CYLINDER,boxCylinder:ve.types.BOX|ve.types.CYLINDER,convexCylinder:ve.types.CONVEXPOLYHEDRON|ve.types.CYLINDER,heightfieldCylinder:ve.types.HEIGHTFIELD|ve.types.CYLINDER,particleCylinder:ve.types.PARTICLE|ve.types.CYLINDER,sphereTrimesh:ve.types.SPHERE|ve.types.TRIMESH,planeTrimesh:ve.types.PLANE|ve.types.TRIMESH};class gs{get[ms.sphereSphere](){return this.sphereSphere}get[ms.spherePlane](){return this.spherePlane}get[ms.boxBox](){return this.boxBox}get[ms.sphereBox](){return this.sphereBox}get[ms.planeBox](){return this.planeBox}get[ms.convexConvex](){return this.convexConvex}get[ms.sphereConvex](){return this.sphereConvex}get[ms.planeConvex](){return this.planeConvex}get[ms.boxConvex](){return this.boxConvex}get[ms.sphereHeightfield](){return this.sphereHeightfield}get[ms.boxHeightfield](){return this.boxHeightfield}get[ms.convexHeightfield](){return this.convexHeightfield}get[ms.sphereParticle](){return this.sphereParticle}get[ms.planeParticle](){return this.planeParticle}get[ms.boxParticle](){return this.boxParticle}get[ms.convexParticle](){return this.convexParticle}get[ms.cylinderCylinder](){return this.convexConvex}get[ms.sphereCylinder](){return this.sphereConvex}get[ms.planeCylinder](){return this.planeConvex}get[ms.boxCylinder](){return this.boxConvex}get[ms.convexCylinder](){return this.convexConvex}get[ms.heightfieldCylinder](){return this.heightfieldCylinder}get[ms.particleCylinder](){return this.particleCylinder}get[ms.sphereTrimesh](){return this.sphereTrimesh}get[ms.planeTrimesh](){return this.planeTrimesh}constructor(t){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new fs,this.world=t,this.currentContactMaterial=t.defaultContactMaterial,this.enableFrictionReduction=!1}createContactEquation(t,e,i,n,r,s){let o;this.contactPointPool.length?(o=this.contactPointPool.pop(),o.bi=t,o.bj=e):o=new Xi(t,e),o.enabled=t.collisionResponse&&e.collisionResponse&&i.collisionResponse&&n.collisionResponse;const a=this.currentContactMaterial;o.restitution=a.restitution,o.setSpookParams(a.contactEquationStiffness,a.contactEquationRelaxation,this.world.dt);const h=i.material||t.material,l=n.material||e.material;return h&&l&&h.restitution>=0&&l.restitution>=0&&(o.restitution=h.restitution*l.restitution),o.si=r||i,o.sj=s||n,o}createFrictionEquationsFromContact(t,e){const i=t.bi,n=t.bj,r=t.si,s=t.sj,o=this.world,a=this.currentContactMaterial;let h=a.friction;const l=r.material||i.material,u=s.material||n.material;if(l&&u&&l.friction>=0&&u.friction>=0&&(h=l.friction*u.friction),h>0){const r=h*o.gravity.length();let s=i.invMass+n.invMass;s>0&&(s=1/s);const l=this.frictionEquationPool,u=l.length?l.pop():new vn(i,n,r*s),c=l.length?l.pop():new vn(i,n,r*s);return u.bi=c.bi=i,u.bj=c.bj=n,u.minForce=c.minForce=-r*s,u.maxForce=c.maxForce=r*s,u.ri.copy(t.ri),u.rj.copy(t.rj),c.ri.copy(t.ri),c.rj.copy(t.rj),t.ni.tangents(u.t,c.t),u.setSpookParams(a.frictionEquationStiffness,a.frictionEquationRelaxation,o.dt),c.setSpookParams(a.frictionEquationStiffness,a.frictionEquationRelaxation,o.dt),u.enabled=c.enabled=t.enabled,e.push(u,c),!0}return!1}createFrictionFromAverage(t){let e=this.result[this.result.length-1];if(!this.createFrictionEquationsFromContact(e,this.frictionResult)||1===t)return;const i=this.frictionResult[this.frictionResult.length-2],n=this.frictionResult[this.frictionResult.length-1];vs.setZero(),ys.setZero(),As.setZero();const r=e.bi;e.bj;for(let i=0;i!==t;i++)e=this.result[this.result.length-1-i],e.bi!==r?(vs.vadd(e.ni,vs),ys.vadd(e.ri,ys),As.vadd(e.rj,As)):(vs.vsub(e.ni,vs),ys.vadd(e.rj,ys),As.vadd(e.ri,As));const s=1/t;ys.scale(s,i.ri),As.scale(s,i.rj),n.ri.copy(i.ri),n.rj.copy(i.rj),vs.normalize(),vs.tangents(i.t,n.t)}getContacts(t,e,i,n,r,s,o){this.contactPointPool=r,this.frictionEquationPool=o,this.result=n,this.frictionResult=s;const a=bs,h=Ss,l=xs,u=ws;for(let n=0,r=t.length;n!==r;n++){const r=t[n],s=e[n];let o=null;r.material&&s.material&&(o=i.getContactMaterial(r.material,s.material)||null);const c=r.type&Re.KINEMATIC&&s.type&Re.STATIC||r.type&Re.STATIC&&s.type&Re.KINEMATIC||r.type&Re.KINEMATIC&&s.type&Re.KINEMATIC;for(let t=0;t<r.shapes.length;t++){r.quaternion.mult(r.shapeOrientations[t],a),r.quaternion.vmult(r.shapeOffsets[t],l),l.vadd(r.position,l);const e=r.shapes[t];for(let t=0;t<s.shapes.length;t++){s.quaternion.mult(s.shapeOrientations[t],h),s.quaternion.vmult(s.shapeOffsets[t],u),u.vadd(s.position,u);const n=s.shapes[t];if(!(e.collisionFilterMask&n.collisionFilterGroup&&n.collisionFilterMask&e.collisionFilterGroup))continue;if(l.distanceTo(u)>e.boundingSphereRadius+n.boundingSphereRadius)continue;let d=null;e.material&&n.material&&(d=i.getContactMaterial(e.material,n.material)||null),this.currentContactMaterial=d||o||i.defaultContactMaterial;const p=this[e.type|n.type];if(p){let t=!1;t=e.type<n.type?p.call(this,e,n,l,u,a,h,r,s,e,n,c):p.call(this,n,e,u,l,h,a,s,r,e,n,c),t&&c&&(i.shapeOverlapKeeper.set(e.id,n.id),i.bodyOverlapKeeper.set(r.id,s.id))}}}}}sphereSphere(t,e,i,n,r,s,o,a,h,l,u){if(u)return i.distanceSquared(n)<(t.radius+e.radius)**2;const c=this.createContactEquation(o,a,t,e,h,l);n.vsub(i,c.ni),c.ni.normalize(),c.ri.copy(c.ni),c.rj.copy(c.ni),c.ri.scale(t.radius,c.ri),c.rj.scale(-e.radius,c.rj),c.ri.vadd(i,c.ri),c.ri.vsub(o.position,c.ri),c.rj.vadd(n,c.rj),c.rj.vsub(a.position,c.rj),this.result.push(c),this.createFrictionEquationsFromContact(c,this.frictionResult)}spherePlane(t,e,i,n,r,s,o,a,h,l,u){const c=this.createContactEquation(o,a,t,e,h,l);if(c.ni.set(0,0,1),s.vmult(c.ni,c.ni),c.ni.negate(c.ni),c.ni.normalize(),c.ni.scale(t.radius,c.ri),i.vsub(n,Vs),c.ni.scale(c.ni.dot(Vs),Hs),Vs.vsub(Hs,c.rj),-Vs.dot(c.ni)<=t.radius){if(u)return!0;const t=c.ri,e=c.rj;t.vadd(i,t),t.vsub(o.position,t),e.vadd(n,e),e.vsub(a.position,e),this.result.push(c),this.createFrictionEquationsFromContact(c,this.frictionResult)}}boxBox(t,e,i,n,r,s,o,a,h,l,u){return t.convexPolyhedronRepresentation.material=t.material,e.convexPolyhedronRepresentation.material=e.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,e.convexPolyhedronRepresentation,i,n,r,s,o,a,t,e,u)}sphereBox(t,e,i,n,r,s,o,a,h,l,u){const c=this.v3pool,d=Zs;i.vsub(n,qs),e.getSideNormals(d,s);const p=t.radius;let f=!1;const m=to,g=eo,v=io;let y=null,A=0,x=0,w=0,b=null;for(let t=0,e=d.length;t!==e&&!1===f;t++){const e=Js;e.copy(d[t]);const i=e.length();e.normalize();const n=qs.dot(e);if(n<i+p&&n>0){const r=Qs,s=Ks;r.copy(d[(t+1)%3]),s.copy(d[(t+2)%3]);const o=r.length(),a=s.length();r.normalize(),s.normalize();const h=qs.dot(r),l=qs.dot(s);if(h<o&&h>-o&&l<a&&l>-a){const t=Math.abs(n-i-p);if((null===b||t<b)&&(b=t,x=h,w=l,y=i,m.copy(e),g.copy(r),v.copy(s),A++,u))return!0}}}if(A){f=!0;const r=this.createContactEquation(o,a,t,e,h,l);m.scale(-p,r.ri),r.ni.copy(m),r.ni.negate(r.ni),m.scale(y,m),g.scale(x,g),m.vadd(g,m),v.scale(w,v),m.vadd(v,r.rj),r.ri.vadd(i,r.ri),r.ri.vsub(o.position,r.ri),r.rj.vadd(n,r.rj),r.rj.vsub(a.position,r.rj),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}let S=c.get();const E=$s;for(let r=0;2!==r&&!f;r++)for(let s=0;2!==s&&!f;s++)for(let c=0;2!==c&&!f;c++)if(S.set(0,0,0),r?S.vadd(d[0],S):S.vsub(d[0],S),s?S.vadd(d[1],S):S.vsub(d[1],S),c?S.vadd(d[2],S):S.vsub(d[2],S),n.vadd(S,E),E.vsub(i,E),E.lengthSquared()<p*p){if(u)return!0;f=!0;const r=this.createContactEquation(o,a,t,e,h,l);r.ri.copy(E),r.ri.normalize(),r.ni.copy(r.ri),r.ri.scale(p,r.ri),r.rj.copy(S),r.ri.vadd(i,r.ri),r.ri.vsub(o.position,r.ri),r.rj.vadd(n,r.rj),r.rj.vsub(a.position,r.rj),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}c.release(S),S=null;const T=c.get(),_=c.get(),M=c.get(),C=c.get(),P=c.get(),R=d.length;for(let r=0;r!==R&&!f;r++)for(let s=0;s!==R&&!f;s++)if(r%3!=s%3){d[s].cross(d[r],T),T.normalize(),d[r].vadd(d[s],_),M.copy(i),M.vsub(_,M),M.vsub(n,M);const c=M.dot(T);T.scale(c,C);let m=0;for(;m===r%3||m===s%3;)m++;P.copy(i),P.vsub(C,P),P.vsub(_,P),P.vsub(n,P);const g=Math.abs(c),v=P.length();if(g<d[m].length()&&v<p){if(u)return!0;f=!0;const r=this.createContactEquation(o,a,t,e,h,l);_.vadd(C,r.rj),r.rj.copy(r.rj),P.negate(r.ni),r.ni.normalize(),r.ri.copy(r.rj),r.ri.vadd(n,r.ri),r.ri.vsub(i,r.ri),r.ri.normalize(),r.ri.scale(p,r.ri),r.ri.vadd(i,r.ri),r.ri.vsub(o.position,r.ri),r.rj.vadd(n,r.rj),r.rj.vsub(a.position,r.rj),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}}c.release(T,_,M,C,P)}planeBox(t,e,i,n,r,s,o,a,h,l,u){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,e.convexPolyhedronRepresentation.id=e.id,this.planeConvex(t,e.convexPolyhedronRepresentation,i,n,r,s,o,a,t,e,u)}convexConvex(t,e,i,n,r,s,o,a,h,l,u,c,d){const p=yo;if(!(i.distanceTo(n)>t.boundingSphereRadius+e.boundingSphereRadius)&&t.findSeparatingAxis(e,i,r,n,s,p,c,d)){const c=[],d=Ao;t.clipAgainstHull(i,r,e,n,s,p,-100,100,c);let f=0;for(let r=0;r!==c.length;r++){if(u)return!0;const s=this.createContactEquation(o,a,t,e,h,l),m=s.ri,g=s.rj;p.negate(s.ni),c[r].normal.negate(d),d.scale(c[r].depth,d),c[r].point.vadd(d,m),g.copy(c[r].point),m.vsub(i,m),g.vsub(n,g),m.vadd(i,m),m.vsub(o.position,m),g.vadd(n,g),g.vsub(a.position,g),this.result.push(s),f++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(s,this.frictionResult)}this.enableFrictionReduction&&f&&this.createFrictionFromAverage(f)}}sphereConvex(t,e,i,n,r,s,o,a,h,l,u){const c=this.v3pool;i.vsub(n,no);const d=e.faceNormals,p=e.faces,f=e.vertices,m=t.radius;let g=!1;for(let r=0;r!==f.length;r++){const c=f[r],d=ao;s.vmult(c,d),n.vadd(d,d);const p=oo;if(d.vsub(i,p),p.lengthSquared()<m*m){if(u)return!0;g=!0;const r=this.createContactEquation(o,a,t,e,h,l);return r.ri.copy(p),r.ri.normalize(),r.ni.copy(r.ri),r.ri.scale(m,r.ri),d.vsub(n,r.rj),r.ri.vadd(i,r.ri),r.ri.vsub(o.position,r.ri),r.rj.vadd(n,r.rj),r.rj.vsub(a.position,r.rj),this.result.push(r),void this.createFrictionEquationsFromContact(r,this.frictionResult)}}for(let r=0,v=p.length;r!==v&&!1===g;r++){const v=d[r],y=p[r],A=ho;s.vmult(v,A);const x=lo;s.vmult(f[y[0]],x),x.vadd(n,x);const w=uo;A.scale(-m,w),i.vadd(w,w);const b=co;w.vsub(x,b);const S=b.dot(A),E=po;if(i.vsub(x,E),S<0&&E.dot(A)>0){const r=[];for(let t=0,e=y.length;t!==e;t++){const e=c.get();s.vmult(f[y[t]],e),n.vadd(e,e),r.push(e)}if(Xs(r,A,i)){if(u)return!0;g=!0;const s=this.createContactEquation(o,a,t,e,h,l);A.scale(-m,s.ri),A.negate(s.ni);const d=c.get();A.scale(-S,d);const p=c.get();A.scale(-m,p),i.vsub(n,s.rj),s.rj.vadd(p,s.rj),s.rj.vadd(d,s.rj),s.rj.vadd(n,s.rj),s.rj.vsub(a.position,s.rj),s.ri.vadd(i,s.ri),s.ri.vsub(o.position,s.ri),c.release(d),c.release(p),this.result.push(s),this.createFrictionEquationsFromContact(s,this.frictionResult);for(let t=0,e=r.length;t!==e;t++)c.release(r[t]);return}for(let d=0;d!==y.length;d++){const p=c.get(),g=c.get();s.vmult(f[y[(d+1)%y.length]],p),s.vmult(f[y[(d+2)%y.length]],g),n.vadd(p,p),n.vadd(g,g);const v=ro;g.vsub(p,v);const A=so;v.unit(A);const x=c.get(),w=c.get();i.vsub(p,w);const b=w.dot(A);A.scale(b,x),x.vadd(p,x);const S=c.get();if(x.vsub(i,S),b>0&&b*b<v.lengthSquared()&&S.lengthSquared()<m*m){if(u)return!0;const s=this.createContactEquation(o,a,t,e,h,l);x.vsub(n,s.rj),x.vsub(i,s.ni),s.ni.normalize(),s.ni.scale(m,s.ri),s.rj.vadd(n,s.rj),s.rj.vsub(a.position,s.rj),s.ri.vadd(i,s.ri),s.ri.vsub(o.position,s.ri),this.result.push(s),this.createFrictionEquationsFromContact(s,this.frictionResult);for(let t=0,e=r.length;t!==e;t++)c.release(r[t]);return c.release(p),c.release(g),c.release(x),c.release(S),void c.release(w)}c.release(p),c.release(g),c.release(x),c.release(S),c.release(w)}for(let t=0,e=r.length;t!==e;t++)c.release(r[t])}}}planeConvex(t,e,i,n,r,s,o,a,h,l,u){const c=fo,d=mo;d.set(0,0,1),r.vmult(d,d);let p=0;const f=go;for(let r=0;r!==e.vertices.length;r++){c.copy(e.vertices[r]),s.vmult(c,c),n.vadd(c,c),c.vsub(i,f);if(d.dot(f)<=0){if(u)return!0;const r=this.createContactEquation(o,a,t,e,h,l),s=vo;d.scale(d.dot(f),s),c.vsub(s,s),s.vsub(i,r.ri),r.ni.copy(d),c.vsub(n,r.rj),r.ri.vadd(i,r.ri),r.ri.vsub(o.position,r.ri),r.rj.vadd(n,r.rj),r.rj.vsub(a.position,r.rj),this.result.push(r),p++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(r,this.frictionResult)}}this.enableFrictionReduction&&p&&this.createFrictionFromAverage(p)}boxConvex(t,e,i,n,r,s,o,a,h,l,u){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,e,i,n,r,s,o,a,t,e,u)}sphereHeightfield(t,e,i,n,r,s,o,a,h,l,u){const c=e.data,d=t.radius,p=e.elementSize,f=Io,m=Lo;ye.pointToLocalFrame(n,s,i,m);let g=Math.floor((m.x-d)/p)-1,v=Math.ceil((m.x+d)/p)+1,y=Math.floor((m.y-d)/p)-1,A=Math.ceil((m.y+d)/p)+1;if(v<0||A<0||g>c.length||y>c[0].length)return;g<0&&(g=0),v<0&&(v=0),y<0&&(y=0),A<0&&(A=0),g>=c.length&&(g=c.length-1),v>=c.length&&(v=c.length-1),A>=c[0].length&&(A=c[0].length-1),y>=c[0].length&&(y=c[0].length-1);const x=[];e.getRectMinMax(g,y,v,A,x);const w=x[0],b=x[1];if(m.z-d>b||m.z+d<w)return;const S=this.result;for(let h=g;h<v;h++)for(let l=y;l<A;l++){const c=S.length;let d=!1;if(e.getConvexTrianglePillar(h,l,!1),ye.pointToWorldFrame(n,s,e.pillarOffset,f),i.distanceTo(f)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(d=this.sphereConvex(t,e.pillarConvex,i,f,r,s,o,a,t,e,u)),u&&d)return!0;if(e.getConvexTrianglePillar(h,l,!0),ye.pointToWorldFrame(n,s,e.pillarOffset,f),i.distanceTo(f)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(d=this.sphereConvex(t,e.pillarConvex,i,f,r,s,o,a,t,e,u)),u&&d)return!0;if(S.length-c>2)return}}boxHeightfield(t,e,i,n,r,s,o,a,h,l,u){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexHeightfield(t.convexPolyhedronRepresentation,e,i,n,r,s,o,a,t,e,u)}convexHeightfield(t,e,i,n,r,s,o,a,h,l,u){const c=e.data,d=e.elementSize,p=t.boundingSphereRadius,f=Ro,m=Oo,g=Po;ye.pointToLocalFrame(n,s,i,g);let v=Math.floor((g.x-p)/d)-1,y=Math.ceil((g.x+p)/d)+1,A=Math.floor((g.y-p)/d)-1,x=Math.ceil((g.y+p)/d)+1;if(y<0||x<0||v>c.length||A>c[0].length)return;v<0&&(v=0),y<0&&(y=0),A<0&&(A=0),x<0&&(x=0),v>=c.length&&(v=c.length-1),y>=c.length&&(y=c.length-1),x>=c[0].length&&(x=c[0].length-1),A>=c[0].length&&(A=c[0].length-1);const w=[];e.getRectMinMax(v,A,y,x,w);const b=w[0],S=w[1];if(!(g.z-p>S||g.z+p<b))for(let h=v;h<y;h++)for(let l=A;l<x;l++){let c=!1;if(e.getConvexTrianglePillar(h,l,!1),ye.pointToWorldFrame(n,s,e.pillarOffset,f),i.distanceTo(f)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(c=this.convexConvex(t,e.pillarConvex,i,f,r,s,o,a,null,null,u,m,null)),u&&c)return!0;if(e.getConvexTrianglePillar(h,l,!0),ye.pointToWorldFrame(n,s,e.pillarOffset,f),i.distanceTo(f)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(c=this.convexConvex(t,e.pillarConvex,i,f,r,s,o,a,null,null,u,m,null)),u&&c)return!0}}sphereParticle(t,e,i,n,r,s,o,a,h,l,u){const c=So;c.set(0,0,1),n.vsub(i,c);if(c.lengthSquared()<=t.radius*t.radius){if(u)return!0;const i=this.createContactEquation(a,o,e,t,h,l);c.normalize(),i.rj.copy(c),i.rj.scale(t.radius,i.rj),i.ni.copy(c),i.ni.negate(i.ni),i.ri.set(0,0,0),this.result.push(i),this.createFrictionEquationsFromContact(i,this.frictionResult)}}planeParticle(t,e,i,n,r,s,o,a,h,l,u){const c=xo;c.set(0,0,1),o.quaternion.vmult(c,c);const d=wo;n.vsub(o.position,d);if(c.dot(d)<=0){if(u)return!0;const i=this.createContactEquation(a,o,e,t,h,l);i.ni.copy(c),i.ni.negate(i.ni),i.ri.set(0,0,0);const r=bo;c.scale(c.dot(n),r),n.vsub(r,r),i.rj.copy(r),this.result.push(i),this.createFrictionEquationsFromContact(i,this.frictionResult)}}boxParticle(t,e,i,n,r,s,o,a,h,l,u){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexParticle(t.convexPolyhedronRepresentation,e,i,n,r,s,o,a,t,e,u)}convexParticle(t,e,i,n,r,s,o,a,h,l,u){let c=-1;const d=_o,p=Co;let f=null;const m=To;if(m.copy(n),m.vsub(i,m),r.conjugate(Eo),Eo.vmult(m,m),t.pointIsInside(m)){t.worldVerticesNeedsUpdate&&t.computeWorldVertices(i,r),t.worldFaceNormalsNeedsUpdate&&t.computeWorldFaceNormals(r);for(let e=0,i=t.faces.length;e!==i;e++){const i=[t.worldVertices[t.faces[e][0]]],r=t.worldFaceNormals[e];n.vsub(i[0],Mo);const s=-r.dot(Mo);if(null===f||Math.abs(s)<Math.abs(f)){if(u)return!0;f=s,c=e,d.copy(r)}}if(-1!==c){const r=this.createContactEquation(a,o,e,t,h,l);d.scale(f,p),p.vadd(n,p),p.vsub(i,p),r.rj.copy(p),d.negate(r.ni),r.ri.set(0,0,0);const s=r.ri,u=r.rj;s.vadd(n,s),s.vsub(a.position,s),u.vadd(i,u),u.vsub(o.position,u),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}}}heightfieldCylinder(t,e,i,n,r,s,o,a,h,l,u){return this.convexHeightfield(e,t,n,i,s,r,a,o,h,l,u)}particleCylinder(t,e,i,n,r,s,o,a,h,l,u){return this.convexParticle(e,t,n,i,s,r,a,o,h,l,u)}sphereTrimesh(t,e,i,n,r,s,o,a,h,l,u){const c=Os,d=Ls,p=Is,f=Ds,m=Bs,g=ks,v=Us,y=Rs,A=Cs,x=Gs;ye.pointToLocalFrame(n,s,i,m);const w=t.radius;v.lowerBound.set(m.x-w,m.y-w,m.z-w),v.upperBound.set(m.x+w,m.y+w,m.z+w),e.getTrianglesInAABB(v,x);const b=Ps,S=t.radius*t.radius;for(let r=0;r<x.length;r++)for(let c=0;c<3;c++)if(e.getVertex(e.indices[3*x[r]+c],b),b.vsub(m,A),A.lengthSquared()<=S){if(y.copy(b),ye.pointToWorldFrame(n,s,y,b),b.vsub(i,A),u)return!0;let r=this.createContactEquation(o,a,t,e,h,l);r.ni.copy(A),r.ni.normalize(),r.ri.copy(r.ni),r.ri.scale(t.radius,r.ri),r.ri.vadd(i,r.ri),r.ri.vsub(o.position,r.ri),r.rj.copy(b),r.rj.vsub(a.position,r.rj),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}for(let r=0;r<x.length;r++)for(let v=0;v<3;v++){e.getVertex(e.indices[3*x[r]+v],c),e.getVertex(e.indices[3*x[r]+(v+1)%3],d),d.vsub(c,p),m.vsub(d,g);const y=g.dot(p);m.vsub(c,g);let A=g.dot(p);if(A>0&&y<0){m.vsub(c,g),f.copy(p),f.normalize(),A=g.dot(f),f.scale(A,g),g.vadd(c,g);if(g.distanceTo(m)<t.radius){if(u)return!0;const r=this.createContactEquation(o,a,t,e,h,l);g.vsub(m,r.ni),r.ni.normalize(),r.ni.scale(t.radius,r.ri),r.ri.vadd(i,r.ri),r.ri.vsub(o.position,r.ri),ye.pointToWorldFrame(n,s,g,g),g.vsub(a.position,r.rj),ye.vectorToWorldFrame(s,r.ni,r.ni),ye.vectorToWorldFrame(s,r.ri,r.ri),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}}}const E=Fs,T=Ns,_=zs,M=Ms;for(let r=0,c=x.length;r!==c;r++){e.getTriangleVertices(x[r],E,T,_),e.getNormal(x[r],M),m.vsub(E,g);let c=g.dot(M);if(M.scale(c,g),m.vsub(g,g),c=g.distanceTo(m),ai.pointInTriangle(g,E,T,_)&&c<t.radius){if(u)return!0;let r=this.createContactEquation(o,a,t,e,h,l);g.vsub(m,r.ni),r.ni.normalize(),r.ni.scale(t.radius,r.ri),r.ri.vadd(i,r.ri),r.ri.vsub(o.position,r.ri),ye.pointToWorldFrame(n,s,g,g),g.vsub(a.position,r.rj),ye.vectorToWorldFrame(s,r.ni,r.ni),ye.vectorToWorldFrame(s,r.ri,r.ri),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}}x.length=0}planeTrimesh(t,e,i,n,r,s,o,a,h,l,u){const c=new re,d=Es;d.set(0,0,1),r.vmult(d,d);for(let r=0;r<e.vertices.length/3;r++){e.getVertex(r,c);const p=new re;p.copy(c),ye.pointToWorldFrame(n,s,p,c);const f=Ts;c.vsub(i,f);if(d.dot(f)<=0){if(u)return!0;const i=this.createContactEquation(o,a,t,e,h,l);i.ni.copy(d);const n=_s;d.scale(f.dot(d),n),c.vsub(n,n),i.ri.copy(n),i.ri.vsub(o.position,i.ri),i.rj.copy(c),i.rj.vsub(a.position,i.rj),this.result.push(i),this.createFrictionEquationsFromContact(i,this.frictionResult)}}}}const vs=new re,ys=new re,As=new re,xs=new re,ws=new re,bs=new pe,Ss=new pe,Es=new re,Ts=new re,_s=new re,Ms=new re,Cs=new re;new re;const Ps=new re,Rs=new re,Os=new re,Ls=new re,Is=new re,Ds=new re,Bs=new re,ks=new re,Fs=new re,Ns=new re,zs=new re,Us=new he,Gs=[],Vs=new re,Hs=new re,Ws=new re,js=new re,Ys=new re;function Xs(t,e,i){let n=null;const r=t.length;for(let s=0;s!==r;s++){const o=t[s],a=Ws;t[(s+1)%r].vsub(o,a);const h=js;a.cross(e,h);const l=Ys;i.vsub(o,l);const u=h.dot(l);if(!(null===n||u>0&&!0===n||u<=0&&!1===n))return!1;null===n&&(n=u>0)}return!0}const qs=new re,Js=new re,Qs=new re,Ks=new re,Zs=[new re,new re,new re,new re,new re,new re],$s=new re,to=new re,eo=new re,io=new re,no=new re,ro=new re,so=new re,oo=new re,ao=new re,ho=new re,lo=new re,uo=new re,co=new re,po=new re;new re,new re;const fo=new re,mo=new re,go=new re,vo=new re,yo=new re,Ao=new re,xo=new re,wo=new re,bo=new re,So=new re,Eo=new pe,To=new re;new re;const _o=new re,Mo=new re,Co=new re,Po=new re,Ro=new re,Oo=[0],Lo=new re,Io=new re;class Do{constructor(){this.current=[],this.previous=[]}getKey(t,e){if(e<t){const i=e;e=t,t=i}return t<<16|e}set(t,e){const i=this.getKey(t,e),n=this.current;let r=0;for(;i>n[r];)r++;if(i!==n[r]){for(let t=n.length-1;t>=r;t--)n[t+1]=n[t];n[r]=i}}tick(){const t=this.current;this.current=this.previous,this.previous=t,this.current.length=0}getDiff(t,e){const i=this.current,n=this.previous,r=i.length,s=n.length;let o=0;for(let e=0;e<r;e++){let r=!1;const s=i[e];for(;s>n[o];)o++;r=s===n[o],r||Bo(t,s)}o=0;for(let t=0;t<s;t++){let r=!1;const s=n[t];for(;s>i[o];)o++;r=i[o]===s,r||Bo(e,s)}}}function Bo(t,e){t.push((4294901760&e)>>16,65535&e)}const ko=(t,e)=>t<e?`${t}-${e}`:`${e}-${t}`;class Fo{constructor(){this.data={keys:[]}}get(t,e){const i=ko(t,e);return this.data[i]}set(t,e,i){const n=ko(t,e);this.get(t,e)||this.data.keys.push(n),this.data[n]=i}delete(t,e){const i=ko(t,e),n=this.data.keys.indexOf(i);-1!==n&&this.data.keys.splice(n,1),delete this.data[i]}reset(){const t=this.data,e=t.keys;for(;e.length>0;){delete t[e.pop()]}}}class No extends de{constructor(t){void 0===t&&(t={}),super(),this.dt=-1,this.allowSleep=!!t.allowSleep,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=void 0!==t.quatNormalizeSkip?t.quatNormalizeSkip:0,this.quatNormalizeFast=void 0!==t.quatNormalizeFast&&t.quatNormalizeFast,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new re,t.gravity&&this.gravity.copy(t.gravity),this.broadphase=void 0!==t.broadphase?t.broadphase:new Ke,this.bodies=[],this.hasActiveBodies=!1,this.solver=void 0!==t.solver?t.solver:new $r,this.constraints=[],this.narrowphase=new gs(this),this.collisionMatrix=new ce,this.collisionMatrixPrevious=new ce,this.bodyOverlapKeeper=new Do,this.shapeOverlapKeeper=new Do,this.contactmaterials=[],this.contactMaterialTable=new Fo,this.defaultMaterial=new wn("default"),this.defaultContactMaterial=new xn(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.accumulator=0,this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.idToBodyMap={},this.broadphase.setWorld(this)}getContactMaterial(t,e){return this.contactMaterialTable.get(t.id,e.id)}collisionMatrixTick(){const t=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=t,this.collisionMatrix.reset(),this.bodyOverlapKeeper.tick(),this.shapeOverlapKeeper.tick()}addConstraint(t){this.constraints.push(t)}removeConstraint(t){const e=this.constraints.indexOf(t);-1!==e&&this.constraints.splice(e,1)}rayTest(t,e,i){i instanceof Ze?this.raycastClosest(t,e,{skipBackfaces:!0},i):this.raycastAll(t,e,{skipBackfaces:!0},i)}raycastAll(t,e,i,n){return void 0===i&&(i={}),i.mode=ai.ALL,i.from=t,i.to=e,i.callback=n,zo.intersectWorld(this,i)}raycastAny(t,e,i,n){return void 0===i&&(i={}),i.mode=ai.ANY,i.from=t,i.to=e,i.result=n,zo.intersectWorld(this,i)}raycastClosest(t,e,i,n){return void 0===i&&(i={}),i.mode=ai.CLOSEST,i.from=t,i.to=e,i.result=n,zo.intersectWorld(this,i)}addBody(t){this.bodies.includes(t)||(t.index=this.bodies.length,this.bodies.push(t),t.world=this,t.initPosition.copy(t.position),t.initVelocity.copy(t.velocity),t.timeLastSleepy=this.time,t instanceof Re&&(t.initAngularVelocity.copy(t.angularVelocity),t.initQuaternion.copy(t.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=t,this.idToBodyMap[t.id]=t,this.dispatchEvent(this.addBodyEvent))}removeBody(t){t.world=null;const e=this.bodies.length-1,i=this.bodies,n=i.indexOf(t);if(-1!==n){i.splice(n,1);for(let t=0;t!==i.length;t++)i[t].index=t;this.collisionMatrix.setNumObjects(e),this.removeBodyEvent.body=t,delete this.idToBodyMap[t.id],this.dispatchEvent(this.removeBodyEvent)}}getBodyById(t){return this.idToBodyMap[t]}getShapeById(t){const e=this.bodies;for(let i=0;i<e.length;i++){const n=e[i].shapes;for(let e=0;e<n.length;e++){const i=n[e];if(i.id===t)return i}}return null}addContactMaterial(t){this.contactmaterials.push(t),this.contactMaterialTable.set(t.materials[0].id,t.materials[1].id,t)}removeContactMaterial(t){const e=this.contactmaterials.indexOf(t);-1!==e&&(this.contactmaterials.splice(e,1),this.contactMaterialTable.delete(t.materials[0].id,t.materials[1].id))}fixedStep(t,e){void 0===t&&(t=1/60),void 0===e&&(e=10);const i=Uo.now()/1e3;if(this.lastCallTime){const n=i-this.lastCallTime;this.step(t,n,e)}else this.step(t,void 0,e);this.lastCallTime=i}step(t,e,i){if(void 0===i&&(i=10),void 0===e)this.internalStep(t),this.time+=t;else{this.accumulator+=e;const n=Uo.now();let r=0;for(;this.accumulator>=t&&r<i&&(this.internalStep(t),this.accumulator-=t,r++,!(Uo.now()-n>1e3*t)););this.accumulator=this.accumulator%t;const s=this.accumulator/t;for(let t=0;t!==this.bodies.length;t++){const e=this.bodies[t];e.previousPosition.lerp(e.position,s,e.interpolatedPosition),e.previousQuaternion.slerp(e.quaternion,s,e.interpolatedQuaternion),e.previousQuaternion.normalize()}this.time+=e}}internalStep(t){this.dt=t;const e=this.contacts,i=Yo,n=Xo,r=this.bodies.length,s=this.bodies,o=this.solver,a=this.gravity,h=this.doProfiling,l=this.profile,u=Re.DYNAMIC;let c=-1/0;const d=this.constraints,p=jo;a.length();const f=a.x,m=a.y,g=a.z;let v=0;for(h&&(c=Uo.now()),v=0;v!==r;v++){const t=s[v];if(t.type===u){const e=t.force,i=t.mass;e.x+=i*f,e.y+=i*m,e.z+=i*g}}for(let t=0,e=this.subsystems.length;t!==e;t++)this.subsystems[t].update();h&&(c=Uo.now()),i.length=0,n.length=0,this.broadphase.collisionPairs(this,i,n),h&&(l.broadphase=Uo.now()-c);let y=d.length;for(v=0;v!==y;v++){const t=d[v];if(!t.collideConnected)for(let e=i.length-1;e>=0;e-=1)(t.bodyA===i[e]&&t.bodyB===n[e]||t.bodyB===i[e]&&t.bodyA===n[e])&&(i.splice(e,1),n.splice(e,1))}this.collisionMatrixTick(),h&&(c=Uo.now());const A=Wo,x=e.length;for(v=0;v!==x;v++)A.push(e[v]);e.length=0;const w=this.frictionEquations.length;for(v=0;v!==w;v++)p.push(this.frictionEquations[v]);for(this.frictionEquations.length=0,this.narrowphase.getContacts(i,n,this,e,A,this.frictionEquations,p),h&&(l.narrowphase=Uo.now()-c),h&&(c=Uo.now()),v=0;v<this.frictionEquations.length;v++)o.addEquation(this.frictionEquations[v]);const b=e.length;for(let t=0;t!==b;t++){const i=e[t],n=i.bi,r=i.bj,s=i.si,a=i.sj;let h;if(h=n.material&&r.material&&this.getContactMaterial(n.material,r.material)||this.defaultContactMaterial,h.friction,n.material&&r.material&&(n.material.friction>=0&&r.material.friction>=0&&(n.material.friction,r.material.friction),n.material.restitution>=0&&r.material.restitution>=0&&(i.restitution=n.material.restitution*r.material.restitution)),o.addEquation(i),n.allowSleep&&n.type===Re.DYNAMIC&&n.sleepState===Re.SLEEPING&&r.sleepState===Re.AWAKE&&r.type!==Re.STATIC){r.velocity.lengthSquared()+r.angularVelocity.lengthSquared()>=2*r.sleepSpeedLimit**2&&(n.wakeUpAfterNarrowphase=!0)}if(r.allowSleep&&r.type===Re.DYNAMIC&&r.sleepState===Re.SLEEPING&&n.sleepState===Re.AWAKE&&n.type!==Re.STATIC){n.velocity.lengthSquared()+n.angularVelocity.lengthSquared()>=2*n.sleepSpeedLimit**2&&(r.wakeUpAfterNarrowphase=!0)}this.collisionMatrix.set(n,r,!0),this.collisionMatrixPrevious.get(n,r)||(Ho.body=r,Ho.contact=i,n.dispatchEvent(Ho),Ho.body=n,r.dispatchEvent(Ho)),this.bodyOverlapKeeper.set(n.id,r.id),this.shapeOverlapKeeper.set(s.id,a.id)}for(this.emitContactEvents(),h&&(l.makeContactConstraints=Uo.now()-c,c=Uo.now()),v=0;v!==r;v++){const t=s[v];t.wakeUpAfterNarrowphase&&(t.wakeUp(),t.wakeUpAfterNarrowphase=!1)}for(y=d.length,v=0;v!==y;v++){const t=d[v];t.update();for(let e=0,i=t.equations.length;e!==i;e++){const i=t.equations[e];o.addEquation(i)}}o.solve(t,this),h&&(l.solve=Uo.now()-c),o.removeAllEquations();const S=Math.pow;for(v=0;v!==r;v++){const e=s[v];if(e.type&u){const i=S(1-e.linearDamping,t),n=e.velocity;n.scale(i,n);const r=e.angularVelocity;if(r){const i=S(1-e.angularDamping,t);r.scale(i,r)}}}this.dispatchEvent(Vo),h&&(c=Uo.now());const E=this.stepnumber%(this.quatNormalizeSkip+1)==0,T=this.quatNormalizeFast;for(v=0;v!==r;v++)s[v].integrate(t,E,T);this.clearForces(),this.broadphase.dirty=!0,h&&(l.integrate=Uo.now()-c),this.stepnumber+=1,this.dispatchEvent(Go);let _=!0;if(this.allowSleep)for(_=!1,v=0;v!==r;v++){const t=s[v];t.sleepTick(this.time),t.sleepState!==Re.SLEEPING&&(_=!0)}this.hasActiveBodies=_}emitContactEvents(){const t=this.hasAnyEventListener("beginContact"),e=this.hasAnyEventListener("endContact");if((t||e)&&this.bodyOverlapKeeper.getDiff(qo,Jo),t){for(let t=0,e=qo.length;t<e;t+=2)Qo.bodyA=this.getBodyById(qo[t]),Qo.bodyB=this.getBodyById(qo[t+1]),this.dispatchEvent(Qo);Qo.bodyA=Qo.bodyB=null}if(e){for(let t=0,e=Jo.length;t<e;t+=2)Ko.bodyA=this.getBodyById(Jo[t]),Ko.bodyB=this.getBodyById(Jo[t+1]),this.dispatchEvent(Ko);Ko.bodyA=Ko.bodyB=null}qo.length=Jo.length=0;const i=this.hasAnyEventListener("beginShapeContact"),n=this.hasAnyEventListener("endShapeContact");if((i||n)&&this.shapeOverlapKeeper.getDiff(qo,Jo),i){for(let t=0,e=qo.length;t<e;t+=2){const e=this.getShapeById(qo[t]),i=this.getShapeById(qo[t+1]);Zo.shapeA=e,Zo.shapeB=i,e&&(Zo.bodyA=e.body),i&&(Zo.bodyB=i.body),this.dispatchEvent(Zo)}Zo.bodyA=Zo.bodyB=Zo.shapeA=Zo.shapeB=null}if(n){for(let t=0,e=Jo.length;t<e;t+=2){const e=this.getShapeById(Jo[t]),i=this.getShapeById(Jo[t+1]);$o.shapeA=e,$o.shapeB=i,e&&($o.bodyA=e.body),i&&($o.bodyB=i.body),this.dispatchEvent($o)}$o.bodyA=$o.bodyB=$o.shapeA=$o.shapeB=null}}clearForces(){const t=this.bodies,e=t.length;for(let i=0;i!==e;i++){const e=t[i];e.force,e.torque,e.force.set(0,0,0),e.torque.set(0,0,0)}}}new he;const zo=new ai,Uo=globalThis.performance||{};if(!Uo.now){let t=Date.now();Uo.timing&&Uo.timing.navigationStart&&(t=Uo.timing.navigationStart),Uo.now=()=>Date.now()-t}new re;const Go={type:"postStep"},Vo={type:"preStep"},Ho={type:Re.COLLIDE_EVENT_NAME,body:null,contact:null},Wo=[],jo=[],Yo=[],Xo=[],qo=[],Jo=[],Qo={type:"beginContact",bodyA:null,bodyB:null},Ko={type:"endContact",bodyA:null,bodyB:null},Zo={type:"beginShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null},$o={type:"endShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null};function ta(t,e,i){return(ta=ea()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&ia(r,i.prototype),r}).apply(null,arguments)}function ea(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function ia(t,e){return(ia=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function na(t){return function(t){if(Array.isArray(t))return oa(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||sa(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ra(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var n,r,s=[],o=!0,a=!1;try{for(i=i.call(t);!(o=(n=i.next()).done)&&(s.push(n.value),!e||s.length!==e);o=!0);}catch(t){a=!0,r=t}finally{try{o||null==i.return||i.return()}finally{if(a)throw r}}return s}(t,e)||sa(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sa(t,e){if(t){if("string"==typeof t)return oa(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?oa(t,e):void 0}}function oa(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function aa(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ha=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,n=[{key:"addRectBodyToObject",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=Jt.modelToBox3(e,!1),o=ra(s,3),a=o[0],h=o[1],l=o[2];h.multiplyScalar(n),e.box3Data={pos:a,dim:h,box3:l};var u=te.addBox({x:a.x,y:a.y,z:a.z,wx:h.x,wy:h.y,wz:h.z,color:16711680,mass:i,addToWorld:!0}),c=u.body;return u.visible=!1,e.fakeMesh=u,u.body=null,e.body=c,c.gameObject=e,e.min=l.min,e.max=l.max,e.dimensions=h,c.min=l.min,c.max=l.max,c.dimensions=h,r&&t.changeBodyToStatic(c),c}},{key:"changeBodyToDynamic",value:function(t){t.mass=1,t.type=Re.DYNAMIC,t.updateMassProperties(),t.aabbNeedsUpdate=!0}},{key:"changeBodyToStatic",value:function(t){t.mass=0,t.type=Re.STATIC,t.updateMassProperties(),t.aabbNeedsUpdate=!0}},{key:"createConvexBody",value:function(t,e,i){var n,r;if(t.geometry){var s;s=t.geometry.type.includes("Buffer")?(new e.Geometry).fromBufferGeometry(t.geometry):t.geometry,t.updateWorldMatrix(!0),t.updateMatrixWorld(!0);var o=s,a=o.vertices,h=o.faces,l=a.map((function(t){return ta(i.Vec3,na(t.toArray()))})),u=h.map((function(t){return[t.a,t.b,t.c]})),c=new i.Body({mass:1,linearDamping:1}),d=new i.ConvexPolyhedron(l,u);c.addShape(d);var p=new e.Vector3;t.getWorldPosition(p);var f=new e.Quaternion;return t.getWorldQuaternion(f),(n=c.position).set.apply(n,na(p.toArray())),(r=c.quaternion).set.apply(r,na(f.toArray())),c}}},{key:"createBodyFromObj",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.mass,n=void 0===i?.1:i,r=e.type,s=void 0===r?Re.STATIC:r,o=e.addToWorld,a=void 0===o||o,h=e.sizMult,l=void 0===h?1:h,u=e.leaveBodyAtScene,c=void 0!==u&&u,d=new m.Box3,p=new m.Vector3,f=t.position.clone(),g=t.quaternion.clone(),v=t.scale.clone(),y=t.parent;Jt.moveToScene(t);var A=t.position.clone(),x=t.quaternion.clone(),w=t.scale.clone();t.position.set(0,0,0),t.rotation.set(0,0,0),t.updateMatrixWorld(!0),d.setFromObject(t),d.getSize(p);var b=d.getCenter(new m.Vector3);p.multiplyScalar(.5*l),p.y<.01&&(p.y=.01);var S=new Te(new re(p.x,p.y,p.z)),T=new Re({mass:n,type:s});return T.offsetman=(new re).copy(b),T.addShape(S,T.offsetman),T.position.copy(A),T.quaternion.copy(x),c?(t.position.copy(A),t.quaternion.copy(x),t.scale.copy(w)):(y&&y.add(t),t.position.copy(f),t.quaternion.copy(g),t.scale.copy(v)),a&&E.cannonPhysics.world.add(T),T}}],(i=null)&&aa(e.prototype,i),n&&aa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function la(t){return(la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ua(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ca(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function da(t,e){return(da=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ma(t);if(e){var r=ma(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return fa(this,i)}}function fa(t,e){if(e&&("object"===la(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ma(t){return(ma=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ga=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&da(t,e)}(s,t);var e,i,n,r=pa(s);function s(t,e){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:150,o=arguments.length>3?arguments[3]:void 0;if(ua(this,s),(i=r.call(this,t,e,n)).tempList=[],o)return fa(i);for(var a=[16570740,13412939,8474915],h=new m.Color,l=0;l<n;l++){var u=a[Math.floor(Math.random()*a.length)];i.instancedMesh.setColorAt(l,h.setHex(u))}return i}return e=s,(i=[{key:"addItem",value:function(t,e){var i=this.tempList.pop();if(!i){var n=new m.Vector3(.1*(1-2*Math.random()),.1*(1-2*Math.random()),.1*(1-2*Math.random()));i={pos:new m.Vector3(t.x,t.y,t.z),index:this.list.length},this.list.push(i),i.rotSpeed=n,i.rotation=new m.Vector3,i.velocity=new m.Vector3}return i.pos.copy(t),i.pos.x+=1.8*e,i.velocity.set(e*(1+2*Math.random())*.2,.3*(2+1*Math.random()),.4*(-1-2*Math.random())),i.velocity.multiplyScalar(.5),i}},{key:"removeItem",value:function(t){-1!=this.list.indexOf(t)&&this.tempList.push(t)}},{key:"update",value:function(t,e){var i=this.dummy,n=this.list.length;if(n>0){for(var r=n-1;r>=0;r--){var s=this.list[r];s.pos.x+=s.velocity.x*e,s.pos.y+=s.velocity.y*e,s.pos.z+=s.velocity.z*e,s.velocity.y-=.03,s.rotation.x+=s.rotSpeed.x*e,s.rotation.y+=s.rotSpeed.y*e,s.rotation.z+=s.rotSpeed.z*e,i.position.copy(s.pos),i.rotation.x=s.rotation.x,i.rotation.y=s.rotation.y,i.rotation.z=s.rotation.z,i.updateMatrix(),this.instancedMesh.setMatrixAt(r,i.matrix),s.pos.y<-5&&(i.position.set(0,0,0),this.removeItem(s))}this.instancedMesh.instanceMatrix.needsUpdate=!0}}}])&&ca(e.prototype,i),n&&ca(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(x);function va(t){let e,i,n,r=0;for(let s=0;s<t.length;++s){const o=t[s];if(o.isInterleavedBufferAttribute)return null;if(void 0===e&&(e=o.array.constructor),e!==o.array.constructor)return null;if(void 0===i&&(i=o.itemSize),i!==o.itemSize)return null;if(void 0===n&&(n=o.normalized),n!==o.normalized)return null;r+=o.array.length}const s=new e(r);let o=0;for(let e=0;e<t.length;++e)s.set(t[e].array,o),o+=t[e].array.length;return new m.BufferAttribute(s,i,n)}function ya(t,e,i){let{color:n=65280,scale:r=1,onInit:s,onUpdate:o}=void 0===i?{}:i;const a=[],h=new m.MeshBasicMaterial({color:null!=n?n:65280,wireframe:!0}),l=new re,u=new re,c=new re,d=new pe,p=new m.SphereGeometry(1),f=new m.BoxGeometry(1,1,1),g=new m.PlaneGeometry(10,10,10,10);function v(e){let i=new m.Mesh;const{SPHERE:n,BOX:r,PLANE:s,CYLINDER:o,CONVEXPOLYHEDRON:a,TRIMESH:d,HEIGHTFIELD:v}=ve.types;switch(e.type){case n:i=new m.Mesh(p,h);break;case r:i=new m.Mesh(f,h);break;case s:i=new m.Mesh(g,h);break;case o:{const t=new m.CylinderGeometry(e.radiusTop,e.radiusBottom,e.height,e.numSegments);i=new m.Mesh(t,h),e.geometryId=t.id;break}case a:{const t=function(t){const e=new m.BufferGeometry,i=[];for(let e=0;e<t.vertices.length;e++){const n=t.vertices[e];i.push(n.x,n.y,n.z)}e.setAttribute("position",new m.Float32BufferAttribute(i,3));const n=[];for(let e=0;e<t.faces.length;e++){const i=t.faces[e],r=i[0];for(let t=1;t<i.length-1;t++){const e=i[t],s=i[t+1];n.push(r,e,s)}}return e.setIndex(n),e.computeBoundingSphere(),e.computeVertexNormals(),e}(e);i=new m.Mesh(t,h),e.geometryId=t.id;break}case d:{const t=function(t){const e=new m.BufferGeometry,i=[],n=l,r=u,s=c;for(let e=0;e<t.indices.length/3;e++)t.getTriangleVertices(e,n,r,s),i.push(n.x,n.y,n.z),i.push(r.x,r.y,r.z),i.push(s.x,s.y,s.z);return e.setAttribute("position",new m.Float32BufferAttribute(i,3)),e.computeBoundingSphere(),e.computeVertexNormals(),e}(e);i=new m.Mesh(t,h),e.geometryId=t.id;break}case v:{const t=function(t){const e=new m.BufferGeometry,i=t.elementSize||1,n=t.data.flatMap((t,e)=>t.flatMap((t,n)=>[e*i,n*i,t])),r=[];for(let e=0;e<t.data.length-1;e++)for(let i=0;i<t.data[e].length-1;i++){const n=t.data[e].length,s=e*n+i;r.push(s+1,s+n,s+n+1),r.push(s+n,s+1,s)}return e.setIndex(r),e.setAttribute("position",new m.Float32BufferAttribute(n,3)),e.computeBoundingSphere(),e.computeVertexNormals(),e}(e);i=new m.Mesh(t,h),e.geometryId=t.id;break}}return t.add(i),i}function y(e,i){let n=a[e],s=!1;return function(t,e){if(!t)return!1;const{geometry:i}=t;return i instanceof m.SphereGeometry&&e.type===ve.types.SPHERE||i instanceof m.BoxGeometry&&e.type===ve.types.BOX||i instanceof m.PlaneGeometry&&e.type===ve.types.PLANE||i.id===e.geometryId&&e.type===ve.types.CYLINDER||i.id===e.geometryId&&e.type===ve.types.CONVEXPOLYHEDRON||i.id===e.geometryId&&e.type===ve.types.TRIMESH||i.id===e.geometryId&&e.type===ve.types.HEIGHTFIELD}(n,i)||(n&&t.remove(n),a[e]=n=v(i),s=!0),function(t,e){const{SPHERE:i,BOX:n,PLANE:s,CYLINDER:o,CONVEXPOLYHEDRON:a,TRIMESH:h,HEIGHTFIELD:l}=ve.types;switch(e.type){case i:{const{radius:i}=e;t.scale.set(i*r,i*r,i*r);break}case n:t.scale.copy(e.halfExtents),t.scale.multiplyScalar(2*r);break;case s:break;case o:case a:t.scale.set(1*r,1*r,1*r);break;case h:t.scale.copy(e.scale).multiplyScalar(r);break;case l:t.scale.set(1*r,1*r,1*r)}}(n,i),s}return g.translate(0,0,1e-4),{update:function(){const i=a,n=l,r=d;let h=0;for(const t of e.bodies)for(let e=0;e!==t.shapes.length;e++){const a=t.shapes[e],l=y(h,a),u=i[h];u&&(t.quaternion.vmult(t.shapeOffsets[e],n),t.position.vadd(n,n),t.quaternion.mult(t.shapeOrientations[e],r),u.position.copy(n),u.quaternion.copy(r),l&&s instanceof Function&&s(t,u,a),!l&&o instanceof Function&&o(t,u,a)),h++}for(let e=h;e<i.length;e++){const n=i[e];n&&t.remove(n)}i.length=h}}}function Aa(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}window.CANNON=n;var xa=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,r;return e=t,r=[{key:"initWorld",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:-20,z:0},i=new No;return i.gravity.set(e.x,e.y,e.z),i.broadphase=new Ke,i.defaultContactMaterial.contactEquationStiffness=1e6,i.defaultContactMaterial.contactEquationRegularizationTime=3,i.solver.iterations=2,i.add||(i.add=i.addBody),i.remove||(i.remove=i.removeBody),this.world=i,t.CANNON=n,E.cannonPhysics=this,i}},{key:"setWorld",value:function(e){t.CANNON=n,this.world=e}},{key:"initDebug",value:function(){var t=E.threeScene,e=this.world;this.debugRenderer=ya(t,e)}}],(i=null)&&Aa(e.prototype,i),r&&Aa(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function wa(t){return(wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ba(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Sa(t,e){return(Sa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ea(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Ma(t);if(e){var r=Ma(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ta(this,i)}}function Ta(t,e){if(e&&("object"===wa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _a(t)}function _a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ma(t){return(Ma=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ca={steps:1,depth:6*E.scoreAreaScale,bevelEnabled:!1,bevelThickness:1,bevelSize:1,bevelOffset:0,bevelSegments:1},Pa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sa(t,e)}(s,t);var e,i,n,r=Ea(s);function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),t=r.call(this),E.threeScene.add(_a(t)),t.scale.x*=-1,t.curThickness=0,t.curPointNo=0,t.stepNum=0,t.stepPerMesh=200,t.totalPointNum=0,t.rotation.y=-Math.PI/2,t.position.x+=.5*Ca.depth,t.list=[],t.objType="spiral",t.turnInWater=!0,t.isScrapSpiral=!0,t}return e=s,(i=[{key:"addPoint",value:function(t){this.curPointNo+=t,this.totalPointNum+=t;var e=Math.round(this.curPointNo);this.prevNumofPoint,this.prevNumofPoint=e,this.curMesh||(this.curMesh=new m.Mesh(new m.BufferGeometry,E.scrapSpiralMat),this.add(this.curMesh),this.list.push(this.curMesh));var i=this.stepPerMesh*this.stepNum,n=i+e,r=this.draw(i-1,n,this.curThickness);if(this.curMesh.geometry.dispose(),this.curMesh.geometry=r,e%this.stepPerMesh==0){var s=this.curMesh;if(this.stepNum++,this.curThickness=this.lastThickness,this.curMesh=null,this.curPointNo=0,this.baseMesh){this.remove(s);var o=this.draw(0,n,0);s.geometry.dispose(),this.baseMesh.geometry=o}else this.baseMesh=s}this.position.y=.1,this.totalPointNum=n}},{key:"draw",value:function(t,e){for(var i=new THREE.Shape,n=.1,r=t;r<e;r++){var s=(.4-5e-5*r)*r,o=(1+n+s)*Math.cos(s)*.1,a=(1+n+s)*Math.sin(s)*.1;r==t?i.moveTo(o,a):i.lineTo(o,a),n=(n+=.02)>4?4:n}this.lastThickness=n;for(var h=e-1;h>=t;h--){var l=(.4-5e-5*h)*h,u=(1+l)*Math.cos(l)*.1,c=(1+l)*Math.sin(l)*.1;i.lineTo(u,c)}var d=new THREE.ExtrudeGeometry(i,Ca);this.baseMesh&&(this.baseMesh.position.x=-o,this.baseMesh.position.y=-a),this.curMesh&&(this.curMesh.position.x=-o,this.curMesh.position.y=-a);var p=Math.atan2(a,o);this.rotation.x=-p-Math.PI/2,this.lastDrawX=o,this.lastDrawY=a;var f=d.groups[1].count,m=d.groups[1].count-12;return d.addGroup(m+.5*f,.5*f,2),d}},{key:"addBody",value:function(){var t=this,e=this.lastDrawX,i=this.lastDrawY,n=.9*Math.sqrt(e*e+i*i),r=Ca.depth;E.cameraTarget=this;var s=this.rotation.x;this.position.y+=n,this.position.x-=.5*r,this.rotation.x=0,this.rotation.y=-Math.PI/2,this.baseMesh&&(this.baseMesh.geometry.dispose(),this.remove(this.baseMesh)),this.curMesh.geometry.dispose();var o=this.draw(0,this.totalPointNum,0);this.curMesh.geometry=o,[this.curMesh].forEach((function(t){t&&(t.position.set(0,0,0),t.rotation.z=s,t.geometry.center(),t.rotation.y=Math.PI/2)}));var a=new CANNON.Cylinder(n,n,r,10),h=new CANNON.Body({mass:1});h.addShape(a,new CANNON.Vec3,new CANNON.Quaternion(0,0,.7071067811865475,.7071067811865476)),h.position.copy(this.position),E.cannonPhysics.world.add(h),h.collisionResponse=!1,h.velocity.y=10*E.scoreAreaScale,h.velocity.z=-52*E.scoreAreaScale,h.angularVelocity.x=-2,setTimeout((function(){h.collisionResponse=!0}),300),this.body=h,E.objects.push(this);var l=!1,u=!1;h.addEventListener("collide",(function(e){if(l||"score_ground"!=e.body.label){if(!l&&h.collisionResponse&&e.body.label.indexOf("score_")>=0){l=!0;var i=20+23*t.winRat;t.prevNumofPoint<30&&(i=15),setTimeout((function(){h.velocity.y=i}),20),i*=E.scoreAreaScale,i*=.75,h.velocity.y=i,h.velocity.z=-5,h.fixZ=h.position.z}}else e.contact.enabled=!1})),E.scoreArea.changeState(1),this.update=function(){l&&(u||E.scoreArea.finishLightUpdate(h),h.velocity.z>10&&(h.velocity.z=10),h.velocity.z-=.2,h.velocity.z=h.velocity.z<-5?-5:h.velocity.z,!u&&h.velocity.y<0&&(u=!0,E.cameraTarget=null,E.scoreArea.unlockScore(h)))}}}])&&ba(e.prototype,i),n&&ba(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(m.Object3D);new m.Vector3,new m.Vector3;new m.Vector3,new m.Vector3,new m.Vector3;function Ra(t){return(Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oa(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function La(t,e){return(La=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ia(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ka(t);if(e){var r=ka(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Da(this,i)}}function Da(t,e){if(e&&("object"===Ra(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ba(t)}function Ba(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ka(t){return(ka=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fa={steps:1,depth:2.54,bevelEnabled:!1,bevelThickness:1,bevelSize:1,bevelOffset:0,bevelSegments:1},Na=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&La(t,e)}(s,t);var e,i,n,r=Ia(s);function s(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),e=r.call(this),E.threeScene.add(Ba(e)),e.scale.x*=-1,e.defScaleZ=e.scale.z,e.scale.z*=.2,e.isWide=!1,e.totalPointNum=0,e.curThickness=0,e.lastThickness=0,e.curPointNo=0,e.stepNum=0,e.stepPerMesh=100,e.lastAngleRatio=.1,e.rotation.y=-Math.PI/2,e.list=[],window.addEventListener("keydown",(function(t){"g"==t.key&&e.addPoint(1)})),e.type=t,e.objType="spiral",e.turnInWater=!0;var i=[E.spiralMat,E.spiralMatBirch,E.spiralMatGold];return e.matList=i[t],e}return e=s,(i=[{key:"addPoint",value:function(t){var e=this;performance.now(),t*=1.5,this.curPointNo+=t,this.totalPointNum+=t;var i=Math.round(this.curPointNo);if(i!=this.prevNumofPoint){this.prevNumofPoint=i,this.curMesh||(this.curMesh=new m.Mesh(new m.BufferGeometry,this.matList),this.add(this.curMesh),this.list.push(this.curMesh),this.curMesh.position.z=.5*-Fa.depth);var n=this.stepPerMesh*this.stepNum,r=n+i,s=this.draw(n,r,this.curThickness,this.curAngle,!1,this.curAngleRatio);if(this.curMesh.geometry.dispose(),this.curMesh.geometry=s,!this.isWide&&i>50&&(this.isWide=!0,E.tweens.add({targets:this.scale,z:1.3*this.defScaleZ,duration:300,ease:"Sine.easeInOut",onComplete:function(){E.tweens.add({targets:e.scale,z:e.defScaleZ,duration:150,ease:"Sine.easeInOut",onComplete:function(){e.isWideComplete=!0}})}})),i>=this.stepPerMesh){var o=this.curMesh;if(this.stepNum++,this.curThickness=this.lastThickness,this.curAngle=this.lastAngle-this.angleStep,this.curAngleRatio=this.lastAngleRatio-4e-4,this.curMesh=null,this.curPointNo=0,this.baseMesh){this.remove(o);var a=this.draw(0,r+1,0,0,!0);o.geometry.dispose(),this.baseMesh.geometry=a}else this.baseMesh=o}performance.now(),this.totalPointNum=r}}},{key:"draw",value:function(t,e,i){for(var n,r,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.05,a=new THREE.Shape,h=i,l=function(t){return t*o+h},u=[],c=t;c<e;c++){(n=.5/(r=l(s)))>.3&&(n=.3),s+=n;var d=(r+h)*Math.cos(s),p=(r+h)*Math.sin(s),f=r*Math.cos(s),m=r*Math.sin(s);u.push({x:f,y:m}),c==t?a.moveTo(d,p):a.lineTo(d,p),h+=.0042,c>50&&(o=(o+=4e-4)>.23?.23:o,h+=.001),h=h>.9?.9:h}this.angleStep=n,this.curMultStep=s/(2*Math.PI),this.topPoint=h+r,this.lastThickness=h,this.lastAngle=s,this.lastAngleRatio=o;for(var g=u.length-1;g>=0;g--){var v=u[g];a.lineTo(v.x,v.y)}var y=new THREE.ExtrudeGeometry(a,Fa);y.computeVertexNormals(),y.computeBoundingSphere(),this.sphereRadius=y.boundingSphere.radius,this.baseMesh&&(this.baseMesh.position.x=-d,this.baseMesh.position.y=-p),this.curMesh&&(this.curMesh.position.x=-d,this.curMesh.position.y=-p);var A=Math.atan2(p,d);return this.rotation.x=-A-Math.PI/2,this.lastDrawX=d,this.lastDrawY=p,y}},{key:"addBody",value:function(t){var e=this,i=this.lastDrawX,n=this.lastDrawY,r=.9*Math.sqrt(i*i+n*n),s=Fa.depth,o=this.rotation.x;this.position.y+=r,this.position.x-=.5*s,this.rotation.x=0,this.rotation.y=-Math.PI/2,this.baseMesh&&(this.baseMesh.geometry.dispose(),this.remove(this.baseMesh));var a=this.draw(0,this.totalPointNum,0);if(this.curMesh?(this.curMesh.geometry.dispose(),this.curMesh.geometry=a):(this.curMesh=new m.Mesh(a,this.matList),this.add(this.curMesh),this.list.push(this.curMesh)),[this.curMesh].forEach((function(t){t&&(t.position.set(0,0,0),t.rotation.z=o,t.geometry.center(),t.rotation.y=Math.PI/2)})),this.isWide){if(!this.isWideComplete){var h=this.scale.z;this.scale.z=this.scale.x,this.scale.x=h,E.tweens.add({targets:this.scale,x:1.3*this.defScaleZ,duration:300,ease:"Sine.easeInOut",onComplete:function(){E.tweens.add({targets:e.scale,x:e.defScaleZ,duration:150,ease:"Sine.easeInOut",onComplete:function(){e.isWideComplete=!0}})}})}}else{var l=this.scale.z;this.scale.z=this.scale.x,this.scale.x=l}var u=new CANNON.Cylinder(r,r,this.isWide?s:.2*s,10),c=new CANNON.Body({mass:Math.max(1,Math.round(.25*this.totalPointNum))});c.addShape(u,new CANNON.Vec3,new CANNON.Quaternion(0,0,.7071067811865475,.7071067811865476)),c.position.copy(this.position),E.cannonPhysics.world.add(c),c.collisionResponse=!1,c.velocity.y=15,c.velocity.z=-70,c.angularVelocity.x=-2,t&&(c.velocity.z*=1.5),c.mass,c.label="spiral",setTimeout((function(){c.collisionResponse=!0}),50),this.body=c,E.objects.push(this),c.addEventListener("collide",(function(t){"brick"==t.body.label&&(0!=t.body.mass&&2!=t.body.sleepState||(E.playSfx("wall_break"),E.vibrateOn&&window.H5SDK&&H5SDK.performHapticFeedBack(100)))}))}},{key:"draw2",value:function(t,e,i){for(var n=new THREE.Shape,r=i,s=t;s<e;s++){var o=(.2-5e-5*s)*s,a=(1+r+o)*Math.cos(o)*.12,h=(1+r+o)*Math.sin(o)*.12;s==t?n.moveTo(a,h):n.lineTo(a,h),r=(r+=.02)>.9?.9:r}this.lastThickness=r;for(var l=e-1;l>=t;l--){var u=(.2-5e-5*l)*l,c=(1+u)*Math.cos(u)*.12,d=(1+u)*Math.sin(u)*.12;n.lineTo(c,d)}var p=new THREE.ExtrudeGeometry(n,Fa);this.baseMesh&&(this.baseMesh.position.x=-a,this.baseMesh.position.y=-h),this.curMesh&&(this.curMesh.position.x=-a,this.curMesh.position.y=-h);var f=Math.atan2(h,a);return this.rotation.x=-f-Math.PI/2,this.lastDrawX=a,this.lastDrawY=h,p}},{key:"draw3",value:function(t,e,i){var n=this,r=new THREE.Shape,s=5;i=0;var o,a,h={x:0,y:0},l={x:0,y:0},u=0,c=[];this.g||(this.g=E.phaserScene.add.graphics(),this.g.x=300,this.g.y=300),this.g.clear(),this.g.lineStyle(4,16711680,1);for(var d=function(t){n.g.beginPath(),n.g.moveTo(h.x,h.y);for(var e=.1+i,r=u,d=1/s,p=Math.round(.1/d),f=0;f<.1;f+=d){var m=f+r,g=s*Math.cos(m)*.1,v=s*Math.sin(m)*.1;t.lineTo(g,v),n.g.lineTo(g,v),u=f,h.x=g,h.y=v,u=m;var y=s+30*i;s+=e/p,o=y*Math.cos(m)*.1,a=y*Math.sin(m)*.1,l.x=o,l.y=a,c.push({x:o,y:a})}n.g.strokePath(),i=(i+=.001)>5?5:i},p=t;p<e;p++)d(r);c=c.reverse(),this.g.beginPath(),this.g.moveTo(h.x,h.y),c.forEach((function(t){r.lineTo(t.x,t.y),n.g.lineTo(t.x,t.y)})),this.g.strokePath();var f=new THREE.ExtrudeGeometry(r,Fa);this.baseMesh&&(this.baseMesh.position.x=-o,this.baseMesh.position.y=-a),this.curMesh&&(this.curMesh.position.x=-o,this.curMesh.position.y=-a);var m=Math.atan2(a,o);return this.rotation.x=-m-Math.PI/2,this.lastDrawX=o,this.lastDrawY=a,f}},{key:"draw4",value:function(t,e,i){var n=this;this.g||(this.g=E.phaserScene.add.graphics(),this.g.x=300,this.g.y=300),this.g.clear(),this.g.lineStyle(4,16711680,1);var r,s,o=new THREE.Shape,a=0,h=0,l={x:0,y:0},u=[],c=function(t){return.1*t+100*h};function d(t,e){c(a)}for(var p=0,f=t;f<e;f++)d(.2,p),p+=.003;u=u.reverse(),this.g.beginPath(),this.g.moveTo(l.x,l.y),u.forEach((function(t){o.lineTo(t.x,t.y),n.g.lineTo(t.x,t.y)})),this.g.strokePath();var m=new THREE.ExtrudeGeometry(o,Fa);this.baseMesh&&(this.baseMesh.position.x=-r,this.baseMesh.position.y=-s),this.curMesh&&(this.curMesh.position.x=-r,this.curMesh.position.y=-s);var g=Math.atan2(s,r);return this.rotation.x=-g-Math.PI/2,this.lastDrawX=r,this.lastDrawY=s,m}},{key:"draw5",value:function(t,e,i){for(var n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=new THREE.Shape,o=i,a=function(t){return.2*t+o},h=[],l=t;l<e;l++){var u=a(r);(n=.4/u)>.2&&(n=.2),r+=n;var c=(u+o)*Math.cos(r),d=(u+o)*Math.sin(r),p=u*Math.cos(r),f=u*Math.sin(r);h.push({x:p,y:f}),l==t?s.moveTo(c,d):s.lineTo(c,d),o=(o+=.01)>.9?.9:o}this.angleStep=n,this.lastThickness=o,this.lastAngle=r;for(var m=h.length-1;m>=0;m--){var g=h[m];s.lineTo(g.x,g.y)}var v=new THREE.ExtrudeGeometry(s,Fa);v.computeVertexNormals(),this.baseMesh&&(this.baseMesh.position.x=-c,this.baseMesh.position.y=-d),this.curMesh&&(this.curMesh.position.x=-c,this.curMesh.position.y=-d);var y=Math.atan2(d,c);return this.rotation.x=-y-Math.PI/2,this.lastDrawX=c,this.lastDrawY=d,v}},{key:"drawWorking",value:function(t,e,i){for(var n,r,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.05,a=new THREE.Shape,h=i,l=function(t){return t*o+h},u=[],c=t;c<e;c++){(n=.5/(r=l(s)))>.3&&(n=.3),s+=n;var d=(r+h)*Math.cos(s),p=(r+h)*Math.sin(s),f=r*Math.cos(s),m=r*Math.sin(s);u.push({x:f,y:m}),c==t?a.moveTo(d,p):a.lineTo(d,p),h=(h+=.006)>.9?.9:h,c>50&&(o=(o+=4e-4)>.2?.2:o)}this.angleStep=n,this.curMultStep=s/(2*Math.PI),this.topPoint=h+r,this.lastThickness=h,this.lastAngle=s,this.lastAngleRatio=o;for(var g=u.length-1;g>=0;g--){var v=u[g];a.lineTo(v.x,v.y)}var y=new THREE.ExtrudeGeometry(a,Fa);y.computeVertexNormals(),y.computeBoundingSphere(),this.sphereRadius=y.boundingSphere.radius,this.baseMesh&&(this.baseMesh.position.x=-d,this.baseMesh.position.y=-p),this.curMesh&&(this.curMesh.position.x=-d,this.curMesh.position.y=-p);var A=Math.atan2(p,d);return this.rotation.x=-A-Math.PI/2,this.lastDrawX=d,this.lastDrawY=p,y}}])&&Oa(e.prototype,i),n&&Oa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(m.Object3D),za=i(1),Ua=i.n(za);function Ga(t){return(Ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Va(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ha(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Wa(t,e){return(Wa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ja(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Xa(t);if(e){var r=Xa(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ya(this,i)}}function Ya(t,e){if(e&&("object"===Ga(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Xa(t){return(Xa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}new m.Object3D;var qa,Ja=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wa(t,e)}(s,t);var e,i,n,r=ja(s);function s(t,e){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;return Va(this,s),(i=r.call(this,t,e,n)).count=n,i}return e=s,(i=[{key:"addItem",value:function(t){if(!(this.list.length>=this.count)){var e={pos:t,index:this.list.length};return this.list.push(e),e}}},{key:"update",value:function(){var t=this.dummy,e=this.list.length;if(e>0){for(var i=e-1;i>=0;i--){var n=this.list[i];n.pos.z+=1,t.position.copy(n.pos),t.updateMatrix(),this.instancedMesh.setMatrixAt(i,t.matrix),n.pos.z>E.camZ+10&&this.sendWind&&(n.pos.z-=500)}this.instancedMesh.instanceMatrix.needsUpdate=!0}}}])&&Ha(e.prototype,i),n&&Ha(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(x);function Qa(t){return(Qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ka(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Za(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $a(t,e){return($a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function th(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ih(t);if(e){var r=ih(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return eh(this,i)}}function eh(t,e){if(e&&("object"===Qa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ih(t){return(ih=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$a(t,e)}(s,t);var e,i,n,r=th(s);function s(){var t;Ka(this,s),qa=E.phaserScene.tweens,t=r.call(this);var e=new m.Object3D,i=E.chiselNormal,n=E.chiselFragment;return e.add(i),t.fragmentModel=n,t.normalModel=i,t.model=e,e.traverse((function(t){t.material&&!t.material.map&&(t.material.converted||(t.material.converted=!0,t.material.color.convertSRGBToLinear()))})),t.fragmentModel.visible=!1,t.add(e),t.speed=.07*10,t.carveSpeed=t.speed,t.defSpeed=t.speed,t.carveSpeedY=.005,t.state=0,t.position.y=4,t.defY=t.position.y,t.initParticles(),t.initParticlesSpeed(),t.initBody(),t.toDefaultPosition(),t.initMultText(),t}return e=s,(i=[{key:"initMultText",value:function(){var t=document.createElement("canvas");t.width=64,t.height=64;var e=t.getContext("2d");e.font="60px mashup",e.fillStyle="#ffffff",e.textAlign="center",e.textBaseline="middle",e.fillText("X2",32,32,60),e.lineWidth=2,e.strokeStyle="#000000",e.strokeText("X2",32,32,60);var i=new m.Mesh(new m.PlaneBufferGeometry(1,1),new m.MeshBasicMaterial({map:new THREE.CanvasTexture(t),transparent:!0}));i.geometry.translate(0,.5,0),i.scale.multiplyScalar(3),i.renderOrder=150,i.material.map.encoding=3001,E.threeScene.add(i),this.multPlane=i;var n=1;this.changeMultPlane=function(t){n!=t&&(n=t,i.rotation.z=0,qa.killTweensOf(i.rotation),qa.add({targets:i.rotation,z:-.6,duration:150,ease:"Sine.easeInOut",yoyo:!0,onYoyo:function(){e.clearRect(0,0,64,64),e.fillStyle="#ffffff",e.textAlign="center",e.textBaseline="middle",e.fillText("X".concat(t),32,32,60),e.lineWidth=2,e.strokeStyle="#000000",e.strokeText("X".concat(t),32,32,60),i.material.map.needsUpdate=!0}}))}}},{key:"initBody",value:function(){var t=this,e=new CANNON.Box(new CANNON.Vec3(.5,.6,.5)),i=new CANNON.Body({mass:1,collisionFilterGroup:E.collisionGroupChisel,collisionFilterMask:E.collisionGroupBrick|E.collisionGroupCoin|E.collisionGroupKilling});i.addShape(e),E.cannonPhysics.world.add(i),i.collisionResponse=!1,i.label="chisel",i.gameObject=this,this.body=i,i.addEventListener("collide",(function(e){if(4!=t.state&&e.body.label&&("brick"!=e.body.label||t.bonusActive||0!=e.body.mass&&2!=e.body.sleepState||t.changeState(4),-1!=e.body.label.indexOf("killing"))){if("killing_circleWall"==e.body.label&&t.bonusActive)return;t.changeState(4)}}))}},{key:"initParticles",value:function(){var t=this,e=["#fcd974","#ccaa4b","#815123"];e=e.map((function(t){return new m.Color(t)}));var i=new ga(E.chiselDust.geometry,new THREE.MeshLambertMaterial({color:16777215}),150);this.dustInstanced=i;var n=new ga(E.coinModel.geometry,E.coinModel.material,150,!0);this.goldInstanced=n,this.sendParticle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1?arguments[1]:void 0;r?n.addItem(t.position,e):i.addItem(t.position,e)}}},{key:"toCarvePosition",value:function(){var t=this;this.changeState(1),qa.killTweensOf(this.position),qa.killTweensOf(this.rotation),qa.add({targets:this.position,y:0,duration:100,ease:"Sine.easeInOut",onComplete:function(){t.canCarve=!0}}),qa.add({targets:this.rotation,x:-.4,duration:100,ease:"Sine.easeInOut"})}},{key:"toDefaultPosition",value:function(){this.canCarve=!1,this.changeState(0),this.lastCarvedWood=null,qa.killTweensOf(this.position),qa.killTweensOf(this.rotation),qa.add({targets:this.position,y:this.defY,duration:300,ease:"Sine.easeInOut"}),qa.add({targets:this.rotation,x:-.2,duration:300,ease:"Sine.easeInOut"})}},{key:"speedUp",value:function(){qa.add({targets:this,speed:this.defSpeed,duration:500})}},{key:"changeState",value:function(t){if((4!=t||!this.immuneTime)&&t!=this.state)if(this.prevState=this.state,this.state=t,3==t){this.toDefaultPosition(),this.state=3,qa.add({targets:this,speed:0,duration:500});var e=this.scrapSpiral?2500:500;E.phaserScene.time.delayedCall(e,(function(){E.endLevel(!0)}))}else 4==t&&(this.spiral&&this.throwSpiral(),this.speed=0,this.destroy(),this.isDead=!0,this.isCarving=!1)}},{key:"resetOnRestart",value:function(){this.windInstanced.sendWind=!1,this.bonusActive=!1,this.visible=!0,this.speed=this.defSpeed,this.carveSpeed=this.defSpeed,this.body.collisionResponse=!1,this.toDefaultPosition()}},{key:"destroy",value:function(){this.windInstanced.sendWind=!1,this.bonusActive=!1,this.carveSound&&(E.stopSfx(this.carveSound),this.carveSound=null),E.playSfx("chisel_broken");var t=this.fragmentModel.clone();this.add(t),t.visible=!0,this.visible=!1,E.threeScene.attach(t);var e=t.getObjectByName("ChiselFragmentHandle")||t.getObjectByName("chisel_ChiselFragmentHandle");E.threeScene.attach(e),ha.addRectBodyToObject(e,1,.8,!1),E.objects.push(e),e.body.velocity.set(0,1,5);for(var i=t.children,n=i.length-1;n>=0;n--){var r=i[n];E.threeScene.attach(r),ha.addRectBodyToObject(r,1,.8,!1),E.objects.push(r),r.type="chisel_part",r.body.velocity.set(15*(Math.random()-.5),5*(Math.random()-.5),5*(Math.random()-.5))}setTimeout((function(){E.endLevel(!1)}),1e3),E.vibrateOn&&window.H5SDK&&H5SDK.performHapticFeedBack(100)}},{key:"update",value:function(t,e){this.immuneTime&&this.immuneTime--,this.windInstanced.update(t),this.windInstanced.sendWind&&this.windInstanced.addItem({x:50*(2*Math.random()-1),y:20*(.2+2*Math.random()),z:this.position.z-50}),this.circleHolder.position.copy(this.position),this.circleHolder.position.y=Math.max(this.circleHolder.position.y,1),this.particleGroups.forEach((function(e){e.tick(t)})),this.dustInstanced.update(t,e),this.goldInstanced.update(t,e);var i=E.controls,n=this.isCarving?this.carveSpeed:this.speed;if(this.position.z-=n*e,this.isCarving){E.curScore+=n*e*E.scorePerDig*(this.curMult||1),E.ui.updateScore(E.curScore),this.carveMeter+=n*e;var r=!0;(this.spiral.isScrapSpiral||E.levelNo<3)&&(r=!1);var s=45,o=90;if(2==this.spiral.type&&(s=45,o=70),r&&this.carveMeter>s&&!this.bonusActive){this.setCircleActive(!0);var a=(this.carveMeter-s)/o;(a=1-a)<.15&&this.sendLightning();var h=100+300*(a=Math.max(a,.5));this.setCircleSpeed(a,h),this.enableCircleParticles()}else this.setCircleActive(!1),this.disableCircleParticles()}else this.disableCircleParticles(),this.setCircleActive(!1),this.carveMeter=0;if(this.state>=3)this.scrapSpiral&&this.scrapSpiral.update();else{this.lastCarvedWood&&this.position.z<E.scoreArea.position.z&&E.scoreArea.onSurface&&(this.curCarvingWood&&this.curCarvingWood.isScrapPlane||0!=E.levelNo&&this.rotation.x>-.22&&this.changeState(4));var l=i.isDown;this.carveWaitTime&&this.carveWaitTime--,l?(0!=this.state||this.carveWaitTime||this.toCarvePosition(),i.wasDown=!0):(this.spiral&&this.throwSpiral(),1==this.state&&this.toDefaultPosition(),this.curCarvingWood=null,i.wasDown=!1,this.carveWaitTime=0),this.isCarving=!1;var u,c=E.woodList[0];if(c&&this.position.z<c.position.z-c.length&&(E.woodList.shift(),u=c,c=E.woodList[0],u&&this.curCarvingWood==u&&u.chiselPassed(this.position.y)),this.canCarve){if(c&&this.position.z<c.position.z){if(1==this.state&&this.lastCarvedWood&&this.lastCarvedWood!=c&&Math.abs(this.lastCarvedWood.position.z-c.position.z)>1.1*E.trunkWidth)return this.toDefaultPosition(),void(this.carveWaitTime=30);this.isCarving=!0,this.lastCarvedWood=c,c.isScrapPlane?this.position.y-=2*this.carveSpeedY:this.position.y-=this.carveSpeedY,c.changeVertexWithPosition(this.position.z,this.position.y),this.spiral||(c.isScrapPlane?this.spiral=new Pa:this.spiral=new Na(c.type));var d=1;if(this.spiral.totalPointNum<50&&(d=2,d=5),this.spiral.addPoint(e*d),u&&this.curCarvingWood==u&&c.chiselEntered(this.position.y),this.curCarvingWood=c,0==E.levelNo&&E.ui.hideTutorial&&E.ui.hideTutorial(),E.woodCarved(c),!this.spiral.isScrapSpiral){var p=2==c.type;Math.random()<.6&&this.sendParticle(1,p),Math.random()<.6&&this.sendParticle(-1,p)}}if(u&&!this.isCarving&&u.throwEndCap(),!this.isCarving&&this.position.y<0&&(this.position.y+=.02),this.position.y<-3&&(this.position.y=-3),this.isCarving){var f=this.position.y/-1;this.rotation.x=Math.min(-.07,-.4- -.4*f)}}else this.curCarvingWood=null;if(this.spiral){if(this.spiral.position.z=this.position.z-1,this.spiral.position.y=-this.spiral.lastThickness,this.spiral.curMultStep>4){var m=Math.floor(this.spiral.curMultStep-4)+2;this.curMult=m,this.changeMultPlane(m),this.multPlane.visible=!0,this.multPlane.position.z=this.spiral.position.z,this.multPlane.position.y=this.spiral.position.y+2*this.spiral.topPoint-1}this.isCarving||this.throwSpiral()}this.isCarving?this.carveSoundTime?(this.carveSoundTime-=e,this.carveSoundTime<=0&&(this.carveSoundTime=0)):(this.carveSoundTime=16-this.spiral.totalPointNum/30,this.carveSoundTime=this.carveSoundTime<5?5:this.carveSoundTime,E.playSfx("carving",1,this.curRate),this.curRate+=.1,this.spiral.totalPointNum,E.vibrateOn&&window.H5SDK&&H5SDK.performHapticFeedBack(25)):(this.curRate=1.3,this.carveSoundTime=0),this.isCarving&&this.wasCarving,this.wasCarving=this.isCarving,!this.isCarving&&this.carveSound&&(E.stopSfx(this.carveSound),this.carveSound=null),this.body.position.copy(this.position),this.body.position.y-=.25,this.body.position.z-=2,this.body.velocity.set(0,0,0),this.body.angularVelocity.set(0,0,0),this.body.quaternion.set(0,0,0,1)}}},{key:"throwSpiral",value:function(){if(this.multPlane.visible=!1,this.changeMultPlane(2),this.spiral.isScrapSpiral){this.scrapSpiral=this.spiral,this.changeState(3);var t=22*E.scoreAreaScale,e=E.scoreArea.scrapObj.position.z-t,i=1-Math.abs(this.scrapSpiral.position.z-e)/t;this.scrapSpiral.winRat=i}this.spiral.addBody(this.bonusActive),this.spiral=null}},{key:"initParticlesSpeed",value:function(){var t=this;this.particleGroups=[],function(){var e=E.textures.circle;e.minFilter=THREE.NearestFilter,e.magFilter=THREE.NearestFilter,e.encoding=3001;var i=new Ua.a.Group({texture:{value:e},blending:1,maxParticleCount:1e3}),n=new Ua.a.Emitter({maxAge:{value:.7},direction:-1,position:{value:new m.Vector3(0,0,0),spread:new THREE.Vector3(0,0,0),radius:50},velocity:{value:new THREE.Vector3(0,100,-20),spread:new THREE.Vector3(300,20,140)},size:{value:[0,4,4]},opacity:{value:[1,1,1,0]},particleCount:10,activeMultiplier:1});n.disable(),i.addEmitter(n),i.mesh.frustumCulled=!1,i.mesh.renderOrder=110,t.add(i.mesh),i.mesh.fog=!1,t.particleGroups.push(i),t.speedCircleParticleGroup=i,t.changeCircleParticleSpeedY=function(t){n.velocity.value.y=t,n.updateFlags.velocity=!0,n.resetFlags.velocity=!0},t.changeCircleParticleOpacity=function(t){n.opacity._value=[t,t,t,0],n.updateFlags.opacity=!0,n.resetFlags.opacity=!0},t.enableCircleParticles=function(){n.enable()},t.disableCircleParticles=function(){n.disable()}}(),new m.PlaneBufferGeometry(4,1).rotateY(Math.PI/2);var e=E.lineMesh;e.geometry.scale(10,10,10);var i=new Ja(e.geometry,new m.MeshBasicMaterial({color:16777215}));this.windInstanced=i;var n=new m.Object3D;this.circleHolder=n,E.threeScene.add(n);var r=E.models.circle_fx_elements.scene.getObjectByName("circle"),s=E.models.circle_fx_elements.scene.getObjectByName("glow_plane").clone(),o=E.models.circle_fx_elements.scene.getObjectByName("lightning_plane");s.renderOrder=200,s.scale.multiplyScalar(200),s.material.opacity=0,n.add(s);var a=[],h=1,l=700,u=!1,c=function t(){if(u){var e=a.pop();e||((e=r.clone()).material=new m.MeshBasicMaterial({color:16777215,transparent:!0,opacity:.5}),e.renderOrder=110,n.add(e)),e.visible=!0,e.morphTargetInfluences[0]=1,e.curMorph=1,qa.add({targets:e,curMorph:.3,delay:500*h,duration:500*h,onUpdate:function(){e.morphTargetInfluences[0]=e.curMorph}}),e.material.opacity=0,qa.add({targets:e.material,opacity:1,duration:300*h}),e.scale.setScalar(200),qa.add({targets:e.scale,x:10,y:10,z:10,duration:1e3*h,onComplete:function(){a.push(e),e.visible=!1}}),E.phaserScene.time.delayedCall(l*h,(function(){t()}))}};c(),this.setCircleSpeed=function(t,e){h=t,e&&(l=e)},this.setCircleActive=function(t){if(t!=u){qa.killTweensOf(s.material);var e=t?0:500;qa.add({targets:s.material,opacity:t?1:0,duration:500,delay:e})}u||(u=t,c()),u=t};var d=E.textures.lightning;o.material.map=d,d.flipY=!1,d.wrapS=d.wrapT=THREE.RepeatWrapping,d.repeat.set(1/3,1/3),this.sendLightning=function(){if(!t.bonusActive){t.bonusActive=!0,i.sendWind=!0,t.body.collisionResponse=!0;var e=function(){var t=0;setTimeout((function(){!function i(){if(++t>8)return t=0,e.forEach((function(t){t.parent.remove(t)})),void(e=[]);var n=Math.floor(t/3),r=t%3;o.material.map.offset.x=1/3*r,o.material.map.offset.y=1/3*n,setTimeout((function(){i()}),50)}()}),25);for(var e=[],i=0;i<10;i++){var s=2*Math.PI*i/10;s+=.3*(1-2*Math.random());var l=o.clone();l.renderOrder=200,n.add(l),l.rotation.y=s,l.scale.setScalar(0),qa.add({targets:l.scale,x:400,y:80,z:200,duration:200}),e.push(l)}var u=a.pop();u||((u=r.clone()).material=new m.MeshBasicMaterial({color:16777215,transparent:!0,opacity:.5}),u.renderOrder=110,n.add(u)),u.morphTargetInfluences[0]=1,u.visible=!0,qa.add({targets:u,curMorph:1,delay:500*h,duration:500*h,onUpdate:function(){u.morphTargetInfluences[0]=u.curMorph}}),u.material.opacity=1,qa.add({targets:u.material,opacity:0,delay:200,duration:200}),u.scale.setScalar(10),qa.add({targets:u.scale,x:500,y:500,z:500,duration:500,onComplete:function(){a.push(u),u.visible=!1}})};setTimeout((function(){e(),qa.add({targets:t,speed:1.5*t.speed,duration:200,ease:"Sine.easeInOut",onUpdate:function(){t.carveSpeed=t.speed}})}),500)}}}},{key:"turnOffBonus",value:function(){var t=this;this.bonusActive=!1,this.windInstanced.sendWind=!1,qa.add({targets:this,speed:this.defSpeed,duration:500,ease:"Sine.easeInOut",onUpdate:function(){t.carveSpeed=t.speed}})}}])&&Za(e.prototype,i),n&&Za(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(m.Object3D);function rh(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return sh(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return sh(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw s}}}}function sh(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function oh(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ah=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,n=[{key:"mergeModel",value:function(t,e){var i=[],n=[];t.traverse((function(t){if(t.material){var e=i.indexOf(t.material);e<0?(i.push(t.material),n.push([t])):n[e].push(t)}}));for(var r=[],s=0;s<i.length;s++){var o=n[s],a=this.mergeMeshList(o,i[s],e);r.push(a)}return r}},{key:"mergeMeshList",value:function(t,e,i){var n,r=[],s=rh(t);try{for(s.s();!(n=s.n()).done;){var o=n.value;o.parent!=E.threeScene&&Jt.moveToScene(o);var a=o.geometry.clone();o.updateWorldMatrix(),o.updateMatrix(),a.applyMatrix4(o.matrix),r.push(a),o.parent.remove(o)}}catch(t){s.e(t)}finally{s.f()}var h=function(t,e=!1){const i=null!==t[0].index,n=new Set(Object.keys(t[0].attributes)),r=new Set(Object.keys(t[0].morphAttributes)),s={},o={},a=t[0].morphTargetsRelative,h=new m.BufferGeometry;let l=0;for(let u=0;u<t.length;++u){const c=t[u];let d=0;if(i!==(null!==c.index))return null;for(const t in c.attributes){if(!n.has(t))return null;void 0===s[t]&&(s[t]=[]),s[t].push(c.attributes[t]),d++}if(d!==n.size)return null;if(a!==c.morphTargetsRelative)return null;for(const t in c.morphAttributes){if(!r.has(t))return null;void 0===o[t]&&(o[t]=[]),o[t].push(c.morphAttributes[t])}if(h.userData.mergedUserData=h.userData.mergedUserData||[],h.userData.mergedUserData.push(c.userData),e){let t;if(i)t=c.index.count;else{if(void 0===c.attributes.position)return null;t=c.attributes.position.count}h.addGroup(l,t,u),l+=t}}if(i){let e=0;const i=[];for(let n=0;n<t.length;++n){const r=t[n].index;for(let t=0;t<r.count;++t)i.push(r.getX(t)+e);e+=t[n].attributes.position.count}h.setIndex(i)}for(const t in s){const e=va(s[t]);if(!e)return null;h.setAttribute(t,e)}for(const t in o){const e=o[t][0].length;if(0===e)break;h.morphAttributes=h.morphAttributes||{},h.morphAttributes[t]=[];for(let i=0;i<e;++i){const e=[];for(let n=0;n<o[t].length;++n)e.push(o[t][n][i]);const n=va(e);if(!n)return null;h.morphAttributes[t].push(n)}}return h}(r),l=new m.Mesh(h,e);return l.name=t[0].name,r.forEach((function(t){return t.dispose()})),i&&E.threeScene.add(l),l}}],(i=null)&&oh(e.prototype,i),n&&oh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function hh(t,e){var i=t.__state.conversionName.toString(),n=Math.round(t.r),r=Math.round(t.g),s=Math.round(t.b),o=t.a,a=Math.round(t.h),h=t.s.toFixed(1),l=t.v.toFixed(1);if(e||"THREE_CHAR_HEX"===i||"SIX_CHAR_HEX"===i){for(var u=t.hex.toString(16);u.length<6;)u="0"+u;return"#"+u}return"CSS_RGB"===i?"rgb("+n+","+r+","+s+")":"CSS_RGBA"===i?"rgba("+n+","+r+","+s+","+o+")":"HEX"===i?"0x"+t.hex.toString(16):"RGB_ARRAY"===i?"["+n+","+r+","+s+"]":"RGBA_ARRAY"===i?"["+n+","+r+","+s+","+o+"]":"RGB_OBJ"===i?"{r:"+n+",g:"+r+",b:"+s+"}":"RGBA_OBJ"===i?"{r:"+n+",g:"+r+",b:"+s+",a:"+o+"}":"HSV_OBJ"===i?"{h:"+a+",s:"+h+",v:"+l+"}":"HSVA_OBJ"===i?"{h:"+a+",s:"+h+",v:"+l+",a:"+o+"}":"unknown format"}var lh=Array.prototype.forEach,uh=Array.prototype.slice,ch={BREAK:{},extend:function(t){return this.each(uh.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(i){this.isUndefined(e[i])||(t[i]=e[i])}.bind(this))}),this),t},defaults:function(t){return this.each(uh.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(i){this.isUndefined(t[i])&&(t[i]=e[i])}.bind(this))}),this),t},compose:function(){var t=uh.call(arguments);return function(){for(var e=uh.call(arguments),i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},each:function(t,e,i){if(t)if(lh&&t.forEach&&t.forEach===lh)t.forEach(e,i);else if(t.length===t.length+0){var n,r=void 0;for(r=0,n=t.length;r<n;r++)if(r in t&&e.call(i,t[r],r)===this.BREAK)return}else for(var s in t)if(e.call(i,t[s],s)===this.BREAK)return},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n=void 0;return function(){var r=this,s=arguments;function o(){n=null,i||t.apply(r,s)}var a=i||!n;clearTimeout(n),n=setTimeout(o,e),a&&t.apply(r,s)}},toArray:function(t){return t.toArray?t.toArray():uh.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return isNaN(t)})),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return t instanceof Function}},dh=[{litmus:ch.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:hh},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:hh},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:hh},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:hh}}},{litmus:ch.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:ch.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:ch.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(ch.isNumber(t.r)&&ch.isNumber(t.g)&&ch.isNumber(t.b)&&ch.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(ch.isNumber(t.r)&&ch.isNumber(t.g)&&ch.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(ch.isNumber(t.h)&&ch.isNumber(t.s)&&ch.isNumber(t.v)&&ch.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(ch.isNumber(t.h)&&ch.isNumber(t.s)&&ch.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],ph=void 0,fh=void 0,mh=function(){fh=!1;var t=arguments.length>1?ch.toArray(arguments):arguments[0];return ch.each(dh,(function(e){if(e.litmus(t))return ch.each(e.conversions,(function(e,i){if(ph=e.read(t),!1===fh&&!1!==ph)return fh=ph,ph.conversionName=i,ph.conversion=e,ch.BREAK})),ch.BREAK})),fh},gh=void 0,vh={hsv_to_rgb:function(t,e,i){var n=Math.floor(t/60)%6,r=t/60-Math.floor(t/60),s=i*(1-e),o=i*(1-r*e),a=i*(1-(1-r)*e),h=[[i,a,s],[o,i,s],[s,i,a],[s,o,i],[a,s,i],[i,s,o]][n];return{r:255*h[0],g:255*h[1],b:255*h[2]}},rgb_to_hsv:function(t,e,i){var n=Math.min(t,e,i),r=Math.max(t,e,i),s=r-n,o=void 0;return 0===r?{h:NaN,s:0,v:0}:(o=t===r?(e-i)/s:e===r?2+(i-t)/s:4+(t-e)/s,(o/=6)<0&&(o+=1),{h:360*o,s:s/r,v:r/255})},rgb_to_hex:function(t,e,i){var n=this.hex_with_component(0,2,t);return n=this.hex_with_component(n,1,e),n=this.hex_with_component(n,0,i)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,i){return i<<(gh=8*e)|t&~(255<<gh)}},yh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ah=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},xh=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),wh=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,n)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0},bh=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},Sh=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},Eh=function(){function t(){if(Ah(this,t),this.__state=mh.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return xh(t,[{key:"toString",value:function(){return hh(this)}},{key:"toHexString",value:function(){return hh(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),t}();function Th(t,e,i){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space||Eh.recalculateRGB(this,e,i),this.__state[e]},set:function(t){"RGB"!==this.__state.space&&(Eh.recalculateRGB(this,e,i),this.__state.space="RGB"),this.__state[e]=t}})}function _h(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space||Eh.recalculateHSV(this),this.__state[e]},set:function(t){"HSV"!==this.__state.space&&(Eh.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}Eh.recalculateRGB=function(t,e,i){if("HEX"===t.__state.space)t.__state[e]=vh.component_from_hex(t.__state.hex,i);else{if("HSV"!==t.__state.space)throw new Error("Corrupted color state");ch.extend(t.__state,vh.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},Eh.recalculateHSV=function(t){var e=vh.rgb_to_hsv(t.r,t.g,t.b);ch.extend(t.__state,{s:e.s,v:e.v}),ch.isNaN(e.h)?ch.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h},Eh.COMPONENTS=["r","g","b","h","s","v","hex","a"],Th(Eh.prototype,"r",2),Th(Eh.prototype,"g",1),Th(Eh.prototype,"b",0),_h(Eh.prototype,"h"),_h(Eh.prototype,"s"),_h(Eh.prototype,"v"),Object.defineProperty(Eh.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(Eh.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=vh.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var Mh=function(){function t(e,i){Ah(this,t),this.initialValue=e[i],this.domElement=document.createElement("div"),this.object=e,this.property=i,this.__onChange=void 0,this.__onFinishChange=void 0}return xh(t,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),t}(),Ch={};ch.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(t,e){ch.each(t,(function(t){Ch[t]=e}))}));var Ph=/(\d+(\.\d+)?)px/;function Rh(t){if("0"===t||ch.isUndefined(t))return 0;var e=t.match(Ph);return ch.isNull(e)?0:parseFloat(e[1])}var Oh={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,i){var n=i,r=e;ch.isUndefined(r)&&(r=!0),ch.isUndefined(n)&&(n=!0),t.style.position="absolute",r&&(t.style.left=0,t.style.right=0),n&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,i,n){var r=i||{},s=Ch[e];if(!s)throw new Error("Event type "+e+" not supported.");var o=document.createEvent(s);switch(s){case"MouseEvents":var a=r.x||r.clientX||0,h=r.y||r.clientY||0;o.initMouseEvent(e,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,a,h,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var l=o.initKeyboardEvent||o.initKeyEvent;ch.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),l(e,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:o.initEvent(e,r.bubbles||!1,r.cancelable||!0)}ch.defaults(o,n),t.dispatchEvent(o)},bind:function(t,e,i,n){var r=n||!1;return t.addEventListener?t.addEventListener(e,i,r):t.attachEvent&&t.attachEvent("on"+e,i),Oh},unbind:function(t,e,i,n){var r=n||!1;return t.removeEventListener?t.removeEventListener(e,i,r):t.detachEvent&&t.detachEvent("on"+e,i),Oh},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var i=t.className.split(/ +/);-1===i.indexOf(e)&&(i.push(e),t.className=i.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return Oh},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var i=t.className.split(/ +/),n=i.indexOf(e);-1!==n&&(i.splice(n,1),t.className=i.join(" "))}else t.className=void 0;return Oh},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return Rh(e["border-left-width"])+Rh(e["border-right-width"])+Rh(e["padding-left"])+Rh(e["padding-right"])+Rh(e.width)},getHeight:function(t){var e=getComputedStyle(t);return Rh(e["border-top-width"])+Rh(e["border-bottom-width"])+Rh(e["padding-top"])+Rh(e["padding-bottom"])+Rh(e.height)},getOffset:function(t){var e=t,i={left:0,top:0};if(e.offsetParent)do{i.left+=e.offsetLeft,i.top+=e.offsetTop,e=e.offsetParent}while(e);return i},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},Lh=function(t){function e(t,i){Ah(this,e);var n=Sh(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),r=n;return n.__prev=n.getValue(),n.__checkbox=document.createElement("input"),n.__checkbox.setAttribute("type","checkbox"),Oh.bind(n.__checkbox,"change",(function(){r.setValue(!r.__prev)}),!1),n.domElement.appendChild(n.__checkbox),n.updateDisplay(),n}return bh(e,t),xh(e,[{key:"setValue",value:function(t){var i=wh(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),i}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),wh(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(Mh),Ih=function(t){function e(t,i,n){Ah(this,e);var r=Sh(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),s=n,o=r;if(r.__select=document.createElement("select"),ch.isArray(s)){var a={};ch.each(s,(function(t){a[t]=t})),s=a}return ch.each(s,(function(t,e){var i=document.createElement("option");i.innerHTML=e,i.setAttribute("value",t),o.__select.appendChild(i)})),r.updateDisplay(),Oh.bind(r.__select,"change",(function(){var t=this.options[this.selectedIndex].value;o.setValue(t)})),r.domElement.appendChild(r.__select),r}return bh(e,t),xh(e,[{key:"setValue",value:function(t){var i=wh(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),i}},{key:"updateDisplay",value:function(){return Oh.isActive(this.__select)?this:(this.__select.value=this.getValue(),wh(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(Mh),Dh=function(t){function e(t,i){Ah(this,e);var n=Sh(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),r=n;function s(){r.setValue(r.__input.value)}return n.__input=document.createElement("input"),n.__input.setAttribute("type","text"),Oh.bind(n.__input,"keyup",s),Oh.bind(n.__input,"change",s),Oh.bind(n.__input,"blur",(function(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())})),Oh.bind(n.__input,"keydown",(function(t){13===t.keyCode&&this.blur()})),n.updateDisplay(),n.domElement.appendChild(n.__input),n}return bh(e,t),xh(e,[{key:"updateDisplay",value:function(){return Oh.isActive(this.__input)||(this.__input.value=this.getValue()),wh(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(Mh);function Bh(t){var e=t.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var kh=function(t){function e(t,i,n){Ah(this,e);var r=Sh(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),s=n||{};return r.__min=s.min,r.__max=s.max,r.__step=s.step,ch.isUndefined(r.__step)?0===r.initialValue?r.__impliedStep=1:r.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(r.initialValue))/Math.LN10))/10:r.__impliedStep=r.__step,r.__precision=Bh(r.__impliedStep),r}return bh(e,t),xh(e,[{key:"setValue",value:function(t){var i=t;return void 0!==this.__min&&i<this.__min?i=this.__min:void 0!==this.__max&&i>this.__max&&(i=this.__max),void 0!==this.__step&&i%this.__step!=0&&(i=Math.round(i/this.__step)*this.__step),wh(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,i)}},{key:"min",value:function(t){return this.__min=t,this}},{key:"max",value:function(t){return this.__max=t,this}},{key:"step",value:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=Bh(t),this}}]),e}(Mh);var Fh=function(t){function e(t,i,n){Ah(this,e);var r=Sh(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,n));r.__truncationSuspended=!1;var s=r,o=void 0;function a(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function h(t){var e=o-t.clientY;s.setValue(s.getValue()+e*s.__impliedStep),o=t.clientY}function l(){Oh.unbind(window,"mousemove",h),Oh.unbind(window,"mouseup",l),a()}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),Oh.bind(r.__input,"change",(function(){var t=parseFloat(s.__input.value);ch.isNaN(t)||s.setValue(t)})),Oh.bind(r.__input,"blur",(function(){a()})),Oh.bind(r.__input,"mousedown",(function(t){Oh.bind(window,"mousemove",h),Oh.bind(window,"mouseup",l),o=t.clientY})),Oh.bind(r.__input,"keydown",(function(t){13===t.keyCode&&(s.__truncationSuspended=!0,this.blur(),s.__truncationSuspended=!1,a())})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return bh(e,t),xh(e,[{key:"updateDisplay",value:function(){var t,i,n;return this.__input.value=this.__truncationSuspended?this.getValue():(t=this.getValue(),i=this.__precision,n=Math.pow(10,i),Math.round(t*n)/n),wh(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(kh);function Nh(t,e,i,n,r){return n+(t-e)/(i-e)*(r-n)}var zh=function(t){function e(t,i,n,r,s){Ah(this,e);var o=Sh(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,{min:n,max:r,step:s})),a=o;function h(t){t.preventDefault();var e=a.__background.getBoundingClientRect();return a.setValue(Nh(t.clientX,e.left,e.right,a.__min,a.__max)),!1}function l(){Oh.unbind(window,"mousemove",h),Oh.unbind(window,"mouseup",l),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}function u(t){var e=t.touches[0].clientX,i=a.__background.getBoundingClientRect();a.setValue(Nh(e,i.left,i.right,a.__min,a.__max))}function c(){Oh.unbind(window,"touchmove",u),Oh.unbind(window,"touchend",c),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}return o.__background=document.createElement("div"),o.__foreground=document.createElement("div"),Oh.bind(o.__background,"mousedown",(function(t){document.activeElement.blur(),Oh.bind(window,"mousemove",h),Oh.bind(window,"mouseup",l),h(t)})),Oh.bind(o.__background,"touchstart",(function(t){if(1!==t.touches.length)return;Oh.bind(window,"touchmove",u),Oh.bind(window,"touchend",c),u(t)})),Oh.addClass(o.__background,"slider"),Oh.addClass(o.__foreground,"slider-fg"),o.updateDisplay(),o.__background.appendChild(o.__foreground),o.domElement.appendChild(o.__background),o}return bh(e,t),xh(e,[{key:"updateDisplay",value:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",wh(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(kh),Uh=function(t){function e(t,i,n){Ah(this,e);var r=Sh(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),s=r;return r.__button=document.createElement("div"),r.__button.innerHTML=void 0===n?"Fire":n,Oh.bind(r.__button,"click",(function(t){return t.preventDefault(),s.fire(),!1})),Oh.addClass(r.__button,"button"),r.domElement.appendChild(r.__button),r}return bh(e,t),xh(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(Mh),Gh=function(t){function e(t,i){Ah(this,e);var n=Sh(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));n.__color=new Eh(n.getValue()),n.__temp=new Eh(0);var r=n;n.domElement=document.createElement("div"),Oh.makeSelectable(n.domElement,!1),n.__selector=document.createElement("div"),n.__selector.className="selector",n.__saturation_field=document.createElement("div"),n.__saturation_field.className="saturation-field",n.__field_knob=document.createElement("div"),n.__field_knob.className="field-knob",n.__field_knob_border="2px solid ",n.__hue_knob=document.createElement("div"),n.__hue_knob.className="hue-knob",n.__hue_field=document.createElement("div"),n.__hue_field.className="hue-field",n.__input=document.createElement("input"),n.__input.type="text",n.__input_textShadow="0 1px 1px ",Oh.bind(n.__input,"keydown",(function(t){13===t.keyCode&&c.call(this)})),Oh.bind(n.__input,"blur",c),Oh.bind(n.__selector,"mousedown",(function(){Oh.addClass(this,"drag").bind(window,"mouseup",(function(){Oh.removeClass(r.__selector,"drag")}))})),Oh.bind(n.__selector,"touchstart",(function(){Oh.addClass(this,"drag").bind(window,"touchend",(function(){Oh.removeClass(r.__selector,"drag")}))}));var s,o=document.createElement("div");function a(t){p(t),Oh.bind(window,"mousemove",p),Oh.bind(window,"touchmove",p),Oh.bind(window,"mouseup",l),Oh.bind(window,"touchend",l)}function h(t){f(t),Oh.bind(window,"mousemove",f),Oh.bind(window,"touchmove",f),Oh.bind(window,"mouseup",u),Oh.bind(window,"touchend",u)}function l(){Oh.unbind(window,"mousemove",p),Oh.unbind(window,"touchmove",p),Oh.unbind(window,"mouseup",l),Oh.unbind(window,"touchend",l),d()}function u(){Oh.unbind(window,"mousemove",f),Oh.unbind(window,"touchmove",f),Oh.unbind(window,"mouseup",u),Oh.unbind(window,"touchend",u),d()}function c(){var t=mh(this.value);!1!==t?(r.__color.__state=t,r.setValue(r.__color.toOriginal())):this.value=r.__color.toString()}function d(){r.__onFinishChange&&r.__onFinishChange.call(r,r.__color.toOriginal())}function p(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=r.__saturation_field.getBoundingClientRect(),i=t.touches&&t.touches[0]||t,n=i.clientX,s=i.clientY,o=(n-e.left)/(e.right-e.left),a=1-(s-e.top)/(e.bottom-e.top);return a>1?a=1:a<0&&(a=0),o>1?o=1:o<0&&(o=0),r.__color.v=a,r.__color.s=o,r.setValue(r.__color.toOriginal()),!1}function f(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=r.__hue_field.getBoundingClientRect(),i=1-((t.touches&&t.touches[0]||t).clientY-e.top)/(e.bottom-e.top);return i>1?i=1:i<0&&(i=0),r.__color.h=360*i,r.setValue(r.__color.toOriginal()),!1}return ch.extend(n.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),ch.extend(n.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:n.__field_knob_border+(n.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),ch.extend(n.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),ch.extend(n.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),ch.extend(o.style,{width:"100%",height:"100%",background:"none"}),Hh(o,"top","rgba(0,0,0,0)","#000"),ch.extend(n.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(s=n.__hue_field).style.background="",s.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",s.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",ch.extend(n.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:n.__input_textShadow+"rgba(0,0,0,0.7)"}),Oh.bind(n.__saturation_field,"mousedown",a),Oh.bind(n.__saturation_field,"touchstart",a),Oh.bind(n.__field_knob,"mousedown",a),Oh.bind(n.__field_knob,"touchstart",a),Oh.bind(n.__hue_field,"mousedown",h),Oh.bind(n.__hue_field,"touchstart",h),n.__saturation_field.appendChild(o),n.__selector.appendChild(n.__field_knob),n.__selector.appendChild(n.__saturation_field),n.__selector.appendChild(n.__hue_field),n.__hue_field.appendChild(n.__hue_knob),n.domElement.appendChild(n.__input),n.domElement.appendChild(n.__selector),n.updateDisplay(),n}return bh(e,t),xh(e,[{key:"updateDisplay",value:function(){var t=mh(this.getValue());if(!1!==t){var e=!1;ch.each(Eh.COMPONENTS,(function(i){if(!ch.isUndefined(t[i])&&!ch.isUndefined(this.__color.__state[i])&&t[i]!==this.__color.__state[i])return e=!0,{}}),this),e&&ch.extend(this.__color.__state,t)}ch.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var i=this.__color.v<.5||this.__color.s>.5?255:0,n=255-i;ch.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+i+","+i+","+i+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,Hh(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),ch.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+i+","+i+","+i+")",textShadow:this.__input_textShadow+"rgba("+n+","+n+","+n+",.7)"})}}]),e}(Mh),Vh=["-moz-","-o-","-webkit-","-ms-",""];function Hh(t,e,i,n){t.style.background="",ch.each(Vh,(function(r){t.style.cssText+="background: "+r+"linear-gradient("+e+", "+i+" 0%, "+n+" 100%); "}))}var Wh=function(t,e){var i=e||document,n=document.createElement("style");n.type="text/css",n.innerHTML=t;var r=i.getElementsByTagName("head")[0];try{r.appendChild(n)}catch(t){}},jh='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',Yh=function(t,e){var i=t[e];return ch.isArray(arguments[2])||ch.isObject(arguments[2])?new Ih(t,e,arguments[2]):ch.isNumber(i)?ch.isNumber(arguments[2])&&ch.isNumber(arguments[3])?ch.isNumber(arguments[4])?new zh(t,e,arguments[2],arguments[3],arguments[4]):new zh(t,e,arguments[2],arguments[3]):ch.isNumber(arguments[4])?new Fh(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new Fh(t,e,{min:arguments[2],max:arguments[3]}):ch.isString(i)?new Dh(t,e):ch.isFunction(i)?new Uh(t,e,""):ch.isBoolean(i)?new Lh(t,e):null};var Xh=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},qh=function(){function t(){Ah(this,t),this.backgroundElement=document.createElement("div"),ch.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),Oh.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),ch.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;Oh.bind(this.backgroundElement,"click",(function(){e.hide()}))}return xh(t,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),ch.defer((function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",Oh.unbind(t.domElement,"webkitTransitionEnd",e),Oh.unbind(t.domElement,"transitionend",e),Oh.unbind(t.domElement,"oTransitionEnd",e)};Oh.bind(this.domElement,"webkitTransitionEnd",e),Oh.bind(this.domElement,"transitionend",e),Oh.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-Oh.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-Oh.getHeight(this.domElement)/2+"px"}}]),t}();Wh(function(t){if(t&&"undefined"!=typeof window){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e),t}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var Jh=function(){try{return!!window.localStorage}catch(t){return!1}}(),Qh=void 0,Kh=!0,Zh=void 0,$h=!1,tl=[],el=function t(e){var i=this,n=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),Oh.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],n=ch.defaults(n,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),n=ch.defaults(n,{resizable:n.autoPlace,hideable:n.autoPlace}),ch.isUndefined(n.load)?n.load={preset:"Default"}:n.preset&&(n.load.preset=n.preset),ch.isUndefined(n.parent)&&n.hideable&&tl.push(this),n.resizable=ch.isUndefined(n.parent)&&n.resizable,n.autoPlace&&ch.isUndefined(n.scrollable)&&(n.scrollable=!0);var r,s=Jh&&"true"===localStorage.getItem(al(this,"isLocal")),o=void 0,a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return n.parent}},scrollable:{get:function(){return n.scrollable}},autoPlace:{get:function(){return n.autoPlace}},closeOnTop:{get:function(){return n.closeOnTop}},preset:{get:function(){return i.parent?i.getRoot().preset:n.load.preset},set:function(t){i.parent?i.getRoot().preset=t:n.load.preset=t,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}(this),i.revert()}},width:{get:function(){return n.width},set:function(t){n.width=t,dl(i,t)}},name:{get:function(){return n.name},set:function(t){n.name=t,a&&(a.innerHTML=n.name)}},closed:{get:function(){return n.closed},set:function(e){n.closed=e,n.closed?Oh.addClass(i.__ul,t.CLASS_CLOSED):Oh.removeClass(i.__ul,t.CLASS_CLOSED),this.onResize(),i.__closeButton&&(i.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return n.load}},useLocalStorage:{get:function(){return s},set:function(t){Jh&&(s=t,t?Oh.bind(window,"unload",o):Oh.unbind(window,"unload",o),localStorage.setItem(al(i,"isLocal"),t))}}}),ch.isUndefined(n.parent)){if(this.closed=n.closed||!1,Oh.addClass(this.domElement,t.CLASS_MAIN),Oh.makeSelectable(this.domElement,!1),Jh&&s){i.useLocalStorage=!0;var h=localStorage.getItem(al(this,"gui"));h&&(n.load=JSON.parse(h))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,Oh.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),n.closeOnTop?(Oh.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(Oh.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),Oh.bind(this.__closeButton,"click",(function(){i.closed=!i.closed}))}else{void 0===n.closed&&(n.closed=!0);var l=document.createTextNode(n.name);Oh.addClass(l,"controller-name"),a=il(i,l);Oh.addClass(this.__ul,t.CLASS_CLOSED),Oh.addClass(a,"title"),Oh.bind(a,"click",(function(t){return t.preventDefault(),i.closed=!i.closed,!1})),n.closed||(this.closed=!1)}n.autoPlace&&(ch.isUndefined(n.parent)&&(Kh&&(Zh=document.createElement("div"),Oh.addClass(Zh,"dg"),Oh.addClass(Zh,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(Zh),Kh=!1),Zh.appendChild(this.domElement),Oh.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||dl(i,n.width)),this.__resizeHandler=function(){i.onResizeDebounced()},Oh.bind(window,"resize",this.__resizeHandler),Oh.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),Oh.bind(this.__ul,"transitionend",this.__resizeHandler),Oh.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),n.resizable&&cl(this),o=function(){Jh&&"true"===localStorage.getItem(al(i,"isLocal"))&&localStorage.setItem(al(i,"gui"),JSON.stringify(i.getSaveObject()))},this.saveToLocalStorageIfPossible=o,n.parent||((r=i.getRoot()).width+=1,ch.defer((function(){r.width-=1})))};function il(t,e,i){var n=document.createElement("li");return e&&n.appendChild(e),i?t.__ul.insertBefore(n,i):t.__ul.appendChild(n),t.onResize(),n}function nl(t){Oh.unbind(window,"resize",t.__resizeHandler),t.saveToLocalStorageIfPossible&&Oh.unbind(window,"unload",t.saveToLocalStorageIfPossible)}function rl(t,e){var i=t.__preset_select[t.__preset_select.selectedIndex];i.innerHTML=e?i.value+"*":i.value}function sl(t,e){var i=t.getRoot(),n=i.__rememberedObjects.indexOf(e.object);if(-1!==n){var r=i.__rememberedObjectIndecesToControllers[n];if(void 0===r&&(r={},i.__rememberedObjectIndecesToControllers[n]=r),r[e.property]=e,i.load&&i.load.remembered){var s=i.load.remembered,o=void 0;if(s[t.preset])o=s[t.preset];else{if(!s.Default)return;o=s.Default}if(o[n]&&void 0!==o[n][e.property]){var a=o[n][e.property];e.initialValue=a,e.setValue(a)}}}}function ol(t,e,i,n){if(void 0===e[i])throw new Error('Object "'+e+'" has no property "'+i+'"');var r=void 0;if(n.color)r=new Gh(e,i);else{var s=[e,i].concat(n.factoryArgs);r=Yh.apply(t,s)}n.before instanceof Mh&&(n.before=n.before.__li),sl(t,r),Oh.addClass(r.domElement,"c");var o=document.createElement("span");Oh.addClass(o,"property-name"),o.innerHTML=r.property;var a=document.createElement("div");a.appendChild(o),a.appendChild(r.domElement);var h=il(t,a,n.before);return Oh.addClass(h,el.CLASS_CONTROLLER_ROW),r instanceof Gh?Oh.addClass(h,"color"):Oh.addClass(h,yh(r.getValue())),function(t,e,i){if(i.__li=e,i.__gui=t,ch.extend(i,{options:function(e){if(arguments.length>1){var n=i.__li.nextElementSibling;return i.remove(),ol(t,i.object,i.property,{before:n,factoryArgs:[ch.toArray(arguments)]})}if(ch.isArray(e)||ch.isObject(e)){var r=i.__li.nextElementSibling;return i.remove(),ol(t,i.object,i.property,{before:r,factoryArgs:[e]})}},name:function(t){return i.__li.firstElementChild.firstElementChild.innerHTML=t,i},listen:function(){return i.__gui.listen(i),i},remove:function(){return i.__gui.remove(i),i}}),i instanceof zh){var n=new Fh(i.object,i.property,{min:i.__min,max:i.__max,step:i.__step});ch.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(t){var e=i[t],r=n[t];i[t]=n[t]=function(){var t=Array.prototype.slice.call(arguments);return r.apply(n,t),e.apply(i,t)}})),Oh.addClass(e,"has-slider"),i.domElement.insertBefore(n.domElement,i.domElement.firstElementChild)}else if(i instanceof Fh){var r=function(e){if(ch.isNumber(i.__min)&&ch.isNumber(i.__max)){var n=i.__li.firstElementChild.firstElementChild.innerHTML,r=i.__gui.__listening.indexOf(i)>-1;i.remove();var s=ol(t,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[i.__min,i.__max,i.__step]});return s.name(n),r&&s.listen(),s}return e};i.min=ch.compose(r,i.min),i.max=ch.compose(r,i.max)}else i instanceof Lh?(Oh.bind(e,"click",(function(){Oh.fakeEvent(i.__checkbox,"click")})),Oh.bind(i.__checkbox,"click",(function(t){t.stopPropagation()}))):i instanceof Uh?(Oh.bind(e,"click",(function(){Oh.fakeEvent(i.__button,"click")})),Oh.bind(e,"mouseover",(function(){Oh.addClass(i.__button,"hover")})),Oh.bind(e,"mouseout",(function(){Oh.removeClass(i.__button,"hover")}))):i instanceof Gh&&(Oh.addClass(e,"color"),i.updateDisplay=ch.compose((function(t){return e.style.borderLeftColor=i.__color.toString(),t}),i.updateDisplay),i.updateDisplay());i.setValue=ch.compose((function(e){return t.getRoot().__preset_select&&i.isModified()&&rl(t.getRoot(),!0),e}),i.setValue)}(t,h,r),t.__controllers.push(r),r}function al(t,e){return document.location.href+"."+e}function hl(t,e,i){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.__preset_select.appendChild(n),i&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function ll(t,e){e.style.display=t.useLocalStorage?"block":"none"}function ul(t){var e=t.__save_row=document.createElement("li");Oh.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),Oh.addClass(e,"save-row");var i=document.createElement("span");i.innerHTML="&nbsp;",Oh.addClass(i,"button gears");var n=document.createElement("span");n.innerHTML="Save",Oh.addClass(n,"button"),Oh.addClass(n,"save");var r=document.createElement("span");r.innerHTML="New",Oh.addClass(r,"button"),Oh.addClass(r,"save-as");var s=document.createElement("span");s.innerHTML="Revert",Oh.addClass(s,"button"),Oh.addClass(s,"revert");var o=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?ch.each(t.load.remembered,(function(e,i){hl(t,i,i===t.preset)})):hl(t,"Default",!1),Oh.bind(o,"change",(function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value})),e.appendChild(o),e.appendChild(i),e.appendChild(n),e.appendChild(r),e.appendChild(s),Jh){var a=document.getElementById("dg-local-explain"),h=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(al(0,"isLocal"))&&h.setAttribute("checked","checked"),ll(t,a),Oh.bind(h,"change",(function(){t.useLocalStorage=!t.useLocalStorage,ll(t,a)}))}var l=document.getElementById("dg-new-constructor");Oh.bind(l,"keydown",(function(t){!t.metaKey||67!==t.which&&67!==t.keyCode||Qh.hide()})),Oh.bind(i,"click",(function(){l.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),Qh.show(),l.focus(),l.select()})),Oh.bind(n,"click",(function(){t.save()})),Oh.bind(r,"click",(function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)})),Oh.bind(s,"click",(function(){t.revert()}))}function cl(t){var e=void 0;function i(i){return i.preventDefault(),t.width+=e-i.clientX,t.onResize(),e=i.clientX,!1}function n(){Oh.removeClass(t.__closeButton,el.CLASS_DRAG),Oh.unbind(window,"mousemove",i),Oh.unbind(window,"mouseup",n)}function r(r){return r.preventDefault(),e=r.clientX,Oh.addClass(t.__closeButton,el.CLASS_DRAG),Oh.bind(window,"mousemove",i),Oh.bind(window,"mouseup",n),!1}t.__resize_handle=document.createElement("div"),ch.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),Oh.bind(t.__resize_handle,"mousedown",r),Oh.bind(t.__closeButton,"mousedown",r),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function dl(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function pl(t,e){var i={};return ch.each(t.__rememberedObjects,(function(n,r){var s={},o=t.__rememberedObjectIndecesToControllers[r];ch.each(o,(function(t,i){s[i]=e?t.initialValue:t.getValue()})),i[r]=s})),i}el.toggleHide=function(){$h=!$h,ch.each(tl,(function(t){t.domElement.style.display=$h?"none":""}))},el.CLASS_AUTO_PLACE="a",el.CLASS_AUTO_PLACE_CONTAINER="ac",el.CLASS_MAIN="main",el.CLASS_CONTROLLER_ROW="cr",el.CLASS_TOO_TALL="taller-than-window",el.CLASS_CLOSED="closed",el.CLASS_CLOSE_BUTTON="close-button",el.CLASS_CLOSE_TOP="close-top",el.CLASS_CLOSE_BOTTOM="close-bottom",el.CLASS_DRAG="drag",el.DEFAULT_WIDTH=245,el.TEXT_CLOSED="Close Controls",el.TEXT_OPEN="Open Controls",el._keydownHandler=function(t){"text"===document.activeElement.type||72!==t.which&&72!==t.keyCode||el.toggleHide()},Oh.bind(window,"keydown",el._keydownHandler,!1),ch.extend(el.prototype,{add:function(t,e){return ol(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return ol(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;ch.defer((function(){e.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&Zh.removeChild(this.domElement);var t=this;ch.each(this.__folders,(function(e){t.removeFolder(e)})),Oh.unbind(window,"keydown",el._keydownHandler,!1),nl(this)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var i=new el(e);this.__folders[t]=i;var n=il(this,i.domElement);return Oh.addClass(n,"folder"),i},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],nl(t);var e=this;ch.each(t.__folders,(function(e){t.removeFolder(e)})),ch.defer((function(){e.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=Oh.getOffset(t.__ul).top,i=0;ch.each(t.__ul.childNodes,(function(e){t.autoPlace&&e===t.__save_row||(i+=Oh.getHeight(e))})),window.innerHeight-e-20<i?(Oh.addClass(t.domElement,el.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(Oh.removeClass(t.domElement,el.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&ch.defer((function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"})),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:ch.debounce((function(){this.onResize()}),50),remember:function(){if(ch.isUndefined(Qh)&&((Qh=new qh).domElement.innerHTML=jh),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;ch.each(Array.prototype.slice.call(arguments),(function(e){0===t.__rememberedObjects.length&&ul(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)})),this.autoPlace&&dl(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=pl(this)),t.folders={},ch.each(this.__folders,(function(e,i){t.folders[i]=e.getSaveObject()})),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=pl(this),rl(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=pl(this,!0)),this.load.remembered[t]=pl(this),this.preset=t,hl(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){ch.each(this.__controllers,(function(e){this.getRoot().load.remembered?sl(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())}),this),ch.each(this.__folders,(function(t){t.revert(t)})),t||rl(this.getRoot(),!1)},listen:function(t){var e=0===this.__listening.length;this.__listening.push(t),e&&function t(e){0!==e.length&&Xh.call(window,(function(){t(e)}));ch.each(e,(function(t){t.updateDisplay()}))}(this.__listening)},updateDisplay:function(){ch.each(this.__controllers,(function(t){t.updateDisplay()})),ch.each(this.__folders,(function(t){t.updateDisplay()}))}});var fl,ml=el;function gl(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return vl(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return vl(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw s}}}}function vl(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function yl(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Al=function(){function t(){var e,i,n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(){var t=E.textures.wood_dark_rotated;t.wrapS=1002,t.wrapT=1002,t.encoding=3001,t.repeat.x=.0625/2.54,t.repeat.y=.45,t.offset.y=.6,E.spiralMat=[new THREE.MeshLambertMaterial({color:13867845}),new THREE.MeshLambertMaterial({map:t})],E.spiralMat[0].color.convertSRGBToLinear();var e=E.textures.wood_dark_birch_rotated;e.wrapS=t.wrapS,e.wrapT=t.wrapT,e.encoding=t.encoding,e.repeat.x=t.repeat.x,e.repeat.y=t.repeat.y,e.offset.y=t.offset.y,E.spiralMatBirch=[new THREE.MeshLambertMaterial({color:13867845}),new THREE.MeshLambertMaterial({map:e})],E.spiralMatBirch[0].color.convertSRGBToLinear();var i=E.textures.scrape_me.clone(),n=E.levelMatList.finish_line_mat.map.clone();i.wrapS=1002,i.wrapT=1002,n.wrapS=1002,n.wrapT=1002,i.repeat.x=.2,i.repeat.y=.1,n.repeat.x=1,n.offset.y=.6,n.encoding=3001,i.encoding=3001,E.scrapSpiralMat=[new THREE.MeshLambertMaterial({color:13076264}),new THREE.MeshBasicMaterial({map:n}),new THREE.MeshBasicMaterial({map:i})],E.spiralMatGold=[E.woodMatsGold.wood,E.woodMatsGold.wood]},(i="prepareSpiralMaterials")in(e=this)?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,this.prepareModels(),this.prepareFirstSideEnvironments(),this.prepareSecondSideEnvironments(),this.initScoreTexts(),this.prepareSpiralMaterials(),E.chiselDust){var r=E.chiselDust,s=ah.mergeModel(r,!1)[0];s.geometry.scale(10,10,10),E.chiselDust=s}}var e,i,n;return e=t,(i=[{key:"initScoreTexts",value:function(){var t=document.createElement("canvas");t.width=512,t.height=512;var e=t.getContext("2d"),i=["300","400","500"];e.font="60px calibri",e.fillStyle="#ffffff",e.textAlign="center",e.textBaseline="middle";var n=64,r=64,s=new m.CanvasTexture(t);s.encoding=3001,s.flipY=!1;var o=new m.MeshBasicMaterial({map:s,transparent:!0}),a=t.width/128,h=t.height/128;E.scoreTexts={};for(var l=0;l<i.length;l++){var u=i[l];e.fillText(u,n,r);var c=(n-64)/t.width,d=(r-64)/t.height;c*=a,d*=h,(n+=128)>t.width&&(n=64,r+=128);for(var p=new m.PlaneBufferGeometry(1,1),f=.25*c,g=.25*d,v=.25*(c+1),y=.25*(d+1),A=0;A<p.attributes.position.count;A++){var x=2*A,w=x+1;0==A?(p.attributes.uv.array[x]=f,p.attributes.uv.array[w]=g):1==A?(p.attributes.uv.array[x]=v,p.attributes.uv.array[w]=g):2==A?(p.attributes.uv.array[x]=f,p.attributes.uv.array[w]=y):3==A&&(p.attributes.uv.array[x]=v,p.attributes.uv.array[w]=y)}p.attributes.uv.needsUpdate=!0;var b=new m.Mesh(p,o);b.renderOrder=110,E.scoreTexts[u]=b}}},{key:"initDatGuiMaterial",value:function(t){var e=new ml,i={color:{r:255*t.color.r,g:255*t.color.g,b:255*t.color.b}},n=e.addFolder("Color");n.addColor(i,"color").onChange((function(e){t.color.r=e.r/255,t.color.g=e.g/255,t.color.b=e.b/255,t.color.convertSRGBToLinear()})),n.add(t,"roughness",0,1).step(.01),n.add(t,"metalness",0,1).step(.01)}},{key:"prepareModels",value:function(){var t=this,e=(fl=E.models.level.scene).getObjectByName("Level_3");E.levelData=e;var i=["wall_area","wall_circle_and_coin_area","wall_single_area","tree_obstacle_area","iron_obstacle","obstacle_saw","obstacle_dots","broken_saw","saw","trunk_swim","basket_area","basket_ring_vertical","loot_box","loot_box_big","coins_jump_area","coin_area"],n=fl.children[0].children,r=[];E.levelLocatorData=r,n.forEach((function(t){var e,n=gl(i);try{for(n.s();!(e=n.n()).done;){var s=e.value;if(t.name==s)return void(E[s]=t)}}catch(t){n.e(t)}finally{n.f()}if(t.name.indexOf("Level_")>=0){var o=t.name.split("_")[1];o=Number(o)-1,r[o]=t}})),this.levelMatList={};var s=[];fl.traverse((function(e){if(e.material&&(E.lowQuality&&e.name.indexOf("foam")>=0&&s.push(e),e.material.metalness=0,t.levelMatList[e.material.name]=e.material,e.material.depthWrite=!0,e.material.map||e.material.converted||(e.material.converted=!0,e.material.color.convertSRGBToLinear()),e.material.transparent&&(e.material.visible=!0,e.material.opacity=1),"line"==e.name&&(E.lineMesh=e)),"chisel_dust"==e.name?E.chiselDust=e:"chisel_Chisel_Normal"==e.name?E.chiselNormal=e:"chisel_Chisel_Fragment"==e.name?E.chiselFragment=e:"circle_fx_elements"==e.name&&(E.models.circle_fx_elements={scene:e}),"score_area"==e.name)E.scoreArea=e;else if("trunk"==e.name)t.trunkChild=e;else if("gold_ingot"==e.name)t.prepareCarveWoodsGold(e);else if("coin_solo"==e.name)E.coinModel=e,e.geometry.center(),e.material=E.woodMatsGold.wood;else if(e.name.indexOf("wall_cube")>=0){E.wallCube=e,e.geometry.center(),E.brickModels||(E.brickModels=[]);var i=Number(e.name[9]||1)-1;E.brickModels[i]=e}})),s.forEach((function(t){t.parent.remove(t)})),this.prepareCarveWoodsDef(this.trunkChild),E.wallCube.position.y-=10,E.levelMatList=this.levelMatList,E.tree_obstacle_area.traverse((function(t){"dont_be_text"==t.name&&(t.material=new m.MeshBasicMaterial({map:t.material.map,transparent:t.material.transparent,color:t.material.transparent}),t.renderOrder=1e4)}))}},{key:"prepareFirstSideEnvironments",value:function(){var t=fl.getObjectByName("first_terrain").clone();t.remove(t.getObjectByName("water"));var e=new m.Object3D;E.firstSide=e,t.traverse((function(t){"water_reflection_first_terrain"==t.name&&(t.position.x+=12,t.renderOrder=100)}));for(var i=0;i<10;i++){var n=t.clone();e.add(n),n.position.z-=E.sideTerrainWidth*i}for(var r=ah.mergeModel(e,!1),s=e.children.length-1;s>=0;s--){var o=e.children[0];e.remove(o)}r.forEach((function(t){"water_reflection_first_terrain"==t.name&&(t.renderOrder=100),e.add(t)}))}},{key:"prepareSecondSideEnvironments",value:function(){var t=fl.getObjectByName("second_terrain").clone(),e=new m.Object3D;E.secondSide=e,t.traverse((function(t){"water_reflection_second_terrain"==t.name&&(t.position.x+=12,t.renderOrder=100)}));for(var i=0;i<10;i++){var n=t.clone();e.add(n),n.position.z-=E.sideTerrainWidth*i}for(var r=ah.mergeModel(e,!1),s=e.children.length-1;s>=0;s--){var o=e.children[0];e.remove(o)}r.forEach((function(t){"water_reflection_second_terrain"==t.name&&(t.renderOrder=100),e.add(t)}))}},{key:"prepareCarveWoodsDef",value:function(t){var e,i=this;E.woodMats={},t.traverse((function(t){"wood_plane_top"==t.name&&(e=t.material)})),["wood","wood_dark","wood_birch","wood_dark_birch"].forEach((function(t){var i=E.textures[t];i.encoding=3001;var n=e.clone();n.map=i,n.map=i,E.woodMats[t]=n})),t.traverse((function(t){t.name.indexOf("foam")>=0||"trunk_mat"==t.material.name||(t.material=E.woodMats.wood_dark)}));var n=t.getObjectByName("wood_plane_top");n.parent.remove(n);var r=t.clone();r.traverse((function(t){t.name.indexOf("foam")>=0||("trunk_mat"==t.material.name?t.material=i.levelMatList.second_terrain_mat:"wood_top_mat"==t.material.name&&(t.material=E.woodMats.wood_dark_birch))})),E.trunkModel=t,E.trunkModelBirch=r}},{key:"returnToonMaterial",value:function(t,e,i){for(var n=new Uint8Array(t),r=0;r<=n.length;r++)n[r]=r/n.length*256;var s=new THREE.DataTexture(n,n.length,1,THREE.LuminanceFormat);return s.minFilter=THREE.NearestFilter,s.magFilter=THREE.NearestFilter,s.generateMipmaps=!1,i?new THREE.MeshToonMaterial({color:e,map:i,gradientMap:s}):new THREE.MeshToonMaterial({color:e,gradientMap:s})}},{key:"prepareCarveWoodsGold",value:function(t){E.woodMatsGold={};var e=new m.MeshPhongMaterial({color:16760576,shininess:100});e.emissiveIntensity=.2,e.emissive.r=1,(e=new m.MeshStandardMaterial({color:16768773})).color.convertSRGBToLinear(),t.traverse((function(t){"foam_gold_ingot"!=t.name&&t.material&&(t.material=e)})),E.woodMatsGold.wood=e,E.woodMatsGold.wood_dark=e,t.traverse((function(t){t.name.indexOf("foam")>=0||t.material.name}));var i=t.getObjectByName("gold_ingot_top");i.parent.remove(i),E.trunkModelGold=t}},{key:"update",value:function(t,e){}}])&&yl(e.prototype,i),n&&yl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();class xl extends m.Mesh{constructor(t,e={}){super(t);const i=this,n=void 0!==e.textureWidth?e.textureWidth:512,r=void 0!==e.textureHeight?e.textureHeight:512,s=void 0!==e.clipBias?e.clipBias:0,o=void 0!==e.alpha?e.alpha:1,a=void 0!==e.time?e.time:0,h=void 0!==e.waterNormals?e.waterNormals:null,l=void 0!==e.sunDirection?e.sunDirection:new m.Vector3(.70707,.70707,0),u=new m.Color(void 0!==e.sunColor?e.sunColor:16777215),c=new m.Color(void 0!==e.waterColor?e.waterColor:8355711),d=void 0!==e.eye?e.eye:new m.Vector3(0,0,0),p=void 0!==e.distortionScale?e.distortionScale:20,f=void 0!==e.side?e.side:m.FrontSide,g=void 0!==e.fog&&e.fog,v=new m.Plane,y=new m.Vector3,A=new m.Vector3,x=new m.Vector3,w=new m.Matrix4,b=new m.Vector3(0,0,-1),S=new m.Vector4,E=new m.Vector3,T=new m.Vector3,_=new m.Vector4,M=new m.Matrix4,C=new m.PerspectiveCamera,P=new m.WebGLRenderTarget(n,r),R={uniforms:m.UniformsUtils.merge([m.UniformsLib.fog,m.UniformsLib.lights,{normalSampler:{value:null},mirrorSampler:{value:null},alpha:{value:1},time:{value:0},size:{value:1},distortionScale:{value:20},textureMatrix:{value:new m.Matrix4},sunColor:{value:new m.Color(8355711)},sunDirection:{value:new m.Vector3(.70707,.70707,0)},eye:{value:new m.Vector3},waterColor:{value:new m.Color(5592405)}}]),vertexShader:"\n\t\t\t\tuniform mat4 textureMatrix;\n\t\t\t\tuniform float time;\n\n\t\t\t\tvarying vec4 mirrorCoord;\n\t\t\t\tvarying vec4 worldPosition;\n\n\t\t\t\t#include <common>\n\t\t\t\t#include <fog_pars_vertex>\n\t\t\t\t#include <shadowmap_pars_vertex>\n\t\t\t\t#include <logdepthbuf_pars_vertex>\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tmirrorCoord = modelMatrix * vec4( position, 1.0 );\n\t\t\t\t\tworldPosition = mirrorCoord.xyzw;\n\t\t\t\t\tmirrorCoord = textureMatrix * mirrorCoord;\n\t\t\t\t\tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t\t#include <beginnormal_vertex>\n\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#include <logdepthbuf_vertex>\n\t\t\t\t#include <fog_vertex>\n\t\t\t\t#include <shadowmap_vertex>\n\t\t\t}",fragmentShader:"\n\t\t\t\tuniform sampler2D mirrorSampler;\n\t\t\t\tuniform float alpha;\n\t\t\t\tuniform float time;\n\t\t\t\tuniform float size;\n\t\t\t\tuniform float distortionScale;\n\t\t\t\tuniform sampler2D normalSampler;\n\t\t\t\tuniform vec3 sunColor;\n\t\t\t\tuniform vec3 sunDirection;\n\t\t\t\tuniform vec3 eye;\n\t\t\t\tuniform vec3 waterColor;\n\n\t\t\t\tvarying vec4 mirrorCoord;\n\t\t\t\tvarying vec4 worldPosition;\n\n\t\t\t\tvec4 getNoise( vec2 uv ) {\n\t\t\t\t\tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n\t\t\t\t\tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n\t\t\t\t\tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n\t\t\t\t\tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n\t\t\t\t\tvec4 noise = texture2D( normalSampler, uv0 ) +\n\t\t\t\t\t\ttexture2D( normalSampler, uv1 ) +\n\t\t\t\t\t\ttexture2D( normalSampler, uv2 ) +\n\t\t\t\t\t\ttexture2D( normalSampler, uv3 );\n\t\t\t\t\treturn noise * 0.5 - 1.0;\n\t\t\t\t}\n\n\t\t\t\tvoid sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\n\t\t\t\t\tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n\t\t\t\t\tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\n\t\t\t\t\tspecularColor += pow( direction, shiny ) * sunColor * spec;\n\t\t\t\t\tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n\t\t\t\t}\n\n\t\t\t\t#include <common>\n\t\t\t\t#include <packing>\n\t\t\t\t#include <bsdfs>\n\t\t\t\t#include <fog_pars_fragment>\n\t\t\t\t#include <logdepthbuf_pars_fragment>\n\t\t\t\t#include <lights_pars_begin>\n\t\t\t\t#include <shadowmap_pars_fragment>\n\t\t\t\t#include <shadowmask_pars_fragment>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <logdepthbuf_fragment>\n\t\t\t\t\tvec4 noise = getNoise( worldPosition.xz * size );\n\t\t\t\t\tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n\t\t\t\t\tvec3 diffuseLight = vec3(0.0);\n\t\t\t\t\tvec3 specularLight = vec3(0.0);\n\n\t\t\t\t\tvec3 worldToEye = eye-worldPosition.xyz;\n\t\t\t\t\tvec3 eyeDirection = normalize( worldToEye );\n\t\t\t\t\tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n\t\t\t\t\tfloat distance = length(worldToEye);\n\n\t\t\t\t\tvec2 distortion = surfaceNormal.xz * ( 0.001 + 1.0 / distance ) * distortionScale;\n\t\t\t\t\tvec3 reflectionSample = vec3( texture2D( mirrorSampler, mirrorCoord.xy / mirrorCoord.w + distortion ) );\n\n\t\t\t\t\tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n\t\t\t\t\tfloat rf0 = 0.3;\n\t\t\t\t\tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n\t\t\t\t\tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n\t\t\t\t\tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ) * getShadowMask(), ( vec3( 0.1 ) + reflectionSample * 0.9 + reflectionSample * specularLight ), reflectance);\n\t\t\t\t\tvec3 outgoingLight = albedo;\n\t\t\t\t\tgl_FragColor = vec4( outgoingLight, alpha );\n\n\t\t\t\t\t#include <tonemapping_fragment>\n\t\t\t\t\t#include <fog_fragment>\n\t\t\t\t}"},O=new m.ShaderMaterial({fragmentShader:R.fragmentShader,vertexShader:R.vertexShader,uniforms:m.UniformsUtils.clone(R.uniforms),lights:!0,side:f,fog:g});O.uniforms.mirrorSampler.value=P.texture,O.uniforms.textureMatrix.value=M,O.uniforms.alpha.value=o,O.uniforms.time.value=a,O.uniforms.normalSampler.value=h,O.uniforms.sunColor.value=u,O.uniforms.waterColor.value=c,O.uniforms.sunDirection.value=l,O.uniforms.distortionScale.value=p,O.uniforms.eye.value=d,i.material=O,i.onBeforeRender=function(t,e,n){if(A.setFromMatrixPosition(i.matrixWorld),x.setFromMatrixPosition(n.matrixWorld),w.extractRotation(i.matrixWorld),y.set(0,0,1),y.applyMatrix4(w),E.subVectors(A,x),E.dot(y)>0)return;E.reflect(y).negate(),E.add(A),w.extractRotation(n.matrixWorld),b.set(0,0,-1),b.applyMatrix4(w),b.add(x),T.subVectors(A,b),T.reflect(y).negate(),T.add(A),C.position.copy(E),C.up.set(0,1,0),C.up.applyMatrix4(w),C.up.reflect(y),C.lookAt(T),C.far=n.far,C.updateMatrixWorld(),C.projectionMatrix.copy(n.projectionMatrix),M.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),M.multiply(C.projectionMatrix),M.multiply(C.matrixWorldInverse),v.setFromNormalAndCoplanarPoint(y,A),v.applyMatrix4(C.matrixWorldInverse),S.set(v.normal.x,v.normal.y,v.normal.z,v.constant);const r=C.projectionMatrix;_.x=(Math.sign(S.x)+r.elements[8])/r.elements[0],_.y=(Math.sign(S.y)+r.elements[9])/r.elements[5],_.z=-1,_.w=(1+r.elements[10])/r.elements[14],S.multiplyScalar(2/S.dot(_)),r.elements[2]=S.x,r.elements[6]=S.y,r.elements[10]=S.z+1-s,r.elements[14]=S.w,d.setFromMatrixPosition(n.matrixWorld);const o=t.getRenderTarget(),a=t.xr.enabled,h=t.shadowMap.autoUpdate;i.visible=!1,t.xr.enabled=!1,t.shadowMap.autoUpdate=!1,t.setRenderTarget(P),t.state.buffers.depth.setMask(!0),!1===t.autoClear&&t.clear(),t.render(e,C),i.visible=!0,t.xr.enabled=a,t.shadowMap.autoUpdate=h,t.setRenderTarget(o);const l=n.viewport;void 0!==l&&t.state.viewport(l)}}}function wl(t){return(wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sl(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function El(t,e){return(El=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Cl(t);if(e){var r=Cl(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return _l(this,i)}}function _l(t,e){if(e&&("object"===wl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ml(t)}function Ml(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cl(t){return(Cl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}xl.prototype.isWater=!0;var Pl=E.scoreAreaScale,Rl=6*Pl,Ol=44*Pl,Ll=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&El(t,e)}(s,t);var e,i,n,r=Tl(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;bl(this,s),t=r.call(this);var i=E.textures.scrape_me.clone(),n=E.levelMatList.finish_line_mat.map.clone();n.repeat.x=4.5,n.repeat.y=20,n.offset.x=.25,i.flipY=!i.flipY,i.repeat.x=1.2,i.repeat.y=4,i.offset.x=-.1,i.wrapT=1e3,n.encoding=3001,i.encoding=3001;var o=new m.MeshBasicMaterial({map:n}),a=new m.MeshBasicMaterial({map:i}),h=t.initPlane(a),l=t.initPlane(o);return h.scale.x*=-1,l.scale.x*=-1,t.posDataTop=h.geometry.attributes.position,t.posDataBottom=l.geometry.attributes.position,t.add(l),t.add(h),E.threeScene.add(Ml(t)),t.position.y=.01,t.position.z=e,t.length=Ol,t.isScrapPlane=!0,t}return e=s,(i=[{key:"initPlane",value:function(t){var e=new m.PlaneBufferGeometry(Rl,Ol,1,40),i=new m.Mesh(e,t);return i.rotation.x=-Math.PI/2,i.position.z-=.5*Ol,i.rotation.z=Math.PI,i}},{key:"changeVertexWithPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,i=this.position.z-t;if(!(i<0||i>Ol)){var n=40*i/Ol,r=2*(n=Math.round(n))*3+2,s=r+3;this.changeVertex(r,s,e)}}},{key:"chiselEntered",value:function(t){this.changeVertex(2,5,t)}},{key:"chiselPassed",value:function(t){this.changeVertex(236,239,t)}},{key:"changeVertex",value:function(t,e,i){i=Math.min(i,-.1),this.posDataTop.array[t]=i,this.posDataTop.array[e]=i,this.posDataTop.needsUpdate=!0,this.posDataBottom.array[t]=i+.01,this.posDataBottom.array[e]=i+.01,this.posDataBottom.needsUpdate=!0}},{key:"throwEndCap",value:function(){}},{key:"resetVertexPositions",value:function(){for(var t=0;t<this.posDataTop.count;t++){var e=3*t+2;this.posDataTop.array[e]=0,this.posDataBottom.array[e]=-.01}this.posDataTop.needsUpdate=!0,this.posDataBottom.needsUpdate=!0}}])&&Sl(e.prototype,i),n&&Sl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(m.Object3D);function Il(t){return(Il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dl(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var n,r,s=[],o=!0,a=!1;try{for(i=i.call(t);!(o=(n=i.next()).done)&&(s.push(n.value),!e||s.length!==e);o=!0);}catch(t){a=!0,r=t}finally{try{o||null==i.return||i.return()}finally{if(a)throw r}}return s}(t,e)||Bl(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bl(t,e){if(t){if("string"==typeof t)return kl(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?kl(t,e):void 0}}function kl(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Fl(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Nl(t,e){return(Nl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Gl(t);if(e){var r=Gl(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ul(this,i)}}function Ul(t,e){if(e&&("object"===Il(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Gl(t){return(Gl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Vl=E.scoreAreaScale,Hl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nl(t,e)}(s,t);var e,i,n,r=zl(s);function s(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=r.call(this)).onSurface=!1;var e=E.scoreArea.clone();t.add(e),t.model=e,e.scale.multiplyScalar(Vl);var i=new Ll(-30);t.scrapObj=i,t.initPhysics(),t.defY=0;var n=[],o=[];return e.traverse((function(e){if(e.name.indexOf("final_light_l")>=0){var i=e.name.slice(13),r=Number(i)-1;n[r]=e}else if(e.name.indexOf("final_light_r")>=0){var s=e.name.slice(13),a=Number(s)-1;o[a]=e}else"star"==e.name?t.star=e:e.name.indexOf("foam")>=0&&(e.position.y=-.8)})),t.leftLights=n,t.rightLights=o,t.lightMat=n[0].material.clone(),t.darkMat=n[0].material,t.lightMat=new m.MeshBasicMaterial({color:16776960}),t.darkMat.color.set(0),t.changeState(0),t}return e=s,(i=[{key:"changeState",value:function(t){var e=this;if(t!=this.state&&(this.state=t,!E.lowQuality||0!=t))if(0===t){var i=0;!function t(){++i>=e.leftLights.length&&(i=0),e.leftLights.forEach((function(t){t.material=e.darkMat})),e.rightLights.forEach((function(t){t.material=e.darkMat})),e.leftLights[i].material=e.lightMat,e.leftLights[i+1]&&(e.leftLights[i+1].material=e.lightMat),e.rightLights[i].material=e.lightMat,e.rightLights[i+1]&&(e.rightLights[i+1].material=e.lightMat),e.lightTimeout=setTimeout((function(){t()}),100)}()}else 1===t&&(clearTimeout(this.lightTimeout),this.leftLights.concat(this.rightLights).forEach((function(t){t.material=e.darkMat,t.worldVec=new m.Vector3,t.updateWorldMatrix(!0),t.getWorldPosition(t.worldVec)})))}},{key:"finishLightUpdate",value:function(t){var e=this;this.leftLights.concat(this.rightLights).forEach((function(i){t.position.y>i.worldVec.y&&(i.material=e.lightMat)}))}},{key:"setZ",value:function(t){this.position.z=t,this.bodyGround.position.z=t-50*Vl,this.bodyVertical.position.z=t-78*Vl,this.scrapObj.position.z=t-3*Vl}},{key:"initPhysics",value:function(){var t=new CANNON.Box(new CANNON.Vec3(6*Vl,1.25*Vl,50*Vl)),e=new CANNON.Body({mass:0});e.addShape(t),e.position.set(0,-1.25*Vl,0),E.cannonPhysics.world.add(e),this.bodyGround=e;var i=new CANNON.Box(new CANNON.Vec3(8*Vl,40*Vl,5*Vl)),n=new CANNON.Body({mass:0});n.addShape(i),n.position.set(0,20*Vl,0),E.cannonPhysics.world.add(n),this.bodyGround=e,this.bodyVertical=n,e.label="score_ground",n.label="score_vertical",this.bodies=[e,n]}},{key:"show",value:function(){this.visible=!0,this.scrapObj.visible=!0}},{key:"hide",value:function(){this.visible=!1,this.scrapObj.visible=!1}},{key:"changeScoreAreaType",value:function(t){var e,i=this;void 0===t&&(t=1+Math.floor(3*Math.random())),this.model.traverse((function(n){n.name.indexOf("score_cubes_grp_0")>=0&&(n.name[n.name.length-1]!=t?n.visible=!1:(e=n,n.visible=!0,i.curScoreSteps=n,Math.random(),n.traverse((function(t){t.visible=!0,"score_cube_mega"!=t.name&&"score_cube_15"!=t.name&&"score_cube_30"!=t.name||(t.visible=!1)}))))})),this.selectedGroup=e}},{key:"showFromSea",value:function(){this.onSurface=!0,this.visible=!0,this.scrapObj.visible=!0,this.position.y=-50,this.scrapObj.position.y=-50,E.threeScene.add(this),E.tweens.add({targets:[this.scrapObj.position],y:.01,ease:"Back",duration:500}),E.tweens.add({targets:[this.position],y:0,ease:"Back",duration:500}),E.tweens.killTweensOf(this.star.rotation),this.star.rotation.z=0,this.bodies.forEach((function(t){t.collisionResponse=!0}))}},{key:"sinkIntoSea",value:function(){var t=this;this.bodies.forEach((function(t){t.collisionResponse=!1})),E.tweens.add({targets:this.star.rotation,z:2*Math.PI,duration:1e3}),this.onSurface=!1,E.tweens.add({targets:[this.position,this.scrapObj.position],y:-120,ease:"Sine.easeIn",duration:750,onComplete:function(){t.visible=!1,t.scrapObj.visible=!1,E.threeScene.remove(t)}}),this.lastSelectedScore&&this.lastSelectedScore.position.copy(this.lastSelectedScore.defPosition),this.boxBody&&xa.world.remove(this.boxBody),this.boxBody=null,this.lastSelectedScore=null}},{key:"initScrapPlane",value:function(){}},{key:"unlockScore",value:function(t){for(var e=this.selectedGroup.children.filter((function(t){return t.visible})).reverse().sort((function(t,e){return e.position.y-t.position.y})),i=e[0],n=0;n<e.length;n++){var r=e[n],s=new m.Vector3;r.updateWorldMatrix(!0),r.getWorldPosition(s),r.worldVec=s;var o=Dl(Jt.modelToBox3(r),3),a=(o[0],o[1]),h=o[2];if(i.box=h,i.dimensions=a,h.min.y<t.position.y){i=r;break}}var l=i.dimensions,u=new CANNON.Box(new CANNON.Vec3(.5*l.x,.5*l.y,.5*l.z)),c=new CANNON.Body({mass:0});c.addShape(u),xa.world.add(c),c.position.copy(i.worldVec),c.position.copy(i.worldVec);var d=[];i.traverse((function(t){t.name.indexOf("particle_point")>=0&&d.push(t)})),i.defPosition=i.position.clone(),E.playSfx("finish_cube"),E.phaserScene.tweens.add({targets:c.position,z:c.position.z+10*E.scoreAreaScale,duration:400,ease:"Sine.easeOut"}),E.phaserScene.time.delayedCall(150,(function(){var t,e=function(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=Bl(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw s}}}}(d);try{for(e.s();!(t=e.n()).done;){var i=t.value,n=new m.Vector3;i.updateWorldMatrix(!0),i.getWorldPosition(n),E.sendConfetti(n,null,0,E.scoreAreaScale)}}catch(t){e.e(t)}finally{e.f()}})),E.phaserScene.tweens.add({targets:i.position,z:i.position.z+10,duration:400,ease:"Sine.easeOut",onComplete:function(){}}),this.boxBody=c,this.lastSelectedScore=i}}])&&Fl(e.prototype,i),n&&Fl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(m.Object3D);function Wl(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var jl,Yl=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,n=[{key:"getLevelData",value:function(t){var e=Xl[t];return{woods:e.woods||[],objects:e.objects||[],scoreArea:e.scoreArea||[]}}}],(i=null)&&Wl(e.prototype,i),n&&Wl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Xl=[{scoreArea:{z:0}},{woods:[{z:-20,num:6,type:0,isOldSchool:!0}],objects:[],scoreArea:{z:-250}},{woods:[],objects:[],scoreArea:{z:-10}},{woods:[{z:-20,num:3,type:2},{z:-220,num:2,type:2},{z:-420,num:2,type:2}],objects:[{z:-190,name:"wall_circle_and_coin_area"},{z:-370,name:"wall_single_area"},{z:-520,name:"wall_circle_and_coin_area"}],scoreArea:{z:-550}},{woods:[{z:-20,num:3,type:0}],objects:[{z:-120,name:"tree_obstacle_area"},{z:-150,name:"iron_obstacle"}],scoreArea:{z:-550}},{woods:[{z:-20,num:5,type:1}],objects:[{z:-150,name:"wall_single_area"}],scoreArea:{z:-550}}];function ql(t){return(ql="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ql(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Kl(t,e){return(Kl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=eu(t);if(e){var r=eu(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return $l(this,i)}}function $l(t,e){if(e&&("object"===ql(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return tu(t)}function tu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eu(t){return(eu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var iu=0,nu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kl(t,e)}(s,Phaser.GameObjects.Container);var e,i,n,r=Zl(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{barBgTexture:"atlas",barBgFrame:"underdesk_bar",barFillTexture:"atlas",barFillFrame:"underdesk_bar_fill"},i=arguments.length>1?arguments[1]:void 0;Jl(this,s),E.main,jl=i,E.data,t=r.call(this,jl),jl.add.existing(tu(t)),t.ratio=0;var n=jl.textures.getFrame(e.barFillTexture,e.barFillFrame),o=jl.textures.createCanvas("fill"+iu,n.width,n.height),a=jl.add.image(0,0,e.barBgTexture,e.barBgFrame),h=jl.add.image(0,0,"fill"+iu);return t.add([a,h]),t.updateBarFill=function(e){t.ratio=e,o.context.clearRect(0,0,n.width,n.height),o.context.drawImage(n.source.image,n.customData.frame.x,n.customData.frame.y,n.width*t.ratio,n.height,0,0,n.width*t.ratio,n.height),o.refresh()},t.updateBarFill(0),t.width=a.width,t.height=a.height,t.x=0,t.y=0,iu++,t}return e=s,(i=[{key:"update",value:function(t,e){}},{key:"resize",value:function(t,e){}}])&&Ql(e.prototype,i),n&&Ql(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(),ru={};function su(t,e,i,n,r,s,o,a,h){var l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0;t.fillStyle(r,s),t.lineStyle(o,a,h);var c=.5*-e+l,d=.5*-i+u;if(0==n)t.fillRect(c,d,e,i),o&&t.strokeRect(c,d,e,i);else if(o)if(app.main.hasWebGL)t.fillRoundedRect(c,d,e,i,n,n),e+=.5*o,i+=.5*o,t.strokeRoundedRect(c,d,e,i,n,n);else{var p=e+o,f=i+o;t.fillStyle(a,h),t.fillRoundedRect(.5*-p,.5*-f,p,f,n,n),t.fillStyle(r,s),t.fillRoundedRect(.5*-e,.5*-i,e,i,n,n)}else t.fillRoundedRect(c,d,e,i,n,n)}ru.addButton=function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#ffffff",s=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{xRatio:.5,yRatio:.45,wRatio:.8,hRatio:.8,hasStroke:!0,strokeColor:"#000000",strokePower:6,hasShadow:!0,shadowX:0,shadowY:8,shadowColor:"#333333",shadowBlur:2,padding:0},a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"ui-font",h=t.add.container(),l=t.add.image(0,0,e,i),u=t.add.text(0,0,n,{color:r,align:"center",fontSize:64,fontFamily:a,padding:o.padding}).setOrigin(.5);o.hasStroke&&u.setStroke(o.strokeColor,o.strokePower),o.hasShadow&&u.setShadow(o.shadowX,o.shadowY,o.shadowColor,o.shadowBlur,o.hasStroke,!o.hasStroke);var c=o;return u.setScale(Math.min(l.width*c.wRatio/u.width,l.height*c.hRatio/u.height)),u.x=l.width*(c.xRatio-.5),u.y=l.height*(c.yRatio-.5),h.add(l),h.add(u),h.bg=l,h.text=u,h.width=l.width,h.height=l.height,s&&(l.setInteractive(),l.on("pointerdown",(function(t,e,i,n){s(),n&&n.stopPropagation()}))),h},ru.addGraphicsButton=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#ffffff",n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{color:10027008,width:400,height:80,opacity:1,roundCorners:0,stroke:0,strokeColor:0,strokeOpacity:1,shadowX:0,shadowY:5,shadowColor:0,shadowOpacity:.5},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{xRatio:.5,yRatio:.45,wRatio:.8,hRatio:.8,hasStroke:!0,strokeColor:"#000000",strokePower:6,hasShadow:!0,shadowX:0,shadowY:8,shadowColor:"#333333",shadowBlur:2};r.stroke=r.stroke||0;var o=t.add.container(),a=t.add.graphics();a.width=r.width,a.height=r.height,(r.shadowX||r.shadowY)&&su(a,r.width+2*r.stroke,r.height+2*r.stroke,r.roundCorners,r.shadowColor,r.shadowOpacity,null,0,0,r.shadowX,r.shadowY),su(a,r.width,r.height,r.roundCorners,r.color,r.opacity,r.stroke,r.strokeColor,r.strokeOpacity);var h=t.add.text(0,0,e,{color:i,align:"center",fontSize:64,fontFamily:"Arial"}).setOrigin(.5);s.hasStroke&&h.setStroke(s.strokeColor,s.strokePower),s.hasShadow&&h.setShadow(s.shadowX,s.shadowY,s.shadowColor,s.shadowBlur,s.hasStroke,!s.hasStroke);var l=s;return h.setScale(Math.min(a.width*l.wRatio/h.width,a.height*l.hRatio/h.height)),h.x=a.width*(l.xRatio-.5),h.y=a.height*(l.yRatio-.5),o.add(a),o.add(h),o.bg=a,o.text=h,o.width=a.width,o.height=a.height,n&&(o.setInteractive(new Phaser.Geom.Rectangle(0,0,r.width,r.height),Phaser.Geom.Rectangle.Contains),o.on("pointerdown",n)),o};var ou,au=ru;function hu(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var lu=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ou=E.phaserScene,this.init(),this.canClickBtn=!0,this.nextBtnAction=function(){e.canClickBtn&&(e.canClickBtn=!1,E.curScore=0,e.updateScore(E.curScore),e.hideEndCard(),clearTimeout(e.graphTimeout),H5SDK.requestInterstitialAd().then((function(){e.showLevelCont(),E.changeLevel(),e.gameEnded=!1})))}}var e,i,n;return e=t,(i=[{key:"init",value:function(){var t=ou.add.container();this.levelCont=t;var e=ou.add.image(0,-35,"atlas","progress_bar_bg"),i=ou.add.image(0,e.y,"atlas","progress_bar_fill"),n=ou.make.graphics();n.fillStyle(16711680,.5),n.fillRect(0,-50,e.width,100);var r=n.createGeometryMask();i.setMask(r);var s=0;this.updateBarFill=function(t){s=t,n.scaleX=n.defScale*t},t.add([e,i]);var o=E.levelNo+1,a=ou.add.text(0,0,E.locales.level+" "+o,{fontFamily:"mashup",fontSize:35,color:"#ffffff",align:"center",stroke:"#666",strokeThickness:4}).setOrigin(.5),h=ou.add.text(0,80,E.lastScore||0,{fontFamily:"mashup",fontSize:70,color:"#ffffff",align:"center",stroke:"#666",strokeThickness:4}).setOrigin(.5);this.scoreText=h,this.updateScore=function(t){h.setText(Math.round(t))},t.add([a,h]),t.width=t.getBounds().width,t.height=t.getBounds().height,t.onResizeCallback=function(i,r){t.setScale(Math.min(.05*i/t.width,.07*r/t.height)),t.setScale(1),t.x=.5*i,t.y=.1*r,n.setScale(t.scale),n.x=t.x-.5*e.width*t.scale,n.y=t.y-35*t.scale,n.defScale=n.scale,n.scaleX*=s},t.onResizeCallback(ou.w,ou.h),this.levelCont=t,this.hideTopBar=function(){e.visible=!1,i.visible=!1},this.showTopBar=function(){e.visible=!0,i.visible=!0},this.hideLevelCont=function(){t.visible=!1},this.showLevelCont=function(){t.alpha=0,h.alpha=0,ou.tweens.add({targets:[t,h],alpha:1,duration:500,delay:250}),t.visible=!0,h.visible=!0,a.setText(E.locales.level+" "+(E.levelNo+1)),t.onResizeCallback(ou.w,ou.h)}}},{key:"initMenu",value:function(){var t,e=this,i=ou.add.image(0,0,"atlas","home_text_bg"),n=ou.add.image(0,0,"atlas","logo"),r=ou.add.text(0,0,["SPIRAL","ROLL"],{fontFamily:"mashup",fontSize:80,color:"#ffffff",align:"center",shadow:{offsetX:4,offsetY:-4,color:"#000",blur:4,stroke:!1,fill:!0},stroke:"#666",strokeThickness:2}).setOrigin(.5),s=E.bestScore;t=ou.add.text(0,0,E.locales.best+": "+s,{fontFamily:"mashup",fontSize:40,color:"#ffffff",align:"center",stroke:"#666",strokeThickness:4}).setOrigin(.5);var o=ou.add.text(0,0,E.lastScore||0,{fontFamily:"mashup",fontSize:120,color:"#ffffff",align:"center",stroke:"#666",strokeThickness:4}).setOrigin(.5);n.visible=!1,i.visible=!1,n.onResizeCallback=function(e,s){n.setScale(Math.min(.3*e/n.width,.2*s/n.height)),n.x=.5*e,n.y=.7*s,i.setScale(e/i.width,.8*n.scale),i.x=n.x,i.y=n.y+.3*n.displayHeight,r.setScale(n.scale),r.x=n.x,r.y=n.y+.5*n.displayHeight+.55*r.displayHeight,r.setScale(Math.min(.6*e/n.width,.25*s/n.height)),r.x=n.x,r.y=.3*s,t&&(t.setScale(Math.min(1,.6*e/t.width,.08*s/t.height)),t.x=.5*e,t.y=.85*s,e>s&&(t.y=.8*s),o.setScale(t.scale),o.x=t.x,o.y=t.y-.5*t.displayHeight-.5*o.displayHeight)},n.onResizeCallback(ou.w,ou.h),this.hideMenu=function(){e.hideMenu=null,ou.tweens.add({targets:[n,i,r,t,o],alpha:0,duration:500}),ou.time.delayedCall(500,(function(){n.destroy(),i.destroy(),r.destroy(),t.destroy(),o.destroy()}))}}},{key:"initSettings",value:function(){var t=!0,e=!0;E.vibrateOn=e;var i=function(t,e){var i=ou.add.container(),n=ou.add.image(0,0,"atlas","bg"),r=ou.add.image(0,0,"atlas",t);return i.add([n,r]),i.width=n.width,i.height=n.height,n.setInteractive(),n.on("pointerdown",(function(t,i,n,r){e(),r.stopPropagation()})),i.icon=r,i.bg=n,i},n=ou.add.container();n.setDepth(1);var r=i("_settings",(function(){a=!a,E.phaserScene.tweens.add({targets:[s,o],y:a?0:-150,duration:300,ease:"Sine.easeInOut"})})),s=i("audio_on",(function(){t=!t,s.icon.setFrame(t?"audio_on":"audio_off"),Howler.mute(!t)}));this.setSoundOn=function(){t=!0,s.icon.setFrame("audio_on"),Howler.mute(!1)},this.setSoundOff=function(){t=!1,s.icon.setFrame("audio_off"),Howler.mute(!0)},window.H5SDK.addEventListener("mute",this.setSoundOff.bind(this)),window.H5SDK.addEventListener("unmute",this.setSoundOn.bind(this));var o=i("vibration_on",(function(){e=!e,o.icon.setFrame(e?"vibration_on":"vibration_off"),E.vibrateOn=e}));n.add([r,s,o]),s.x=60,o.x=120,s.y=-150,o.y=s.y;var a=!1;n.onResizeCallback=function(t,e){var i=Math.min(.1*t/r.width,.1*e/r.height);n.setScale(i),n.x=40*i,n.y=40*i,n.defX=n.x},n.onResizeCallback(ou.w,ou.h),this.hideSettings=function(){E.phaserScene.tweens.add({targets:n,x:-150,alpha:0,duration:300})},this.showSettings=function(){a=!1,s.y=-150,o.y=s.y,E.phaserScene.tweens.add({targets:n,x:n.defX,alpha:1,duration:300})}}},{key:"initTutorial",value:function(){var t=this,e=ou.add.container(),i=ou.add.image(0,100,"atlas","hand").setOrigin(.33,.05).setScale(.35),n=ou.add.image(0,i.y,"atlas","finger").setOrigin(i.originX,i.originY).setScale(i.scale),r=ou.add.text(0,0,E.locales.tutorial,{fontFamily:"calibri",fontSize:80,color:"#000",align:"center"}).setOrigin(.5).setScale(.8);e.add([r,i,n]),e.width=420,e.height=80;var s=!1;!function t(){s?ou.time.delayedCall(500,(function(){e.destroy()})):ou.tweens.add({targets:n,y:n.y+24,duration:300,delay:700,ease:"Sine.easeInOut",yoyo:!0,hold:400,onHold:function(){ou.time.delayedCall(850,(function(){!function(){for(var t=function(t){ou.time.delayedCall(20*t,(function(){var n=2*Math.PI*t/5,r=i.x,s=i.y,o=r+100*Math.cos(n)*.5,a=s+100*Math.sin(n)*.5,h=ou.add.sprite(r,s,"finger_explosion").setScale(.5);h.play("finger_explosion-anim"),h.rotation=n,h.once("animationcomplete",(function(){h.destroy()})),e.add(h),ou.tweens.add({targets:h,x:o,y:a,duration:500,ease:"Sine.easeInOut"})}))},n=0;n<5;n++)t(n)}()}))},onComplete:function(){t()}})}(),e.onResizeCallback=function(t,i){e.x=.5*t,e.y=.3*i,e.setScale(Math.min(.5*t/e.width,.2*i/e.height)),t>i&&e.setScale(Math.min(.3*t/e.width,.06*i/e.height))},e.onResizeCallback(ou.w,ou.h),this.hideTutorial=function(){t.hideTutorial=null,ou.tweens.add({targets:e,alpha:0,duration:500,ease:"Sine.easeInOut",onComplete:function(){e.destroy()}})},ou.input.once("pointerdown",(function(){s=!0}))}},{key:"endGame",value:function(t){var e=this;this.gameEnded||(this.gameEnded=!0,ou.time.delayedCall(1e3,(function(){var i=e.scoreText;i.visible=!1;var n=ou.add.text(0,0,i.text,{fontFamily:"mashup",fontSize:70,color:"#ffffff",align:"center",stroke:"#666",strokeThickness:4}).setOrigin(.5);n.x=i.x*e.levelCont.scale+e.levelCont.x,n.y=i.y*e.levelCont.scale+e.levelCont.y,n.scale=n.scale*e.levelCont.scale,t?e.addEndCard(n):e.addFailCard(n),e.showSettings(),ou.tweens.add({targets:e.levelCont,y:-200,duration:500,onComplete:function(){e.levelCont.visible=!1}})})))}},{key:"addFailCard",value:function(t){var e=this;H5SDK.preloadRewardedAd().then((function(i){var n=ou.add.rectangle(0,0,100,100,6401712).setOrigin(0),r=ou.add.container(),s=ou.add.container();ou.children.bringToTop(t);var o=ou.add.container(),a=ou.add.image(0,0,"atlas","fail_graph").setOrigin(0),h=ou.add.graphics();o.scale=1.5,o.y=-600,o.x=.5*-a.width*o.scale;var l=0,u=function(){h.clear(),h.beginPath(),h.lineStyle(6,16777215,1);for(var t=0;t<c.length;t++){var e=c[t],i=c[t-1],n=e.isGreen?65280:16777215;h.lineStyle(6,n,1),h.beginPath(),t>0&&(h.moveTo(i.x,i.y),h.lineTo(e.x,e.y)),h.strokePath()}for(var r=0;r<c.length;r++){var s=c[r],o=s.isGreen?65280:16777215;h.fillStyle(o,1),h.fillCircle(s.x,s.y,10)}},c=[];if(E.prevScores.length>0){l=E.prevScores.reduce((function(t,e){return Math.max(t,e)})),l=Math.max(l,E.bestScore);var d=E.prevScores.length,p=470/d;d>1&&(p=470/(d-1));for(var f=0;f<d;f++){var m={x:30+f*p,y:150-118*E.prevScores[f]/l};c.push(m)}u(),E.curScore=Math.round(E.curScore),e.graphTimeout=setTimeout((function(){var t=470/d;E.prevScores.push(Math.round(E.curScore)),E.saveGame(),l=E.prevScores.reduce((function(t,e){return Math.max(t,e)}));for(var e=0;e<E.prevScores.length;e++){var i=30+e*t,n=150-118*E.prevScores[e]/l;if(c[e])c[e].tx=i,c[e].ty=n;else{var r={x:i,y:n,tx:i,ty:n,isGreen:!0};c.push(r)}}for(var s=function(t){var e=c[t];ou.tweens.add({targets:e,x:e.tx,y:e.ty,duration:1e3,ease:"Sine.easeInOut",onUpdate:function(){0==t&&u()}})},o=0;o<c.length;o++)s(o)}),2500)}else E.prevScores.push(Math.round(E.curScore)),E.saveGame(),l=Math.max(l,E.bestScore);o.add([a,h]),s.add(o);var g=ou.add.text(0,0,E.locales.try_again,{fontFamily:"mashup",fontSize:80,color:"#ffffff",align:"center",stroke:"#666",strokeThickness:4}).setOrigin(.5);g.scale=1.2,g.y+=.5*g.height;var v,y,A=ou.add.text(0,340,E.locales.best+": "+l,{fontFamily:"mashup",fontSize:60,color:"#ffffff",align:"center",stroke:"#666",strokeThickness:4}).setOrigin(.5);if(e.canClickBtn=!0,i){y=ou.add.container(0,1e3);var x=ou.add.image(0,0,"atlas","rewarded_bg"),w=ou.add.image(0,40,"atlas","rewarded_btn"),b=ou.add.text(0,-100,E.locales.revive_text,{fontFamily:"mashup",fontSize:60,color:"#000000",align:"center"}).setOrigin(.5);y.add([x,w,b]),r.add(y),(v=ou.add.text(0,440,E.locales.no_thanks,{fontFamily:"mashup",fontSize:60,color:"#ffffff",align:"center",stroke:"#666",strokeThickness:4}).setOrigin(.5)).y=1300,x.setInteractive(),x.on("pointerdown",(function(){if(e.canClickBtn){e.canClickBtn=!1,E.lockInput();var t=function(t){clearTimeout(e.graphTimeout),e.hideEndCard(),e.showLevelCont(),e.gameEnded=!1,E.unlockInput(),t?E.reviveWithRewarded():(E.curScore=0,e.updateScore(E.curScore),E.changeLevel())};window.H5SDK&&H5SDK.requestRewardedAd().then((function(e){t(!!e)}))}}))}else(v=ou.add.image(0,0,"atlas","restart").setOrigin(.5).setScale(1)).y=1200;v.setInteractive(),v.once("pointerdown",e.nextBtnAction.bind(e)),t.x=0,s.y=960,r.add([s,g,t,A,v]),r.width=r.getBounds().width,r.height=r.getBounds().height;var S=ou.add.rectangle(0,0,r.width,r.height,16711680).setOrigin(.5,0);S.visible=!1,r.add(S),r.sendToBack(S),r.onResizeCallback=function(t,e){n.width=t,n.height=e,r.setScale(Math.min(.85*t/r.width,.86*e/r.height)),r.x=.5*t,r.y=.5*e-.5*r.displayHeight},r.onResizeCallback(ou.w,ou.h),t.scale/=r.scale,t.y=(t.y-r.y)/r.scale,n.alpha=0,ou.tweens.add({targets:n,alpha:.7,duration:500});var T=[s,v,g];y&&(y.scale*=1.25,y.y-=60,T.push(y)),T.forEach((function(t){t.defX=t.x,t.defY=t.y,t.defScale=t.scale,t.alpha=1,ou.tweens.killTweensOf(t)})),g.y=-500,g.delay=500,s.alpha=0,s.delay=700,v.alpha=0,v.delay=700,y&&(y.alpha=0,y.scale*=2,y.delay=700,v.alpha=0,v.y+=200,v.delay=1500),ou.tweens.add({targets:t,y:200,scale:2,duration:500,delay:500,ease:"Sine.easeInOut"}),e.hideEndCard=function(){[r,n].forEach((function(t){t.destroy()}))},T.forEach((function(t){ou.tweens.add({targets:t,x:t.defX,y:t.defY,scale:t.defScale,rotation:0,ease:"Back",duration:350,delay:250+t.delay,onComplete:function(){}}),ou.tweens.add({targets:t,alpha:1,duration:500,delay:350+t.delay})}))}))}},{key:"addEndCard",value:function(t){var e=this,i=(E.levelNo-1)%10,n=Math.floor(i/5)+1,r=ou.add.rectangle(0,0,100,100,6401712).setOrigin(0),s=ou.add.container(),o=ou.add.container();ou.children.bringToTop(t);var a=ou.add.image(0,0,"atlas","level"+n).setOrigin(.5).setScale(.7),h=ou.add.image(0,0,"atlas","level"+(n+1)).setOrigin(.5).setScale(a.scale);a.x=-390,h.x=-a.x;for(var l,u=a.x+130,c=i%5,d=0;d<5;d++){var p=ou.add.image(u+130*d,0,"atlas","progress_grey").setOrigin(.5).setScale(1);o.add([p]),d<c?p.setFrame("progress"):l||(l=p)}var f=new nu({barBgTexture:"atlas",barBgFrame:"progress_grey",barFillTexture:"atlas",barFillFrame:"progress"},ou);f.x=l.x,f.y=l.y,f.setScale(l.scale),o.add(f),ou.tweens.add({targets:f,ratio:1,duration:500,ease:"Sine.easeInOut",delay:1e3,onUpdate:function(){f.updateBarFill(f.ratio)}}),o.add([a,h]);var m=ou.add.text(0,0,E.locales.level_passed,{fontFamily:"mashup",fontSize:80,color:"#ffffff",align:"center",stroke:"#666",strokeThickness:4}).setOrigin(.5);m.scale=1.5,m.y+=.5*m.height;var g=ou.add.image(0,0,"atlas","next_level").setOrigin(.5).setScale(2);if(g.setInteractive(),g.once("pointerdown",(function(){E.saveGame(),e.hideEndCard(),e.showLevelCont(),E.changeLevel(!0),e.gameEnded=!1})),t.x=0,o.y=1060,g.y=o.y+400,s.add([o,m,t,g]),H5SDK.getPlatform().isFacebook()){var v=au.addButton(ou,"atlas","invite_btn",E.locales.fb_invite,"#ffffff",(function(){H5SDK.getPlatform().inviteFriends(E.gameLogo,"My best score is "+Math.round(A)+"Try to beat me!")}),{xRatio:.5,yRatio:.5,wRatio:.8,hRatio:.8,hasShadow:!0,shadowX:0,shadowY:4,shadowColor:"#000000",shadowBlur:4},"calibri"),y=au.addButton(ou,"atlas","share_btn",E.locales.fb_share,"#ffffff",(function(){H5SDK.getPlatform().shareWithFriends(E.gameLogo,"My best score is "+Math.round(A)+"Try to beat me!")}),{xRatio:.5,yRatio:.5,wRatio:.8,hRatio:.8,hasShadow:!0,shadowX:0,shadowY:4,shadowColor:"#000000",shadowBlur:4},"calibri");s.add([v,y]),v.y=800,y.y=1050,v.scale=y.scale=3,o.y+=300,g.y+=300;var A=Math.max(E.bestScore,E.curScore);A=Math.round(Math.max(E.curScore,A));var x=ou.add.text(0,500,E.locales.best+": "+A,{fontFamily:"mashup",fontSize:60,color:"#ffffff",align:"center",stroke:"#666",strokeThickness:4}).setOrigin(.5).setScale(2);s.add(x)}s.width=s.getBounds().width,s.height=s.getBounds().height;var w=ou.add.rectangle(0,0,s.width,s.height,16711680).setOrigin(.5,0);w.visible=!1,s.add(w),s.sendToBack(w),s.onResizeCallback=function(t,e){r.width=t,r.height=e,s.setScale(Math.min(.85*t/s.width,.8*e/s.height)),s.x=.5*t,s.y=.52*e-.5*s.displayHeight},s.onResizeCallback(ou.w,ou.h),t.scale/=s.scale,t.y=(t.y-s.y)/s.scale,r.alpha=0,ou.tweens.add({targets:r,alpha:.7,duration:500});var b=[o,g,m];b.forEach((function(t){t.defX=t.x,t.defY=t.y,t.defScale=t.scale,t.alpha=1,ou.tweens.killTweensOf(t)})),m.y=-500,m.delay=500,o.alpha=0,o.delay=700,g.alpha=0,g.delay=700,ou.tweens.add({targets:t,y:300,scale:3,duration:500,delay:500,ease:"Sine.easeInOut"}),this.hideEndCard=function(){[s,r].forEach((function(t){t.destroy()}))},b.forEach((function(t){ou.tweens.add({targets:t,x:t.defX,y:t.defY,scale:t.defScale,rotation:0,ease:"Back",duration:350,delay:250+t.delay,onComplete:function(){}}),ou.tweens.add({targets:t,alpha:1,duration:500,delay:350+t.delay})}))}}])&&hu(e.prototype,i),n&&hu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function uu(t){return(uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function du(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pu(t,e){return(pu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=vu(t);if(e){var r=vu(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return mu(this,i)}}function mu(t,e){if(e&&("object"===uu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gu(t)}function gu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vu(t){return(vu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pu(t,e)}(s,t);var e,i,n,r=fu(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;cu(this,s),t=r.call(this);var i=1,n=E.wall_area.clone();n.scale.x*=i,n.scale.z*=i,t.add(n),E.threeScene.add(gu(t)),t.position.z=e,t.initPhysicsGround();for(var o=E.brickDim.x,a=E.brickDim.y,h=4*-o,l=1.5*o,u=function(t){for(var e,i=0;i<8;i++)for(var n=0;n<8;n++){var r=i*o+h,s=.5*a+n*a;if(n%2==0){if(0==i||8==i)continue}else r+=.5*o;var u=void 0;Math.abs(r)<l&&s>0*a&&(u={label:"brick"});var c={x:r,y:s,z:t},d=E.brickController.addItem(c,null,u);u&&!e&&(e=d.body)}e.addEventListener("wakeup",(function(t){E.sendScoreTexts("300",[{x:0,y:7,z:e.position.z}],0)}))},c=0;c<6;c++)u(e-5-7*c);return t}return e=s,(i=[{key:"clearOnLevelEnd",value:function(){E.cannonPhysics.world.remove(this.body),E.threeScene.remove(this)}},{key:"initPhysicsGround",value:function(){var t=E.brickScale,e=6*t,i=12*t,n=this.position.z-i,r=new CANNON.Box(new CANNON.Vec3(e,2,i)),s=new CANNON.Body({mass:0});s.addShape(r),s.position.set(0,-2,n),E.cannonPhysics.world.add(s),this.body=s}}])&&du(e.prototype,i),n&&du(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(m.Object3D);function Au(t){return(Au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wu(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bu(t,e){return(bu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Su(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=_u(t);if(e){var r=_u(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Eu(this,i)}}function Eu(t,e){if(e&&("object"===Au(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Tu(t)}function Tu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _u(t){return(_u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Mu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bu(t,e)}(s,t);var e,i,n,r=Su(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;xu(this,s),t=r.call(this);var i=E.wall_circle_and_coin_area.clone(),n=i.getObjectByName("wall_coin_circle_floor");t.add(n),t.add(i),i.scale.multiplyScalar(2),E.threeScene.add(Tu(t)),t.position.z=e,t.initPhysics();var o=[],a=[];i.traverse((function(t){-1!=t.name.indexOf("wall_piece_circle_locator")?o.push(t):-1!=t.name.indexOf("wall_coin_locator")&&a.push(t)})),t.coins=[],a.forEach((function(e){var i=new m.Vector3;e.updateWorldMatrix(!0),e.getWorldPosition(i);var n=E.coinController.addItem(i,null,{mass:0,ignoreBodyPos:!0,collisionCallback:E.goldCollectedEvent,isSensor:!0});t.coins.push(n)}));var h=[],l=new m.Object3D;l.position.copy(t.position),E.threeScene.add(l),t.towerHolder=l,o.forEach((function(t){l.attach(t);var e=E.brickController.addItem(t.position.clone(),t.quaternion.clone(),null);e.locObj=t,h.push(e)})),t.remove(i);var u=3.3,c=8.5,d=new CANNON.Body({mass:0,position:new CANNON.Vec3(0,.5*c,t.position.z),shape:new CANNON.Box(new CANNON.Vec3(u,c,u)),collisionFilterGroup:E.collisionGroupBrick,collisionFilterMask:E.collisionGroupChisel|E.collisionGroupDefault});E.cannonPhysics.world.add(d),t.fakeBody=d,d.label="killing_circleWall";var p=!1,f=function(){E.cannonPhysics.world.remove(d),t.fakeBody=null,h.forEach((function(e){E.brickController.activateBody(e,{mass:1,label:"brick"});var i=e.pos.x-t.towerHolder.position.x,n=e.pos.y-t.towerHolder.position.y,r=e.pos.z-t.towerHolder.position.z;e.body.velocity.x=5*i*Math.random(),e.body.velocity.z=5*r*Math.random(),e.body.angularVelocity.set(.1*i,.1*n,.1*r)})),E.phaserScene.tweens.killTweensOf(l.rotation),E.threeScene.remove(l),t.towerHolder=null,t.coins.forEach((function(t){var e=t.pos.y;setTimeout((function(){t.body&&E.goldCollectedCallback(t)}),50*e)}));var e=[{x:-3,y:4},{x:-4,y:8},{x:-2,y:14},{x:3,y:13},{x:2,y:7},{x:4,y:2}];e.forEach((function(e){e.z=t.position.z+.6+10*Math.random()})),E.sendScoreTexts("500",e)};return d.addEventListener("collide",(function(t){if("chisel"==t.body.label&&t.body.gameObject.bonusActive){if(p)return;p=!0,f()}if("spiral"==t.body.label&&t.body.mass>20){var e=function(){if(d.collisionResponse=!1,t.contact.enabled=!1,p)return{v:void 0};E.playSfx("wall_break"),E.vibrateOn&&window.H5SDK&&H5SDK.performHapticFeedBack(100),p=!0;for(var e=t.body,i=e.velocity.z,n=0;n<15;n++)setTimeout((function(){e.velocity.z=i,e.velocity.y=6,e.position.x=0}),30*n);f()}();if("object"===Au(e))return e.v}})),E.phaserScene.tweens.add({targets:l.rotation,y:2*Math.PI,duration:5e3,ease:"Linear",repeat:-1,onUpdate:function(){d.quaternion.copy(l.quaternion),h.forEach((function(t){var e=t.locObj;e.updateWorldMatrix(!0),e.getWorldPosition(t.pos),e.getWorldQuaternion(t.qt)}))}}),t}return e=s,(i=[{key:"clearOnLevelEnd",value:function(){E.cannonPhysics.world.remove(this.body),E.threeScene.remove(this),this.fakeBody&&E.cannonPhysics.world.remove(this.fakeBody)}},{key:"initPhysics",value:function(){var t=this.position.z,e=new CANNON.Box(new CANNON.Vec3(10.8,2,10.8)),i=new CANNON.Body({mass:0});i.addShape(e),i.position.set(0,-2,t),E.cannonPhysics.world.add(i),this.body=i}}])&&wu(e.prototype,i),n&&wu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(m.Object3D);function Cu(t){return(Cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ru(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ou(t,e){return(Ou=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Bu(t);if(e){var r=Bu(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Iu(this,i)}}function Iu(t,e){if(e&&("object"===Cu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Du(t)}function Du(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bu(t){return(Bu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ku=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ou(t,e)}(s,t);var e,i,n,r=Lu(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Pu(this,s),t=r.call(this);var i,n=1,o=E.wall_single_area.clone();return o.scale.x*=.7,o.scale.z*=n,t.add(o),o.traverse((function(t){"wall_piece_single"==t.name&&(i=t)})),i&&i.parent.remove(i),E.threeScene.add(Du(t)),t.position.z=e,t.initPhysics(),t.initWall(),t.initFakeBody(),t}return e=s,(i=[{key:"clearOnLevelEnd",value:function(){E.cannonPhysics.world.remove(this.body),E.threeScene.remove(this),this.fakeBody&&(E.cannonPhysics.world.remove(this.fakeBody),this.fakeBody=null)}},{key:"initFakeBody",value:function(){var t=this,e=new CANNON.Body({mass:0,position:new CANNON.Vec3(0,9.5,this.position.z),shape:new CANNON.Box(new CANNON.Vec3(3.3,10,.8)),collisionFilterGroup:E.collisionGroupBrick,collisionFilterMask:E.collisionGroupChisel|E.collisionGroupDefault});E.cannonPhysics.world.add(e),this.fakeBody=e;var i,n=function(){E.cannonPhysics.world.remove(e),t.fakeBody=null,t.bodyBrickList.forEach((function(t){E.brickController.activateBody(t,{mass:1,label:"brick"},!1,!0)}));var i=[{x:-3,y:6},{x:-4,y:10},{x:-2,y:16},{x:3,y:15},{x:2,y:9},{x:4,y:4}];i.forEach((function(e){e.z=t.position.z+.3})),E.sendScoreTexts("400",i)};e.label="killing_circleWall",e.addEventListener("collide",(function(t){if("chisel"==t.body.label&&t.body.gameObject.bonusActive){if(i)return;i=!0,n()}if("spiral"==t.body.label&&t.body.mass>20){var r=function(){if(e.collisionResponse=!1,t.contact.enabled=!1,i)return{v:void 0};E.playSfx("wall_break"),E.vibrateOn&&window.H5SDK&&H5SDK.performHapticFeedBack(100),i=!0;for(var r=t.body,s=r.velocity.z,o=0;o<15;o++)setTimeout((function(){r.velocity.z=s,r.velocity.y=6,r.position.x=0}),10*o);n()}();if("object"===Cu(r))return r.v}}))}},{key:"initWall",value:function(){var t=E.brickDim.x,e=E.brickDim.y,i=4*-t,n=1.5*t;this.bodyBrickList=[];for(var r=0;r<8;r++)for(var s=0;s<24;s++){var o=r*t+i,a=.5*e+s*e;if(s%2==0){if(0==r||8==r)continue}else o+=.5*t;var h=!1;Math.abs(o)<n&&(h=!0);var l={x:o,y:a,z:this.position.z-1},u=E.brickController.addItem(l,null,void 0);h&&this.bodyBrickList.push(u)}}},{key:"initPhysics",value:function(){var t=this.position.z-.75,e=new CANNON.Box(new CANNON.Vec3(8,2,.8)),i=new CANNON.Body({mass:0});i.addShape(e),i.position.set(0,-2,t),E.cannonPhysics.world.add(i),this.body=i}}])&&Ru(e.prototype,i),n&&Ru(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(m.Object3D);function Fu(t){return(Fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zu(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Uu(t,e){return(Uu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Wu(t);if(e){var r=Wu(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Vu(this,i)}}function Vu(t,e){if(e&&("object"===Fu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Hu(t)}function Hu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wu(t){return(Wu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ju=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uu(t,e)}(s,t);var e,i,n,r=Gu(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Nu(this,s),t=r.call(this);var i=E.tree_obstacle_area.clone();t.add(i),i.scale.multiplyScalar(.9),E.threeScene.add(Hu(t)),t.position.z=e-13,t.initPhysics();var n,o=[];return i.traverse((function(t){-1!=t.name.indexOf("tree_area_coin_locator")?o.push(t):"tree_area_collider"==t.name?n=t:"dont_be_text"==t.name&&(t.renderOrder=1e4)})),6==E.levelNo&&e<-300&&(o=[]),7==E.levelNo&&e<-500&&(o=[]),9==E.levelNo&&e<-1e3&&(o=[]),t.topColliderBody=ha.createBodyFromObj(n,{mass:0}),n.parent.remove(n),t.coins=[],o.forEach((function(e){e.position.multiplyScalar(.5);var i=new m.Vector3;e.updateWorldMatrix(!0),e.getWorldPosition(i);var n=E.coinController.addItem(i,null,{mass:0,ignoreBodyPos:!0,collisionCallback:E.goldCollectedEvent,isSensor:!0});t.coins.push(n)})),t}return e=s,(i=[{key:"clearOnLevelEnd",value:function(){E.cannonPhysics.world.remove(this.body),E.threeScene.remove(this),this.topColliderBody&&E.cannonPhysics.world.remove(this.topColliderBody)}},{key:"initPhysics",value:function(){var t=this.position.z,e=new CANNON.Box(new CANNON.Vec3(2.7,21.6,2.7)),i=new CANNON.Body({mass:0});i.addShape(e),i.position.set(-10.8,19.44,t),E.cannonPhysics.world.add(i),this.body=i}}])&&zu(e.prototype,i),n&&zu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(m.Object3D);function Yu(t){return(Yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qu(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ju(t,e){return(Ju=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=$u(t);if(e){var r=$u(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ku(this,i)}}function Ku(t,e){if(e&&("object"===Yu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Zu(t)}function Zu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $u(t){return($u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ju(t,e)}(s,t);var e,i,n,r=Qu(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Xu(this,s),t=r.call(this);var i=E.iron_obstacle.clone();return t.add(i),E.threeScene.add(Zu(t)),t.position.z=e,t.position.y=-.5,t.initPhysics(),t}return e=s,(i=[{key:"clearOnLevelEnd",value:function(){E.cannonPhysics.world.remove(this.body),E.threeScene.remove(this)}},{key:"initPhysics",value:function(){var t=this.position.z-10.8,e=new CANNON.Box(new CANNON.Vec3(2.7,2,10.8)),i=new CANNON.Body({mass:0,collisionFilterGroup:E.collisionGroupKilling,collisionFilterMask:E.collisionGroupChisel|E.collisionGroupDefault});i.addShape(e),i.position.set(0,-2.5,t),E.cannonPhysics.world.add(i),i.label="killing",this.body=i}}])&&qu(e.prototype,i),n&&qu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(m.Object3D);function ec(t){return(ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ic(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nc(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function rc(t,e){return(rc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function sc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=hc(t);if(e){var r=hc(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return oc(this,i)}}function oc(t,e){if(e&&("object"===ec(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ac(t)}function ac(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hc(t){return(hc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rc(t,e)}(s,t);var e,i,n,r=sc(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;ic(this,s),t=r.call(this);var n=E.basket_area.clone();return t.model=n,t.add(n),E.threeScene.add(ac(t)),t.position.z=e,i&&(n.position.y=i.position.y,n.quaternion.copy(i.quaternion)),t.initPhysics(n,i),t}return e=s,(i=[{key:"clearOnLevelEnd",value:function(){this.bodyList.forEach((function(t){E.cannonPhysics.world.remove(t)})),this.bodyList=[],E.threeScene.remove(this)}},{key:"gotScore",value:function(t){E.playSfx("finish_cube");var e=this.model.getObjectByName("wood_basket_"+t.scoreNum),i=e.parent;E.phaserScene.tweens.add({targets:i.scale,x:.7,y:.7,z:.7,duration:150,ease:"Quad.easeInOut",yoyo:!0}),E.phaserScene.tweens.add({targets:e.rotation,z:-Math.PI/2,duration:350,ease:"Back"});var n=this["ring"+t.scoreNum],r=new m.Vector3;n.updateWorldMatrix(!0),n.getWorldPosition(r),E.sendConfetti(r,null,-1.57);for(var s=Math.min(t.scoreNum,20),o=0;o<s;o++)E.coinController.addItemWithDynamicPhysics(r.clone()).body.velocity.set(5*(1-2*Math.random()),10*(1+2*Math.random()),5*(1-2*Math.random()))}},{key:"initPhysics",value:function(t,e){var i=this,n=[];t.traverse((function(t){t.name.indexOf("_collider")>=0?n.push(t):"basket_ring_10"==t.name?i.ring10=t:"basket_ring_25"==t.name?i.ring25=t:"basket_ring_50"==t.name?i.ring50=t:"basket_ring_10_goal"==t.name?(i.ring10Goal=t,t.scoreNum=10):"basket_ring_25_goal"==t.name?(i.ring25Goal=t,t.scoreNum=25):"basket_ring_50_goal"==t.name&&(i.ring50Goal=t,t.scoreNum=50)})),[this.ring10,this.ring25,this.ring50].forEach((function(t){t.rotation.x=.25})),e&&t.traverse((function(t){"basket_ring_10"==t.name?i.ringLoc10=t:"basket_ring_25"==t.name?i.ringLoc25=t:"basket_ring_50"==t.name&&(i.ringLoc50=t)})),this.bodyList=[];for(var r=0,s=n;r<s.length;r++){var o=s[r],a=ha.createBodyFromObj(o,{mass:0});this.bodyList.push(a),o.parent.remove(o)}this.ring10Goal.parent.remove(this.ring10Goal),this.ring25Goal.parent.remove(this.ring25Goal),this.ring50Goal.parent.remove(this.ring50Goal),this.ring10Goal=new m.Mesh(new m.BoxBufferGeometry(.2,.2,.2),new m.MeshLambertMaterial({color:16777215})),this.ring25Goal=this.ring10Goal.clone(),this.ring50Goal=this.ring10Goal.clone(),this.ring10.add(this.ring10Goal),this.ring25.add(this.ring25Goal),this.ring50.add(this.ring50Goal);var h=[this.ring10Goal,this.ring25Goal,this.ring50Goal];this.ring10Goal.scoreNum=10,this.ring25Goal.scoreNum=25,this.ring50Goal.scoreNum=50;var l=function t(e){"spiral"==e.body.label&&(e.target.gameObject.scoreNum,e.target.removeEventListener("collide",t),i.gotScore(e.target.gameObject))},u=[6,4,3];h.forEach((function(t,e){var n=u[e];t.scale.multiplyScalar(5),t.scale.x*=n,t.scale.z*=n,t.position.y+=1;var r=ha.createBodyFromObj(t,{mass:0});r.collisionResponse=!1,r.addEventListener("collide",l),r.gameObject=t,i.bodyList.push(r),t.parent.remove(t)}))}},{key:"initPhysicsOld",value:function(){for(var t=function t(e){"spiral"==e.body.label&&(e.target.score,e.target.removeEventListener("collide",t))},e=0,i=[{pos:new m.Vector3(0,2.4,this.position.z-11.2),rad:5.2,score:10},{pos:new m.Vector3(0,2.4,this.position.z+1),rad:3.8,score:25},{pos:new m.Vector3(0,2.4,this.position.z+11.2),rad:2.5,score:50}];e<i.length;e++){for(var n=i[e],r=2*Math.PI*n.rad,s=1.3*Math.round(r/10),o=new CANNON.Box(new CANNON.Vec3(.5*s,.8,.3)),a=0;a<10;a++){var h=a/10*Math.PI*2,l=Math.sin(h)*n.rad,u=Math.cos(h)*n.rad+n.pos.z,c=new CANNON.Body({mass:0});c.addShape(o),c.position.set(l,n.pos.y,u),c.quaternion.setFromAxisAngle(new CANNON.Vec3(0,1,0),h),E.cannonPhysics.world.add(c)}var d=new CANNON.Body({mass:0}),p=new CANNON.Box(new CANNON.Vec3(.5,.5,.5));d.addShape(p),d.position.set(n.pos.x,n.pos.y-2,n.pos.z),E.cannonPhysics.world.add(d),d.score=n.score,d.addEventListener("collide",t)}}}])&&nc(e.prototype,i),n&&nc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(m.Object3D);function uc(t){return(uc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dc(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pc(t,e){return(pc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=vc(t);if(e){var r=vc(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return mc(this,i)}}function mc(t,e){if(e&&("object"===uc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gc(t)}function gc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vc(t){return(vc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pc(t,e)}(s,t);var e,i,n,r=fc(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;cc(this,s),t=r.call(this);var n=E.saw.clone();t.model=n,t.add(n),E.threeScene.add(gc(t)),t.position.z=e,t.initPhysics(),t.position.x=8;var o=0!=i.rotation.x;return o&&(t.position.x*=-1,n.rotation.y=Math.PI),t.tw=E.phaserScene.tweens.add({targets:t.position,x:0,duration:1e3,ease:"Sine.easeInOut",yoyo:!0,repeat:-1,onUpdate:function(){t.body&&(t.body.position.x=t.position.x)}}),t}return e=s,(i=[{key:"clearOnLevelEnd",value:function(){this.body&&E.cannonPhysics.world.remove(this.body),E.threeScene.remove(this),this.tw&&this.tw.remove()}},{key:"destroy",value:function(){var t=E.broken_saw.clone();t.position.copy(this.position),E.threeScene.add(t),t.rotation.y=this.model.rotation.y,E.threeScene.remove(this);for(var e=t.children.length-1;e>=0;e--){var i=t.children[e];E.threeScene.attach(i),ha.addRectBodyToObject(i,1,.8,!1),E.objects.push(i),i.type="chisel_part",i.body.velocity.set(15*(Math.random()-.5),5*(Math.random()-.5),5*(Math.random()-.5))}}},{key:"initPhysics",value:function(){var t=this,e=this.position.z,i=new CANNON.Box(new CANNON.Vec3(3,1,.5)),n=new CANNON.Body({mass:0,collisionFilterGroup:E.collisionGroupKilling,collisionFilterMask:E.collisionGroupChisel|E.collisionGroupDefault});n.addShape(i),n.position.set(0,.75,e),E.cannonPhysics.world.add(n),this.body=n,n.label="killing",n.addEventListener("collide",(function(e){t.isDone||(t.isDone=!0,"spiral"===e.body.label&&e.body.mass>10&&(t.destroy(),setTimeout((function(){E.cannonPhysics.world.remove(n)}),1),t.body=null))}))}}])&&dc(e.prototype,i),n&&dc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(m.Object3D);function Ac(t){return(Ac="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wc(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bc(t,e){return(bc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Sc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=_c(t);if(e){var r=_c(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ec(this,i)}}function Ec(t,e){if(e&&("object"===Ac(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Tc(t)}function Tc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _c(t){return(_c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Mc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bc(t,e)}(s,t);var e,i,n,r=Sc(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;xc(this,s),t=r.call(this);var n=i?E.obstacle_saw.clone():E.obstacle_dots.clone();if(t.add(n),i){var o=n.getObjectByName("obstacle_saw_1");t.tw=E.phaserScene.tweens.add({targets:o.rotation,y:2*-Math.PI,duration:1e3,repeat:-1})}return E.threeScene.add(Tc(t)),t.position.z=e,t.scale.multiplyScalar(2),t.position.y=-.5,t.initPhysics(),t}return e=s,(i=[{key:"clearOnLevelEnd",value:function(){E.cannonPhysics.world.remove(this.body),E.threeScene.remove(this),this.tw&&this.tw.remove()}},{key:"initPhysics",value:function(){var t=this.position.z,e=new CANNON.Box(new CANNON.Vec3(6,4,7)),i=new CANNON.Body({mass:0,collisionFilterGroup:E.collisionGroupKilling,collisionFilterMask:E.collisionGroupChisel|E.collisionGroupDefault});i.addShape(e),i.position.set(0,-2.5,t),E.cannonPhysics.world.add(i),i.label="killing",this.body=i}}])&&wc(e.prototype,i),n&&wc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(m.Object3D);function Cc(t){return(Cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rc(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Oc(){return(Oc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=Lc(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?t:i):r.value}}).apply(this,arguments)}function Lc(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kc(t)););return t}function Ic(t,e){return(Ic=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Dc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=kc(t);if(e){var r=kc(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Bc(this,i)}}function Bc(t,e){if(e&&("object"===Cc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function kc(t){return(kc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fc=new m.Object3D,Nc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ic(t,e)}(s,t);var e,i,n,r=Dc(s);function s(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;return Pc(this,s),r.call(this,t,e,i)}return e=s,(i=[{key:"addItem",value:function(t,e,i){var n=Oc(kc(s.prototype),"addItem",this).call(this,t,e,i);return n.body&&(n.body.collisionFilterGroup=E.collisionGroupCoin,n.body.collisionFilterMask=E.collisionGroupChisel|E.collisionGroupDefault),n}},{key:"addItemWithDynamicPhysics",value:function(t,e){var i={pos:t,qt:e||new m.Quaternion,index:this.list.length},n=new CANNON.Body({mass:1,shape:this.bodyShape,position:new CANNON.Vec3(t.x,t.y,t.z),collisionFilterGroup:E.collisionGroupCoin,collisionFilterMask:E.collisionGroupChisel|E.collisionGroupDefault});return i.body=n,n.item=i,E.cannonPhysics.world.add(n),n.quaternion.copy(i.qt),n.label="coin",this.list.push(i),i.isDynamic=!0,i}},{key:"update",value:function(){var t=this.dummy,e=this.list.length;if(e>0){for(var i=e-1;i>=0;i--){var n=this.list[i];n.isDynamic?n.body&&(n.pos.copy(n.body.position),n.qt.copy(n.body.quaternion),Fc.position.copy(n.pos),Fc.quaternion.copy(n.qt),Fc.updateMatrix(),this.instancedMesh.setMatrixAt(i,Fc.matrix)):(t.position.copy(n.pos),t.updateMatrix(),this.instancedMesh.setMatrixAt(i,t.matrix)),n.pos.z>E.camZ+10&&(n.body&&(E.cannonPhysics.world.remove(n.body),n.body=null),Fc.position.set(0,0,0),t.position.set(0,0,0))}this.instancedMesh.instanceMatrix.needsUpdate=!0}}}])&&Rc(e.prototype,i),n&&Rc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(x);function zc(t){return(zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gc(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Vc(){return(Vc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=Hc(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?t:i):r.value}}).apply(this,arguments)}function Hc(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xc(t)););return t}function Wc(t,e){return(Wc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Xc(t);if(e){var r=Xc(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Yc(this,i)}}function Yc(t,e){if(e&&("object"===zc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Xc(t){return(Xc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wc(t,e)}(s,t);var e,i,n,r=jc(s);function s(t,e){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;return Uc(this,s),(i=r.call(this,t,e,n)).collisionFilterMask=E.collisionGroupChisel|E.collisionGroupDefault,i.collisionFilterMaskBrick=E.collisionGroupChisel|E.collisionGroupDefault|E.collisionGroupBrick,i}return e=s,(i=[{key:"addItem",value:function(t,e,i){var n=Vc(Xc(s.prototype),"addItem",this).call(this,t,e,i);return n.body&&(n.body.collisionFilterGroup=E.collisionGroupBrick,n.body.collisionFilterMask=this.collisionFilterMaskBrick),n}},{key:"activateBody",value:function(t,e,i,n){var r=t.pos,s=new CANNON.Body({mass:void 0===e.mass?1:e.mass,shape:this.bodyShape,position:new CANNON.Vec3(r.x,r.y,r.z),collisionFilterGroup:E.collisionGroupBrick,collisionFilterMask:this.collisionFilterMask});n&&(s.collisionFilterMask=this.collisionFilterMaskBrick),t.body=s,s.item=t,E.cannonPhysics.world.add(s),s.quaternion.copy(t.qt),s.label=e.label,e.isSensor&&(s.collisionResponse=!1),t.ignoreBodyPos=e.ignoreBodyPos,e.collisionCallback&&s.addEventListener("collide",e.collisionCallback),i&&s.sleep()}},{key:"update",value:function(){var t=this.dummy,e=this.list.length;if(e>0){for(var i=e-1;i>=0;i--){var n=this.list[i];n.body?(t.position.copy(n.body.position),t.quaternion.copy(n.body.quaternion),(n.body.position.y<-15||n.body.position.z>E.camZ+10||E.scoreArea.onSurface&&n.body.position.z-10<E.scoreArea.position.z)&&(E.cannonPhysics.world.remove(n.body),n.body=null,n.pos.x=0,n.pos.y=0,n.pos.z=0,t.position.set(0,0,0))):(t.position.copy(n.pos),t.quaternion.copy(n.qt),n.pos.z>E.camZ+10&&(n.body&&(E.cannonPhysics.world.remove(n.body),n.body=null),n.pos.x=0,n.pos.y=0,n.pos.z=0,t.position.set(0,0,0))),t.updateMatrix(),this.instancedMesh.setMatrixAt(i,t.matrix)}this.instancedMesh.instanceMatrix.needsUpdate=!0}}}])&&Gc(e.prototype,i),n&&Gc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(x);function Jc(t){return(Jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qc(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return Kc(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Kc(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw s}}}}function Kc(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Zc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function td(t,e){return(td=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ed(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=nd(t);if(e){var r=nd(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return id(this,i)}}function id(t,e){if(e&&("object"===Jc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function nd(t){return(nd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&td(t,e)}(s,t);var e,i,n,r=ed(s);function s(){return Zc(this,s),r.call(this)}return e=s,(i=[{key:"openBox",value:function(t){if(!this.anyOneOpened){this.anyOneOpened=!0;var e=[];t.traverse((function(t){t.name.indexOf("cannon")>=0&&e.push(t)})),E.phaserScene.time.delayedCall(100,(function(){var t,i=Qc(e);try{for(i.s();!(t=i.n()).done;){var n=t.value,r=new m.Vector3;n.updateWorldMatrix(!0),n.getWorldPosition(r),E.sendConfetti(r,null,-1.57)}}catch(t){i.e(t)}finally{i.f()}})),E.phaserScene.tweens.add({targets:t.position,y:t.position.y+4,duration:200,ease:"Power1"});var i=new CANNON.Box(new CANNON.Vec3(.3,7.4,.5*t.dimensions.z)),n=new CANNON.Body({mass:0,position:new CANNON.Vec3(t.worldPos.x,t.worldPos.y+2.5,t.worldPos.z)});this.boxWallBody=n;var r=.5*t.dimensions.x,s=(t.dimensions.y,.5*t.dimensions.z);n.addShape(i,new CANNON.Vec3(r,0,0)),n.addShape(i,new CANNON.Vec3(-r,0,0)),n.addShape(i,new CANNON.Vec3(0,0,-s),new CANNON.Quaternion(0,.7071067811865475,0,.7071067811865475));var o=new CANNON.Box(new CANNON.Vec3(.5*t.dimensions.x,.3,.5*t.dimensions.z));n.addShape(o,new CANNON.Vec3(0,7.2,0)),E.cannonPhysics.world.add(n);var a=[],h=t.worldPos.clone();h.y+=5;for(var l=0;l<t.goldNum;l++){var u=new m.Vector3(h.x+2*(Math.random()-.5),h.y+2*(Math.random()-.5),h.z+2*(Math.random()-.5)),c=E.coinController.addItemWithDynamicPhysics(u);a.push(c)}}}},{key:"clearOnLevelEnd",value:function(){E.cannonPhysics.world.remove(this.body),E.threeScene.remove(this),this.boxWallBody&&E.cannonPhysics.world.remove(this.boxWallBody)}}])&&$c(e.prototype,i),n&&$c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(m.Object3D);function sd(t){return(sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function od(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var n,r,s=[],o=!0,a=!1;try{for(i=i.call(t);!(o=(n=i.next()).done)&&(s.push(n.value),!e||s.length!==e);o=!0);}catch(t){a=!0,r=t}finally{try{o||null==i.return||i.return()}finally{if(a)throw r}}return s}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ad(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ad(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ad(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function hd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ld(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ud(t,e){return(ud=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=fd(t);if(e){var r=fd(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return dd(this,i)}}function dd(t,e){if(e&&("object"===sd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return pd(t)}function pd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fd(t){return(fd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var md=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ud(t,e)}(s,t);var e,i,n,r=cd(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;hd(this,s),t=r.call(this);var i=1,n=E.loot_box.clone();n.scale.x*=i,n.scale.z*=i,t.add(n),E.threeScene.add(pd(t)),t.position.z=e,n.traverse((function(e){e.material&&(e.material.side=2),"loot_box_2"==e.name?(t.lootBox2=e,e.goldNum=2):"loot_box_5"==e.name?(t.lootBox5=e,e.goldNum=5):"loot_box_20"==e.name&&(t.lootBox20=e,e.goldNum=20)})),t.initPhysicsGround();var o=[t.lootBox2,t.lootBox5,t.lootBox20];t.lootList=o;for(var a=0,h=o;a<h.length;a++){var l=h[a],u=Jt.modelToBox3(l),c=od(u,3),d=c[0],p=c[1],f=c[2];l.dimensions=p,l.worldPos=d,l.box3=f}return t}return e=s,(i=[{key:"clearOnLevelEnd",value:function(){E.cannonPhysics.world.remove(this.body),E.threeScene.remove(this)}},{key:"initPhysicsGround",value:function(){var t=this,e=this.position.z-13.6,i=new CANNON.Box(new CANNON.Vec3(3,2,13.6)),n=new CANNON.Body({mass:0});n.addShape(i),n.position.set(0,-2,e),E.cannonPhysics.world.add(n),this.body=n,n.addEventListener("collide",(function(e){var i=e.body;if("spiral"==e.body.label){var n,r=i.position;i.velocity.y=25,i.collisionResponse=!1,setTimeout((function(){i.collisionResponse=!0}),500);for(var s=0;s<t.lootList.length;s++){var o=t.lootList[s],a=o.box3;if(r.z>a.min.z&&r.z<a.max.z){n=o;break}}n&&t.openBox(n)}}))}}])&&ld(e.prototype,i),n&&ld(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(rd);function gd(t){return(gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vd(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var n,r,s=[],o=!0,a=!1;try{for(i=i.call(t);!(o=(n=i.next()).done)&&(s.push(n.value),!e||s.length!==e);o=!0);}catch(t){a=!0,r=t}finally{try{o||null==i.return||i.return()}finally{if(a)throw r}}return s}(t,e)||Ad(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yd(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=Ad(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw s}}}}function Ad(t,e){if(t){if("string"==typeof t)return xd(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?xd(t,e):void 0}}function xd(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function wd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bd(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Sd(t,e){return(Sd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ed(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Md(t);if(e){var r=Md(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Td(this,i)}}function Td(t,e){if(e&&("object"===gd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _d(t)}function _d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Md(t){return(Md=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Cd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sd(t,e)}(s,t);var e,i,n,r=Ed(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;wd(this,s),t=r.call(this);var i=1,n=E.loot_box_big.clone();n.scale.x*=i,n.scale.z*=i,t.add(n),E.threeScene.add(_d(t)),t.position.z=e,t.lootList=[],n.traverse((function(e){e.material&&(e.material.side=2),"loot_box_10"==e.name||"loot_box_10_02"==e.name||"loot_box_10_03"==e.name?(t.lootList.push(e),e.goldNum=10):"loot_box_5_1"==e.name||"loot_box_5_02"==e.name||"loot_box_5_03"==e.name?(t.lootList.push(e),e.goldNum=5):"loot_box_25"!=e.name&&"loot_box_25_03"!=e.name&&"loot_box_25_02"!=e.name||(t.lootList.push(e),e.goldNum=25)})),t.initPhysicsGround();var o,a=yd(t.lootList);try{for(a.s();!(o=a.n()).done;){var h=o.value,l=Jt.modelToBox3(h),u=vd(l,3),c=u[0],d=u[1],p=u[2];h.dimensions=d,h.worldPos=c,h.box3=p}}catch(t){a.e(t)}finally{a.f()}return setTimeout((function(){}),1e3),t}return e=s,(i=[{key:"clearOnLevelEnd",value:function(){E.cannonPhysics.world.remove(this.body),E.threeScene.remove(this)}},{key:"initPhysicsGround",value:function(){var t=this,e=this.position.z-8.5,i=new CANNON.Box(new CANNON.Vec3(10,2,8.5)),n=new CANNON.Body({mass:0});n.addShape(i),n.position.set(0,-2,e),E.cannonPhysics.world.add(n),this.body=n,n.addEventListener("collide",(function(e){var i=e.body;if("spiral"==e.body.label){var n,r=i.position;i.velocity.y=25,i.collisionResponse=!1,setTimeout((function(){i.collisionResponse=!0}),500);for(var s=0;s<t.lootList.length;s++){var o=t.lootList[s],a=o.box3;if(r.z>a.min.z&&r.z<a.max.z&&r.x>a.min.x&&r.x<a.max.x){n=o;break}}n&&t.openBox(n)}}))}}])&&bd(e.prototype,i),n&&bd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(rd);function Pd(t){return(Pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Od(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ld(t,e){return(Ld=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Id(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=kd(t);if(e){var r=kd(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Dd(this,i)}}function Dd(t,e){if(e&&("object"===Pd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bd(t)}function Bd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kd(t){return(kd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ld(t,e)}(s,t);var e,i,n,r=Id(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;Rd(this,s),t=r.call(this);var n=E.basket_ring_vertical.clone();t.model=n,t.add(n),E.threeScene.add(Bd(t)),t.position.z=e,t.position.y=5;var o=[];n.traverse((function(t){if(t.name.indexOf("wood_basket_score_")>=0){var e=t.name.split("_")[3];t.score=e,o.push(t)}})),o.forEach((function(t){t.visible=!1}));var a=Math.floor(Math.random()*o.length);return t.curScore=o[a],t.curScore.visible=!0,t.scoreNum=t.curScore.score,t.initPhysics(n,i),t}return e=s,(i=[{key:"clearOnLevelEnd",value:function(){this.bodyList.forEach((function(t){E.cannonPhysics.world.remove(t)})),this.bodyList=[],E.threeScene.remove(this)}},{key:"gotScore",value:function(t){var e=this.model.getObjectByName("wood_basket_vertical"),i=e.parent;E.playSfx("finish_cube"),E.phaserScene.tweens.add({targets:i.scale,x:.7,y:.7,z:.7,duration:150,ease:"Quad.easeInOut",yoyo:!0}),E.phaserScene.tweens.add({targets:e.rotation,x:Math.PI/2,duration:350,ease:"Back"}),new m.Vector3,E.sendConfetti(this.position,null,-.2);for(var n=Math.min(this.scoreNum,20),r=0;r<n;r++){var s=E.coinController.addItemWithDynamicPhysics(this.position.clone());s.body.velocity.set(5*(1-2*Math.random()),5*(1+2*Math.random()),10*(1+2*Math.random())),s.body.angularVelocity.x=5*(1-2*Math.random())}}},{key:"initPhysics",value:function(t,e){var i=this,n=[];t.traverse((function(t){t.name.indexOf("_collider")>=0&&n.push(t)})),this.bodyList=[];for(var r=0,s=n;r<s.length;r++){var o=s[r],a=ha.createBodyFromObj(o,{mass:0});this.bodyList.push(a),o.parent.remove(o)}var h=function t(e){"spiral"==e.body.label&&(i.scoreNum,e.target.removeEventListener("collide",t),i.gotScore(e.target.gameObject))},l=new m.Mesh(new m.BoxBufferGeometry(1,1,1),new m.MeshLambertMaterial({color:16777215}));l.position.z-=7,this.add(l);var u=[1];[l].forEach((function(t,e){var n=u[e];t.scale.multiplyScalar(5),t.scale.x*=n,t.scale.z*=n,t.position.y-=1.25;var r=ha.createBodyFromObj(t,{mass:0});r.collisionResponse=!1,r.addEventListener("collide",h),r.gameObject=t,i.bodyList.push(r),t.parent.remove(t)}))}}])&&Od(e.prototype,i),n&&Od(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(m.Object3D);function Nd(t){return(Nd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ud(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Gd(t,e){return(Gd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=jd(t);if(e){var r=jd(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Hd(this,i)}}function Hd(t,e){if(e&&("object"===Nd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Wd(t)}function Wd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jd(t){return(jd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gd(t,e)}(s,t);var e,i,n,r=Vd(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;zd(this,s),t=r.call(this);var o=E[i].clone();t.add(o),E.threeScene.add(Wd(t)),t.position.z=e,t.position.y=n.position.y;var a=[];return o.traverse((function(t){(t.name.indexOf("coins_jump_locator")>=0||t.name.indexOf("coin_area_coin_loc")>=0)&&a.push(t)})),t.coins=[],a.forEach((function(e){var i=new m.Vector3;e.updateWorldMatrix(!0),e.getWorldPosition(i);var n=E.coinController.addItem(i,null,{mass:0,ignoreBodyPos:!0,collisionCallback:E.goldCollectedEvent,isSensor:!0});t.coins.push(n)})),t}return e=s,(i=[{key:"clearOnLevelEnd",value:function(){this.coins=[],E.threeScene.remove(this)}}])&&Ud(e.prototype,i),n&&Ud(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(m.Object3D);class Xd extends m.Loader{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(t){return new Zd(t)})),this.register((function(t){return new rp(t)})),this.register((function(t){return new sp(t)})),this.register((function(t){return new $d(t)})),this.register((function(t){return new tp(t)})),this.register((function(t){return new ep(t)})),this.register((function(t){return new ip(t)})),this.register((function(t){return new np(t)})),this.register((function(t){return new Qd(t)})),this.register((function(t){return new op(t)}))}load(t,e,i,n){const r=this;let s;s=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:m.LoaderUtils.extractUrlBase(t),this.manager.itemStart(t);const o=function(e){n&&n(e),r.manager.itemError(t),r.manager.itemEnd(t)},a=new m.FileLoader(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(i){try{r.parse(i,s,(function(i){e(i),r.manager.itemEnd(t)}),o)}catch(t){o(t)}}),i,o)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,i,n){let r;const s={},o={};if("string"==typeof t)r=t;else{if(m.LoaderUtils.decodeText(new Uint8Array(t,0,4))===ap){try{s[Jd.KHR_BINARY_GLTF]=new up(t)}catch(t){return void(n&&n(t))}r=s[Jd.KHR_BINARY_GLTF].content}else r=m.LoaderUtils.decodeText(new Uint8Array(t))}const a=JSON.parse(r);if(void 0===a.asset||a.asset.version[0]<2)return void(n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const h=new Vp(a,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let t=0;t<this.pluginCallbacks.length;t++){const e=this.pluginCallbacks[t](h);o[e.name]=e,s[e.name]=!0}if(a.extensionsUsed)for(let t=0;t<a.extensionsUsed.length;++t){const e=a.extensionsUsed[t],i=a.extensionsRequired||[];switch(e){case Jd.KHR_MATERIALS_UNLIT:s[e]=new Kd;break;case Jd.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:s[e]=new fp;break;case Jd.KHR_DRACO_MESH_COMPRESSION:s[e]=new cp(a,this.dracoLoader);break;case Jd.KHR_TEXTURE_TRANSFORM:s[e]=new dp;break;case Jd.KHR_MESH_QUANTIZATION:s[e]=new mp;break;default:i.indexOf(e)>=0&&o[e]}}h.setExtensions(s),h.setPlugins(o),h.parse(i,n)}parseAsync(t,e){const i=this;return new Promise((function(n,r){i.parse(t,e,n,r)}))}}function qd(){let t={};return{get:function(e){return t[e]},add:function(e,i){t[e]=i},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const Jd={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class Qd{constructor(t){this.parser=t,this.name=Jd.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let i=0,n=e.length;i<n;i++){const n=e[i];n.extensions&&n.extensions[this.name]&&void 0!==n.extensions[this.name].light&&t._addNodeRef(this.cache,n.extensions[this.name].light)}}_loadLight(t){const e=this.parser,i="light:"+t;let n=e.cache.get(i);if(n)return n;const r=e.json,s=((r.extensions&&r.extensions[this.name]||{}).lights||[])[t];let o;const a=new m.Color(16777215);void 0!==s.color&&a.fromArray(s.color);const h=void 0!==s.range?s.range:0;switch(s.type){case"directional":o=new m.DirectionalLight(a),o.target.position.set(0,0,-1),o.add(o.target);break;case"point":o=new m.PointLight(a),o.distance=h;break;case"spot":o=new m.SpotLight(a),o.distance=h,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,o.angle=s.spot.outerConeAngle,o.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return o.position.set(0,0,0),o.decay=2,void 0!==s.intensity&&(o.intensity=s.intensity),o.name=e.createUniqueName(s.name||"light_"+t),n=Promise.resolve(o),e.cache.add(i,n),n}createNodeAttachment(t){const e=this,i=this.parser,n=i.json.nodes[t],r=(n.extensions&&n.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(t){return i._getNodeRef(e.cache,r,t)}))}}class Kd{constructor(){this.name=Jd.KHR_MATERIALS_UNLIT}getMaterialType(){return m.MeshBasicMaterial}extendParams(t,e,i){const n=[];t.color=new m.Color(1,1,1),t.opacity=1;const r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const e=r.baseColorFactor;t.color.fromArray(e),t.opacity=e[3]}void 0!==r.baseColorTexture&&n.push(i.assignTexture(t,"map",r.baseColorTexture,m.sRGBEncoding))}return Promise.all(n)}}class Zd{constructor(t){this.parser=t,this.name=Jd.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?m.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],s=n.extensions[this.name];if(void 0!==s.clearcoatFactor&&(e.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&r.push(i.assignTexture(e,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(e.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&r.push(i.assignTexture(e,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(r.push(i.assignTexture(e,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){const t=s.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new m.Vector2(t,t)}return Promise.all(r)}}class $d{constructor(t){this.parser=t,this.name=Jd.KHR_MATERIALS_SHEEN}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?m.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[];e.sheenColor=new m.Color(0,0,0),e.sheenRoughness=0,e.sheen=1;const s=n.extensions[this.name];return void 0!==s.sheenColorFactor&&e.sheenColor.fromArray(s.sheenColorFactor),void 0!==s.sheenRoughnessFactor&&(e.sheenRoughness=s.sheenRoughnessFactor),void 0!==s.sheenColorTexture&&r.push(i.assignTexture(e,"sheenColorMap",s.sheenColorTexture,m.sRGBEncoding)),void 0!==s.sheenRoughnessTexture&&r.push(i.assignTexture(e,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(r)}}class tp{constructor(t){this.parser=t,this.name=Jd.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?m.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],s=n.extensions[this.name];return void 0!==s.transmissionFactor&&(e.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&r.push(i.assignTexture(e,"transmissionMap",s.transmissionTexture)),Promise.all(r)}}class ep{constructor(t){this.parser=t,this.name=Jd.KHR_MATERIALS_VOLUME}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?m.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],s=n.extensions[this.name];e.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&r.push(i.assignTexture(e,"thicknessMap",s.thicknessTexture)),e.attenuationDistance=s.attenuationDistance||0;const o=s.attenuationColor||[1,1,1];return e.attenuationColor=new m.Color(o[0],o[1],o[2]),Promise.all(r)}}class ip{constructor(t){this.parser=t,this.name=Jd.KHR_MATERIALS_IOR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?m.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name];return e.ior=void 0!==n.ior?n.ior:1.5,Promise.resolve()}}class np{constructor(t){this.parser=t,this.name=Jd.KHR_MATERIALS_SPECULAR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?m.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],s=n.extensions[this.name];e.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&r.push(i.assignTexture(e,"specularIntensityMap",s.specularTexture));const o=s.specularColorFactor||[1,1,1];return e.specularColor=new m.Color(o[0],o[1],o[2]),void 0!==s.specularColorTexture&&r.push(i.assignTexture(e,"specularColorMap",s.specularColorTexture,m.sRGBEncoding)),Promise.all(r)}}class rp{constructor(t){this.parser=t,this.name=Jd.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,i=e.json,n=i.textures[t];if(!n.extensions||!n.extensions[this.name])return null;const r=n.extensions[this.name],s=e.options.ktx2Loader;if(!s){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,r.source,s)}}class sp{constructor(t){this.parser=t,this.name=Jd.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,i=this.parser,n=i.json,r=n.textures[t];if(!r.extensions||!r.extensions[e])return null;const s=r.extensions[e],o=n.images[s.source];let a=i.textureLoader;if(o.uri){const t=i.options.manager.getHandler(o.uri);null!==t&&(a=t)}return this.detectSupport().then((function(r){if(r)return i.loadTextureImage(t,s.source,a);if(n.extensionsRequired&&n.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}}))),this.isSupported}}class op{constructor(t){this.name=Jd.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,i=e.bufferViews[t];if(i.extensions&&i.extensions[this.name]){const t=i.extensions[this.name],n=this.parser.getDependency("buffer",t.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([n,r.ready]).then((function(e){const i=t.byteOffset||0,n=t.byteLength||0,s=t.count,o=t.byteStride,a=new ArrayBuffer(s*o),h=new Uint8Array(e[0],i,n);return r.decodeGltfBuffer(new Uint8Array(a),s,o,h,t.mode,t.filter),a}))}return null}}const ap="glTF",hp=1313821514,lp=5130562;class up{constructor(t){this.name=Jd.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12);if(this.header={magic:m.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==ap)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,n=new DataView(t,12);let r=0;for(;r<i;){const e=n.getUint32(r,!0);r+=4;const i=n.getUint32(r,!0);if(r+=4,i===hp){const i=new Uint8Array(t,12+r,e);this.content=m.LoaderUtils.decodeText(i)}else if(i===lp){const i=12+r;this.body=t.slice(i,i+e)}r+=e}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class cp{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Jd.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const i=this.json,n=this.dracoLoader,r=t.extensions[this.name].bufferView,s=t.extensions[this.name].attributes,o={},a={},h={};for(const t in s){const e=Rp[t]||t.toLowerCase();o[e]=s[t]}for(const e in t.attributes){const n=Rp[e]||e.toLowerCase();if(void 0!==s[e]){const r=i.accessors[t.attributes[e]],s=_p[r.componentType];h[n]=s,a[n]=!0===r.normalized}}return e.getDependency("bufferView",r).then((function(t){return new Promise((function(e){n.decodeDracoFile(t,(function(t){for(const e in t.attributes){const i=t.attributes[e],n=a[e];void 0!==n&&(i.normalized=n)}e(t)}),o,h)}))}))}}class dp{constructor(){this.name=Jd.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return e.texCoord,void 0===e.offset&&void 0===e.rotation&&void 0===e.scale||(t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class pp extends m.MeshStandardMaterial{constructor(t){super(),this.isGLTFSpecularGlossinessMaterial=!0;const e=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),i=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),n=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),r=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),s=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),o={specular:{value:(new m.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=o,this.onBeforeCompile=function(t){for(const e in o)t.uniforms[e]=o[e];t.fragmentShader=t.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",e).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",n).replace("#include <metalnessmap_fragment>",r).replace("#include <lights_physical_fragment>",s)},Object.defineProperties(this,{specular:{get:function(){return o.specular.value},set:function(t){o.specular.value=t}},specularMap:{get:function(){return o.specularMap.value},set:function(t){o.specularMap.value=t,t?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return o.glossiness.value},set:function(t){o.glossiness.value=t}},glossinessMap:{get:function(){return o.glossinessMap.value},set:function(t){o.glossinessMap.value=t,t?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}copy(t){return super.copy(t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class fp{constructor(){this.name=Jd.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return pp}extendParams(t,e,i){const n=e.extensions[this.name];t.color=new m.Color(1,1,1),t.opacity=1;const r=[];if(Array.isArray(n.diffuseFactor)){const e=n.diffuseFactor;t.color.fromArray(e),t.opacity=e[3]}if(void 0!==n.diffuseTexture&&r.push(i.assignTexture(t,"map",n.diffuseTexture,m.sRGBEncoding)),t.emissive=new m.Color(0,0,0),t.glossiness=void 0!==n.glossinessFactor?n.glossinessFactor:1,t.specular=new m.Color(1,1,1),Array.isArray(n.specularFactor)&&t.specular.fromArray(n.specularFactor),void 0!==n.specularGlossinessTexture){const e=n.specularGlossinessTexture;r.push(i.assignTexture(t,"glossinessMap",e)),r.push(i.assignTexture(t,"specularMap",e,m.sRGBEncoding))}return Promise.all(r)}createMaterial(t){const e=new pp(t);return e.fog=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,e.normalMapType=m.TangentSpaceNormalMap,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e}}class mp{constructor(){this.name=Jd.KHR_MESH_QUANTIZATION}}class gp extends m.Interpolant{constructor(t,e,i,n){super(t,e,i,n)}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=t*n*3+n;for(let t=0;t!==n;t++)e[t]=i[r+t];return e}}gp.prototype.beforeStart_=gp.prototype.copySampleValue_,gp.prototype.afterEnd_=gp.prototype.copySampleValue_,gp.prototype.interpolate_=function(t,e,i,n){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=2*o,h=3*o,l=n-e,u=(i-e)/l,c=u*u,d=c*u,p=t*h,f=p-h,m=-2*d+3*c,g=d-c,v=1-m,y=g-c+u;for(let t=0;t!==o;t++){const e=s[f+t+o],i=s[f+t+a]*l,n=s[p+t+o],h=s[p+t]*l;r[t]=v*e+y*i+m*n+g*h}return r};const vp=new m.Quaternion;class yp extends gp{interpolate_(t,e,i,n){const r=super.interpolate_(t,e,i,n);return vp.fromArray(r).normalize().toArray(r),r}}const Ap=0,xp=1,wp=2,bp=3,Sp=4,Ep=5,Tp=6,_p={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Mp={9728:m.NearestFilter,9729:m.LinearFilter,9984:m.NearestMipmapNearestFilter,9985:m.LinearMipmapNearestFilter,9986:m.NearestMipmapLinearFilter,9987:m.LinearMipmapLinearFilter},Cp={33071:m.ClampToEdgeWrapping,33648:m.MirroredRepeatWrapping,10497:m.RepeatWrapping},Pp={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Rp={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Op={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Lp={CUBICSPLINE:void 0,LINEAR:m.InterpolateLinear,STEP:m.InterpolateDiscrete},Ip="OPAQUE",Dp="MASK",Bp="BLEND";function kp(t,e,i){for(const n in i.extensions)void 0===t[n]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=i.extensions[n])}function Fp(t,e){void 0!==e.extras&&"object"==typeof e.extras&&Object.assign(t.userData,e.extras)}function Np(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(let i=0,n=e.weights.length;i<n;i++)t.morphTargetInfluences[i]=e.weights[i];if(e.extras&&Array.isArray(e.extras.targetNames)){const i=e.extras.targetNames;if(t.morphTargetInfluences.length===i.length){t.morphTargetDictionary={};for(let e=0,n=i.length;e<n;e++)t.morphTargetDictionary[i[e]]=e}}}function zp(t){const e=t.extensions&&t.extensions[Jd.KHR_DRACO_MESH_COMPRESSION];let i;return i=e?"draco:"+e.bufferView+":"+e.indices+":"+Up(e.attributes):t.indices+":"+Up(t.attributes)+":"+t.mode,i}function Up(t){let e="";const i=Object.keys(t).sort();for(let n=0,r=i.length;n<r;n++)e+=i[n]+":"+t[i[n]]+";";return e}function Gp(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class Vp{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new qd,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?this.textureLoader=new m.ImageBitmapLoader(this.options.manager):this.textureLoader=new m.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new m.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const i=this,n=this.json,r=this.extensions;this.cache.removeAll(),this._invokeAll((function(t){return t._markDefs&&t._markDefs()})),Promise.all(this._invokeAll((function(t){return t.beforeRoot&&t.beforeRoot()}))).then((function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])})).then((function(e){const s={scene:e[0][n.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:n.asset,parser:i,userData:{}};kp(r,s,n),Fp(s,n),Promise.all(i._invokeAll((function(t){return t.afterRoot&&t.afterRoot(s)}))).then((function(){t(s)}))})).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],i=this.json.meshes||[];for(let i=0,n=e.length;i<n;i++){const n=e[i].joints;for(let e=0,i=n.length;e<i;e++)t[n[e]].isBone=!0}for(let e=0,n=t.length;e<n;e++){const n=t[e];void 0!==n.mesh&&(this._addNodeRef(this.meshCache,n.mesh),void 0!==n.skin&&(i[n.mesh].isSkinnedMesh=!0)),void 0!==n.camera&&this._addNodeRef(this.cameraCache,n.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,i){if(t.refs[e]<=1)return i;const n=i.clone(),r=(t,e)=>{const i=this.associations.get(t);null!=i&&this.associations.set(e,i);for(const[i,n]of t.children.entries())r(n,e.children[i])};return r(i,n),n.name+="_instance_"+t.uses[e]++,n}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let i=0;i<e.length;i++){const n=t(e[i]);if(n)return n}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const i=[];for(let n=0;n<e.length;n++){const r=t(e[n]);r&&i.push(r)}return i}getDependency(t,e){const i=t+":"+e;let n=this.cache.get(i);if(!n){switch(t){case"scene":n=this.loadScene(e);break;case"node":n=this.loadNode(e);break;case"mesh":n=this._invokeOne((function(t){return t.loadMesh&&t.loadMesh(e)}));break;case"accessor":n=this.loadAccessor(e);break;case"bufferView":n=this._invokeOne((function(t){return t.loadBufferView&&t.loadBufferView(e)}));break;case"buffer":n=this.loadBuffer(e);break;case"material":n=this._invokeOne((function(t){return t.loadMaterial&&t.loadMaterial(e)}));break;case"texture":n=this._invokeOne((function(t){return t.loadTexture&&t.loadTexture(e)}));break;case"skin":n=this.loadSkin(e);break;case"animation":n=this.loadAnimation(e);break;case"camera":n=this.loadCamera(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(i,n)}return n}getDependencies(t){let e=this.cache.get(t);if(!e){const i=this,n=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(n.map((function(e,n){return i.getDependency(t,n)}))),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],i=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[Jd.KHR_BINARY_GLTF].body);const n=this.options;return new Promise((function(t,r){i.load(m.LoaderUtils.resolveURL(e.uri,n.path),t,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){const i=e.byteLength||0,n=e.byteOffset||0;return t.slice(n,n+i)}))}loadAccessor(t){const e=this,i=this.json,n=this.json.accessors[t];if(void 0===n.bufferView&&void 0===n.sparse)return Promise.resolve(null);const r=[];return void 0!==n.bufferView?r.push(this.getDependency("bufferView",n.bufferView)):r.push(null),void 0!==n.sparse&&(r.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(r).then((function(t){const r=t[0],s=Pp[n.type],o=_p[n.componentType],a=o.BYTES_PER_ELEMENT,h=a*s,l=n.byteOffset||0,u=void 0!==n.bufferView?i.bufferViews[n.bufferView].byteStride:void 0,c=!0===n.normalized;let d,p;if(u&&u!==h){const t=Math.floor(l/u),i="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+t+":"+n.count;let h=e.cache.get(i);h||(d=new o(r,t*u,n.count*u/a),h=new m.InterleavedBuffer(d,u/a),e.cache.add(i,h)),p=new m.InterleavedBufferAttribute(h,s,l%u/a,c)}else d=null===r?new o(n.count*s):new o(r,l,n.count*s),p=new m.BufferAttribute(d,s,c);if(void 0!==n.sparse){const e=Pp.SCALAR,i=_p[n.sparse.indices.componentType],a=n.sparse.indices.byteOffset||0,h=n.sparse.values.byteOffset||0,l=new i(t[1],a,n.sparse.count*e),u=new o(t[2],h,n.sparse.count*s);null!==r&&(p=new m.BufferAttribute(p.array.slice(),p.itemSize,p.normalized));for(let t=0,e=l.length;t<e;t++){const e=l[t];if(p.setX(e,u[t*s]),s>=2&&p.setY(e,u[t*s+1]),s>=3&&p.setZ(e,u[t*s+2]),s>=4&&p.setW(e,u[t*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p}))}loadTexture(t){const e=this.json,i=this.options,n=e.textures[t].source,r=e.images[n];let s=this.textureLoader;if(r.uri){const t=i.manager.getHandler(r.uri);null!==t&&(s=t)}return this.loadTextureImage(t,n,s)}loadTextureImage(t,e,i){const n=this,r=this.json,s=r.textures[t],o=r.images[e],a=(o.uri||o.bufferView)+":"+s.sampler;if(this.textureCache[a])return this.textureCache[a];const h=this.loadImageSource(e,i).then((function(e){e.flipY=!1,s.name&&(e.name=s.name);const i=(r.samplers||{})[s.sampler]||{};return e.magFilter=Mp[i.magFilter]||m.LinearFilter,e.minFilter=Mp[i.minFilter]||m.LinearMipmapLinearFilter,e.wrapS=Cp[i.wrapS]||m.RepeatWrapping,e.wrapT=Cp[i.wrapT]||m.RepeatWrapping,n.associations.set(e,{textures:t}),e})).catch((function(){return null}));return this.textureCache[a]=h,h}loadImageSource(t,e){const i=this,n=this.json,r=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then(t=>t.clone());const s=n.images[t],o=self.URL||self.webkitURL;let a=s.uri||"",h=!1;if(void 0!==s.bufferView)a=i.getDependency("bufferView",s.bufferView).then((function(t){h=!0;const e=new Blob([t],{type:s.mimeType});return a=o.createObjectURL(e),a}));else if(void 0===s.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const l=Promise.resolve(a).then((function(t){return new Promise((function(i,n){let s=i;!0===e.isImageBitmapLoader&&(s=function(t){const e=new m.Texture(t);e.needsUpdate=!0,i(e)}),e.load(m.LoaderUtils.resolveURL(t,r.path),s,void 0,n)}))})).then((function(t){var e;return!0===h&&o.revokeObjectURL(a),t.userData.mimeType=s.mimeType||((e=s.uri).search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/)?"image/jpeg":e.search(/\.webp($|\?)/i)>0||0===e.search(/^data\:image\/webp/)?"image/webp":"image/png"),t})).catch((function(t){throw t}));return this.sourceCache[t]=l,l}assignTexture(t,e,i,n){const r=this;return this.getDependency("texture",i.index).then((function(s){if(void 0!==i.texCoord&&0!=i.texCoord&&("aoMap"!==e||i.texCoord),r.extensions[Jd.KHR_TEXTURE_TRANSFORM]){const t=void 0!==i.extensions?i.extensions[Jd.KHR_TEXTURE_TRANSFORM]:void 0;if(t){const e=r.associations.get(s);s=r.extensions[Jd.KHR_TEXTURE_TRANSFORM].extendTexture(s,t),r.associations.set(s,e)}}return void 0!==n&&(s.encoding=n),t[e]=s,s}))}assignFinalMaterial(t){const e=t.geometry;let i=t.material;const n=void 0===e.attributes.tangent,r=void 0!==e.attributes.color,s=void 0===e.attributes.normal;if(t.isPoints){const t="PointsMaterial:"+i.uuid;let e=this.cache.get(t);e||(e=new m.PointsMaterial,m.Material.prototype.copy.call(e,i),e.color.copy(i.color),e.map=i.map,e.sizeAttenuation=!1,this.cache.add(t,e)),i=e}else if(t.isLine){const t="LineBasicMaterial:"+i.uuid;let e=this.cache.get(t);e||(e=new m.LineBasicMaterial,m.Material.prototype.copy.call(e,i),e.color.copy(i.color),this.cache.add(t,e)),i=e}if(n||r||s){let t="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(t+="specular-glossiness:"),n&&(t+="derivative-tangents:"),r&&(t+="vertex-colors:"),s&&(t+="flat-shading:");let e=this.cache.get(t);e||(e=i.clone(),r&&(e.vertexColors=!0),s&&(e.flatShading=!0),n&&(e.normalScale&&(e.normalScale.y*=-1),e.clearcoatNormalScale&&(e.clearcoatNormalScale.y*=-1)),this.cache.add(t,e),this.associations.set(e,this.associations.get(i))),i=e}i.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),t.material=i}getMaterialType(){return m.MeshStandardMaterial}loadMaterial(t){const e=this,i=this.json,n=this.extensions,r=i.materials[t];let s;const o={},a=r.extensions||{},h=[];if(a[Jd.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const t=n[Jd.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];s=t.getMaterialType(),h.push(t.extendParams(o,r,e))}else if(a[Jd.KHR_MATERIALS_UNLIT]){const t=n[Jd.KHR_MATERIALS_UNLIT];s=t.getMaterialType(),h.push(t.extendParams(o,r,e))}else{const i=r.pbrMetallicRoughness||{};if(o.color=new m.Color(1,1,1),o.opacity=1,Array.isArray(i.baseColorFactor)){const t=i.baseColorFactor;o.color.fromArray(t),o.opacity=t[3]}void 0!==i.baseColorTexture&&h.push(e.assignTexture(o,"map",i.baseColorTexture,m.sRGBEncoding)),o.metalness=void 0!==i.metallicFactor?i.metallicFactor:1,o.roughness=void 0!==i.roughnessFactor?i.roughnessFactor:1,void 0!==i.metallicRoughnessTexture&&(h.push(e.assignTexture(o,"metalnessMap",i.metallicRoughnessTexture)),h.push(e.assignTexture(o,"roughnessMap",i.metallicRoughnessTexture))),s=this._invokeOne((function(e){return e.getMaterialType&&e.getMaterialType(t)})),h.push(Promise.all(this._invokeAll((function(e){return e.extendMaterialParams&&e.extendMaterialParams(t,o)}))))}!0===r.doubleSided&&(o.side=m.DoubleSide);const l=r.alphaMode||Ip;if(l===Bp?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,l===Dp&&(o.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&s!==m.MeshBasicMaterial&&(h.push(e.assignTexture(o,"normalMap",r.normalTexture)),o.normalScale=new m.Vector2(1,1),void 0!==r.normalTexture.scale)){const t=r.normalTexture.scale;o.normalScale.set(t,t)}return void 0!==r.occlusionTexture&&s!==m.MeshBasicMaterial&&(h.push(e.assignTexture(o,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(o.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&s!==m.MeshBasicMaterial&&(o.emissive=(new m.Color).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&s!==m.MeshBasicMaterial&&h.push(e.assignTexture(o,"emissiveMap",r.emissiveTexture,m.sRGBEncoding)),Promise.all(h).then((function(){let i;return i=s===pp?n[Jd.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new s(o),r.name&&(i.name=r.name),Fp(i,r),e.associations.set(i,{materials:t}),r.extensions&&kp(n,i,r),i}))}createUniqueName(t){const e=m.PropertyBinding.sanitizeNodeName(t||"");let i=e;for(let t=1;this.nodeNamesUsed[i];++t)i=e+"_"+t;return this.nodeNamesUsed[i]=!0,i}loadGeometries(t){const e=this,i=this.extensions,n=this.primitiveCache;function r(t){return i[Jd.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(i){return Wp(i,t,e)}))}const s=[];for(let i=0,o=t.length;i<o;i++){const o=t[i],a=zp(o),h=n[a];if(h)s.push(h.promise);else{let t;t=o.extensions&&o.extensions[Jd.KHR_DRACO_MESH_COMPRESSION]?r(o):Wp(new m.BufferGeometry,o,e),n[a]={primitive:o,promise:t},s.push(t)}}return Promise.all(s)}loadMesh(t){const e=this,i=this.json,n=this.extensions,r=i.meshes[t],s=r.primitives,o=[];for(let t=0,e=s.length;t<e;t++){const e=void 0===s[t].material?(void 0===(a=this.cache).DefaultMaterial&&(a.DefaultMaterial=new m.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:m.FrontSide})),a.DefaultMaterial):this.getDependency("material",s[t].material);o.push(e)}var a;return o.push(e.loadGeometries(s)),Promise.all(o).then((function(i){const o=i.slice(0,i.length-1),a=i[i.length-1],h=[];for(let i=0,l=a.length;i<l;i++){const l=a[i],u=s[i];let c;const d=o[i];if(u.mode===Sp||u.mode===Ep||u.mode===Tp||void 0===u.mode)c=!0===r.isSkinnedMesh?new m.SkinnedMesh(l,d):new m.Mesh(l,d),!0!==c.isSkinnedMesh||c.geometry.attributes.skinWeight.normalized||c.normalizeSkinWeights(),u.mode===Ep?c.geometry=jp(c.geometry,m.TriangleStripDrawMode):u.mode===Tp&&(c.geometry=jp(c.geometry,m.TriangleFanDrawMode));else if(u.mode===xp)c=new m.LineSegments(l,d);else if(u.mode===bp)c=new m.Line(l,d);else if(u.mode===wp)c=new m.LineLoop(l,d);else{if(u.mode!==Ap)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);c=new m.Points(l,d)}Object.keys(c.geometry.morphAttributes).length>0&&Np(c,r),c.name=e.createUniqueName(r.name||"mesh_"+t),Fp(c,r),u.extensions&&kp(n,c,u),e.assignFinalMaterial(c),h.push(c)}for(let i=0,n=h.length;i<n;i++)e.associations.set(h[i],{meshes:t,primitives:i});if(1===h.length)return h[0];const l=new m.Group;e.associations.set(l,{meshes:t});for(let t=0,e=h.length;t<e;t++)l.add(h[t]);return l}))}loadCamera(t){let e;const i=this.json.cameras[t],n=i[i.type];if(n)return"perspective"===i.type?e=new m.PerspectiveCamera(m.MathUtils.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===i.type&&(e=new m.OrthographicCamera(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),i.name&&(e.name=this.createUniqueName(i.name)),Fp(e,i),Promise.resolve(e)}loadSkin(t){const e=this.json.skins[t],i={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(i):this.getDependency("accessor",e.inverseBindMatrices).then((function(t){return i.inverseBindMatrices=t,i}))}loadAnimation(t){const e=this.json.animations[t],i=[],n=[],r=[],s=[],o=[];for(let t=0,a=e.channels.length;t<a;t++){const a=e.channels[t],h=e.samplers[a.sampler],l=a.target,u=void 0!==l.node?l.node:l.id,c=void 0!==e.parameters?e.parameters[h.input]:h.input,d=void 0!==e.parameters?e.parameters[h.output]:h.output;i.push(this.getDependency("node",u)),n.push(this.getDependency("accessor",c)),r.push(this.getDependency("accessor",d)),s.push(h),o.push(l)}return Promise.all([Promise.all(i),Promise.all(n),Promise.all(r),Promise.all(s),Promise.all(o)]).then((function(i){const n=i[0],r=i[1],s=i[2],o=i[3],a=i[4],h=[];for(let t=0,e=n.length;t<e;t++){const e=n[t],i=r[t],l=s[t],u=o[t],c=a[t];if(void 0===e)continue;let d;switch(e.updateMatrix(),e.matrixAutoUpdate=!0,Op[c.path]){case Op.weights:d=m.NumberKeyframeTrack;break;case Op.rotation:d=m.QuaternionKeyframeTrack;break;case Op.position:case Op.scale:default:d=m.VectorKeyframeTrack}const p=e.name?e.name:e.uuid,f=void 0!==u.interpolation?Lp[u.interpolation]:m.InterpolateLinear,g=[];Op[c.path]===Op.weights?e.traverse((function(t){t.morphTargetInfluences&&g.push(t.name?t.name:t.uuid)})):g.push(p);let v=l.array;if(l.normalized){const t=Gp(v.constructor),e=new Float32Array(v.length);for(let i=0,n=v.length;i<n;i++)e[i]=v[i]*t;v=e}for(let t=0,e=g.length;t<e;t++){const e=new d(g[t]+"."+Op[c.path],i.array,v,f);"CUBICSPLINE"===u.interpolation&&(e.createInterpolant=function(t){return new(this instanceof m.QuaternionKeyframeTrack?yp:gp)(this.times,this.values,this.getValueSize()/3,t)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),h.push(e)}}const l=e.name?e.name:"animation_"+t;return new m.AnimationClip(l,void 0,h)}))}createNodeMesh(t){const e=this.json,i=this,n=e.nodes[t];return void 0===n.mesh?null:i.getDependency("mesh",n.mesh).then((function(t){const e=i._getNodeRef(i.meshCache,n.mesh,t);return void 0!==n.weights&&e.traverse((function(t){if(t.isMesh)for(let e=0,i=n.weights.length;e<i;e++)t.morphTargetInfluences[e]=n.weights[e]})),e}))}loadNode(t){const e=this.json,i=this.extensions,n=this,r=e.nodes[t],s=r.name?n.createUniqueName(r.name):"";return function(){const e=[],i=n._invokeOne((function(e){return e.createNodeMesh&&e.createNodeMesh(t)}));return i&&e.push(i),void 0!==r.camera&&e.push(n.getDependency("camera",r.camera).then((function(t){return n._getNodeRef(n.cameraCache,r.camera,t)}))),n._invokeAll((function(e){return e.createNodeAttachment&&e.createNodeAttachment(t)})).forEach((function(t){e.push(t)})),Promise.all(e)}().then((function(e){let o;if(o=!0===r.isBone?new m.Bone:e.length>1?new m.Group:1===e.length?e[0]:new m.Object3D,o!==e[0])for(let t=0,i=e.length;t<i;t++)o.add(e[t]);if(r.name&&(o.userData.name=r.name,o.name=s),Fp(o,r),r.extensions&&kp(i,o,r),void 0!==r.matrix){const t=new m.Matrix4;t.fromArray(r.matrix),o.applyMatrix4(t)}else void 0!==r.translation&&o.position.fromArray(r.translation),void 0!==r.rotation&&o.quaternion.fromArray(r.rotation),void 0!==r.scale&&o.scale.fromArray(r.scale);return n.associations.has(o)||n.associations.set(o,{}),n.associations.get(o).nodes=t,o}))}loadScene(t){const e=this.json,i=this.extensions,n=this.json.scenes[t],r=this,s=new m.Group;n.name&&(s.name=r.createUniqueName(n.name)),Fp(s,n),n.extensions&&kp(i,s,n);const o=n.nodes||[],a=[];for(let t=0,i=o.length;t<i;t++)a.push(Hp(o[t],s,e,r));return Promise.all(a).then((function(){return r.associations=(t=>{const e=new Map;for(const[t,i]of r.associations)(t instanceof m.Material||t instanceof m.Texture)&&e.set(t,i);return t.traverse(t=>{const i=r.associations.get(t);null!=i&&e.set(t,i)}),e})(s),s}))}}function Hp(t,e,i,n){const r=i.nodes[t];return n.getDependency("node",t).then((function(t){if(void 0===r.skin)return t;let e;return n.getDependency("skin",r.skin).then((function(t){e=t;const i=[];for(let t=0,r=e.joints.length;t<r;t++)i.push(n.getDependency("node",e.joints[t]));return Promise.all(i)})).then((function(i){return t.traverse((function(t){if(!t.isMesh)return;const n=[],r=[];for(let t=0,s=i.length;t<s;t++){const s=i[t];if(s){n.push(s);const i=new m.Matrix4;void 0!==e.inverseBindMatrices&&i.fromArray(e.inverseBindMatrices.array,16*t),r.push(i)}}t.bind(new m.Skeleton(n,r),t.matrixWorld)})),t}))})).then((function(t){e.add(t);const s=[];if(r.children){const e=r.children;for(let r=0,o=e.length;r<o;r++){const o=e[r];s.push(Hp(o,t,i,n))}}return Promise.all(s)}))}function Wp(t,e,i){const n=e.attributes,r=[];function s(e,n){return i.getDependency("accessor",e).then((function(e){t.setAttribute(n,e)}))}for(const e in n){const i=Rp[e]||e.toLowerCase();i in t.attributes||r.push(s(n[e],i))}if(void 0!==e.indices&&!t.index){const n=i.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));r.push(n)}return Fp(t,e),function(t,e,i){const n=e.attributes,r=new m.Box3;if(void 0===n.POSITION)return;{const t=i.json.accessors[n.POSITION],e=t.min,s=t.max;if(void 0===e||void 0===s)return;if(r.set(new m.Vector3(e[0],e[1],e[2]),new m.Vector3(s[0],s[1],s[2])),t.normalized){const e=Gp(_p[t.componentType]);r.min.multiplyScalar(e),r.max.multiplyScalar(e)}}const s=e.targets;if(void 0!==s){const t=new m.Vector3,e=new m.Vector3;for(let n=0,r=s.length;n<r;n++){const r=s[n];if(void 0!==r.POSITION){const n=i.json.accessors[r.POSITION],s=n.min,o=n.max;if(void 0!==s&&void 0!==o){if(e.setX(Math.max(Math.abs(s[0]),Math.abs(o[0]))),e.setY(Math.max(Math.abs(s[1]),Math.abs(o[1]))),e.setZ(Math.max(Math.abs(s[2]),Math.abs(o[2]))),n.normalized){const t=Gp(_p[n.componentType]);e.multiplyScalar(t)}t.max(e)}}}r.expandByVector(t)}t.boundingBox=r;const o=new m.Sphere;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=o}(t,e,i),Promise.all(r).then((function(){return void 0!==e.targets?function(t,e,i){let n=!1,r=!1,s=!1;for(let t=0,i=e.length;t<i;t++){const i=e[t];if(void 0!==i.POSITION&&(n=!0),void 0!==i.NORMAL&&(r=!0),void 0!==i.COLOR_0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(t);const o=[],a=[],h=[];for(let l=0,u=e.length;l<u;l++){const u=e[l];if(n){const e=void 0!==u.POSITION?i.getDependency("accessor",u.POSITION):t.attributes.position;o.push(e)}if(r){const e=void 0!==u.NORMAL?i.getDependency("accessor",u.NORMAL):t.attributes.normal;a.push(e)}if(s){const e=void 0!==u.COLOR_0?i.getDependency("accessor",u.COLOR_0):t.attributes.color;h.push(e)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(h)]).then((function(e){const i=e[0],o=e[1],a=e[2];return n&&(t.morphAttributes.position=i),r&&(t.morphAttributes.normal=o),s&&(t.morphAttributes.color=a),t.morphTargetsRelative=!0,t}))}(t,e.targets,i):t}))}function jp(t,e){let i=t.getIndex();if(null===i){const e=[],n=t.getAttribute("position");if(void 0===n)return t;for(let t=0;t<n.count;t++)e.push(t);t.setIndex(e),i=t.getIndex()}const n=i.count-2,r=[];if(e===m.TriangleFanDrawMode)for(let t=1;t<=n;t++)r.push(i.getX(0)),r.push(i.getX(t)),r.push(i.getX(t+1));else for(let t=0;t<n;t++)t%2==0?(r.push(i.getX(t)),r.push(i.getX(t+1)),r.push(i.getX(t+2))):(r.push(i.getX(t+2)),r.push(i.getX(t+1)),r.push(i.getX(t)));r.length;const s=t.clone();return s.setIndex(r),s}function Yp(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Xp,qp=new Xd,Jp=new m.TextureLoader,Qp=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,n=[{key:"loadTextures",value:function(t,e){0==t.length&&e(),E.textures||(E.textures={});var i=0;t.forEach((function(n,r){Jp.load(n.path,(function(r){n.map=r,E.textures[n.name]=r,++i>=t.length&&e()}),void 0,(function(t){}))}))}},{key:"loadModels",value:function(t,e){0==t.length&&e(),E.models||(E.models={});var i=0;t.forEach((function(n,r){qp.load(n.path,(function(r){n.model=r,E.models[n.name]=r,++i>=t.length&&e()}),(function(t){}),(function(t){}))}))}}],(i=null)&&Yp(e.prototype,i),n&&Yp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Kp(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return Zp(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Zp(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw s}}}}function Zp(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function $p(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var tf=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Xp=E.phaserScene.tweens,this.curObjects=[],xa.initWorld(),te.initCannon(CANNON,xa.world),E.curScore=E.lastScore||0,this.init(),E.cameraTarget=this.chisel,setTimeout((function(){Qp.loadModels([{name:"confetti",path:"https://cdn.jsdelivr.net/gh/my-files-schoolum/spi@main/assets/models/confetti2/scene.gltf"}],(function(){E.models.confetti.scene.traverse((function(t){t.material&&(t.material.side=THREE.DoubleSide)}))}))}),500),window.oncontextmenu=function(t){t.preventDefault()};var e=new Na(0),i=new Na(1),n=new Na(2);e.addPoint(1),i.addPoint(1),n.addPoint(1),e.children[0].frustumCulled=!1,i.children[0].frustumCulled=!1,n.children[0].frustumCulled=!1}var e,i,n;return e=t,(i=[{key:"init",value:function(){var t=this,e=new lu;this.ui=e,E.ui=e,e.initSettings(),e.hideLevelCont(),this.initLights(),this.assetManager=new Al;var i=new nh;this.chisel=i,E.chisel=i,E.threeScene.add(i),this.initEnv(),this.initCamera(),this.initInstancedMeshes(),this.initGlobalFunctions(),this.initParticles();var n=new Hl;this.scoreArea=n,n.changeScoreAreaType(1),n.setZ(200),E.scoreArea=n,n.hide(),0==E.levelNo?(this.levelStartZ=0,this.state=1,i.position.z=-80,this.initEndlessWoods(),e.initTutorial(),e.hideTopBar()):(e.initMenu(),i.position.z=-50,this.state=0,this.levelStartZ=i.position.z,E.levelNo>1&&(this.levelStartZ-=30),this.initLevel(),E.phaserScene.input.once("pointerdown",(function(){t.changeState(2)})))}},{key:"updateWaitingObjects",value:function(t){var e=this,i=function(i){var n=new Ut(i.z,i.hasFrontCap,i.hasEndCap,i.type);return E.woodList.push(n),i.hasWalls&&n.addWall(i.z),t||(n.position.y-=20,E.tweens.add({targets:n.position,y:n.position.y+20,duration:500,ease:"Sine.easeInOut"})),e.curObjects.push(n),n};if(0!=E.levelNo){if(this.waitingObjects){var n=this.waitingObjects[0];if(n){var r;n.z>this.chisel.position.z-200&&((r="wood"==n.name?i(n):function(i){var n,r=i.z,s=i.loc,o=i.name;return"wall_area"==o?n=new yu(r):"wall_circle_and_coin_area"==o?n=new Mu(r):"wall_single_area"==o?n=new ku(r):"tree_obstacle_area"==o?n=new ju(r):"iron_obstacle"==o?n=new tc(r):"basket_area"==o?n=new lc(r,s):"basket_ring_vertical"==o?n=new Fd(r,s):"saw"==o?n=new yc(r,s):"obstacle_saw"==o?n=new Mc(r,!0):"obstacle_dots"==o?n=new Mc(r,!1):"loot_box"==o?n=new md(r,!1):"loot_box_big"==o?n=new Cd(r,!1):"coins_jump_area"==o?n=new Yd(r,"coins_jump_area",s):"coin_area"==o&&(n=new Yd(r,"coin_area",s)),t||(n.position.y-=20,E.tweens.add({targets:n.position,y:n.position.y+20,duration:500,ease:"Sine.easeInOut"})),e.curObjects.push(n),n}(n)).dt=n,this.waitingObjects.shift(),this.lastObj=r,this.lastObjZ=n.z)}else{var s,o=this.lastObj.length||30,a=this.lastObjZ-o-30,h=[],l=Kp(this.tempWaitingObjects);try{for(l.s();!(s=l.n()).done;){var u=s.value;"wood"==u.name?h.push({z:u.z,name:"wood",type:u.type,hasWalls:u.hasWalls,hasFrontCap:u.hasFrontCap,hasEndCap:u.hasEndCap}):h.push({z:u.z,loc:u.loc,name:u.name})}}catch(t){l.e(t)}finally{l.f()}h.forEach((function(t){t.z+=a,e.waitingObjects.push(t)}))}}}else if(2==this.state){var c=E.woodList[E.woodList.length-1];if(c&&c.position.z+100>this.chisel.position.z){var d=i({z:c.position.z-E.trunkWidth,hasFrontCap:!1,hasEndCap:!1,hasWalls:!1,type:0});this.lastObj=d,this.lastObjZ=d.position.z}}}},{key:"initInstancedMeshes",value:function(){var t=E.wallCube.geometry.clone();E.brickController=new qc(t,E.wallCube.material,1500),E.brickController.initBodyData(E.brickDim);var e=E.coinModel.geometry;E.coinController=new Nc(e,E.coinModel.material,500),E.coinController.initBodyData({x:2,y:2,z:.3}),E.goldCollectedCallback=function(t){var e=t.body;e&&(E.sendGoldParticles(t.pos),E.playSfx("coin"),E.vibrateOn&&window.H5SDK&&H5SDK.performHapticFeedBack(30),Xp.add({targets:t.pos,x:5,y:40,z:t.pos.z-200,duration:1500,ease:"Sine.easeInOut",onComplete:function(){t.pos.x=0,t.pos.y=0,t.pos.z=0}}),setTimeout((function(){xa.world.remove(e)}),1),t.body=null)},E.goldCollectedEvent=function(t){if("chisel"==t.body.label||"spiral"==t.body.label){t.target.removeEventListener("collide",E.goldCollectedEvent);var e=t.target.item;E.goldCollectedCallback(e)}}}},{key:"initGlobalFunctions",value:function(){var t=this,e=this.ui,i=this.chisel;E.woodCarved=function(e){1==t.state&&t.changeState(2)},this.confettiList=[],E.sendConfetti=function(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;i=i||E.threeScene;var s=E.models.confetti.scene.clone();s.scale.multiplyScalar(220*r);var o=E.models.confetti.animations[0];s.rotation.x=n;var a=new m.AnimationMixer;a.timeScale=1.15;var h=a.clipAction(o,s);h.clampWhenFinished=!0,h.repetitions=0,h.play(),i.add(s),s.position.copy(e);var l={model:s,mixer:a,clip:h};t.confettiList.push(l),a.addEventListener("finished",(function(e){i.remove(s),t.confettiList.splice(t.confettiList.indexOf(l),1)}))},E.changeLevel=function(e){e&&(t.curBgColorNo||(t.curBgColorNo=0),t.curBgColorNo++,t.curBgColorNo>2&&(t.curBgColorNo=0,E.changeBackgroundColor())),t.levelStartZ=i.position.z-100,e||(t.levelStartZ=i.position.z-50),t.initLevel(),t.scoreArea.sinkIntoSea(),i.scrapSpiral&&(i.scrapSpiral.body.collisionResponse=!1),E.phaserScene.time.delayedCall(1e3,(function(){t.changeState(2),i.changeState(0),i.speedUp()}))},E.endLevel=function(i){t.gameEnded||(t.gameEnded=!0,window.H5SDK&&H5SDK.notifyLevelEnd(E.levelNo+1,Math.round(E.curScore),i),E.curScore=Math.round(E.curScore),i?(E.lastScore=E.curScore,E.levelNo++):E.lastScore=0,E.curScore,E.bestScore,E.bestScore=Math.max(E.bestScore,E.curScore),E.saveGame(),i?H5SDK.requestInterstitialAd().then((function(){H5SDK.getPlatform().isFacebook()?E.showFacebookTournament((function(){e.endGame(i)})):e.endGame(i)})):e.endGame(i))},E.sendScoreTexts=function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,n=function(n){setTimeout((function(){var i=e[n],r=E.scoreTexts[t].clone();r.position.set(i.x,i.y,i.z),E.threeScene.add(r),r.material=r.material.clone(),r.scale.multiplyScalar(6),E.tweens.add({targets:r.material,opacity:0,delay:400,duration:700}),E.tweens.add({targets:r.position,y:r.position.y+5,duration:1150,ease:"Sine.easeInOut",onComplete:function(){r.material.dispose(),E.threeScene.remove(r)}});var s=Number(t);E.curScore+=s,E.ui.updateScore(E.curScore)}),Math.random()*i)},r=0;r<e.length;r++)n(r)},E.reviveWithRewarded=function(){i.resetOnRestart(),t.gameEnded=!1,t.changeState(2),i.changeState(0),i.speedUp(),i.immuneTime=60}}},{key:"initCamera",value:function(){var t=this;this.cameraOffset={x:14.065002861655412,y:19.023152461409193,z:30.403048215430914},this.cameraRotation={x:-.5140878052063862,y:.3868508020222184,z:.20992190478461276},this.cameraOffset={x:0,y:0,z:0},this.cameraRotation={x:0,y:0,z:0};var e=new THREE.Object3D;this.camObj=e,e.add(E.threeCamera),E.threeScene.add(e),e.rotation.x=-25*Math.PI/180,e.rotation.y=20*Math.PI/180,E.threeCamera.position.z=60,e.rotation.order="YXZ",E.threeCamera.rotation.x=this.cameraRotation.x,E.threeCamera.rotation.y=this.cameraRotation.y,E.threeCamera.rotation.z=this.cameraRotation.z,E.getCameraData=function(){var e=t.chisel,i={offset:{x:E.threeCamera.position.x-e.position.x,y:E.threeCamera.position.y-e.position.y,z:E.threeCamera.position.z-e.position.z},rotData:{x:E.threeCamera.rotation.x,y:E.threeCamera.rotation.y,z:E.threeCamera.rotation.z},fov:E.threeCamera.fov};return JSON.stringify(i)}}},{key:"initLevel",value:function(){var t=this;window.H5SDK&&H5SDK.notifyLevelStart(E.levelNo+1);var e=E.levelNo,i=E.levelNo%10;E.levelNo>=10&&(e=2+(E.levelNo-10)%7),this.gameEnded=!1;var n=E.brickColors[i]||0,r=E.brickModels[n];if(E.brickController.instancedMesh.geometry=r.geometry,E.levelNo>0&&this.ui.showTopBar(),this.curProgress=0,this.totalProgress=200+20*E.levelNo,0==E.levelNo?this.totalProgress=50:1==E.levelNo&&(this.totalProgress=70),this.chisel.prevZ=null,this.ui.updateBarFill(0),this.confettiList){var s,o=Kp(this.confettiList);try{for(o.s();!(s=o.n()).done;){var a=s.value;E.threeScene.remove(a.model)}}catch(t){o.e(t)}finally{o.f()}this.confettiList=[]}this.canPlayFinishSound=!1,E.cameraTarget=this.chisel;var h,l=i>=5?1:0;if(this.changeSide(l),this.firstTimeStarted){for(var u=E.threeScene.children.length-1;u>=0;u--){var c=E.threeScene.children[u];c.clearOnLevelEnd&&c.clearOnLevelEnd()}E.brickController.clear(),E.coinController.clear(),this.chisel.windInstanced.clear(),E.woodList=[],this.ui.hideSettings()}if(this.firstTimeStarted=!0,this.chisel.resetOnRestart(),E.levelNo>1){var d=E.levelLocatorData[e].clone();h={woods:[],objects:[],scoreArea:{z:-250}};var p,f=Kp(d.children);try{for(f.s();!(p=f.n()).done;){var m=p.value,g=m.name.indexOf("_s")>=0,v=m.name.indexOf("_e")>=0;m.name.indexOf("_b")>=0&&(g=!0,v=!0),m.name.indexOf("trunk_locator")>=0?h.woods.push({z:m.position.z,num:1,type:0,hasStart:g,hasEnd:v}):m.name.indexOf("trunk_wall_locator")>=0?h.woods.push({z:m.position.z,num:1,type:0,hasWalls:!0,hasStart:g,hasEnd:v}):m.name.indexOf("gold_ingot_locator")>=0?h.woods.push({z:m.position.z,num:1,type:2,hasWalls:!1,hasStart:g,hasEnd:v}):m.name.indexOf("wall_area_locator")>=0?h.objects.push({z:m.position.z,name:"wall_area"}):m.name.indexOf("wall_circle_and_coin_area_locator")>=0?h.objects.push({z:m.position.z,name:"wall_circle_and_coin_area"}):m.name.indexOf("wall_single_area")>=0?h.objects.push({z:m.position.z,name:"wall_single_area"}):m.name.indexOf("loot_box")>=0?h.objects.push({z:m.position.z,name:"loot_box"}):m.name.indexOf("loot_box_big")>=0?h.objects.push({z:m.position.z,name:"loot_box_big"}):m.name.indexOf("tree_obstacle_area")>=0?h.objects.push({z:m.position.z,name:"tree_obstacle_area"}):m.name.indexOf("iron_obstacle")>=0?h.objects.push({z:m.position.z,name:"iron_obstacle"}):m.name.indexOf("basket_area")>=0?h.objects.push({z:m.position.z,name:"basket_area",loc:m}):m.name.indexOf("basket_ring_vertical")>=0?h.objects.push({z:m.position.z,name:"basket_ring_vertical"}):m.name.indexOf("coins_jump_area")>=0?h.objects.push({z:m.position.z,name:"coins_jump_area",loc:m}):m.name.indexOf("coin_area")>=0?h.objects.push({z:m.position.z,name:"coin_area",loc:m}):m.name.indexOf("saw")>=0?h.objects.push({z:m.position.z,name:"saw",loc:m}):m.name.indexOf("obstacle_dots")>=0?h.objects.push({z:m.position.z,name:"obstacle_dots",loc:m}):m.name.indexOf("obstacle_saw")>=0?h.objects.push({z:m.position.z,name:"obstacle_saw",loc:m}):m.name.indexOf("score_area_locator")>=0&&(h.scoreArea.z=m.position.z)}}catch(t){f.e(t)}finally{f.f()}}else h=Yl.getLevelData(E.levelNo);var y=h.woods,A=h.objects,x=[];this.waitingObjects=x;var w,b=Kp(y);try{for(b.s();!(w=b.n()).done;){var S=w.value,T=S.z+this.levelStartZ;if(S.isOldSchool){var _=S.num||1,M=S.type||0,C=S.hasWalls||!1;0==M&&i>=5&&(M=1);for(var P=0;P<_;P++){var R=T-P*E.trunkWidth;x.push({name:"wood",z:R,hasFrontCap:0==P,hasEndCap:P==_-1,type:M,hasWalls:C})}}else{var O=S.type||0;0==O&&i>=5&&(O=1),x.push({name:"wood",z:T,hasFrontCap:S.hasStart,hasEndCap:S.hasEnd,type:O,hasWalls:S.hasWalls})}}}catch(t){b.e(t)}finally{b.f()}E.woodList=E.woodList.sort((function(t,e){return e.position.z-t.position.z}));var L,I=Kp(A);try{for(I.s();!(L=I.n()).done;){var D=L.value,B=D.z+this.levelStartZ,k=D.loc,F=D.name;x.push({name:F,z:B,loc:k})}}catch(t){I.e(t)}finally{I.f()}x=x.sort((function(t,e){return e.z-t.z})),this.tempWaitingObjects=[];var N,z=Kp(x);try{for(z.s();!(N=z.n()).done;){var U=N.value;"wood"==U.name?this.tempWaitingObjects.push({z:U.z-this.levelStartZ,name:"wood",type:U.type,hasWalls:U.hasWalls,hasFrontCap:U.hasFrontCap,hasEndCap:U.hasEndCap}):this.tempWaitingObjects.push({z:U.z-this.levelStartZ,loc:U.loc,name:U.name})}}catch(t){z.e(t)}finally{z.f()}this.curObjects=[];for(var G=0;G<10;G++)this.updateWaitingObjects();this.initLevelScoreArea=function(){var e=E.woodList.find((function(t){return t.isScrapPlane}));e&&E.woodList.splice(E.woodList.indexOf(e),1),h.scoreArea,t.scoreArea.scrapObj.resetVertexPositions(),t.scoreArea.setZ(t.scoreZ),t.scoreArea.showFromSea(),t.scoreArea.changeState(0),E.woodList.push(t.scoreArea.scrapObj),t.canPlayFinishSound=!0},E.coinController.addItem({x:0,y:-50,z:this.chisel.position.z-1500}),E.brickController.addItem({x:0,y:-50,z:this.chisel.position.z-1500})}},{key:"changeState",value:function(t){if(t!=this.state&&(this.prevState=this.state,this.state=t,2==t&&(this.ui.hideSettings(),this.ui.showLevelCont(),this.ui.hideMenu&&this.ui.hideMenu(),1==this.prevState))){var e=E.woodList[E.woodList.length-1];e.hasEndCap=!0;var i=e.tempEndCap;i.tempParent.add(i),e.endCap=i,this.levelStartZ=e.position.z-100,this.initLevel(),this.scoreZ=e.position.z-100,this.initLevelScoreArea(),this.levelStartZ=this.chisel.position.z,E.levelNo>1&&this.scoreArea.changeScoreAreaType()}}},{key:"initEndlessWoods",value:function(){this.endlessWoods=[];for(var t=0;t<7;t++){var e=0==t,i=-50-E.trunkWidth*t,n=new Ut(i,e,!1);E.woodList.push(n),this.endlessWoods.push(n),n.position.y-=5,E.phaserScene.tweens.add({targets:n.position,y:n.position.y+5,duration:350,ease:"Sine.easeOut"})}}},{key:"updateCamera",value:function(){if(!E.main.isTest){var t=E.threeCamera,e=E.cameraTarget;if(e){var i=e==this.chisel?0:e.position.y;i=Math.max(i,0),this.camObj.position.set(this.cameraOffset.x,this.cameraOffset.y+i,e.position.z+this.cameraOffset.z),e.isScrapSpiral&&(t.position.z=Math.max(t.position.z,E.scoreArea.position.z-30*E.scoreAreaScale))}E.camZ=this.camObj.position.z+40,this.camObj.position.z+50<this.side0.position.z-this.terrainDif&&(this.side0.position.z-=2*this.terrainDif),this.camObj.position.z+50<this.side1.position.z-this.terrainDif&&(this.side1.position.z-=2*this.terrainDif),this.water0.position.z=this.side0.position.z,this.water1.position.z=this.side1.position.z}}},{key:"update",value:function(t,e){if(!this.scoreArea.onSurface)if(this.updateWaitingObjects(),this.chisel.isCarving){if(this.chisel.prevZ){var i=this.chisel.prevZ-this.chisel.position.z;this.curProgress+=i;var n=this.curProgress/this.totalProgress;if(n>1){var r=E.woodList[E.woodList.length-1];r.hasEndCap||(r.hasEndCap=!0,r.endCap=r.tempEndCap,r.endCap.tempParent.add(r.endCap)),n=1,this.scoreZ=this.lastObjZ-100,this.initLevelScoreArea()}this.ui.updateBarFill(n)}this.chisel.prevZ=this.chisel.position.z}else this.chisel.prevZ=null;var s=this.curObjects[0];s&&s.position.z-90>this.chisel.position.z&&(this.curObjects.shift(),s.clearOnLevelEnd&&s.clearOnLevelEnd());var o,a=Kp(this.confettiList);try{for(a.s();!(o=a.n()).done;)o.value.mixer.update(t)}catch(t){a.e(t)}finally{a.f()}if(this.particleGroups.forEach((function(e){e.tick(t)})),E.brickController.update(t,e),E.coinController.update(t,e),E.coinController.dummy.rotation.y+=.1,this.canPlayFinishSound&&this.chisel.position.z<this.scoreArea.position.z-10&&(this.canPlayFinishSound=!1,E.playSfx("finish_area")),this.chisel.bonusActive&&this.scoreArea.onSurface&&this.chisel.position.z<this.scoreArea.position.z+10&&this.chisel.turnOffBonus(),E.stopGame)this.updateCamera();else{this.state>0&&this.chisel&&this.chisel.update(t,e),this.updateCamera(),this.scoreArea.onSurface&&!this.chisel.spiral&&this.chisel.position.z<this.scoreArea.position.z-42*E.scoreAreaScale&&this.chisel.changeState(3),xa.debugRenderer&&xa.debugRenderer.update(),xa.world&&xa.world.step(t);for(var h=E.seaLevel,l=0;l<E.objects.length;l++){var u=E.objects[l];if(u.position.z>E.camZ+40)u.body&&E.cannonPhysics.world.remove(u.body),u.body=null,E.objects.splice(l,1),u.parent.remove(u),u==this.chisel.scrapSpiral&&(this.chisel.scrapSpiral=null);else if(u.body){var c=u.body;if(u.position.copy(u.body.position),u.quaternion.copy(u.body.quaternion),"chisel_part"==u.type)continue;if(u.isScrapSpiral||"chisel"==c.label||this.scoreArea.onSurface&&c.position.z<this.scoreArea.position.z-5&&(c.side||(c.side=Math.random()>.5?1:-1),c.velocity.y<30&&(c.velocity.y+=1)),u.sinkInWater&&(c.angularVelocity.x*=.9,c.angularVelocity.y*=.9,c.angularVelocity.z*=.9,c.quaternion.slerp(new CANNON.Quaternion(0,0,.7071067811865475,.707),.01,c.quaternion)),c.position.y<h){var d=h-c.position.y;c.velocity.y+=.1*d,c.velocity.z*=.97,c.velocity.x*=.97,u.sinkInWater=!0,u.cameBackToSurface&&(c.velocity.y*=.99)}else u.sinkInWater&&(c.velocity.y*=.95,u.cameBackToSurface=!0)}}1==this.state&&this.updateEndlessWoods();for(var p=this.state>0,f=0;f<this.movingTrunkList.length;f++){var m=this.movingTrunkList[f];m.position.z-=.1,p?m.position.z>E.camZ+40&&(m.position.z-=600):m.position.z<E.camZ-500&&(m.position.z+=500)}}}},{key:"updateEndlessWoods",value:function(){for(var t=0;t<this.endlessWoods.length;t++){var e=this.endlessWoods[t];if(e.position.z>E.camZ+30){var i=e.position.z;e.position.z=this.endlessWoods[this.endlessWoods.length-1].position.z-E.trunkWidth,e.frontCap&&(e.frontCap.visible=!1),e.resetVertexPositions();var n=e.position.z-i;e.body.position.z+=n,this.endlessWoods=this.endlessWoods.sort((function(t,e){return e.position.z-t.position.z})),E.woodList=[],this.endlessWoods.forEach((function(t){E.woodList.push(t)})),e.position.y-=4,e.body.position.y-=4,E.phaserScene.tweens.add({targets:e.position,y:e.position.y+4,duration:350,ease:"Back"}),E.phaserScene.tweens.add({targets:e.body.position,y:e.body.position.y+4,duration:350,ease:"Back"})}}}},{key:"initEnv",value:function(){var t=this;this.terrainDif=10*E.sideTerrainWidth*2,this.water0=this.initWater(this.terrainDif),this.water1=this.initWater(this.terrainDif);var e=new m.Object3D,i=new m.Object3D,n=-1;this.side0=e,this.side1=i,this.changeSide=function(s){n!=s&&(n=s,e&&(E.threeScene.remove(e),E.threeScene.remove(i)),0==s?(e=E.firstSide.clone(),i=E.firstSide.clone()):1==s&&(e=E.secondSide.clone(),i=E.secondSide.clone()),E.threeScene.add(e),E.threeScene.add(i),e.scale.multiplyScalar(2),i.scale.multiplyScalar(2),t.side0=e,t.side1=i,e.position.x=20,e.position.y=1.4,i.position.x=e.position.x,i.position.y=e.position.y,i.position.z-=t.terrainDif,E.lowQuality?(E.threeScene.remove(e),E.threeScene.remove(i)):(r[0].defMap||(r[0].defMap=r[0].material.map),r[0].material.map=0==s?r[0].defMap:t.assetManager.levelMatList.second_terrain_mat.map))};var r=[];if(this.movingTrunkList=r,!E.lowQuality){for(var s=E.trunk_swim.children,o=s.length-1;o>=0;o--){var a=s[o];r.push(a),E.threeScene.attach(a),a.position.x=20*Math.random()-35,a.position.z=-100-o*(70+10*Math.random()),Xp.add({targets:a.position,y:a.position.y-.3,duration:1e3,ease:"Sine.easeInOut",delay:Math.round(1e3*Math.random()),yoyo:!0,repeat:-1})}this.changeSide(0)}}},{key:"initWater",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,e=E.textures.water_texture_color;e.wrapS=1e3,e.wrapT=1e3,e.repeat.x=80,e.repeat.y=160*t/2e3,e.encoding=3001;var i=new m.MeshBasicMaterial({map:e,transparent:!0,opacity:.85,depthWrite:!1,roughness:1});E.lowQuality&&(i.transparent=!1,i.depthWrite=!0);var n=new m.Mesh(new m.PlaneBufferGeometry(1e3,t),i);return n.geometry.translate(0,t/2,0),n.renderOrder=99,n.rotation.x=-Math.PI/2,n.position.y=E.seaLevel,n.position.z-=900,E.threeScene.add(n),n}},{key:"initLights",value:function(){var t=new m.AmbientLight(16774358,.6);E.threeScene.add(t);var e=new m.DirectionalLight(16774358,1.3);e.position.set(.2,3,0),E.threeScene.add(e),this.ambientLight=t,this.dirLight=e}},{key:"initDatGUI",value:function(){var t=this,e=new ml,i={opacity:1,ambColor:{r:255,g:255,b:255},dirColor:{r:255,g:255,b:255},gammaFactor:2.2,fov:70},n=e.addFolder("Ambient Light");n.add(this.ambientLight,"intensity",0,3).step(.01),n.addColor(i,"ambColor").onChange((function(e){t.ambientLight.color.r=e.r/255,t.ambientLight.color.g=e.g/255,t.ambientLight.color.b=e.b/255}));var r=e.addFolder("Directional Light");r.add(this.dirLight,"intensity",0,3).step(.01),r.addColor(i,"dirColor").onChange((function(e){t.dirLight.color.r=e.r/255,t.dirLight.color.g=e.g/255,t.dirLight.color.b=e.b/255})),r.add(this.dirLight.position,"x",-50,50).step(.01),r.add(this.dirLight.position,"y",-50,50).step(.01),r.add(this.dirLight.position,"z",-50,50).step(.01);var s=e.addFolder("Camera Location");s.add(this.cameraOffset,"x",-20,40).step(.1),s.add(this.cameraOffset,"y",-20,40).step(.1),s.add(this.cameraOffset,"z",-20,60).step(.1);var o=function(){E.threeCamera.rotation.x=t.cameraRotation.x,E.threeCamera.rotation.y=t.cameraRotation.y,E.threeCamera.rotation.z=t.cameraRotation.z},a=e.addFolder("Camera Rotation/FOV");a.add(this.cameraRotation,"x",0,2*Math.PI).step(.01).onChange((function(t){o()})),a.add(this.cameraRotation,"y",0,2*Math.PI).step(.01).onChange((function(t){o()})),a.add(this.cameraRotation,"z",0,2*Math.PI).step(.01).onChange((function(t){o()})),a.add(i,"fov",0,160).step(.1).onChange((function(t){E.threeCamera.fov=t,E.threeCamera.updateProjectionMatrix()}));var h=e.addFolder("Misc");h.add(this.chisel,"speed",0,3).step(.01).onChange((function(e){t.chisel.carveSpeed=e})),n.open(),r.open(),s.open(),a.open(),h.open(),setTimeout((function(){document.getElementsByClassName("dg ac")[0].style.zIndex="999"}),500)}},{key:"initWater2",value:function(){var t=E.textures.water_texture_color,e=new THREE.PlaneGeometry(1e4,1e4);t.wrapS=1e3,t.wrapT=1e3,t.repeat.x=80,t.repeat.y=160;var i=new xl(e,{textureWidth:512,textureHeight:512,waterNormals:t,sunDirection:new THREE.Vector3,sunColor:16777215,waterColor:4358655,distortionScale:1,fog:E.threeScene.fog});i.rotation.x=-Math.PI/2,i.position.y=E.seaLevel,i.material.transparent=!0,i.material.opacity=.5,E.threeScene.add(i)}},{key:"initParticles",value:function(){var t=this;this.particleGroups=[],function(){var e=E.textures.ring;e.minFilter=THREE.NearestFilter,e.magFilter=THREE.NearestFilter,e.encoding=3001;for(var i=new Ua.a.Group({texture:{value:e},blending:1,maxParticleCount:1e3}),n=[],r=0;r<5;r++){var s=new Ua.a.Emitter({maxAge:{value:.7},position:{value:new m.Vector3(0,10,0),spread:new THREE.Vector3(0,0,0)},size:{value:[0,20],spread:0},opacity:{value:[1,1,1,0]},color:{value:new THREE.Color(14087515)},particleCount:60,activeMultiplier:1});s.disable(),i.addEmitter(s),n.push(s)}i.mesh.frustumCulled=!1,i.mesh.renderOrder=110,E.threeScene.add(i.mesh),i.mesh.fog=!1,t.particleGroups.push(i);var o=0;E.sendGoldParticles=function(t){i.mesh.visible=!0;var e=n[o];e.position.value.copy(t),e.updateFlags.position=!0,e.resetFlags.position=!0,e.sendParticles(.02),++o>4&&(o=0)}}()}}])&&$p(e.prototype,i),n&&$p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),ef=i(2);function nf(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var rf=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"initTempFunctions",value:function(){globals.playSfx=function(){},globals.stopSfx=function(){},globals.playMusic=function(){},globals.stopMusic=function(){},globals.playMenuMusic=function(){},globals.stopMenuMusic=function(){}}},{key:"initDefault",value:function(){if(!this.isDefaultInited){this.isDefaultInited=!0;var t={},e=i(8).spritemap,n=i(9);for(var r in e){var s=e[r],o=1e3*s.start,a=Math.ceil(1e3*s.end-o),h=s.loop;t[r]=[o,a,h]}var l=new ef.Howl({src:[n],sprite:t,volume:1});globals.playSfx=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;l.volume(e);var n=l.play(t);return l.rate(i,n),n},globals.stopSfx=function(t){l.stop(t)}}}}],(n=null)&&nf(e.prototype,n),r&&nf(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function sf(t,e,i,n,r,s,o){try{var a=t[s](o),h=a.value}catch(t){return void i(t)}a.done?e(h):Promise.resolve(h).then(n,r)}function of(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var s=t.apply(e,i);function o(t){sf(s,n,r,o,a,"next",t)}function a(t){sf(s,n,r,o,a,"throw",t)}o(void 0)}))}}E.lowQuality=!1,of(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:e=t.sent,E.gpuTier=e,e.tier<=2&&e.isMobile&&(E.lowQuality=!0);case 5:case"end":return t.stop()}}),t)})))(),rf.initTempFunctions(),rf.initDefault(),E.main={};for(var af,hf=0,lf=4,uf=function t(e){af||("phaser"==e&&(ff.initPreloader(t),lf++),hf++,window.addEventListener("resize",gf),gf(),hf>=lf&&(af=new tf,requestAnimationFrame(yf),setTimeout((function(){ff.removePreloader()}),1)))},cf=0,df=[{key:"calibri",src:"https://cdn.jsdelivr.net/gh/my-files-schoolum/spi@main/assets/fonts/calibri.woff"},{key:"mashup",src:"https://cdn.jsdelivr.net/gh/my-files-schoolum/spi@main/assets/fonts/mashup.woff2"}];cf<df.length;cf++){var pf=df[cf];new FontFace(pf.key,"url(".concat(pf.src,")")).load().then((function(t){document.fonts.add(t),callback()})).catch((function(t){return t}))}var ff,mf,gf=function(){var t=window.innerWidth,e=window.innerHeight;mf.resize(t,e),ff.resize(t,e)},vf=new m.Clock(!0),yf=function t(){var e=vf.getDelta(),i=60*(e=e>.03?.03:e);requestAnimationFrame(t),af.update(e,i),mf.update(e,i)},Af=function(){window.Howler&&Howler.mute(!0)},xf=function(){window.Howler&&Howler.mute(!1)},wf=window.H5SDK;function bf(){return(bf=of(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,wf.getSavedProgression(["prevScores","levelNo","bestScore","lastScore"]);case 2:e=t.sent,E.levelNo=e.levelNo||0,E.bestScore=e.bestScore||0,E.lastScore=e.lastScore||0,E.prevScores=e.prevScores||[];case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Sf(){return(Sf=of(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,wf.saveProgression("levelNo",E.levelNo);case 2:return t.next=4,wf.saveProgression("prevScores",E.prevScores);case 4:return t.next=6,wf.saveProgression("bestScore",E.bestScore);case 6:return t.next=8,wf.saveProgression("lastScore",E.lastScore);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ef(){ff=new _((function(){(function(){return _f.apply(this,arguments)})().then((function(){uf("phaser")}))})),mf=new Rt((function(){uf("three")})),function(){bf.apply(this,arguments)}(),wf.addEventListener("startLoading",Tf),wf.addEventListener("pause",Af),wf.addEventListener("resume",xf)}function Tf(){var t=0;!function(t,e){var i=document.createElement("canvas");i.width=64,i.height=64;var n=i.getContext("2d");n.fillStyle="#ffffff",n.arc(32,32,32,0,2*Math.PI,!1),n.fill();var r=i.toDataURL();Qp.loadTextures([{name:"wood",path:"https://cdn.jsdelivr.net/gh/my-files-schoolum/spi@main/assets/textures/wood.png"},{name:"wood_dark",path:"https://cdn.jsdelivr.net/gh/my-files-schoolum/spi@main/assets/textures/wood_dark.png"},{name:"wood_birch",path:"https://cdn.jsdelivr.net/gh/my-files-schoolum/spi@main/assets/textures/wood_birch.png"},{name:"wood_dark_birch",path:"https://cdn.jsdelivr.net/gh/my-files-schoolum/spi@main/assets/textures/wood_dark_birch.png"},{name:"wood_dark_birch_rotated",path:"https://cdn.jsdelivr.net/gh/my-files-schoolum/spi@main/assets/textures/wood_dark_birch_rotated.png"},{name:"wood_dark_rotated",path:"https://cdn.jsdelivr.net/gh/my-files-schoolum/spi@main/assets/textures/wood_dark_rotated.png"},{name:"scrape_me",path:"https://cdn.jsdelivr.net/gh/my-files-schoolum/spi@main/assets/textures/scrape_me.png"},{name:"water_texture_color",path:"https://cdn.jsdelivr.net/gh/my-files-schoolum/spi@main/assets/textures/water/water_texture_color.jpg"},{name:"ring",path:"https://cdn.jsdelivr.net/gh/my-files-schoolum/spi@main/assets/textures/ring.png"},{name:"circle",path:r},{name:"lightning",path:"https://cdn.jsdelivr.net/gh/my-files-schoolum/spi@main/assets/textures/fxs/lightning_spritesheet.png"}],(function(){e("three textures")})),Qp.loadModels([{name:"level",path:"https://cdn.jsdelivr.net/gh/my-files-schoolum/spi@main/assets/models/all3.glb"}],(function(){e("three models")}))}(0,(function(e){uf(e),++t>=2&&wf.notifyLoadingComplete()}))}function _f(){return(_f=of(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=regeneratorRuntime.keys(E.locales);case 1:if((t.t1=t.t0()).done){t.next=8;break}return e=t.t1.value,t.next=5,wf.getPlatform().getTranslation(e);case 5:E.locales[e]=t.sent,t.next=1;break;case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}E.saveGame=function(){!function(){Sf.apply(this,arguments)}()},E.showFacebookTournament=function(t){wf.getPlatform().isFacebook()?wf.getPlatform().showTournamentCreatorPopup().then((function(){t(!0)})):t(!1)},"loading"===wf.getState()?wf.addEventListener("ready",Ef):Ef(),wf.init()}]);